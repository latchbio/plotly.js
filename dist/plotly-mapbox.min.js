/**
* plotly.js (mapbox - minified) v2.35.2
* Copyright 2012-2024, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(
 function(root, factory) {
  if (typeof define === "function" && define.amd) {
   define(factory);
  } else if (typeof module === "object" && module.exports) {
   module.exports = factory();
  } else {
   root.moduleName = factory();
  }
} (typeof self !== "undefined" ? self : this, () => {
"use strict";var Plotly=(()=>{var R7=Object.defineProperty;var Uj=Object.getOwnPropertyDescriptor;var Vj=Object.getOwnPropertyNames;var Hj=Object.prototype.hasOwnProperty;var F7=(e,t)=>()=>(e&&(t=e(e=0)),t);var he=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Gj=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Vj(t))!Hj.call(e,a)&&a!==r&&R7(e,a,{get:()=>t[a],enumerable:!(i=Uj(t,a))||i.enumerable});return e};var Zj=e=>Gj(R7({},"__esModule",{value:!0}),e);var s_=he(q7=>{"use strict";q7.version="2.35.2"});var B7=he((N7,l_)=>{(function(t,r,i){r[t]=r[t]||i(),typeof l_!="undefined"&&l_.exports?l_.exports=r[t]:typeof define=="function"&&define.amd&&define(function(){return r[t]})})("Promise",typeof window!="undefined"?window:N7,function(){"use strict";var t,r,i,a=Object.prototype.toString,s=typeof setImmediate!="undefined"?function(R){return setImmediate(R)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(R,N,z,B){return Object.defineProperty(R,N,{value:z,writable:!0,configurable:B!==!1})}}catch(I){t=function(N,z,B){return N[z]=B,N}}i=function(){var R,N,z;function B(H,V){this.fn=H,this.self=V,this.next=void 0}return{add:function(V,Y){z=new B(V,Y),N?N.next=z:R=z,N=z,z=void 0},drain:function(){var V=R;for(R=N=r=void 0;V;)V.fn.call(V.self),V=V.next}}}();function l(I,R){i.add(I,R),r||(r=s(i.drain))}function u(I){var R,N=typeof I;return I!=null&&(N=="object"||N=="function")&&(R=I.then),typeof R=="function"?R:!1}function c(){for(var I=0;I<this.chain.length;I++)v(this,this.state===1?this.chain[I].success:this.chain[I].failure,this.chain[I]);this.chain.length=0}function v(I,R,N){var z,B;try{R===!1?N.reject(I.msg):(R===!0?z=I.msg:z=R.call(void 0,I.msg),z===N.promise?N.reject(TypeError("Promise-chain cycle")):(B=u(z))?B.call(z,N.resolve,N.reject):N.resolve(z))}catch(H){N.reject(H)}}function m(I){var R,N=this;if(!N.triggered){N.triggered=!0,N.def&&(N=N.def);try{(R=u(I))?l(function(){var z=new M(N);try{R.call(I,function(){m.apply(z,arguments)},function(){_.apply(z,arguments)})}catch(B){_.call(z,B)}}):(N.msg=I,N.state=1,N.chain.length>0&&l(c,N))}catch(z){_.call(new M(N),z)}}}function _(I){var R=this;R.triggered||(R.triggered=!0,R.def&&(R=R.def),R.msg=I,R.state=2,R.chain.length>0&&l(c,R))}function T(I,R,N,z){for(var B=0;B<R.length;B++)(function(V){I.resolve(R[V]).then(function(J){N(V,J)},z)})(B)}function M(I){this.def=I,this.triggered=!1}function k(I){this.promise=I,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function L(I){if(typeof I!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var R=new k(this);this.then=function(z,B){var H={success:typeof z=="function"?z:!0,failure:typeof B=="function"?B:!1};return H.promise=new this.constructor(function(Y,J){if(typeof Y!="function"||typeof J!="function")throw TypeError("Not a function");H.resolve=Y,H.reject=J}),R.chain.push(H),R.state!==0&&l(c,R),H.promise},this.catch=function(z){return this.then(void 0,z)};try{I.call(void 0,function(z){m.call(R,z)},function(z){_.call(R,z)})}catch(N){_.call(R,N)}}var E=t({},"constructor",L,!1);return L.prototype=E,t(E,"__NPO__",0,!1),t(L,"resolve",function(R){var N=this;return R&&typeof R=="object"&&R.__NPO__===1?R:new N(function(B,H){if(typeof B!="function"||typeof H!="function")throw TypeError("Not a function");B(R)})}),t(L,"reject",function(R){return new this(function(z,B){if(typeof z!="function"||typeof B!="function")throw TypeError("Not a function");B(R)})}),t(L,"all",function(R){var N=this;return a.call(R)!="[object Array]"?N.reject(TypeError("Not an array")):R.length===0?N.resolve([]):new N(function(B,H){if(typeof B!="function"||typeof H!="function")throw TypeError("Not a function");var V=R.length,Y=Array(V),J=0;T(N,R,function(ne,oe){Y[ne]=oe,++J===V&&B(Y)},H)})}),t(L,"race",function(R){var N=this;return a.call(R)!="[object Array]"?N.reject(TypeError("Not an array")):new N(function(B,H){if(typeof B!="function"||typeof H!="function")throw TypeError("Not a function");T(N,R,function(Y,J){B(J)},H)})}),L})});var Ka=he((Pye,u_)=>{(function(){var e={version:"3.8.2"},t=[].slice,r=function(y){return t.call(y)},i=self.document;function a(y){return y&&(y.ownerDocument||y.document||y).documentElement}function s(y){return y&&(y.ownerDocument&&y.ownerDocument.defaultView||y.document&&y||y.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(y){r=function(S){for(var D=S.length,O=new Array(D);D--;)O[D]=S[D];return O}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(y){var l=this.Element.prototype,u=l.setAttribute,c=l.setAttributeNS,v=this.CSSStyleDeclaration.prototype,m=v.setProperty;l.setAttribute=function(S,D){u.call(this,S,D+"")},l.setAttributeNS=function(S,D,O){c.call(this,S,D,O+"")},v.setProperty=function(S,D,O){m.call(this,S,D+"",O)}}e.ascending=_;function _(y,S){return y<S?-1:y>S?1:y>=S?0:NaN}e.descending=function(y,S){return S<y?-1:S>y?1:S>=y?0:NaN},e.min=function(y,S){var D=-1,O=y.length,U,Z;if(arguments.length===1){for(;++D<O;)if((Z=y[D])!=null&&Z>=Z){U=Z;break}for(;++D<O;)(Z=y[D])!=null&&U>Z&&(U=Z)}else{for(;++D<O;)if((Z=S.call(y,y[D],D))!=null&&Z>=Z){U=Z;break}for(;++D<O;)(Z=S.call(y,y[D],D))!=null&&U>Z&&(U=Z)}return U},e.max=function(y,S){var D=-1,O=y.length,U,Z;if(arguments.length===1){for(;++D<O;)if((Z=y[D])!=null&&Z>=Z){U=Z;break}for(;++D<O;)(Z=y[D])!=null&&Z>U&&(U=Z)}else{for(;++D<O;)if((Z=S.call(y,y[D],D))!=null&&Z>=Z){U=Z;break}for(;++D<O;)(Z=S.call(y,y[D],D))!=null&&Z>U&&(U=Z)}return U},e.extent=function(y,S){var D=-1,O=y.length,U,Z,$;if(arguments.length===1){for(;++D<O;)if((Z=y[D])!=null&&Z>=Z){U=$=Z;break}for(;++D<O;)(Z=y[D])!=null&&(U>Z&&(U=Z),$<Z&&($=Z))}else{for(;++D<O;)if((Z=S.call(y,y[D],D))!=null&&Z>=Z){U=$=Z;break}for(;++D<O;)(Z=S.call(y,y[D],D))!=null&&(U>Z&&(U=Z),$<Z&&($=Z))}return[U,$]};function T(y){return y===null?NaN:+y}function M(y){return!isNaN(y)}e.sum=function(y,S){var D=0,O=y.length,U,Z=-1;if(arguments.length===1)for(;++Z<O;)M(U=+y[Z])&&(D+=U);else for(;++Z<O;)M(U=+S.call(y,y[Z],Z))&&(D+=U);return D},e.mean=function(y,S){var D=0,O=y.length,U,Z=-1,$=O;if(arguments.length===1)for(;++Z<O;)M(U=T(y[Z]))?D+=U:--$;else for(;++Z<O;)M(U=T(S.call(y,y[Z],Z)))?D+=U:--$;if($)return D/$},e.quantile=function(y,S){var D=(y.length-1)*S+1,O=Math.floor(D),U=+y[O-1],Z=D-O;return Z?U+Z*(y[O]-U):U},e.median=function(y,S){var D=[],O=y.length,U,Z=-1;if(arguments.length===1)for(;++Z<O;)M(U=T(y[Z]))&&D.push(U);else for(;++Z<O;)M(U=T(S.call(y,y[Z],Z)))&&D.push(U);if(D.length)return e.quantile(D.sort(_),.5)},e.variance=function(y,S){var D=y.length,O=0,U,Z,$=0,X=-1,ae=0;if(arguments.length===1)for(;++X<D;)M(U=T(y[X]))&&(Z=U-O,O+=Z/++ae,$+=Z*(U-O));else for(;++X<D;)M(U=T(S.call(y,y[X],X)))&&(Z=U-O,O+=Z/++ae,$+=Z*(U-O));if(ae>1)return $/(ae-1)},e.deviation=function(){var y=e.variance.apply(this,arguments);return y&&Math.sqrt(y)};function k(y){return{left:function(S,D,O,U){for(arguments.length<3&&(O=0),arguments.length<4&&(U=S.length);O<U;){var Z=O+U>>>1;y(S[Z],D)<0?O=Z+1:U=Z}return O},right:function(S,D,O,U){for(arguments.length<3&&(O=0),arguments.length<4&&(U=S.length);O<U;){var Z=O+U>>>1;y(S[Z],D)>0?U=Z:O=Z+1}return O}}}var L=k(_);e.bisectLeft=L.left,e.bisect=e.bisectRight=L.right,e.bisector=function(y){return k(y.length===1?function(S,D){return _(y(S),D)}:y)},e.shuffle=function(y,S,D){(O=arguments.length)<3&&(D=y.length,O<2&&(S=0));for(var O=D-S,U,Z;O;)Z=Math.random()*O--|0,U=y[O+S],y[O+S]=y[Z+S],y[Z+S]=U;return y},e.permute=function(y,S){for(var D=S.length,O=new Array(D);D--;)O[D]=y[S[D]];return O},e.pairs=function(y){for(var S=0,D=y.length-1,O,U=y[0],Z=new Array(D<0?0:D);S<D;)Z[S]=[O=U,U=y[++S]];return Z},e.transpose=function(y){if(!(Z=y.length))return[];for(var S=-1,D=e.min(y,E),O=new Array(D);++S<D;)for(var U=-1,Z,$=O[S]=new Array(Z);++U<Z;)$[U]=y[U][S];return O};function E(y){return y.length}e.zip=function(){return e.transpose(arguments)},e.keys=function(y){var S=[];for(var D in y)S.push(D);return S},e.values=function(y){var S=[];for(var D in y)S.push(y[D]);return S},e.entries=function(y){var S=[];for(var D in y)S.push({key:D,value:y[D]});return S},e.merge=function(y){for(var S=y.length,D,O=-1,U=0,Z,$;++O<S;)U+=y[O].length;for(Z=new Array(U);--S>=0;)for($=y[S],D=$.length;--D>=0;)Z[--U]=$[D];return Z};var I=Math.abs;e.range=function(y,S,D){if(arguments.length<3&&(D=1,arguments.length<2&&(S=y,y=0)),(S-y)/D===1/0)throw new Error("infinite range");var O=[],U=R(I(D)),Z=-1,$;if(y*=U,S*=U,D*=U,D<0)for(;($=y+D*++Z)>S;)O.push($/U);else for(;($=y+D*++Z)<S;)O.push($/U);return O};function R(y){for(var S=1;y*S%1;)S*=10;return S}function N(y,S){for(var D in S)Object.defineProperty(y.prototype,D,{value:S[D],enumerable:!1})}e.map=function(y,S){var D=new z;if(y instanceof z)y.forEach(function(X,ae){D.set(X,ae)});else if(Array.isArray(y)){var O=-1,U=y.length,Z;if(arguments.length===1)for(;++O<U;)D.set(O,y[O]);else for(;++O<U;)D.set(S.call(y,Z=y[O],O),Z)}else for(var $ in y)D.set($,y[$]);return D};function z(){this._=Object.create(null)}var B="__proto__",H="\0";N(z,{has:J,get:function(y){return this._[V(y)]},set:function(y,S){return this._[V(y)]=S},remove:re,keys:ne,values:function(){var y=[];for(var S in this._)y.push(this._[S]);return y},entries:function(){var y=[];for(var S in this._)y.push({key:Y(S),value:this._[S]});return y},size:oe,empty:ue,forEach:function(y){for(var S in this._)y.call(this,Y(S),this._[S])}});function V(y){return(y+="")===B||y[0]===H?H+y:y}function Y(y){return(y+="")[0]===H?y.slice(1):y}function J(y){return V(y)in this._}function re(y){return(y=V(y))in this._&&delete this._[y]}function ne(){var y=[];for(var S in this._)y.push(Y(S));return y}function oe(){var y=0;for(var S in this._)++y;return y}function ue(){for(var y in this._)return!1;return!0}e.nest=function(){var y={},S=[],D=[],O,U;function Z(X,ae,de){if(de>=S.length)return U?U.call(y,ae):O?ae.sort(O):ae;for(var ge=-1,De=ae.length,Pe=S[de++],Je,ot,ze,Ue=new z,je;++ge<De;)(je=Ue.get(Je=Pe(ot=ae[ge])))?je.push(ot):Ue.set(Je,[ot]);return X?(ot=X(),ze=function(lt,nt){ot.set(lt,Z(X,nt,de))}):(ot={},ze=function(lt,nt){ot[lt]=Z(X,nt,de)}),Ue.forEach(ze),ot}function $(X,ae){if(ae>=S.length)return X;var de=[],ge=D[ae++];return X.forEach(function(De,Pe){de.push({key:De,values:$(Pe,ae)})}),ge?de.sort(function(De,Pe){return ge(De.key,Pe.key)}):de}return y.map=function(X,ae){return Z(ae,X,0)},y.entries=function(X){return $(Z(e.map,X,0),0)},y.key=function(X){return S.push(X),y},y.sortKeys=function(X){return D[S.length-1]=X,y},y.sortValues=function(X){return O=X,y},y.rollup=function(X){return U=X,y},y},e.set=function(y){var S=new me;if(y)for(var D=0,O=y.length;D<O;++D)S.add(y[D]);return S};function me(){this._=Object.create(null)}N(me,{has:J,add:function(y){return this._[V(y+="")]=!0,y},remove:re,values:ne,size:oe,empty:ue,forEach:function(y){for(var S in this._)y.call(this,Y(S))}}),e.behavior={};function Se(y){return y}e.rebind=function(y,S){for(var D=1,O=arguments.length,U;++D<O;)y[U=arguments[D]]=Ce(y,S,S[U]);return y};function Ce(y,S,D){return function(){var O=D.apply(S,arguments);return O===S?y:O}}function Me(y,S){if(S in y)return S;S=S.charAt(0).toUpperCase()+S.slice(1);for(var D=0,O=_e.length;D<O;++D){var U=_e[D]+S;if(U in y)return U}}var _e=["webkit","ms","moz","Moz","o","O"];function Te(){}e.dispatch=function(){for(var y=new Ae,S=-1,D=arguments.length;++S<D;)y[arguments[S]]=Le(y);return y};function Ae(){}Ae.prototype.on=function(y,S){var D=y.indexOf("."),O="";if(D>=0&&(O=y.slice(D+1),y=y.slice(0,D)),y)return arguments.length<2?this[y].on(O):this[y].on(O,S);if(arguments.length===2){if(S==null)for(y in this)this.hasOwnProperty(y)&&this[y].on(O,null);return this}};function Le(y){var S=[],D=new z;function O(){for(var U=S,Z=-1,$=U.length,X;++Z<$;)(X=U[Z].on)&&X.apply(this,arguments);return y}return O.on=function(U,Z){var $=D.get(U),X;return arguments.length<2?$&&$.on:($&&($.on=null,S=S.slice(0,X=S.indexOf($)).concat(S.slice(X+1)),D.remove(U)),Z&&S.push(D.set(U,{on:Z})),y)},O}e.event=null;function Ke(){e.event.preventDefault()}function ct(){for(var y=e.event,S;S=y.sourceEvent;)y=S;return y}function it(y){for(var S=new Ae,D=0,O=arguments.length;++D<O;)S[arguments[D]]=Le(S);return S.of=function(U,Z){return function($){try{var X=$.sourceEvent=e.event;$.target=y,e.event=$,S[$.type].apply(U,Z)}finally{e.event=X}}},S}e.requote=function(y){return y.replace(ut,"\\$&")};var ut=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ge={}.__proto__?function(y,S){y.__proto__=S}:function(y,S){for(var D in S)y[D]=S[D]};function xt(y){return Ge(y,mt),y}var at=function(y,S){return S.querySelector(y)},At=function(y,S){return S.querySelectorAll(y)},kt=function(y,S){var D=y.matches||y[Me(y,"matchesSelector")];return kt=function(O,U){return D.call(O,U)},kt(y,S)};typeof Sizzle=="function"&&(at=function(y,S){return Sizzle(y,S)[0]||null},At=Sizzle,kt=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var mt=e.selection.prototype=[];mt.select=function(y){var S=[],D,O,U,Z;y=ye(y);for(var $=-1,X=this.length;++$<X;){S.push(D=[]),D.parentNode=(U=this[$]).parentNode;for(var ae=-1,de=U.length;++ae<de;)(Z=U[ae])?(D.push(O=y.call(Z,Z.__data__,ae,$)),O&&"__data__"in Z&&(O.__data__=Z.__data__)):D.push(null)}return xt(S)};function ye(y){return typeof y=="function"?y:function(){return at(y,this)}}mt.selectAll=function(y){var S=[],D,O;y=Re(y);for(var U=-1,Z=this.length;++U<Z;)for(var $=this[U],X=-1,ae=$.length;++X<ae;)(O=$[X])&&(S.push(D=r(y.call(O,O.__data__,X,U))),D.parentNode=O);return xt(S)};function Re(y){return typeof y=="function"?y:function(){return At(y,this)}}var xe="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:et,qualify:function(y){var S=y.indexOf(":"),D=y;return S>=0&&(D=y.slice(0,S))!=="xmlns"&&(y=y.slice(S+1)),et.hasOwnProperty(D)?{space:et[D],local:y}:y}},mt.attr=function(y,S){if(arguments.length<2){if(typeof y=="string"){var D=this.node();return y=e.ns.qualify(y),y.local?D.getAttributeNS(y.space,y.local):D.getAttribute(y)}for(S in y)this.each(vt(S,y[S]));return this}return this.each(vt(y,S))};function vt(y,S){y=e.ns.qualify(y);function D(){this.removeAttribute(y)}function O(){this.removeAttributeNS(y.space,y.local)}function U(){this.setAttribute(y,S)}function Z(){this.setAttributeNS(y.space,y.local,S)}function $(){var ae=S.apply(this,arguments);ae==null?this.removeAttribute(y):this.setAttribute(y,ae)}function X(){var ae=S.apply(this,arguments);ae==null?this.removeAttributeNS(y.space,y.local):this.setAttributeNS(y.space,y.local,ae)}return S==null?y.local?O:D:typeof S=="function"?y.local?X:$:y.local?Z:U}function tt(y){return y.trim().replace(/\s+/g," ")}mt.classed=function(y,S){if(arguments.length<2){if(typeof y=="string"){var D=this.node(),O=(y=Mt(y)).length,U=-1;if(S=D.classList){for(;++U<O;)if(!S.contains(y[U]))return!1}else for(S=D.getAttribute("class");++U<O;)if(!Bt(y[U]).test(S))return!1;return!0}for(S in y)this.each(Ct(S,y[S]));return this}return this.each(Ct(y,S))};function Bt(y){return new RegExp("(?:^|\\s+)"+e.requote(y)+"(?:\\s+|$)","g")}function Mt(y){return(y+"").trim().split(/^|\s+/)}function Ct(y,S){y=Mt(y).map(Rt);var D=y.length;function O(){for(var Z=-1;++Z<D;)y[Z](this,S)}function U(){for(var Z=-1,$=S.apply(this,arguments);++Z<D;)y[Z](this,$)}return typeof S=="function"?U:O}function Rt(y){var S=Bt(y);return function(D,O){if(U=D.classList)return O?U.add(y):U.remove(y);var U=D.getAttribute("class")||"";O?(S.lastIndex=0,S.test(U)||D.setAttribute("class",tt(U+" "+y))):D.setAttribute("class",tt(U.replace(S," ")))}}mt.style=function(y,S,D){var O=arguments.length;if(O<3){if(typeof y!="string"){O<2&&(S="");for(D in y)this.each(Ot(D,y[D],S));return this}if(O<2){var U=this.node();return s(U).getComputedStyle(U,null).getPropertyValue(y)}D=""}return this.each(Ot(y,S,D))};function Ot(y,S,D){function O(){this.style.removeProperty(y)}function U(){this.style.setProperty(y,S,D)}function Z(){var $=S.apply(this,arguments);$==null?this.style.removeProperty(y):this.style.setProperty(y,$,D)}return S==null?O:typeof S=="function"?Z:U}mt.property=function(y,S){if(arguments.length<2){if(typeof y=="string")return this.node()[y];for(S in y)this.each(gt(S,y[S]));return this}return this.each(gt(y,S))};function gt(y,S){function D(){delete this[y]}function O(){this[y]=S}function U(){var Z=S.apply(this,arguments);Z==null?delete this[y]:this[y]=Z}return S==null?D:typeof S=="function"?U:O}mt.text=function(y){return arguments.length?this.each(typeof y=="function"?function(){var S=y.apply(this,arguments);this.textContent=S==null?"":S}:y==null?function(){this.textContent=""}:function(){this.textContent=y}):this.node().textContent},mt.html=function(y){return arguments.length?this.each(typeof y=="function"?function(){var S=y.apply(this,arguments);this.innerHTML=S==null?"":S}:y==null?function(){this.innerHTML=""}:function(){this.innerHTML=y}):this.node().innerHTML},mt.append=function(y){return y=Et(y),this.select(function(){return this.appendChild(y.apply(this,arguments))})};function Et(y){function S(){var O=this.ownerDocument,U=this.namespaceURI;return U===xe&&O.documentElement.namespaceURI===xe?O.createElement(y):O.createElementNS(U,y)}function D(){return this.ownerDocument.createElementNS(y.space,y.local)}return typeof y=="function"?y:(y=e.ns.qualify(y)).local?D:S}mt.insert=function(y,S){return y=Et(y),S=ye(S),this.select(function(){return this.insertBefore(y.apply(this,arguments),S.apply(this,arguments)||null)})},mt.remove=function(){return this.each(ir)};function ir(){var y=this.parentNode;y&&y.removeChild(this)}mt.data=function(y,S){var D=-1,O=this.length,U,Z;if(!arguments.length){for(y=new Array(O=(U=this[0]).length);++D<O;)(Z=U[D])&&(y[D]=Z.__data__);return y}function $(ge,De){var Pe,Je=ge.length,ot=De.length,ze=Math.min(Je,ot),Ue=new Array(ot),je=new Array(ot),lt=new Array(Je),nt,We;if(S){var Zt=new z,or=new Array(Je),fr;for(Pe=-1;++Pe<Je;)(nt=ge[Pe])&&(Zt.has(fr=S.call(nt,nt.__data__,Pe))?lt[Pe]=nt:Zt.set(fr,nt),or[Pe]=fr);for(Pe=-1;++Pe<ot;)(nt=Zt.get(fr=S.call(De,We=De[Pe],Pe)))?nt!==!0&&(Ue[Pe]=nt,nt.__data__=We):je[Pe]=Gt(We),Zt.set(fr,!0);for(Pe=-1;++Pe<Je;)Pe in or&&Zt.get(or[Pe])!==!0&&(lt[Pe]=ge[Pe])}else{for(Pe=-1;++Pe<ze;)nt=ge[Pe],We=De[Pe],nt?(nt.__data__=We,Ue[Pe]=nt):je[Pe]=Gt(We);for(;Pe<ot;++Pe)je[Pe]=Gt(De[Pe]);for(;Pe<Je;++Pe)lt[Pe]=ge[Pe]}je.update=Ue,je.parentNode=Ue.parentNode=lt.parentNode=ge.parentNode,X.push(je),ae.push(Ue),de.push(lt)}var X=xr([]),ae=xt([]),de=xt([]);if(typeof y=="function")for(;++D<O;)$(U=this[D],y.call(U,U.parentNode.__data__,D));else for(;++D<O;)$(U=this[D],y);return ae.enter=function(){return X},ae.exit=function(){return de},ae};function Gt(y){return{__data__:y}}mt.datum=function(y){return arguments.length?this.property("__data__",y):this.property("__data__")},mt.filter=function(y){var S=[],D,O,U;typeof y!="function"&&(y=Ne(y));for(var Z=0,$=this.length;Z<$;Z++){S.push(D=[]),D.parentNode=(O=this[Z]).parentNode;for(var X=0,ae=O.length;X<ae;X++)(U=O[X])&&y.call(U,U.__data__,X,Z)&&D.push(U)}return xt(S)};function Ne(y){return function(){return kt(this,y)}}mt.order=function(){for(var y=-1,S=this.length;++y<S;)for(var D=this[y],O=D.length-1,U=D[O],Z;--O>=0;)(Z=D[O])&&(U&&U!==Z.nextSibling&&U.parentNode.insertBefore(Z,U),U=Z);return this},mt.sort=function(y){y=ft.apply(this,arguments);for(var S=-1,D=this.length;++S<D;)this[S].sort(y);return this.order()};function ft(y){return arguments.length||(y=_),function(S,D){return S&&D?y(S.__data__,D.__data__):!S-!D}}mt.each=function(y){return pt(this,function(S,D,O){y.call(S,S.__data__,D,O)})};function pt(y,S){for(var D=0,O=y.length;D<O;D++)for(var U=y[D],Z=0,$=U.length,X;Z<$;Z++)(X=U[Z])&&S(X,Z,D);return y}mt.call=function(y){var S=r(arguments);return y.apply(S[0]=this,S),this},mt.empty=function(){return!this.node()},mt.node=function(){for(var y=0,S=this.length;y<S;y++)for(var D=this[y],O=0,U=D.length;O<U;O++){var Z=D[O];if(Z)return Z}return null},mt.size=function(){var y=0;return pt(this,function(){++y}),y};function xr(y){return Ge(y,pr),y}var pr=[];e.selection.enter=xr,e.selection.enter.prototype=pr,pr.append=mt.append,pr.empty=mt.empty,pr.node=mt.node,pr.call=mt.call,pr.size=mt.size,pr.select=function(y){for(var S=[],D,O,U,Z,$,X=-1,ae=this.length;++X<ae;){U=(Z=this[X]).update,S.push(D=[]),D.parentNode=Z.parentNode;for(var de=-1,ge=Z.length;++de<ge;)($=Z[de])?(D.push(U[de]=O=y.call(Z.parentNode,$.__data__,de,X)),O.__data__=$.__data__):D.push(null)}return xt(S)},pr.insert=function(y,S){return arguments.length<2&&(S=Tt(this)),mt.insert.call(this,y,S)};function Tt(y){var S,D;return function(O,U,Z){var $=y[Z].update,X=$.length,ae;for(Z!=D&&(D=Z,S=0),U>=S&&(S=U+1);!(ae=$[S])&&++S<X;);return ae}}e.select=function(y){var S;return typeof y=="string"?(S=[at(y,i)],S.parentNode=i.documentElement):(S=[y],S.parentNode=a(y)),xt([S])},e.selectAll=function(y){var S;return typeof y=="string"?(S=r(At(y,i)),S.parentNode=i.documentElement):(S=r(y),S.parentNode=null),xt([S])},mt.on=function(y,S,D){var O=arguments.length;if(O<3){if(typeof y!="string"){O<2&&(S=!1);for(D in y)this.each(wt(D,y[D],S));return this}if(O<2)return(O=this.node()["__on"+y])&&O._;D=!1}return this.each(wt(y,S,D))};function wt(y,S,D){var O="__on"+y,U=y.indexOf("."),Z=Kt;U>0&&(y=y.slice(0,U));var $=Vt.get(y);$&&(y=$,Z=Ht);function X(){var ge=this[O];ge&&(this.removeEventListener(y,ge,ge.$),delete this[O])}function ae(){var ge=Z(S,r(arguments));X.call(this),this.addEventListener(y,this[O]=ge,ge.$=D),ge._=S}function de(){var ge=new RegExp("^__on([^.]+)"+e.requote(y)+"$"),De;for(var Pe in this)if(De=Pe.match(ge)){var Je=this[Pe];this.removeEventListener(De[1],Je,Je.$),delete this[Pe]}}return U?S?ae:X:S?Te:de}var Vt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});i&&Vt.forEach(function(y){"on"+y in i&&Vt.remove(y)});function Kt(y,S){return function(D){var O=e.event;e.event=D,S[0]=this.__data__;try{y.apply(this,S)}finally{e.event=O}}}function Ht(y,S){var D=Kt(y,S);return function(O){var U=this,Z=O.relatedTarget;(!Z||Z!==U&&!(Z.compareDocumentPosition(U)&8))&&D.call(U,O)}}var Ut,er=0;function Mr(y){var S=".dragsuppress-"+ ++er,D="click"+S,O=e.select(s(y)).on("touchmove"+S,Ke).on("dragstart"+S,Ke).on("selectstart"+S,Ke);if(Ut==null&&(Ut="onselectstart"in y?!1:Me(y.style,"userSelect")),Ut){var U=a(y).style,Z=U[Ut];U[Ut]="none"}return function($){if(O.on(S,null),Ut&&(U[Ut]=Z),$){var X=function(){O.on(D,null)};O.on(D,function(){Ke(),X()},!0),setTimeout(X,0)}}}e.mouse=function(y){return Pt(y,ct())};var br=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Pt(y,S){S.changedTouches&&(S=S.changedTouches[0]);var D=y.ownerSVGElement||y;if(D.createSVGPoint){var O=D.createSVGPoint();if(br<0){var U=s(y);if(U.scrollX||U.scrollY){D=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Z=D[0][0].getScreenCTM();br=!(Z.f||Z.e),D.remove()}}return br?(O.x=S.pageX,O.y=S.pageY):(O.x=S.clientX,O.y=S.clientY),O=O.matrixTransform(y.getScreenCTM().inverse()),[O.x,O.y]}var $=y.getBoundingClientRect();return[S.clientX-$.left-y.clientLeft,S.clientY-$.top-y.clientTop]}e.touch=function(y,S,D){if(arguments.length<3&&(D=S,S=ct().changedTouches),S){for(var O=0,U=S.length,Z;O<U;++O)if((Z=S[O]).identifier===D)return Pt(y,Z)}},e.behavior.drag=function(){var y=it(U,"drag","dragstart","dragend"),S=null,D=Z(Te,e.mouse,s,"mousemove","mouseup"),O=Z(Fe,e.touch,Se,"touchmove","touchend");function U(){this.on("mousedown.drag",D).on("touchstart.drag",O)}function Z($,X,ae,de,ge){return function(){var De=this,Pe=e.event.target.correspondingElement||e.event.target,Je=De.parentNode,ot=y.of(De,arguments),ze=0,Ue=$(),je=".drag"+(Ue==null?"":"-"+Ue),lt,nt=e.select(ae(Pe)).on(de+je,or).on(ge+je,fr),We=Mr(Pe),Zt=X(Je,Ue);S?(lt=S.apply(De,arguments),lt=[lt.x-Zt[0],lt.y-Zt[1]]):lt=[0,0],ot({type:"dragstart"});function or(){var lr=X(Je,Ue),Dr,Ir;lr&&(Dr=lr[0]-Zt[0],Ir=lr[1]-Zt[1],ze|=Dr|Ir,Zt=lr,ot({type:"drag",x:lr[0]+lt[0],y:lr[1]+lt[1],dx:Dr,dy:Ir}))}function fr(){X(Je,Ue)&&(nt.on(de+je,null).on(ge+je,null),We(ze),ot({type:"dragend"}))}}}return U.origin=function($){return arguments.length?(S=$,U):S},e.rebind(U,y,"on")};function Fe(){return e.event.changedTouches[0].identifier}e.touches=function(y,S){return arguments.length<2&&(S=ct().touches),S?r(S).map(function(D){var O=Pt(y,D);return O.identifier=D.identifier,O}):[]};var He=1e-6,bt=He*He,dt=Math.PI,gr=2*dt,Lr=gr-He,Ar=dt/2,Hr=dt/180,xa=180/dt;function Ca(y){return y>0?1:y<0?-1:0}function Pa(y,S,D){return(S[0]-y[0])*(D[1]-y[1])-(S[1]-y[1])*(D[0]-y[0])}function Fi(y){return y>1?0:y<-1?dt:Math.acos(y)}function Ki(y){return y>1?Ar:y<-1?-Ar:Math.asin(y)}function gn(y){return((y=Math.exp(y))-1/y)/2}function Xi(y){return((y=Math.exp(y))+1/y)/2}function Qn(y){return((y=Math.exp(2*y))-1)/(y+1)}function Pn(y){return(y=Math.sin(y/2))*y}var Gi=Math.SQRT2,pa=2,Gr=4;e.interpolateZoom=function(y,S){var D=y[0],O=y[1],U=y[2],Z=S[0],$=S[1],X=S[2],ae=Z-D,de=$-O,ge=ae*ae+de*de,De,Pe;if(ge<bt)Pe=Math.log(X/U)/Gi,De=function(lt){return[D+lt*ae,O+lt*de,U*Math.exp(Gi*lt*Pe)]};else{var Je=Math.sqrt(ge),ot=(X*X-U*U+Gr*ge)/(2*U*pa*Je),ze=(X*X-U*U-Gr*ge)/(2*X*pa*Je),Ue=Math.log(Math.sqrt(ot*ot+1)-ot),je=Math.log(Math.sqrt(ze*ze+1)-ze);Pe=(je-Ue)/Gi,De=function(lt){var nt=lt*Pe,We=Xi(Ue),Zt=U/(pa*Je)*(We*Qn(Gi*nt+Ue)-gn(Ue));return[D+Zt*ae,O+Zt*de,U*We/Xi(Gi*nt+Ue)]}}return De.duration=Pe*1e3,De},e.behavior.zoom=function(){var y={x:0,y:0,k:1},S,D,O,U=[960,500],Z=Qa,$=250,X=0,ae="mousedown.zoom",de="mousemove.zoom",ge="mouseup.zoom",De,Pe="touchstart.zoom",Je,ot=it(nt,"zoomstart","zoom","zoomend"),ze,Ue,je,lt;vi||(vi="onwheel"in i?(Zr=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Zr=function(){return e.event.wheelDelta},"mousewheel"):(Zr=function(){return-e.event.detail},"MozMousePixelScroll"));function nt(jt){jt.on(ae,Kr).on(vi+".zoom",ri).on("dblclick.zoom",$a).on(Pe,Ba)}nt.event=function(jt){jt.each(function(){var Jr=ot.of(this,arguments),oa=y;lo?e.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},Ir(Jr)}).tween("zoom:zoom",function(){var la=U[0],Ei=U[1],Vi=D?D[0]:la/2,$i=D?D[1]:Ei/2,xi=e.interpolateZoom([(Vi-y.x)/y.k,($i-y.y)/y.k,la/y.k],[(Vi-oa.x)/oa.k,($i-oa.y)/oa.k,la/oa.k]);return function(bn){var wr=xi(bn),Vr=la/wr[2];this.__chart__=y={x:Vi-wr[0]*Vr,y:$i-wr[1]*Vr,k:Vr},ta(Jr)}}).each("interrupt.zoom",function(){Ur(Jr)}).each("end.zoom",function(){Ur(Jr)}):(this.__chart__=y,Ir(Jr),ta(Jr),Ur(Jr))})},nt.translate=function(jt){return arguments.length?(y={x:+jt[0],y:+jt[1],k:y.k},Dr(),nt):[y.x,y.y]},nt.scale=function(jt){return arguments.length?(y={x:y.x,y:y.y,k:null},or(+jt),Dr(),nt):y.k},nt.scaleExtent=function(jt){return arguments.length?(Z=jt==null?Qa:[+jt[0],+jt[1]],nt):Z},nt.center=function(jt){return arguments.length?(O=jt&&[+jt[0],+jt[1]],nt):O},nt.size=function(jt){return arguments.length?(U=jt&&[+jt[0],+jt[1]],nt):U},nt.duration=function(jt){return arguments.length?($=+jt,nt):$},nt.x=function(jt){return arguments.length?(Ue=jt,ze=jt.copy(),y={x:0,y:0,k:1},nt):Ue},nt.y=function(jt){return arguments.length?(lt=jt,je=jt.copy(),y={x:0,y:0,k:1},nt):lt};function We(jt){return[(jt[0]-y.x)/y.k,(jt[1]-y.y)/y.k]}function Zt(jt){return[jt[0]*y.k+y.x,jt[1]*y.k+y.y]}function or(jt){y.k=Math.max(Z[0],Math.min(Z[1],jt))}function fr(jt,Jr){Jr=Zt(Jr),y.x+=jt[0]-Jr[0],y.y+=jt[1]-Jr[1]}function lr(jt,Jr,oa,la){jt.__chart__={x:y.x,y:y.y,k:y.k},or(Math.pow(2,la)),fr(D=Jr,oa),jt=e.select(jt),$>0&&(jt=jt.transition().duration($)),jt.call(nt.event)}function Dr(){Ue&&Ue.domain(ze.range().map(function(jt){return(jt-y.x)/y.k}).map(ze.invert)),lt&&lt.domain(je.range().map(function(jt){return(jt-y.y)/y.k}).map(je.invert))}function Ir(jt){X++||jt({type:"zoomstart"})}function ta(jt){Dr(),jt({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function Ur(jt){--X||(jt({type:"zoomend"}),D=null)}function Kr(){var jt=this,Jr=ot.of(jt,arguments),oa=0,la=e.select(s(jt)).on(de,$i).on(ge,xi),Ei=We(e.mouse(jt)),Vi=Mr(jt);lh.call(jt),Ir(Jr);function $i(){oa=1,fr(e.mouse(jt),Ei),ta(Jr)}function xi(){la.on(de,null).on(ge,null),Vi(oa),Ur(Jr)}}function Ba(){var jt=this,Jr=ot.of(jt,arguments),oa={},la=0,Ei,Vi=".zoom-"+e.event.changedTouches[0].identifier,$i="touchmove"+Vi,xi="touchend"+Vi,bn=[],wr=e.select(jt),Vr=Mr(jt);Ti(),Ir(Jr),wr.on(ae,null).on(Pe,Ti);function Ni(){var cn=e.touches(jt);return Ei=y.k,cn.forEach(function(pi){pi.identifier in oa&&(oa[pi.identifier]=We(pi))}),cn}function Ti(){var cn=e.event.target;e.select(cn).on($i,uo).on(xi,Rn),bn.push(cn);for(var pi=e.event.changedTouches,Ko=0,fo=pi.length;Ko<fo;++Ko)oa[pi[Ko].identifier]=null;var ci=Ni(),bf=Date.now();if(ci.length===1){if(bf-Je<500){var Ma=ci[0];lr(jt,Ma,oa[Ma.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),Ke()}Je=bf}else if(ci.length>1){var Ma=ci[0],ui=ci[1],Vl=Ma[0]-ui[0],$v=Ma[1]-ui[1];la=Vl*Vl+$v*$v}}function uo(){var cn=e.touches(jt),pi,Ko,fo,ci;lh.call(jt);for(var bf=0,Ma=cn.length;bf<Ma;++bf,ci=null)if(fo=cn[bf],ci=oa[fo.identifier]){if(Ko)break;pi=fo,Ko=ci}if(ci){var ui=(ui=fo[0]-pi[0])*ui+(ui=fo[1]-pi[1])*ui,Vl=la&&Math.sqrt(ui/la);pi=[(pi[0]+fo[0])/2,(pi[1]+fo[1])/2],Ko=[(Ko[0]+ci[0])/2,(Ko[1]+ci[1])/2],or(Vl*Ei)}Je=null,fr(pi,Ko),ta(Jr)}function Rn(){if(e.event.touches.length){for(var cn=e.event.changedTouches,pi=0,Ko=cn.length;pi<Ko;++pi)delete oa[cn[pi].identifier];for(var fo in oa)return void Ni()}e.selectAll(bn).on(Vi,null),wr.on(ae,Kr).on(Pe,Ba),Vr(),Ur(Jr)}}function ri(){var jt=ot.of(this,arguments);De?clearTimeout(De):(lh.call(this),S=We(D=O||e.mouse(this)),Ir(jt)),De=setTimeout(function(){De=null,Ur(jt)},50),Ke(),or(Math.pow(2,Zr()*.002)*y.k),fr(D,S),ta(jt)}function $a(){var jt=e.mouse(this),Jr=Math.log(y.k)/Math.LN2;lr(this,jt,We(jt),e.event.shiftKey?Math.ceil(Jr)-1:Math.floor(Jr)+1)}return e.rebind(nt,ot,"on")};var Qa=[0,1/0],Zr,vi;e.color=ga;function ga(){}ga.prototype.toString=function(){return this.rgb()+""},e.hsl=le;function le(y,S,D){return this instanceof le?(this.h=+y,this.s=+S,void(this.l=+D)):arguments.length<2?y instanceof le?new le(y.h,y.s,y.l):ea(""+y,_a,le):new le(y,S,D)}var ee=le.prototype=new ga;ee.brighter=function(y){return y=Math.pow(.7,arguments.length?y:1),new le(this.h,this.s,this.l/y)},ee.darker=function(y){return y=Math.pow(.7,arguments.length?y:1),new le(this.h,this.s,y*this.l)},ee.rgb=function(){return se(this.h,this.s,this.l)};function se(y,S,D){var O,U;y=isNaN(y)?0:(y%=360)<0?y+360:y,S=isNaN(S)||S<0?0:S>1?1:S,D=D<0?0:D>1?1:D,U=D<=.5?D*(1+S):D+S-D*S,O=2*D-U;function Z(X){return X>360?X-=360:X<0&&(X+=360),X<60?O+(U-O)*X/60:X<180?U:X<240?O+(U-O)*(240-X)/60:O}function $(X){return Math.round(Z(X)*255)}return new ua($(y+120),$(y),$(y-120))}e.hcl=ce;function ce(y,S,D){return this instanceof ce?(this.h=+y,this.c=+S,void(this.l=+D)):arguments.length<2?y instanceof ce?new ce(y.h,y.c,y.l):y instanceof rt?Tr(y.l,y.a,y.b):Tr((y=nr((y=e.rgb(y)).r,y.g,y.b)).l,y.a,y.b):new ce(y,S,D)}var Ee=ce.prototype=new ga;Ee.brighter=function(y){return new ce(this.h,this.c,Math.min(100,this.l+Ve*(arguments.length?y:1)))},Ee.darker=function(y){return new ce(this.h,this.c,Math.max(0,this.l-Ve*(arguments.length?y:1)))},Ee.rgb=function(){return Be(this.h,this.c,this.l).rgb()};function Be(y,S,D){return isNaN(y)&&(y=0),isNaN(S)&&(S=0),new rt(D,Math.cos(y*=Hr)*S,Math.sin(y)*S)}e.lab=rt;function rt(y,S,D){return this instanceof rt?(this.l=+y,this.a=+S,void(this.b=+D)):arguments.length<2?y instanceof rt?new rt(y.l,y.a,y.b):y instanceof ce?Be(y.h,y.c,y.l):nr((y=ua(y)).r,y.g,y.b):new rt(y,S,D)}var Ve=18,yt=.95047,Dt=1,Ft=1.08883,tr=rt.prototype=new ga;tr.brighter=function(y){return new rt(Math.min(100,this.l+Ve*(arguments.length?y:1)),this.a,this.b)},tr.darker=function(y){return new rt(Math.max(0,this.l-Ve*(arguments.length?y:1)),this.a,this.b)},tr.rgb=function(){return Wt(this.l,this.a,this.b)};function Wt(y,S,D){var O=(y+16)/116,U=O+S/500,Z=O-D/200;return U=Yr(U)*yt,O=Yr(O)*Dt,Z=Yr(Z)*Ft,new ua(ca(3.2404542*U-1.5371385*O-.4985314*Z),ca(-.969266*U+1.8760108*O+.041556*Z),ca(.0556434*U-.2040259*O+1.0572252*Z))}function Tr(y,S,D){return y>0?new ce(Math.atan2(D,S)*xa,Math.sqrt(S*S+D*D),y):new ce(NaN,NaN,y)}function Yr(y){return y>.206893034?y*y*y:(y-4/29)/7.787037}function Br(y){return y>.008856?Math.pow(y,1/3):7.787037*y+4/29}function ca(y){return Math.round(255*(y<=.00304?12.92*y:1.055*Math.pow(y,1/2.4)-.055))}e.rgb=ua;function ua(y,S,D){return this instanceof ua?(this.r=~~y,this.g=~~S,void(this.b=~~D)):arguments.length<2?y instanceof ua?new ua(y.r,y.g,y.b):ea(""+y,ua,se):new ua(y,S,D)}function Na(y){return new ua(y>>16,y>>8&255,y&255)}function ii(y){return Na(y)+""}var Wr=ua.prototype=new ga;Wr.brighter=function(y){y=Math.pow(.7,arguments.length?y:1);var S=this.r,D=this.g,O=this.b,U=30;return!S&&!D&&!O?new ua(U,U,U):(S&&S<U&&(S=U),D&&D<U&&(D=U),O&&O<U&&(O=U),new ua(Math.min(255,S/y),Math.min(255,D/y),Math.min(255,O/y)))},Wr.darker=function(y){return y=Math.pow(.7,arguments.length?y:1),new ua(y*this.r,y*this.g,y*this.b)},Wr.hsl=function(){return _a(this.r,this.g,this.b)},Wr.toString=function(){return"#"+yr(this.r)+yr(this.g)+yr(this.b)};function yr(y){return y<16?"0"+Math.max(0,y).toString(16):Math.min(255,y).toString(16)}function ea(y,S,D){var O=0,U=0,Z=0,$,X,ae;if($=/([a-z]+)\((.*)\)/.exec(y=y.toLowerCase()),$)switch(X=$[2].split(","),$[1]){case"hsl":return D(parseFloat(X[0]),parseFloat(X[1])/100,parseFloat(X[2])/100);case"rgb":return S(Da(X[0]),Da(X[1]),Da(X[2]))}return(ae=si.get(y))?S(ae.r,ae.g,ae.b):(y!=null&&y.charAt(0)==="#"&&!isNaN(ae=parseInt(y.slice(1),16))&&(y.length===4?(O=(ae&3840)>>4,O=O>>4|O,U=ae&240,U=U>>4|U,Z=ae&15,Z=Z<<4|Z):y.length===7&&(O=(ae&16711680)>>16,U=(ae&65280)>>8,Z=ae&255)),S(O,U,Z))}function _a(y,S,D){var O=Math.min(y/=255,S/=255,D/=255),U=Math.max(y,S,D),Z=U-O,$,X,ae=(U+O)/2;return Z?(X=ae<.5?Z/(U+O):Z/(2-U-O),y==U?$=(S-D)/Z+(S<D?6:0):S==U?$=(D-y)/Z+2:$=(y-S)/Z+4,$*=60):($=NaN,X=ae>0&&ae<1?0:$),new le($,X,ae)}function nr(y,S,D){y=wi(y),S=wi(S),D=wi(D);var O=Br((.4124564*y+.3575761*S+.1804375*D)/yt),U=Br((.2126729*y+.7151522*S+.072175*D)/Dt),Z=Br((.0193339*y+.119192*S+.9503041*D)/Ft);return rt(116*U-16,500*(O-U),200*(U-Z))}function wi(y){return(y/=255)<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function Da(y){var S=parseFloat(y);return y.charAt(y.length-1)==="%"?Math.round(S*2.55):S}var si=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});si.forEach(function(y,S){si.set(y,Na(S))});function fa(y){return typeof y=="function"?y:function(){return y}}e.functor=fa,e.xhr=Dn(Se);function Dn(y){return function(S,D,O){return arguments.length===2&&typeof D=="function"&&(O=D,D=null),Eo(S,D,y,O)}}function Eo(y,S,D,O){var U={},Z=e.dispatch("beforesend","progress","load","error"),$={},X=new XMLHttpRequest,ae=null;self.XDomainRequest&&!("withCredentials"in X)&&/^(http(s)?:)?\/\//.test(y)&&(X=new XDomainRequest),"onload"in X?X.onload=X.onerror=de:X.onreadystatechange=function(){X.readyState>3&&de()};function de(){var ge=X.status,De;if(!ge&&Ya(X)||ge>=200&&ge<300||ge===304){try{De=D.call(U,X)}catch(Pe){Z.error.call(U,Pe);return}Z.load.call(U,De)}else Z.error.call(U,X)}return X.onprogress=function(ge){var De=e.event;e.event=ge;try{Z.progress.call(U,X)}finally{e.event=De}},U.header=function(ge,De){return ge=(ge+"").toLowerCase(),arguments.length<2?$[ge]:(De==null?delete $[ge]:$[ge]=De+"",U)},U.mimeType=function(ge){return arguments.length?(S=ge==null?null:ge+"",U):S},U.responseType=function(ge){return arguments.length?(ae=ge,U):ae},U.response=function(ge){return D=ge,U},["get","post"].forEach(function(ge){U[ge]=function(){return U.send.apply(U,[ge].concat(r(arguments)))}}),U.send=function(ge,De,Pe){if(arguments.length===2&&typeof De=="function"&&(Pe=De,De=null),X.open(ge,y,!0),S!=null&&!("accept"in $)&&($.accept=S+",*/*"),X.setRequestHeader)for(var Je in $)X.setRequestHeader(Je,$[Je]);return S!=null&&X.overrideMimeType&&X.overrideMimeType(S),ae!=null&&(X.responseType=ae),Pe!=null&&U.on("error",Pe).on("load",function(ot){Pe(null,ot)}),Z.beforesend.call(U,X),X.send(De==null?null:De),U},U.abort=function(){return X.abort(),U},e.rebind(U,Z,"on"),O==null?U:U.get(Ms(O))}function Ms(y){return y.length===1?function(S,D){y(S==null?D:null)}:y}function Ya(y){var S=y.responseType;return S&&S!=="text"?y.response:y.responseText}e.dsv=function(y,S){var D=new RegExp('["'+y+`
]`),O=y.charCodeAt(0);function U(de,ge,De){arguments.length<3&&(De=ge,ge=null);var Pe=Eo(de,S,ge==null?Z:$(ge),De);return Pe.row=function(Je){return arguments.length?Pe.response((ge=Je)==null?Z:$(Je)):ge},Pe}function Z(de){return U.parse(de.responseText)}function $(de){return function(ge){return U.parse(ge.responseText,de)}}U.parse=function(de,ge){var De;return U.parseRows(de,function(Pe,Je){if(De)return De(Pe,Je-1);var ot=function(ze){for(var Ue={},je=Pe.length,lt=0;lt<je;++lt)Ue[Pe[lt]]=ze[lt];return Ue};De=ge?function(ze,Ue){return ge(ot(ze),Ue)}:ot})},U.parseRows=function(de,ge){var De={},Pe={},Je=[],ot=de.length,ze=0,Ue=0,je,lt;function nt(){if(ze>=ot)return Pe;if(lt)return lt=!1,De;var Zt=ze;if(de.charCodeAt(Zt)===34){for(var or=Zt;or++<ot;)if(de.charCodeAt(or)===34){if(de.charCodeAt(or+1)!==34)break;++or}ze=or+2;var fr=de.charCodeAt(or+1);return fr===13?(lt=!0,de.charCodeAt(or+2)===10&&++ze):fr===10&&(lt=!0),de.slice(Zt+1,or).replace(/""/g,'"')}for(;ze<ot;){var fr=de.charCodeAt(ze++),lr=1;if(fr===10)lt=!0;else if(fr===13)lt=!0,de.charCodeAt(ze)===10&&(++ze,++lr);else if(fr!==O)continue;return de.slice(Zt,ze-lr)}return de.slice(Zt)}for(;(je=nt())!==Pe;){for(var We=[];je!==De&&je!==Pe;)We.push(je),je=nt();ge&&(We=ge(We,Ue++))==null||Je.push(We)}return Je},U.format=function(de){if(Array.isArray(de[0]))return U.formatRows(de);var ge=new me,De=[];return de.forEach(function(Pe){for(var Je in Pe)ge.has(Je)||De.push(ge.add(Je))}),[De.map(ae).join(y)].concat(de.map(function(Pe){return De.map(function(Je){return ae(Pe[Je])}).join(y)})).join(`
`)},U.formatRows=function(de){return de.map(X).join(`
`)};function X(de){return de.map(ae).join(y)}function ae(de){return D.test(de)?'"'+de.replace(/\"/g,'""')+'"':de}return U},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var $n,gu,Ui,gl,hp=this[Me(this,"requestAnimationFrame")]||function(y){setTimeout(y,17)};e.timer=function(){Vc.apply(this,arguments)};function Vc(y,S,D){var O=arguments.length;O<2&&(S=0),O<3&&(D=Date.now());var U=D+S,Z={c:y,t:U,n:null};return gu?gu.n=Z:$n=Z,gu=Z,Ui||(gl=clearTimeout(gl),Ui=1,hp(Hc)),Z}function Hc(){var y=wv(),S=Tv()-y;S>24?(isFinite(S)&&(clearTimeout(gl),gl=setTimeout(Hc,S)),Ui=0):(Ui=1,hp(Hc))}e.timer.flush=function(){wv(),Tv()};function wv(){for(var y=Date.now(),S=$n;S;)y>=S.t&&S.c(y-S.t)&&(S.c=null),S=S.n;return y}function Tv(){for(var y,S=$n,D=1/0;S;)S.c?(S.t<D&&(D=S.t),S=(y=S).n):S=y?y.n=S.n:$n=S.n;return gu=y,D}e.round=function(y,S){return S?Math.round(y*(S=Math.pow(10,S)))/S:Math.round(y)},e.geom={};function _u(y){return y[0]}function _l(y){return y[1]}e.geom.hull=function(y){var S=_u,D=_l;if(arguments.length)return O(y);function O(U){if(U.length<3)return[];var Z=fa(S),$=fa(D),X,ae=U.length,de=[],ge=[];for(X=0;X<ae;X++)de.push([+Z.call(this,U[X],X),+$.call(this,U[X],X),X]);for(de.sort(ef),X=0;X<ae;X++)ge.push([de[X][0],-de[X][1]]);var De=vp(de),Pe=vp(ge),Je=Pe[0]===De[0],ot=Pe[Pe.length-1]===De[De.length-1],ze=[];for(X=De.length-1;X>=0;--X)ze.push(U[de[De[X]][2]]);for(X=+Je;X<Pe.length-ot;++X)ze.push(U[de[Pe[X]][2]]);return ze}return O.x=function(U){return arguments.length?(S=U,O):S},O.y=function(U){return arguments.length?(D=U,O):D},O};function vp(y){for(var S=y.length,D=[0,1],O=2,U=2;U<S;U++){for(;O>1&&Pa(y[D[O-2]],y[D[O-1]],y[U])<=0;)--O;D[O++]=U}return D.slice(0,O)}function ef(y,S){return y[0]-S[0]||y[1]-S[1]}e.geom.polygon=function(y){return Ge(y,Xf),y};var Xf=e.geom.polygon.prototype=[];Xf.area=function(){for(var y=-1,S=this.length,D,O=this[S-1],U=0;++y<S;)D=O,O=this[y],U+=D[1]*O[0]-D[0]*O[1];return U*.5},Xf.centroid=function(y){var S=-1,D=this.length,O=0,U=0,Z,$=this[D-1],X;for(arguments.length||(y=-1/(6*this.area()));++S<D;)Z=$,$=this[S],X=Z[0]*$[1]-$[0]*Z[1],O+=(Z[0]+$[0])*X,U+=(Z[1]+$[1])*X;return[O*y,U*y]},Xf.clip=function(y){for(var S,D=yo(y),O=-1,U=this.length-yo(this),Z,$,X=this[U-1],ae,de,ge;++O<U;){for(S=y.slice(),y.length=0,ae=this[O],de=S[($=S.length-D)-1],Z=-1;++Z<$;)ge=S[Z],Qi(ge,X,ae)?(Qi(de,X,ae)||y.push(Zo(de,ge,X,ae)),y.push(ge)):Qi(de,X,ae)&&y.push(Zo(de,ge,X,ae)),de=ge;D&&y.push(y[0]),X=ae}return y};function Qi(y,S,D){return(D[0]-S[0])*(y[1]-S[1])<(D[1]-S[1])*(y[0]-S[0])}function Zo(y,S,D,O){var U=y[0],Z=D[0],$=S[0]-U,X=O[0]-Z,ae=y[1],de=D[1],ge=S[1]-ae,De=O[1]-de,Pe=(X*(ae-de)-De*(U-Z))/(De*$-X*ge);return[U+Pe*$,ae+Pe*ge]}function yo(y){var S=y[0],D=y[y.length-1];return!(S[0]-D[0]||S[1]-D[1])}var xl,Yo,xu,dp=[],Av,tf,Mv=[];function Sv(){ki(this),this.edge=this.site=this.circle=null}function so(y){var S=dp.pop()||new Sv;return S.site=y,S}function Xt(y){Ta(y),xu.remove(y),dp.push(y),ki(y)}function Or(y){var S=y.circle,D=S.x,O=S.cy,U={x:D,y:O},Z=y.P,$=y.N,X=[y];Xt(y);for(var ae=Z;ae.circle&&I(D-ae.circle.x)<He&&I(O-ae.circle.cy)<He;)Z=ae.P,X.unshift(ae),Xt(ae),ae=Z;X.unshift(ae),Ta(ae);for(var de=$;de.circle&&I(D-de.circle.x)<He&&I(O-de.circle.cy)<He;)$=de.N,X.push(de),Xt(de),de=$;X.push(de),Ta(de);var ge=X.length,De;for(De=1;De<ge;++De)de=X[De],ae=X[De-1],cs(de.edge,ae.site,de.site,U);ae=X[0],de=X[ge-1],de.edge=Qs(ae.site,de.site,null,U),Cr(ae),Cr(de)}function pp(y){for(var S=y.x,D=y.y,O,U,Z,$,X=xu._;X;)if(Z=bu(X,D)-S,Z>He)X=X.L;else if($=S-an(X,D),$>He){if(!X.R){O=X;break}X=X.R}else{Z>-He?(O=X.P,U=X):$>-He?(O=X,U=X.N):O=U=X;break}var ae=so(y);if(xu.insert(O,ae),!(!O&&!U)){if(O===U){Ta(O),U=so(O.site),xu.insert(ae,U),ae.edge=U.edge=Qs(O.site,ae.site),Cr(O),Cr(U);return}if(!U){ae.edge=Qs(O.site,ae.site);return}Ta(O),Ta(U);var de=O.site,ge=de.x,De=de.y,Pe=y.x-ge,Je=y.y-De,ot=U.site,ze=ot.x-ge,Ue=ot.y-De,je=2*(Pe*Ue-Je*ze),lt=Pe*Pe+Je*Je,nt=ze*ze+Ue*Ue,We={x:(Ue*lt-Je*nt)/je+ge,y:(Pe*nt-ze*lt)/je+De};cs(U.edge,de,ot,We),ae.edge=Qs(de,y,null,We),U.edge=Qs(y,ot,null,We),Cr(O),Cr(U)}}function bu(y,S){var D=y.site,O=D.x,U=D.y,Z=U-S;if(!Z)return O;var $=y.P;if(!$)return-1/0;D=$.site;var X=D.x,ae=D.y,de=ae-S;if(!de)return X;var ge=X-O,De=1/Z-1/de,Pe=ge/de;return De?(-Pe+Math.sqrt(Pe*Pe-2*De*(ge*ge/(-2*de)-ae+de/2+U-Z/2)))/De+O:(O+X)/2}function an(y,S){var D=y.N;if(D)return bu(D,S);var O=y.site;return O.y===S?O.x:1/0}function bl(y){this.site=y,this.edges=[]}bl.prototype.prepare=function(){for(var y=this.edges,S=y.length,D;S--;)D=y[S].edge,(!D.b||!D.a)&&y.splice(S,1);return y.sort(rf),y.length};function Ss(y){for(var S=y[0][0],D=y[1][0],O=y[0][1],U=y[1][1],Z,$,X,ae,de=Yo,ge=de.length,De,Pe,Je,ot,ze,Ue;ge--;)if(De=de[ge],!(!De||!De.prepare()))for(Je=De.edges,ot=Je.length,Pe=0;Pe<ot;)Ue=Je[Pe].end(),X=Ue.x,ae=Ue.y,ze=Je[++Pe%ot].start(),Z=ze.x,$=ze.y,(I(X-Z)>He||I(ae-$)>He)&&(Je.splice(Pe,0,new Tl(wu(De.site,Ue,I(X-S)<He&&U-ae>He?{x:S,y:I(Z-S)<He?$:U}:I(ae-U)<He&&D-X>He?{x:I($-U)<He?Z:D,y:U}:I(X-D)<He&&ae-O>He?{x:D,y:I(Z-D)<He?$:O}:I(ae-O)<He&&X-S>He?{x:I($-O)<He?Z:S,y:O}:null),De.site,null)),++ot)}function rf(y,S){return S.angle-y.angle}function af(){ki(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cr(y){var S=y.P,D=y.N;if(!(!S||!D)){var O=S.site,U=y.site,Z=D.site;if(O!==Z){var $=U.x,X=U.y,ae=O.x-$,de=O.y-X,ge=Z.x-$,Ue=Z.y-X,De=2*(ae*Ue-de*ge);if(!(De>=-bt)){var Pe=ae*ae+de*de,Je=ge*ge+Ue*Ue,ot=(Ue*Pe-de*Je)/De,ze=(ae*Je-ge*Pe)/De,Ue=ze+X,je=Mv.pop()||new af;je.arc=y,je.site=U,je.x=ot+$,je.y=Ue+Math.sqrt(ot*ot+ze*ze),je.cy=Ue,y.circle=je;for(var lt=null,nt=tf._;nt;)if(je.y<nt.y||je.y===nt.y&&je.x<=nt.x)if(nt.L)nt=nt.L;else{lt=nt.P;break}else if(nt.R)nt=nt.R;else{lt=nt;break}tf.insert(lt,je),lt||(Av=je)}}}}function Ta(y){var S=y.circle;S&&(S.P||(Av=S.N),tf.remove(S),Mv.push(S),ki(S),y.circle=null)}function Aa(y,S,D,O){return function(U){var Z=U.a,$=U.b,X=Z.x,ae=Z.y,de=$.x,ge=$.y,De=0,Pe=1,Je=de-X,ot=ge-ae,ze;if(ze=y-X,!(!Je&&ze>0)){if(ze/=Je,Je<0){if(ze<De)return;ze<Pe&&(Pe=ze)}else if(Je>0){if(ze>Pe)return;ze>De&&(De=ze)}if(ze=D-X,!(!Je&&ze<0)){if(ze/=Je,Je<0){if(ze>Pe)return;ze>De&&(De=ze)}else if(Je>0){if(ze<De)return;ze<Pe&&(Pe=ze)}if(ze=S-ae,!(!ot&&ze>0)){if(ze/=ot,ot<0){if(ze<De)return;ze<Pe&&(Pe=ze)}else if(ot>0){if(ze>Pe)return;ze>De&&(De=ze)}if(ze=O-ae,!(!ot&&ze<0)){if(ze/=ot,ot<0){if(ze>Pe)return;ze>De&&(De=ze)}else if(ot>0){if(ze<De)return;ze<Pe&&(Pe=ze)}return De>0&&(U.a={x:X+De*Je,y:ae+De*ot}),Pe<1&&(U.b={x:X+Pe*Je,y:ae+Pe*ot}),U}}}}}}function ks(y){for(var S=xl,D=Aa(y[0][0],y[0][1],y[1][0],y[1][1]),O=S.length,U;O--;)U=S[O],(!wl(U,y)||!D(U)||I(U.a.x-U.b.x)<He&&I(U.a.y-U.b.y)<He)&&(U.a=U.b=null,S.splice(O,1))}function wl(y,S){var D=y.b;if(D)return!0;var O=y.a,U=S[0][0],Z=S[1][0],$=S[0][1],X=S[1][1],ae=y.l,de=y.r,ge=ae.x,De=ae.y,Pe=de.x,Je=de.y,ot=(ge+Pe)/2,ze=(De+Je)/2,Ue,je;if(Je===De){if(ot<U||ot>=Z)return;if(ge>Pe){if(!O)O={x:ot,y:$};else if(O.y>=X)return;D={x:ot,y:X}}else{if(!O)O={x:ot,y:X};else if(O.y<$)return;D={x:ot,y:$}}}else if(Ue=(ge-Pe)/(Je-De),je=ze-Ue*ot,Ue<-1||Ue>1)if(ge>Pe){if(!O)O={x:($-je)/Ue,y:$};else if(O.y>=X)return;D={x:(X-je)/Ue,y:X}}else{if(!O)O={x:(X-je)/Ue,y:X};else if(O.y<$)return;D={x:($-je)/Ue,y:$}}else if(De<Je){if(!O)O={x:U,y:Ue*U+je};else if(O.x>=Z)return;D={x:Z,y:Ue*Z+je}}else{if(!O)O={x:Z,y:Ue*Z+je};else if(O.x<U)return;D={x:U,y:Ue*U+je}}return y.a=O,y.b=D,!0}function Sa(y,S){this.l=y,this.r=S,this.a=this.b=null}function Qs(y,S,D,O){var U=new Sa(y,S);return xl.push(U),D&&cs(U,y,S,D),O&&cs(U,S,y,O),Yo[y.i].edges.push(new Tl(U,y,S)),Yo[S.i].edges.push(new Tl(U,S,y)),U}function wu(y,S,D){var O=new Sa(y,null);return O.a=S,O.b=D,xl.push(O),O}function cs(y,S,D,O){!y.a&&!y.b?(y.a=O,y.l=S,y.r=D):y.l===D?y.b=O:y.a=O}function Tl(y,S,D){var O=y.a,U=y.b;this.edge=y,this.site=S,this.angle=D?Math.atan2(D.y-S.y,D.x-S.x):y.l===S?Math.atan2(U.x-O.x,O.y-U.y):Math.atan2(O.x-U.x,U.y-O.y)}Tl.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function go(){this._=null}function ki(y){y.U=y.C=y.L=y.R=y.P=y.N=null}go.prototype={insert:function(y,S){var D,O,U;if(y){if(S.P=y,S.N=y.N,y.N&&(y.N.P=S),y.N=S,y.R){for(y=y.R;y.L;)y=y.L;y.L=S}else y.R=S;D=y}else this._?(y=Gc(this._),S.P=null,S.N=y,y.P=y.L=S,D=y):(S.P=S.N=null,this._=S,D=null);for(S.L=S.R=null,S.U=D,S.C=!0,y=S;D&&D.C;)O=D.U,D===O.L?(U=O.R,U&&U.C?(D.C=U.C=!1,O.C=!0,y=O):(y===D.R&&(Cs(this,D),y=D,D=y.U),D.C=!1,O.C=!0,hs(this,O))):(U=O.L,U&&U.C?(D.C=U.C=!1,O.C=!0,y=O):(y===D.L&&(hs(this,D),y=D,D=y.U),D.C=!1,O.C=!0,Cs(this,O))),D=y.U;this._.C=!1},remove:function(y){y.N&&(y.N.P=y.P),y.P&&(y.P.N=y.N),y.N=y.P=null;var S=y.U,D,O=y.L,U=y.R,Z,$;if(O?U?Z=Gc(U):Z=O:Z=U,S?S.L===y?S.L=Z:S.R=Z:this._=Z,O&&U?($=Z.C,Z.C=y.C,Z.L=O,O.U=Z,Z!==U?(S=Z.U,Z.U=y.U,y=Z.R,S.L=y,Z.R=U,U.U=Z):(Z.U=S,S=Z,y=Z.R)):($=y.C,y=Z),y&&(y.U=S),!$){if(y&&y.C){y.C=!1;return}do{if(y===this._)break;if(y===S.L){if(D=S.R,D.C&&(D.C=!1,S.C=!0,Cs(this,S),D=S.R),D.L&&D.L.C||D.R&&D.R.C){(!D.R||!D.R.C)&&(D.L.C=!1,D.C=!0,hs(this,D),D=S.R),D.C=S.C,S.C=D.R.C=!1,Cs(this,S),y=this._;break}}else if(D=S.L,D.C&&(D.C=!1,S.C=!0,hs(this,S),D=S.L),D.L&&D.L.C||D.R&&D.R.C){(!D.L||!D.L.C)&&(D.R.C=!1,D.C=!0,Cs(this,D),D=S.L),D.C=S.C,S.C=D.L.C=!1,hs(this,S),y=this._;break}D.C=!0,y=S,S=S.U}while(!y.C);y&&(y.C=!1)}}};function Cs(y,S){var D=S,O=S.R,U=D.U;U?U.L===D?U.L=O:U.R=O:y._=O,O.U=U,D.U=O,D.R=O.L,D.R&&(D.R.U=D),O.L=D}function hs(y,S){var D=S,O=S.L,U=D.U;U?U.L===D?U.L=O:U.R=O:y._=O,O.U=U,D.U=O,D.L=O.R,D.L&&(D.L.U=D),O.R=D}function Gc(y){for(;y.L;)y=y.L;return y}function Tu(y,S){var D=y.sort(Bm).pop(),O,U,Z;for(xl=[],Yo=new Array(y.length),xu=new go,tf=new go;;)if(Z=Av,D&&(!Z||D.y<Z.y||D.y===Z.y&&D.x<Z.x))(D.x!==O||D.y!==U)&&(Yo[D.i]=new bl(D),pp(D),O=D.x,U=D.y),D=y.pop();else if(Z)Or(Z.arc);else break;S&&(ks(S),Ss(S));var $={cells:Yo,edges:xl};return xu=tf=xl=Yo=null,$}function Bm(y,S){return S.y-y.y||S.x-y.x}e.geom.voronoi=function(y){var S=_u,D=_l,O=S,U=D,Z=jf;if(y)return $(y);function $(ae){var de=new Array(ae.length),ge=Z[0][0],De=Z[0][1],Pe=Z[1][0],Je=Z[1][1];return Tu(X(ae),Z).cells.forEach(function(ot,ze){var Ue=ot.edges,je=ot.site,lt=de[ze]=Ue.length?Ue.map(function(nt){var We=nt.start();return[We.x,We.y]}):je.x>=ge&&je.x<=Pe&&je.y>=De&&je.y<=Je?[[ge,Je],[Pe,Je],[Pe,De],[ge,De]]:[];lt.point=ae[ze]}),de}function X(ae){return ae.map(function(de,ge){return{x:Math.round(O(de,ge)/He)*He,y:Math.round(U(de,ge)/He)*He,i:ge}})}return $.links=function(ae){return Tu(X(ae)).edges.filter(function(de){return de.l&&de.r}).map(function(de){return{source:ae[de.l.i],target:ae[de.r.i]}})},$.triangles=function(ae){var de=[];return Tu(X(ae)).cells.forEach(function(ge,De){for(var Pe=ge.site,Je=ge.edges.sort(rf),ot=-1,ze=Je.length,Ue,je,lt=Je[ze-1].edge,nt=lt.l===Pe?lt.r:lt.l;++ot<ze;)Ue=lt,je=nt,lt=Je[ot].edge,nt=lt.l===Pe?lt.r:lt.l,De<je.i&&De<nt.i&&ni(Pe,je,nt)<0&&de.push([ae[De],ae[je.i],ae[nt.i]])}),de},$.x=function(ae){return arguments.length?(O=fa(S=ae),$):S},$.y=function(ae){return arguments.length?(U=fa(D=ae),$):D},$.clipExtent=function(ae){return arguments.length?(Z=ae==null?jf:ae,$):Z===jf?null:Z},$.size=function(ae){return arguments.length?$.clipExtent(ae&&[[0,0],ae]):Z===jf?null:Z&&Z[1]},$};var jf=[[-1e6,-1e6],[1e6,1e6]];function ni(y,S,D){return(y.x-D.x)*(S.y-y.y)-(y.x-S.x)*(D.y-y.y)}e.geom.delaunay=function(y){return e.geom.voronoi().triangles(y)},e.geom.quadtree=function(y,S,D,O,U){var Z=_u,$=_l,X;if(X=arguments.length)return Z=Jf,$=kv,X===3&&(U=D,O=S,D=S=0),ae(y);function ae(de){var ge,De=fa(Z),Pe=fa($),Je,ot,ze,Ue,je,lt,nt,We;if(S!=null)je=S,lt=D,nt=O,We=U;else if(nt=We=-(je=lt=1/0),Je=[],ot=[],Ue=de.length,X)for(ze=0;ze<Ue;++ze)ge=de[ze],ge.x<je&&(je=ge.x),ge.y<lt&&(lt=ge.y),ge.x>nt&&(nt=ge.x),ge.y>We&&(We=ge.y),Je.push(ge.x),ot.push(ge.y);else for(ze=0;ze<Ue;++ze){var Zt=+De(ge=de[ze],ze),or=+Pe(ge,ze);Zt<je&&(je=Zt),or<lt&&(lt=or),Zt>nt&&(nt=Zt),or>We&&(We=or),Je.push(Zt),ot.push(or)}var fr=nt-je,lr=We-lt;fr>lr?We=lt+fr:nt=je+lr;function Dr(Ur,Kr,Ba,ri,$a,jt,Jr,oa){if(!(isNaN(Ba)||isNaN(ri)))if(Ur.leaf){var la=Ur.x,Ei=Ur.y;if(la!=null)if(I(la-Ba)+I(Ei-ri)<.01)Ir(Ur,Kr,Ba,ri,$a,jt,Jr,oa);else{var Vi=Ur.point;Ur.x=Ur.y=Ur.point=null,Ir(Ur,Vi,la,Ei,$a,jt,Jr,oa),Ir(Ur,Kr,Ba,ri,$a,jt,Jr,oa)}else Ur.x=Ba,Ur.y=ri,Ur.point=Kr}else Ir(Ur,Kr,Ba,ri,$a,jt,Jr,oa)}function Ir(Ur,Kr,Ba,ri,$a,jt,Jr,oa){var la=($a+Jr)*.5,Ei=(jt+oa)*.5,Vi=Ba>=la,$i=ri>=Ei,xi=$i<<1|Vi;Ur.leaf=!1,Ur=Ur.nodes[xi]||(Ur.nodes[xi]=_n()),Vi?$a=la:Jr=la,$i?jt=Ei:oa=Ei,Dr(Ur,Kr,Ba,ri,$a,jt,Jr,oa)}var ta=_n();if(ta.add=function(Ur){Dr(ta,Ur,+De(Ur,++ze),+Pe(Ur,ze),je,lt,nt,We)},ta.visit=function(Ur){zn(Ur,ta,je,lt,nt,We)},ta.find=function(Ur){return mp(ta,Ur[0],Ur[1],je,lt,nt,We)},ze=-1,S==null){for(;++ze<Ue;)Dr(ta,de[ze],Je[ze],ot[ze],je,lt,nt,We);--ze}else de.forEach(ta.add);return Je=ot=de=ge=null,ta}return ae.x=function(de){return arguments.length?(Z=de,ae):Z},ae.y=function(de){return arguments.length?($=de,ae):$},ae.extent=function(de){return arguments.length?(de==null?S=D=O=U=null:(S=+de[0][0],D=+de[0][1],O=+de[1][0],U=+de[1][1]),ae):S==null?null:[[S,D],[O,U]]},ae.size=function(de){return arguments.length?(de==null?S=D=O=U=null:(S=D=0,O=+de[0],U=+de[1]),ae):S==null?null:[O-S,U-D]},ae};function Jf(y){return y.x}function kv(y){return y.y}function _n(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function zn(y,S,D,O,U,Z){if(!y(S,D,O,U,Z)){var $=(D+U)*.5,X=(O+Z)*.5,ae=S.nodes;ae[0]&&zn(y,ae[0],D,O,$,X),ae[1]&&zn(y,ae[1],$,O,U,X),ae[2]&&zn(y,ae[2],D,X,$,Z),ae[3]&&zn(y,ae[3],$,X,U,Z)}}function mp(y,S,D,O,U,Z,$){var X=1/0,ae;return function de(ge,De,Pe,Je,ot){if(!(De>Z||Pe>$||Je<O||ot<U)){if(ze=ge.point){var ze,Ue=S-ge.x,je=D-ge.y,lt=Ue*Ue+je*je;if(lt<X){var nt=Math.sqrt(X=lt);O=S-nt,U=D-nt,Z=S+nt,$=D+nt,ae=ze}}for(var We=ge.nodes,Zt=(De+Je)*.5,or=(Pe+ot)*.5,fr=S>=Zt,lr=D>=or,Dr=lr<<1|fr,Ir=Dr+4;Dr<Ir;++Dr)if(ge=We[Dr&3])switch(Dr&3){case 0:de(ge,De,Pe,Zt,or);break;case 1:de(ge,Zt,Pe,Je,or);break;case 2:de(ge,De,or,Zt,ot);break;case 3:de(ge,Zt,or,Je,ot);break}}}(y,O,U,Z,$),ae}e.interpolateRgb=nf;function nf(y,S){y=e.rgb(y),S=e.rgb(S);var D=y.r,O=y.g,U=y.b,Z=S.r-D,$=S.g-O,X=S.b-U;return function(ae){return"#"+yr(Math.round(D+Z*ae))+yr(Math.round(O+$*ae))+yr(Math.round(U+X*ae))}}e.interpolateObject=nn;function nn(y,S){var D={},O={},U;for(U in y)U in S?D[U]=on(y[U],S[U]):O[U]=y[U];for(U in S)U in y||(O[U]=S[U]);return function(Z){for(U in D)O[U]=D[U](Z);return O}}e.interpolateNumber=Lo;function Lo(y,S){return y=+y,S=+S,function(D){return y*(1-D)+S*D}}e.interpolateString=Wo;function Wo(y,S){var D=un.lastIndex=Kf.lastIndex=0,O,U,Z,$=-1,X=[],ae=[];for(y=y+"",S=S+"";(O=un.exec(y))&&(U=Kf.exec(S));)(Z=U.index)>D&&(Z=S.slice(D,Z),X[$]?X[$]+=Z:X[++$]=Z),(O=O[0])===(U=U[0])?X[$]?X[$]+=U:X[++$]=U:(X[++$]=null,ae.push({i:$,x:Lo(O,U)})),D=Kf.lastIndex;return D<S.length&&(Z=S.slice(D),X[$]?X[$]+=Z:X[++$]=Z),X.length<2?ae[0]?(S=ae[0].x,function(de){return S(de)+""}):function(){return S}:(S=ae.length,function(de){for(var ge=0,De;ge<S;++ge)X[(De=ae[ge]).i]=De.x(de);return X.join("")})}var un=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kf=new RegExp(un.source,"g");e.interpolate=on;function on(y,S){for(var D=e.interpolators.length,O;--D>=0&&!(O=e.interpolators[D](y,S)););return O}e.interpolators=[function(y,S){var D=typeof S;return(D==="string"?si.has(S.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(S)?nf:Wo:S instanceof ga?nf:Array.isArray(S)?Xo:D==="object"&&isNaN(S)?nn:Lo)(y,S)}],e.interpolateArray=Xo;function Xo(y,S){var D=[],O=[],U=y.length,Z=S.length,$=Math.min(y.length,S.length),X;for(X=0;X<$;++X)D.push(on(y[X],S[X]));for(;X<U;++X)O[X]=y[X];for(;X<Z;++X)O[X]=S[X];return function(ae){for(X=0;X<$;++X)O[X]=D[X](ae);return O}}var $s=function(){return Se},Om=e.map({linear:$s,poly:Cv,quad:function(){return Vm},cubic:function(){return Al},sin:function(){return Hm},exp:function(){return Gm},circle:function(){return Zc},elastic:Zm,back:Ym,bounce:function(){return Wm}}),jo=e.map({in:Se,out:el,"in-out":In,"out-in":function(y){return In(el(y))}});e.ease=function(y){var S=y.indexOf("-"),D=S>=0?y.slice(0,S):y,O=S>=0?y.slice(S+1):"in";return D=Om.get(D)||$s,O=jo.get(O)||Se,Um(O(D.apply(null,t.call(arguments,1))))};function Um(y){return function(S){return S<=0?0:S>=1?1:y(S)}}function el(y){return function(S){return 1-y(1-S)}}function In(y){return function(S){return .5*(S<.5?y(2*S):2-y(2-2*S))}}function Vm(y){return y*y}function Al(y){return y*y*y}function Ml(y){if(y<=0)return 0;if(y>=1)return 1;var S=y*y,D=S*y;return 4*(y<.5?D:3*(y-S)+D-.75)}function Cv(y){return function(S){return Math.pow(S,y)}}function Hm(y){return 1-Math.cos(y*Ar)}function Gm(y){return Math.pow(2,10*(y-1))}function Zc(y){return 1-Math.sqrt(1-y*y)}function Zm(y,S){var D;return arguments.length<2&&(S=.45),arguments.length?D=S/gr*Math.asin(1/y):(y=1,D=S/4),function(O){return 1+y*Math.pow(2,-10*O)*Math.sin((O-D)*gr/S)}}function Ym(y){return y||(y=1.70158),function(S){return S*S*((y+1)*S-y)}}function Wm(y){return y<1/2.75?7.5625*y*y:y<2/2.75?7.5625*(y-=1.5/2.75)*y+.75:y<2.5/2.75?7.5625*(y-=2.25/2.75)*y+.9375:7.5625*(y-=2.625/2.75)*y+.984375}e.interpolateHcl=Ev;function Ev(y,S){y=e.hcl(y),S=e.hcl(S);var D=y.h,O=y.c,U=y.l,Z=S.h-D,$=S.c-O,X=S.l-U;return isNaN($)&&($=0,O=isNaN(O)?S.c:O),isNaN(Z)?(Z=0,D=isNaN(D)?S.h:D):Z>180?Z-=360:Z<-180&&(Z+=360),function(ae){return Be(D+Z*ae,O+$*ae,U+X*ae)+""}}e.interpolateHsl=Xm;function Xm(y,S){y=e.hsl(y),S=e.hsl(S);var D=y.h,O=y.s,U=y.l,Z=S.h-D,$=S.s-O,X=S.l-U;return isNaN($)&&($=0,O=isNaN(O)?S.s:O),isNaN(Z)?(Z=0,D=isNaN(D)?S.h:D):Z>180?Z-=360:Z<-180&&(Z+=360),function(ae){return se(D+Z*ae,O+$*ae,U+X*ae)+""}}e.interpolateLab=jm;function jm(y,S){y=e.lab(y),S=e.lab(S);var D=y.l,O=y.a,U=y.b,Z=S.l-D,$=S.a-O,X=S.b-U;return function(ae){return Wt(D+Z*ae,O+$*ae,U+X*ae)+""}}e.interpolateRound=Lv;function Lv(y,S){return S-=y,function(D){return Math.round(y+S*D)}}e.transform=function(y){var S=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(D){if(D!=null){S.setAttribute("transform",D);var O=S.transform.baseVal.consolidate()}return new yp(O?O.matrix:Dv)})(y)};function yp(y){var S=[y.a,y.b],D=[y.c,y.d],O=Pv(S),U=gp(S,D),Z=Pv(Jm(D,S,-U))||0;S[0]*D[1]<D[0]*S[1]&&(S[0]*=-1,S[1]*=-1,O*=-1,U*=-1),this.rotate=(O?Math.atan2(S[1],S[0]):Math.atan2(-D[0],D[1]))*xa,this.translate=[y.e,y.f],this.scale=[O,Z],this.skew=Z?Math.atan2(U,Z)*xa:0}yp.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function gp(y,S){return y[0]*S[0]+y[1]*S[1]}function Pv(y){var S=Math.sqrt(gp(y,y));return S&&(y[0]/=S,y[1]/=S),S}function Jm(y,S,D){return y[0]+=D*S[0],y[1]+=D*S[1],y}var Dv={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=wp;function Au(y){return y.length?y.pop()+",":""}function _p(y,S,D,O){if(y[0]!==S[0]||y[1]!==S[1]){var U=D.push("translate(",null,",",null,")");O.push({i:U-4,x:Lo(y[0],S[0])},{i:U-2,x:Lo(y[1],S[1])})}else(S[0]||S[1])&&D.push("translate("+S+")")}function Km(y,S,D,O){y!==S?(y-S>180?S+=360:S-y>180&&(y+=360),O.push({i:D.push(Au(D)+"rotate(",null,")")-2,x:Lo(y,S)})):S&&D.push(Au(D)+"rotate("+S+")")}function xp(y,S,D,O){y!==S?O.push({i:D.push(Au(D)+"skewX(",null,")")-2,x:Lo(y,S)}):S&&D.push(Au(D)+"skewX("+S+")")}function bp(y,S,D,O){if(y[0]!==S[0]||y[1]!==S[1]){var U=D.push(Au(D)+"scale(",null,",",null,")");O.push({i:U-4,x:Lo(y[0],S[0])},{i:U-2,x:Lo(y[1],S[1])})}else(S[0]!==1||S[1]!==1)&&D.push(Au(D)+"scale("+S+")")}function wp(y,S){var D=[],O=[];return y=e.transform(y),S=e.transform(S),_p(y.translate,S.translate,D,O),Km(y.rotate,S.rotate,D,O),xp(y.skew,S.skew,D,O),bp(y.scale,S.scale,D,O),y=S=null,function(U){for(var Z=-1,$=O.length,X;++Z<$;)D[(X=O[Z]).i]=X.x(U);return D.join("")}}function Qm(y,S){return S=(S-=y=+y)||1/S,function(D){return(D-y)/S}}function vs(y,S){return S=(S-=y=+y)||1/S,function(D){return Math.max(0,Math.min(1,(D-y)/S))}}e.layout={},e.layout.bundle=function(){return function(y){for(var S=[],D=-1,O=y.length;++D<O;)S.push(Yc(y[D]));return S}};function Yc(y){for(var S=y.source,D=y.target,O=Wc(S,D),U=[S];S!==O;)S=S.parent,U.push(S);for(var Z=U.length;D!==O;)U.splice(Z,0,D),D=D.parent;return U}function Sl(y){for(var S=[],D=y.parent;D!=null;)S.push(y),y=D,D=D.parent;return S.push(y),S}function Wc(y,S){if(y===S)return y;for(var D=Sl(y),O=Sl(S),U=D.pop(),Z=O.pop(),$=null;U===Z;)$=U,U=D.pop(),Z=O.pop();return $}e.layout.chord=function(){var y={},S,D,O,U,Z=0,$,X,ae;function de(){var De={},Pe=[],Je=e.range(U),ot=[],ze,Ue,je,lt,nt;for(S=[],D=[],ze=0,lt=-1;++lt<U;){for(Ue=0,nt=-1;++nt<U;)Ue+=O[lt][nt];Pe.push(Ue),ot.push(e.range(U)),ze+=Ue}for($&&Je.sort(function(ta,Ur){return $(Pe[ta],Pe[Ur])}),X&&ot.forEach(function(ta,Ur){ta.sort(function(Kr,Ba){return X(O[Ur][Kr],O[Ur][Ba])})}),ze=(gr-Z*U)/ze,Ue=0,lt=-1;++lt<U;){for(je=Ue,nt=-1;++nt<U;){var We=Je[lt],Zt=ot[We][nt],or=O[We][Zt],fr=Ue,lr=Ue+=or*ze;De[We+"-"+Zt]={index:We,subindex:Zt,startAngle:fr,endAngle:lr,value:or}}D[We]={index:We,startAngle:je,endAngle:Ue,value:Pe[We]},Ue+=Z}for(lt=-1;++lt<U;)for(nt=lt-1;++nt<U;){var Dr=De[lt+"-"+nt],Ir=De[nt+"-"+lt];(Dr.value||Ir.value)&&S.push(Dr.value<Ir.value?{source:Ir,target:Dr}:{source:Dr,target:Ir})}ae&&ge()}function ge(){S.sort(function(De,Pe){return ae((De.source.value+De.target.value)/2,(Pe.source.value+Pe.target.value)/2)})}return y.matrix=function(De){return arguments.length?(U=(O=De)&&O.length,S=D=null,y):O},y.padding=function(De){return arguments.length?(Z=De,S=D=null,y):Z},y.sortGroups=function(De){return arguments.length?($=De,S=D=null,y):$},y.sortSubgroups=function(De){return arguments.length?(X=De,S=null,y):X},y.sortChords=function(De){return arguments.length?(ae=De,S&&ge(),y):ae},y.chords=function(){return S||de(),S},y.groups=function(){return D||de(),D},y},e.layout.force=function(){var y={},S=e.dispatch("start","tick","end"),D,O=[1,1],U,Z,$=.9,X=fn,ae=$m,de=-30,ge=ey,De=.1,Pe=.64,Je=[],ot=[],ze,Ue,je;function lt(We){return function(Zt,or,fr,lr){if(Zt.point!==We){var Dr=Zt.cx-We.x,Ir=Zt.cy-We.y,ta=lr-or,Ur=Dr*Dr+Ir*Ir;if(ta*ta/Pe<Ur){if(Ur<ge){var Kr=Zt.charge/Ur;We.px-=Dr*Kr,We.py-=Ir*Kr}return!0}if(Zt.point&&Ur&&Ur<ge){var Kr=Zt.pointCharge/Ur;We.px-=Dr*Kr,We.py-=Ir*Kr}}return!Zt.charge}}y.tick=function(){if((Z*=.99)<.005)return D=null,S.end({type:"end",alpha:Z=0}),!0;var We=Je.length,Zt=ot.length,or,fr,lr,Dr,Ir,ta,Ur,Kr,Ba;for(fr=0;fr<Zt;++fr)lr=ot[fr],Dr=lr.source,Ir=lr.target,Kr=Ir.x-Dr.x,Ba=Ir.y-Dr.y,(ta=Kr*Kr+Ba*Ba)&&(ta=Z*Ue[fr]*((ta=Math.sqrt(ta))-ze[fr])/ta,Kr*=ta,Ba*=ta,Ir.x-=Kr*(Ur=Dr.weight+Ir.weight?Dr.weight/(Dr.weight+Ir.weight):.5),Ir.y-=Ba*Ur,Dr.x+=Kr*(Ur=1-Ur),Dr.y+=Ba*Ur);if((Ur=Z*De)&&(Kr=O[0]/2,Ba=O[1]/2,fr=-1,Ur))for(;++fr<We;)lr=Je[fr],lr.x+=(Kr-lr.x)*Ur,lr.y+=(Ba-lr.y)*Ur;if(de)for(Es(or=e.geom.quadtree(Je),Z,je),fr=-1;++fr<We;)(lr=Je[fr]).fixed||or.visit(lt(lr));for(fr=-1;++fr<We;)lr=Je[fr],lr.fixed?(lr.x=lr.px,lr.y=lr.py):(lr.x-=(lr.px-(lr.px=lr.x))*$,lr.y-=(lr.py-(lr.py=lr.y))*$);S.tick({type:"tick",alpha:Z})},y.nodes=function(We){return arguments.length?(Je=We,y):Je},y.links=function(We){return arguments.length?(ot=We,y):ot},y.size=function(We){return arguments.length?(O=We,y):O},y.linkDistance=function(We){return arguments.length?(X=typeof We=="function"?We:+We,y):X},y.distance=y.linkDistance,y.linkStrength=function(We){return arguments.length?(ae=typeof We=="function"?We:+We,y):ae},y.friction=function(We){return arguments.length?($=+We,y):$},y.charge=function(We){return arguments.length?(de=typeof We=="function"?We:+We,y):de},y.chargeDistance=function(We){return arguments.length?(ge=We*We,y):Math.sqrt(ge)},y.gravity=function(We){return arguments.length?(De=+We,y):De},y.theta=function(We){return arguments.length?(Pe=We*We,y):Math.sqrt(Pe)},y.alpha=function(We){return arguments.length?(We=+We,Z?We>0?Z=We:(D.c=null,D.t=NaN,D=null,S.end({type:"end",alpha:Z=0})):We>0&&(S.start({type:"start",alpha:Z=We}),D=Vc(y.tick)),y):Z},y.start=function(){var We,Zt=Je.length,or=ot.length,fr=O[0],lr=O[1],Dr,Ir;for(We=0;We<Zt;++We)(Ir=Je[We]).index=We,Ir.weight=0;for(We=0;We<or;++We)Ir=ot[We],typeof Ir.source=="number"&&(Ir.source=Je[Ir.source]),typeof Ir.target=="number"&&(Ir.target=Je[Ir.target]),++Ir.source.weight,++Ir.target.weight;for(We=0;We<Zt;++We)Ir=Je[We],isNaN(Ir.x)&&(Ir.x=ta("x",fr)),isNaN(Ir.y)&&(Ir.y=ta("y",lr)),isNaN(Ir.px)&&(Ir.px=Ir.x),isNaN(Ir.py)&&(Ir.py=Ir.y);if(ze=[],typeof X=="function")for(We=0;We<or;++We)ze[We]=+X.call(this,ot[We],We);else for(We=0;We<or;++We)ze[We]=X;if(Ue=[],typeof ae=="function")for(We=0;We<or;++We)Ue[We]=+ae.call(this,ot[We],We);else for(We=0;We<or;++We)Ue[We]=ae;if(je=[],typeof de=="function")for(We=0;We<Zt;++We)je[We]=+de.call(this,Je[We],We);else for(We=0;We<Zt;++We)je[We]=de;function ta(Ur,Kr){if(!Dr){for(Dr=new Array(Zt),$a=0;$a<Zt;++$a)Dr[$a]=[];for($a=0;$a<or;++$a){var Ba=ot[$a];Dr[Ba.source.index].push(Ba.target),Dr[Ba.target.index].push(Ba.source)}}for(var ri=Dr[We],$a=-1,jt=ri.length,Jr;++$a<jt;)if(!isNaN(Jr=ri[$a][Ur]))return Jr;return Math.random()*Kr}return y.resume()},y.resume=function(){return y.alpha(.1)},y.stop=function(){return y.alpha(0)},y.drag=function(){if(U||(U=e.behavior.drag().origin(Se).on("dragstart.force",kl).on("drag.force",nt).on("dragend.force",Cl)),!arguments.length)return U;this.on("mouseover.force",zv).on("mouseout.force",Xc).call(U)};function nt(We){We.px=e.event.x,We.py=e.event.y,y.resume()}return e.rebind(y,S,"on")};function kl(y){y.fixed|=2}function Cl(y){y.fixed&=-7}function zv(y){y.fixed|=4,y.px=y.x,y.py=y.y}function Xc(y){y.fixed&=-5}function Es(y,S,D){var O=0,U=0;if(y.charge=0,!y.leaf)for(var Z=y.nodes,$=Z.length,X=-1,ae;++X<$;)ae=Z[X],ae!=null&&(Es(ae,S,D),y.charge+=ae.charge,O+=ae.charge*ae.cx,U+=ae.charge*ae.cy);if(y.point){y.leaf||(y.point.x+=Math.random()-.5,y.point.y+=Math.random()-.5);var de=S*D[y.point.index];y.charge+=y.pointCharge=de,O+=de*y.point.x,U+=de*y.point.y}y.cx=O/y.charge,y.cy=U/y.charge}var fn=20,$m=1,ey=1/0;e.layout.hierarchy=function(){var y=sf,S=Tp,D=Ap;function O(U){var Z=[U],$=[],X;for(U.depth=0;(X=Z.pop())!=null;)if($.push(X),(de=S.call(O,X,X.depth))&&(ae=de.length)){for(var ae,de,ge;--ae>=0;)Z.push(ge=de[ae]),ge.parent=X,ge.depth=X.depth+1;D&&(X.value=0),X.children=de}else D&&(X.value=+D.call(O,X,X.depth)||0),delete X.children;return ds(U,function(De){var Pe,Je;y&&(Pe=De.children)&&Pe.sort(y),D&&(Je=De.parent)&&(Je.value+=De.value)}),$}return O.sort=function(U){return arguments.length?(y=U,O):y},O.children=function(U){return arguments.length?(S=U,O):S},O.value=function(U){return arguments.length?(D=U,O):D},O.revalue=function(U){return D&&(of(U,function(Z){Z.children&&(Z.value=0)}),ds(U,function(Z){var $;Z.children||(Z.value=+D.call(O,Z,Z.depth)||0),($=Z.parent)&&($.value+=Z.value)})),U},O};function El(y,S){return e.rebind(y,S,"sort","children","value"),y.nodes=y,y.links=Mp,y}function of(y,S){for(var D=[y];(y=D.pop())!=null;)if(S(y),(U=y.children)&&(O=U.length))for(var O,U;--O>=0;)D.push(U[O])}function ds(y,S){for(var D=[y],O=[];(y=D.pop())!=null;)if(O.push(y),($=y.children)&&(Z=$.length))for(var U=-1,Z,$;++U<Z;)D.push($[U]);for(;(y=O.pop())!=null;)S(y)}function Tp(y){return y.children}function Ap(y){return y.value}function sf(y,S){return S.value-y.value}function Mp(y){return e.merge(y.map(function(S){return(S.children||[]).map(function(D){return{source:S,target:D}})}))}e.layout.partition=function(){var y=e.layout.hierarchy(),S=[1,1];function D(Z,$,X,ae){var de=Z.children;if(Z.x=$,Z.y=Z.depth*ae,Z.dx=X,Z.dy=ae,de&&(De=de.length)){var ge=-1,De,Pe,Je;for(X=Z.value?X/Z.value:0;++ge<De;)D(Pe=de[ge],$,Je=Pe.value*X,ae),$+=Je}}function O(Z){var $=Z.children,X=0;if($&&(de=$.length))for(var ae=-1,de;++ae<de;)X=Math.max(X,O($[ae]));return 1+X}function U(Z,$){var X=y.call(this,Z,$);return D(X[0],0,S[0],S[1]/O(X[0])),X}return U.size=function(Z){return arguments.length?(S=Z,U):S},El(U,y)},e.layout.pie=function(){var y=Number,S=Sp,D=0,O=gr,U=0;function Z($){var X=$.length,ae=$.map(function(lt,nt){return+y.call(Z,lt,nt)}),de=+(typeof D=="function"?D.apply(this,arguments):D),ge=(typeof O=="function"?O.apply(this,arguments):O)-de,De=Math.min(Math.abs(ge)/X,+(typeof U=="function"?U.apply(this,arguments):U)),Pe=De*(ge<0?-1:1),Je=e.sum(ae),ot=Je?(ge-X*Pe)/Je:0,ze=e.range(X),Ue=[],je;return S!=null&&ze.sort(S===Sp?function(lt,nt){return ae[nt]-ae[lt]}:function(lt,nt){return S($[lt],$[nt])}),ze.forEach(function(lt){Ue[lt]={data:$[lt],value:je=ae[lt],startAngle:de,endAngle:de+=je*ot+Pe,padAngle:De}}),Ue}return Z.value=function($){return arguments.length?(y=$,Z):y},Z.sort=function($){return arguments.length?(S=$,Z):S},Z.startAngle=function($){return arguments.length?(D=$,Z):D},Z.endAngle=function($){return arguments.length?(O=$,Z):O},Z.padAngle=function($){return arguments.length?(U=$,Z):U},Z};var Sp={};e.layout.stack=function(){var y=Se,S=Qf,D=jc,O=Iv,U=ty,Z=ry;function $(X,ae){if(!(ot=X.length))return X;var de=X.map(function(lt,nt){return y.call($,lt,nt)}),ge=de.map(function(lt){return lt.map(function(nt,We){return[U.call($,nt,We),Z.call($,nt,We)]})}),De=S.call($,ge,ae);de=e.permute(de,De),ge=e.permute(ge,De);var Pe=D.call($,ge,ae),Je=de[0].length,ot,ze,Ue,je;for(Ue=0;Ue<Je;++Ue)for(O.call($,de[0][Ue],je=Pe[Ue],ge[0][Ue][1]),ze=1;ze<ot;++ze)O.call($,de[ze][Ue],je+=ge[ze-1][Ue][1],ge[ze][Ue][1]);return X}return $.values=function(X){return arguments.length?(y=X,$):y},$.order=function(X){return arguments.length?(S=typeof X=="function"?X:Rv.get(X)||Qf,$):S},$.offset=function(X){return arguments.length?(D=typeof X=="function"?X:Fv.get(X)||jc,$):D},$.x=function(X){return arguments.length?(U=X,$):U},$.y=function(X){return arguments.length?(Z=X,$):Z},$.out=function(X){return arguments.length?(O=X,$):O},$};function ty(y){return y.x}function ry(y){return y.y}function Iv(y,S,D){y.y0=S,y.y=D}var Rv=e.map({"inside-out":function(y){var S=y.length,D,O,U=y.map(kp),Z=y.map(qi),$=e.range(S).sort(function(De,Pe){return U[De]-U[Pe]}),X=0,ae=0,de=[],ge=[];for(D=0;D<S;++D)O=$[D],X<ae?(X+=Z[O],de.push(O)):(ae+=Z[O],ge.push(O));return ge.reverse().concat(de)},reverse:function(y){return e.range(y.length).reverse()},default:Qf}),Fv=e.map({silhouette:function(y){var S=y.length,D=y[0].length,O=[],U=0,Z,$,X,ae=[];for($=0;$<D;++$){for(Z=0,X=0;Z<S;Z++)X+=y[Z][$][1];X>U&&(U=X),O.push(X)}for($=0;$<D;++$)ae[$]=(U-O[$])/2;return ae},wiggle:function(y){var S=y.length,D=y[0],O=D.length,U,Z,$,X,ae,de,ge,De,Pe,Je=[];for(Je[0]=De=Pe=0,Z=1;Z<O;++Z){for(U=0,X=0;U<S;++U)X+=y[U][Z][1];for(U=0,ae=0,ge=D[Z][0]-D[Z-1][0];U<S;++U){for($=0,de=(y[U][Z][1]-y[U][Z-1][1])/(2*ge);$<U;++$)de+=(y[$][Z][1]-y[$][Z-1][1])/ge;ae+=de*y[U][Z][1]}Je[Z]=De-=X?ae/X*ge:0,De<Pe&&(Pe=De)}for(Z=0;Z<O;++Z)Je[Z]-=Pe;return Je},expand:function(y){var S=y.length,D=y[0].length,O=1/S,U,Z,$,X=[];for(Z=0;Z<D;++Z){for(U=0,$=0;U<S;U++)$+=y[U][Z][1];if($)for(U=0;U<S;U++)y[U][Z][1]/=$;else for(U=0;U<S;U++)y[U][Z][1]=O}for(Z=0;Z<D;++Z)X[Z]=0;return X},zero:jc});function Qf(y){return e.range(y.length)}function jc(y){for(var S=-1,D=y[0].length,O=[];++S<D;)O[S]=0;return O}function kp(y){for(var S=1,D=0,O=y[0][1],U,Z=y.length;S<Z;++S)(U=y[S][1])>O&&(D=S,O=U);return D}function qi(y){return y.reduce(ay,0)}function ay(y,S){return y+S[1]}e.layout.histogram=function(){var y=!0,S=Number,D=Cp,O=Jc;function U(Z,Pe){for(var X=[],ae=Z.map(S,this),de=D.call(this,ae,Pe),ge=O.call(this,de,ae,Pe),De,Pe=-1,Je=ae.length,ot=ge.length-1,ze=y?1:1/Je,Ue;++Pe<ot;)De=X[Pe]=[],De.dx=ge[Pe+1]-(De.x=ge[Pe]),De.y=0;if(ot>0)for(Pe=-1;++Pe<Je;)Ue=ae[Pe],Ue>=de[0]&&Ue<=de[1]&&(De=X[e.bisect(ge,Ue,1,ot)-1],De.y+=ze,De.push(Z[Pe]));return X}return U.value=function(Z){return arguments.length?(S=Z,U):S},U.range=function(Z){return arguments.length?(D=fa(Z),U):D},U.bins=function(Z){return arguments.length?(O=typeof Z=="number"?function($){return qv($,Z)}:fa(Z),U):O},U.frequency=function(Z){return arguments.length?(y=!!Z,U):y},U};function Jc(y,S){return qv(y,Math.ceil(Math.log(S.length)/Math.LN2+1))}function qv(y,S){for(var D=-1,O=+y[0],U=(y[1]-O)/S,Z=[];++D<=S;)Z[D]=U*D+O;return Z}function Cp(y){return[e.min(y),e.max(y)]}e.layout.pack=function(){var y=e.layout.hierarchy().sort(lf),S=0,D=[1,1],O;function U(Z,$){var X=y.call(this,Z,$),ae=X[0],de=D[0],ge=D[1],De=O==null?Math.sqrt:typeof O=="function"?O:function(){return O};if(ae.x=ae.y=0,ds(ae,function(Je){Je.r=+De(Je.value)}),ds(ae,$f),S){var Pe=S*(O?1:Math.max(2*ae.r/de,2*ae.r/ge))/2;ds(ae,function(Je){Je.r+=Pe}),ds(ae,$f),ds(ae,function(Je){Je.r-=Pe})}return Pl(ae,de/2,ge/2,O?1:1/Math.max(2*ae.r/de,2*ae.r/ge)),X}return U.size=function(Z){return arguments.length?(D=Z,U):D},U.radius=function(Z){return arguments.length?(O=Z==null||typeof Z=="function"?Z:+Z,U):O},U.padding=function(Z){return arguments.length?(S=+Z,U):S},El(U,y)};function lf(y,S){return y.value-S.value}function Mu(y,S){var D=y._pack_next;y._pack_next=S,S._pack_prev=y,S._pack_next=D,D._pack_prev=S}function Nv(y,S){y._pack_next=S,S._pack_prev=y}function xn(y,S){var D=S.x-y.x,O=S.y-y.y,U=y.r+S.r;return .999*U*U>D*D+O*O}function $f(y){if(!(S=y.children)||!(Pe=S.length))return;var S,D=1/0,O=-1/0,U=1/0,Z=-1/0,$,X,ae,de,ge,De,Pe;function Je(We){D=Math.min(We.x-We.r,D),O=Math.max(We.x+We.r,O),U=Math.min(We.y-We.r,U),Z=Math.max(We.y+We.r,Z)}if(S.forEach(tl),$=S[0],$.x=-$.r,$.y=0,Je($),Pe>1&&(X=S[1],X.x=X.r,X.y=0,Je(X),Pe>2))for(ae=S[2],Dl($,X,ae),Je(ae),Mu($,ae),$._pack_prev=ae,Mu(ae,X),X=$._pack_next,de=3;de<Pe;de++){Dl($,X,ae=S[de]);var ot=0,ze=1,Ue=1;for(ge=X._pack_next;ge!==X;ge=ge._pack_next,ze++)if(xn(ge,ae)){ot=1;break}if(ot==1)for(De=$._pack_prev;De!==ge._pack_prev&&!xn(De,ae);De=De._pack_prev,Ue++);ot?(ze<Ue||ze==Ue&&X.r<$.r?Nv($,X=ge):Nv($=De,X),de--):(Mu($,ae),X=ae,Je(ae))}var je=(D+O)/2,lt=(U+Z)/2,nt=0;for(de=0;de<Pe;de++)ae=S[de],ae.x-=je,ae.y-=lt,nt=Math.max(nt,ae.r+Math.sqrt(ae.x*ae.x+ae.y*ae.y));y.r=nt,S.forEach(Ll)}function tl(y){y._pack_next=y._pack_prev=y}function Ll(y){delete y._pack_next,delete y._pack_prev}function Pl(y,S,D,O){var U=y.children;if(y.x=S+=O*y.x,y.y=D+=O*y.y,y.r*=O,U)for(var Z=-1,$=U.length;++Z<$;)Pl(U[Z],S,D,O)}function Dl(y,S,D){var O=y.r+D.r,U=S.x-y.x,Z=S.y-y.y;if(O&&(U||Z)){var $=S.r+D.r,X=U*U+Z*Z;$*=$,O*=O;var ae=.5+(O-$)/(2*X),de=Math.sqrt(Math.max(0,2*$*(O+X)-(O-=X)*O-$*$))/(2*X);D.x=y.x+ae*U+de*Z,D.y=y.y+ae*Z-de*U}else D.x=y.x+O,D.y=y.y}e.layout.tree=function(){var y=e.layout.hierarchy().sort(null).value(null),S=rl,D=[1,1],O=null;function U(ge,De){var Pe=y.call(this,ge,De),Je=Pe[0],ot=Z(Je);if(ds(ot,$),ot.parent.m=-ot.z,of(ot,X),O)of(Je,de);else{var ze=Je,Ue=Je,je=Je;of(Je,function(Zt){Zt.x<ze.x&&(ze=Zt),Zt.x>Ue.x&&(Ue=Zt),Zt.depth>je.depth&&(je=Zt)});var lt=S(ze,Ue)/2-ze.x,nt=D[0]/(Ue.x+S(Ue,ze)/2+lt),We=D[1]/(je.depth||1);of(Je,function(Zt){Zt.x=(Zt.x+lt)*nt,Zt.y=Zt.depth*We})}return Pe}function Z(ge){for(var De={A:null,children:[ge]},Pe=[De],Je;(Je=Pe.pop())!=null;)for(var ot=Je.children,ze,Ue=0,je=ot.length;Ue<je;++Ue)Pe.push((ot[Ue]=ze={_:ot[Ue],parent:Je,children:(ze=ot[Ue].children)&&ze.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ue}).a=ze);return De.children[0]}function $(ge){var De=ge.children,Pe=ge.parent.children,Je=ge.i?Pe[ge.i-1]:null;if(De.length){Ep(ge);var ot=(De[0].z+De[De.length-1].z)/2;Je?(ge.z=Je.z+S(ge._,Je._),ge.m=ge.z-ot):ge.z=ot}else Je&&(ge.z=Je.z+S(ge._,Je._));ge.parent.A=ae(ge,Je,ge.parent.A||Pe[0])}function X(ge){ge._.x=ge.z+ge.parent.m,ge.m+=ge.parent.m}function ae(ge,De,Pe){if(De){for(var Je=ge,ot=ge,ze=De,Ue=Je.parent.children[0],je=Je.m,lt=ot.m,nt=ze.m,We=Ue.m,Zt;ze=Ps(ze),Je=Ls(Je),ze&&Je;)Ue=Ls(Ue),ot=Ps(ot),ot.a=ge,Zt=ze.z+nt-Je.z-je+S(ze._,Je._),Zt>0&&(zl(iy(ze,ge,Pe),ge,Zt),je+=Zt,lt+=Zt),nt+=ze.m,je+=Je.m,We+=Ue.m,lt+=ot.m;ze&&!Ps(ot)&&(ot.t=ze,ot.m+=nt-lt),Je&&!Ls(Ue)&&(Ue.t=Je,Ue.m+=je-We,Pe=ge)}return Pe}function de(ge){ge.x*=D[0],ge.y=ge.depth*D[1]}return U.separation=function(ge){return arguments.length?(S=ge,U):S},U.size=function(ge){return arguments.length?(O=(D=ge)==null?de:null,U):O?null:D},U.nodeSize=function(ge){return arguments.length?(O=(D=ge)==null?null:de,U):O?D:null},El(U,y)};function rl(y,S){return y.parent==S.parent?1:2}function Ls(y){var S=y.children;return S.length?S[0]:y.t}function Ps(y){var S=y.children,D;return(D=S.length)?S[D-1]:y.t}function zl(y,S,D){var O=D/(S.i-y.i);S.c-=O,S.s+=D,y.c+=O,S.z+=D,S.m+=D}function Ep(y){for(var S=0,D=0,O=y.children,U=O.length,Z;--U>=0;)Z=O[U],Z.z+=S,Z.m+=S,S+=Z.s+(D+=Z.c)}function iy(y,S,D){return y.a.parent===S.parent?y.a:D}e.layout.cluster=function(){var y=e.layout.hierarchy().sort(null).value(null),S=rl,D=[1,1],O=!1;function U(Z,$){var X=y.call(this,Z,$),ae=X[0],de,ge=0;ds(ae,function(ze){var Ue=ze.children;Ue&&Ue.length?(ze.x=oy(Ue),ze.y=ny(Ue)):(ze.x=de?ge+=S(ze,de):0,ze.y=0,de=ze)});var De=Lp(ae),Pe=Pp(ae),Je=De.x-S(De,Pe)/2,ot=Pe.x+S(Pe,De)/2;return ds(ae,O?function(ze){ze.x=(ze.x-ae.x)*D[0],ze.y=(ae.y-ze.y)*D[1]}:function(ze){ze.x=(ze.x-Je)/(ot-Je)*D[0],ze.y=(1-(ae.y?ze.y/ae.y:1))*D[1]}),X}return U.separation=function(Z){return arguments.length?(S=Z,U):S},U.size=function(Z){return arguments.length?(O=(D=Z)==null,U):O?null:D},U.nodeSize=function(Z){return arguments.length?(O=(D=Z)!=null,U):O?D:null},El(U,y)};function ny(y){return 1+e.max(y,function(S){return S.y})}function oy(y){return y.reduce(function(S,D){return S+D.x},0)/y.length}function Lp(y){var S=y.children;return S&&S.length?Lp(S[0]):y}function Pp(y){var S=y.children,D;return S&&(D=S.length)?Pp(S[D-1]):y}e.layout.treemap=function(){var y=e.layout.hierarchy(),S=Math.round,D=[1,1],O=null,U=Bv,Z=!1,$,X="squarify",ae=.5*(1+Math.sqrt(5));function de(ze,Ue){for(var je=-1,lt=ze.length,nt,We;++je<lt;)We=(nt=ze[je]).value*(Ue<0?0:Ue),nt.area=isNaN(We)||We<=0?0:We}function ge(ze){var Ue=ze.children;if(Ue&&Ue.length){var je=U(ze),lt=[],nt=Ue.slice(),We,Zt=1/0,or,fr=X==="slice"?je.dx:X==="dice"?je.dy:X==="slice-dice"?ze.depth&1?je.dy:je.dx:Math.min(je.dx,je.dy),lr;for(de(nt,je.dx*je.dy/ze.value),lt.area=0;(lr=nt.length)>0;)lt.push(We=nt[lr-1]),lt.area+=We.area,X!=="squarify"||(or=Pe(lt,fr))<=Zt?(nt.pop(),Zt=or):(lt.area-=lt.pop().area,Je(lt,fr,je,!1),fr=Math.min(je.dx,je.dy),lt.length=lt.area=0,Zt=1/0);lt.length&&(Je(lt,fr,je,!0),lt.length=lt.area=0),Ue.forEach(ge)}}function De(ze){var Ue=ze.children;if(Ue&&Ue.length){var je=U(ze),lt=Ue.slice(),nt,We=[];for(de(lt,je.dx*je.dy/ze.value),We.area=0;nt=lt.pop();)We.push(nt),We.area+=nt.area,nt.z!=null&&(Je(We,nt.z?je.dx:je.dy,je,!lt.length),We.length=We.area=0);Ue.forEach(De)}}function Pe(ze,Ue){for(var je=ze.area,lt,nt=0,We=1/0,Zt=-1,or=ze.length;++Zt<or;)(lt=ze[Zt].area)&&(lt<We&&(We=lt),lt>nt&&(nt=lt));return je*=je,Ue*=Ue,je?Math.max(Ue*nt*ae/je,je/(Ue*We*ae)):1/0}function Je(ze,Ue,je,lt){var nt=-1,We=ze.length,Zt=je.x,or=je.y,fr=Ue?S(ze.area/Ue):0,lr;if(Ue==je.dx){for((lt||fr>je.dy)&&(fr=je.dy);++nt<We;)lr=ze[nt],lr.x=Zt,lr.y=or,lr.dy=fr,Zt+=lr.dx=Math.min(je.x+je.dx-Zt,fr?S(lr.area/fr):0);lr.z=!0,lr.dx+=je.x+je.dx-Zt,je.y+=fr,je.dy-=fr}else{for((lt||fr>je.dx)&&(fr=je.dx);++nt<We;)lr=ze[nt],lr.x=Zt,lr.y=or,lr.dx=fr,or+=lr.dy=Math.min(je.y+je.dy-or,fr?S(lr.area/fr):0);lr.z=!1,lr.dy+=je.y+je.dy-or,je.x+=fr,je.dx-=fr}}function ot(ze){var Ue=$||y(ze),je=Ue[0];return je.x=je.y=0,je.value?(je.dx=D[0],je.dy=D[1]):je.dx=je.dy=0,$&&y.revalue(je),de([je],je.dx*je.dy/je.value),($?De:ge)(je),Z&&($=Ue),Ue}return ot.size=function(ze){return arguments.length?(D=ze,ot):D},ot.padding=function(ze){if(!arguments.length)return O;function Ue(nt){var We=ze.call(ot,nt,nt.depth);return We==null?Bv(nt):Ov(nt,typeof We=="number"?[We,We,We,We]:We)}function je(nt){return Ov(nt,ze)}var lt;return U=(O=ze)==null?Bv:(lt=typeof ze)=="function"?Ue:(lt==="number"&&(ze=[ze,ze,ze,ze]),je),ot},ot.round=function(ze){return arguments.length?(S=ze?Math.round:Number,ot):S!=Number},ot.sticky=function(ze){return arguments.length?(Z=ze,$=null,ot):Z},ot.ratio=function(ze){return arguments.length?(ae=ze,ot):ae},ot.mode=function(ze){return arguments.length?(X=ze+"",ot):X},El(ot,y)};function Bv(y){return{x:y.x,y:y.y,dx:y.dx,dy:y.dy}}function Ov(y,S){var D=y.x+S[3],O=y.y+S[0],U=y.dx-S[1]-S[3],Z=y.dy-S[0]-S[2];return U<0&&(D+=U/2,U=0),Z<0&&(O+=Z/2,Z=0),{x:D,y:O,dx:U,dy:Z}}e.random={normal:function(y,S){var D=arguments.length;return D<2&&(S=1),D<1&&(y=0),function(){var O,U,Z;do O=Math.random()*2-1,U=Math.random()*2-1,Z=O*O+U*U;while(!Z||Z>1);return y+S*O*Math.sqrt(-2*Math.log(Z)/Z)}},logNormal:function(){var y=e.random.normal.apply(e,arguments);return function(){return Math.exp(y())}},bates:function(y){var S=e.random.irwinHall(y);return function(){return S()/y}},irwinHall:function(y){return function(){for(var S=0,D=0;D<y;D++)S+=Math.random();return S}}},e.scale={};function ec(y){var S=y[0],D=y[y.length-1];return S<D?[S,D]:[D,S]}function Kc(y){return y.rangeExtent?y.rangeExtent():ec(y.range())}function Dp(y,S,D,O){var U=D(y[0],y[1]),Z=O(S[0],S[1]);return function($){return Z(U($))}}function Uv(y,S){var D=0,O=y.length-1,U=y[D],Z=y[O],$;return Z<U&&($=D,D=O,O=$,$=U,U=Z,Z=$),y[D]=S.floor(U),y[O]=S.ceil(Z),y}function zp(y){return y?{floor:function(S){return Math.floor(S/y)*y},ceil:function(S){return Math.ceil(S/y)*y}}:uf}var uf={floor:Se,ceil:Se};function sy(y,S,D,O){var U=[],Z=[],$=0,X=Math.min(y.length,S.length)-1;for(y[X]<y[0]&&(y=y.slice().reverse(),S=S.slice().reverse());++$<=X;)U.push(D(y[$-1],y[$])),Z.push(O(S[$-1],S[$]));return function(ae){var de=e.bisect(y,ae,1,X)-1;return Z[de](U[de](ae))}}e.scale.linear=function(){return Ip([0,1],[0,1],on,!1)};function Ip(y,S,D,O){var U,Z;function $(){var ae=Math.min(y.length,S.length)>2?sy:Dp,de=O?vs:Qm;return U=ae(y,S,de,D),Z=ae(S,y,de,on),X}function X(ae){return U(ae)}return X.invert=function(ae){return Z(ae)},X.domain=function(ae){return arguments.length?(y=ae.map(Number),$()):y},X.range=function(ae){return arguments.length?(S=ae,$()):S},X.rangeRound=function(ae){return X.range(ae).interpolate(Lv)},X.clamp=function(ae){return arguments.length?(O=ae,$()):O},X.interpolate=function(ae){return arguments.length?(D=ae,$()):D},X.ticks=function(ae){return Hv(y,ae)},X.tickFormat=function(ae,de){return d3_scale_linearTickFormat(y,ae,de)},X.nice=function(ae){return Fp(y,ae),$()},X.copy=function(){return Ip(y,S,D,O)},$()}function Rp(y,S){return e.rebind(y,S,"range","rangeRound","interpolate","clamp")}function Fp(y,S){return Uv(y,zp(Vv(y,S)[2])),Uv(y,zp(Vv(y,S)[2])),y}function Vv(y,S){S==null&&(S=10);var D=ec(y),O=D[1]-D[0],U=Math.pow(10,Math.floor(Math.log(O/S)/Math.LN10)),Z=S/O*U;return Z<=.15?U*=10:Z<=.35?U*=5:Z<=.75&&(U*=2),D[0]=Math.ceil(D[0]/U)*U,D[1]=Math.floor(D[1]/U)*U+U*.5,D[2]=U,D}function Hv(y,S){return e.range.apply(e,Vv(y,S))}var Su={s:1,g:1,p:1,r:1,e:1};function Il(y){return-Math.floor(Math.log(y)/Math.LN10+.01)}function tc(y,S){var D=Il(S[2]);return y in Su?Math.abs(D-Il(Math.max(I(S[0]),I(S[1]))))+ +(y!=="e"):D-(y==="%")*2}e.scale.log=function(){return Gv(e.scale.linear().domain([0,1]),10,!0,[1,10])};function Gv(y,S,D,O){function U(X){return(D?Math.log(X<0?0:X):-Math.log(X>0?0:-X))/Math.log(S)}function Z(X){return D?Math.pow(S,X):-Math.pow(S,-X)}function $(X){return y(U(X))}return $.invert=function(X){return Z(y.invert(X))},$.domain=function(X){return arguments.length?(D=X[0]>=0,y.domain((O=X.map(Number)).map(U)),$):O},$.base=function(X){return arguments.length?(S=+X,y.domain(O.map(U)),$):S},$.nice=function(){var X=Uv(O.map(U),D?Math:Qc);return y.domain(X),O=X.map(Z),$},$.ticks=function(){var X=ec(O),ae=[],de=X[0],ge=X[1],De=Math.floor(U(de)),Pe=Math.ceil(U(ge)),Je=S%1?2:S;if(isFinite(Pe-De)){if(D){for(;De<Pe;De++)for(var ot=1;ot<Je;ot++)ae.push(Z(De)*ot);ae.push(Z(De))}else for(ae.push(Z(De));De++<Pe;)for(var ot=Je-1;ot>0;ot--)ae.push(Z(De)*ot);for(De=0;ae[De]<de;De++);for(Pe=ae.length;ae[Pe-1]>ge;Pe--);ae=ae.slice(De,Pe)}return ae},$.copy=function(){return Gv(y.copy(),S,D,O)},Rp($,y)}var Qc={floor:function(y){return-Math.ceil(-y)},ceil:function(y){return-Math.floor(-y)}};e.scale.pow=function(){return $c(e.scale.linear(),1,[0,1])};function $c(y,S,D){var O=eh(S),U=eh(1/S);function Z($){return y(O($))}return Z.invert=function($){return U(y.invert($))},Z.domain=function($){return arguments.length?(y.domain((D=$.map(Number)).map(O)),Z):D},Z.ticks=function($){return Hv(D,$)},Z.tickFormat=function($,X){return d3_scale_linearTickFormat(D,$,X)},Z.nice=function($){return Z.domain(Fp(D,$))},Z.exponent=function($){return arguments.length?(O=eh(S=$),U=eh(1/S),y.domain(D.map(O)),Z):S},Z.copy=function(){return $c(y.copy(),S,D)},Rp(Z,y)}function eh(y){return function(S){return S<0?-Math.pow(-S,y):Math.pow(S,y)}}e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return Rl([],{t:"range",a:[[]]})};function Rl(y,S){var D,O,U;function Z(X){return O[((D.get(X)||(S.t==="range"?D.set(X,y.push(X)):NaN))-1)%O.length]}function $(X,ae){return e.range(y.length).map(function(de){return X+ae*de})}return Z.domain=function(X){if(!arguments.length)return y;y=[],D=new z;for(var ae=-1,de=X.length,ge;++ae<de;)D.has(ge=X[ae])||D.set(ge,y.push(ge));return Z[S.t].apply(Z,S.a)},Z.range=function(X){return arguments.length?(O=X,U=0,S={t:"range",a:arguments},Z):O},Z.rangePoints=function(X,ae){arguments.length<2&&(ae=0);var de=X[0],ge=X[1],De=y.length<2?(de=(de+ge)/2,0):(ge-de)/(y.length-1+ae);return O=$(de+De*ae/2,De),U=0,S={t:"rangePoints",a:arguments},Z},Z.rangeRoundPoints=function(X,ae){arguments.length<2&&(ae=0);var de=X[0],ge=X[1],De=y.length<2?(de=ge=Math.round((de+ge)/2),0):(ge-de)/(y.length-1+ae)|0;return O=$(de+Math.round(De*ae/2+(ge-de-(y.length-1+ae)*De)/2),De),U=0,S={t:"rangeRoundPoints",a:arguments},Z},Z.rangeBands=function(X,ae,de){arguments.length<2&&(ae=0),arguments.length<3&&(de=ae);var ge=X[1]<X[0],De=X[ge-0],Pe=X[1-ge],Je=(Pe-De)/(y.length-ae+2*de);return O=$(De+Je*de,Je),ge&&O.reverse(),U=Je*(1-ae),S={t:"rangeBands",a:arguments},Z},Z.rangeRoundBands=function(X,ae,de){arguments.length<2&&(ae=0),arguments.length<3&&(de=ae);var ge=X[1]<X[0],De=X[ge-0],Pe=X[1-ge],Je=Math.floor((Pe-De)/(y.length-ae+2*de));return O=$(De+Math.round((Pe-De-(y.length-ae)*Je)/2),Je),ge&&O.reverse(),U=Math.round(Je*(1-ae)),S={t:"rangeRoundBands",a:arguments},Z},Z.rangeBand=function(){return U},Z.rangeExtent=function(){return ec(S.a[0])},Z.copy=function(){return Rl(y,S)},Z.domain(y)}e.scale.category10=function(){return e.scale.ordinal().range(th)},e.scale.category20=function(){return e.scale.ordinal().range(ku)},e.scale.category20b=function(){return e.scale.ordinal().range(ff)},e.scale.category20c=function(){return e.scale.ordinal().range(qp)};var th=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ii),ku=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ii),ff=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ii),qp=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ii);e.scale.quantile=function(){return rh([],[])};function rh(y,S){var D;function O(){var Z=0,$=S.length;for(D=[];++Z<$;)D[Z-1]=e.quantile(y,Z/$);return U}function U(Z){if(!isNaN(Z=+Z))return S[e.bisect(D,Z)]}return U.domain=function(Z){return arguments.length?(y=Z.map(T).filter(M).sort(_),O()):y},U.range=function(Z){return arguments.length?(S=Z,O()):S},U.quantiles=function(){return D},U.invertExtent=function(Z){return Z=S.indexOf(Z),Z<0?[NaN,NaN]:[Z>0?D[Z-1]:y[0],Z<D.length?D[Z]:y[y.length-1]]},U.copy=function(){return rh(y,S)},O()}e.scale.quantize=function(){return di(0,1,[0,1])};function di(y,S,D){var O,U;function Z(X){return D[Math.max(0,Math.min(U,Math.floor(O*(X-y))))]}function $(){return O=D.length/(S-y),U=D.length-1,Z}return Z.domain=function(X){return arguments.length?(y=+X[0],S=+X[X.length-1],$()):[y,S]},Z.range=function(X){return arguments.length?(D=X,$()):D},Z.invertExtent=function(X){return X=D.indexOf(X),X=X<0?NaN:X/O+y,[X,X+1/O]},Z.copy=function(){return di(y,S,D)},$()}e.scale.threshold=function(){return rc([.5],[0,1])};function rc(y,S){function D(O){if(O<=O)return S[e.bisect(y,O)]}return D.domain=function(O){return arguments.length?(y=O,D):y},D.range=function(O){return arguments.length?(S=O,D):S},D.invertExtent=function(O){return O=S.indexOf(O),[y[O-1],y[O]]},D.copy=function(){return rc(y,S)},D}e.scale.identity=function(){return Np([0,1])};function Np(y){function S(D){return+D}return S.invert=S,S.domain=S.range=function(D){return arguments.length?(y=D.map(S),S):y},S.ticks=function(D){return Hv(y,D)},S.tickFormat=function(D,O){return d3_scale_linearTickFormat(y,D,O)},S.copy=function(){return Np(y)},S}e.svg={};function Bp(){return 0}e.svg.arc=function(){var y=Op,S=Up,D=Bp,O=Fl,U=Zv,Z=Vp,$=ly;function X(){var de=Math.max(0,+y.apply(this,arguments)),ge=Math.max(0,+S.apply(this,arguments)),De=U.apply(this,arguments)-Ar,Pe=Z.apply(this,arguments)-Ar,Je=Math.abs(Pe-De),ot=De>Pe?0:1;if(ge<de&&(ze=ge,ge=de,de=ze),Je>=Lr)return ae(ge,ot)+(de?ae(de,1-ot):"")+"Z";var ze,Ue,je,lt,nt=0,We=0,Zt,or,fr,lr,Dr,Ir,ta,Ur,Kr=[];if((lt=(+$.apply(this,arguments)||0)/2)&&(je=O===Fl?Math.sqrt(de*de+ge*ge):+O.apply(this,arguments),ot||(We*=-1),ge&&(We=Ki(je/ge*Math.sin(lt))),de&&(nt=Ki(je/de*Math.sin(lt)))),ge){Zt=ge*Math.cos(De+We),or=ge*Math.sin(De+We),fr=ge*Math.cos(Pe-We),lr=ge*Math.sin(Pe-We);var Ba=Math.abs(Pe-De-2*We)<=dt?0:1;if(We&&ql(Zt,or,fr,lr)===ot^Ba){var ri=(De+Pe)/2;Zt=ge*Math.cos(ri),or=ge*Math.sin(ri),fr=lr=null}}else Zt=or=0;if(de){Dr=de*Math.cos(Pe-nt),Ir=de*Math.sin(Pe-nt),ta=de*Math.cos(De+nt),Ur=de*Math.sin(De+nt);var $a=Math.abs(De-Pe+2*nt)<=dt?0:1;if(nt&&ql(Dr,Ir,ta,Ur)===1-ot^$a){var jt=(De+Pe)/2;Dr=de*Math.cos(jt),Ir=de*Math.sin(jt),ta=Ur=null}}else Dr=Ir=0;if(Je>He&&(ze=Math.min(Math.abs(ge-de)/2,+D.apply(this,arguments)))>.001){Ue=de<ge^ot?0:1;var Jr=ze,oa=ze;if(Je<dt){var la=ta==null?[Dr,Ir]:fr==null?[Zt,or]:Zo([Zt,or],[ta,Ur],[fr,lr],[Dr,Ir]),Ei=Zt-la[0],Vi=or-la[1],$i=fr-la[0],xi=lr-la[1],bn=1/Math.sin(Math.acos((Ei*$i+Vi*xi)/(Math.sqrt(Ei*Ei+Vi*Vi)*Math.sqrt($i*$i+xi*xi)))/2),wr=Math.sqrt(la[0]*la[0]+la[1]*la[1]);oa=Math.min(ze,(de-wr)/(bn-1)),Jr=Math.min(ze,(ge-wr)/(bn+1))}if(fr!=null){var Vr=Cu(ta==null?[Dr,Ir]:[ta,Ur],[Zt,or],ge,Jr,ot),Ni=Cu([fr,lr],[Dr,Ir],ge,Jr,ot);ze===Jr?Kr.push("M",Vr[0],"A",Jr,",",Jr," 0 0,",Ue," ",Vr[1],"A",ge,",",ge," 0 ",1-ot^ql(Vr[1][0],Vr[1][1],Ni[1][0],Ni[1][1]),",",ot," ",Ni[1],"A",Jr,",",Jr," 0 0,",Ue," ",Ni[0]):Kr.push("M",Vr[0],"A",Jr,",",Jr," 0 1,",Ue," ",Ni[0])}else Kr.push("M",Zt,",",or);if(ta!=null){var Ti=Cu([Zt,or],[ta,Ur],de,-oa,ot),uo=Cu([Dr,Ir],fr==null?[Zt,or]:[fr,lr],de,-oa,ot);ze===oa?Kr.push("L",uo[0],"A",oa,",",oa," 0 0,",Ue," ",uo[1],"A",de,",",de," 0 ",ot^ql(uo[1][0],uo[1][1],Ti[1][0],Ti[1][1]),",",1-ot," ",Ti[1],"A",oa,",",oa," 0 0,",Ue," ",Ti[0]):Kr.push("L",uo[0],"A",oa,",",oa," 0 0,",Ue," ",Ti[0])}else Kr.push("L",Dr,",",Ir)}else Kr.push("M",Zt,",",or),fr!=null&&Kr.push("A",ge,",",ge," 0 ",Ba,",",ot," ",fr,",",lr),Kr.push("L",Dr,",",Ir),ta!=null&&Kr.push("A",de,",",de," 0 ",$a,",",1-ot," ",ta,",",Ur);return Kr.push("Z"),Kr.join("")}function ae(de,ge){return"M0,"+de+"A"+de+","+de+" 0 1,"+ge+" 0,"+-de+"A"+de+","+de+" 0 1,"+ge+" 0,"+de}return X.innerRadius=function(de){return arguments.length?(y=fa(de),X):y},X.outerRadius=function(de){return arguments.length?(S=fa(de),X):S},X.cornerRadius=function(de){return arguments.length?(D=fa(de),X):D},X.padRadius=function(de){return arguments.length?(O=de==Fl?Fl:fa(de),X):O},X.startAngle=function(de){return arguments.length?(U=fa(de),X):U},X.endAngle=function(de){return arguments.length?(Z=fa(de),X):Z},X.padAngle=function(de){return arguments.length?($=fa(de),X):$},X.centroid=function(){var de=(+y.apply(this,arguments)+ +S.apply(this,arguments))/2,ge=(+U.apply(this,arguments)+ +Z.apply(this,arguments))/2-Ar;return[Math.cos(ge)*de,Math.sin(ge)*de]},X};var Fl="auto";function Op(y){return y.innerRadius}function Up(y){return y.outerRadius}function Zv(y){return y.startAngle}function Vp(y){return y.endAngle}function ly(y){return y&&y.padAngle}function ql(y,S,D,O){return(y-D)*S-(S-O)*y>0?0:1}function Cu(y,S,D,O,U){var Z=y[0]-S[0],$=y[1]-S[1],X=(U?O:-O)/Math.sqrt(Z*Z+$*$),ae=X*$,de=-X*Z,ge=y[0]+ae,De=y[1]+de,Pe=S[0]+ae,Je=S[1]+de,ot=(ge+Pe)/2,ze=(De+Je)/2,Ue=Pe-ge,je=Je-De,lt=Ue*Ue+je*je,nt=D-O,We=ge*Je-Pe*De,Zt=(je<0?-1:1)*Math.sqrt(Math.max(0,nt*nt*lt-We*We)),or=(We*je-Ue*Zt)/lt,fr=(-We*Ue-je*Zt)/lt,lr=(We*je+Ue*Zt)/lt,Dr=(-We*Ue+je*Zt)/lt,Ir=or-ot,ta=fr-ze,Ur=lr-ot,Kr=Dr-ze;return Ir*Ir+ta*ta>Ur*Ur+Kr*Kr&&(or=lr,fr=Dr),[[or-ae,fr-de],[or*D/nt,fr*D/nt]]}function ac(){return!0}function Ds(y){var S=_u,D=_l,O=ac,U=Jo,Z=U.key,$=.7;function X(ae){var de=[],ge=[],De=-1,Pe=ae.length,Je,ot=fa(S),ze=fa(D);function Ue(){de.push("M",U(y(ge),$))}for(;++De<Pe;)O.call(this,Je=ae[De],De)?ge.push([+ot.call(this,Je,De),+ze.call(this,Je,De)]):ge.length&&(Ue(),ge=[]);return ge.length&&Ue(),de.length?de.join(""):null}return X.x=function(ae){return arguments.length?(S=ae,X):S},X.y=function(ae){return arguments.length?(D=ae,X):D},X.defined=function(ae){return arguments.length?(O=ae,X):O},X.interpolate=function(ae){return arguments.length?(typeof ae=="function"?Z=U=ae:Z=(U=zs.get(ae)||Jo).key,X):Z},X.tension=function(ae){return arguments.length?($=ae,X):$},X}e.svg.line=function(){return Ds(Se)};var zs=e.map({linear:Jo,"linear-closed":cf,step:uy,"step-before":hf,"step-after":Yv,basis:Eu,"basis-open":cy,"basis-closed":hy,bundle:ih,cardinal:Wv,"cardinal-open":fy,"cardinal-closed":ps,monotone:Gp});zs.forEach(function(y,S){S.key=y,S.closed=/-closed$/.test(y)});function Jo(y){return y.length>1?y.join("L"):y+"Z"}function cf(y){return y.join("L")+"Z"}function uy(y){for(var S=0,D=y.length,O=y[0],U=[O[0],",",O[1]];++S<D;)U.push("H",(O[0]+(O=y[S])[0])/2,"V",O[1]);return D>1&&U.push("H",O[0]),U.join("")}function hf(y){for(var S=0,D=y.length,O=y[0],U=[O[0],",",O[1]];++S<D;)U.push("V",(O=y[S])[1],"H",O[0]);return U.join("")}function Yv(y){for(var S=0,D=y.length,O=y[0],U=[O[0],",",O[1]];++S<D;)U.push("H",(O=y[S])[0],"V",O[1]);return U.join("")}function fy(y,S){return y.length<4?Jo(y):y[1]+vf(y.slice(1,-1),ah(y,S))}function ps(y,S){return y.length<3?cf(y):y[0]+vf((y.push(y[0]),y),ah([y[y.length-2]].concat(y,[y[1]]),S))}function Wv(y,S){return y.length<3?Jo(y):y[0]+vf(y,ah(y,S))}function vf(y,S){if(S.length<1||y.length!=S.length&&y.length!=S.length+2)return Jo(y);var D=y.length!=S.length,O="",U=y[0],Z=y[1],$=S[0],X=$,ae=1;if(D&&(O+="Q"+(Z[0]-$[0]*2/3)+","+(Z[1]-$[1]*2/3)+","+Z[0]+","+Z[1],U=y[1],ae=2),S.length>1){X=S[1],Z=y[ae],ae++,O+="C"+(U[0]+$[0])+","+(U[1]+$[1])+","+(Z[0]-X[0])+","+(Z[1]-X[1])+","+Z[0]+","+Z[1];for(var de=2;de<S.length;de++,ae++)Z=y[ae],X=S[de],O+="S"+(Z[0]-X[0])+","+(Z[1]-X[1])+","+Z[0]+","+Z[1]}if(D){var ge=y[ae];O+="Q"+(Z[0]+X[0]*2/3)+","+(Z[1]+X[1]*2/3)+","+ge[0]+","+ge[1]}return O}function ah(y,S){for(var D=[],O=(1-S)/2,U,Z=y[0],$=y[1],X=1,ae=y.length;++X<ae;)U=Z,Z=$,$=y[X],D.push([O*($[0]-U[0]),O*($[1]-U[1])]);return D}function Eu(y){if(y.length<3)return Jo(y);var S=1,D=y.length,O=y[0],U=O[0],Z=O[1],$=[U,U,U,(O=y[1])[0]],X=[Z,Z,Z,O[1]],ae=[U,",",Z,"L",_o(Nl,$),",",_o(Nl,X)];for(y.push(y[D-1]);++S<=D;)O=y[S],$.shift(),$.push(O[0]),X.shift(),X.push(O[1]),pf(ae,$,X);return y.pop(),ae.push("L",O),ae.join("")}function cy(y){if(y.length<4)return Jo(y);for(var S=[],D=-1,O=y.length,U,Z=[0],$=[0];++D<3;)U=y[D],Z.push(U[0]),$.push(U[1]);for(S.push(_o(Nl,Z)+","+_o(Nl,$)),--D;++D<O;)U=y[D],Z.shift(),Z.push(U[0]),$.shift(),$.push(U[1]),pf(S,Z,$);return S.join("")}function hy(y){for(var S,D=-1,O=y.length,U=O+4,Z,$=[],X=[];++D<4;)Z=y[D%O],$.push(Z[0]),X.push(Z[1]);for(S=[_o(Nl,$),",",_o(Nl,X)],--D;++D<U;)Z=y[D%O],$.shift(),$.push(Z[0]),X.shift(),X.push(Z[1]),pf(S,$,X);return S.join("")}function ih(y,S){var D=y.length-1;if(D)for(var O=y[0][0],U=y[0][1],Z=y[D][0]-O,$=y[D][1]-U,X=-1,ae,de;++X<=D;)ae=y[X],de=X/D,ae[0]=S*ae[0]+(1-S)*(O+de*Z),ae[1]=S*ae[1]+(1-S)*(U+de*$);return Eu(y)}function _o(y,S){return y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3]}var Hp=[0,2/3,1/3,0],df=[0,1/3,2/3,0],Nl=[0,1/6,2/3,1/6];function pf(y,S,D){y.push("C",_o(Hp,S),",",_o(Hp,D),",",_o(df,S),",",_o(df,D),",",_o(Nl,S),",",_o(Nl,D))}function mf(y,S){return(S[1]-y[1])/(S[0]-y[0])}function Xv(y){for(var S=0,D=y.length-1,O=[],U=y[0],Z=y[1],$=O[0]=mf(U,Z);++S<D;)O[S]=($+($=mf(U=Z,Z=y[S+1])))/2;return O[S]=$,O}function vy(y){for(var S=[],D,O,U,Z,$=Xv(y),X=-1,ae=y.length-1;++X<ae;)D=mf(y[X],y[X+1]),I(D)<He?$[X]=$[X+1]=0:(O=$[X]/D,U=$[X+1]/D,Z=O*O+U*U,Z>9&&(Z=D*3/Math.sqrt(Z),$[X]=Z*O,$[X+1]=Z*U));for(X=-1;++X<=ae;)Z=(y[Math.min(ae,X+1)][0]-y[Math.max(0,X-1)][0])/(6*(1+$[X]*$[X])),S.push([Z||0,$[X]*Z||0]);return S}function Gp(y){return y.length<3?Jo(y):y[0]+vf(y,vy(y))}e.svg.line.radial=function(){var y=Ds(jv);return y.radius=y.x,delete y.x,y.angle=y.y,delete y.y,y};function jv(y){for(var S,D=-1,O=y.length,U,Z;++D<O;)S=y[D],U=S[0],Z=S[1]-Ar,S[0]=U*Math.cos(Z),S[1]=U*Math.sin(Z);return y}function ic(y){var S=_u,D=_u,O=0,U=_l,Z=ac,$=Jo,X=$.key,ae=$,de="L",ge=.7;function De(Pe){var Je=[],ot=[],ze=[],Ue=-1,je=Pe.length,lt,nt=fa(S),We=fa(O),Zt=S===D?function(){return fr}:fa(D),or=O===U?function(){return lr}:fa(U),fr,lr;function Dr(){Je.push("M",$(y(ze),ge),de,ae(y(ot.reverse()),ge),"Z")}for(;++Ue<je;)Z.call(this,lt=Pe[Ue],Ue)?(ot.push([fr=+nt.call(this,lt,Ue),lr=+We.call(this,lt,Ue)]),ze.push([+Zt.call(this,lt,Ue),+or.call(this,lt,Ue)])):ot.length&&(Dr(),ot=[],ze=[]);return ot.length&&Dr(),Je.length?Je.join(""):null}return De.x=function(Pe){return arguments.length?(S=D=Pe,De):D},De.x0=function(Pe){return arguments.length?(S=Pe,De):S},De.x1=function(Pe){return arguments.length?(D=Pe,De):D},De.y=function(Pe){return arguments.length?(O=U=Pe,De):U},De.y0=function(Pe){return arguments.length?(O=Pe,De):O},De.y1=function(Pe){return arguments.length?(U=Pe,De):U},De.defined=function(Pe){return arguments.length?(Z=Pe,De):Z},De.interpolate=function(Pe){return arguments.length?(typeof Pe=="function"?X=$=Pe:X=($=zs.get(Pe)||Jo).key,ae=$.reverse||$,de=$.closed?"M":"L",De):X},De.tension=function(Pe){return arguments.length?(ge=Pe,De):ge},De}hf.reverse=Yv,Yv.reverse=hf,e.svg.area=function(){return ic(Se)},e.svg.area.radial=function(){var y=ic(jv);return y.radius=y.x,delete y.x,y.innerRadius=y.x0,delete y.x0,y.outerRadius=y.x1,delete y.x1,y.angle=y.y,delete y.y,y.startAngle=y.y0,delete y.y0,y.endAngle=y.y1,delete y.y1,y};function nh(y){return y.source}function Jv(y){return y.target}e.svg.chord=function(){var y=nh,S=Jv,D=Zp,O=Zv,U=Vp;function Z(ge,De){var Pe=$(this,y,ge,De),Je=$(this,S,ge,De);return"M"+Pe.p0+ae(Pe.r,Pe.p1,Pe.a1-Pe.a0)+(X(Pe,Je)?de(Pe.r,Pe.p1,Pe.r,Pe.p0):de(Pe.r,Pe.p1,Je.r,Je.p0)+ae(Je.r,Je.p1,Je.a1-Je.a0)+de(Je.r,Je.p1,Pe.r,Pe.p0))+"Z"}function $(ge,De,Pe,Je){var ot=De.call(ge,Pe,Je),ze=D.call(ge,ot,Je),Ue=O.call(ge,ot,Je)-Ar,je=U.call(ge,ot,Je)-Ar;return{r:ze,a0:Ue,a1:je,p0:[ze*Math.cos(Ue),ze*Math.sin(Ue)],p1:[ze*Math.cos(je),ze*Math.sin(je)]}}function X(ge,De){return ge.a0==De.a0&&ge.a1==De.a1}function ae(ge,De,Pe){return"A"+ge+","+ge+" 0 "+ +(Pe>dt)+",1 "+De}function de(ge,De,Pe,Je){return"Q 0,0 "+Je}return Z.radius=function(ge){return arguments.length?(D=fa(ge),Z):D},Z.source=function(ge){return arguments.length?(y=fa(ge),Z):y},Z.target=function(ge){return arguments.length?(S=fa(ge),Z):S},Z.startAngle=function(ge){return arguments.length?(O=fa(ge),Z):O},Z.endAngle=function(ge){return arguments.length?(U=fa(ge),Z):U},Z};function Zp(y){return y.radius}e.svg.diagonal=function(){var y=nh,S=Jv,D=Kv;function O(U,Z){var $=y.call(this,U,Z),X=S.call(this,U,Z),ae=($.y+X.y)/2,de=[$,{x:$.x,y:ae},{x:X.x,y:ae},X];return de=de.map(D),"M"+de[0]+"C"+de[1]+" "+de[2]+" "+de[3]}return O.source=function(U){return arguments.length?(y=fa(U),O):y},O.target=function(U){return arguments.length?(S=fa(U),O):S},O.projection=function(U){return arguments.length?(D=U,O):D},O};function Kv(y){return[y.x,y.y]}e.svg.diagonal.radial=function(){var y=e.svg.diagonal(),S=Kv,D=y.projection;return y.projection=function(O){return arguments.length?D(Yp(S=O)):S},y};function Yp(y){return function(){var S=y.apply(this,arguments),D=S[0],O=S[1]-Ar;return[D*Math.cos(O),D*Math.sin(O)]}}e.svg.symbol=function(){var y=yf,S=Wp;function D(O,U){return(sh.get(y.call(this,O,U))||oh)(S.call(this,O,U))}return D.type=function(O){return arguments.length?(y=fa(O),D):y},D.size=function(O){return arguments.length?(S=fa(O),D):S},D};function Wp(){return 64}function yf(){return"circle"}function oh(y){var S=Math.sqrt(y/dt);return"M0,"+S+"A"+S+","+S+" 0 1,1 0,"+-S+"A"+S+","+S+" 0 1,1 0,"+S+"Z"}var sh=e.map({circle:oh,cross:function(y){var S=Math.sqrt(y/5)/2;return"M"+-3*S+","+-S+"H"+-S+"V"+-3*S+"H"+S+"V"+-S+"H"+3*S+"V"+S+"H"+S+"V"+3*S+"H"+-S+"V"+S+"H"+-3*S+"Z"},diamond:function(y){var S=Math.sqrt(y/(2*Qv)),D=S*Qv;return"M0,"+-S+"L"+D+",0 0,"+S+" "+-D+",0Z"},square:function(y){var S=Math.sqrt(y)/2;return"M"+-S+","+-S+"L"+S+","+-S+" "+S+","+S+" "+-S+","+S+"Z"},"triangle-down":function(y){var S=Math.sqrt(y/Lu),D=S*Lu/2;return"M0,"+D+"L"+S+","+-D+" "+-S+","+-D+"Z"},"triangle-up":function(y){var S=Math.sqrt(y/Lu),D=S*Lu/2;return"M0,"+-D+"L"+S+","+D+" "+-S+","+D+"Z"}});e.svg.symbolTypes=sh.keys();var Lu=Math.sqrt(3),Qv=Math.tan(30*Hr);mt.transition=function(y){for(var S=lo||++Ci,D=fi(y),O=[],U,Z,$=Is||{time:Date.now(),ease:Ml,delay:0,duration:250},X=-1,ae=this.length;++X<ae;){O.push(U=[]);for(var de=this[X],ge=-1,De=de.length;++ge<De;)(Z=de[ge])&&uh(Z,ge,D,S,$),U.push(Z)}return gf(O,D,S)},mt.interrupt=function(y){return this.each(y==null?lh:Xp(fi(y)))};var lh=Xp(fi());function Xp(y){return function(){var S,D,O;(S=this[y])&&(O=S[D=S.active])&&(O.timer.c=null,O.timer.t=NaN,--S.count?delete S[D]:delete this[y],S.active+=.5,O.event&&O.event.interrupt.call(this,this.__data__,O.index))}}function gf(y,S,D){return Ge(y,li),y.namespace=S,y.id=D,y}var li=[],Ci=0,lo,Is;li.call=mt.call,li.empty=mt.empty,li.node=mt.node,li.size=mt.size,e.transition=function(y,S){return y&&y.transition?lo?y.transition(S):y:e.selection().transition(y)},e.transition.prototype=li,li.select=function(y){var S=this.id,D=this.namespace,O=[],U,Z,$;y=ye(y);for(var X=-1,ae=this.length;++X<ae;){O.push(U=[]);for(var de=this[X],ge=-1,De=de.length;++ge<De;)($=de[ge])&&(Z=y.call($,$.__data__,ge,X))?("__data__"in $&&(Z.__data__=$.__data__),uh(Z,ge,D,S,$[D][S]),U.push(Z)):U.push(null)}return gf(O,D,S)},li.selectAll=function(y){var S=this.id,D=this.namespace,O=[],U,Z,$,X,ae;y=Re(y);for(var de=-1,ge=this.length;++de<ge;)for(var De=this[de],Pe=-1,Je=De.length;++Pe<Je;)if($=De[Pe]){ae=$[D][S],Z=y.call($,$.__data__,Pe,de),O.push(U=[]);for(var ot=-1,ze=Z.length;++ot<ze;)(X=Z[ot])&&uh(X,ot,D,S,ae),U.push(X)}return gf(O,D,S)},li.filter=function(y){var S=[],D,O,U;typeof y!="function"&&(y=Ne(y));for(var Z=0,$=this.length;Z<$;Z++){S.push(D=[]);for(var O=this[Z],X=0,ae=O.length;X<ae;X++)(U=O[X])&&y.call(U,U.__data__,X,Z)&&D.push(U)}return gf(S,this.namespace,this.id)},li.tween=function(y,S){var D=this.id,O=this.namespace;return arguments.length<2?this.node()[O][D].tween.get(y):pt(this,S==null?function(U){U[O][D].tween.remove(y)}:function(U){U[O][D].tween.set(y,S)})};function xo(y,S,D,O){var U=y.id,Z=y.namespace;return pt(y,typeof D=="function"?function($,X,ae){$[Z][U].tween.set(S,O(D.call($,$.__data__,X,ae)))}:(D=O(D),function($){$[Z][U].tween.set(S,D)}))}li.attr=function(y,S){if(arguments.length<2){for(S in y)this.attr(S,y[S]);return this}var D=y=="transform"?wp:on,O=e.ns.qualify(y);function U(){this.removeAttribute(O)}function Z(){this.removeAttributeNS(O.space,O.local)}function $(ae){return ae==null?U:(ae+="",function(){var de=this.getAttribute(O),ge;return de!==ae&&(ge=D(de,ae),function(De){this.setAttribute(O,ge(De))})})}function X(ae){return ae==null?Z:(ae+="",function(){var de=this.getAttributeNS(O.space,O.local),ge;return de!==ae&&(ge=D(de,ae),function(De){this.setAttributeNS(O.space,O.local,ge(De))})})}return xo(this,"attr."+y,S,O.local?X:$)},li.attrTween=function(y,S){var D=e.ns.qualify(y);function O(Z,$){var X=S.call(this,Z,$,this.getAttribute(D));return X&&function(ae){this.setAttribute(D,X(ae))}}function U(Z,$){var X=S.call(this,Z,$,this.getAttributeNS(D.space,D.local));return X&&function(ae){this.setAttributeNS(D.space,D.local,X(ae))}}return this.tween("attr."+y,D.local?U:O)},li.style=function(y,S,D){var O=arguments.length;if(O<3){if(typeof y!="string"){O<2&&(S="");for(D in y)this.style(D,y[D],S);return this}D=""}function U(){this.style.removeProperty(y)}function Z($){return $==null?U:($+="",function(){var X=s(this).getComputedStyle(this,null).getPropertyValue(y),ae;return X!==$&&(ae=on(X,$),function(de){this.style.setProperty(y,ae(de),D)})})}return xo(this,"style."+y,S,Z)},li.styleTween=function(y,S,D){arguments.length<3&&(D="");function O(U,Z){var $=S.call(this,U,Z,s(this).getComputedStyle(this,null).getPropertyValue(y));return $&&function(X){this.style.setProperty(y,$(X),D)}}return this.tween("style."+y,O)},li.text=function(y){return xo(this,"text",y,ti)};function ti(y){return y==null&&(y=""),function(){this.textContent=y}}li.remove=function(){var y=this.namespace;return this.each("end.transition",function(){var S;this[y].count<2&&(S=this.parentNode)&&S.removeChild(this)})},li.ease=function(y){var S=this.id,D=this.namespace;return arguments.length<1?this.node()[D][S].ease:(typeof y!="function"&&(y=e.ease.apply(e,arguments)),pt(this,function(O){O[D][S].ease=y}))},li.delay=function(y){var S=this.id,D=this.namespace;return arguments.length<1?this.node()[D][S].delay:pt(this,typeof y=="function"?function(O,U,Z){O[D][S].delay=+y.call(O,O.__data__,U,Z)}:(y=+y,function(O){O[D][S].delay=y}))},li.duration=function(y){var S=this.id,D=this.namespace;return arguments.length<1?this.node()[D][S].duration:pt(this,typeof y=="function"?function(O,U,Z){O[D][S].duration=Math.max(1,y.call(O,O.__data__,U,Z))}:(y=Math.max(1,y),function(O){O[D][S].duration=y}))},li.each=function(y,S){var D=this.id,O=this.namespace;if(arguments.length<2){var U=Is,Z=lo;try{lo=D,pt(this,function($,X,ae){Is=$[O][D],y.call($,$.__data__,X,ae)})}finally{Is=U,lo=Z}}else pt(this,function($){var X=$[O][D];(X.event||(X.event=e.dispatch("start","end","interrupt"))).on(y,S)});return this},li.transition=function(){for(var y=this.id,S=++Ci,D=this.namespace,O=[],U,Z,$,X,ae=0,de=this.length;ae<de;ae++){O.push(U=[]);for(var Z=this[ae],ge=0,De=Z.length;ge<De;ge++)($=Z[ge])&&(X=$[D][y],uh($,ge,D,S,{time:X.time,ease:X.ease,delay:X.delay+X.duration,duration:X.duration})),U.push($)}return gf(O,D,S)};function fi(y){return y==null?"__transition__":"__transition_"+y+"__"}function uh(y,S,D,O,U){var Z=y[D]||(y[D]={active:0,count:0}),$=Z[O],X,ae,de,ge,De;function Pe(ze){var Ue=$.delay;if(ae.t=Ue+X,Ue<=ze)return Je(ze-Ue);ae.c=Je}function Je(ze){var Ue=Z.active,je=Z[Ue];je&&(je.timer.c=null,je.timer.t=NaN,--Z.count,delete Z[Ue],je.event&&je.event.interrupt.call(y,y.__data__,je.index));for(var lt in Z)if(+lt<O){var nt=Z[lt];nt.timer.c=null,nt.timer.t=NaN,--Z.count,delete Z[lt]}ae.c=ot,Vc(function(){return ae.c&&ot(ze||1)&&(ae.c=null,ae.t=NaN),1},0,X),Z.active=O,$.event&&$.event.start.call(y,y.__data__,S),De=[],$.tween.forEach(function(We,Zt){(Zt=Zt.call(y,y.__data__,S))&&De.push(Zt)}),ge=$.ease,de=$.duration}function ot(ze){for(var Ue=ze/de,je=ge(Ue),lt=De.length;lt>0;)De[--lt].call(y,je);if(Ue>=1)return $.event&&$.event.end.call(y,y.__data__,S),--Z.count?delete Z[O]:delete y[D],1}$||(X=U.time,ae=Vc(Pe,0,X),$=Z[O]={tween:new z,time:X,timer:ae,delay:U.delay,duration:U.duration,ease:U.ease,index:S},U=null,++Z.count)}e.svg.axis=function(){var y=e.scale.linear(),S=Bl,D=6,O=6,U=3,Z=[10],$=null,X;function ae(de){de.each(function(){var ge=e.select(this),De=this.__chart__||y,Pe=this.__chart__=y.copy(),Je=$==null?Pe.ticks?Pe.ticks.apply(Pe,Z):Pe.domain():$,ot=X==null?Pe.tickFormat?Pe.tickFormat.apply(Pe,Z):Se:X,ze=ge.selectAll(".tick").data(Je,Pe),Ue=ze.enter().insert("g",".domain").attr("class","tick").style("opacity",He),je=e.transition(ze.exit()).style("opacity",He).remove(),lt=e.transition(ze.order()).style("opacity",1),nt=Math.max(D,0)+U,We,Zt=Kc(Pe),or=ge.selectAll(".domain").data([0]),fr=(or.enter().append("path").attr("class","domain"),e.transition(or));Ue.append("line"),Ue.append("text");var lr=Ue.select("line"),Dr=lt.select("line"),Ir=ze.select("text").text(ot),ta=Ue.select("text"),Ur=lt.select("text"),Kr=S==="top"||S==="left"?-1:1,Ba,ri,$a,jt;if(S==="bottom"||S==="top"?(We=_f,Ba="x",$a="y",ri="x2",jt="y2",Ir.attr("dy",Kr<0?"0em":".71em").style("text-anchor","middle"),fr.attr("d","M"+Zt[0]+","+Kr*O+"V0H"+Zt[1]+"V"+Kr*O)):(We=Ol,Ba="y",$a="x",ri="y2",jt="x2",Ir.attr("dy",".32em").style("text-anchor",Kr<0?"end":"start"),fr.attr("d","M"+Kr*O+","+Zt[0]+"H0V"+Zt[1]+"H"+Kr*O)),lr.attr(jt,Kr*D),ta.attr($a,Kr*nt),Dr.attr(ri,0).attr(jt,Kr*D),Ur.attr(Ba,0).attr($a,Kr*nt),Pe.rangeBand){var Jr=Pe,oa=Jr.rangeBand()/2;De=Pe=function(la){return Jr(la)+oa}}else De.rangeBand?De=Pe:je.call(We,Pe,De);Ue.call(We,De,Pe),lt.call(We,Pe,Pe)})}return ae.scale=function(de){return arguments.length?(y=de,ae):y},ae.orient=function(de){return arguments.length?(S=de in nc?de+"":Bl,ae):S},ae.ticks=function(){return arguments.length?(Z=r(arguments),ae):Z},ae.tickValues=function(de){return arguments.length?($=de,ae):$},ae.tickFormat=function(de){return arguments.length?(X=de,ae):X},ae.tickSize=function(de){var ge=arguments.length;return ge?(D=+de,O=+arguments[ge-1],ae):D},ae.innerTickSize=function(de){return arguments.length?(D=+de,ae):D},ae.outerTickSize=function(de){return arguments.length?(O=+de,ae):O},ae.tickPadding=function(de){return arguments.length?(U=+de,ae):U},ae.tickSubdivide=function(){return arguments.length&&ae},ae};var Bl="bottom",nc={top:1,right:1,bottom:1,left:1};function _f(y,S,D){y.attr("transform",function(O){var U=S(O);return"translate("+(isFinite(U)?U:D(O))+",0)"})}function Ol(y,S,D){y.attr("transform",function(O){var U=S(O);return"translate(0,"+(isFinite(U)?U:D(O))+")"})}e.svg.brush=function(){var y=it(ge,"brushstart","brush","brushend"),S=null,D=null,O=[0,0],U=[0,0],Z,$,X=!0,ae=!0,de=fh[0];function ge(ze){ze.each(function(){var Ue=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",ot).on("touchstart.brush",ot),je=Ue.selectAll(".background").data([0]);je.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ue.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var lt=Ue.selectAll(".resize").data(de,Se);lt.exit().remove(),lt.enter().append("g").attr("class",function(or){return"resize "+or}).style("cursor",function(or){return Rs[or]}).append("rect").attr("x",function(or){return/[ew]$/.test(or)?-3:null}).attr("y",function(or){return/^[ns]/.test(or)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),lt.style("display",ge.empty()?"none":null);var nt=e.transition(Ue),We=e.transition(je),Zt;S&&(Zt=Kc(S),We.attr("x",Zt[0]).attr("width",Zt[1]-Zt[0]),Pe(nt)),D&&(Zt=Kc(D),We.attr("y",Zt[0]).attr("height",Zt[1]-Zt[0]),Je(nt)),De(nt)})}ge.event=function(ze){ze.each(function(){var Ue=y.of(this,arguments),je={x:O,y:U,i:Z,j:$},lt=this.__chart__||je;this.__chart__=je,lo?e.select(this).transition().each("start.brush",function(){Z=lt.i,$=lt.j,O=lt.x,U=lt.y,Ue({type:"brushstart"})}).tween("brush:brush",function(){var nt=Xo(O,je.x),We=Xo(U,je.y);return Z=$=null,function(Zt){O=je.x=nt(Zt),U=je.y=We(Zt),Ue({type:"brush",mode:"resize"})}}).each("end.brush",function(){Z=je.i,$=je.j,Ue({type:"brush",mode:"resize"}),Ue({type:"brushend"})}):(Ue({type:"brushstart"}),Ue({type:"brush",mode:"resize"}),Ue({type:"brushend"}))})};function De(ze){ze.selectAll(".resize").attr("transform",function(Ue){return"translate("+O[+/e$/.test(Ue)]+","+U[+/^s/.test(Ue)]+")"})}function Pe(ze){ze.select(".extent").attr("x",O[0]),ze.selectAll(".extent,.n>rect,.s>rect").attr("width",O[1]-O[0])}function Je(ze){ze.select(".extent").attr("y",U[0]),ze.selectAll(".extent,.e>rect,.w>rect").attr("height",U[1]-U[0])}function ot(){var ze=this,Ue=e.select(e.event.target),je=y.of(ze,arguments),lt=e.select(ze),nt=Ue.datum(),We=!/^(n|s)$/.test(nt)&&S,Zt=!/^(e|w)$/.test(nt)&&D,or=Ue.classed("extent"),fr=Mr(ze),lr,Dr=e.mouse(ze),Ir,ta=e.select(s(ze)).on("keydown.brush",Ba).on("keyup.brush",ri);if(e.event.changedTouches?ta.on("touchmove.brush",$a).on("touchend.brush",Jr):ta.on("mousemove.brush",$a).on("mouseup.brush",Jr),lt.interrupt().selectAll("*").interrupt(),or)Dr[0]=O[0]-Dr[0],Dr[1]=U[0]-Dr[1];else if(nt){var Ur=+/w$/.test(nt),Kr=+/^n/.test(nt);Ir=[O[1-Ur]-Dr[0],U[1-Kr]-Dr[1]],Dr[0]=O[Ur],Dr[1]=U[Kr]}else e.event.altKey&&(lr=Dr.slice());lt.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",Ue.style("cursor")),je({type:"brushstart"}),$a();function Ba(){e.event.keyCode==32&&(or||(lr=null,Dr[0]-=O[1],Dr[1]-=U[1],or=2),Ke())}function ri(){e.event.keyCode==32&&or==2&&(Dr[0]+=O[1],Dr[1]+=U[1],or=0,Ke())}function $a(){var oa=e.mouse(ze),la=!1;Ir&&(oa[0]+=Ir[0],oa[1]+=Ir[1]),or||(e.event.altKey?(lr||(lr=[(O[0]+O[1])/2,(U[0]+U[1])/2]),Dr[0]=O[+(oa[0]<lr[0])],Dr[1]=U[+(oa[1]<lr[1])]):lr=null),We&&jt(oa,S,0)&&(Pe(lt),la=!0),Zt&&jt(oa,D,1)&&(Je(lt),la=!0),la&&(De(lt),je({type:"brush",mode:or?"move":"resize"}))}function jt(oa,la,Ei){var Vi=Kc(la),$i=Vi[0],xi=Vi[1],bn=Dr[Ei],wr=Ei?U:O,Vr=wr[1]-wr[0],Ni,Ti;if(or&&($i-=bn,xi-=Vr+bn),Ni=(Ei?ae:X)?Math.max($i,Math.min(xi,oa[Ei])):oa[Ei],or?Ti=(Ni+=bn)+Vr:(lr&&(bn=Math.max($i,Math.min(xi,2*lr[Ei]-Ni))),bn<Ni?(Ti=Ni,Ni=bn):Ti=bn),wr[0]!=Ni||wr[1]!=Ti)return Ei?$=null:Z=null,wr[0]=Ni,wr[1]=Ti,!0}function Jr(){$a(),lt.style("pointer-events","all").selectAll(".resize").style("display",ge.empty()?"none":null),e.select("body").style("cursor",null),ta.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),fr(),je({type:"brushend"})}}return ge.x=function(ze){return arguments.length?(S=ze,de=fh[!S<<1|!D],ge):S},ge.y=function(ze){return arguments.length?(D=ze,de=fh[!S<<1|!D],ge):D},ge.clamp=function(ze){return arguments.length?(S&&D?(X=!!ze[0],ae=!!ze[1]):S?X=!!ze:D&&(ae=!!ze),ge):S&&D?[X,ae]:S?X:D?ae:null},ge.extent=function(ze){var Ue,je,lt,nt,We;return arguments.length?(S&&(Ue=ze[0],je=ze[1],D&&(Ue=Ue[0],je=je[0]),Z=[Ue,je],S.invert&&(Ue=S(Ue),je=S(je)),je<Ue&&(We=Ue,Ue=je,je=We),(Ue!=O[0]||je!=O[1])&&(O=[Ue,je])),D&&(lt=ze[0],nt=ze[1],S&&(lt=lt[1],nt=nt[1]),$=[lt,nt],D.invert&&(lt=D(lt),nt=D(nt)),nt<lt&&(We=lt,lt=nt,nt=We),(lt!=U[0]||nt!=U[1])&&(U=[lt,nt])),ge):(S&&(Z?(Ue=Z[0],je=Z[1]):(Ue=O[0],je=O[1],S.invert&&(Ue=S.invert(Ue),je=S.invert(je)),je<Ue&&(We=Ue,Ue=je,je=We))),D&&($?(lt=$[0],nt=$[1]):(lt=U[0],nt=U[1],D.invert&&(lt=D.invert(lt),nt=D.invert(nt)),nt<lt&&(We=lt,lt=nt,nt=We))),S&&D?[[Ue,lt],[je,nt]]:S?[Ue,je]:D&&[lt,nt])},ge.clear=function(){return ge.empty()||(O=[0,0],U=[0,0],Z=$=null),ge},ge.empty=function(){return!!S&&O[0]==O[1]||!!D&&U[0]==U[1]},e.rebind(ge,y,"on")};var Rs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fh=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];e.text=Dn(function(y){return y.responseText}),e.json=function(y,S){return Eo(y,"application/json",xf,S)};function xf(y){return JSON.parse(y.responseText)}e.html=function(y,S){return Eo(y,"text/html",Ul,S)};function Ul(y){var S=i.createRange();return S.selectNode(i.body),S.createContextualFragment(y.responseText)}e.xml=Dn(function(y){return y.responseXML}),typeof define=="function"&&define.amd?define(e):typeof u_=="object"&&u_.exports?u_.exports=e:this.d3=e}).apply(self)});var ew=he((f_,O7)=>{(function(e,t){typeof f_=="object"&&typeof O7!="undefined"?t(f_):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(f_,function(e){"use strict";var t=new Date,r=new Date;function i(Ne,ft,pt,xr){function pr(Tt){return Ne(Tt=arguments.length===0?new Date:new Date(+Tt)),Tt}return pr.floor=function(Tt){return Ne(Tt=new Date(+Tt)),Tt},pr.ceil=function(Tt){return Ne(Tt=new Date(Tt-1)),ft(Tt,1),Ne(Tt),Tt},pr.round=function(Tt){var wt=pr(Tt),Vt=pr.ceil(Tt);return Tt-wt<Vt-Tt?wt:Vt},pr.offset=function(Tt,wt){return ft(Tt=new Date(+Tt),wt==null?1:Math.floor(wt)),Tt},pr.range=function(Tt,wt,Vt){var Kt=[],Ht;if(Tt=pr.ceil(Tt),Vt=Vt==null?1:Math.floor(Vt),!(Tt<wt)||!(Vt>0))return Kt;do Kt.push(Ht=new Date(+Tt)),ft(Tt,Vt),Ne(Tt);while(Ht<Tt&&Tt<wt);return Kt},pr.filter=function(Tt){return i(function(wt){if(wt>=wt)for(;Ne(wt),!Tt(wt);)wt.setTime(wt-1)},function(wt,Vt){if(wt>=wt)if(Vt<0)for(;++Vt<=0;)for(;ft(wt,-1),!Tt(wt););else for(;--Vt>=0;)for(;ft(wt,1),!Tt(wt););})},pt&&(pr.count=function(Tt,wt){return t.setTime(+Tt),r.setTime(+wt),Ne(t),Ne(r),Math.floor(pt(t,r))},pr.every=function(Tt){return Tt=Math.floor(Tt),!isFinite(Tt)||!(Tt>0)?null:Tt>1?pr.filter(xr?function(wt){return xr(wt)%Tt===0}:function(wt){return pr.count(0,wt)%Tt===0}):pr}),pr}var a=i(function(){},function(Ne,ft){Ne.setTime(+Ne+ft)},function(Ne,ft){return ft-Ne});a.every=function(Ne){return Ne=Math.floor(Ne),!isFinite(Ne)||!(Ne>0)?null:Ne>1?i(function(ft){ft.setTime(Math.floor(ft/Ne)*Ne)},function(ft,pt){ft.setTime(+ft+pt*Ne)},function(ft,pt){return(pt-ft)/Ne}):a};var s=a.range,l=1e3,u=6e4,c=36e5,v=864e5,m=6048e5,_=i(function(Ne){Ne.setTime(Ne-Ne.getMilliseconds())},function(Ne,ft){Ne.setTime(+Ne+ft*l)},function(Ne,ft){return(ft-Ne)/l},function(Ne){return Ne.getUTCSeconds()}),T=_.range,M=i(function(Ne){Ne.setTime(Ne-Ne.getMilliseconds()-Ne.getSeconds()*l)},function(Ne,ft){Ne.setTime(+Ne+ft*u)},function(Ne,ft){return(ft-Ne)/u},function(Ne){return Ne.getMinutes()}),k=M.range,L=i(function(Ne){Ne.setTime(Ne-Ne.getMilliseconds()-Ne.getSeconds()*l-Ne.getMinutes()*u)},function(Ne,ft){Ne.setTime(+Ne+ft*c)},function(Ne,ft){return(ft-Ne)/c},function(Ne){return Ne.getHours()}),E=L.range,I=i(function(Ne){Ne.setHours(0,0,0,0)},function(Ne,ft){Ne.setDate(Ne.getDate()+ft)},function(Ne,ft){return(ft-Ne-(ft.getTimezoneOffset()-Ne.getTimezoneOffset())*u)/v},function(Ne){return Ne.getDate()-1}),R=I.range;function N(Ne){return i(function(ft){ft.setDate(ft.getDate()-(ft.getDay()+7-Ne)%7),ft.setHours(0,0,0,0)},function(ft,pt){ft.setDate(ft.getDate()+pt*7)},function(ft,pt){return(pt-ft-(pt.getTimezoneOffset()-ft.getTimezoneOffset())*u)/m})}var z=N(0),B=N(1),H=N(2),V=N(3),Y=N(4),J=N(5),re=N(6),ne=z.range,oe=B.range,ue=H.range,me=V.range,Se=Y.range,Ce=J.range,Me=re.range,_e=i(function(Ne){Ne.setDate(1),Ne.setHours(0,0,0,0)},function(Ne,ft){Ne.setMonth(Ne.getMonth()+ft)},function(Ne,ft){return ft.getMonth()-Ne.getMonth()+(ft.getFullYear()-Ne.getFullYear())*12},function(Ne){return Ne.getMonth()}),Te=_e.range,Ae=i(function(Ne){Ne.setMonth(0,1),Ne.setHours(0,0,0,0)},function(Ne,ft){Ne.setFullYear(Ne.getFullYear()+ft)},function(Ne,ft){return ft.getFullYear()-Ne.getFullYear()},function(Ne){return Ne.getFullYear()});Ae.every=function(Ne){return!isFinite(Ne=Math.floor(Ne))||!(Ne>0)?null:i(function(ft){ft.setFullYear(Math.floor(ft.getFullYear()/Ne)*Ne),ft.setMonth(0,1),ft.setHours(0,0,0,0)},function(ft,pt){ft.setFullYear(ft.getFullYear()+pt*Ne)})};var Le=Ae.range,Ke=i(function(Ne){Ne.setUTCSeconds(0,0)},function(Ne,ft){Ne.setTime(+Ne+ft*u)},function(Ne,ft){return(ft-Ne)/u},function(Ne){return Ne.getUTCMinutes()}),ct=Ke.range,it=i(function(Ne){Ne.setUTCMinutes(0,0,0)},function(Ne,ft){Ne.setTime(+Ne+ft*c)},function(Ne,ft){return(ft-Ne)/c},function(Ne){return Ne.getUTCHours()}),ut=it.range,Ge=i(function(Ne){Ne.setUTCHours(0,0,0,0)},function(Ne,ft){Ne.setUTCDate(Ne.getUTCDate()+ft)},function(Ne,ft){return(ft-Ne)/v},function(Ne){return Ne.getUTCDate()-1}),xt=Ge.range;function at(Ne){return i(function(ft){ft.setUTCDate(ft.getUTCDate()-(ft.getUTCDay()+7-Ne)%7),ft.setUTCHours(0,0,0,0)},function(ft,pt){ft.setUTCDate(ft.getUTCDate()+pt*7)},function(ft,pt){return(pt-ft)/m})}var At=at(0),kt=at(1),mt=at(2),ye=at(3),Re=at(4),xe=at(5),et=at(6),vt=At.range,tt=kt.range,Bt=mt.range,Mt=ye.range,Ct=Re.range,Rt=xe.range,Ot=et.range,gt=i(function(Ne){Ne.setUTCDate(1),Ne.setUTCHours(0,0,0,0)},function(Ne,ft){Ne.setUTCMonth(Ne.getUTCMonth()+ft)},function(Ne,ft){return ft.getUTCMonth()-Ne.getUTCMonth()+(ft.getUTCFullYear()-Ne.getUTCFullYear())*12},function(Ne){return Ne.getUTCMonth()}),Et=gt.range,ir=i(function(Ne){Ne.setUTCMonth(0,1),Ne.setUTCHours(0,0,0,0)},function(Ne,ft){Ne.setUTCFullYear(Ne.getUTCFullYear()+ft)},function(Ne,ft){return ft.getUTCFullYear()-Ne.getUTCFullYear()},function(Ne){return Ne.getUTCFullYear()});ir.every=function(Ne){return!isFinite(Ne=Math.floor(Ne))||!(Ne>0)?null:i(function(ft){ft.setUTCFullYear(Math.floor(ft.getUTCFullYear()/Ne)*Ne),ft.setUTCMonth(0,1),ft.setUTCHours(0,0,0,0)},function(ft,pt){ft.setUTCFullYear(ft.getUTCFullYear()+pt*Ne)})};var Gt=ir.range;e.timeDay=I,e.timeDays=R,e.timeFriday=J,e.timeFridays=Ce,e.timeHour=L,e.timeHours=E,e.timeInterval=i,e.timeMillisecond=a,e.timeMilliseconds=s,e.timeMinute=M,e.timeMinutes=k,e.timeMonday=B,e.timeMondays=oe,e.timeMonth=_e,e.timeMonths=Te,e.timeSaturday=re,e.timeSaturdays=Me,e.timeSecond=_,e.timeSeconds=T,e.timeSunday=z,e.timeSundays=ne,e.timeThursday=Y,e.timeThursdays=Se,e.timeTuesday=H,e.timeTuesdays=ue,e.timeWednesday=V,e.timeWednesdays=me,e.timeWeek=z,e.timeWeeks=ne,e.timeYear=Ae,e.timeYears=Le,e.utcDay=Ge,e.utcDays=xt,e.utcFriday=xe,e.utcFridays=Rt,e.utcHour=it,e.utcHours=ut,e.utcMillisecond=a,e.utcMilliseconds=s,e.utcMinute=Ke,e.utcMinutes=ct,e.utcMonday=kt,e.utcMondays=tt,e.utcMonth=gt,e.utcMonths=Et,e.utcSaturday=et,e.utcSaturdays=Ot,e.utcSecond=_,e.utcSeconds=T,e.utcSunday=At,e.utcSundays=vt,e.utcThursday=Re,e.utcThursdays=Ct,e.utcTuesday=mt,e.utcTuesdays=Bt,e.utcWednesday=ye,e.utcWednesdays=Mt,e.utcWeek=At,e.utcWeeks=vt,e.utcYear=ir,e.utcYears=Gt,Object.defineProperty(e,"__esModule",{value:!0})})});var b0=he((c_,U7)=>{(function(e,t){typeof c_=="object"&&typeof U7!="undefined"?t(c_,ew()):typeof define=="function"&&define.amd?define(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(c_,function(e,t){"use strict";function r(Fe){if(0<=Fe.y&&Fe.y<100){var He=new Date(-1,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L);return He.setFullYear(Fe.y),He}return new Date(Fe.y,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L)}function i(Fe){if(0<=Fe.y&&Fe.y<100){var He=new Date(Date.UTC(-1,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L));return He.setUTCFullYear(Fe.y),He}return new Date(Date.UTC(Fe.y,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L))}function a(Fe,He,bt){return{y:Fe,m:He,d:bt,H:0,M:0,S:0,L:0}}function s(Fe){var He=Fe.dateTime,bt=Fe.date,dt=Fe.time,gr=Fe.periods,Lr=Fe.days,Ar=Fe.shortDays,Hr=Fe.months,xa=Fe.shortMonths,Ca=T(gr),Pa=M(gr),Fi=T(Lr),Ki=M(Lr),gn=T(Ar),Xi=M(Ar),Qn=T(Hr),Pn=M(Hr),Gi=T(xa),pa=M(xa),Gr={a:Dt,A:Ft,b:tr,B:Wt,c:null,d:_e,e:_e,f:ct,H:Te,I:Ae,j:Le,L:Ke,m:it,M:ut,p:Tr,q:Yr,Q:wt,s:Vt,S:Ge,u:xt,U:at,V:At,w:kt,W:mt,x:null,X:null,y:ye,Y:Re,Z:xe,"%":Tt},Qa={a:Br,A:ca,b:ua,B:Na,c:null,d:et,e:et,f:Ct,H:vt,I:tt,j:Bt,L:Mt,m:Rt,M:Ot,p:ii,q:Wr,Q:wt,s:Vt,S:gt,u:Et,U:ir,V:Gt,w:Ne,W:ft,x:null,X:null,y:pt,Y:xr,Z:pr,"%":Tt},Zr={a:se,A:ce,b:Ee,B:Be,c:rt,d:Y,e:Y,f:me,H:re,I:re,j:J,L:ue,m:V,M:ne,p:ee,q:H,Q:Ce,s:Me,S:oe,u:L,U:E,V:I,w:k,W:R,x:Ve,X:yt,y:z,Y:N,Z:B,"%":Se};Gr.x=vi(bt,Gr),Gr.X=vi(dt,Gr),Gr.c=vi(He,Gr),Qa.x=vi(bt,Qa),Qa.X=vi(dt,Qa),Qa.c=vi(He,Qa);function vi(yr,ea){return function(_a){var nr=[],wi=-1,Da=0,si=yr.length,fa,Dn,Eo;for(_a instanceof Date||(_a=new Date(+_a));++wi<si;)yr.charCodeAt(wi)===37&&(nr.push(yr.slice(Da,wi)),(Dn=l[fa=yr.charAt(++wi)])!=null?fa=yr.charAt(++wi):Dn=fa==="e"?" ":"0",(Eo=ea[fa])&&(fa=Eo(_a,Dn)),nr.push(fa),Da=wi+1);return nr.push(yr.slice(Da,wi)),nr.join("")}}function ga(yr,ea){return function(_a){var nr=a(1900,void 0,1),wi=le(nr,yr,_a+="",0),Da,si;if(wi!=_a.length)return null;if("Q"in nr)return new Date(nr.Q);if("s"in nr)return new Date(nr.s*1e3+("L"in nr?nr.L:0));if(ea&&!("Z"in nr)&&(nr.Z=0),"p"in nr&&(nr.H=nr.H%12+nr.p*12),nr.m===void 0&&(nr.m="q"in nr?nr.q:0),"V"in nr){if(nr.V<1||nr.V>53)return null;"w"in nr||(nr.w=1),"Z"in nr?(Da=i(a(nr.y,0,1)),si=Da.getUTCDay(),Da=si>4||si===0?t.utcMonday.ceil(Da):t.utcMonday(Da),Da=t.utcDay.offset(Da,(nr.V-1)*7),nr.y=Da.getUTCFullYear(),nr.m=Da.getUTCMonth(),nr.d=Da.getUTCDate()+(nr.w+6)%7):(Da=r(a(nr.y,0,1)),si=Da.getDay(),Da=si>4||si===0?t.timeMonday.ceil(Da):t.timeMonday(Da),Da=t.timeDay.offset(Da,(nr.V-1)*7),nr.y=Da.getFullYear(),nr.m=Da.getMonth(),nr.d=Da.getDate()+(nr.w+6)%7)}else("W"in nr||"U"in nr)&&("w"in nr||(nr.w="u"in nr?nr.u%7:"W"in nr?1:0),si="Z"in nr?i(a(nr.y,0,1)).getUTCDay():r(a(nr.y,0,1)).getDay(),nr.m=0,nr.d="W"in nr?(nr.w+6)%7+nr.W*7-(si+5)%7:nr.w+nr.U*7-(si+6)%7);return"Z"in nr?(nr.H+=nr.Z/100|0,nr.M+=nr.Z%100,i(nr)):r(nr)}}function le(yr,ea,_a,nr){for(var wi=0,Da=ea.length,si=_a.length,fa,Dn;wi<Da;){if(nr>=si)return-1;if(fa=ea.charCodeAt(wi++),fa===37){if(fa=ea.charAt(wi++),Dn=Zr[fa in l?ea.charAt(wi++):fa],!Dn||(nr=Dn(yr,_a,nr))<0)return-1}else if(fa!=_a.charCodeAt(nr++))return-1}return nr}function ee(yr,ea,_a){var nr=Ca.exec(ea.slice(_a));return nr?(yr.p=Pa[nr[0].toLowerCase()],_a+nr[0].length):-1}function se(yr,ea,_a){var nr=gn.exec(ea.slice(_a));return nr?(yr.w=Xi[nr[0].toLowerCase()],_a+nr[0].length):-1}function ce(yr,ea,_a){var nr=Fi.exec(ea.slice(_a));return nr?(yr.w=Ki[nr[0].toLowerCase()],_a+nr[0].length):-1}function Ee(yr,ea,_a){var nr=Gi.exec(ea.slice(_a));return nr?(yr.m=pa[nr[0].toLowerCase()],_a+nr[0].length):-1}function Be(yr,ea,_a){var nr=Qn.exec(ea.slice(_a));return nr?(yr.m=Pn[nr[0].toLowerCase()],_a+nr[0].length):-1}function rt(yr,ea,_a){return le(yr,He,ea,_a)}function Ve(yr,ea,_a){return le(yr,bt,ea,_a)}function yt(yr,ea,_a){return le(yr,dt,ea,_a)}function Dt(yr){return Ar[yr.getDay()]}function Ft(yr){return Lr[yr.getDay()]}function tr(yr){return xa[yr.getMonth()]}function Wt(yr){return Hr[yr.getMonth()]}function Tr(yr){return gr[+(yr.getHours()>=12)]}function Yr(yr){return 1+~~(yr.getMonth()/3)}function Br(yr){return Ar[yr.getUTCDay()]}function ca(yr){return Lr[yr.getUTCDay()]}function ua(yr){return xa[yr.getUTCMonth()]}function Na(yr){return Hr[yr.getUTCMonth()]}function ii(yr){return gr[+(yr.getUTCHours()>=12)]}function Wr(yr){return 1+~~(yr.getUTCMonth()/3)}return{format:function(yr){var ea=vi(yr+="",Gr);return ea.toString=function(){return yr},ea},parse:function(yr){var ea=ga(yr+="",!1);return ea.toString=function(){return yr},ea},utcFormat:function(yr){var ea=vi(yr+="",Qa);return ea.toString=function(){return yr},ea},utcParse:function(yr){var ea=ga(yr+="",!0);return ea.toString=function(){return yr},ea}}}var l={"-":"",_:" ",0:"0"},u=/^\s*\d+/,c=/^%/,v=/[\\^$*+?|[\]().{}]/g;function m(Fe,He,bt){var dt=Fe<0?"-":"",gr=(dt?-Fe:Fe)+"",Lr=gr.length;return dt+(Lr<bt?new Array(bt-Lr+1).join(He)+gr:gr)}function _(Fe){return Fe.replace(v,"\\$&")}function T(Fe){return new RegExp("^(?:"+Fe.map(_).join("|")+")","i")}function M(Fe){for(var He={},bt=-1,dt=Fe.length;++bt<dt;)He[Fe[bt].toLowerCase()]=bt;return He}function k(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+1));return dt?(Fe.w=+dt[0],bt+dt[0].length):-1}function L(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+1));return dt?(Fe.u=+dt[0],bt+dt[0].length):-1}function E(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.U=+dt[0],bt+dt[0].length):-1}function I(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.V=+dt[0],bt+dt[0].length):-1}function R(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.W=+dt[0],bt+dt[0].length):-1}function N(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+4));return dt?(Fe.y=+dt[0],bt+dt[0].length):-1}function z(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.y=+dt[0]+(+dt[0]>68?1900:2e3),bt+dt[0].length):-1}function B(Fe,He,bt){var dt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(He.slice(bt,bt+6));return dt?(Fe.Z=dt[1]?0:-(dt[2]+(dt[3]||"00")),bt+dt[0].length):-1}function H(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+1));return dt?(Fe.q=dt[0]*3-3,bt+dt[0].length):-1}function V(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.m=dt[0]-1,bt+dt[0].length):-1}function Y(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.d=+dt[0],bt+dt[0].length):-1}function J(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+3));return dt?(Fe.m=0,Fe.d=+dt[0],bt+dt[0].length):-1}function re(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.H=+dt[0],bt+dt[0].length):-1}function ne(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.M=+dt[0],bt+dt[0].length):-1}function oe(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+2));return dt?(Fe.S=+dt[0],bt+dt[0].length):-1}function ue(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+3));return dt?(Fe.L=+dt[0],bt+dt[0].length):-1}function me(Fe,He,bt){var dt=u.exec(He.slice(bt,bt+6));return dt?(Fe.L=Math.floor(dt[0]/1e3),bt+dt[0].length):-1}function Se(Fe,He,bt){var dt=c.exec(He.slice(bt,bt+1));return dt?bt+dt[0].length:-1}function Ce(Fe,He,bt){var dt=u.exec(He.slice(bt));return dt?(Fe.Q=+dt[0],bt+dt[0].length):-1}function Me(Fe,He,bt){var dt=u.exec(He.slice(bt));return dt?(Fe.s=+dt[0],bt+dt[0].length):-1}function _e(Fe,He){return m(Fe.getDate(),He,2)}function Te(Fe,He){return m(Fe.getHours(),He,2)}function Ae(Fe,He){return m(Fe.getHours()%12||12,He,2)}function Le(Fe,He){return m(1+t.timeDay.count(t.timeYear(Fe),Fe),He,3)}function Ke(Fe,He){return m(Fe.getMilliseconds(),He,3)}function ct(Fe,He){return Ke(Fe,He)+"000"}function it(Fe,He){return m(Fe.getMonth()+1,He,2)}function ut(Fe,He){return m(Fe.getMinutes(),He,2)}function Ge(Fe,He){return m(Fe.getSeconds(),He,2)}function xt(Fe){var He=Fe.getDay();return He===0?7:He}function at(Fe,He){return m(t.timeSunday.count(t.timeYear(Fe)-1,Fe),He,2)}function At(Fe,He){var bt=Fe.getDay();return Fe=bt>=4||bt===0?t.timeThursday(Fe):t.timeThursday.ceil(Fe),m(t.timeThursday.count(t.timeYear(Fe),Fe)+(t.timeYear(Fe).getDay()===4),He,2)}function kt(Fe){return Fe.getDay()}function mt(Fe,He){return m(t.timeMonday.count(t.timeYear(Fe)-1,Fe),He,2)}function ye(Fe,He){return m(Fe.getFullYear()%100,He,2)}function Re(Fe,He){return m(Fe.getFullYear()%1e4,He,4)}function xe(Fe){var He=Fe.getTimezoneOffset();return(He>0?"-":(He*=-1,"+"))+m(He/60|0,"0",2)+m(He%60,"0",2)}function et(Fe,He){return m(Fe.getUTCDate(),He,2)}function vt(Fe,He){return m(Fe.getUTCHours(),He,2)}function tt(Fe,He){return m(Fe.getUTCHours()%12||12,He,2)}function Bt(Fe,He){return m(1+t.utcDay.count(t.utcYear(Fe),Fe),He,3)}function Mt(Fe,He){return m(Fe.getUTCMilliseconds(),He,3)}function Ct(Fe,He){return Mt(Fe,He)+"000"}function Rt(Fe,He){return m(Fe.getUTCMonth()+1,He,2)}function Ot(Fe,He){return m(Fe.getUTCMinutes(),He,2)}function gt(Fe,He){return m(Fe.getUTCSeconds(),He,2)}function Et(Fe){var He=Fe.getUTCDay();return He===0?7:He}function ir(Fe,He){return m(t.utcSunday.count(t.utcYear(Fe)-1,Fe),He,2)}function Gt(Fe,He){var bt=Fe.getUTCDay();return Fe=bt>=4||bt===0?t.utcThursday(Fe):t.utcThursday.ceil(Fe),m(t.utcThursday.count(t.utcYear(Fe),Fe)+(t.utcYear(Fe).getUTCDay()===4),He,2)}function Ne(Fe){return Fe.getUTCDay()}function ft(Fe,He){return m(t.utcMonday.count(t.utcYear(Fe)-1,Fe),He,2)}function pt(Fe,He){return m(Fe.getUTCFullYear()%100,He,2)}function xr(Fe,He){return m(Fe.getUTCFullYear()%1e4,He,4)}function pr(){return"+0000"}function Tt(){return"%"}function wt(Fe){return+Fe}function Vt(Fe){return Math.floor(+Fe/1e3)}var Kt;Ht({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ht(Fe){return Kt=s(Fe),e.timeFormat=Kt.format,e.timeParse=Kt.parse,e.utcFormat=Kt.utcFormat,e.utcParse=Kt.utcParse,Kt}var Ut="%Y-%m-%dT%H:%M:%S.%LZ";function er(Fe){return Fe.toISOString()}var Mr=Date.prototype.toISOString?er:e.utcFormat(Ut);function br(Fe){var He=new Date(Fe);return isNaN(He)?null:He}var Pt=+new Date("2000-01-01T00:00:00.000Z")?br:e.utcParse(Ut);e.isoFormat=Mr,e.isoParse=Pt,e.timeFormatDefaultLocale=Ht,e.timeFormatLocale=s,Object.defineProperty(e,"__esModule",{value:!0})})});var tw=he((h_,V7)=>{(function(e,t){typeof h_=="object"&&typeof V7!="undefined"?t(h_):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.d3=e.d3||{}))})(h_,function(e){"use strict";function t(V){return Math.abs(V=Math.round(V))>=1e21?V.toLocaleString("en").replace(/,/g,""):V.toString(10)}function r(V,Y){if((J=(V=Y?V.toExponential(Y-1):V.toExponential()).indexOf("e"))<0)return null;var J,re=V.slice(0,J);return[re.length>1?re[0]+re.slice(2):re,+V.slice(J+1)]}function i(V){return V=r(Math.abs(V)),V?V[1]:NaN}function a(V,Y){return function(J,re){for(var ne=J.length,oe=[],ue=0,me=V[0],Se=0;ne>0&&me>0&&(Se+me+1>re&&(me=Math.max(1,re-Se)),oe.push(J.substring(ne-=me,ne+me)),!((Se+=me+1)>re));)me=V[ue=(ue+1)%V.length];return oe.reverse().join(Y)}}function s(V){return function(Y){return Y.replace(/[0-9]/g,function(J){return V[+J]})}}var l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(V){if(!(Y=l.exec(V)))throw new Error("invalid format: "+V);var Y;return new c({fill:Y[1],align:Y[2],sign:Y[3],symbol:Y[4],zero:Y[5],width:Y[6],comma:Y[7],precision:Y[8]&&Y[8].slice(1),trim:Y[9],type:Y[10]})}u.prototype=c.prototype;function c(V){this.fill=V.fill===void 0?" ":V.fill+"",this.align=V.align===void 0?">":V.align+"",this.sign=V.sign===void 0?"-":V.sign+"",this.symbol=V.symbol===void 0?"":V.symbol+"",this.zero=!!V.zero,this.width=V.width===void 0?void 0:+V.width,this.comma=!!V.comma,this.precision=V.precision===void 0?void 0:+V.precision,this.trim=!!V.trim,this.type=V.type===void 0?"":V.type+""}c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v(V){e:for(var Y=V.length,J=1,re=-1,ne;J<Y;++J)switch(V[J]){case".":re=ne=J;break;case"0":re===0&&(re=J),ne=J;break;default:if(!+V[J])break e;re>0&&(re=0);break}return re>0?V.slice(0,re)+V.slice(ne+1):V}var m;function _(V,Y){var J=r(V,Y);if(!J)return V+"";var re=J[0],ne=J[1],oe=ne-(m=Math.max(-8,Math.min(8,Math.floor(ne/3)))*3)+1,ue=re.length;return oe===ue?re:oe>ue?re+new Array(oe-ue+1).join("0"):oe>0?re.slice(0,oe)+"."+re.slice(oe):"0."+new Array(1-oe).join("0")+r(V,Math.max(0,Y+oe-1))[0]}function T(V,Y){var J=r(V,Y);if(!J)return V+"";var re=J[0],ne=J[1];return ne<0?"0."+new Array(-ne).join("0")+re:re.length>ne+1?re.slice(0,ne+1)+"."+re.slice(ne+1):re+new Array(ne-re.length+2).join("0")}var M={"%":function(V,Y){return(V*100).toFixed(Y)},b:function(V){return Math.round(V).toString(2)},c:function(V){return V+""},d:t,e:function(V,Y){return V.toExponential(Y)},f:function(V,Y){return V.toFixed(Y)},g:function(V,Y){return V.toPrecision(Y)},o:function(V){return Math.round(V).toString(8)},p:function(V,Y){return T(V*100,Y)},r:T,s:_,X:function(V){return Math.round(V).toString(16).toUpperCase()},x:function(V){return Math.round(V).toString(16)}};function k(V){return V}var L=Array.prototype.map,E=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function I(V){var Y=V.grouping===void 0||V.thousands===void 0?k:a(L.call(V.grouping,Number),V.thousands+""),J=V.currency===void 0?"":V.currency[0]+"",re=V.currency===void 0?"":V.currency[1]+"",ne=V.decimal===void 0?".":V.decimal+"",oe=V.numerals===void 0?k:s(L.call(V.numerals,String)),ue=V.percent===void 0?"%":V.percent+"",me=V.minus===void 0?"-":V.minus+"",Se=V.nan===void 0?"NaN":V.nan+"";function Ce(_e){_e=u(_e);var Te=_e.fill,Ae=_e.align,Le=_e.sign,Ke=_e.symbol,ct=_e.zero,it=_e.width,ut=_e.comma,Ge=_e.precision,xt=_e.trim,at=_e.type;at==="n"?(ut=!0,at="g"):M[at]||(Ge===void 0&&(Ge=12),xt=!0,at="g"),(ct||Te==="0"&&Ae==="=")&&(ct=!0,Te="0",Ae="=");var At=Ke==="$"?J:Ke==="#"&&/[boxX]/.test(at)?"0"+at.toLowerCase():"",kt=Ke==="$"?re:/[%p]/.test(at)?ue:"",mt=M[at],ye=/[defgprs%]/.test(at);Ge=Ge===void 0?6:/[gprs]/.test(at)?Math.max(1,Math.min(21,Ge)):Math.max(0,Math.min(20,Ge));function Re(xe){var et=At,vt=kt,tt,Bt,Mt;if(at==="c")vt=mt(xe)+vt,xe="";else{xe=+xe;var Ct=xe<0||1/xe<0;if(xe=isNaN(xe)?Se:mt(Math.abs(xe),Ge),xt&&(xe=v(xe)),Ct&&+xe==0&&Le!=="+"&&(Ct=!1),et=(Ct?Le==="("?Le:me:Le==="-"||Le==="("?"":Le)+et,vt=(at==="s"?E[8+m/3]:"")+vt+(Ct&&Le==="("?")":""),ye){for(tt=-1,Bt=xe.length;++tt<Bt;)if(Mt=xe.charCodeAt(tt),48>Mt||Mt>57){vt=(Mt===46?ne+xe.slice(tt+1):xe.slice(tt))+vt,xe=xe.slice(0,tt);break}}}ut&&!ct&&(xe=Y(xe,1/0));var Rt=et.length+xe.length+vt.length,Ot=Rt<it?new Array(it-Rt+1).join(Te):"";switch(ut&&ct&&(xe=Y(Ot+xe,Ot.length?it-vt.length:1/0),Ot=""),Ae){case"<":xe=et+xe+vt+Ot;break;case"=":xe=et+Ot+xe+vt;break;case"^":xe=Ot.slice(0,Rt=Ot.length>>1)+et+xe+vt+Ot.slice(Rt);break;default:xe=Ot+et+xe+vt;break}return oe(xe)}return Re.toString=function(){return _e+""},Re}function Me(_e,Te){var Ae=Ce((_e=u(_e),_e.type="f",_e)),Le=Math.max(-8,Math.min(8,Math.floor(i(Te)/3)))*3,Ke=Math.pow(10,-Le),ct=E[8+Le/3];return function(it){return Ae(Ke*it)+ct}}return{format:Ce,formatPrefix:Me}}var R;N({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function N(V){return R=I(V),e.format=R.format,e.formatPrefix=R.formatPrefix,R}function z(V){return Math.max(0,-i(Math.abs(V)))}function B(V,Y){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(i(Y)/3)))*3-i(Math.abs(V)))}function H(V,Y){return V=Math.abs(V),Y=Math.abs(Y)-V,Math.max(0,i(Y)-i(V))+1}e.FormatSpecifier=c,e.formatDefaultLocale=N,e.formatLocale=I,e.formatSpecifier=u,e.precisionFixed=z,e.precisionPrefix=B,e.precisionRound=H,Object.defineProperty(e,"__esModule",{value:!0})})});var G7=he((Dye,H7)=>{"use strict";H7.exports=function(e){for(var t=e.length,r,i=0;i<t;i++)if(r=e.charCodeAt(i),(r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0}});var Ia=he((zye,Z7)=>{"use strict";var Yj=G7();Z7.exports=function(e){var t=typeof e;if(t==="string"){var r=e;if(e=+e,e===0&&Yj(r))return!1}else if(t!=="number")return!1;return e-e<1}});var Bi=he((Iye,Y7)=>{"use strict";Y7.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}});var rw=he((v_,W7)=>{(function(e,t){typeof v_=="object"&&typeof W7!="undefined"?t(v_):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["base64-arraybuffer"]={}))})(v_,function(e){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<t.length;i++)r[t.charCodeAt(i)]=i;var a=function(l){var u=new Uint8Array(l),c,v=u.length,m="";for(c=0;c<v;c+=3)m+=t[u[c]>>2],m+=t[(u[c]&3)<<4|u[c+1]>>4],m+=t[(u[c+1]&15)<<2|u[c+2]>>6],m+=t[u[c+2]&63];return v%3===2?m=m.substring(0,m.length-1)+"=":v%3===1&&(m=m.substring(0,m.length-2)+"=="),m},s=function(l){var u=l.length*.75,c=l.length,v,m=0,_,T,M,k;l[l.length-1]==="="&&(u--,l[l.length-2]==="="&&u--);var L=new ArrayBuffer(u),E=new Uint8Array(L);for(v=0;v<c;v+=4)_=r[l.charCodeAt(v)],T=r[l.charCodeAt(v+1)],M=r[l.charCodeAt(v+2)],k=r[l.charCodeAt(v+3)],E[m++]=_<<2|T>>4,E[m++]=(T&15)<<4|M>>2,E[m++]=(M&3)<<6|k&63;return L};e.decode=s,e.encode=a,Object.defineProperty(e,"__esModule",{value:!0})})});var dc=he((Rye,X7)=>{"use strict";X7.exports=function(t){return window&&window.process&&window.process.versions?Object.prototype.toString.call(t)==="[object Object]":Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}});var ll=he(qu=>{"use strict";var Wj=rw().decode,Xj=dc(),aw=Array.isArray,jj=ArrayBuffer,Jj=DataView;function j7(e){return jj.isView(e)&&!(e instanceof Jj)}qu.isTypedArray=j7;function d_(e){return aw(e)||j7(e)}qu.isArrayOrTypedArray=d_;function Kj(e){return!d_(e[0])}qu.isArray1D=Kj;qu.ensureArray=function(e,t){return aw(e)||(e=[]),e.length=t,e};var co={u1c:typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,i1:typeof Int8Array=="undefined"?void 0:Int8Array,u1:typeof Uint8Array=="undefined"?void 0:Uint8Array,i2:typeof Int16Array=="undefined"?void 0:Int16Array,u2:typeof Uint16Array=="undefined"?void 0:Uint16Array,i4:typeof Int32Array=="undefined"?void 0:Int32Array,u4:typeof Uint32Array=="undefined"?void 0:Uint32Array,f4:typeof Float32Array=="undefined"?void 0:Float32Array,f8:typeof Float64Array=="undefined"?void 0:Float64Array};co.uint8c=co.u1c;co.uint8=co.u1;co.int8=co.i1;co.uint16=co.u2;co.int16=co.i2;co.uint32=co.u4;co.int32=co.i4;co.float32=co.f4;co.float64=co.f8;function iw(e){return e.constructor===ArrayBuffer}qu.isArrayBuffer=iw;qu.decodeTypedArraySpec=function(e){var t=[],r=Qj(e),i=r.dtype,a=co[i];if(!a)throw new Error('Error in dtype: "'+i+'"');var s=a.BYTES_PER_ELEMENT,l=r.bdata;iw(l)||(l=Wj(l));var u=r.shape===void 0?[l.byteLength/s]:(""+r.shape).split(",");u.reverse();var c=u.length,v,m,_=+u[0],T=s*_,M=0;if(c===1)t=new a(l);else if(c===2)for(v=+u[1],m=0;m<v;m++)t[m]=new a(l,M,_),M+=T;else if(c===3){v=+u[1];for(var k=+u[2],L=0;L<k;L++)for(t[L]=[],m=0;m<v;m++)t[L][m]=new a(l,M,_),M+=T}else throw new Error("ndim: "+c+'is not supported with the shape:"'+r.shape+'"');return t.bdata=r.bdata,t.dtype=r.dtype,t.shape=u.reverse().join(","),e._inputArray=t,t};qu.isTypedArraySpec=function(e){return Xj(e)&&e.hasOwnProperty("dtype")&&typeof e.dtype=="string"&&e.hasOwnProperty("bdata")&&(typeof e.bdata=="string"||iw(e.bdata))&&(e.shape===void 0||e.hasOwnProperty("shape")&&(typeof e.shape=="string"||typeof e.shape=="number"))};function Qj(e){return{bdata:e.bdata,dtype:e.dtype,shape:e.shape}}qu.concat=function(){var e=[],t=!0,r=0,i,a,s,l,u,c,v,m;for(s=0;s<arguments.length;s++)l=arguments[s],c=l.length,c&&(a?e.push(l):(a=l,u=c),aw(l)?i=!1:(t=!1,r?i!==l.constructor&&(i=!1):i=l.constructor),r+=c);if(!r)return[];if(!e.length)return a;if(t)return a.concat.apply(a,e);if(i){for(v=new i(r),v.set(a),s=0;s<e.length;s++)l=e[s],v.set(l,u),u+=l.length;return v}for(v=new Array(r),m=0;m<a.length;m++)v[m]=a[m];for(s=0;s<e.length;s++){for(l=e[s],m=0;m<l.length;m++)v[u+m]=l[m];u+=m}return v};qu.maxRowLength=function(e){return J7(e,Math.max,0)};qu.minRowLength=function(e){return J7(e,Math.min,1/0)};function J7(e,t,r){if(d_(e))if(d_(e[0])){for(var i=r,a=0;a<e.length;a++)i=t(i,e[a].length);return i}else return e.length;return 0}});var Fy=he((qye,t8)=>{"use strict";var K7=Ia(),ow=ll().isArrayOrTypedArray;t8.exports=function(t,r){if(K7(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var i=r.split("."),a,s,l,u;for(u=0;u<i.length;u++)if(String(i[u]).slice(0,2)==="__")throw"bad property string";for(u=0;u<i.length;){if(a=String(i[u]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),a){if(a[1])i[u]=a[1];else if(u===0)i.splice(0,1);else throw"bad property string";for(s=a[2].substr(1,a[2].length-2).split("]["),l=0;l<s.length;l++)u++,i.splice(u,0,Number(s[l]))}u++}return typeof t!="object"?rJ(t,r,i):{set:$7(t,i,r),get:Q7(t,i),astr:r,parts:i,obj:t}};function Q7(e,t){return function(){var r=e,i,a,s,l,u;for(l=0;l<t.length-1;l++){if(i=t[l],i===-1){for(a=!0,s=[],u=0;u<r.length;u++)s[u]=Q7(r[u],t.slice(l+1))(),s[u]!==s[0]&&(a=!1);return a?s[0]:s}if(typeof i=="number"&&!ow(r)||(r=r[i],typeof r!="object"||r===null))return}if(!(typeof r!="object"||r===null)&&(s=r[t[l]],s!==null))return s}}var $j=/(^|\.)args\[/;function nw(e,t){return e===void 0||e===null&&!t.match($j)}function $7(e,t,r){return function(i){var a=e,s="",l=[[e,s]],u=nw(i,r),c,v;for(v=0;v<t.length-1;v++){if(c=t[v],typeof c=="number"&&!ow(a))throw"array index but container is not an array";if(c===-1){if(u=!tJ(a,t.slice(v+1),i,r),u)break;return}if(!e8(a,c,t[v+1],u))break;if(a=a[c],typeof a!="object"||a===null)throw"container is not an object";s=eJ(s,c),l.push([a,s])}if(u){if(v===t.length-1&&(delete a[t[v]],Array.isArray(a)&&+t[v]===a.length-1))for(;a.length&&a[a.length-1]===void 0;)a.pop()}else a[t[v]]=i}}function eJ(e,t){var r=t;return K7(t)?r="["+t+"]":e&&(r="."+t),e+r}function tJ(e,t,r,i){var a=ow(r),s=!0,l=r,u=i.replace("-1",0),c=a?!1:nw(r,u),v=t[0],m;for(m=0;m<e.length;m++)u=i.replace("-1",m),a&&(l=r[m%r.length],c=nw(l,u)),c&&(s=!1),e8(e,m,v,c)&&$7(e[m],t,i.replace("-1",m))(l);return s}function e8(e,t,r,i){if(e[t]===void 0){if(i)return!1;typeof r=="number"?e[t]=[]:e[t]={}}return!0}function rJ(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}});var n8=he((Nye,i8)=>{"use strict";var w0=Fy(),aJ=/^\w*$/,iJ=0,r8=1,p_=2,a8=3,ud=4;i8.exports=function(t,r,i,a){i=i||"name",a=a||"value";var s,l,u,c={};r&&r.length?(u=w0(t,r),l=u.get()):l=t,r=r||"";var v={};if(l)for(s=0;s<l.length;s++)v[l[s][i]]=s;var m=aJ.test(a),_={set:function(T,M){var k=M===null?ud:iJ;if(!l){if(!u||k===ud)return;l=[],u.set(l)}var L=v[T];if(L===void 0){if(k===ud)return;k=k|a8,L=l.length,v[T]=L}else M!==(m?l[L][a]:w0(l[L],a).get())&&(k=k|p_);var E=l[L]=l[L]||{};return E[i]=T,m?E[a]=M:w0(E,a).set(M),M!==null&&(k=k&~ud),c[L]=c[L]|k,_},get:function(T){if(l){var M=v[T];if(M!==void 0)return m?l[M][a]:w0(l[M],a).get()}},rename:function(T,M){var k=v[T];return k===void 0||(c[k]=c[k]|r8,v[M]=k,delete v[T],l[k][i]=M),_},remove:function(T){var M=v[T];if(M===void 0)return _;var k=l[M];if(Object.keys(k).length>2)return c[M]=c[M]|p_,_.set(T,null);if(m){for(s=M;s<l.length;s++)c[s]=c[s]|a8;for(s=M;s<l.length;s++)v[l[s][i]]--;l.splice(M,1),delete v[T]}else w0(k,a).set(null),c[M]=c[M]|p_|ud;return _},constructUpdate:function(){for(var T,M,k={},L=Object.keys(c),E=0;E<L.length;E++)M=L[E],T=r+"["+M+"]",l[M]?(c[M]&r8&&(k[T+"."+i]=l[M][i]),c[M]&p_&&(m?k[T+"."+a]=c[M]&ud?null:l[M][a]:k[T+"."+a]=c[M]&ud?null:w0(l[M],a).get())):k[T]=null;return k}};return _}});var s8=he((Bye,o8)=>{"use strict";var nJ=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,oJ=/^[^\.\[\]]+$/;o8.exports=function(e,t){for(;t;){var r=e.match(nJ);if(r)e=r[1];else if(e.match(oJ))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}return e&&t.charAt(0)!=="["?e+"."+t:e+t}});var m_=he((Oye,l8)=>{"use strict";var sJ=Ia();l8.exports=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var i=Math.log(Math.min(r[0],r[1]))/Math.LN10;return sJ(i)||(i=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),i}});var c8=he((Uye,f8)=>{"use strict";var u8=ll().isArrayOrTypedArray,qy=dc();f8.exports=function e(t,r){for(var i in r){var a=r[i],s=t[i];if(s!==a)if(i.charAt(0)==="_"||typeof a=="function"){if(i in t)continue;t[i]=a}else if(u8(a)&&u8(s)&&qy(a[0])){if(i==="customdata"||i==="ids")continue;for(var l=Math.min(a.length,s.length),u=0;u<l;u++)s[u]!==a[u]&&qy(a[u])&&qy(s[u])&&e(s[u],a[u])}else qy(a)&&qy(s)&&(e(s,a),Object.keys(s).length||delete t[i])}}});var T0=he((Vye,h8)=>{"use strict";function lJ(e,t){var r=e%t;return r<0?r+t:r}function uJ(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}h8.exports={mod:lJ,modHalf:uJ}});var Sf=he((Hye,y_)=>{(function(e){var t=/^\s+/,r=/\s+$/,i=0,a=e.round,s=e.min,l=e.max,u=e.random;function c(ye,Re){if(ye=ye||"",Re=Re||{},ye instanceof c)return ye;if(!(this instanceof c))return new c(ye,Re);var xe=v(ye);this._originalInput=ye,this._r=xe.r,this._g=xe.g,this._b=xe.b,this._a=xe.a,this._roundA=a(100*this._a)/100,this._format=Re.format||xe.format,this._gradientType=Re.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=xe.ok,this._tc_id=i++}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ye=this.toRgb();return(ye.r*299+ye.g*587+ye.b*114)/1e3},getLuminance:function(){var ye=this.toRgb(),Re,xe,et,vt,tt,Bt;return Re=ye.r/255,xe=ye.g/255,et=ye.b/255,Re<=.03928?vt=Re/12.92:vt=e.pow((Re+.055)/1.055,2.4),xe<=.03928?tt=xe/12.92:tt=e.pow((xe+.055)/1.055,2.4),et<=.03928?Bt=et/12.92:Bt=e.pow((et+.055)/1.055,2.4),.2126*vt+.7152*tt+.0722*Bt},setAlpha:function(ye){return this._a=_e(ye),this._roundA=a(100*this._a)/100,this},toHsv:function(){var ye=M(this._r,this._g,this._b);return{h:ye.h*360,s:ye.s,v:ye.v,a:this._a}},toHsvString:function(){var ye=M(this._r,this._g,this._b),Re=a(ye.h*360),xe=a(ye.s*100),et=a(ye.v*100);return this._a==1?"hsv("+Re+", "+xe+"%, "+et+"%)":"hsva("+Re+", "+xe+"%, "+et+"%, "+this._roundA+")"},toHsl:function(){var ye=_(this._r,this._g,this._b);return{h:ye.h*360,s:ye.s,l:ye.l,a:this._a}},toHslString:function(){var ye=_(this._r,this._g,this._b),Re=a(ye.h*360),xe=a(ye.s*100),et=a(ye.l*100);return this._a==1?"hsl("+Re+", "+xe+"%, "+et+"%)":"hsla("+Re+", "+xe+"%, "+et+"%, "+this._roundA+")"},toHex:function(ye){return L(this._r,this._g,this._b,ye)},toHexString:function(ye){return"#"+this.toHex(ye)},toHex8:function(ye){return E(this._r,this._g,this._b,this._a,ye)},toHex8String:function(ye){return"#"+this.toHex8(ye)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(Te(this._r,255)*100)+"%",g:a(Te(this._g,255)*100)+"%",b:a(Te(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+a(Te(this._r,255)*100)+"%, "+a(Te(this._g,255)*100)+"%, "+a(Te(this._b,255)*100)+"%)":"rgba("+a(Te(this._r,255)*100)+"%, "+a(Te(this._g,255)*100)+"%, "+a(Te(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ce[L(this._r,this._g,this._b,!0)]||!1},toFilter:function(ye){var Re="#"+I(this._r,this._g,this._b,this._a),xe=Re,et=this._gradientType?"GradientType = 1, ":"";if(ye){var vt=c(ye);xe="#"+I(vt._r,vt._g,vt._b,vt._a)}return"progid:DXImageTransform.Microsoft.gradient("+et+"startColorstr="+Re+",endColorstr="+xe+")"},toString:function(ye){var Re=!!ye;ye=ye||this._format;var xe=!1,et=this._a<1&&this._a>=0,vt=!Re&&et&&(ye==="hex"||ye==="hex6"||ye==="hex3"||ye==="hex4"||ye==="hex8"||ye==="name");return vt?ye==="name"&&this._a===0?this.toName():this.toRgbString():(ye==="rgb"&&(xe=this.toRgbString()),ye==="prgb"&&(xe=this.toPercentageRgbString()),(ye==="hex"||ye==="hex6")&&(xe=this.toHexString()),ye==="hex3"&&(xe=this.toHexString(!0)),ye==="hex4"&&(xe=this.toHex8String(!0)),ye==="hex8"&&(xe=this.toHex8String()),ye==="name"&&(xe=this.toName()),ye==="hsl"&&(xe=this.toHslString()),ye==="hsv"&&(xe=this.toHsvString()),xe||this.toHexString())},clone:function(){return c(this.toString())},_applyModification:function(ye,Re){var xe=ye.apply(null,[this].concat([].slice.call(Re)));return this._r=xe._r,this._g=xe._g,this._b=xe._b,this.setAlpha(xe._a),this},lighten:function(){return this._applyModification(B,arguments)},brighten:function(){return this._applyModification(H,arguments)},darken:function(){return this._applyModification(V,arguments)},desaturate:function(){return this._applyModification(R,arguments)},saturate:function(){return this._applyModification(N,arguments)},greyscale:function(){return this._applyModification(z,arguments)},spin:function(){return this._applyModification(Y,arguments)},_applyCombination:function(ye,Re){return ye.apply(null,[this].concat([].slice.call(Re)))},analogous:function(){return this._applyCombination(ue,arguments)},complement:function(){return this._applyCombination(J,arguments)},monochromatic:function(){return this._applyCombination(me,arguments)},splitcomplement:function(){return this._applyCombination(oe,arguments)},triad:function(){return this._applyCombination(re,arguments)},tetrad:function(){return this._applyCombination(ne,arguments)}},c.fromRatio=function(ye,Re){if(typeof ye=="object"){var xe={};for(var et in ye)ye.hasOwnProperty(et)&&(et==="a"?xe[et]=ye[et]:xe[et]=ut(ye[et]));ye=xe}return c(ye,Re)};function v(ye){var Re={r:0,g:0,b:0},xe=1,et=null,vt=null,tt=null,Bt=!1,Mt=!1;return typeof ye=="string"&&(ye=kt(ye)),typeof ye=="object"&&(At(ye.r)&&At(ye.g)&&At(ye.b)?(Re=m(ye.r,ye.g,ye.b),Bt=!0,Mt=String(ye.r).substr(-1)==="%"?"prgb":"rgb"):At(ye.h)&&At(ye.s)&&At(ye.v)?(et=ut(ye.s),vt=ut(ye.v),Re=k(ye.h,et,vt),Bt=!0,Mt="hsv"):At(ye.h)&&At(ye.s)&&At(ye.l)&&(et=ut(ye.s),tt=ut(ye.l),Re=T(ye.h,et,tt),Bt=!0,Mt="hsl"),ye.hasOwnProperty("a")&&(xe=ye.a)),xe=_e(xe),{ok:Bt,format:ye.format||Mt,r:s(255,l(Re.r,0)),g:s(255,l(Re.g,0)),b:s(255,l(Re.b,0)),a:xe}}function m(ye,Re,xe){return{r:Te(ye,255)*255,g:Te(Re,255)*255,b:Te(xe,255)*255}}function _(ye,Re,xe){ye=Te(ye,255),Re=Te(Re,255),xe=Te(xe,255);var et=l(ye,Re,xe),vt=s(ye,Re,xe),tt,Bt,Mt=(et+vt)/2;if(et==vt)tt=Bt=0;else{var Ct=et-vt;switch(Bt=Mt>.5?Ct/(2-et-vt):Ct/(et+vt),et){case ye:tt=(Re-xe)/Ct+(Re<xe?6:0);break;case Re:tt=(xe-ye)/Ct+2;break;case xe:tt=(ye-Re)/Ct+4;break}tt/=6}return{h:tt,s:Bt,l:Mt}}function T(ye,Re,xe){var et,vt,tt;ye=Te(ye,360),Re=Te(Re,100),xe=Te(xe,100);function Bt(Rt,Ot,gt){return gt<0&&(gt+=1),gt>1&&(gt-=1),gt<1/6?Rt+(Ot-Rt)*6*gt:gt<1/2?Ot:gt<2/3?Rt+(Ot-Rt)*(2/3-gt)*6:Rt}if(Re===0)et=vt=tt=xe;else{var Mt=xe<.5?xe*(1+Re):xe+Re-xe*Re,Ct=2*xe-Mt;et=Bt(Ct,Mt,ye+1/3),vt=Bt(Ct,Mt,ye),tt=Bt(Ct,Mt,ye-1/3)}return{r:et*255,g:vt*255,b:tt*255}}function M(ye,Re,xe){ye=Te(ye,255),Re=Te(Re,255),xe=Te(xe,255);var et=l(ye,Re,xe),vt=s(ye,Re,xe),tt,Bt,Mt=et,Ct=et-vt;if(Bt=et===0?0:Ct/et,et==vt)tt=0;else{switch(et){case ye:tt=(Re-xe)/Ct+(Re<xe?6:0);break;case Re:tt=(xe-ye)/Ct+2;break;case xe:tt=(ye-Re)/Ct+4;break}tt/=6}return{h:tt,s:Bt,v:Mt}}function k(ye,Re,xe){ye=Te(ye,360)*6,Re=Te(Re,100),xe=Te(xe,100);var et=e.floor(ye),vt=ye-et,tt=xe*(1-Re),Bt=xe*(1-vt*Re),Mt=xe*(1-(1-vt)*Re),Ct=et%6,Rt=[xe,Bt,tt,tt,Mt,xe][Ct],Ot=[Mt,xe,xe,Bt,tt,tt][Ct],gt=[tt,tt,Mt,xe,xe,Bt][Ct];return{r:Rt*255,g:Ot*255,b:gt*255}}function L(ye,Re,xe,et){var vt=[it(a(ye).toString(16)),it(a(Re).toString(16)),it(a(xe).toString(16))];return et&&vt[0].charAt(0)==vt[0].charAt(1)&&vt[1].charAt(0)==vt[1].charAt(1)&&vt[2].charAt(0)==vt[2].charAt(1)?vt[0].charAt(0)+vt[1].charAt(0)+vt[2].charAt(0):vt.join("")}function E(ye,Re,xe,et,vt){var tt=[it(a(ye).toString(16)),it(a(Re).toString(16)),it(a(xe).toString(16)),it(Ge(et))];return vt&&tt[0].charAt(0)==tt[0].charAt(1)&&tt[1].charAt(0)==tt[1].charAt(1)&&tt[2].charAt(0)==tt[2].charAt(1)&&tt[3].charAt(0)==tt[3].charAt(1)?tt[0].charAt(0)+tt[1].charAt(0)+tt[2].charAt(0)+tt[3].charAt(0):tt.join("")}function I(ye,Re,xe,et){var vt=[it(Ge(et)),it(a(ye).toString(16)),it(a(Re).toString(16)),it(a(xe).toString(16))];return vt.join("")}c.equals=function(ye,Re){return!ye||!Re?!1:c(ye).toRgbString()==c(Re).toRgbString()},c.random=function(){return c.fromRatio({r:u(),g:u(),b:u()})};function R(ye,Re){Re=Re===0?0:Re||10;var xe=c(ye).toHsl();return xe.s-=Re/100,xe.s=Ae(xe.s),c(xe)}function N(ye,Re){Re=Re===0?0:Re||10;var xe=c(ye).toHsl();return xe.s+=Re/100,xe.s=Ae(xe.s),c(xe)}function z(ye){return c(ye).desaturate(100)}function B(ye,Re){Re=Re===0?0:Re||10;var xe=c(ye).toHsl();return xe.l+=Re/100,xe.l=Ae(xe.l),c(xe)}function H(ye,Re){Re=Re===0?0:Re||10;var xe=c(ye).toRgb();return xe.r=l(0,s(255,xe.r-a(255*-(Re/100)))),xe.g=l(0,s(255,xe.g-a(255*-(Re/100)))),xe.b=l(0,s(255,xe.b-a(255*-(Re/100)))),c(xe)}function V(ye,Re){Re=Re===0?0:Re||10;var xe=c(ye).toHsl();return xe.l-=Re/100,xe.l=Ae(xe.l),c(xe)}function Y(ye,Re){var xe=c(ye).toHsl(),et=(xe.h+Re)%360;return xe.h=et<0?360+et:et,c(xe)}function J(ye){var Re=c(ye).toHsl();return Re.h=(Re.h+180)%360,c(Re)}function re(ye){var Re=c(ye).toHsl(),xe=Re.h;return[c(ye),c({h:(xe+120)%360,s:Re.s,l:Re.l}),c({h:(xe+240)%360,s:Re.s,l:Re.l})]}function ne(ye){var Re=c(ye).toHsl(),xe=Re.h;return[c(ye),c({h:(xe+90)%360,s:Re.s,l:Re.l}),c({h:(xe+180)%360,s:Re.s,l:Re.l}),c({h:(xe+270)%360,s:Re.s,l:Re.l})]}function oe(ye){var Re=c(ye).toHsl(),xe=Re.h;return[c(ye),c({h:(xe+72)%360,s:Re.s,l:Re.l}),c({h:(xe+216)%360,s:Re.s,l:Re.l})]}function ue(ye,Re,xe){Re=Re||6,xe=xe||30;var et=c(ye).toHsl(),vt=360/xe,tt=[c(ye)];for(et.h=(et.h-(vt*Re>>1)+720)%360;--Re;)et.h=(et.h+vt)%360,tt.push(c(et));return tt}function me(ye,Re){Re=Re||6;for(var xe=c(ye).toHsv(),et=xe.h,vt=xe.s,tt=xe.v,Bt=[],Mt=1/Re;Re--;)Bt.push(c({h:et,s:vt,v:tt})),tt=(tt+Mt)%1;return Bt}c.mix=function(ye,Re,xe){xe=xe===0?0:xe||50;var et=c(ye).toRgb(),vt=c(Re).toRgb(),tt=xe/100,Bt={r:(vt.r-et.r)*tt+et.r,g:(vt.g-et.g)*tt+et.g,b:(vt.b-et.b)*tt+et.b,a:(vt.a-et.a)*tt+et.a};return c(Bt)},c.readability=function(ye,Re){var xe=c(ye),et=c(Re);return(e.max(xe.getLuminance(),et.getLuminance())+.05)/(e.min(xe.getLuminance(),et.getLuminance())+.05)},c.isReadable=function(ye,Re,xe){var et=c.readability(ye,Re),vt,tt;switch(tt=!1,vt=mt(xe),vt.level+vt.size){case"AAsmall":case"AAAlarge":tt=et>=4.5;break;case"AAlarge":tt=et>=3;break;case"AAAsmall":tt=et>=7;break}return tt},c.mostReadable=function(ye,Re,xe){var et=null,vt=0,tt,Bt,Mt,Ct;xe=xe||{},Bt=xe.includeFallbackColors,Mt=xe.level,Ct=xe.size;for(var Rt=0;Rt<Re.length;Rt++)tt=c.readability(ye,Re[Rt]),tt>vt&&(vt=tt,et=c(Re[Rt]));return c.isReadable(ye,et,{level:Mt,size:Ct})||!Bt?et:(xe.includeFallbackColors=!1,c.mostReadable(ye,["#fff","#000"],xe))};var Se=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ce=c.hexNames=Me(Se);function Me(ye){var Re={};for(var xe in ye)ye.hasOwnProperty(xe)&&(Re[ye[xe]]=xe);return Re}function _e(ye){return ye=parseFloat(ye),(isNaN(ye)||ye<0||ye>1)&&(ye=1),ye}function Te(ye,Re){Ke(ye)&&(ye="100%");var xe=ct(ye);return ye=s(Re,l(0,parseFloat(ye))),xe&&(ye=parseInt(ye*Re,10)/100),e.abs(ye-Re)<1e-6?1:ye%Re/parseFloat(Re)}function Ae(ye){return s(1,l(0,ye))}function Le(ye){return parseInt(ye,16)}function Ke(ye){return typeof ye=="string"&&ye.indexOf(".")!=-1&&parseFloat(ye)===1}function ct(ye){return typeof ye=="string"&&ye.indexOf("%")!=-1}function it(ye){return ye.length==1?"0"+ye:""+ye}function ut(ye){return ye<=1&&(ye=ye*100+"%"),ye}function Ge(ye){return e.round(parseFloat(ye)*255).toString(16)}function xt(ye){return Le(ye)/255}var at=function(){var ye="[-\\+]?\\d+%?",Re="[-\\+]?\\d*\\.\\d+%?",xe="(?:"+Re+")|(?:"+ye+")",et="[\\s|\\(]+("+xe+")[,|\\s]+("+xe+")[,|\\s]+("+xe+")\\s*\\)?",vt="[\\s|\\(]+("+xe+")[,|\\s]+("+xe+")[,|\\s]+("+xe+")[,|\\s]+("+xe+")\\s*\\)?";return{CSS_UNIT:new RegExp(xe),rgb:new RegExp("rgb"+et),rgba:new RegExp("rgba"+vt),hsl:new RegExp("hsl"+et),hsla:new RegExp("hsla"+vt),hsv:new RegExp("hsv"+et),hsva:new RegExp("hsva"+vt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function At(ye){return!!at.CSS_UNIT.exec(ye)}function kt(ye){ye=ye.replace(t,"").replace(r,"").toLowerCase();var Re=!1;if(Se[ye])ye=Se[ye],Re=!0;else if(ye=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var xe;return(xe=at.rgb.exec(ye))?{r:xe[1],g:xe[2],b:xe[3]}:(xe=at.rgba.exec(ye))?{r:xe[1],g:xe[2],b:xe[3],a:xe[4]}:(xe=at.hsl.exec(ye))?{h:xe[1],s:xe[2],l:xe[3]}:(xe=at.hsla.exec(ye))?{h:xe[1],s:xe[2],l:xe[3],a:xe[4]}:(xe=at.hsv.exec(ye))?{h:xe[1],s:xe[2],v:xe[3]}:(xe=at.hsva.exec(ye))?{h:xe[1],s:xe[2],v:xe[3],a:xe[4]}:(xe=at.hex8.exec(ye))?{r:Le(xe[1]),g:Le(xe[2]),b:Le(xe[3]),a:xt(xe[4]),format:Re?"name":"hex8"}:(xe=at.hex6.exec(ye))?{r:Le(xe[1]),g:Le(xe[2]),b:Le(xe[3]),format:Re?"name":"hex"}:(xe=at.hex4.exec(ye))?{r:Le(xe[1]+""+xe[1]),g:Le(xe[2]+""+xe[2]),b:Le(xe[3]+""+xe[3]),a:xt(xe[4]+""+xe[4]),format:Re?"name":"hex8"}:(xe=at.hex3.exec(ye))?{r:Le(xe[1]+""+xe[1]),g:Le(xe[2]+""+xe[2]),b:Le(xe[3]+""+xe[3]),format:Re?"name":"hex"}:!1}function mt(ye){var Re,xe;return ye=ye||{level:"AA",size:"small"},Re=(ye.level||"AA").toUpperCase(),xe=(ye.size||"small").toLowerCase(),Re!=="AA"&&Re!=="AAA"&&(Re="AA"),xe!=="small"&&xe!=="large"&&(xe="small"),{level:Re,size:xe}}typeof y_!="undefined"&&y_.exports?y_.exports=c:typeof define=="function"&&define.amd?define(function(){return c}):window.tinycolor=c})(Math)});var hn=he(Oy=>{"use strict";var v8=dc(),Ny=Array.isArray;function fJ(e,t){var r,i;for(r=0;r<e.length;r++){if(i=e[r],i!==null&&typeof i=="object")return!1;i!==void 0&&(t[r]=i)}return!0}Oy.extendFlat=function(){return By(arguments,!1,!1,!1)};Oy.extendDeep=function(){return By(arguments,!0,!1,!1)};Oy.extendDeepAll=function(){return By(arguments,!0,!0,!1)};Oy.extendDeepNoArrays=function(){return By(arguments,!0,!1,!0)};function By(e,t,r,i){var a=e[0],s=e.length,l,u,c,v,m,_,T;if(s===2&&Ny(a)&&Ny(e[1])&&a.length===0){if(T=fJ(e[1],a),T)return a;a.splice(0,a.length)}for(var M=1;M<s;M++){l=e[M];for(u in l)c=a[u],v=l[u],i&&Ny(v)?a[u]=v:t&&v&&(v8(v)||(m=Ny(v)))?(m?(m=!1,_=c&&Ny(c)?c:[]):_=c&&v8(c)?c:{},a[u]=By([_,v],t,r,i)):(typeof v!="undefined"||r)&&(a[u]=v)}return a}});var No=he((Zye,d8)=>{"use strict";d8.exports=function(e){var t=e.variantValues,r=e.editType,i=e.colorEditType;i===void 0&&(i=r);var a={editType:r,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};e.noNumericWeightValues&&(a.valType="enumerated",a.values=a.extras,a.extras=void 0,a.min=void 0,a.max=void 0);var s={family:{valType:"string",noBlank:!0,strict:!0,editType:r},size:{valType:"number",min:1,editType:r},color:{valType:"color",editType:i},weight:a,style:{editType:r,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:e.noFontVariant?void 0:{editType:r,valType:"enumerated",values:t||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:e.noFontTextcase?void 0:{editType:r,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:e.noFontLineposition?void 0:{editType:r,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:e.noFontShadow?void 0:{editType:r,valType:"string",dflt:e.autoShadowDflt?"auto":"none"},editType:r};return e.autoSize&&(s.size.dflt="auto"),e.autoColor&&(s.color.dflt="auto"),e.arrayOk&&(s.family.arrayOk=!0,s.weight.arrayOk=!0,s.style.arrayOk=!0,e.noFontVariant||(s.variant.arrayOk=!0),e.noFontTextcase||(s.textcase.arrayOk=!0),e.noFontLineposition||(s.lineposition.arrayOk=!0),e.noFontShadow||(s.shadow.arrayOk=!0),s.size.arrayOk=!0,s.color.arrayOk=!0),s}});var Uy=he((Yye,p8)=>{"use strict";p8.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}});var A0=he((Wye,g8)=>{"use strict";var m8=Uy(),y8=No(),sw=y8({editType:"none"});sw.family.dflt=m8.HOVERFONT;sw.size.dflt=m8.HOVERFONTSIZE;g8.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:sw,grouptitlefont:y8({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}});var x_=he((Xye,_8)=>{"use strict";var cJ=No(),g_=A0().hoverlabel,__=hn().extendFlat;_8.exports={hoverlabel:{bgcolor:__({},g_.bgcolor,{arrayOk:!0}),bordercolor:__({},g_.bordercolor,{arrayOk:!0}),font:cJ({arrayOk:!0,editType:"none"}),align:__({},g_.align,{arrayOk:!0}),namelength:__({},g_.namelength,{arrayOk:!0}),editType:"none"}}});var gs=he((jye,x8)=>{"use strict";var hJ=No(),vJ=x_();x8.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:hJ({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:vJ.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}});var fd=he((Jye,T8)=>{"use strict";var dJ=Sf(),b_={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},b8=b_.RdBu;function pJ(e,t){if(t||(t=b8),!e)return t;function r(){try{e=b_[e]||JSON.parse(e)}catch(i){e=t}}return typeof e=="string"&&(r(),typeof e=="string"&&r()),w8(e)?e:t}function w8(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t||!dJ(i[1]).isValid())return!1;t=+i[0]}return!0}function mJ(e){return b_[e]!==void 0?!0:w8(e)}T8.exports={scales:b_,defaultScale:b8,get:pJ,isValid:mJ}});var kf=he(cd=>{"use strict";cd.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];cd.defaultLine="#444";cd.lightLine="#eee";cd.background="#fff";cd.borderLine="#BEC8D9";cd.lightFraction=100*10/11});var Ua=he((Qye,A8)=>{"use strict";var Os=Sf(),yJ=Ia(),gJ=ll().isTypedArray,to=A8.exports={},w_=kf();to.defaults=w_.defaults;var _J=to.defaultLine=w_.defaultLine;to.lightLine=w_.lightLine;var uw=to.background=w_.background;to.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};to.rgb=function(e){return to.tinyRGB(Os(e))};to.opacity=function(e){return e?Os(e).getAlpha():0};to.addOpacity=function(e,t){var r=Os(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};to.combine=function(e,t){var r=Os(e).toRgb();if(r.a===1)return Os(e).toRgbString();var i=Os(t||uw).toRgb(),a=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},s={r:a.r*(1-r.a)+r.r*r.a,g:a.g*(1-r.a)+r.g*r.a,b:a.b*(1-r.a)+r.b*r.a};return Os(s).toRgbString()};to.interpolate=function(e,t,r){var i=Os(e).toRgb(),a=Os(t).toRgb(),s={r:r*i.r+(1-r)*a.r,g:r*i.g+(1-r)*a.g,b:r*i.b+(1-r)*a.b};return Os(s).toRgbString()};to.contrast=function(e,t,r){var i=Os(e);i.getAlpha()!==1&&(i=Os(to.combine(e,uw)));var a=i.isDark()?t?i.lighten(t):uw:r?i.darken(r):_J;return a.toString()};to.stroke=function(e,t){var r=Os(t);e.style({stroke:to.tinyRGB(r),"stroke-opacity":r.getAlpha()})};to.fill=function(e,t){var r=Os(t);e.style({fill:to.tinyRGB(r),"fill-opacity":r.getAlpha()})};to.clean=function(e){if(!(!e||typeof e!="object")){var t=Object.keys(e),r,i,a,s;for(r=0;r<t.length;r++)if(a=t[r],s=e[a],a.substr(a.length-5)==="color")if(Array.isArray(s))for(i=0;i<s.length;i++)s[i]=lw(s[i]);else e[a]=lw(s);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(s))for(i=0;i<s.length;i++)Array.isArray(s[i])&&(s[i][1]=lw(s[i][1]));else if(Array.isArray(s)){var l=s[0];if(!Array.isArray(l)&&l&&typeof l=="object")for(i=0;i<s.length;i++)to.clean(s[i])}else s&&typeof s=="object"&&!gJ(s)&&to.clean(s)}};function lw(e){if(yJ(e)||typeof e!="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var i=r[1].trim().split(/\s*[\s,]\s*/),a=t.charAt(3)==="a"&&i.length===4;if(!a&&i.length!==3)return e;for(var s=0;s<i.length;s++){if(!i[s].length||(i[s]=Number(i[s]),!(i[s]>=0)))return e;if(s===3)i[s]>1&&(i[s]=1);else if(i[s]>=1)return e}var l=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return a?"rgba("+l+", "+i[3]+")":"rgb("+l+")"}});var T_=he(($ye,M8)=>{"use strict";M8.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}});var M0=he(S8=>{"use strict";S8.counter=function(e,t,r,i){var a=(t||"")+(r?"":"$"),s=i===!1?"":"^";return e==="xy"?new RegExp(s+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+a):new RegExp(s+e+"([2-9]|[1-9][0-9]+)?"+a)}});var L8=he(Us=>{"use strict";var fw=Ia(),k8=Sf(),C8=hn().extendFlat,xJ=gs(),bJ=fd(),wJ=Ua(),TJ=T_().DESELECTDIM,S0=Fy(),E8=M0().counter,AJ=T0().modHalf,Cf=ll().isArrayOrTypedArray,Sh=ll().isTypedArraySpec,kh=ll().decodeTypedArraySpec;Us.valObjectMeta={data_array:{coerceFunction:function(e,t,r){t.set(Cf(e)?e:Sh(e)?kh(e):r)}},enumerated:{coerceFunction:function(e,t,r,i){i.coerceNumber&&(e=+e),i.values.indexOf(e)===-1?t.set(r):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var r=t.values,i=0;i<r.length;i++){var a=String(r[i]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var s=new RegExp(a.substr(1,a.length-2));if(s.test(e))return!0}else if(e===r[i])return!0}return!1}},boolean:{coerceFunction:function(e,t,r){e===!0||e===!1?t.set(e):t.set(r)}},number:{coerceFunction:function(e,t,r,i){Sh(e)&&(e=kh(e)),!fw(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},integer:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}Sh(e)&&(e=kh(e)),e%1||!fw(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},string:{coerceFunction:function(e,t,r,i){if(typeof e!="string"){var a=typeof e=="number";i.strict===!0||!a?t.set(r):t.set(String(e))}else i.noBlank&&!e?t.set(r):t.set(e)}},color:{coerceFunction:function(e,t,r){Sh(e)&&(e=kh(e)),k8(e).isValid()?t.set(e):t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function i(a){return k8(a).isValid()}!Array.isArray(e)||!e.length?t.set(r):e.every(i)?t.set(e):t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(bJ.get(e,r))}},angle:{coerceFunction:function(e,t,r){Sh(e)&&(e=kh(e)),e==="auto"?t.set("auto"):fw(e)?t.set(AJ(+e,360)):t.set(r)}},subplotid:{coerceFunction:function(e,t,r,i){var a=i.regex||E8(r);if(typeof e=="string"&&a.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;return e===r?!0:typeof e!="string"?!1:!!E8(r).test(e)}},flaglist:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}if(typeof e!="string"){t.set(r);return}for(var a=e.split("+"),s=0;s<a.length;){var l=a[s];i.flags.indexOf(l)===-1||a.indexOf(l)<s?a.splice(s,1):s++}a.length?t.set(a.join("+")):t.set(r)}},any:{coerceFunction:function(e,t,r){e===void 0?t.set(r):t.set(Sh(e)?kh(e):e)}},info_array:{coerceFunction:function(e,t,r,i){function a(R,N,z){var B,H={set:function(V){B=V}};return z===void 0&&(z=N.dflt),Us.valObjectMeta[N.valType].coerceFunction(R,H,z,N),B}if(Sh(e)&&(e=kh(e)),!Cf(e)){t.set(r);return}var s=i.dimensions===2||i.dimensions==="1-2"&&Array.isArray(e)&&Cf(e[0]),l=i.items,u=[],c=Array.isArray(l),v=c&&s&&Cf(l[0]),m=s&&c&&!v,_=c&&!m?l.length:e.length,T,M,k,L,E,I;if(r=Array.isArray(r)?r:[],s)for(T=0;T<_;T++)for(u[T]=[],k=Cf(e[T])?e[T]:[],m?E=l.length:c?E=l[T].length:E=k.length,M=0;M<E;M++)m?L=l[M]:c?L=l[T][M]:L=l,I=a(k[M],L,(r[T]||[])[M]),I!==void 0&&(u[T][M]=I);else for(T=0;T<_;T++)I=a(e[T],c?l[T]:l,r[T]),I!==void 0&&(u[T]=I);t.set(u)},validateFunction:function(e,t){if(!Cf(e))return!1;var r=t.items,i=Array.isArray(r),a=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return!1;for(var s=0;s<e.length;s++)if(a){if(!Cf(e[s])||!t.freeLength&&e[s].length!==r[s].length)return!1;for(var l=0;l<e[s].length;l++)if(!A_(e[s][l],i?r[s][l]:r))return!1}else if(!A_(e[s],i?r[s]:r))return!1;return!0}}};Us.coerce=function(e,t,r,i,a){var s=S0(r,i).get(),l=S0(e,i),u=S0(t,i),c=l.get(),v=t._template;if(c===void 0&&v&&(c=S0(v,i).get(),v=0),a===void 0&&(a=s.dflt),s.arrayOk){if(Cf(c))return u.set(c),c;if(Sh(c))return c=kh(c),u.set(c),c}var m=Us.valObjectMeta[s.valType].coerceFunction;m(c,u,a,s);var _=u.get();return v&&_===a&&!A_(c,s)&&(c=S0(v,i).get(),m(c,u,a,s),_=u.get()),_};Us.coerce2=function(e,t,r,i,a){var s=S0(e,i),l=Us.coerce(e,t,r,i,a),u=s.get();return u!=null?l:!1};Us.coerceFont=function(e,t,r,i){i||(i={}),r=C8({},r),r=C8(r,i.overrideDflt||{});var a={family:e(t+".family",r.family),size:e(t+".size",r.size),color:e(t+".color",r.color),weight:e(t+".weight",r.weight),style:e(t+".style",r.style)};if(i.noFontVariant||(a.variant=e(t+".variant",r.variant)),i.noFontLineposition||(a.lineposition=e(t+".lineposition",r.lineposition)),i.noFontTextcase||(a.textcase=e(t+".textcase",r.textcase)),!i.noFontShadow){var s=r.shadow;s==="none"&&i.autoShadowDflt&&(s="auto"),a.shadow=e(t+".shadow",s)}return a};Us.coercePattern=function(e,t,r,i){var a=e(t+".shape");if(a){e(t+".solidity"),e(t+".size");var s=e(t+".fillmode"),l=s==="overlay";if(!i){var u=e(t+".bgcolor",l?r:void 0);e(t+".fgcolor",l?wJ.contrast(u):r)}e(t+".fgopacity",l?.5:1)}};Us.coerceHoverinfo=function(e,t,r){var i=t._module.attributes,a=i.hoverinfo?i:xJ,s=a.hoverinfo,l;if(r._dataLength===1){var u=s.dflt==="all"?s.flags.slice():s.dflt.split("+");u.splice(u.indexOf("name"),1),l=u.join("+")}return Us.coerce(e,t,a,"hoverinfo",l)};Us.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var r=e.marker.opacity;if(r!==void 0){var i,a;!Cf(r)&&!e.selected&&!e.unselected&&(i=r,a=TJ*r),t("selected.marker.opacity",i),t("unselected.marker.opacity",a)}}};function A_(e,t){var r=Us.valObjectMeta[t.valType];if(t.arrayOk&&Cf(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var i={},a=i,s={set:function(l){a=l}};return r.coerceFunction(e,s,i,t),a!==i}Us.validate=A_});var hd=he((rge,I8)=>{"use strict";var P8={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},D8={};function z8(e,t){for(var r in e){var i=e[r];i.valType?t[r]=i.dflt:(t[r]||(t[r]={}),z8(i,t[r]))}}z8(P8,D8);I8.exports={configAttributes:P8,dfltConfig:D8}});var hw=he((age,R8)=>{"use strict";var cw=Ka(),MJ=Ia(),Vy=[];R8.exports=function(e,t){if(Vy.indexOf(e)!==-1)return;Vy.push(e);var r=1e3;MJ(t)?r=t:t==="long"&&(r=3e3);var i=cw.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var a=i.selectAll(".notifier-note").data(Vy);function s(l){l.duration(700).style("opacity",0).each("end",function(u){var c=Vy.indexOf(u);c!==-1&&Vy.splice(c,1),cw.select(this).remove()})}a.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(l){var u=cw.select(this);u.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){u.transition().call(s)});for(var c=u.append("p"),v=l.split(/<br\s*\/?>/g),m=0;m<v.length;m++)m&&c.append("br"),c.append("span").text(v[m]);t==="stick"?u.transition().duration(350).style("opacity",1):u.transition().duration(700).style("opacity",1).transition().delay(r).call(s)})}});var Ch=he((ige,F8)=>{"use strict";var k0=hd().dfltConfig,vw=hw(),dw=F8.exports={};dw.log=function(){var e;if(k0.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(k0.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);vw(r.join("<br>"),"long")}};dw.warn=function(){var e;if(k0.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(k0.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);vw(r.join("<br>"),"stick")}};dw.error=function(){var e;if(k0.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(k0.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);vw(r.join("<br>"),"stick")}}});var M_=he((nge,q8)=>{"use strict";q8.exports=function(){}});var pw=he((oge,N8)=>{"use strict";N8.exports=function(t,r){if(r instanceof RegExp){for(var i=r.toString(),a=0;a<t.length;a++)if(t[a]instanceof RegExp&&t[a].toString()===i)return t;t.push(r)}else(r||r===0)&&t.indexOf(r)===-1&&t.push(r);return t}});var O8=he((sge,B8)=>{B8.exports=SJ;function SJ(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var V8=he((lge,U8)=>{U8.exports=kJ;function kJ(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}});var G8=he((uge,H8)=>{H8.exports=CJ;function CJ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var mw=he((fge,Z8)=>{Z8.exports=EJ;function EJ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var W8=he((cge,Y8)=>{Y8.exports=LJ;function LJ(e,t){if(e===t){var r=t[1],i=t[2],a=t[3],s=t[6],l=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=a,e[13]=l,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}});var j8=he((hge,X8)=>{X8.exports=PJ;function PJ(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],v=t[7],m=t[8],_=t[9],T=t[10],M=t[11],k=t[12],L=t[13],E=t[14],I=t[15],R=r*u-i*l,N=r*c-a*l,z=r*v-s*l,B=i*c-a*u,H=i*v-s*u,V=a*v-s*c,Y=m*L-_*k,J=m*E-T*k,re=m*I-M*k,ne=_*E-T*L,oe=_*I-M*L,ue=T*I-M*E,me=R*ue-N*oe+z*ne+B*re-H*J+V*Y;return me?(me=1/me,e[0]=(u*ue-c*oe+v*ne)*me,e[1]=(a*oe-i*ue-s*ne)*me,e[2]=(L*V-E*H+I*B)*me,e[3]=(T*H-_*V-M*B)*me,e[4]=(c*re-l*ue-v*J)*me,e[5]=(r*ue-a*re+s*J)*me,e[6]=(E*z-k*V-I*N)*me,e[7]=(m*V-T*z+M*N)*me,e[8]=(l*oe-u*re+v*Y)*me,e[9]=(i*re-r*oe-s*Y)*me,e[10]=(k*H-L*z+I*R)*me,e[11]=(_*z-m*H-M*R)*me,e[12]=(u*J-l*ne-c*Y)*me,e[13]=(r*ne-i*J+a*Y)*me,e[14]=(L*N-k*B-E*R)*me,e[15]=(m*B-_*N+T*R)*me,e):null}});var K8=he((vge,J8)=>{J8.exports=DJ;function DJ(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],v=t[7],m=t[8],_=t[9],T=t[10],M=t[11],k=t[12],L=t[13],E=t[14],I=t[15];return e[0]=u*(T*I-M*E)-_*(c*I-v*E)+L*(c*M-v*T),e[1]=-(i*(T*I-M*E)-_*(a*I-s*E)+L*(a*M-s*T)),e[2]=i*(c*I-v*E)-u*(a*I-s*E)+L*(a*v-s*c),e[3]=-(i*(c*M-v*T)-u*(a*M-s*T)+_*(a*v-s*c)),e[4]=-(l*(T*I-M*E)-m*(c*I-v*E)+k*(c*M-v*T)),e[5]=r*(T*I-M*E)-m*(a*I-s*E)+k*(a*M-s*T),e[6]=-(r*(c*I-v*E)-l*(a*I-s*E)+k*(a*v-s*c)),e[7]=r*(c*M-v*T)-l*(a*M-s*T)+m*(a*v-s*c),e[8]=l*(_*I-M*L)-m*(u*I-v*L)+k*(u*M-v*_),e[9]=-(r*(_*I-M*L)-m*(i*I-s*L)+k*(i*M-s*_)),e[10]=r*(u*I-v*L)-l*(i*I-s*L)+k*(i*v-s*u),e[11]=-(r*(u*M-v*_)-l*(i*M-s*_)+m*(i*v-s*u)),e[12]=-(l*(_*E-T*L)-m*(u*E-c*L)+k*(u*T-c*_)),e[13]=r*(_*E-T*L)-m*(i*E-a*L)+k*(i*T-a*_),e[14]=-(r*(u*E-c*L)-l*(i*E-a*L)+k*(i*c-a*u)),e[15]=r*(u*T-c*_)-l*(i*T-a*_)+m*(i*c-a*u),e}});var $8=he((dge,Q8)=>{Q8.exports=zJ;function zJ(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],v=e[8],m=e[9],_=e[10],T=e[11],M=e[12],k=e[13],L=e[14],E=e[15],I=t*l-r*s,R=t*u-i*s,N=t*c-a*s,z=r*u-i*l,B=r*c-a*l,H=i*c-a*u,V=v*k-m*M,Y=v*L-_*M,J=v*E-T*M,re=m*L-_*k,ne=m*E-T*k,oe=_*E-T*L;return I*oe-R*ne+N*re+z*J-B*Y+H*V}});var tS=he((pge,eS)=>{eS.exports=IJ;function IJ(e,t,r){var i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],v=t[6],m=t[7],_=t[8],T=t[9],M=t[10],k=t[11],L=t[12],E=t[13],I=t[14],R=t[15],N=r[0],z=r[1],B=r[2],H=r[3];return e[0]=N*i+z*u+B*_+H*L,e[1]=N*a+z*c+B*T+H*E,e[2]=N*s+z*v+B*M+H*I,e[3]=N*l+z*m+B*k+H*R,N=r[4],z=r[5],B=r[6],H=r[7],e[4]=N*i+z*u+B*_+H*L,e[5]=N*a+z*c+B*T+H*E,e[6]=N*s+z*v+B*M+H*I,e[7]=N*l+z*m+B*k+H*R,N=r[8],z=r[9],B=r[10],H=r[11],e[8]=N*i+z*u+B*_+H*L,e[9]=N*a+z*c+B*T+H*E,e[10]=N*s+z*v+B*M+H*I,e[11]=N*l+z*m+B*k+H*R,N=r[12],z=r[13],B=r[14],H=r[15],e[12]=N*i+z*u+B*_+H*L,e[13]=N*a+z*c+B*T+H*E,e[14]=N*s+z*v+B*M+H*I,e[15]=N*l+z*m+B*k+H*R,e}});var aS=he((mge,rS)=>{rS.exports=RJ;function RJ(e,t,r){var i=r[0],a=r[1],s=r[2],l,u,c,v,m,_,T,M,k,L,E,I;return t===e?(e[12]=t[0]*i+t[4]*a+t[8]*s+t[12],e[13]=t[1]*i+t[5]*a+t[9]*s+t[13],e[14]=t[2]*i+t[6]*a+t[10]*s+t[14],e[15]=t[3]*i+t[7]*a+t[11]*s+t[15]):(l=t[0],u=t[1],c=t[2],v=t[3],m=t[4],_=t[5],T=t[6],M=t[7],k=t[8],L=t[9],E=t[10],I=t[11],e[0]=l,e[1]=u,e[2]=c,e[3]=v,e[4]=m,e[5]=_,e[6]=T,e[7]=M,e[8]=k,e[9]=L,e[10]=E,e[11]=I,e[12]=l*i+m*a+k*s+t[12],e[13]=u*i+_*a+L*s+t[13],e[14]=c*i+T*a+E*s+t[14],e[15]=v*i+M*a+I*s+t[15]),e}});var nS=he((yge,iS)=>{iS.exports=FJ;function FJ(e,t,r){var i=r[0],a=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var sS=he((gge,oS)=>{oS.exports=qJ;function qJ(e,t,r,i){var a=i[0],s=i[1],l=i[2],u=Math.sqrt(a*a+s*s+l*l),c,v,m,_,T,M,k,L,E,I,R,N,z,B,H,V,Y,J,re,ne,oe,ue,me,Se;return Math.abs(u)<1e-6?null:(u=1/u,a*=u,s*=u,l*=u,c=Math.sin(r),v=Math.cos(r),m=1-v,_=t[0],T=t[1],M=t[2],k=t[3],L=t[4],E=t[5],I=t[6],R=t[7],N=t[8],z=t[9],B=t[10],H=t[11],V=a*a*m+v,Y=s*a*m+l*c,J=l*a*m-s*c,re=a*s*m-l*c,ne=s*s*m+v,oe=l*s*m+a*c,ue=a*l*m+s*c,me=s*l*m-a*c,Se=l*l*m+v,e[0]=_*V+L*Y+N*J,e[1]=T*V+E*Y+z*J,e[2]=M*V+I*Y+B*J,e[3]=k*V+R*Y+H*J,e[4]=_*re+L*ne+N*oe,e[5]=T*re+E*ne+z*oe,e[6]=M*re+I*ne+B*oe,e[7]=k*re+R*ne+H*oe,e[8]=_*ue+L*me+N*Se,e[9]=T*ue+E*me+z*Se,e[10]=M*ue+I*me+B*Se,e[11]=k*ue+R*me+H*Se,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}});var uS=he((_ge,lS)=>{lS.exports=NJ;function NJ(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[4],l=t[5],u=t[6],c=t[7],v=t[8],m=t[9],_=t[10],T=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+v*i,e[5]=l*a+m*i,e[6]=u*a+_*i,e[7]=c*a+T*i,e[8]=v*a-s*i,e[9]=m*a-l*i,e[10]=_*a-u*i,e[11]=T*a-c*i,e}});var cS=he((xge,fS)=>{fS.exports=BJ;function BJ(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[0],l=t[1],u=t[2],c=t[3],v=t[8],m=t[9],_=t[10],T=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-v*i,e[1]=l*a-m*i,e[2]=u*a-_*i,e[3]=c*a-T*i,e[8]=s*i+v*a,e[9]=l*i+m*a,e[10]=u*i+_*a,e[11]=c*i+T*a,e}});var vS=he((bge,hS)=>{hS.exports=OJ;function OJ(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[0],l=t[1],u=t[2],c=t[3],v=t[4],m=t[5],_=t[6],T=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+v*i,e[1]=l*a+m*i,e[2]=u*a+_*i,e[3]=c*a+T*i,e[4]=v*a-s*i,e[5]=m*a-l*i,e[6]=_*a-u*i,e[7]=T*a-c*i,e}});var pS=he((wge,dS)=>{dS.exports=UJ;function UJ(e,t,r){var i,a,s,l=r[0],u=r[1],c=r[2],v=Math.sqrt(l*l+u*u+c*c);return Math.abs(v)<1e-6?null:(v=1/v,l*=v,u*=v,c*=v,i=Math.sin(t),a=Math.cos(t),s=1-a,e[0]=l*l*s+a,e[1]=u*l*s+c*i,e[2]=c*l*s-u*i,e[3]=0,e[4]=l*u*s-c*i,e[5]=u*u*s+a,e[6]=c*u*s+l*i,e[7]=0,e[8]=l*c*s+u*i,e[9]=u*c*s-l*i,e[10]=c*c*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}});var yS=he((Tge,mS)=>{mS.exports=VJ;function VJ(e,t,r){var i=t[0],a=t[1],s=t[2],l=t[3],u=i+i,c=a+a,v=s+s,m=i*u,_=i*c,T=i*v,M=a*c,k=a*v,L=s*v,E=l*u,I=l*c,R=l*v;return e[0]=1-(M+L),e[1]=_+R,e[2]=T-I,e[3]=0,e[4]=_-R,e[5]=1-(m+L),e[6]=k+E,e[7]=0,e[8]=T+I,e[9]=k-E,e[10]=1-(m+M),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}});var _S=he((Age,gS)=>{gS.exports=HJ;function HJ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var bS=he((Mge,xS)=>{xS.exports=GJ;function GJ(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}});var TS=he((Sge,wS)=>{wS.exports=ZJ;function ZJ(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var MS=he((kge,AS)=>{AS.exports=YJ;function YJ(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var kS=he((Cge,SS)=>{SS.exports=WJ;function WJ(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var yw=he((Ege,CS)=>{CS.exports=XJ;function XJ(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=r+r,u=i+i,c=a+a,v=r*l,m=i*l,_=i*u,T=a*l,M=a*u,k=a*c,L=s*l,E=s*u,I=s*c;return e[0]=1-_-k,e[1]=m+I,e[2]=T-E,e[3]=0,e[4]=m-I,e[5]=1-v-k,e[6]=M+L,e[7]=0,e[8]=T+E,e[9]=M-L,e[10]=1-v-_,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var LS=he((Lge,ES)=>{ES.exports=jJ;function jJ(e,t,r,i,a,s,l){var u=1/(r-t),c=1/(a-i),v=1/(s-l);return e[0]=s*2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*c,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(a+i)*c,e[10]=(l+s)*v,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*s*2*v,e[15]=0,e}});var DS=he((Pge,PS)=>{PS.exports=JJ;function JJ(e,t,r,i,a){var s=1/Math.tan(t/2),l=1/(i-a);return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*i*l,e[15]=0,e}});var IS=he((Dge,zS)=>{zS.exports=KJ;function KJ(e,t,r,i){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),c=2/(l+u),v=2/(a+s);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=-((l-u)*c*.5),e[9]=(a-s)*v*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}});var FS=he((zge,RS)=>{RS.exports=QJ;function QJ(e,t,r,i,a,s,l){var u=1/(t-r),c=1/(i-a),v=1/(s-l);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*v,e[11]=0,e[12]=(t+r)*u,e[13]=(a+i)*c,e[14]=(l+s)*v,e[15]=1,e}});var NS=he((Ige,qS)=>{var $J=mw();qS.exports=eK;function eK(e,t,r,i){var a,s,l,u,c,v,m,_,T,M,k=t[0],L=t[1],E=t[2],I=i[0],R=i[1],N=i[2],z=r[0],B=r[1],H=r[2];return Math.abs(k-z)<1e-6&&Math.abs(L-B)<1e-6&&Math.abs(E-H)<1e-6?$J(e):(m=k-z,_=L-B,T=E-H,M=1/Math.sqrt(m*m+_*_+T*T),m*=M,_*=M,T*=M,a=R*T-N*_,s=N*m-I*T,l=I*_-R*m,M=Math.sqrt(a*a+s*s+l*l),M?(M=1/M,a*=M,s*=M,l*=M):(a=0,s=0,l=0),u=_*l-T*s,c=T*a-m*l,v=m*s-_*a,M=Math.sqrt(u*u+c*c+v*v),M?(M=1/M,u*=M,c*=M,v*=M):(u=0,c=0,v=0),e[0]=a,e[1]=u,e[2]=m,e[3]=0,e[4]=s,e[5]=c,e[6]=_,e[7]=0,e[8]=l,e[9]=v,e[10]=T,e[11]=0,e[12]=-(a*k+s*L+l*E),e[13]=-(u*k+c*L+v*E),e[14]=-(m*k+_*L+T*E),e[15]=1,e)}});var OS=he((Rge,BS)=>{BS.exports=tK;function tK(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}});var gw=he((Fge,US)=>{US.exports={create:O8(),clone:V8(),copy:G8(),identity:mw(),transpose:W8(),invert:j8(),adjoint:K8(),determinant:$8(),multiply:tS(),translate:aS(),scale:nS(),rotate:sS(),rotateX:uS(),rotateY:cS(),rotateZ:vS(),fromRotation:pS(),fromRotationTranslation:yS(),fromScaling:_S(),fromTranslation:bS(),fromXRotation:TS(),fromYRotation:MS(),fromZRotation:kS(),fromQuat:yw(),frustum:LS(),perspective:DS(),perspectiveFromFieldOfView:IS(),ortho:FS(),lookAt:NS(),str:OS()}});var S_=he(kn=>{"use strict";var rK=gw();kn.init2dArray=function(e,t){for(var r=new Array(e),i=0;i<e;i++)r[i]=new Array(t);return r};kn.transposeRagged=function(e){var t=0,r=e.length,i,a;for(i=0;i<r;i++)t=Math.max(t,e[i].length);var s=new Array(t);for(i=0;i<t;i++)for(s[i]=new Array(r),a=0;a<r;a++)s[i][a]=e[a][i];return s};kn.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length,i,a;if(e[0].length)for(i=new Array(r),a=0;a<r;a++)i[a]=kn.dot(e[a],t);else if(t[0].length){var s=kn.transposeRagged(t);for(i=new Array(s.length),a=0;a<s.length;a++)i[a]=kn.dot(e,s[a])}else for(i=0,a=0;a<r;a++)i+=e[a]*t[a];return i};kn.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};kn.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};kn.rotationXYMatrix=function(e,t,r){return kn.dot(kn.dot(kn.translationMatrix(t,r),kn.rotationMatrix(e)),kn.translationMatrix(-t,-r))};kn.apply3DTransform=function(e){return function(){var t=arguments,r=arguments.length===1?t[0]:[t[0],t[1],t[2]||0];return kn.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}};kn.apply2DTransform=function(e){return function(){var t=arguments;t.length===3&&(t=t[0]);var r=arguments.length===1?t[0]:[t[0],t[1]];return kn.dot(e,[r[0],r[1],1]).slice(0,2)}};kn.apply2DTransform2=function(e){var t=kn.apply2DTransform(e);return function(r){return t(r.slice(0,2)).concat(t(r.slice(2,4)))}};kn.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};kn.inverseTransformMatrix=function(e){var t=[];return rK.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}});var Hy=he((Nge,YS)=>{"use strict";var aK=Ka(),iK=Ch(),nK=S_(),oK=gw();function sK(e){var t;if(typeof e=="string"){if(t=document.getElementById(e),t===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}else if(e==null)throw new Error("DOM element provided is null or undefined");return e}function lK(e){var t=aK.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function VS(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function uK(e,t){HS("global",e,t)}function HS(e,t,r){var i="plotly.js-style-"+e,a=document.getElementById(i);a||(a=document.createElement("style"),a.setAttribute("id",i),a.appendChild(document.createTextNode("")),document.head.appendChild(a));var s=a.sheet;s.insertRule?s.insertRule(t+"{"+r+"}",0):s.addRule?s.addRule(t,r,0):iK.warn("addStyleRule failed")}function fK(e){var t="plotly.js-style-"+e,r=document.getElementById(t);r&&VS(r)}function cK(e){var t=ZS(e),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(i){var a=GS(i);if(a){var s=nK.convertCssMatrix(a);r=oK.multiply(r,r,s)}}),r}function GS(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return r==="none"?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function ZS(e){for(var t=[];hK(e);)t.push(e),e=e.parentNode,typeof ShadowRoot=="function"&&e instanceof ShadowRoot&&(e=e.host);return t}function hK(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function vK(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}YS.exports={getGraphDiv:sK,isPlotDiv:lK,removeElement:VS,addStyleRule:uK,addRelatedStyleRule:HS,deleteRelatedStyleRule:fK,getFullTransformMatrix:cK,getElementTransformMatrix:GS,getElementAndAncestors:ZS,equalDomRects:vK}});var Gy=he((Bge,WS)=>{"use strict";WS.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}});var ul=he((Oge,e9)=>{"use strict";var jS=hn().extendFlat,dK=dc(),JS={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},KS={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},pK=JS.flags.slice().concat(["fullReplot"]),mK=KS.flags.slice().concat("layoutReplot");e9.exports={traces:JS,layout:KS,traceFlags:function(){return XS(pK)},layoutFlags:function(){return XS(mK)},update:function(e,t){var r=t.editType;if(r&&r!=="none")for(var i=r.split("+"),a=0;a<i.length;a++)e[i[a]]=!0},overrideAll:QS};function XS(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!1;return t}function QS(e,t,r){var i=jS({},e);for(var a in i){var s=i[a];dK(s)&&(i[a]=$S(s,t,r,a))}return r==="from-root"&&(i.editType=t),i}function $S(e,t,r,i){if(e.valType){var a=jS({},e);if(a.editType=t,Array.isArray(e.items)){a.items=new Array(e.items.length);for(var s=0;s<e.items.length;s++)a.items[s]=$S(e.items[s],t,"from-root")}return a}else return QS(e,t,i.charAt(0)==="_"?"nested":"from-root")}});var pc=he(_w=>{"use strict";_w.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};_w.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}});var xw=he((Vge,t9)=>{"use strict";t9.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}});var Wl=he(k_=>{"use strict";var r9=xw(),Hge=r9.FORMAT_LINK,Gge=r9.DATE_FORMAT_LINK;function bw(e){var t=e.description?" "+e.description:"",r=e.keys||[];if(r.length>0){for(var i=[],a=0;a<r.length;a++)i[a]="`"+r[a]+"`";t=t+"Finally, the template string has access to ",r.length===1?t=t+"variable "+i[0]:t=t+"variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return t}k_.hovertemplateAttrs=function(e,t){e=e||{},t=t||{};var r=bw(t),i={valType:"string",dflt:"",editType:e.editType||"none"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};k_.texttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=bw(t),i={valType:"string",dflt:"",editType:e.editType||"calc"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};k_.shapeTexttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=e.newshape?"new ":"",i=bw(t),a={valType:"string",dflt:"",editType:e.editType||"arraydraw"};return a}});var L_=he((Yge,l9)=>{"use strict";function Eh(e,t){return t?t.d2l(e):e}function a9(e,t){return t?t.l2d(e):e}function yK(e){return e.x0}function gK(e){return e.x1}function _K(e){return e.y0}function xK(e){return e.y1}function i9(e){return e.x0shift||0}function n9(e){return e.x1shift||0}function o9(e){return e.y0shift||0}function s9(e){return e.y1shift||0}function C_(e,t){return Eh(e.x1,t)+n9(e)-Eh(e.x0,t)-i9(e)}function E_(e,t,r){return Eh(e.y1,r)+s9(e)-Eh(e.y0,r)-o9(e)}function bK(e,t){return Math.abs(C_(e,t))}function wK(e,t,r){return Math.abs(E_(e,t,r))}function TK(e,t,r){return e.type!=="line"?void 0:Math.sqrt(Math.pow(C_(e,t),2)+Math.pow(E_(e,t,r),2))}function AK(e,t){return a9((Eh(e.x1,t)+n9(e)+Eh(e.x0,t)+i9(e))/2,t)}function MK(e,t,r){return a9((Eh(e.y1,r)+s9(e)+Eh(e.y0,r)+o9(e))/2,r)}function SK(e,t,r){return e.type!=="line"?void 0:E_(e,t,r)/C_(e,t)}l9.exports={x0:yK,x1:gK,y0:_K,y1:xK,slope:SK,dx:C_,dy:E_,width:bK,height:wK,length:TK,xcenter:AK,ycenter:MK}});var c9=he((Wge,f9)=>{"use strict";var kK=ul().overrideAll,vd=gs(),u9=No(),CK=pc().dash,Lh=hn().extendFlat,EK=Wl().shapeTexttemplateAttrs,LK=L_();f9.exports=kK({newshape:{visible:Lh({},vd.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:Lh({},vd.legend,{}),legendgroup:Lh({},vd.legendgroup,{}),legendgrouptitle:{text:Lh({},vd.legendgrouptitle.text,{}),font:u9({})},legendrank:Lh({},vd.legendrank,{}),legendwidth:Lh({},vd.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:Lh({},CK,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:Lh({},vd.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:EK({newshape:!0},{keys:Object.keys(LK)}),font:u9({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")});var v9=he((Xge,h9)=>{"use strict";var PK=pc().dash,DK=hn().extendFlat;h9.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:DK({},PK,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}});var P_=he((jge,d9)=>{"use strict";d9.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}});var C0=he((Jge,g9)=>{"use strict";var D_=No(),zK=Gy(),z_=kf(),p9=c9(),m9=v9(),IK=P_(),y9=hn().extendFlat,I_=D_({editType:"calc"});I_.family.dflt='"Open Sans", verdana, arial, sans-serif';I_.size.dflt=12;I_.color.dflt=z_.defaultLine;g9.exports={font:I_,title:{text:{valType:"string",editType:"layoutstyle"},font:D_({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:D_({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:y9(IK({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:z_.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:z_.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:z_.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:p9.newshape,activeshape:p9.activeshape,newselection:m9.newselection,activeselection:m9.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:y9({},zK.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:D_({editType:"layoutstyle"})}}});var _9=F7(()=>{});var RK={};var x9=F7(()=>{_9()});var sa=he(ya=>{"use strict";var E0=Ch(),b9=M_(),w9=pw(),FK=dc(),qK=Hy().addStyleRule,T9=hn(),NK=gs(),BK=C0(),OK=T9.extendFlat,R_=T9.extendDeepAll;ya.modules={};ya.allCategories={};ya.allTypes=[];ya.subplotsRegistry={};ya.transformsRegistry={};ya.componentsRegistry={};ya.layoutArrayContainers=[];ya.layoutArrayRegexes=[];ya.traceLayoutAttributes={};ya.localeRegistry={};ya.apiMethodRegistry={};ya.collectableSubplotTypes=null;ya.register=function(t){if(ya.collectableSubplotTypes=null,t)t&&!Array.isArray(t)&&(t=[t]);else throw new Error("No argument passed to Plotly.register.");for(var r=0;r<t.length;r++){var i=t[r];if(!i)throw new Error("Invalid module was attempted to be registered!");switch(i.moduleType){case"trace":UK(i);break;case"transform":GK(i);break;case"component":HK(i);break;case"locale":ZK(i);break;case"apiMethod":var a=i.name;ya.apiMethodRegistry[a]=i.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};ya.getModule=function(e){var t=ya.modules[C9(e)];return t?t._module:!1};ya.traceIs=function(e,t){if(e=C9(e),e==="various")return!1;var r=ya.modules[e];return r||(e&&E0.log("Unrecognized trace type "+e+"."),r=ya.modules[NK.type.dflt]),!!r.categories[t]};ya.getTransformIndices=function(e,t){for(var r=[],i=e.transforms||[],a=0;a<i.length;a++)i[a].type===t&&r.push(a);return r};ya.hasTransform=function(e,t){for(var r=e.transforms||[],i=0;i<r.length;i++)if(r[i].type===t)return!0;return!1};ya.getComponentMethod=function(e,t){var r=ya.componentsRegistry[e];return r&&r[t]||b9};ya.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return ya.apiMethodRegistry[e].apply(null,t)};function UK(e){var t=e.name,r=e.categories,i=e.meta;if(ya.modules[t]){E0.log("Type "+t+" already registered");return}ya.subplotsRegistry[e.basePlotModule.name]||VK(e.basePlotModule);for(var a={},s=0;s<r.length;s++)a[r[s]]=!0,ya.allCategories[r[s]]=!0;ya.modules[t]={_module:e,categories:a},i&&Object.keys(i).length&&(ya.modules[t].meta=i),ya.allTypes.push(t);for(var l in ya.componentsRegistry)M9(l,t);e.layoutAttributes&&OK(ya.traceLayoutAttributes,e.layoutAttributes);var u=e.basePlotModule,c=u.name;if(c==="mapbox"){var v=u.constants.styleRules;for(var m in v)qK(".js-plotly-plot .plotly .mapboxgl-"+m,v[m])}c==="map"&&(x9(),Zj(RK)),(c==="geo"||c==="mapbox"||c==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function VK(e){var t=e.name;if(ya.subplotsRegistry[t]){E0.log("Plot type "+t+" already registered.");return}A9(e),ya.subplotsRegistry[t]=e;for(var r in ya.componentsRegistry)k9(r,e.name)}function HK(e){if(typeof e.name!="string")throw new Error("Component module *name* must be a string.");var t=e.name;ya.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&w9(ya.layoutArrayContainers,t),A9(e));for(var r in ya.modules)M9(t,r);for(var i in ya.subplotsRegistry)k9(t,i);for(var a in ya.transformsRegistry)S9(t,a);e.schema&&e.schema.layout&&R_(BK,e.schema.layout)}function GK(e){if(typeof e.name!="string")throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,r=typeof e.transform=="function",i=typeof e.calcTransform=="function";if(!r&&!i)throw new Error(t+" is missing a *transform* or *calcTransform* method.");r&&i&&E0.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),FK(e.attributes)||E0.log(t+" registered without an *attributes* object."),typeof e.supplyDefaults!="function"&&E0.log(t+" registered without a *supplyDefaults* method."),ya.transformsRegistry[e.name]=e;for(var a in ya.componentsRegistry)S9(a,e.name)}function ZK(e){var t=e.name,r=t.split("-")[0],i=e.dictionary,a=e.format,s=i&&Object.keys(i).length,l=a&&Object.keys(a).length,u=ya.localeRegistry,c=u[t];if(c||(u[t]=c={}),r!==t){var v=u[r];v||(u[r]=v={}),s&&v.dictionary===c.dictionary&&(v.dictionary=i),l&&v.format===c.format&&(v.format=a)}s&&(c.dictionary=i),l&&(c.format=a)}function A9(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var r=0;r<t.length;r++)w9(ya.layoutArrayRegexes,t[r])}}function M9(e,t){var r=ya.componentsRegistry[e].schema;if(!(!r||!r.traces)){var i=r.traces[t];i&&R_(ya.modules[t]._module.attributes,i)}}function S9(e,t){var r=ya.componentsRegistry[e].schema;if(!(!r||!r.transforms)){var i=r.transforms[t];i&&R_(ya.transformsRegistry[t].attributes,i)}}function k9(e,t){var r=ya.componentsRegistry[e].schema;if(!(!r||!r.subplots)){var i=ya.subplotsRegistry[t],a=i.layoutAttributes,s=i.attr==="subplot"?i.name:i.attr;Array.isArray(s)&&(s=s[0]);var l=r.subplots[s];a&&l&&R_(a,l)}}function C9(e){return typeof e=="object"&&(e=e.type),e}});var q9=he(Cn=>{"use strict";var YK=b0().timeFormat,R9=Ia(),ww=Ch(),Dh=T0().mod,D0=Bi(),Xl=D0.BADNUM,Vs=D0.ONEDAY,Zy=D0.ONEHOUR,Ph=D0.ONEMIN,P0=D0.ONESEC,Yy=D0.EPOCHJD,mc=sa(),E9=b0().utcFormat,WK=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,XK=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,L9=new Date().getFullYear()-70;function yc(e){return e&&mc.componentsRegistry.calendars&&typeof e=="string"&&e!=="gregorian"}Cn.dateTick0=function(e,t){var r=jK(e,!!t);if(t<2)return r;var i=Cn.dateTime2ms(r,e);return i+=Vs*(t-1),Cn.ms2DateTime(i,0,e)};function jK(e,t){return yc(e)?t?mc.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:mc.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}Cn.dfltRange=function(e){return yc(e)?mc.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]};Cn.isJSDate=function(e){return typeof e=="object"&&e!==null&&typeof e.getTime=="function"};var q_,N_;Cn.dateTime2ms=function(e,t){if(Cn.isJSDate(e)){var r=e.getTimezoneOffset()*Ph,i=(e.getUTCMinutes()-e.getMinutes())*Ph+(e.getUTCSeconds()-e.getSeconds())*P0+(e.getUTCMilliseconds()-e.getMilliseconds());if(i){var a=3*Ph;r=r-a/2+Dh(i-r+a/2,a)}return e=Number(e)-r,e>=q_&&e<=N_?e:Xl}if(typeof e!="string"&&typeof e!="number")return Xl;e=String(e);var s=yc(t),l=e.charAt(0);s&&(l==="G"||l==="g")&&(e=e.substr(1),t="");var u=s&&t.substr(0,7)==="chinese",c=e.match(u?XK:WK);if(!c)return Xl;var v=c[1],m=c[3]||"1",_=Number(c[5]||1),T=Number(c[7]||0),M=Number(c[9]||0),k=Number(c[11]||0);if(s){if(v.length===2)return Xl;v=Number(v);var L;try{var E=mc.getComponentMethod("calendars","getCal")(t);if(u){var I=m.charAt(m.length-1)==="i";m=parseInt(m,10),L=E.newDate(v,E.toMonthIndex(v,m,I),_)}else L=E.newDate(v,Number(m),_)}catch(N){return Xl}return L?(L.toJD()-Yy)*Vs+T*Zy+M*Ph+k*P0:Xl}v.length===2?v=(Number(v)+2e3-L9)%100+L9:v=Number(v),m-=1;var R=new Date(Date.UTC(2e3,m,_,T,M));return R.setUTCFullYear(v),R.getUTCMonth()!==m||R.getUTCDate()!==_?Xl:R.getTime()+k*P0};q_=Cn.MIN_MS=Cn.dateTime2ms("-9999");N_=Cn.MAX_MS=Cn.dateTime2ms("9999-12-31 23:59:59.9999");Cn.isDateTime=function(e,t){return Cn.dateTime2ms(e,t)!==Xl};function L0(e,t){return String(e+Math.pow(10,t)).substr(1)}var F_=90*Vs,P9=3*Zy,D9=5*Ph;Cn.ms2DateTime=function(e,t,r){if(typeof e!="number"||!(e>=q_&&e<=N_))return Xl;t||(t=0);var i=Math.floor(Dh(e+.05,1)*10),a=Math.round(e-i/10),s,l,u,c,v,m;if(yc(r)){var _=Math.floor(a/Vs)+Yy,T=Math.floor(Dh(e,Vs));try{s=mc.getComponentMethod("calendars","getCal")(r).fromJD(_).formatDate("yyyy-mm-dd")}catch(M){s=E9("G%Y-%m-%d")(new Date(a))}if(s.charAt(0)==="-")for(;s.length<11;)s="-0"+s.substr(1);else for(;s.length<10;)s="0"+s;l=t<F_?Math.floor(T/Zy):0,u=t<F_?Math.floor(T%Zy/Ph):0,c=t<P9?Math.floor(T%Ph/P0):0,v=t<D9?T%P0*10+i:0}else m=new Date(a),s=E9("%Y-%m-%d")(m),l=t<F_?m.getUTCHours():0,u=t<F_?m.getUTCMinutes():0,c=t<P9?m.getUTCSeconds():0,v=t<D9?m.getUTCMilliseconds()*10+i:0;return F9(s,l,u,c,v)};Cn.ms2DateTimeLocal=function(e){if(!(e>=q_+Vs&&e<=N_-Vs))return Xl;var t=Math.floor(Dh(e+.05,1)*10),r=new Date(Math.round(e-t/10)),i=YK("%Y-%m-%d")(r),a=r.getHours(),s=r.getMinutes(),l=r.getSeconds(),u=r.getUTCMilliseconds()*10+t;return F9(i,a,s,l,u)};function F9(e,t,r,i,a){if((t||r||i||a)&&(e+=" "+L0(t,2)+":"+L0(r,2),(i||a)&&(e+=":"+L0(i,2),a))){for(var s=4;a%10===0;)s-=1,a/=10;e+="."+L0(a,s)}return e}Cn.cleanDate=function(e,t,r){if(e===Xl)return t;if(Cn.isJSDate(e)||typeof e=="number"&&isFinite(e)){if(yc(r))return ww.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(e=Cn.ms2DateTimeLocal(+e),!e&&t!==void 0)return t}else if(!Cn.isDateTime(e,r))return ww.error("unrecognized date",e),t;return e};var JK=/%\d?f/g,KK=/%h/g,QK={1:"1",2:"1",3:"2",4:"2"};function z9(e,t,r,i){e=e.replace(JK,function(s){var l=Math.min(+s.charAt(1)||6,6),u=(t/1e3%1+2).toFixed(l).substr(2).replace(/0+$/,"")||"0";return u});var a=new Date(Math.floor(t+.05));if(e=e.replace(KK,function(){return QK[r("%q")(a)]}),yc(i))try{e=mc.getComponentMethod("calendars","worldCalFmt")(e,t,i)}catch(s){return"Invalid"}return r(e)(a)}var $K=[59,59.9,59.99,59.999,59.9999];function eQ(e,t){var r=Dh(e+.05,Vs),i=L0(Math.floor(r/Zy),2)+":"+L0(Dh(Math.floor(r/Ph),60),2);if(t!=="M"){R9(t)||(t=0);var a=Math.min(Dh(e/P0,60),$K[t]),s=(100+a).toFixed(t).substr(1);t>0&&(s=s.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+s}return i}Cn.formatDate=function(e,t,r,i,a,s){if(a=yc(a)&&a,!t)if(r==="y")t=s.year;else if(r==="m")t=s.month;else if(r==="d")t=s.dayMonth+`
`+s.year;else return eQ(e,r)+`
`+z9(s.dayMonthYear,e,i,a);return z9(t,e,i,a)};var I9=3*Vs;Cn.incrementMonth=function(e,t,r){r=yc(r)&&r;var i=Dh(e,Vs);if(e=Math.round(e-i),r)try{var a=Math.round(e/Vs)+Yy,s=mc.getComponentMethod("calendars","getCal")(r),l=s.fromJD(a);return t%12?s.add(l,t,"m"):s.add(l,t/12,"y"),(l.toJD()-Yy)*Vs+i}catch(c){ww.error("invalid ms "+e+" in calendar "+r)}var u=new Date(e+I9);return u.setUTCMonth(u.getUTCMonth()+t)+i-I9};Cn.findExactDates=function(e,t){for(var r=0,i=0,a=0,s=0,l,u,c=yc(t)&&mc.getComponentMethod("calendars","getCal")(t),v=0;v<e.length;v++){if(u=e[v],!R9(u)){s++;continue}if(!(u%Vs))if(c)try{l=c.fromJD(u/Vs+Yy),l.day()===1?l.month()===1?r++:i++:a++}catch(_){}else l=new Date(u),l.getUTCDate()===1?l.getUTCMonth()===0?r++:i++:a++}i+=r,a+=i;var m=e.length-s;return{exactYears:r/m,exactMonths:i/m,exactDays:a/m}}});var B_=he((r1e,N9)=>{"use strict";N9.exports=function(t){return t}});var Aw=he(gc=>{"use strict";var tQ=Ia(),rQ=Ch(),aQ=B_(),iQ=Bi().BADNUM,Tw=1e-9;gc.findBin=function(e,t,r){if(tQ(t.start))return r?Math.ceil((e-t.start)/t.size-Tw)-1:Math.floor((e-t.start)/t.size+Tw);var i=0,a=t.length,s=0,l=a>1?(t[a-1]-t[0])/(a-1):1,u,c;for(l>=0?c=r?nQ:oQ:c=r?lQ:sQ,e+=l*Tw*(r?-1:1)*(l>=0?1:-1);i<a&&s++<100;)u=Math.floor((i+a)/2),c(t[u],e)?i=u+1:a=u;return s>90&&rQ.log("Long binary search..."),i-1};function nQ(e,t){return e<t}function oQ(e,t){return e<=t}function sQ(e,t){return e>t}function lQ(e,t){return e>=t}gc.sorterAsc=function(e,t){return e-t};gc.sorterDes=function(e,t){return t-e};gc.distinctVals=function(e){var t=e.slice();t.sort(gc.sorterAsc);var r;for(r=t.length-1;r>-1&&t[r]===iQ;r--);for(var i=t[r]-t[0]||1,a=i/(r||1)/1e4,s=[],l,u=0;u<=r;u++){var c=t[u],v=c-l;l===void 0?(s.push(c),l=c):v>a&&(i=Math.min(i,v),s.push(c),l=c)}return{vals:s,minDiff:i}};gc.roundUp=function(e,t,r){for(var i=0,a=t.length-1,s,l=0,u=r?0:1,c=r?1:0,v=r?Math.ceil:Math.floor;i<a&&l++<100;)s=v((i+a)/2),t[s]<=e?i=s+u:a=s-c;return t[i]};gc.sort=function(e,t){for(var r=0,i=0,a=1;a<e.length;a++){var s=t(e[a],e[a-1]);if(s<0?r=1:s>0&&(i=1),r&&i)return e.sort(t)}return i?e:e.reverse()};gc.findIndexOfMin=function(e,t){t=t||aQ;for(var r=1/0,i,a=0;a<e.length;a++){var s=t(e[a]);s<r&&(r=s,i=a)}return i}});var O_=he((i1e,B9)=>{"use strict";B9.exports=function(t){return Object.keys(t).sort()}});var O9=he(En=>{"use strict";var Wy=Ia(),uQ=ll().isArrayOrTypedArray;En.aggNums=function(e,t,r,i){var a,s;if((!i||i>r.length)&&(i=r.length),Wy(t)||(t=!1),uQ(r[0])){for(s=new Array(i),a=0;a<i;a++)s[a]=En.aggNums(e,t,r[a]);r=s}for(a=0;a<i;a++)Wy(t)?Wy(r[a])&&(t=e(+t,+r[a])):t=r[a];return t};En.len=function(e){return En.aggNums(function(t){return t+1},0,e)};En.mean=function(e,t){return t||(t=En.len(e)),En.aggNums(function(r,i){return r+i},0,e)/t};En.geometricMean=function(e,t){return t||(t=En.len(e)),Math.pow(En.aggNums(function(r,i){return r*i},1,e),1/t)};En.midRange=function(e){if(!(e===void 0||e.length===0))return(En.aggNums(Math.max,null,e)+En.aggNums(Math.min,null,e))/2};En.variance=function(e,t,r){return t||(t=En.len(e)),Wy(r)||(r=En.mean(e,t)),En.aggNums(function(i,a){return i+Math.pow(a-r,2)},0,e)/t};En.stdev=function(e,t,r){return Math.sqrt(En.variance(e,t,r))};En.median=function(e){var t=e.slice().sort();return En.interp(t,.5)};En.interp=function(e,t){if(!Wy(t))throw"n should be a finite number";if(t=t*e.length-.5,t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}});var Z9=he((o1e,G9)=>{"use strict";var U9=T0(),Mw=U9.mod,fQ=U9.modHalf,Xy=Math.PI,zh=2*Xy;function cQ(e){return e/180*Xy}function hQ(e){return e/Xy*180}function Sw(e){return Math.abs(e[1]-e[0])>zh-1e-14}function V9(e,t){return fQ(t-e,zh)}function vQ(e,t){return Math.abs(V9(e,t))}function H9(e,t){if(Sw(t))return!0;var r,i;t[0]<t[1]?(r=t[0],i=t[1]):(r=t[1],i=t[0]),r=Mw(r,zh),i=Mw(i,zh),r>i&&(i+=zh);var a=Mw(e,zh),s=a+zh;return a>=r&&a<=i||s>=r&&s<=i}function dQ(e,t,r,i){if(!H9(t,i))return!1;var a,s;return r[0]<r[1]?(a=r[0],s=r[1]):(a=r[1],s=r[0]),e>=a&&e<=s}function kw(e,t,r,i,a,s,l){a=a||0,s=s||0;var u=Sw([r,i]),c,v,m,_,T;u?(c=0,v=Xy,m=zh):r<i?(c=r,m=i):(c=i,m=r),e<t?(_=e,T=t):(_=t,T=e);function M(I,R){return[I*Math.cos(R)+a,s-I*Math.sin(R)]}var k=Math.abs(m-c)<=Xy?0:1;function L(I,R,N){return"A"+[I,I]+" "+[0,k,N]+" "+M(I,R)}var E;return u?_===null?E="M"+M(T,c)+L(T,v,0)+L(T,m,0)+"Z":E="M"+M(_,c)+L(_,v,0)+L(_,m,0)+"ZM"+M(T,c)+L(T,v,1)+L(T,m,1)+"Z":_===null?(E="M"+M(T,c)+L(T,m,0),l&&(E+="L0,0Z")):E="M"+M(_,c)+"L"+M(T,c)+L(T,m,0)+"L"+M(_,m)+L(_,c,1)+"Z",E}function pQ(e,t,r,i,a){return kw(null,e,t,r,i,a,0)}function mQ(e,t,r,i,a){return kw(null,e,t,r,i,a,1)}function yQ(e,t,r,i,a,s){return kw(e,t,r,i,a,s,1)}G9.exports={deg2rad:cQ,rad2deg:hQ,angleDelta:V9,angleDist:vQ,isFullCircle:Sw,isAngleInsideSector:H9,isPtInsideSector:dQ,pathArc:pQ,pathSector:mQ,pathAnnulus:yQ}});var Y9=he(dd=>{"use strict";dd.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};dd.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};dd.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};dd.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};dd.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};dd.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}});var j9=he(pd=>{"use strict";var Cw=T0().mod;pd.segmentsIntersect=X9;function X9(e,t,r,i,a,s,l,u){var c=r-e,v=a-e,m=l-a,_=i-t,T=s-t,M=u-s,k=c*M-m*_;if(k===0)return null;var L=(v*M-m*T)/k,E=(v*_-c*T)/k;return E<0||E>1||L<0||L>1?null:{x:e+c*L,y:t+_*L}}pd.segmentDistance=function(t,r,i,a,s,l,u,c){if(X9(t,r,i,a,s,l,u,c))return 0;var v=i-t,m=a-r,_=u-s,T=c-l,M=v*v+m*m,k=_*_+T*T,L=Math.min(U_(v,m,M,s-t,l-r),U_(v,m,M,u-t,c-r),U_(_,T,k,t-s,r-l),U_(_,T,k,i-s,a-l));return Math.sqrt(L)};function U_(e,t,r,i,a){var s=i*e+a*t;if(s<0)return i*i+a*a;if(s>r){var l=i-e,u=a-t;return l*l+u*u}else{var c=i*t-a*e;return c*c/r}}var V_,Ew,W9;pd.getTextLocation=function(t,r,i,a){if((t!==Ew||a!==W9)&&(V_={},Ew=t,W9=a),V_[i])return V_[i];var s=t.getPointAtLength(Cw(i-a/2,r)),l=t.getPointAtLength(Cw(i+a/2,r)),u=Math.atan((l.y-s.y)/(l.x-s.x)),c=t.getPointAtLength(Cw(i,r)),v=(c.x*4+s.x+l.x)/6,m=(c.y*4+s.y+l.y)/6,_={x:v,y:m,theta:u};return V_[i]=_,_};pd.clearLocationCache=function(){Ew=null};pd.getVisibleSegment=function(t,r,i){var a=r.left,s=r.right,l=r.top,u=r.bottom,c=0,v=t.getTotalLength(),m=v,_,T;function M(L){var E=t.getPointAtLength(L);L===0?_=E:L===v&&(T=E);var I=E.x<a?a-E.x:E.x>s?E.x-s:0,R=E.y<l?l-E.y:E.y>u?E.y-u:0;return Math.sqrt(I*I+R*R)}for(var k=M(c);k;){if(c+=k+i,c>m)return;k=M(c)}for(k=M(m);k;){if(m-=k+i,c>m)return;k=M(m)}return{min:c,max:m,len:m-c,total:v,isClosed:c===0&&m===v&&Math.abs(_.x-T.x)<.1&&Math.abs(_.y-T.y)<.1}};pd.findPointOnPath=function(t,r,i,a){a=a||{};for(var s=a.pathLength||t.getTotalLength(),l=a.tolerance||.001,u=a.iterationLimit||30,c=t.getPointAtLength(0)[i]>t.getPointAtLength(s)[i]?-1:1,v=0,m=0,_=s,T,M,k;v<u;){if(T=(m+_)/2,M=t.getPointAtLength(T),k=M[i]-r,Math.abs(k)<l)return M;c*k>0?_=T:m=T,v++}return M}});var H_=he(jy=>{"use strict";var _c={};jy.throttle=function(t,r,i){var a=_c[t],s=Date.now();if(!a){for(var l in _c)_c[l].ts<s-6e4&&delete _c[l];a=_c[t]={ts:0,timer:null}}J9(a);function u(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(s>a.ts+r){u();return}a.timer=setTimeout(function(){u(),a.timer=null},r)};jy.done=function(e){var t=_c[e];return!t||!t.timer?Promise.resolve():new Promise(function(r){var i=t.onDone;t.onDone=function(){i&&i(),r(),t.onDone=null}})};jy.clear=function(e){if(e)J9(_c[e]),delete _c[e];else for(var t in _c)jy.clear(t)};function J9(e){e&&e.timer!==null&&(clearTimeout(e.timer),e.timer=null)}});var Q9=he((f1e,K9)=>{"use strict";K9.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}});var $9=he((c1e,G_)=>{"use strict";G_.exports=Lw;G_.exports.isMobile=Lw;G_.exports.default=Lw;var gQ=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,_Q=/CrOS/,xQ=/android|ipad|playbook|silk/i;function Lw(e){e||(e={});let t=e.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;let r=gQ.test(t)&&!_Q.test(t)||!!e.tablet&&xQ.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}});var tk=he((h1e,ek)=>{"use strict";var bQ=Ia(),wQ=$9();ek.exports=function(t){var r;if(t&&t.hasOwnProperty("userAgent")?r=t.userAgent:r=TQ(),typeof r!="string")return!0;var i=wQ({ua:{headers:{"user-agent":r}},tablet:!0,featureDetect:!1});if(!i)for(var a=r.split(" "),s=1;s<a.length;s++){var l=a[s];if(l.indexOf("Safari")!==-1)for(var u=s-1;u>-1;u--){var c=a[u];if(c.substr(0,8)==="Version/"){var v=c.substr(8).split(".")[0];if(bQ(v)&&(v=+v),v>=13)return!0}}}return i};function TQ(){var e;return typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),e}});var ak=he((v1e,rk)=>{"use strict";var AQ=Ka();rk.exports=function(t,r,i){var a=t.selectAll("g."+i.replace(/\s/g,".")).data(r,function(l){return l[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",i),a.order();var s=t.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(l){l[0][s]=AQ.select(this)}),a}});var nk=he((d1e,ik)=>{"use strict";var MQ=sa();ik.exports=function(t,r){for(var i=t._context.locale,a=0;a<2;a++){for(var s=t._context.locales,l=0;l<2;l++){var u=(s[i]||{}).dictionary;if(u){var c=u[r];if(c)return c}s=MQ.localeRegistry}var v=i.split("-")[0];if(v===i)break;i=v}return r}});var sk=he((p1e,ok)=>{"use strict";ok.exports=function(t){for(var r={},i=[],a=0,s=0;s<t.length;s++){var l=t[s];r[l]!==1&&(r[l]=1,i[a++]=l)}return i}});var uk=he((m1e,lk)=>{"use strict";lk.exports=function(t){for(var r=CQ(t)?kQ:SQ,i=[],a=0;a<t.length;a++){var s=t[a];r(s)&&i.push(s)}return i};function SQ(e){return e.visible===!0}function kQ(e){var t=e[0].trace;return t.visible===!0&&t._length!==0}function CQ(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}});var ck=he((y1e,fk)=>{"use strict";fk.exports=function(t,r){if(!r)return t;var i=1/Math.abs(r),a=i>1?(i*t+i*r)/i:t+r,s=String(a).length;if(s>16){var l=String(r).length,u=String(t).length;if(s>=u+l){var c=parseFloat(a).toPrecision(12);c.indexOf("e+")===-1&&(a=+c)}}return a}});var vk=he((g1e,hk)=>{"use strict";var EQ=Ia(),LQ=Bi().BADNUM,PQ=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;hk.exports=function(t){return typeof t=="string"&&(t=t.replace(PQ,"")),EQ(t)?Number(t):LQ}});var Nt=he((_1e,Sk)=>{"use strict";var Jy=Ka(),DQ=b0().utcFormat,zQ=tw().format,_k=Ia(),xk=Bi(),bk=xk.FP_SAFE,IQ=-bk,dk=xk.BADNUM,$e=Sk.exports={};$e.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:t==="0.f"?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var pk={};$e.warnBadFormat=function(e){var t=String(e);pk[t]||(pk[t]=1,$e.warn('encountered bad format: "'+t+'"'))};$e.noFormat=function(e){return String(e)};$e.numberFormat=function(e){var t;try{t=zQ($e.adjustFormat(e))}catch(r){return $e.warnBadFormat(e),$e.noFormat}return t};$e.nestedProperty=Fy();$e.keyedContainer=n8();$e.relativeAttr=s8();$e.isPlainObject=dc();$e.toLogRange=m_();$e.relinkPrivateKeys=c8();var Ih=ll();$e.isArrayBuffer=Ih.isArrayBuffer;$e.isTypedArray=Ih.isTypedArray;$e.isArrayOrTypedArray=Ih.isArrayOrTypedArray;$e.isArray1D=Ih.isArray1D;$e.ensureArray=Ih.ensureArray;$e.concat=Ih.concat;$e.maxRowLength=Ih.maxRowLength;$e.minRowLength=Ih.minRowLength;var wk=T0();$e.mod=wk.mod;$e.modHalf=wk.modHalf;var Rh=L8();$e.valObjectMeta=Rh.valObjectMeta;$e.coerce=Rh.coerce;$e.coerce2=Rh.coerce2;$e.coerceFont=Rh.coerceFont;$e.coercePattern=Rh.coercePattern;$e.coerceHoverinfo=Rh.coerceHoverinfo;$e.coerceSelectionMarkerOpacity=Rh.coerceSelectionMarkerOpacity;$e.validate=Rh.validate;var fl=q9();$e.dateTime2ms=fl.dateTime2ms;$e.isDateTime=fl.isDateTime;$e.ms2DateTime=fl.ms2DateTime;$e.ms2DateTimeLocal=fl.ms2DateTimeLocal;$e.cleanDate=fl.cleanDate;$e.isJSDate=fl.isJSDate;$e.formatDate=fl.formatDate;$e.incrementMonth=fl.incrementMonth;$e.dateTick0=fl.dateTick0;$e.dfltRange=fl.dfltRange;$e.findExactDates=fl.findExactDates;$e.MIN_MS=fl.MIN_MS;$e.MAX_MS=fl.MAX_MS;var md=Aw();$e.findBin=md.findBin;$e.sorterAsc=md.sorterAsc;$e.sorterDes=md.sorterDes;$e.distinctVals=md.distinctVals;$e.roundUp=md.roundUp;$e.sort=md.sort;$e.findIndexOfMin=md.findIndexOfMin;$e.sortObjectKeys=O_();var xc=O9();$e.aggNums=xc.aggNums;$e.len=xc.len;$e.mean=xc.mean;$e.geometricMean=xc.geometricMean;$e.median=xc.median;$e.midRange=xc.midRange;$e.variance=xc.variance;$e.stdev=xc.stdev;$e.interp=xc.interp;var Nu=S_();$e.init2dArray=Nu.init2dArray;$e.transposeRagged=Nu.transposeRagged;$e.dot=Nu.dot;$e.translationMatrix=Nu.translationMatrix;$e.rotationMatrix=Nu.rotationMatrix;$e.rotationXYMatrix=Nu.rotationXYMatrix;$e.apply3DTransform=Nu.apply3DTransform;$e.apply2DTransform=Nu.apply2DTransform;$e.apply2DTransform2=Nu.apply2DTransform2;$e.convertCssMatrix=Nu.convertCssMatrix;$e.inverseTransformMatrix=Nu.inverseTransformMatrix;var Ef=Z9();$e.deg2rad=Ef.deg2rad;$e.rad2deg=Ef.rad2deg;$e.angleDelta=Ef.angleDelta;$e.angleDist=Ef.angleDist;$e.isFullCircle=Ef.isFullCircle;$e.isAngleInsideSector=Ef.isAngleInsideSector;$e.isPtInsideSector=Ef.isPtInsideSector;$e.pathArc=Ef.pathArc;$e.pathSector=Ef.pathSector;$e.pathAnnulus=Ef.pathAnnulus;var I0=Y9();$e.isLeftAnchor=I0.isLeftAnchor;$e.isCenterAnchor=I0.isCenterAnchor;$e.isRightAnchor=I0.isRightAnchor;$e.isTopAnchor=I0.isTopAnchor;$e.isMiddleAnchor=I0.isMiddleAnchor;$e.isBottomAnchor=I0.isBottomAnchor;var R0=j9();$e.segmentsIntersect=R0.segmentsIntersect;$e.segmentDistance=R0.segmentDistance;$e.getTextLocation=R0.getTextLocation;$e.clearLocationCache=R0.clearLocationCache;$e.getVisibleSegment=R0.getVisibleSegment;$e.findPointOnPath=R0.findPointOnPath;var W_=hn();$e.extendFlat=W_.extendFlat;$e.extendDeep=W_.extendDeep;$e.extendDeepAll=W_.extendDeepAll;$e.extendDeepNoArrays=W_.extendDeepNoArrays;var Pw=Ch();$e.log=Pw.log;$e.warn=Pw.warn;$e.error=Pw.error;var RQ=M0();$e.counterRegex=RQ.counter;var Dw=H_();$e.throttle=Dw.throttle;$e.throttleDone=Dw.done;$e.clearThrottle=Dw.clear;var Lf=Hy();$e.getGraphDiv=Lf.getGraphDiv;$e.isPlotDiv=Lf.isPlotDiv;$e.removeElement=Lf.removeElement;$e.addStyleRule=Lf.addStyleRule;$e.addRelatedStyleRule=Lf.addRelatedStyleRule;$e.deleteRelatedStyleRule=Lf.deleteRelatedStyleRule;$e.getFullTransformMatrix=Lf.getFullTransformMatrix;$e.getElementTransformMatrix=Lf.getElementTransformMatrix;$e.getElementAndAncestors=Lf.getElementAndAncestors;$e.equalDomRects=Lf.equalDomRects;$e.clearResponsive=Q9();$e.preserveDrawingBuffer=tk();$e.makeTraceGroups=ak();$e._=nk();$e.notifier=hw();$e.filterUnique=sk();$e.filterVisible=uk();$e.pushUnique=pw();$e.increment=ck();$e.cleanNumber=vk();$e.ensureNumber=function(t){return _k(t)?(t=Number(t),t>bk||t<IQ?dk:t):dk};$e.isIndex=function(e,t){return t!==void 0&&e>=t?!1:_k(e)&&e>=0&&e%1===0};$e.noop=M_();$e.identity=B_();$e.repeat=function(e,t){for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r};$e.swapAttrs=function(e,t,r,i){r||(r="x"),i||(i="y");for(var a=0;a<t.length;a++){var s=t[a],l=$e.nestedProperty(e,s.replace("?",r)),u=$e.nestedProperty(e,s.replace("?",i)),c=l.get();l.set(u.get()),u.set(c)}};$e.raiseToTop=function(t){t.parentNode.appendChild(t)};$e.cancelTransition=function(e){return e.transition().duration(0)};$e.constrain=function(e,t,r){return t>r?Math.max(r,Math.min(t,e)):Math.max(t,Math.min(r,e))};$e.bBoxIntersect=function(e,t,r){return r=r||0,e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};$e.simpleMap=function(e,t,r,i,a){for(var s=e.length,l=new Array(s),u=0;u<s;u++)l[u]=t(e[u],r,i,a);return l};$e.randstr=function e(t,r,i,a){if(i||(i=16),r===void 0&&(r=24),r<=0)return"0";var s=Math.log(Math.pow(2,r))/Math.log(i),l="",u,c,v;for(u=2;s===1/0;u*=2)s=Math.log(Math.pow(2,r/u))/Math.log(i)*u;var m=s-Math.floor(s);for(u=0;u<Math.floor(s);u++)v=Math.floor(Math.random()*i).toString(i),l=v+l;m&&(c=Math.pow(i,m),v=Math.floor(Math.random()*c).toString(i),l=v+l);var _=parseInt(l,i);return t&&t[l]||_!==1/0&&_>=Math.pow(2,r)?a>10?($e.warn("randstr failed uniqueness"),l):e(t,r,i,(a||0)+1):l};$e.OptionControl=function(e,t){e||(e={}),t||(t="opt");var r={};return r.optionList=[],r._newoption=function(i){i[t]=e,r[i.name]=i,r.optionList.push(i)},r["_"+t]=e,r};$e.smooth=function(e,t){if(t=Math.round(t)||0,t<2)return e;var r=e.length,i=2*r,a=2*t-1,s=new Array(a),l=new Array(r),u,c,v,m;for(u=0;u<a;u++)s[u]=(1-Math.cos(Math.PI*(u+1)/t))/(2*t);for(u=0;u<r;u++){for(m=0,c=0;c<a;c++)v=u+c+1-t,v<-r?v-=i*Math.round(v/i):v>=i&&(v-=i*Math.floor(v/i)),v<0?v=-1-v:v>=r&&(v=i-1-v),m+=e[v]*s[c];l[u]=m}return l};$e.syncOrAsync=function(e,t,r){var i,a;function s(){return $e.syncOrAsync(e,t,r)}for(;e.length;)if(a=e.splice(0,1)[0],i=a(t),i&&i.then)return i.then(s);return r&&r(t)};$e.stripTrailingSlash=function(e){return e.substr(-1)==="/"?e.substr(0,e.length-1):e};$e.noneOrAll=function(e,t,r){if(e){var i=!1,a=!0,s,l;for(s=0;s<r.length;s++)l=e[r[s]],l!=null?i=!0:a=!1;if(i&&!a)for(s=0;s<r.length;s++)e[r[s]]=t[r[s]]}};$e.mergeArray=function(e,t,r,i){var a=typeof i=="function";if($e.isArrayOrTypedArray(e))for(var s=Math.min(e.length,t.length),l=0;l<s;l++){var u=e[l];t[l][r]=a?i(u):u}};$e.mergeArrayCastPositive=function(e,t,r){return $e.mergeArray(e,t,r,function(i){var a=+i;return isFinite(a)&&a>0?a:0})};$e.fillArray=function(e,t,r,i){if(i=i||$e.identity,$e.isArrayOrTypedArray(e))for(var a=0;a<t.length;a++)t[a][r]=i(e[a])};$e.castOption=function(e,t,r,i){i=i||$e.identity;var a=$e.nestedProperty(e,r).get();return $e.isArrayOrTypedArray(a)?Array.isArray(t)&&$e.isArrayOrTypedArray(a[t[0]])?i(a[t[0]][t[1]]):i(a[t]):a};$e.extractOption=function(e,t,r,i){if(r in e)return e[r];var a=$e.nestedProperty(t,i).get();if(!Array.isArray(a))return a};function Tk(e){var t={};for(var r in e)for(var i=e[r],a=0;a<i.length;a++)t[i[a]]=+r;return t}$e.tagSelected=function(e,t,r){var i=t.selectedpoints,a=t._indexToPoints,s;a&&(s=Tk(a));function l(_){return _!==void 0&&_<e.length}for(var u=0;u<i.length;u++){var c=i[u];if($e.isIndex(c)||$e.isArrayOrTypedArray(c)&&$e.isIndex(c[0])&&$e.isIndex(c[1])){var v=s?s[c]:c,m=r?r[v]:v;l(m)&&(e[m].selected=1)}}};$e.selIndices2selPoints=function(e){var t=e.selectedpoints,r=e._indexToPoints;if(r){for(var i=Tk(r),a=[],s=0;s<t.length;s++){var l=t[s];if($e.isIndex(l)){var u=i[l];$e.isIndex(u)&&a.push(u)}}return a}else return t};$e.getTargetArray=function(e,t){var r=t.target;if(typeof r=="string"&&r){var i=$e.nestedProperty(e,r).get();return $e.isArrayOrTypedArray(i)?i:!1}else if($e.isArrayOrTypedArray(r))return r;return!1};function Ak(e,t,r){var i={};typeof t!="object"&&(t={});var a=r==="pieLike"?-1:3,s=Object.keys(e),l,u,c;for(l=0;l<s.length;l++)u=s[l],c=e[u],!(u.charAt(0)==="_"||typeof c=="function")&&(u==="module"?i[u]=c:Array.isArray(c)?u==="colorscale"||a===-1?i[u]=c.slice():i[u]=c.slice(0,a):$e.isTypedArray(c)?a===-1?i[u]=c.subarray():i[u]=c.subarray(0,a):c&&typeof c=="object"?i[u]=Ak(e[u],t[u],r):i[u]=c);for(s=Object.keys(t),l=0;l<s.length;l++)u=s[l],c=t[u],(typeof c!="object"||!(u in i)||typeof i[u]!="object")&&(i[u]=c);return i}$e.minExtend=Ak;$e.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};$e.containsAny=function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)return!0;return!1};$e.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var FQ=/Version\/[\d\.]+.*Safari/;$e.isSafari=function(){return FQ.test(window.navigator.userAgent)};var qQ=/iPad|iPhone|iPod/;$e.isIOS=function(){return qQ.test(window.navigator.userAgent)};var NQ=/Firefox\/(\d+)\.\d+/;$e.getFirefoxVersion=function(){var e=NQ.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t))return t}return null};$e.isD3Selection=function(e){return e instanceof Jy.selection};$e.ensureSingle=function(e,t,r,i){var a=e.select(t+(r?"."+r:""));if(a.size())return a;var s=e.append(t);return r&&s.classed(r,!0),i&&s.call(i),s};$e.ensureSingleById=function(e,t,r,i){var a=e.select(t+"#"+r);if(a.size())return a;var s=e.append(t).attr("id",r);return i&&s.call(i),s};$e.objectFromPath=function(e,t){for(var r=e.split("."),i,a=i={},s=0;s<r.length;s++){var l=r[s],u=null,c=r[s].match(/(.*)\[([0-9]+)\]/);c?(l=c[1],u=c[2],i=i[l]=[],s===r.length-1?i[u]=t:i[u]={},i=i[u]):(s===r.length-1?i[l]=t:i[l]={},i=i[l])}return a};var BQ=/^([^\[\.]+)\.(.+)?/,OQ=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function Z_(e){return e.slice(0,2)==="__"}$e.expandObjectPaths=function(e){var t,r,i,a,s,l,u;if(typeof e=="object"&&!Array.isArray(e)){for(r in e)if(e.hasOwnProperty(r))if(t=r.match(BQ)){if(a=e[r],i=t[1],Z_(i))continue;delete e[r],e[i]=$e.extendDeepNoArrays(e[i]||{},$e.objectFromPath(r,$e.expandObjectPaths(a))[i])}else if(t=r.match(OQ)){if(a=e[r],i=t[1],Z_(i))continue;if(s=parseInt(t[2]),delete e[r],e[i]=e[i]||[],t[3]===".")u=t[4],l=e[i][s]=e[i][s]||{},$e.extendDeepNoArrays(l,$e.objectFromPath(u,$e.expandObjectPaths(a)));else{if(Z_(i))continue;e[i][s]=$e.expandObjectPaths(a)}}else{if(Z_(r))continue;e[r]=$e.expandObjectPaths(e[r])}}return e};$e.numSeparate=function(e,t,r){if(r||(r=!1),typeof t!="string"||t.length===0)throw new Error("Separator string required for formatting!");typeof e=="number"&&(e=String(e));var i=/(\d+)(\d{3})/,a=t.charAt(0),s=t.charAt(1),l=e.split("."),u=l[0],c=l.length>1?a+l[1]:"";if(s&&(l.length>1||u.length>4||r))for(;i.test(u);)u=u.replace(i,"$1"+s+"$2");return u+c};$e.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var Mk=/^\w*$/;$e.templateString=function(e,t){var r={};return e.replace($e.TEMPLATE_STRING_REGEX,function(i,a){var s;return Mk.test(a)?s=t[a]:(r[a]=r[a]||$e.nestedProperty(t,a).get,s=r[a]()),$e.isValidTextValue(s)?s:""})};var UQ={max:10,count:0,name:"hovertemplate"};$e.hovertemplateString=function(){return zw.apply(UQ,arguments)};var VQ={max:10,count:0,name:"texttemplate"};$e.texttemplateString=function(){return zw.apply(VQ,arguments)};var HQ=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function GQ(e){var t=e.match(HQ);return t?{key:t[1],op:t[2],number:Number(t[3])}:{key:e,op:null,number:null}}var ZQ={max:10,count:0,name:"texttemplate",parseMultDiv:!0};$e.texttemplateStringForShapes=function(){return zw.apply(ZQ,arguments)};var mk=/^[:|\|]/;function zw(e,t,r){var i=this,a=arguments;t||(t={});var s={};return e.replace($e.TEMPLATE_STRING_REGEX,function(l,u,c){var v=u==="xother"||u==="yother",m=u==="_xother"||u==="_yother",_=u==="_xother_"||u==="_yother_",T=u==="xother_"||u==="yother_",M=v||m||T||_,k=u;(m||_)&&(k=k.substring(1)),(T||_)&&(k=k.substring(0,k.length-1));var L=null,E=null;if(i.parseMultDiv){var I=GQ(k);k=I.key,L=I.op,E=I.number}var R;if(M){if(R=t[k],R===void 0)return""}else{var N,z;for(z=3;z<a.length;z++)if(N=a[z],!!N){if(N.hasOwnProperty(k)){R=N[k];break}if(Mk.test(k)||(R=$e.nestedProperty(N,k).get(),R=s[k]||$e.nestedProperty(N,k).get(),R&&(s[k]=R)),R!==void 0)break}}if(R!==void 0&&(L==="*"&&(R*=E),L==="/"&&(R/=E)),R===void 0&&i)return i.count<i.max&&($e.warn("Variable '"+k+"' in "+i.name+" could not be found!"),R=l),i.count===i.max&&$e.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,l;if(c){var B;if(c[0]===":"&&(B=r?r.numberFormat:$e.numberFormat,R!==""&&(R=B(c.replace(mk,""))(R))),c[0]==="|"){B=r?r.timeFormat:DQ;var H=$e.dateTime2ms(R);R=$e.formatDate(H,c.replace(mk,""),!1,B)}}else{var V=k+"Label";t.hasOwnProperty(V)&&(R=t[V])}return M&&(R="("+R+")",(m||_)&&(R=" "+R),(T||_)&&(R=R+" ")),R})}var Y_=48,yk=57;$e.subplotSort=function(e,t){for(var r=Math.min(e.length,t.length)+1,i=0,a=0,s=0;s<r;s++){var l=e.charCodeAt(s)||0,u=t.charCodeAt(s)||0,c=l>=Y_&&l<=yk,v=u>=Y_&&u<=yk;if(c&&(i=10*i+l-Y_),v&&(a=10*a+u-Y_),!c||!v){if(i!==a)return i-a;if(l!==u)return l-u}}return a-i};var z0=2e9;$e.seedPseudoRandom=function(){z0=2e9};$e.pseudoRandom=function(){var e=z0;return z0=(69069*z0+1)%4294967296,Math.abs(z0-e)<429496729?$e.pseudoRandom():z0/4294967296};$e.fillText=function(e,t,r){var i=Array.isArray(r)?function(l){r.push(l)}:function(l){r.text=l},a=$e.extractOption(e,t,"htx","hovertext");if($e.isValidTextValue(a))return i(a);var s=$e.extractOption(e,t,"tx","text");if($e.isValidTextValue(s))return i(s)};$e.isValidTextValue=function(e){return e||e===0};$e.formatPercent=function(e,t){t=t||0;for(var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",i=0;i<t;i++)r.indexOf(".")!==-1&&(r=r.replace("0%","%"),r=r.replace(".%","%"));return r};$e.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};$e.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};$e.strRotate=function(e){return e?"rotate("+e+")":""};$e.strScale=function(e){return e!==1?"scale("+e+")":""};$e.getTextTransform=function(e){var t=e.noCenter,r=e.textX,i=e.textY,a=e.targetX,s=e.targetY,l=e.anchorX||0,u=e.anchorY||0,c=e.rotate,v=e.scale;return v?v>1&&(v=1):v=0,$e.strTranslate(a-v*(r+l),s-v*(i+u))+$e.strScale(v)+(c?"rotate("+c+(t?"":" "+r+" "+i)+")":"")};$e.setTransormAndDisplay=function(e,t){e.attr("transform",$e.getTextTransform(t)),e.style("display",t.scale?null:"none")};$e.ensureUniformFontSize=function(e,t){var r=$e.extendFlat({},t);return r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),r};$e.join2=function(e,t,r){var i=e.length;return i>1?e.slice(0,-1).join(t)+r+e[i-1]:e.join(t)};$e.bigFont=function(e){return Math.round(1.2*e)};var gk=$e.getFirefoxVersion(),YQ=gk!==null&&gk<86;$e.getPositionFromD3Event=function(){return YQ?[Jy.event.layerX,Jy.event.layerY]:[Jy.event.offsetX,Jy.event.offsetY]}});var Ek=he(()=>{"use strict";var WQ=Nt(),kk={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(Iw in kk)Ck=Iw.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),WQ.addStyleRule(Ck,kk[Iw]);var Ck,Iw});var Rw=he((w1e,Lk)=>{Lk.exports=!0});var qw=he((T1e,Pk)=>{"use strict";var XQ=Rw(),Fw;typeof window.matchMedia=="function"?Fw=!window.matchMedia("(hover: none)").matches:Fw=XQ;Pk.exports=Fw});var J_=he((A1e,Nw)=>{"use strict";var F0=typeof Reflect=="object"?Reflect:null,Dk=F0&&typeof F0.apply=="function"?F0.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},X_;F0&&typeof F0.ownKeys=="function"?X_=F0.ownKeys:Object.getOwnPropertySymbols?X_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:X_=function(t){return Object.getOwnPropertyNames(t)};function jQ(e){console&&console.warn&&console.warn(e)}var Ik=Number.isNaN||function(t){return t!==t};function Zi(){Zi.init.call(this)}Nw.exports=Zi;Nw.exports.once=$Q;Zi.EventEmitter=Zi;Zi.prototype._events=void 0;Zi.prototype._eventsCount=0;Zi.prototype._maxListeners=void 0;var zk=10;function j_(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Zi,"defaultMaxListeners",{enumerable:!0,get:function(){return zk},set:function(e){if(typeof e!="number"||e<0||Ik(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");zk=e}});Zi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Zi.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ik(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Rk(e){return e._maxListeners===void 0?Zi.defaultMaxListeners:e._maxListeners}Zi.prototype.getMaxListeners=function(){return Rk(this)};Zi.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var a=t==="error",s=this._events;if(s!==void 0)a=a&&s.error===void 0;else if(!a)return!1;if(a){var l;if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var u=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw u.context=l,u}var c=s[t];if(c===void 0)return!1;if(typeof c=="function")Dk(c,this,r);else for(var v=c.length,m=Ok(c,v),i=0;i<v;++i)Dk(m[i],this,r);return!0};function Fk(e,t,r,i){var a,s,l;if(j_(r),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),l=s[t]),l===void 0)l=s[t]=r,++e._eventsCount;else if(typeof l=="function"?l=s[t]=i?[r,l]:[l,r]:i?l.unshift(r):l.push(r),a=Rk(e),a>0&&l.length>a&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=l.length,jQ(u)}return e}Zi.prototype.addListener=function(t,r){return Fk(this,t,r,!1)};Zi.prototype.on=Zi.prototype.addListener;Zi.prototype.prependListener=function(t,r){return Fk(this,t,r,!0)};function JQ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qk(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=JQ.bind(i);return a.listener=r,i.wrapFn=a,a}Zi.prototype.once=function(t,r){return j_(r),this.on(t,qk(this,t,r)),this};Zi.prototype.prependOnceListener=function(t,r){return j_(r),this.prependListener(t,qk(this,t,r)),this};Zi.prototype.removeListener=function(t,r){var i,a,s,l,u;if(j_(r),a=this._events,a===void 0)return this;if(i=a[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(s=-1,l=i.length-1;l>=0;l--)if(i[l]===r||i[l].listener===r){u=i[l].listener,s=l;break}if(s<0)return this;s===0?i.shift():KQ(i,s),i.length===1&&(a[t]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",t,u||r)}return this};Zi.prototype.off=Zi.prototype.removeListener;Zi.prototype.removeAllListeners=function(t){var r,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),l;for(a=0;a<s.length;++a)l=s[a],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(t,r[a]);return this};function Nk(e,t,r){var i=e._events;if(i===void 0)return[];var a=i[t];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?QQ(a):Ok(a,a.length)}Zi.prototype.listeners=function(t){return Nk(this,t,!0)};Zi.prototype.rawListeners=function(t){return Nk(this,t,!1)};Zi.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Bk.call(e,t)};Zi.prototype.listenerCount=Bk;function Bk(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Zi.prototype.eventNames=function(){return this._eventsCount>0?X_(this._events):[]};function Ok(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function KQ(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function QQ(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function $Q(e,t){return new Promise(function(r,i){function a(l){e.removeListener(t,s),i(l)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",a),r([].slice.call(arguments))}Uk(e,t,s,{once:!0}),t!=="error"&&e$(e,a,{once:!0})})}function e$(e,t,r){typeof e.on=="function"&&Uk(e,"error",t,r)}function Uk(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(s){i.once&&e.removeEventListener(t,a),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var Ky=he((M1e,Vk)=>{"use strict";var Bw=J_().EventEmitter,t$={init:function(e){if(e._ev instanceof Bw)return e;var t=new Bw,r=new Bw;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(i,a){typeof jQuery!="undefined"&&jQuery(e).trigger(i,a),t.emit(i,a),r.emit(i,a)},e},triggerHandler:function(e,t,r){var i,a;typeof jQuery!="undefined"&&(i=jQuery(e).triggerHandler(t,r));var s=e._ev;if(!s)return i;var l=s._events[t];if(!l)return i;function u(v){if(v.listener){if(s.removeListener(t,v.listener),!v.fired)return v.fired=!0,v.listener.apply(s,[r])}else return v.apply(s,[r])}l=Array.isArray(l)?l:[l];var c;for(c=0;c<l.length-1;c++)u(l[c]);return a=u(l[c]),i!==void 0?i:a},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};Vk.exports=t$});var Zk=he((S1e,Gk)=>{"use strict";var Hk=Nt(),r$=hd().dfltConfig;function a$(e,t){for(var r=[],i,a=0;a<t.length;a++)i=t[a],i===e?r[a]=i:typeof i=="object"?r[a]=Array.isArray(i)?Hk.extendDeep([],i):Hk.extendDeepAll({},i):r[a]=i;return r}var bc={};bc.add=function(e,t,r,i,a){var s,l;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},l=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(s={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(l,e.undoQueue.queue.length-l,s),e.undoQueue.index+=1):s=e.undoQueue.queue[l-1],e.undoQueue.beginSequence=!1,s&&(s.undo.calls.unshift(t),s.undo.args.unshift(r),s.redo.calls.push(i),s.redo.args.push(a)),e.undoQueue.queue.length>r$.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)};bc.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0};bc.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1};bc.undo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.undo.calls.length;i++)bc.plotDo(t,r.undo.calls[i],r.undo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1}};bc.redo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.redo.calls.length;i++)bc.plotDo(t,r.redo.calls[i],r.redo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}};bc.plotDo=function(e,t,r){e.autoplay=!0,r=a$(e,r),t.apply(null,r)};Gk.exports=bc});var Ow=he((k1e,Yk)=>{"use strict";Yk.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}});var Fh=he(Nn=>{"use strict";var Bo=sa(),eg=Nt(),$y=gs(),Uw=C0(),i$=Ow(),n$=Gy(),o$=hd().configAttributes,Wk=ul(),jl=eg.extendDeepAll,q0=eg.isPlainObject,s$=eg.isArrayOrTypedArray,K_=eg.nestedProperty,l$=eg.valObjectMeta,Vw="_isSubplotObj",Q_="_isLinkedToArray",u$="_arrayAttrRegexps",jk="_deprecated",Hw=[Vw,Q_,u$,jk];Nn.IS_SUBPLOT_OBJ=Vw;Nn.IS_LINKED_TO_ARRAY=Q_;Nn.DEPRECATED=jk;Nn.UNDERSCORE_ATTRS=Hw;Nn.get=function(){var e={};Bo.allTypes.forEach(function(r){e[r]=c$(r)});var t={};return Object.keys(Bo.transformsRegistry).forEach(function(r){t[r]=v$(r)}),{defs:{valObjects:l$,metaKeys:Hw.concat(["description","role","editType","impliedEdits"]),editType:{traces:Wk.traces,layout:Wk.layout},impliedEdits:{}},traces:e,layout:h$(),transforms:t,frames:d$(),animation:yd(n$),config:yd(o$)}};Nn.crawl=function(e,t,r,i){var a=r||0;i=i||"",Object.keys(e).forEach(function(s){var l=e[s];if(Hw.indexOf(s)===-1){var u=(i?i+".":"")+s;t(l,s,e,a,u),!Nn.isValObject(l)&&q0(l)&&s!=="impliedEdits"&&Nn.crawl(l,t,a+1,u)}})};Nn.isValObject=function(e){return e&&e.valType!==void 0};Nn.findArrayAttributes=function(e){var t=[],r=[],i=[],a,s;function l(T,M,k,L){r=r.slice(0,L).concat([M]),i=i.slice(0,L).concat([T&&T._isLinkedToArray]);var E=T&&(T.valType==="data_array"||T.arrayOk===!0)&&!(r[L-1]==="colorbar"&&(M==="ticktext"||M==="tickvals"));E&&u(a,0,"")}function u(T,M,k){var L=T[r[M]],E=k+r[M];if(M===r.length-1)s$(L)&&t.push(s+E);else if(i[M]){if(Array.isArray(L))for(var I=0;I<L.length;I++)q0(L[I])&&u(L[I],M+1,E+"["+I+"].")}else q0(L)&&u(L,M+1,E+".")}a=e,s="",Nn.crawl($y,l),e._module&&e._module.attributes&&Nn.crawl(e._module.attributes,l);var c=e.transforms;if(c)for(var v=0;v<c.length;v++){var m=c[v],_=m._module;_&&(s="transforms["+v+"].",a=m,Nn.crawl(_.attributes,l))}return t};Nn.getTraceValObject=function(e,t){var r=t[0],i=1,a,s;if(r==="transforms"){if(t.length===1)return $y.transforms;var l=e.transforms;if(!Array.isArray(l)||!l.length)return!1;var u=t[1];if(!Qy(u)||u>=l.length)return!1;a=(Bo.transformsRegistry[l[u].type]||{}).attributes,s=a&&a[t[2]],i=3}else{var c=e._module;if(c||(c=(Bo.modules[e.type||$y.type.dflt]||{})._module),!c)return!1;if(a=c.attributes,s=a&&a[r],!s){var v=c.basePlotModule;v&&v.attributes&&(s=v.attributes[r])}s||(s=$y[r])}return Jk(s,t,i)};Nn.getLayoutValObject=function(e,t){var r=f$(e,t[0]);return Jk(r,t,1)};function f$(e,t){var r,i,a,s,l=e._basePlotModules;if(l){var u;for(r=0;r<l.length;r++){if(a=l[r],a.attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!u&&a.layoutAttributes&&(u=a.layoutAttributes)}var c=a.baseLayoutAttrOverrides;if(c&&t in c)return c[t]}if(u)return u}var v=e._modules;if(v){for(r=0;r<v.length;r++)if(s=v[r].layoutAttributes,s&&t in s)return s[t]}for(i in Bo.componentsRegistry){if(a=Bo.componentsRegistry[i],a.name==="colorscale"&&t.indexOf("coloraxis")===0)return a.layoutAttributes[t];if(!a.schema&&t===a.name)return a.layoutAttributes}return t in Uw?Uw[t]:!1}function Jk(e,t,r){if(!e)return!1;if(e._isLinkedToArray){if(Qy(t[r]))r++;else if(r<t.length)return!1}for(;r<t.length;r++){var i=e[t[r]];if(q0(i))e=i;else break;if(r===t.length-1)break;if(e._isLinkedToArray){if(r++,!Qy(t[r]))return!1}else if(e.valType==="info_array"){r++;var a=t[r];if(!Qy(a))return!1;var s=e.items;if(Array.isArray(s)){if(a>=s.length)return!1;if(e.dimensions===2){if(r++,t.length===r)return e;var l=t[r];if(!Qy(l))return!1;e=s[a][l]}else e=s[a]}else e=s}}return e}function Qy(e){return e===Math.round(e)&&e>=0}function c$(e){var t,r;t=Bo.modules[e]._module,r=t.basePlotModule;var i={};i.type=null;var a=jl({},$y),s=jl({},t.attributes);Nn.crawl(s,function(c,v,m,_,T){K_(a,T).set(void 0),c===void 0&&K_(s,T).set(void 0)}),jl(i,a),Bo.traceIs(e,"noOpacity")&&delete i.opacity,Bo.traceIs(e,"showLegend")||(delete i.showlegend,delete i.legendgroup),Bo.traceIs(e,"noHover")&&(delete i.hoverinfo,delete i.hoverlabel),t.selectPoints||delete i.selectedpoints,jl(i,s),r.attributes&&jl(i,r.attributes),i.type=e;var l={meta:t.meta||{},categories:t.categories||{},animatable:!!t.animatable,type:e,attributes:yd(i)};if(t.layoutAttributes){var u={};jl(u,t.layoutAttributes),l.layoutAttributes=yd(u)}return t.animatable||Nn.crawl(l,function(c){Nn.isValObject(c)&&"anim"in c&&delete c.anim}),l}function h$(){var e={},t,r;jl(e,Uw);for(t in Bo.subplotsRegistry)if(r=Bo.subplotsRegistry[t],!!r.layoutAttributes)if(Array.isArray(r.attr))for(var i=0;i<r.attr.length;i++)Xk(e,r,r.attr[i]);else{var a=r.attr==="subplot"?r.name:r.attr;Xk(e,r,a)}for(t in Bo.componentsRegistry){r=Bo.componentsRegistry[t];var s=r.schema;if(s&&(s.subplots||s.layout)){var l=s.subplots;if(l&&l.xaxis&&!l.yaxis)for(var u in l.xaxis)delete e.yaxis[u];delete e.xaxis.shift,delete e.xaxis.autoshift}else r.name==="colorscale"?jl(e,r.layoutAttributes):r.layoutAttributes&&Kk(e,r.layoutAttributes,r.name)}return{layoutAttributes:yd(e)}}function v$(e){var t=Bo.transformsRegistry[e],r=jl({},t.attributes);return Object.keys(Bo.componentsRegistry).forEach(function(i){var a=Bo.componentsRegistry[i];a.schema&&a.schema.transforms&&a.schema.transforms[e]&&Object.keys(a.schema.transforms[e]).forEach(function(s){Kk(r,a.schema.transforms[e][s],s)})}),{attributes:yd(r)}}function d$(){var e={frames:jl({},i$)};return yd(e),e.frames}function yd(e){return p$(e),m$(e),y$(e),e}function p$(e){function t(i){return{valType:"string",editType:"none"}}function r(i,a,s){Nn.isValObject(i)?(i.arrayOk===!0||i.valType==="data_array")&&(s[a+"src"]=t(a)):q0(i)&&(i.role="object")}Nn.crawl(e,r)}function m$(e){function t(r,i,a){if(r){var s=r[Q_];s&&(delete r[Q_],a[i]={items:{}},a[i].items[s]=r,a[i].role="object")}}Nn.crawl(e,t)}function y$(e){function t(r){for(var i in r)if(q0(r[i]))t(r[i]);else if(Array.isArray(r[i]))for(var a=0;a<r[i].length;a++)t(r[i][a]);else r[i]instanceof RegExp&&(r[i]=r[i].toString())}t(e)}function Xk(e,t,r){var i=K_(e,r),a=jl({},t.layoutAttributes);a[Vw]=!0,i.set(a)}function Kk(e,t,r){var i=K_(e,r);i.set(jl(i.get()||{},t))}});var Di=he(gd=>{"use strict";var N0=Nt(),g$=gs(),qh="templateitemname",Gw={name:{valType:"string",editType:"none"}};Gw[qh]={valType:"string",editType:"calc"};gd.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=Gw.name,t[qh]=Gw[qh],t};gd.traceTemplater=function(e){var t={},r,i;for(r in e)i=e[r],Array.isArray(i)&&i.length&&(t[r]=0);function a(s){r=N0.coerce(s,{},g$,"type");var l={type:r,_template:null};if(r in t){i=e[r];var u=t[r]%i.length;t[r]++,l._template=i[u]}return l}return{newTrace:a}};gd.newContainer=function(e,t,r){var i=e._template,a=i&&(i[t]||r&&i[r]);N0.isPlainObject(a)||(a=null);var s=e[t]={_template:a};return s};gd.arrayTemplater=function(e,t,r){var i=e._template,a=i&&i[$k(t)],s=i&&i[t];(!Array.isArray(s)||!s.length)&&(s=[]);var l={};function u(v){var m={name:v.name,_input:v},_=m[qh]=v[qh];if(!Qk(_))return m._template=a,m;for(var T=0;T<s.length;T++){var M=s[T];if(M.name===_)return l[_]=1,m._template=M,m}return m[r]=v[r]||!1,m._template=!1,m}function c(){for(var v=[],m=0;m<s.length;m++){var _=s[m],T=_.name;if(Qk(T)&&!l[T]){var M={_template:_,name:T,_input:{_templateitemname:T}};M[qh]=_[qh],v.push(M),l[T]=1}}return v}return{newItem:u,defaultItems:c}};function Qk(e){return e&&typeof e=="string"}function $k(e){var t=e.length-1;return e.charAt(t)!=="s"&&N0.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}gd.arrayDefaultKey=$k;gd.arrayEditor=function(e,t,r){var i=(N0.nestedProperty(e,t).get()||[]).length,a=r._index,s=a>=i&&(r._input||{})._templateitemname;s&&(a=i);var l=t+"["+a+"]",u;function c(){u={},s&&(u[l]={},u[l][qh]=s)}c();function v(M,k){u[M]=k}function m(M,k){s?N0.nestedProperty(u[l],M).set(k):u[l+"."+M]=k}function _(){var M=u;return c(),M}function T(M,k){M&&m(M,k);var L=_();for(var E in L)N0.nestedProperty(e,E).set(L[E])}return{modifyBase:v,modifyItem:m,getUpdateObj:_,applyUpdate:T}}});var Mo=he((L1e,eC)=>{"use strict";var tg=M0().counter;eC.exports={idRegex:{x:tg("x","( domain)?"),y:tg("y","( domain)?")},attrRegex:tg("[xy]axis"),xAxisMatch:tg("xaxis"),yAxisMatch:tg("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}});var ro=he(Hs=>{"use strict";var _$=sa(),Zw=Mo();Hs.id2name=function(t){if(!(typeof t!="string"||!t.match(Zw.AX_ID_PATTERN))){var r=t.split(" ")[0].substr(1);return r==="1"&&(r=""),t.charAt(0)+"axis"+r}};Hs.name2id=function(t){if(t.match(Zw.AX_NAME_PATTERN)){var r=t.substr(5);return r==="1"&&(r=""),t.charAt(0)+r}};Hs.cleanId=function(t,r,i){var a=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(Zw.AX_ID_PATTERN))&&!(r&&t.charAt(0)!==r)&&!(a&&!i)){var s=t.split(" ")[0].substr(1).replace(/^0+/,"");return s==="1"&&(s=""),t.charAt(0)+s+(a&&i?" domain":"")}};Hs.list=function(e,t,r){var i=e._fullLayout;if(!i)return[];var a=Hs.listIds(e,t),s=new Array(a.length),l;for(l=0;l<a.length;l++){var u=a[l];s[l]=i[u.charAt(0)+"axis"+u.substr(1)]}if(!r){var c=i._subplots.gl3d||[];for(l=0;l<c.length;l++){var v=i[c[l]];t?s.push(v[t+"axis"]):s.push(v.xaxis,v.yaxis,v.zaxis)}}return s};Hs.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var i=r._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)};Hs.getFromId=function(e,t,r){var i=e._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),r==="x"?t=t.replace(/y[0-9]*/,""):r==="y"&&(t=t.replace(/x[0-9]*/,"")),i[Hs.id2name(t)]};Hs.getFromTrace=function(e,t,r){var i=e._fullLayout,a=null;if(_$.traceIs(t,"gl3d")){var s=t.scene;s.substr(0,5)==="scene"&&(a=i[s][r+"axis"])}else a=Hs.getFromId(e,t[r+"axis"]||r);return a};Hs.idSort=function(e,t){var r=e.charAt(0),i=t.charAt(0);return r!==i?r>i?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)};Hs.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:!1};function tC(e,t){if(t&&t.length){for(var r=0;r<t.length;r++)if(t[r][e])return!0}return!1}Hs.isLinked=function(e,t){return tC(t,e._axisMatchGroups)||tC(t,e._axisConstraintGroups)}});var Nh=he((D1e,rC)=>{"use strict";function x$(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()}function b$(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}rC.exports={clearOutlineControllers:x$,clearOutline:b$}});var $_=he((z1e,aC)=>{"use strict";aC.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}});var t2=he(e2=>{"use strict";var rg=sa(),w$=Mo().SUBPLOT_PATTERN;e2.getSubplotCalcData=function(e,t,r){var i=rg.subplotsRegistry[t];if(!i)return[];for(var a=i.attr,s=[],l=0;l<e.length;l++){var u=e[l],c=u[0].trace;c[a]===r&&s.push(u)}return s};e2.getModuleCalcData=function(e,t,r){var i=[],a=[],s;if(typeof t=="string"?s=rg.getModule(t).plot:typeof t=="function"?s=t:s=t.plot,!s)return[i,e];for(var l=r,u=0;u<e.length;u++){var c=e[u],v=c[0].trace,m=v.zorder!==void 0;v.visible!==!0||v._length===0||(v._module&&v._module.plot===s&&(!m||v.zorder===l)?i.push(c):a.push(c))}return[i,a]};e2.getSubplotData=function(t,r,i){if(!rg.subplotsRegistry[r])return[];var a=rg.subplotsRegistry[r].attr,s=[],l,u,c;if(r==="gl2d"){var v=i.match(w$);u="x"+v[1],c="y"+v[2]}for(var m=0;m<t.length;m++)l=t[m],r==="gl2d"&&rg.traceIs(l,"gl2d")?l[a[0]]===u&&l[a[1]]===c&&s.push(l):l[a]===i&&s.push(l);return s}});var sC=he(_d=>{"use strict";var T$=sa(),B0=Nt();_d.manageCommandObserver=function(e,t,r,i){var a={},s=!0;t&&t._commandObserver&&(a=t._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var l=_d.hasSimpleAPICommandBindings(e,r,a.lookupTable);if(t&&t._commandObserver){if(l)return a;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,a}if(l){iC(e,l,a.cache),a.check=function(){if(s){var m=iC(e,l,a.cache);return m.changed&&i&&a.lookupTable[m.value]!==void 0&&(a.disable(),Promise.resolve(i({value:m.value,type:l.type,prop:l.prop,traces:l.traces,index:a.lookupTable[m.value]})).then(a.enable,a.enable)),m.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],c=0;c<u.length;c++)e._internalOn(u[c],a.check);a.remove=function(){for(var v=0;v<u.length;v++)e._removeInternalListener(u[v],a.check)}}else B0.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){s=!1},a.enable=function(){s=!0},t&&(t._commandObserver=a),a};_d.hasSimpleAPICommandBindings=function(e,t,r){var i,a=t.length,s;for(i=0;i<a;i++){var l,u=t[i],c=u.method,v=u.args;if(Array.isArray(v)||(v=[]),!c)return!1;var m=_d.computeAPICommandBindings(e,c,v);if(m.length!==1)return!1;if(!s)s=m[0],Array.isArray(s.traces)&&s.traces.sort();else{if(l=m[0],l.type!==s.type||l.prop!==s.prop)return!1;if(Array.isArray(s.traces))if(Array.isArray(l.traces)){l.traces.sort();for(var _=0;_<s.traces.length;_++)if(s.traces[_]!==l.traces[_])return!1}else return!1;else if(l.prop!==s.prop)return!1}l=m[0];var T=l.value;if(Array.isArray(T))if(T.length===1)T=T[0];else return!1;r&&(r[T]=i)}return s};function iC(e,t,r){var i,a,s,l=!1;if(t.type==="data")i=e._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")i=e._fullLayout;else return!1;return a=B0.nestedProperty(i,t.prop).get(),s=r[t.type]=r[t.type]||{},s.hasOwnProperty(t.prop)&&s[t.prop]!==a&&(l=!0),s[t.prop]=a,{changed:l,value:a}}_d.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=T$.apiMethodRegistry[t],a=[e];Array.isArray(r)||(r=[]);for(var s=0;s<r.length;s++)a.push(r[s]);return i.apply(null,a).catch(function(l){return B0.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})};_d.computeAPICommandBindings=function(e,t,r){var i;switch(Array.isArray(r)||(r=[]),t){case"restyle":i=oC(e,r);break;case"relayout":i=nC(e,r);break;case"update":i=oC(e,[r[0],r[2]]).concat(nC(e,[r[1]]));break;case"animate":i=A$(e,r);break;default:i=[]}return i};function A$(e,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function nC(e,t){var r=[],i=t[0],a={};if(typeof i=="string")a[i]=t[1];else if(B0.isPlainObject(i))a=i;else return r;return Yw(a,function(s,l,u){r.push({type:"layout",prop:s,value:u})},"",0),r}function oC(e,t){var r,i,a,s,l=[];if(i=t[0],a=t[1],r=t[2],s={},typeof i=="string")s[i]=a;else if(B0.isPlainObject(i))s=i,r===void 0&&(r=a);else return l;return r===void 0&&(r=null),Yw(s,function(u,c,v){var m,_;if(Array.isArray(v)){_=v.slice();var T=Math.min(_.length,e.data.length);r&&(T=Math.min(T,r.length)),m=[];for(var M=0;M<T;M++)m[M]=r?r[M]:M}else _=v,m=r?r.slice():null;if(m===null)Array.isArray(_)&&(_=_[0]);else if(Array.isArray(m)){if(!Array.isArray(_)){var k=_;_=[];for(var L=0;L<m.length;L++)_[L]=k}_.length=Math.min(m.length,_.length)}l.push({type:"data",prop:u,traces:m,value:_})},"",0),l}function Yw(e,t,r,i){Object.keys(e).forEach(function(a){var s=e[a];if(a[0]!=="_"){var l=r+(i>0?".":"")+a;B0.isPlainObject(s)?Yw(s,t,l,i+1):t(l,a,s)}})}});var jn=he((F1e,bC)=>{"use strict";var vC=Ka(),M$=b0().timeFormatLocale,S$=tw().formatLocale,ag=Ia(),k$=rw(),ai=sa(),dC=Fh(),C$=Di(),Er=Nt(),pC=Ua(),lC=Bi().BADNUM,Gs=ro(),E$=Nh().clearOutline,L$=$_(),Xw=Gy(),P$=Ow(),D$=t2().getModuleCalcData,Ww=Er.relinkPrivateKeys,xd=Er._,dr=bC.exports={};Er.extendFlat(dr,ai);dr.attributes=gs();dr.attributes.type.values=dr.allTypes;dr.fontAttrs=No();dr.layoutAttributes=C0();var a2=dr.transformsRegistry,i2=sC();dr.executeAPICommand=i2.executeAPICommand;dr.computeAPICommandBindings=i2.computeAPICommandBindings;dr.manageCommandObserver=i2.manageCommandObserver;dr.hasSimpleAPICommandBindings=i2.hasSimpleAPICommandBindings;dr.redrawText=function(e){return e=Er.getGraphDiv(e),new Promise(function(t){setTimeout(function(){e._fullLayout&&(ai.getComponentMethod("annotations","draw")(e),ai.getComponentMethod("legend","draw")(e),ai.getComponentMethod("colorbar","draw")(e),t(dr.previousPromises(e)))},300)})};dr.resize=function(e){e=Er.getGraphDiv(e);var t,r=new Promise(function(i,a){(!e||Er.isHidden(e))&&a(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=i,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||Er.isHidden(e)){i(e);return}delete e.layout.width,delete e.layout.height;var s=e.changed;e.autoplay=!0,ai.call("relayout",e,{autosize:!0}).then(function(){e.changed=s,e._resolveResize===i&&(delete e._resolveResize,i(e))})},100)});return t&&t(r),r};dr.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})};dr.addLinks=function(e){if(!(!e._context.showLink&&!e._context.showSources)){var t=e._fullLayout,r=Er.ensureSingle(t._paper,"text","js-plot-link-container",function(c){c.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:pC.defaultLine,"pointer-events":"all"}).each(function(){var v=vC.select(this);v.append("tspan").classed("js-link-to-tool",!0),v.append("tspan").classed("js-link-spacer",!0),v.append("tspan").classed("js-sourcelinks",!0)})}),i=r.node(),a={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=t._paper.attr("width")-7),r.attr(a);var s=r.select(".js-link-to-tool"),l=r.select(".js-link-spacer"),u=r.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&z$(e,s),l.text(s.text()&&u.text()?" - ":"")}};function z$(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" \xBB");if(e._context.sendData)r.on("click",function(){dr.sendDataToCloud(e)});else{var i=window.location.pathname.split("/"),a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+a})}}dr.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var r=vC.select(e).append("div").attr("id","hiddenform").style("display","none"),i=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),a=i.append("input").attr({type:"text",name:"data"});return a.node().value=dr.graphJson(e,!1,"keepdata"),i.node().submit(),r.remove(),e.emit("plotly_afterexport"),!1}};var I$=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],R$=["year","month","dayMonth","dayMonthYear"];dr.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults){delete i._skipDefaults;return}var a=e._fullLayout={},s=e.layout||{},l=e._fullData||[],u=e._fullData=[],c=e.data||[],v=e.calcdata||[],m=e._context||{},_;e._transitionData||dr.createTransitionData(e),a._dfltTitle={plot:xd(e,"Click to enter Plot title"),subtitle:xd(e,"Click to enter Plot subtitle"),x:xd(e,"Click to enter X axis title"),y:xd(e,"Click to enter Y axis title"),colorbar:xd(e,"Click to enter Colorscale title"),annotation:xd(e,"new text")},a._traceWord=xd(e,"trace");var T=uC(e,I$);if(a._mapboxAccessToken=m.mapboxAccessToken,i._initialAutoSizeIsDone){var M=i.width,k=i.height;dr.supplyLayoutGlobalDefaults(s,a,T),s.width||(a.width=M),s.height||(a.height=k),dr.sanitizeMargins(a)}else{dr.supplyLayoutGlobalDefaults(s,a,T);var L=!s.width||!s.height,E=a.autosize,I=m.autosizable,R=L&&(E||I);R?dr.plotAutoSize(e,s,a):L&&dr.sanitizeMargins(a),!E&&L&&(s.width=a.width,s.height=a.height)}a._d3locale=N$(T,a.separators),a._extraFormat=uC(e,R$),a._initialAutoSizeIsDone=!0,a._dataLength=c.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var N=a._subplots=q$(),z=a._splomAxes={x:{},y:{}},B=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=F$(l,c),a._globalTransforms=(e._context||{}).globalTransforms,dr.supplyDataDefaults(c,u,s,a);var H=Object.keys(z.x),V=Object.keys(z.y);if(H.length>1&&V.length>1){for(ai.getComponentMethod("grid","sizeDefaults")(s,a),_=0;_<H.length;_++)Er.pushUnique(N.xaxis,H[_]);for(_=0;_<V.length;_++)Er.pushUnique(N.yaxis,V[_]);for(var Y in B)Er.pushUnique(N.cartesian,Y)}if(a._has=dr._hasPlotType.bind(a),l.length===u.length)for(_=0;_<u.length;_++)Ww(u[_],l[_]);dr.supplyLayoutModuleDefaults(s,a,u,e._transitionData);var J=a._visibleModules,re=[];for(_=0;_<J.length;_++){var ne=J[_].crossTraceDefaults;ne&&Er.pushUnique(re,ne)}for(_=0;_<re.length;_++)re[_](u,a);a._hasOnlyLargeSploms=a._basePlotModules.length===1&&a._basePlotModules[0].name==="splom"&&H.length>15&&V.length>15&&a.shapes.length===0&&a.images.length===0,dr.linkSubplots(u,a,l,i),dr.cleanPlot(u,a,l,i);var oe=!!(i._has&&i._has("gl2d")),ue=!!(a._has&&a._has("gl2d")),me=!!(i._has&&i._has("cartesian")),Se=!!(a._has&&a._has("cartesian")),Ce=me||oe,Me=Se||ue;Ce&&!Me?i._bgLayer.remove():Me&&!Ce&&(a._shouldCreateBgLayer=!0),i._zoomlayer&&!e._dragging&&E$({_fullLayout:i}),B$(u,a),Ww(a,i),ai.getComponentMethod("colorscale","crossTraceDefaults")(u,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var _e=a._tracePreGUI,Te={},Ae;for(Ae in _e)Te[Ae]="old";for(_=0;_<u.length;_++)Ae=u[_]._fullInput.uid,Te[Ae]||(_e[Ae]={}),Te[Ae]="new";for(Ae in Te)Te[Ae]==="old"&&delete _e[Ae];yC(a),ai.getComponentMethod("rangeslider","makeData")(a),!r&&v.length===u.length&&dr.supplyDefaultsUpdateCalc(v,u)};dr.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var i=t[r],a=(e[r]||[])[0];if(a&&a.trace){var s=a.trace;if(s._hasCalcTransform){var l=s._arrayAttrs,u,c,v;for(u=0;u<l.length;u++)c=l[u],v=Er.nestedProperty(s,c).get().slice(),Er.nestedProperty(i,c).set(v)}a.trace=i}}};function F$(e,t){var r=t.length,i=[],a,s;for(a=0;a<e.length;a++){var l=e[a]._fullInput;l!==s&&i.push(l),s=l}var u=i.length,c=new Array(r),v={};function m(M,k){c[k]=M,v[M]=1}function _(M,k){if(M&&typeof M=="string"&&!v[M])return m(M,k),!0}for(a=0;a<r;a++){var T=t[a].uid;typeof T=="number"&&(T=String(T)),!_(T,a)&&(a<u&&_(i[a].uid,a)||m(Er.randstr(v),a))}return c}function q$(){var e=ai.collectableSubplotTypes,t={},r,i;if(!e){e=[];var a=ai.subplotsRegistry;for(var s in a){var l=a[s],u=l.attr;if(u&&(e.push(s),Array.isArray(u)))for(i=0;i<u.length;i++)Er.pushUnique(e,u[i])}}for(r=0;r<e.length;r++)t[e[r]]=[];return t}function uC(e,t){var r=e._context.locale;r||(r="en-US");var i=!1,a={};function s(_){for(var T=!0,M=0;M<t.length;M++){var k=t[M];a[k]||(_[k]?a[k]=_[k]:T=!1)}T&&(i=!0)}for(var l=0;l<2;l++){for(var u=e._context.locales,c=0;c<2;c++){var v=(u[r]||{}).format;if(v&&(s(v),i))break;u=ai.localeRegistry}var m=r.split("-")[0];if(i||m===r)break;r=m}return i||s(ai.localeRegistry.en.format),a}function N$(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(r){try{r=S$(e).format(Er.adjustFormat(r))}catch(i){return Er.warnBadFormat(r),Er.noFormat}return r},timeFormat:M$(e).utcFormat}}function B$(e,t){var r,i=[];t.meta&&(r=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var a=0;a<e.length;a++){var s=e[a];s.meta?i[s.index]=s._meta={meta:s.meta}:t.meta&&(s._meta={meta:t.meta}),t.meta&&(s._meta.layout={meta:t.meta})}i.length&&(r||(r=t._meta={}),r.data=i)}dr.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])};dr._hasPlotType=function(e){var t,r=this._basePlotModules||[];for(t=0;t<r.length;t++)if(r[t].name===e)return!0;var i=this._modules||[];for(t=0;t<i.length;t++){var a=i[t].name;if(a===e)return!0;var s=ai.modules[a];if(s&&s.categories[e])return!0}return!1};dr.cleanPlot=function(e,t,r,i){var a,s,l=i._basePlotModules||[];for(a=0;a<l.length;a++){var u=l[a];u.clean&&u.clean(e,t,r,i)}var c=i._has&&i._has("gl"),v=t._has&&t._has("gl");c&&!v&&i._glcontainer!==void 0&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var m=!!i._infolayer;e:for(a=0;a<r.length;a++){var _=r[a],T=_.uid;for(s=0;s<e.length;s++){var M=e[s];if(T===M.uid)continue e}m&&i._infolayer.select(".cb"+T).remove()}};dr.linkSubplots=function(e,t,r,i){var a,s,l=i._plots||{},u=t._plots={},c=t._subplots,v={_fullData:e,_fullLayout:t},m=c.cartesian.concat(c.gl2d||[]);for(a=0;a<m.length;a++){var _=m[a],T=l[_],M=Gs.getFromId(v,_,"x"),k=Gs.getFromId(v,_,"y"),L;for(T?L=u[_]=T:(L=u[_]={},L.id=_),M._counterAxes.push(k._id),k._counterAxes.push(M._id),M._subplotsWith.push(_),k._subplotsWith.push(_),L.xaxis=M,L.yaxis=k,L._hasClipOnAxisFalse=!1,s=0;s<e.length;s++){var E=e[s];if(E.xaxis===L.xaxis._id&&E.yaxis===L.yaxis._id&&E.cliponaxis===!1){L._hasClipOnAxisFalse=!0;break}}}var I=Gs.list(v,null,!0),R;for(a=0;a<I.length;a++){R=I[a];var N=null;R.overlaying&&(N=Gs.getFromId(v,R.overlaying),N&&N.overlaying&&(R.overlaying=!1,N=null)),R._mainAxis=N||R,N&&(R.domain=N.domain.slice()),R._anchorAxis=R.anchor==="free"?null:Gs.getFromId(v,R.anchor)}for(a=0;a<I.length;a++)if(R=I[a],R._counterAxes.sort(Gs.idSort),R._subplotsWith.sort(Er.subplotSort),R._mainSubplot=O$(R,t),R._counterAxes.length&&(R.spikemode&&R.spikemode.indexOf("across")!==-1||R.automargin&&R.mirror&&R.anchor!=="free"||ai.getComponentMethod("rangeslider","isVisible")(R))){var z=1,B=0;for(s=0;s<R._counterAxes.length;s++){var H=Gs.getFromId(v,R._counterAxes[s]);z=Math.min(z,H.domain[0]),B=Math.max(B,H.domain[1])}z<B&&(R._counterDomainMin=z,R._counterDomainMax=B)}};function O$(e,t){var r={_fullLayout:t},i=e._id.charAt(0)==="x",a=e._mainAxis._anchorAxis,s="",l="",u="";if(a&&(u=a._mainAxis._id,s=i?e._id+u:u+e._id),!s||!t._plots[s]){s="";for(var c=e._counterAxes,v=0;v<c.length;v++){var m=c[v],_=i?e._id+m:m+e._id;l||(l=_);var T=Gs.getFromId(r,m);if(u&&T.overlaying===u){s=_;break}}}return s||l}dr.clearExpandedTraceDefaultColors=function(e){var t,r,i;function a(l,u,c,v){r[v]=u,r.length=v+1,l.valType==="color"&&l.dflt===void 0&&t.push(r.join("."))}for(r=[],t=e._module._colorAttrs,t||(e._module._colorAttrs=t=[],dC.crawl(e._module.attributes,a)),i=0;i<t.length;i++){var s=Er.nestedProperty(e,"_input."+t[i]);s.get()||Er.nestedProperty(e,t[i]).set(null)}};dr.supplyDataDefaults=function(e,t,r,i){var a=i._modules,s=i._visibleModules,l=i._basePlotModules,u=0,c=0,v,m,_;i._transformModules=[];function T(V){t.push(V);var Y=V._module;Y&&(Er.pushUnique(a,Y),V.visible===!0&&Er.pushUnique(s,Y),Er.pushUnique(l,V._module.basePlotModule),u++,V._input.visible!==!1&&c++)}var M={},k=[],L=(r.template||{}).data||{},E=C$.traceTemplater(L);for(v=0;v<e.length;v++){if(_=e[v],m=E.newTrace(_),m.uid=i._traceUids[v],dr.supplyTraceDefaults(_,m,c,i,v),m.index=v,m._input=_,m._expandedIndex=u,m.transforms&&m.transforms.length)for(var I=_.visible!==!1&&m.visible===!1,R=U$(m,t,r,i),N=0;N<R.length;N++){var z=R[N],B={_template:m._template,type:m.type,uid:m.uid+N};I&&z.visible===!1&&delete z.visible,dr.supplyTraceDefaults(z,B,u,i,v),Ww(B,z),B.index=v,B._input=_,B._fullInput=m,B._expandedIndex=u,B._expandedInput=z,T(B)}else m._fullInput=m,m._expandedInput=m,T(m);ai.traceIs(m,"carpetAxis")&&(M[m.carpet]=m),ai.traceIs(m,"carpetDependent")&&k.push(v)}for(v=0;v<k.length;v++)if(m=t[k[v]],!!m.visible){var H=M[m.carpet];if(m._carpet=H,!H||!H.visible){m.visible=!1;continue}m.xaxis=H.xaxis,m.yaxis=H.yaxis}};dr.supplyAnimationDefaults=function(e){e=e||{};var t,r={};function i(a,s){return Er.coerce(e||{},r,Xw,a,s)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],t=0;t<e.frame.length;t++)r.frame[t]=dr.supplyAnimationFrameDefaults(e.frame[t]||{});else r.frame=dr.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],t=0;t<e.transition.length;t++)r.transition[t]=dr.supplyAnimationTransitionDefaults(e.transition[t]||{});else r.transition=dr.supplyAnimationTransitionDefaults(e.transition||{});return r};dr.supplyAnimationFrameDefaults=function(e){var t={};function r(i,a){return Er.coerce(e||{},t,Xw.frame,i,a)}return r("duration"),r("redraw"),t};dr.supplyAnimationTransitionDefaults=function(e){var t={};function r(i,a){return Er.coerce(e||{},t,Xw.transition,i,a)}return r("duration"),r("easing"),t};dr.supplyFrameDefaults=function(e){var t={};function r(i,a){return Er.coerce(e,t,P$,i,a)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),t};dr.supplyTraceDefaults=function(e,t,r,i,a){var s=i.colorway||pC.defaults,l=s[r%s.length],u;function c(N,z){return Er.coerce(e,t,dr.attributes,N,z)}var v=c("visible");c("type"),c("name",i._traceWord+" "+a),c("uirevision",i.uirevision);var m=dr.getModule(t);if(t._module=m,m){var _=m.basePlotModule,T=_.attr,M=_.attributes;if(T&&M){var k=i._subplots,L="";if(v||_.name!=="gl2d"){if(Array.isArray(T))for(u=0;u<T.length;u++){var E=T[u],I=Er.coerce(e,t,M,E);k[E]&&Er.pushUnique(k[E],I),L+=I}else L=Er.coerce(e,t,M,T);k[_.name]&&Er.pushUnique(k[_.name],L)}}}if(v){if(c("customdata"),c("ids"),c("meta"),ai.traceIs(t,"showLegend")?(Er.coerce(e,t,m.attributes.showlegend?m.attributes:dr.attributes,"showlegend"),c("legend"),c("legendwidth"),c("legendgroup"),c("legendgrouptitle.text"),c("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,m&&m.supplyDefaults(e,t,l,i),ai.traceIs(t,"noOpacity")||c("opacity"),ai.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),ai.traceIs(t,"noHover")||(t.hovertemplate||Er.coerceHoverinfo(e,t,i),t.type!=="parcats"&&ai.getComponentMethod("fx","supplyDefaults")(e,t,l,i)),m&&m.selectPoints){var R=c("selectedpoints");Er.isTypedArray(R)&&(t.selectedpoints=Array.from(R))}dr.supplyTransformDefaults(e,t,i)}return t};function mC(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var r=0;r<t.length;r++){var i=t[r],a=i._module||a2[i.type];if(a&&a.makesData)return!0}return!1}dr.hasMakesDataTransform=mC;dr.supplyTransformDefaults=function(e,t,r){if(t._length||mC(e)){var i=r._globalTransforms||[],a=r._transformModules||[];if(!(!Array.isArray(e.transforms)&&i.length===0))for(var s=e.transforms||[],l=i.concat(s),u=t.transforms=[],c=0;c<l.length;c++){var v=l[c],m=v.type,_=a2[m],T,M=!(v._module&&v._module===_),k=_&&typeof _.transform=="function";_||Er.warn("Unrecognized transform type "+m+"."),_&&_.supplyDefaults&&(M||k)?(T=_.supplyDefaults(v,t,r,e),T.type=m,T._module=_,Er.pushUnique(a,_)):T=Er.extendFlat({},v),u.push(T)}}};function U$(e,t,r,i){for(var a=e.transforms,s=[e],l=0;l<a.length;l++){var u=a[l],c=a2[u.type];c&&c.transform&&(s=c.transform(s,{transform:u,fullTrace:e,fullData:t,layout:r,fullLayout:i,transformIndex:l}))}return s}dr.supplyLayoutGlobalDefaults=function(e,t,r){function i(_,T){return Er.coerce(e,t,dr.layoutAttributes,_,T)}var a=e.template;Er.isPlainObject(a)&&(t.template=a,t._template=a.layout,t._dataTemplate=a.data),i("autotypenumbers");var s=Er.coerceFont(i,"font"),l=s.size;Er.coerceFont(i,"title.font",s,{overrideDflt:{size:Math.round(l*1.4)}}),i("title.text",t._dfltTitle.plot),i("title.xref");var u=i("title.yref");i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l");var c=i("title.automargin");i("title.x"),i("title.xanchor"),i("title.y"),i("title.yanchor"),i("title.subtitle.text",t._dfltTitle.subtitle),Er.coerceFont(i,"title.subtitle.font",s,{overrideDflt:{size:Math.round(t.title.font.size*.7)}}),c&&(u==="paper"&&(t.title.y!==0&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y===0?"top":"bottom")),u==="container"&&(t.title.y==="auto"&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y<.5?"bottom":"top")));var v=i("uniformtext.mode");v&&i("uniformtext.minsize"),i("autosize",!(e.width&&e.height)),i("width"),i("height"),i("minreducedwidth"),i("minreducedheight"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),e.width&&e.height&&dr.sanitizeMargins(t),ai.getComponentMethod("grid","sizeDefaults")(e,t),i("paper_bgcolor"),i("separators",r.decimal+r.thousands),i("hidesources"),i("colorway"),i("datarevision");var m=i("uirevision");i("editrevision",m),i("selectionrevision",m),ai.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),ai.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,i),ai.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,i),i("meta"),Er.isPlainObject(e.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),ai.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),ai.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,i),Er.coerce(e,t,L$,"scattermode")};function r2(e){return typeof e=="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}dr.plotAutoSize=function(t,r,i){var a=t._context||{},s=a.frameMargins,l,u,c=Er.isPlotDiv(t);if(c&&t.emit("plotly_autosize"),a.fillFrame)l=window.innerWidth,u=window.innerHeight,document.body.style.overflow="hidden";else{var v=c?window.getComputedStyle(t):{};if(l=r2(v.width)||r2(v.maxWidth)||i.width,u=r2(v.height)||r2(v.maxHeight)||i.height,ag(s)&&s>0){var m=1-2*s;l=Math.round(m*l),u=Math.round(m*u)}}var _=dr.layoutAttributes.width.min,T=dr.layoutAttributes.height.min;l<_&&(l=_),u<T&&(u=T);var M=!r.width&&Math.abs(i.width-l)>1,k=!r.height&&Math.abs(i.height-u)>1;(k||M)&&(M&&(i.width=l),k&&(i.height=u)),t._initialAutoSize||(t._initialAutoSize={width:l,height:u}),dr.sanitizeMargins(i)};dr.supplyLayoutModuleDefaults=function(e,t,r,i){var a=ai.componentsRegistry,s=t._basePlotModules,l,u,c,v=ai.subplotsRegistry.cartesian;for(l in a)c=a[l],c.includeBasePlot&&c.includeBasePlot(e,t);s.length||s.push(v),t._has("cartesian")&&(ai.getComponentMethod("grid","contentDefaults")(e,t),v.finalizeSubplots(e,t));for(var m in t._subplots)t._subplots[m].sort(Er.subplotSort);for(u=0;u<s.length;u++)c=s[u],c.supplyLayoutDefaults&&c.supplyLayoutDefaults(e,t,r);var _=t._modules;for(u=0;u<_.length;u++)c=_[u],c.supplyLayoutDefaults&&c.supplyLayoutDefaults(e,t,r);var T=t._transformModules;for(u=0;u<T.length;u++)c=T[u],c.supplyLayoutDefaults&&c.supplyLayoutDefaults(e,t,r,i);for(l in a)c=a[l],c.supplyLayoutDefaults&&c.supplyLayoutDefaults(e,t,r)};dr.purge=function(e){var t=e._fullLayout||{};t._glcontainer!==void 0&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),Er.clearThrottle(),Er.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()};dr.style=function(e){var t=e._fullLayout._visibleModules,r=[],i;for(i=0;i<t.length;i++){var a=t[i];a.style&&Er.pushUnique(r,a.style)}for(i=0;i<r.length;i++)r[i](e)};dr.sanitizeMargins=function(e){if(!(!e||!e.margin)){var t=e.width,r=e.height,i=e.margin,a=t-(i.l+i.r),s=r-(i.t+i.b),l;a<0&&(l=(t-1)/(i.l+i.r),i.l=Math.floor(l*i.l),i.r=Math.floor(l*i.r)),s<0&&(l=(r-1)/(i.t+i.b),i.t=Math.floor(l*i.t),i.b=Math.floor(l*i.b))}};dr.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};dr.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function yC(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}var gC=2,_C=2;dr.autoMargin=function(e,t,r){var i=e._fullLayout,a=i.width,s=i.height,l=i.margin,u=i.minreducedwidth,c=i.minreducedheight,v=Er.constrain(a-l.l-l.r,gC,u),m=Er.constrain(s-l.t-l.b,_C,c),_=Math.max(0,a-v),T=Math.max(0,s-m),M=i._pushmargin,k=i._pushmarginIds;if(l.autoexpand!==!1){if(!r)delete M[t],delete k[t];else{var L=r.pad;if(L===void 0&&(L=Math.min(12,l.l,l.r,l.t,l.b)),_){var E=(r.l+r.r)/_;E>1&&(r.l/=E,r.r/=E)}if(T){var I=(r.t+r.b)/T;I>1&&(r.t/=I,r.b/=I)}var R=r.xl!==void 0?r.xl:r.x,N=r.xr!==void 0?r.xr:r.x,z=r.yt!==void 0?r.yt:r.y,B=r.yb!==void 0?r.yb:r.y;M[t]={l:{val:R,size:r.l+L},r:{val:N,size:r.r+L},b:{val:B,size:r.b+L},t:{val:z,size:r.t+L}},k[t]=1}if(!i._replotting)return dr.doAutoMargin(e)}};function V$(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=Gs.list(e,"",!0);for(var r in t)if(t[r].autoshift||t[r].shift)return!0;return!1}dr.doAutoMargin=function(e){var t=e._fullLayout,r=t.width,i=t.height;t._size||(t._size={}),yC(t);var a=t._size,s=t.margin,l={t:0,b:0,l:0,r:0},u=Er.extendFlat({},a),c=s.l,v=s.r,m=s.t,_=s.b,T=t._pushmargin,M=t._pushmarginIds,k=t.minreducedwidth,L=t.minreducedheight;if(s.autoexpand!==!1){for(var E in T)M[E]||delete T[E];var I=e._fullLayout._reservedMargin;for(var R in I)for(var N in I[R]){var z=I[R][N];l[N]=Math.max(l[N],z)}T.base={l:{val:0,size:c},r:{val:1,size:v},t:{val:1,size:m},b:{val:0,size:_}};for(var B in l){var H=0;for(var V in T)V!=="base"&&ag(T[V][B].size)&&(H=T[V][B].size>H?T[V][B].size:H);var Y=Math.max(0,s[B]-H);l[B]=Math.max(0,l[B]-Y)}for(var J in T){var re=T[J].l||{},ne=T[J].b||{},oe=re.val,ue=re.size,me=ne.val,Se=ne.size,Ce=r-l.r-l.l,Me=i-l.t-l.b;for(var _e in T){if(ag(ue)&&T[_e].r){var Te=T[_e].r.val,Ae=T[_e].r.size;if(Te>oe){var Le=(ue*Te+(Ae-Ce)*oe)/(Te-oe),Ke=(Ae*(1-oe)+(ue-Ce)*(1-Te))/(Te-oe);Le+Ke>c+v&&(c=Le,v=Ke)}}if(ag(Se)&&T[_e].t){var ct=T[_e].t.val,it=T[_e].t.size;if(ct>me){var ut=(Se*ct+(it-Me)*me)/(ct-me),Ge=(it*(1-me)+(Se-Me)*(1-ct))/(ct-me);ut+Ge>_+m&&(_=ut,m=Ge)}}}}}var xt=Er.constrain(r-s.l-s.r,gC,k),at=Er.constrain(i-s.t-s.b,_C,L),At=Math.max(0,r-xt),kt=Math.max(0,i-at);if(At){var mt=(c+v)/At;mt>1&&(c/=mt,v/=mt)}if(kt){var ye=(_+m)/kt;ye>1&&(_/=ye,m/=ye)}if(a.l=Math.round(c)+l.l,a.r=Math.round(v)+l.r,a.t=Math.round(m)+l.t,a.b=Math.round(_)+l.b,a.p=Math.round(s.pad),a.w=Math.round(r)-a.l-a.r,a.h=Math.round(i)-a.t-a.b,!t._replotting&&(dr.didMarginChange(u,a)||V$(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var Re=3*(1+Object.keys(M).length);if(t._redrawFromAutoMarginCount<Re)return ai.call("_doPlot",e);t._size=u,Er.warn("Too many auto-margin redraws.")}H$(e)};function H$(e){var t=Gs.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var i=0;i<t.length;i++){var a=t[i][r];a&&a()}})}var fC=["l","r","t","b","p","w","h"];dr.didMarginChange=function(e,t){for(var r=0;r<fC.length;r++){var i=fC[r],a=e[i],s=t[i];if(!ag(a)||Math.abs(s-a)>1)return!0}return!1};dr.graphJson=function(e,t,r,i,a,s){(a&&t&&!e._fullData||a&&!t&&!e._fullLayout)&&dr.supplyDefaults(e);var l=a?e._fullData:e.data,u=a?e._fullLayout:e.layout,c=(e._transitionData||{})._frames;function v(T,M){if(typeof T=="function")return M?"_function_":null;if(Er.isPlainObject(T)){var k={},L;return Object.keys(T).sort().forEach(function(N){if(["_","["].indexOf(N.charAt(0))===-1){if(typeof T[N]=="function"){M&&(k[N]="_function");return}if(r==="keepdata"){if(N.substr(N.length-3)==="src")return}else if(r==="keepstream"){if(L=T[N+"src"],typeof L=="string"&&L.indexOf(":")>0&&!Er.isPlainObject(T.stream))return}else if(r!=="keepall"&&(L=T[N+"src"],typeof L=="string"&&L.indexOf(":")>0))return;k[N]=v(T[N],M)}}),k}var E=Array.isArray(T),I=Er.isTypedArray(T);if((E||I)&&T.dtype&&T.shape){var R=T.bdata;return v({dtype:T.dtype,shape:T.shape,bdata:Er.isArrayBuffer(R)?k$.encode(R):R},M)}return E?T.map(function(N){return v(N,M)}):I?Er.simpleMap(T,Er.identity):Er.isJSDate(T)?Er.ms2DateTimeLocal(+T):T}var m={data:(l||[]).map(function(T){var M=v(T);return t&&delete M.fit,M})};if(!t&&(m.layout=v(u),a)){var _=u._size;m.layout.computed={margin:{b:_.b,l:_.l,r:_.r,t:_.t}}}return c&&(m.frames=v(c)),s&&(m.config=v(e._context,!0)),i==="object"?m:JSON.stringify(m)};dr.modifyFrames=function(e,t){var r,i,a,s=e._transitionData._frames,l=e._transitionData._frameHash;for(r=0;r<t.length;r++)switch(i=t[r],i.type){case"replace":a=i.value;var u=(s[i.index]||{}).name,c=a.name;s[i.index]=l[c]=a,c!==u&&(delete l[u],l[c]=a);break;case"insert":a=i.value,l[a.name]=a,s.splice(i.index,0,a);break;case"delete":a=s[i.index],delete l[a.name],s.splice(i.index,1);break}return Promise.resolve()};dr.computeFrame=function(e,t){var r=e._transitionData._frameHash,i,a,s,l;if(!t)throw new Error("computeFrame must be given a string frame name");var u=r[t.toString()];if(!u)return!1;for(var c=[u],v=[u.name];u.baseframe&&(u=r[u.baseframe.toString()])&&v.indexOf(u.name)===-1;)c.push(u),v.push(u.name);for(var m={};u=c.pop();)if(u.layout&&(m.layout=dr.extendLayout(m.layout,u.layout)),u.data){if(m.data||(m.data=[]),a=u.traces,!a)for(a=[],i=0;i<u.data.length;i++)a[i]=i;for(m.traces||(m.traces=[]),i=0;i<u.data.length;i++)s=a[i],s!=null&&(l=m.traces.indexOf(s),l===-1&&(l=m.data.length,m.traces[l]=s),m.data[l]=dr.extendTrace(m.data[l],u.data[i]))}return m};dr.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},r=e._transitionData._frames,i=0;i<r.length;i++){var a=r[i];a&&a.name&&(t[a.name]=a)}};dr.extendObjectWithContainers=function(e,t,r){var i,a,s,l,u,c,v,m,_=Er.extendDeepNoArrays({},t||{}),T=Er.expandObjectPaths(_),M={};if(r&&r.length)for(s=0;s<r.length;s++)i=Er.nestedProperty(T,r[s]),a=i.get(),a===void 0?Er.nestedProperty(M,r[s]).set(null):(i.set(null),Er.nestedProperty(M,r[s]).set(a));if(e=Er.extendDeepNoArrays(e||{},T),r&&r.length){for(s=0;s<r.length;s++)if(u=Er.nestedProperty(M,r[s]),v=u.get(),!!v){for(c=Er.nestedProperty(e,r[s]),m=c.get(),Array.isArray(m)||(m=[],c.set(m)),l=0;l<v.length;l++){var k=v[l];k===null?m[l]=null:m[l]=dr.extendObjectWithContainers(m[l],k)}c.set(m)}}return e};dr.dataArrayContainers=["transforms","dimensions"];dr.layoutArrayContainers=ai.layoutArrayContainers;dr.extendTrace=function(e,t){return dr.extendObjectWithContainers(e,t,dr.dataArrayContainers)};dr.extendLayout=function(e,t){return dr.extendObjectWithContainers(e,t,dr.layoutArrayContainers)};dr.transition=function(e,t,r,i,a,s){var l={redraw:a.redraw},u={},c=[];return l.prepareFn=function(){for(var v=Array.isArray(t)?t.length:0,m=i.slice(0,v),_=0;_<m.length;_++){var T=m[_],M=e._fullData[T],k=M._module;if(k){if(k.animatable){var L=k.basePlotModule.name;u[L]||(u[L]=[]),u[L].push(T)}e.data[m[_]]=dr.extendTrace(e.data[m[_]],t[_])}}var E=Er.expandObjectPaths(Er.extendDeepNoArrays({},r)),I=/^[xy]axis[0-9]*$/;for(var R in E)I.test(R)&&delete E[R].range;dr.extendLayout(e.layout,E),delete e.calcdata,dr.supplyDefaults(e),dr.doCalcdata(e);var N=Er.expandObjectPaths(r);if(N){var z=e._fullLayout._plots;for(var B in z){var H=z[B],V=H.xaxis,Y=H.yaxis,J=V.range.slice(),re=Y.range.slice(),ne=null,oe=null,ue=null,me=null;Array.isArray(N[V._name+".range"])?ne=N[V._name+".range"].slice():Array.isArray((N[V._name]||{}).range)&&(ne=N[V._name].range.slice()),Array.isArray(N[Y._name+".range"])?oe=N[Y._name+".range"].slice():Array.isArray((N[Y._name]||{}).range)&&(oe=N[Y._name].range.slice()),J&&ne&&(V.r2l(J[0])!==V.r2l(ne[0])||V.r2l(J[1])!==V.r2l(ne[1]))&&(ue={xr0:J,xr1:ne}),re&&oe&&(Y.r2l(re[0])!==Y.r2l(oe[0])||Y.r2l(re[1])!==Y.r2l(oe[1]))&&(me={yr0:re,yr1:oe}),(ue||me)&&c.push(Er.extendFlat({plotinfo:H},ue,me))}}return Promise.resolve()},l.runFn=function(v){var m,_=e._fullLayout._basePlotModules,T=c.length,M;if(r)for(M=0;M<_.length;M++)_[M].transitionAxes&&_[M].transitionAxes(e,c,s,v);T?(m=Er.extendFlat({},s),m.duration=0,delete u.cartesian):m=s;for(var k in u){var L=u[k],E=e._fullData[L[0]]._module;E.basePlotModule.plot(e,L,m,v)}},xC(e,s,l)};dr.transitionFromReact=function(e,t,r,i){var a=e._fullLayout,s=a.transition,l={},u=[];return l.prepareFn=function(){var c=a._plots;l.redraw=!1,t.anim==="some"&&(l.redraw=!0),r.anim==="some"&&(l.redraw=!0);for(var v in c){var m=c[v],_=m.xaxis,T=m.yaxis,M=i[_._name].range.slice(),k=i[T._name].range.slice(),L=_.range.slice(),E=T.range.slice();_.setScale(),T.setScale();var I=null,R=null;(_.r2l(M[0])!==_.r2l(L[0])||_.r2l(M[1])!==_.r2l(L[1]))&&(I={xr0:M,xr1:L}),(T.r2l(k[0])!==T.r2l(E[0])||T.r2l(k[1])!==T.r2l(E[1]))&&(R={yr0:k,yr1:E}),(I||R)&&u.push(Er.extendFlat({plotinfo:m},I,R))}return Promise.resolve()},l.runFn=function(c){for(var v=e._fullData,m=e._fullLayout,_=m._basePlotModules,T,M,k,L=[],E=0;E<v.length;E++)L.push(E);function I(){if(e._fullLayout)for(var N=0;N<_.length;N++)_[N].transitionAxes&&_[N].transitionAxes(e,u,T,c)}function R(){if(e._fullLayout)for(var N=0;N<_.length;N++)_[N].plot(e,k,M,c)}u.length&&t.anim?s.ordering==="traces first"?(T=Er.extendFlat({},s,{duration:0}),k=L,M=s,setTimeout(I,s.duration),R()):(T=s,k=null,M=Er.extendFlat({},s,{duration:0}),setTimeout(R,T.duration),I()):u.length?(T=s,I()):t.anim&&(k=L,M=s,R())},xC(e,s,l)};function xC(e,t,r){var i=!1;function a(_){var T=Promise.resolve();if(!_)return T;for(;_.length;)T=T.then(_.shift());return T}function s(_){if(_)for(;_.length;)_.shift()}function l(){return e.emit("plotly_transitioning",[]),new Promise(function(_){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){i=!0}),r.redraw&&e._transitionData._interruptCallbacks.push(function(){return ai.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var T=0,M=0;function k(){return T++,function(){M++,!i&&M===T&&u(_)}}r.runFn(k),setTimeout(k())})}function u(_){if(e._transitionData)return s(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(r.redraw)return ai.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(_)}function c(){if(e._transitionData)return e._transitioning=!1,a(e._transitionData._interruptCallbacks)}var v=[dr.previousPromises,c,r.prepareFn,dr.rehover,dr.reselect,l],m=Er.syncOrAsync(v,e);return(!m||!m.then)&&(m=Promise.resolve()),m.then(function(){return e})}dr.doCalcdata=function(e,t){var r=Gs.list(e),i=e._fullData,a=e._fullLayout,s,l,u,c,v=new Array(i.length),m=(e.calcdata||[]).slice();for(e.calcdata=v,a._numBoxes=0,a._numViolins=0,a._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,a._piecolormap={},a._sunburstcolormap={},a._treemapcolormap={},a._iciclecolormap={},a._funnelareacolormap={},u=0;u<i.length;u++)if(Array.isArray(t)&&t.indexOf(u)===-1){v[u]=m[u];continue}for(u=0;u<i.length;u++)s=i[u],s._arrayAttrs=dC.findArrayAttributes(s),s._extremes={};var _=a._subplots.polar||[];for(u=0;u<_.length;u++)r.push(a[_[u]].radialaxis,a[_[u]].angularaxis);for(var T in a._colorAxes){var M=a[T];M.cauto!==!1&&(delete M.cmin,delete M.cmax)}var k=!1;function L(R){if(s=i[R],l=s._module,s.visible===!0&&s.transforms){if(l&&l.calc){var N=l.calc(e,s);N[0]&&N[0].t&&N[0].t._scene&&delete N[0].t._scene.dirty}for(c=0;c<s.transforms.length;c++){var z=s.transforms[c];l=a2[z.type],l&&l.calcTransform&&(s._hasCalcTransform=!0,k=!0,l.calcTransform(e,s,z))}}}function E(R,N){if(s=i[R],l=s._module,!!l.isContainer===N){var z=[];if(s.visible===!0&&s._length!==0){delete s._indexToPoints;var B=s.transforms||[];for(c=B.length-1;c>=0;c--)if(B[c].enabled){s._indexToPoints=B[c]._indexToPoints;break}l&&l.calc&&(z=l.calc(e,s))}(!Array.isArray(z)||!z[0])&&(z=[{x:lC,y:lC}]),z[0].t||(z[0].t={}),z[0].trace=s,v[R]=z}}for(cC(r,i,a),u=0;u<i.length;u++)E(u,!0);for(u=0;u<i.length;u++)L(u);for(k&&cC(r,i,a),u=0;u<i.length;u++)E(u,!0);for(u=0;u<i.length;u++)E(u,!1);hC(e);var I=Z$(r,e);if(I.length){for(a._numBoxes=0,a._numViolins=0,u=0;u<I.length;u++)E(I[u],!0);for(u=0;u<I.length;u++)E(I[u],!1);hC(e)}ai.getComponentMethod("fx","calc")(e),ai.getComponentMethod("errorbars","calc")(e)};var G$=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function Z$(e,t){var r=[],i,a,s,l,u;function c(_e,Te,Ae){var Le=Te._id.charAt(0);if(_e==="histogram2dcontour"){var Ke=Te._counterAxes[0],ct=Gs.getFromId(t,Ke),it=Le==="x"||Ke==="x"&&ct.type==="category",ut=Le==="y"||Ke==="y"&&ct.type==="category";return function(Ge,xt){return Ge===0||xt===0||it&&Ge===Ae[xt].length-1||ut&&xt===Ae.length-1?-1:(Le==="y"?xt:Ge)-1}}else return function(Ge,xt){return Le==="y"?xt:Ge}}var v={min:function(_e){return Er.aggNums(Math.min,null,_e)},max:function(_e){return Er.aggNums(Math.max,null,_e)},sum:function(_e){return Er.aggNums(function(Te,Ae){return Te+Ae},null,_e)},total:function(_e){return Er.aggNums(function(Te,Ae){return Te+Ae},null,_e)},mean:function(_e){return Er.mean(_e)},"geometric mean":function(_e){return Er.geometricMean(_e)},median:function(_e){return Er.median(_e)}};function m(_e,Te){return _e[1]-Te[1]}function _(_e,Te){return Te[1]-_e[1]}for(i=0;i<e.length;i++){var T=e[i];if(T.type==="category"){var M=T.categoryorder.match(G$);if(M){var k=M[1],L=M[2],E=T._id.charAt(0),I=E==="x",R=[];for(a=0;a<T._categories.length;a++)R.push([T._categories[a],[]]);for(a=0;a<T._traceIndices.length;a++){var N=T._traceIndices[a],z=t._fullData[N];if(z.visible===!0){var B=z.type;ai.traceIs(z,"histogram")&&(delete z._xautoBinFinished,delete z._yautoBinFinished);var H=B==="splom",V=B==="scattergl",Y=t.calcdata[N];for(s=0;s<Y.length;s++){var J=Y[s],re,ne;if(H){var oe=z._axesDim[T._id];if(!I){var ue=z._diag[oe][0];ue&&(T=t._fullLayout[Gs.id2name(ue)])}var me=J.trace.dimensions[oe].values;for(l=0;l<me.length;l++)for(re=T._categoriesMap[me[l]],u=0;u<J.trace.dimensions.length;u++)if(u!==oe){var Se=J.trace.dimensions[u];R[re][1].push(Se.values[l])}}else if(V){for(l=0;l<J.t.x.length;l++)I?(re=J.t.x[l],ne=J.t.y[l]):(re=J.t.y[l],ne=J.t.x[l]),R[re][1].push(ne);J.t&&J.t._scene&&delete J.t._scene.dirty}else if(J.hasOwnProperty("z")){ne=J.z;var Ce=c(z.type,T,ne);for(l=0;l<ne.length;l++)for(u=0;u<ne[l].length;u++)re=Ce(u,l),re+1&&R[re][1].push(ne[l][u])}else for(re=J.p,re===void 0&&(re=J[E]),ne=J.s,ne===void 0&&(ne=J.v),ne===void 0&&(ne=I?J.y:J.x),Array.isArray(ne)||(ne===void 0?ne=[]:ne=[ne]),l=0;l<ne.length;l++)R[re][1].push(ne[l])}}}T._categoriesValue=R;var Me=[];for(a=0;a<R.length;a++)Me.push([R[a][0],v[k](R[a][1])]);Me.sort(L==="descending"?_:m),T._categoriesAggregatedValue=Me,T._initialCategories=Me.map(function(_e){return _e[0]}),r=r.concat(T.sortByInitialCategories())}}}return r}function cC(e,t,r){var i={};function a(c){c.clearCalc(),c.type==="multicategory"&&c.setupMultiCategory(t),i[c._id]=1}Er.simpleMap(e,a);for(var s=r._axisMatchGroups||[],l=0;l<s.length;l++)for(var u in s[l])i[u]||a(r[Gs.id2name(u)])}function hC(e){var t=e._fullLayout,r=t._visibleModules,i={},a,s,l;for(s=0;s<r.length;s++){var u=r[s],c=u.crossTraceCalc;if(c){var v=u.basePlotModule.name;i[v]?Er.pushUnique(i[v],c):i[v]=[c]}}for(l in i){var m=i[l],_=t._subplots[l];if(Array.isArray(_))for(a=0;a<_.length;a++){var T=_[a],M=l==="cartesian"?t._plots[T]:t[T];for(s=0;s<m.length;s++)m[s](e,M,T)}else for(s=0;s<m.length;s++)m[s](e)}}dr.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()};dr.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()};dr.reselect=function(e){var t=e._fullLayout,r=(e.layout||{}).selections,i=t._previousSelections;t._previousSelections=r;var a=t._reselect||JSON.stringify(r)!==JSON.stringify(i);ai.getComponentMethod("selections","reselect")(e,a)};dr.generalUpdatePerTraceModule=function(e,t,r,i){var a=t.traceHash,s={},l;for(l=0;l<r.length;l++){var u=r[l],c=u[0].trace;c.visible&&(s[c.type]=s[c.type]||[],s[c.type].push(u))}for(var v in a)if(!s[v]){var m=a[v][0],_=m[0].trace;_.visible=!1,s[v]=[m]}for(var T in s){var M=s[T],k=M[0][0].trace._module;k.plot(e,t,Er.filterVisible(M),i)}t.traceHash=s};dr.plotBasePlot=function(e,t,r,i,a){var s=ai.getModule(e),l=D$(t.calcdata,s)[0];s.plot(t,l,i,a)};dr.cleanBasePlot=function(e,t,r,i,a){var s=a._has&&a._has(e),l=r._has&&r._has(e);s&&!l&&a["_"+e+"layer"].selectAll("g.trace").remove()}});var Bh=he(bd=>{"use strict";bd.xmlns="http://www.w3.org/2000/xmlns/";bd.svg="http://www.w3.org/2000/svg";bd.xlink="http://www.w3.org/1999/xlink";bd.svgAttrs={xmlns:bd.svg,"xmlns:xlink":bd.xlink}});var as=he((N1e,wC)=>{"use strict";wC.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}});var ho=he(Jl=>{"use strict";var Bn=Ka(),wc=Nt(),Y$=wc.strTranslate,jw=Bh(),W$=as().LINE_SPACING,X$=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;Jl.convertToTspans=function(e,t,r){var i=e.text(),a=!e.attr("data-notex")&&t&&t._context.typesetMath&&typeof MathJax!="undefined"&&i.match(X$),s=Bn.select(e.node().parentNode);if(s.empty())return;var l=e.attr("class")?e.attr("class").split(" ")[0]:"text";l+="-math",s.selectAll("svg."+l).remove(),s.selectAll("g."+l+"-group").remove(),e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function u(){s.empty()||(l=e.attr("class")+"-math",s.select("svg."+l).remove()),e.text("").style("white-space","pre");var c=see(e.node(),i);c&&e.style("pointer-events","all"),Jl.positionText(e),r&&r.call(e)}return a?(t&&t._promises||[]).push(new Promise(function(c){e.style("display","none");var v=parseInt(e.node().style.fontSize,10),m={fontSize:v};Q$(a[2],m,function(_,T,M){s.selectAll("svg."+l).remove(),s.selectAll("g."+l+"-group").remove();var k=_&&_.select("svg");if(!k||!k.node()){u(),c();return}var L=s.append("g").classed(l+"-group",!0).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});L.node().appendChild(k.node()),T&&T.node()&&k.node().insertBefore(T.node().cloneNode(!0),k.node().firstChild);var E=M.width,I=M.height;k.attr({class:l,height:I,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var R=e.node().style.fill||"black",N=k.select("g");N.attr({fill:R,stroke:R});var z=N.node().getBoundingClientRect(),B=z.width,H=z.height;(B>E||H>I)&&(k.style("overflow","hidden"),z=k.node().getBoundingClientRect(),B=z.width,H=z.height);var V=+e.attr("x"),Y=+e.attr("y"),J=v||e.node().getBoundingClientRect().height,re=-J/4;if(l[0]==="y")L.attr({transform:"rotate("+[-90,V,Y]+")"+Y$(-B/2,re-H/2)});else if(l[0]==="l")Y=re-H/2;else if(l[0]==="a"&&l.indexOf("atitle")!==0)V=0,Y=re;else{var ne=e.attr("text-anchor");V=V-B*(ne==="middle"?.5:ne==="end"?1:0),Y=Y+re-H/2}k.attr({x:V,y:Y}),r&&r.call(e,L),c(L)})})):u(),e};var j$=/(<|&lt;|&#60;)/g,J$=/(>|&gt;|&#62;)/g;function K$(e){return e.replace(j$,"\\lt ").replace(J$,"\\gt ")}var TC=[["$","$"],["\\(","\\)"]];function Q$(e,t,r){var i=parseInt((MathJax.version||"").split(".")[0]);if(i!==2&&i!==3){wc.warn("No MathJax version:",MathJax.version);return}var a,s,l,u,c=function(){return s=wc.extendDeepAll({},MathJax.Hub.config),l=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:TC},displayAlign:"left"})},v=function(){s=wc.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=TC},m=function(){if(a=MathJax.Hub.config.menuSettings.renderer,a!=="SVG")return MathJax.Hub.setRenderer("SVG")},_=function(){a=MathJax.config.startup.output,a!=="svg"&&(MathJax.config.startup.output="svg")},T=function(){var R="math-output-"+wc.randstr({},64);u=Bn.select("body").append("div").attr({id:R}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(K$(e));var N=u.node();return i===2?MathJax.Hub.Typeset(N):MathJax.typeset([N])},M=function(){var R=u.select(i===2?".MathJax_SVG":".MathJax"),N=!R.empty()&&u.select("svg").node();if(!N)wc.log("There was an error in the tex syntax.",e),r();else{var z=N.getBoundingClientRect(),B;i===2?B=Bn.select("body").select("#MathJax_SVG_glyphs"):B=R.select("defs"),r(R,B,z)}u.remove()},k=function(){if(a!=="SVG")return MathJax.Hub.setRenderer(a)},L=function(){a!=="svg"&&(MathJax.config.startup.output=a)},E=function(){return l!==void 0&&(MathJax.Hub.processSectionDelay=l),MathJax.Hub.Config(s)},I=function(){MathJax.config=s};i===2?MathJax.Hub.Queue(c,m,T,M,k,E):i===3&&(v(),_(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){T(),M(),L(),I()}))}var kC={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},$$={sub:"0.3em",sup:"-0.6em"},eee={sub:"-0.21em",sup:"0.42em"},AC="\u200B",MC=["http:","https:","mailto:","",void 0,":"],CC=Jl.NEWLINES=/(\r\n?|\n)/g,Kw=/(<[^<>]*>)/,Qw=/<(\/?)([^ >]*)(\s+(.*))?>/i,tee=/<br(\s+.*)?>/i;Jl.BR_TAG_ALL=/<br(\s+.*)?>/gi;var EC=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,LC=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,PC=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,ree=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function wd(e,t){if(!e)return null;var r=e.match(t),i=r&&(r[3]||r[4]);return i&&n2(i)}var aee=/(^|;)\s*color:/;Jl.plainText=function(e,t){t=t||{};for(var r=t.len!==void 0&&t.len!==-1?t.len:1/0,i=t.allowedTags!==void 0?t.allowedTags:["br"],a="...",s=a.length,l=e.split(Kw),u=[],c="",v=0,m=0;m<l.length;m++){var _=l[m],T=_.match(Qw),M=T&&T[2].toLowerCase();if(M)i.indexOf(M)!==-1&&(u.push(_),c=M);else{var k=_.length;if(v+k<r)u.push(_),v+=k;else if(v<r){var L=r-v;c&&(c!=="br"||L<=s||k<=s)&&u.pop(),r>s?u.push(_.substr(0,L-s)+a):u.push(_.substr(0,L));break}c=""}}return u.join("")};var iee={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},nee=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function n2(e){return e.replace(nee,function(t,r){var i;return r.charAt(0)==="#"?i=oee(r.charAt(1)==="x"?parseInt(r.substr(2),16):parseInt(r.substr(1),10)):i=iee[r],i||t})}Jl.convertEntities=n2;function oee(e){if(!(e>1114111)){var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;return e<=65535?r(e):r((e>>10)+55232,e%1024+56320)}}function see(e,t){t=t.replace(CC," ");var r=!1,i=[],a,s=-1;function l(){s++;var H=document.createElementNS(jw.svg,"tspan");Bn.select(H).attr({class:"line",dy:s*W$+"em"}),e.appendChild(H),a=H;var V=i;if(i=[{node:H}],V.length>1)for(var Y=1;Y<V.length;Y++)u(V[Y])}function u(H){var V=H.type,Y={},J;if(V==="a"){J="a";var re=H.target,ne=H.href,oe=H.popup;ne&&(Y={"xlink:xlink:show":re==="_blank"||re.charAt(0)!=="_"?"new":"replace",target:re,"xlink:xlink:href":ne},oe&&(Y.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+oe+'");return false;'))}else J="tspan";H.style&&(Y.style=H.style);var ue=document.createElementNS(jw.svg,J);if(V==="sup"||V==="sub"){c(a,AC),a.appendChild(ue);var me=document.createElementNS(jw.svg,"tspan");c(me,AC),Bn.select(me).attr("dy",eee[V]),Y.dy=$$[V],a.appendChild(ue),a.appendChild(me)}else a.appendChild(ue);Bn.select(ue).attr(Y),a=H.node=ue,i.push(H)}function c(H,V){H.appendChild(document.createTextNode(V))}function v(H){if(i.length===1){wc.log("Ignoring unexpected end tag </"+H+">.",t);return}var V=i.pop();H!==V.type&&wc.log("Start tag <"+V.type+"> doesnt match end tag <"+H+">. Pretending it did match.",t),a=i[i.length-1].node}var m=tee.test(t);m?l():(a=e,i=[{node:e}]);for(var _=t.split(Kw),T=0;T<_.length;T++){var M=_[T],k=M.match(Qw),L=k&&k[2].toLowerCase(),E=kC[L];if(L==="br")l();else if(E===void 0)c(a,n2(M));else if(k[1])v(L);else{var I=k[4],R={type:L},N=wd(I,EC);if(N?(N=N.replace(aee,"$1 fill:"),E&&(N+=";"+E)):E&&(N=E),N&&(R.style=N),L==="a"){r=!0;var z=wd(I,LC);if(z){var B=DC(z);B&&(R.href=B,R.target=wd(I,PC)||"_blank",R.popup=wd(I,ree))}}u(R)}}return r}function DC(e){var t=encodeURI(decodeURI(e)),r=document.createElement("a"),i=document.createElement("a");r.href=e,i.href=t;var a=r.protocol,s=i.protocol;return MC.indexOf(a)!==-1&&MC.indexOf(s)!==-1?t:""}Jl.sanitizeHTML=function(t){t=t.replace(CC," ");for(var r=document.createElement("p"),i=r,a=[],s=t.split(Kw),l=0;l<s.length;l++){var u=s[l],c=u.match(Qw),v=c&&c[2].toLowerCase();if(v in kC)if(c[1])a.length&&(i=a.pop());else{var m=c[4],_=wd(m,EC),T=_?{style:_}:{};if(v==="a"){var M=wd(m,LC);if(M){var k=DC(M);if(k){T.href=k;var L=wd(m,PC);L&&(T.target=L)}}}var E=document.createElement(v);i.appendChild(E),Bn.select(E).attr(T),i=E,a.push(E)}else i.appendChild(document.createTextNode(n2(u)))}var I="innerHTML";return r[I]};Jl.lineCount=function(t){return t.selectAll("tspan.line").size()||1};Jl.positionText=function(t,r,i){return t.each(function(){var a=Bn.select(this);function s(c,v){return v===void 0?(v=a.attr(c),v===null&&(a.attr(c,0),v=0)):a.attr(c,v),v}var l=s("x",r),u=s("y",i);this.nodeName==="text"&&a.selectAll("tspan.line").attr({x:l,y:u})})};function SC(e,t,r){var i=r.horizontalAlign,a=r.verticalAlign||"top",s=e.node().getBoundingClientRect(),l=t.node().getBoundingClientRect(),u,c,v;return a==="bottom"?c=function(){return s.bottom-u.height}:a==="middle"?c=function(){return s.top+(s.height-u.height)/2}:c=function(){return s.top},i==="right"?v=function(){return s.right-u.width}:i==="center"?v=function(){return s.left+(s.width-u.width)/2}:v=function(){return s.left},function(){u=this.node().getBoundingClientRect();var m=v()-l.left,_=c()-l.top,T=r.gd||{};if(r.gd){T._fullLayout._calcInverseTransform(T);var M=wc.apply3DTransform(T._fullLayout._invTransform)(m,_);m=M[0],_=M[1]}return this.style({top:_+"px",left:m+"px","z-index":1e3}),this}}var Jw="1px ";Jl.makeTextShadow=function(e){var t=Jw,r=Jw,i=Jw;return t+r+i+e+", -"+t+"-"+r+i+e+", "+t+"-"+r+i+e+", -"+t+r+i+e};Jl.makeEditable=function(e,t){var r=t.gd,i=t.delegate,a=Bn.dispatch("edit","input","cancel"),s=i||e;if(e.style({"pointer-events":i?"none":"all"}),e.size()!==1)throw new Error("boo");function l(){c(),e.style({opacity:0});var v=s.attr("class"),m;v?m="."+v.split(" ")[0]+"-math-group":m="[class*=-math-group]",m&&Bn.select(e.node().parentNode).select(m).style({opacity:0})}function u(v){var m=v.node(),_=document.createRange();_.selectNodeContents(m);var T=window.getSelection();T.removeAllRanges(),T.addRange(_),m.focus()}function c(){var v=Bn.select(r),m=v.select(".svg-container"),_=m.append("div"),T=e.node().style,M=parseFloat(T.fontSize||12),k=t.text;k===void 0&&(k=e.attr("data-unformatted")),_.classed("plugin-editable editable",!0).style({position:"absolute","font-family":T.fontFamily||"Arial","font-size":M,color:t.fill||T.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-M/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(k).call(SC(e,m,t)).on("blur",function(){r._editing=!1,e.text(this.textContent).style({opacity:1});var L=Bn.select(this).attr("class"),E;L?E="."+L.split(" ")[0]+"-math-group":E="[class*=-math-group]",E&&Bn.select(e.node().parentNode).select(E).style({opacity:0});var I=this.textContent;Bn.select(this).transition().duration(0).remove(),Bn.select(document).on("mouseup",null),a.edit.call(e,I)}).on("focus",function(){var L=this;r._editing=!0,Bn.select(document).on("mouseup",function(){if(Bn.event.target===L)return!1;document.activeElement===_.node()&&_.node().blur()})}).on("keyup",function(){Bn.event.which===27?(r._editing=!1,e.style({opacity:1}),Bn.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),a.cancel.call(e,this.textContent)):(a.input.call(e,this.textContent),Bn.select(this).call(SC(e,m,t)))}).on("keydown",function(){Bn.event.which===13&&this.blur()}).call(u)}return t.immediate?l():s.on("click",l),Bn.rebind(e,a,"on")}});var Pf=he((O1e,OC)=>{"use strict";var lee=Ka(),s2=Sf(),ng=Ia(),o2=Nt(),zC=Ua(),uee=fd().isValid;function fee(e,t,r){var i=t?o2.nestedProperty(e,t).get()||{}:e,a=i[r||"color"];a&&a._inputArray&&(a=a._inputArray);var s=!1;if(o2.isArrayOrTypedArray(a)){for(var l=0;l<a.length;l++)if(ng(a[l])){s=!0;break}}return o2.isPlainObject(i)&&(s||i.showscale===!0||ng(i.cmin)&&ng(i.cmax)||uee(i.colorscale)||o2.isPlainObject(i.colorbar))}var IC=["showscale","autocolorscale","colorscale","reversescale","colorbar"],ig=["min","max","mid","auto"];function FC(e){var t=e._colorAx,r=t||e,i={},a,s,l;for(s=0;s<IC.length;s++)l=IC[s],i[l]=r[l];if(t)for(a="c",s=0;s<ig.length;s++)l=ig[s],i[l]=r["c"+l];else{var u;for(s=0;s<ig.length;s++){if(l=ig[s],u="c"+l,u in r){i[l]=r[u];continue}u="z"+l,u in r&&(i[l]=r[u])}a=u.charAt(0)}return i._sync=function(c,v){var m=ig.indexOf(c)!==-1?a+c:c;r[m]=r["_"+m]=v},i}function qC(e){for(var t=FC(e),r=t.min,i=t.max,a=t.reversescale?NC(t.colorscale):t.colorscale,s=a.length,l=new Array(s),u=new Array(s),c=0;c<s;c++){var v=a[c];l[c]=r+v[0]*(i-r),u[c]=v[1]}return{domain:l,range:u}}function NC(e){for(var t=e.length,r=new Array(t),i=t-1,a=0;i>=0;i--,a++){var s=e[i];r[a]=[1-s[0],s[1]]}return r}function BC(e,t){t=t||{};for(var r=e.domain,i=e.range,a=i.length,s=new Array(a),l=0;l<a;l++){var u=s2(i[l]).toRgb();s[l]=[u.r,u.g,u.b,u.a]}var c=lee.scale.linear().domain(r).range(s).clamp(!0),v=t.noNumericCheck,m=t.returnArray,_;return v&&m?_=c:v?_=function(T){return RC(c(T))}:m?_=function(T){return ng(T)?c(T):s2(T).isValid()?T:zC.defaultLine}:_=function(T){return ng(T)?RC(c(T)):s2(T).isValid()?T:zC.defaultLine},_.domain=c.domain,_.range=function(){return i},_}function cee(e,t){return BC(qC(e),t)}function RC(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return s2(t).toRgbString()}OC.exports={hasColorscale:fee,extractOpts:FC,extractScale:qC,flipScale:NC,makeColorScaleFunc:BC,makeColorScaleFuncFromTrace:cee}});var e5=he((U1e,HC)=>{"use strict";var UC=xw(),hee=UC.FORMAT_LINK,vee=UC.DATE_FORMAT_LINK;function dee(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?$w:VC)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function $w(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+hee+"."].join(" ")}function VC(e,t){return $w(e,t)+[" And for dates see: "+vee+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}HC.exports={axisHoverFormat:dee,descriptionOnlyNumbers:$w,descriptionWithDates:VC}});var Bu=he((V1e,nE)=>{"use strict";var t5=No(),O0=kf(),iE=pc().dash,a5=hn().extendFlat,GC=Di().templatedArray,ZC=e5().descriptionWithDates,pee=Bi().ONEDAY,Df=Mo(),mee=Df.HOUR_PATTERN,yee=Df.WEEKDAY_PATTERN,r5={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},gee=a5({},r5,{values:r5.values.slice().concat(["sync"])});function YC(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var WC={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},XC={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},jC={valType:"data_array",editType:"ticks"},JC={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function KC(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=5),t}function QC(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var $C={valType:"color",dflt:O0.defaultLine,editType:"ticks"},eE={valType:"color",dflt:O0.lightLine,editType:"ticks"};function tE(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var rE=a5({},iE,{editType:"ticks"}),aE={valType:"boolean",editType:"ticks"};nE.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:O0.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:t5({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[Df.idRegex.x.toString(),Df.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[Df.idRegex.x.toString(),Df.idRegex.y.toString()],editType:"calc"},rangebreaks:GC("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[yee,mee,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:pee},editType:"calc"}),tickmode:gee,nticks:YC(),tick0:WC,dtick:XC,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:jC,ticktext:{valType:"data_array",editType:"ticks"},ticks:JC,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:KC(),tickwidth:QC(),tickcolor:$C,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:a5({},iE,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:t5({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:ZC("tick label")},tickformatstops:GC("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:ZC("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:O0.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:aE,gridcolor:eE,gridwidth:tE(),griddash:rE,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:O0.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:O0.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",Df.idRegex.x.toString(),Df.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",Df.idRegex.x.toString(),Df.idRegex.y.toString()],editType:"plot"},minor:{tickmode:r5,nticks:YC("minor"),tick0:WC,dtick:XC,tickvals:jC,ticks:JC,ticklen:KC("minor"),tickwidth:QC("minor"),tickcolor:$C,gridcolor:eE,gridwidth:tE("minor"),griddash:rE,showgrid:aE,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:t5({editType:"ticks"})}}});var l2=he((H1e,sE)=>{"use strict";var Yi=Bu(),i5=No(),oE=hn().extendFlat,_ee=ul().overrideAll;sE.exports=_ee({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:Yi.linecolor,outlinewidth:Yi.linewidth,bordercolor:Yi.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:Yi.minor.tickmode,nticks:Yi.nticks,tick0:Yi.tick0,dtick:Yi.dtick,tickvals:Yi.tickvals,ticktext:Yi.ticktext,ticks:oE({},Yi.ticks,{dflt:""}),ticklabeloverflow:oE({},Yi.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:Yi.ticklen,tickwidth:Yi.tickwidth,tickcolor:Yi.tickcolor,ticklabelstep:Yi.ticklabelstep,showticklabels:Yi.showticklabels,labelalias:Yi.labelalias,tickfont:i5({}),tickangle:Yi.tickangle,tickformat:Yi.tickformat,tickformatstops:Yi.tickformatstops,tickprefix:Yi.tickprefix,showtickprefix:Yi.showtickprefix,ticksuffix:Yi.ticksuffix,showticksuffix:Yi.showticksuffix,separatethousands:Yi.separatethousands,exponentformat:Yi.exponentformat,minexponent:Yi.minexponent,showexponent:Yi.showexponent,title:{text:{valType:"string"},font:i5({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:i5({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")});var Tc=he((Z1e,uE)=>{"use strict";var xee=l2(),bee=M0().counter,wee=O_(),lE=fd().scales,G1e=wee(lE);function u2(e){return"`"+e+"`"}uE.exports=function(t,r){t=t||"",r=r||{};var i=r.cLetter||"c",a="onlyIfNumerical"in r?r.onlyIfNumerical:!!t,s="noScale"in r?r.noScale:t==="marker.line",l="showScaleDflt"in r?r.showScaleDflt:i==="z",u=typeof r.colorscaleDflt=="string"?lE[r.colorscaleDflt]:null,c=r.editTypeOverride||"",v=t?t+".":"",m,_;"colorAttr"in r?(m=r.colorAttr,_=r.colorAttr):(m={z:"z",c:"color"}[i],_="in "+u2(v+m));var T=a?" Has an effect only if "+_+" is set to a numerical array.":"",M=i+"auto",k=i+"min",L=i+"max",E=i+"mid",I=u2(v+M),R=u2(v+k),N=u2(v+L),z=R+" and "+N,B={};B[k]=B[L]=void 0;var H={};H[M]=!1;var V={};return m==="color"&&(V.color={valType:"color",arrayOk:!0,editType:c||"style"},r.anim&&(V.color.anim=!0)),V[M]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:B},V[k]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:H},V[L]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:H},V[E]={valType:"number",dflt:null,editType:"calc",impliedEdits:B},V.colorscale={valType:"colorscale",editType:"calc",dflt:u,impliedEdits:{autocolorscale:!1}},V.autocolorscale={valType:"boolean",dflt:r.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},V.reversescale={valType:"boolean",dflt:!1,editType:"plot"},s||(V.showscale={valType:"boolean",dflt:l,editType:"calc"},V.colorbar=xee),r.noColorAxis||(V.coloraxis={valType:"subplotid",regex:bee("coloraxis"),dflt:null,editType:"calc"}),V}});var o5=he((Y1e,fE)=>{"use strict";var Tee=hn().extendFlat,Aee=Tc(),n5=fd().scales;fE.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:n5.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:n5.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:n5.RdBu,editType:"calc"}},coloraxis:Tee({_isSubplotObj:!0,editType:"calc"},Aee("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}});var s5=he((W1e,cE)=>{"use strict";var Mee=Nt();cE.exports=function(t){return Mee.isPlainObject(t.colorbar)}});var f5=he(u5=>{"use strict";var l5=Ia(),hE=Nt(),vE=Bi(),See=vE.ONEDAY,kee=vE.ONEWEEK;u5.dtick=function(e,t){var r=t==="log",i=t==="date",a=t==="category",s=i?See:1;if(!e)return s;if(l5(e))return e=Number(e),e<=0?s:a?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if(typeof e!="string"||!(i||r))return s;var l=e.charAt(0),u=e.substr(1);return u=l5(u)?Number(u):0,u<=0||!(i&&l==="M"&&u===Math.round(u)||r&&l==="L"||r&&l==="D"&&(u===1||u===2))?s:e};u5.tick0=function(e,t,r,i){if(t==="date")return hE.cleanDate(e,hE.dateTick0(r,i%kee===0?1:0));if(!(i==="D1"||i==="D2"))return l5(e)?Number(e):0}});var c5=he((j1e,pE)=>{"use strict";var dE=f5(),Cee=Nt().isArrayOrTypedArray,Eee=ll().isTypedArraySpec,Lee=ll().decodeTypedArraySpec;pE.exports=function(t,r,i,a,s){s||(s={});var l=s.isMinor,u=l?t.minor||{}:t,c=l?r.minor:r,v=l?"minor.":"";function m(R){var N=u[R];return Eee(N)&&(N=Lee(N)),N!==void 0?N:(c._template||{})[R]}var _=m("tick0"),T=m("dtick"),M=m("tickvals"),k=Cee(M)?"array":T?"linear":"auto",L=i(v+"tickmode",k);if(L==="auto"||L==="sync")i(v+"nticks");else if(L==="linear"){var E=c.dtick=dE.dtick(T,a);c.tick0=dE.tick0(_,a,r.calendar,E)}else if(a!=="multicategory"){var I=i(v+"tickvals");I===void 0?c.tickmode="auto":l||i("ticktext")}}});var v5=he((J1e,yE)=>{"use strict";var h5=Nt(),mE=Bu();yE.exports=function(t,r,i,a){var s=a.isMinor,l=s?t.minor||{}:t,u=s?r.minor:r,c=s?mE.minor:mE,v=s?"minor.":"",m=h5.coerce2(l,u,c,"ticklen",s?(r.ticklen||5)*.6:void 0),_=h5.coerce2(l,u,c,"tickwidth",s?r.tickwidth||1:void 0),T=h5.coerce2(l,u,c,"tickcolor",(s?r.tickcolor:void 0)||u.color),M=i(v+"ticks",!s&&a.outerTicks||m||_||T?"outside":"");M||(delete u.ticklen,delete u.tickwidth,delete u.tickcolor)}});var d5=he((K1e,gE)=>{"use strict";gE.exports=function(t){var r=["showexponent","showtickprefix","showticksuffix"],i=r.filter(function(s){return t[s]!==void 0}),a=function(s){return t[s]===t[i[0]]};if(i.every(a)||i.length===1)return t[i[0]]}});var Kl=he((Q1e,_E)=>{"use strict";var f2=Nt(),Pee=Di();_E.exports=function(t,r,i){var a=i.name,s=i.inclusionAttr||"visible",l=r[a],u=f2.isArrayOrTypedArray(t[a])?t[a]:[],c=r[a]=[],v=Pee.arrayTemplater(r,a,s),m,_;for(m=0;m<u.length;m++){var T=u[m];f2.isPlainObject(T)?_=v.newItem(T):(_=v.newItem({}),_[s]=!1),_._index=m,_[s]!==!1&&i.handleItemDefaults(T,_,r,i),c.push(_)}var M=v.defaultItems();for(m=0;m<M.length;m++)_=M[m],_._index=c.length,i.handleItemDefaults({},_,r,i,{}),c.push(_);if(f2.isArrayOrTypedArray(l)){var k=Math.min(l.length,c.length);for(m=0;m<k;m++)f2.relinkPrivateKeys(c[m],l[m])}return c}});var m5=he(($1e,bE)=>{"use strict";var p5=Nt(),Dee=Ua().contrast,xE=Bu(),zee=d5(),Iee=Kl();bE.exports=function(t,r,i,a,s){s||(s={});var l=i("labelalias");p5.isPlainObject(l)||delete r.labelalias;var u=zee(t),c=i("showticklabels");if(c){s.noTicklabelshift||i("ticklabelshift"),s.noTicklabelstandoff||i("ticklabelstandoff");var v=s.font||{},m=r.color,_=r.ticklabelposition||"",T=_.indexOf("inside")!==-1?Dee(s.bgColor):m&&m!==xE.color.dflt?m:v.color;if(p5.coerceFont(i,"tickfont",v,{overrideDflt:{color:T}}),!s.noTicklabelstep&&a!=="multicategory"&&a!=="log"&&i("ticklabelstep"),!s.noAng){var M=i("tickangle");!s.noAutotickangles&&M==="auto"&&i("autotickangles")}if(a!=="category"){var k=i("tickformat");Iee(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:Ree}),r.tickformatstops.length||delete r.tickformatstops,!s.noExp&&!k&&a!=="date"&&(i("showexponent",u),i("exponentformat"),i("minexponent"),i("separatethousands"))}}};function Ree(e,t){function r(a,s){return p5.coerce(e,t,xE.tickformatstops,a,s)}var i=r("enabled");i&&(r("dtickrange"),r("value"))}});var y5=he((e_e,wE)=>{"use strict";var Fee=d5();wE.exports=function(t,r,i,a,s){s||(s={});var l=s.tickSuffixDflt,u=Fee(t),c=i("tickprefix");c&&i("showtickprefix",u);var v=i("ticksuffix",l);v&&i("showticksuffix",u)}});var g5=he((t_e,TE)=>{"use strict";var Oh=Nt(),qee=Di(),Nee=c5(),Bee=v5(),Oee=m5(),Uee=y5(),Vee=l2();TE.exports=function(t,r,i){var a=qee.newContainer(r,"colorbar"),s=t.colorbar||{};function l(ne,oe){return Oh.coerce(s,a,Vee,ne,oe)}var u=i.margin||{t:0,b:0,l:0,r:0},c=i.width-u.l-u.r,v=i.height-u.t-u.b,m=l("orientation"),_=m==="v",T=l("thicknessmode");l("thickness",T==="fraction"?30/(_?c:v):30);var M=l("lenmode");l("len",M==="fraction"?1:_?v:c);var k=l("yref"),L=l("xref"),E=k==="paper",I=L==="paper",R,N,z,B="left";_?(z="middle",B=I?"left":"right",R=I?1.02:1,N=.5):(z=E?"bottom":"top",B="center",R=.5,N=E?1.02:1),Oh.coerce(s,a,{x:{valType:"number",min:I?-2:0,max:I?3:1,dflt:R}},"x"),Oh.coerce(s,a,{y:{valType:"number",min:E?-2:0,max:E?3:1,dflt:N}},"y"),l("xanchor",B),l("xpad"),l("yanchor",z),l("ypad"),Oh.noneOrAll(s,a,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var H=Oh.coerce(s,a,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:_?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",H.indexOf("inside")!==-1?"hide past domain":"hide past div"),Nee(s,a,l,"linear");var V=i.font,Y={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:V};H.indexOf("inside")!==-1&&(Y.bgColor="black"),Uee(s,a,l,"linear",Y),Oee(s,a,l,"linear",Y),Bee(s,a,l,"linear",Y),l("title.text",i._dfltTitle.colorbar);var J=a.showticklabels?a.tickfont:V,re=Oh.extendFlat({},V,{family:J.family,size:Oh.bigFont(J.size)});Oh.coerceFont(l,"title.font",re),l("title.side",_?"top":"right")}});var Td=he((r_e,SE)=>{"use strict";var AE=Ia(),x5=Nt(),Hee=s5(),Gee=g5(),ME=fd().isValid,Zee=sa().traceIs;function _5(e,t){var r=t.slice(0,t.length-1);return t?x5.nestedProperty(e,r).get()||{}:e}SE.exports=function e(t,r,i,a,s){var l=s.prefix,u=s.cLetter,c="_module"in r,v=_5(t,l),m=_5(r,l),_=_5(r._template||{},l)||{},T=function(){return delete t.coloraxis,delete r.coloraxis,e(t,r,i,a,s)};if(c){var M=i._colorAxes||{},k=a(l+"coloraxis");if(k){var L=Zee(r,"contour")&&x5.nestedProperty(r,"contours.coloring").get()||"heatmap",E=M[k];E?(E[2].push(T),E[0]!==L&&(E[0]=!1,x5.warn(["Ignoring coloraxis:",k,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[k]=[L,r,[T]];return}}var I=v[u+"min"],R=v[u+"max"],N=AE(I)&&AE(R)&&I<R,z=a(l+u+"auto",!N);z?a(l+u+"mid"):(a(l+u+"min"),a(l+u+"max"));var B=v.colorscale,H=_.colorscale,V;if(B!==void 0&&(V=!ME(B)),H!==void 0&&(V=!ME(H)),a(l+"autocolorscale",V),a(l+"colorscale"),a(l+"reversescale"),l!=="marker.line."){var Y;l&&c&&(Y=Hee(v));var J=a(l+"showscale",Y);J&&(l&&_&&(m._template=_),Gee(v,m,i))}}});var LE=he((a_e,EE)=>{"use strict";var kE=Nt(),Yee=Di(),CE=o5(),Wee=Td();EE.exports=function(t,r){function i(_,T){return kE.coerce(t,r,CE,_,T)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var a=r._colorAxes,s,l;function u(_,T){return kE.coerce(s,l,CE.coloraxis,_,T)}for(var c in a){var v=a[c];if(v[0])s=t[c]||{},l=Yee.newContainer(r,c,"coloraxis"),l._name=c,Wee(s,l,r,u,{prefix:"",cLetter:"c"});else{for(var m=0;m<v[2].length;m++)v[2][m]();delete r._colorAxes[c]}}}});var DE=he((i_e,PE)=>{"use strict";var Xee=Nt(),jee=Pf().hasColorscale,Jee=Pf().extractOpts;PE.exports=function(t,r){function i(m,_){var T=m["_"+_];T!==void 0&&(m[_]=T)}function a(m,_){var T=_.container?Xee.nestedProperty(m,_.container).get():m;if(T)if(T.coloraxis)T._colorAx=r[T.coloraxis];else{var M=Jee(T),k=M.auto;(k||M.min===void 0)&&i(T,_.min),(k||M.max===void 0)&&i(T,_.max),M.autocolorscale&&i(T,"colorscale")}}for(var s=0;s<t.length;s++){var l=t[s],u=l._module.colorbar;if(u)if(Array.isArray(u))for(var c=0;c<u.length;c++)a(l,u[c]);else a(l,u);jee(l,"marker.line")&&a(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var v in r._colorAxes)a(r[v],{min:"cmin",max:"cmax"})}});var og=he((n_e,IE)=>{"use strict";var zE=Ia(),b5=Nt(),Kee=Pf().extractOpts;IE.exports=function(t,r,i){var a=t._fullLayout,s=i.vals,l=i.containerStr,u=l?b5.nestedProperty(r,l).get():r,c=Kee(u),v=c.auto!==!1,m=c.min,_=c.max,T=c.mid,M=function(){return b5.aggNums(Math.min,null,s)},k=function(){return b5.aggNums(Math.max,null,s)};if(m===void 0?m=M():v&&(u._colorAx&&zE(m)?m=Math.min(m,M()):m=M()),_===void 0?_=k():v&&(u._colorAx&&zE(_)?_=Math.max(_,k()):_=k()),v&&T!==void 0&&(_-T>T-m?m=T-(_-T):_-T<T-m&&(_=T+(T-m))),m===_&&(m-=.5,_+=.5),c._sync("min",m),c._sync("max",_),c.autocolorscale){var L;m*_<0?L=a.colorscale.diverging:m>=0?L=a.colorscale.sequential:L=a.colorscale.sequentialminus,c._sync("colorscale",L)}}});var V0=he((o_e,RE)=>{"use strict";var c2=fd(),U0=Pf();RE.exports={moduleType:"component",name:"colorscale",attributes:Tc(),layoutAttributes:o5(),supplyLayoutDefaults:LE(),handleDefaults:Td(),crossTraceDefaults:DE(),calc:og(),scales:c2.scales,defaultScale:c2.defaultScale,getScale:c2.get,isValidScale:c2.isValid,hasColorscale:U0.hasColorscale,extractOpts:U0.extractOpts,extractScale:U0.extractScale,flipScale:U0.flipScale,makeColorScaleFunc:U0.makeColorScaleFunc,makeColorScaleFuncFromTrace:U0.makeColorScaleFuncFromTrace}});var is=he((s_e,qE)=>{"use strict";var FE=Nt(),Qee=ll().isTypedArraySpec;qE.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){var t=e.marker;return FE.isPlainObject(t)&&(FE.isArrayOrTypedArray(t.size)||Qee(t.size))}}});var w5=he((l_e,NE)=>{"use strict";var $ee=Ia();NE.exports=function(t,r){r||(r=2);var i=t.marker,a=i.sizeref||1,s=i.sizemin||0,l=i.sizemode==="area"?function(u){return Math.sqrt(u/a)}:function(u){return u/a};return function(u){var c=l(u/r);return $ee(c)&&c>0?Math.max(c,s):0}}});var Ac=he(Oo=>{"use strict";var BE=Nt();Oo.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};Oo.isTraceInSubplots=function(e,t){if(e.type==="splom"){for(var r=e.xaxes||[],i=e.yaxes||[],a=0;a<r.length;a++)for(var s=0;s<i.length;s++)if(t.indexOf(r[a]+i[s])!==-1)return!0;return!1}return t.indexOf(Oo.getSubplot(e))!==-1};Oo.flat=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t;return r};Oo.p2c=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=e[i].p2c(t);return r};Oo.getDistanceFunction=function(e,t,r,i){return e==="closest"?i||Oo.quadrature(t,r):e.charAt(0)==="x"?t:r};Oo.getClosest=function(e,t,r){if(r.index!==!1)r.index>=0&&r.index<e.length?r.distance=0:r.index=!1;else for(var i=0;i<e.length;i++){var a=t(e[i]);a<=r.distance&&(r.index=i,r.distance=a)}return r};Oo.inbox=function(e,t,r){return e*t<0||e===0?r:1/0};Oo.quadrature=function(e,t){return function(r){var i=e(r),a=t(r);return Math.sqrt(i*i+a*a)}};Oo.makeEventData=function(e,t,r){var i="index"in e?e.index:e.pointNumber,a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};if(t._indexToPoints){var s=t._indexToPoints[i];s.length===1?a.pointIndex=s[0]:a.pointIndices=s}else a.pointIndex=i;return t._module.eventData?a=t._module.eventData(a,e,t,r,i):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),e.zLabelVal!==void 0&&(a.z=e.zLabelVal)),Oo.appendArrayPointValue(a,t,i),a};Oo.appendArrayPointValue=function(e,t,r){var i=t._arrayAttrs;if(i)for(var a=0;a<i.length;a++){var s=i[a],l=OE(s);if(e[l]===void 0){var u=BE.nestedProperty(t,s).get(),c=UE(u,r);c!==void 0&&(e[l]=c)}}};Oo.appendArrayMultiPointValues=function(e,t,r){var i=t._arrayAttrs;if(i)for(var a=0;a<i.length;a++){var s=i[a],l=OE(s);if(e[l]===void 0){for(var u=BE.nestedProperty(t,s).get(),c=new Array(r.length),v=0;v<r.length;v++)c[v]=UE(u,r[v]);e[l]=c}}};var ete={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function OE(e){return ete[e]||e}function UE(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]]))return e[t[0]][t[1]]}else return e[t]}var tte={x:!0,y:!0},rte={"x unified":!0,"y unified":!0};Oo.isUnifiedHover=function(e){return typeof e!="string"?!1:!!rte[e]};Oo.isXYhover=function(e){return typeof e!="string"?!1:!!tte[e]}});var A5=he((f_e,VE)=>{VE.exports=ite;var T5={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ate=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function ite(e){var t=[];return e.replace(ate,function(r,i,a){var s=i.toLowerCase();for(a=ote(a),s=="m"&&a.length>2&&(t.push([i].concat(a.splice(0,2))),s="l",i=i=="m"?"l":"L");;){if(a.length==T5[s])return a.unshift(i),t.push(a);if(a.length<T5[s])throw new Error("malformed path data");t.push([i].concat(a.splice(0,T5[s])))}}),t}var nte=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function ote(e){var t=e.match(nte);return t?t.map(Number):[]}});var jE=he((c_e,XE)=>{"use strict";var ste=A5(),sr=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},ha="M0,0Z",HE=Math.sqrt(2),Uh=Math.sqrt(3),M5=Math.PI,S5=Math.cos,k5=Math.sin;XE.exports={circle:{n:0,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2),a="M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z";return r?da(t,r,a):a}},square:{n:1,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")}},diamond:{n:2,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.3,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"Z")}},cross:{n:3,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.4,2),a=sr(e*1.2,2);return da(t,r,"M"+a+","+i+"H"+i+"V"+a+"H-"+i+"V"+i+"H-"+a+"V-"+i+"H-"+i+"V-"+a+"H"+i+"V-"+i+"H"+a+"Z")}},x:{n:4,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.8/HE,2),a="l"+i+","+i,s="l"+i+",-"+i,l="l-"+i+",-"+i,u="l-"+i+","+i;return da(t,r,"M0,"+i+a+s+l+s+l+u+l+u+a+u+a+"Z")}},"triangle-up":{n:5,f:function(e,t,r){if(va(t))return ha;var i=sr(e*2/Uh,2),a=sr(e/2,2),s=sr(e,2);return da(t,r,"M-"+i+","+a+"H"+i+"L0,-"+s+"Z")}},"triangle-down":{n:6,f:function(e,t,r){if(va(t))return ha;var i=sr(e*2/Uh,2),a=sr(e/2,2),s=sr(e,2);return da(t,r,"M-"+i+",-"+a+"H"+i+"L0,"+s+"Z")}},"triangle-left":{n:7,f:function(e,t,r){if(va(t))return ha;var i=sr(e*2/Uh,2),a=sr(e/2,2),s=sr(e,2);return da(t,r,"M"+a+",-"+i+"V"+i+"L-"+s+",0Z")}},"triangle-right":{n:8,f:function(e,t,r){if(va(t))return ha;var i=sr(e*2/Uh,2),a=sr(e/2,2),s=sr(e,2);return da(t,r,"M-"+a+",-"+i+"V"+i+"L"+s+",0Z")}},"triangle-ne":{n:9,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.6,2),a=sr(e*1.2,2);return da(t,r,"M-"+a+",-"+i+"H"+i+"V"+a+"Z")}},"triangle-se":{n:10,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.6,2),a=sr(e*1.2,2);return da(t,r,"M"+i+",-"+a+"V"+i+"H-"+a+"Z")}},"triangle-sw":{n:11,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.6,2),a=sr(e*1.2,2);return da(t,r,"M"+a+","+i+"H-"+i+"V-"+a+"Z")}},"triangle-nw":{n:12,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.6,2),a=sr(e*1.2,2);return da(t,r,"M-"+i+","+a+"V-"+i+"H"+a+"Z")}},pentagon:{n:13,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.951,2),a=sr(e*.588,2),s=sr(-e,2),l=sr(e*-.309,2),u=sr(e*.809,2);return da(t,r,"M"+i+","+l+"L"+a+","+u+"H-"+a+"L-"+i+","+l+"L0,"+s+"Z")}},hexagon:{n:14,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2),a=sr(e/2,2),s=sr(e*Uh/2,2);return da(t,r,"M"+s+",-"+a+"V"+a+"L0,"+i+"L-"+s+","+a+"V-"+a+"L0,-"+i+"Z")}},hexagon2:{n:15,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2),a=sr(e/2,2),s=sr(e*Uh/2,2);return da(t,r,"M-"+a+","+s+"H"+a+"L"+i+",0L"+a+",-"+s+"H-"+a+"L-"+i+",0Z")}},octagon:{n:16,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.924,2),a=sr(e*.383,2);return da(t,r,"M-"+a+",-"+i+"H"+a+"L"+i+",-"+a+"V"+a+"L"+a+","+i+"H-"+a+"L-"+i+","+a+"V-"+a+"Z")}},star:{n:17,f:function(e,t,r){if(va(t))return ha;var i=e*1.4,a=sr(i*.225,2),s=sr(i*.951,2),l=sr(i*.363,2),u=sr(i*.588,2),c=sr(-i,2),v=sr(i*-.309,2),m=sr(i*.118,2),_=sr(i*.809,2),T=sr(i*.382,2);return da(t,r,"M"+a+","+v+"H"+s+"L"+l+","+m+"L"+u+","+_+"L0,"+T+"L-"+u+","+_+"L-"+l+","+m+"L-"+s+","+v+"H-"+a+"L0,"+c+"Z")}},hexagram:{n:18,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.66,2),a=sr(e*.38,2),s=sr(e*.76,2);return da(t,r,"M-"+s+",0l-"+a+",-"+i+"h"+s+"l"+a+",-"+i+"l"+a+","+i+"h"+s+"l-"+a+","+i+"l"+a+","+i+"h-"+s+"l-"+a+","+i+"l-"+a+",-"+i+"h-"+s+"Z")}},"star-triangle-up":{n:19,f:function(e,t,r){if(va(t))return ha;var i=sr(e*Uh*.8,2),a=sr(e*.8,2),s=sr(e*1.6,2),l=sr(e*4,2),u="A "+l+","+l+" 0 0 1 ";return da(t,r,"M-"+i+","+a+u+i+","+a+u+"0,-"+s+u+"-"+i+","+a+"Z")}},"star-triangle-down":{n:20,f:function(e,t,r){if(va(t))return ha;var i=sr(e*Uh*.8,2),a=sr(e*.8,2),s=sr(e*1.6,2),l=sr(e*4,2),u="A "+l+","+l+" 0 0 1 ";return da(t,r,"M"+i+",-"+a+u+"-"+i+",-"+a+u+"0,"+s+u+i+",-"+a+"Z")}},"star-square":{n:21,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.1,2),a=sr(e*2,2),s="A "+a+","+a+" 0 0 1 ";return da(t,r,"M-"+i+",-"+i+s+"-"+i+","+i+s+i+","+i+s+i+",-"+i+s+"-"+i+",-"+i+"Z")}},"star-diamond":{n:22,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.4,2),a=sr(e*1.9,2),s="A "+a+","+a+" 0 0 1 ";return da(t,r,"M-"+i+",0"+s+"0,"+i+s+i+",0"+s+"0,-"+i+s+"-"+i+",0Z")}},"diamond-tall":{n:23,f:function(e,t,r){if(va(t))return ha;var i=sr(e*.7,2),a=sr(e*1.4,2);return da(t,r,"M0,"+a+"L"+i+",0L0,-"+a+"L-"+i+",0Z")}},"diamond-wide":{n:24,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.4,2),a=sr(e*.7,2);return da(t,r,"M0,"+a+"L"+i+",0L0,-"+a+"L-"+i+",0Z")}},hourglass:{n:25,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M"+i+","+i+"H-"+i+"L"+i+",-"+i+"H-"+i+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M"+i+","+i+"V-"+i+"L-"+i+","+i+"V-"+i+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2),a=sr(e/HE,2);return da(t,r,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.3,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM0,-"+i+"V"+i+"M-"+i+",0H"+i)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.3,2),a=sr(e*.65,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM-"+a+",-"+a+"L"+a+","+a+"M-"+a+","+a+"L"+a+",-"+a)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.4,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.2,2),a=sr(e*.85,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,r){if(va(t))return ha;var i=sr(e/2,2),a=sr(e,2);return da(t,r,"M"+i+","+a+"V-"+a+"M"+(i-a)+",-"+a+"V"+a+"M"+a+","+i+"H-"+a+"M-"+a+","+(i-a)+"H"+a)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.2,2),a=sr(e*1.6,2),s=sr(e*.8,2);return da(t,r,"M-"+i+","+s+"L0,0M"+i+","+s+"L0,0M0,-"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.2,2),a=sr(e*1.6,2),s=sr(e*.8,2);return da(t,r,"M-"+i+",-"+s+"L0,0M"+i+",-"+s+"L0,0M0,"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.2,2),a=sr(e*1.6,2),s=sr(e*.8,2);return da(t,r,"M"+s+","+i+"L0,0M"+s+",-"+i+"L0,0M-"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.2,2),a=sr(e*1.6,2),s=sr(e*.8,2);return da(t,r,"M-"+s+","+i+"L0,0M-"+s+",-"+i+"L0,0M"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.4,2);return da(t,r,"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,r){if(va(t))return ha;var i=sr(e*1.4,2);return da(t,r,"M0,"+i+"V-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2),a=sr(e*2,2);return da(t,r,"M0,0L-"+i+","+a+"H"+i+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2),a=sr(e*2,2);return da(t,r,"M0,0L-"+i+",-"+a+"H"+i+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,r){if(va(t))return ha;var i=sr(e*2,2),a=sr(e,2);return da(t,r,"M0,0L"+i+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,r){if(va(t))return ha;var i=sr(e*2,2),a=sr(e,2);return da(t,r,"M0,0L-"+i+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2),a=sr(e*2,2);return da(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+","+a+"H"+i+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,r){if(va(t))return ha;var i=sr(e,2),a=sr(e*2,2);return da(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+",-"+a+"H"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,r){if(va(t))return ha;var i=sr(e*2,2),a=sr(e,2);return da(t,r,"M0,-"+a+"V"+a+"M0,0L"+i+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,r){if(va(t))return ha;var i=sr(e*2,2),a=sr(e,2);return da(t,r,"M0,-"+a+"V"+a+"M0,0L-"+i+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,r){if(va(t))return ha;var i=M5/2.5,a=2*e*S5(i),s=2*e*k5(i);return da(t,r,"M0,0L"+-a+","+s+"L"+a+","+s+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,r){if(va(t))return ha;var i=M5/4,a=2*e*S5(i),s=2*e*k5(i);return da(t,r,"M0,0L"+-a+","+s+"A "+2*e+","+2*e+" 0 0 1 "+a+","+s+"Z")},backoff:.4,noDot:!0}};function va(e){return e===null}var GE,ZE,YE,WE;function da(e,t,r){if((!e||e%360===0)&&!t)return r;if(YE===e&&WE===t&&GE===r)return ZE;YE=e,WE=t,GE=r;function i(E,I){var R=S5(E),N=k5(E),z=I[0],B=I[1]+(t||0);return[z*R-B*N,z*N+B*R]}for(var a=e/180*M5,s=0,l=0,u=ste(r),c="",v=0;v<u.length;v++){var m=u[v],_=m[0],T=s,M=l;if(_==="M"||_==="L")s=+m[1],l=+m[2];else if(_==="m"||_==="l")s+=+m[1],l+=+m[2];else if(_==="H")s=+m[1];else if(_==="h")s+=+m[1];else if(_==="V")l=+m[1];else if(_==="v")l+=+m[1];else if(_==="A"){s=+m[1],l=+m[2];var k=i(a,[+m[6],+m[7]]);m[6]=k[0],m[7]=k[1],m[3]=+m[3]+e}(_==="H"||_==="V")&&(_="L"),(_==="h"||_==="v")&&(_="l"),(_==="m"||_==="l")&&(s-=T,l-=M);var L=i(a,[s,l]);(_==="H"||_==="V")&&(_="L"),(_==="M"||_==="L"||_==="m"||_==="l")&&(m[1]=L[0],m[2]=L[1]),m[0]=_,c+=m[0]+m.slice(1).join(",")}return ZE=c,c}});var _i=he((h_e,pL)=>{"use strict";var ao=Ka(),bi=Nt(),lte=bi.numberFormat,kd=Ia(),z5=Sf(),v2=sa(),So=Ua(),ute=V0(),lg=bi.strTranslate,d2=ho(),fte=Bh(),cte=as(),hte=cte.LINE_SPACING,nL=T_().DESELECTDIM,vte=is(),dte=w5(),pte=Ac().appendArrayPointValue,vr=pL.exports={};vr.font=function(e,t){var r=t.variant,i=t.style,a=t.weight,s=t.color,l=t.size,u=t.family,c=t.shadow,v=t.lineposition,m=t.textcase;u&&e.style("font-family",u),l+1&&e.style("font-size",l+"px"),s&&e.call(So.fill,s),a&&e.style("font-weight",a),i&&e.style("font-style",i),r&&e.style("font-variant",r),m&&e.style("text-transform",C5(yte(m))),c&&e.style("text-shadow",c==="auto"?d2.makeTextShadow(So.contrast(s)):C5(c)),v&&e.style("text-decoration-line",C5(gte(v)))};function C5(e){return e==="none"?void 0:e}var mte={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function yte(e){return mte[e]}function gte(e){return e.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}vr.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};vr.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};vr.setRect=function(e,t,r,i,a){e.call(vr.setPosition,t,r).call(vr.setSize,i,a)};vr.translatePoint=function(e,t,r,i){var a=r.c2p(e.x),s=i.c2p(e.y);if(kd(a)&&kd(s)&&t.node())t.node().nodeName==="text"?t.attr("x",a).attr("y",s):t.attr("transform",lg(a,s));else return!1;return!0};vr.translatePoints=function(e,t,r){e.each(function(i){var a=ao.select(this);vr.translatePoint(i,a,t,r)})};vr.hideOutsideRangePoint=function(e,t,r,i,a,s){t.attr("display",r.isPtWithinRange(e,a)&&i.isPtWithinRange(e,s)?null:"none")};vr.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var r=t.xaxis,i=t.yaxis;e.each(function(a){var s=a[0].trace,l=s.xcalendar,u=s.ycalendar,c=v2.traceIs(s,"bar-like")?".bartext":".point,.textpoint";e.selectAll(c).each(function(v){vr.hideOutsideRangePoint(v,ao.select(this),r,i,l,u)})})}};vr.crispRound=function(e,t,r){return!t||!kd(t)?r||0:e._context.staticPlot?t:t<1?1:Math.round(t)};vr.singleLineStyle=function(e,t,r,i,a){t.style("fill","none");var s=(((e||[])[0]||{}).trace||{}).line||{},l=r||s.width||0,u=a||s.dash||"";So.stroke(t,i||s.color),vr.dashLine(t,u,l)};vr.lineGroupStyle=function(e,t,r,i){e.style("fill","none").each(function(a){var s=(((a||[])[0]||{}).trace||{}).line||{},l=t||s.width||0,u=i||s.dash||"";ao.select(this).call(So.stroke,r||s.color).call(vr.dashLine,u,l)})};vr.dashLine=function(e,t,r){r=+r||0,t=vr.dashStyle(t,r),e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};vr.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);return e==="solid"?e="":e==="dot"?e=r+"px,"+r+"px":e==="dash"?e=3*r+"px,"+3*r+"px":e==="longdash"?e=5*r+"px,"+5*r+"px":e==="dashdot"?e=3*r+"px,"+r+"px,"+r+"px,"+r+"px":e==="longdashdot"&&(e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e};function oL(e,t,r,i){var a=t.fillpattern,s=t.fillgradient,l=a&&vr.getPatternAttr(a.shape,0,"");if(l){var u=vr.getPatternAttr(a.bgcolor,0,null),c=vr.getPatternAttr(a.fgcolor,0,null),v=a.fgopacity,m=vr.getPatternAttr(a.size,0,8),_=vr.getPatternAttr(a.solidity,0,.3),T=t.uid;vr.pattern(e,"point",r,T,l,m,_,void 0,a.fillmode,u,c,v)}else if(s&&s.type!=="none"){var M=s.type,k="scatterfill-"+t.uid;if(i&&(k="legendfill-"+t.uid),!i&&(s.start!==void 0||s.stop!==void 0)){var L,E;M==="horizontal"?(L={x:s.start,y:0},E={x:s.stop,y:0}):M==="vertical"&&(L={x:0,y:s.start},E={x:0,y:s.stop}),L.x=t._xA.c2p(L.x===void 0?t._extremes.x.min[0].val:L.x,!0),L.y=t._yA.c2p(L.y===void 0?t._extremes.y.min[0].val:L.y,!0),E.x=t._xA.c2p(E.x===void 0?t._extremes.x.max[0].val:E.x,!0),E.y=t._yA.c2p(E.y===void 0?t._extremes.y.max[0].val:E.y,!0),e.call(uL,r,k,"linear",s.colorscale,"fill",L,E,!0,!1)}else M==="horizontal"&&(M=M+"reversed"),e.call(vr.gradient,r,k,M,s.colorscale,"fill")}else t.fillcolor&&e.call(So.fill,t.fillcolor)}vr.singleFillStyle=function(e,t){var r=ao.select(e.node()),i=r.data(),a=((i[0]||[])[0]||{}).trace||{};oL(e,a,t,!1)};vr.fillGroupStyle=function(e,t,r){e.style("stroke-width",0).each(function(i){var a=ao.select(this);i[0].trace&&oL(a,i[0].trace,t,r)})};var JE=jE();vr.symbolNames=[];vr.symbolFuncs=[];vr.symbolBackOffs=[];vr.symbolNeedLines={};vr.symbolNoDot={};vr.symbolNoFill={};vr.symbolList=[];Object.keys(JE).forEach(function(e){var t=JE[e],r=t.n;vr.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open"),vr.symbolNames[r]=e,vr.symbolFuncs[r]=t.f,vr.symbolBackOffs[r]=t.backoff||0,t.needLine&&(vr.symbolNeedLines[r]=!0),t.noDot?vr.symbolNoDot[r]=!0:vr.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot"),t.noFill&&(vr.symbolNoFill[r]=!0)});var _te=vr.symbolNames.length,xte="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";vr.symbolNumber=function(e){if(kd(e))e=+e;else if(typeof e=="string"){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=vr.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=_te||e>=400?0:Math.floor(Math.max(e,0))};function sL(e,t,r,i){var a=e%100;return vr.symbolFuncs[a](t,r,i)+(e>=200?xte:"")}var KE=lte("~f"),lL={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};vr.gradient=function(e,t,r,i,a,s){var l=lL[i];return uL(e,t,r,l.type,a,s,l.start,l.stop,!1,l.reversed)};function uL(e,t,r,i,a,s,l,u,c,v){var m=a.length,_;i==="linear"?_={node:"linearGradient",attrs:{x1:l.x,y1:l.y,x2:u.x,y2:u.y,gradientUnits:c?"userSpaceOnUse":"objectBoundingBox"},reversed:v}:i==="radial"&&(_={node:"radialGradient",reversed:v});for(var T=new Array(m),M=0;M<m;M++)_.reversed?T[m-1-M]=[KE((1-a[M][0])*100),a[M][1]]:T[M]=[KE(a[M][0]*100),a[M][1]];var k=t._fullLayout,L="g"+k._uid+"-"+r,E=k._defs.select(".gradients").selectAll("#"+L).data([i+T.join(";")],bi.identity);E.exit().remove(),E.enter().append(_.node).each(function(){var I=ao.select(this);_.attrs&&I.attr(_.attrs),I.attr("id",L);var R=I.selectAll("stop").data(T);R.exit().remove(),R.enter().append("stop"),R.each(function(N){var z=z5(N[1]);ao.select(this).attr({offset:N[0]+"%","stop-color":So.tinyRGB(z),"stop-opacity":z.getAlpha()})})}),e.style(s,I5(L,t)).style(s+"-opacity",null),e.classed("gradient_filled",!0)}vr.pattern=function(e,t,r,i,a,s,l,u,c,v,m,_){var T=t==="legend";u&&(c==="overlay"?(v=u,m=So.contrast(v)):(v=void 0,m=u));var M=r._fullLayout,k="p"+M._uid+"-"+i,L,E,I=function(ue,me,Se,Ce,Me){return Ce+(Me-Ce)*(ue-me)/(Se-me)},R,N,z,B,H={},V=z5(m),Y=So.tinyRGB(V),J=V.getAlpha(),re=_*J;switch(a){case"/":L=s*Math.sqrt(2),E=s*Math.sqrt(2),R="M-"+L/4+","+E/4+"l"+L/2+",-"+E/2+"M0,"+E+"L"+L+",0M"+L/4*3+","+E/4*5+"l"+L/2+",-"+E/2,N=l*s,B="path",H={d:R,opacity:re,stroke:Y,"stroke-width":N+"px"};break;case"\\":L=s*Math.sqrt(2),E=s*Math.sqrt(2),R="M"+L/4*3+",-"+E/4+"l"+L/2+","+E/2+"M0,0L"+L+","+E+"M-"+L/4+","+E/4*3+"l"+L/2+","+E/2,N=l*s,B="path",H={d:R,opacity:re,stroke:Y,"stroke-width":N+"px"};break;case"x":L=s*Math.sqrt(2),E=s*Math.sqrt(2),R="M-"+L/4+","+E/4+"l"+L/2+",-"+E/2+"M0,"+E+"L"+L+",0M"+L/4*3+","+E/4*5+"l"+L/2+",-"+E/2+"M"+L/4*3+",-"+E/4+"l"+L/2+","+E/2+"M0,0L"+L+","+E+"M-"+L/4+","+E/4*3+"l"+L/2+","+E/2,N=s-s*Math.sqrt(1-l),B="path",H={d:R,opacity:re,stroke:Y,"stroke-width":N+"px"};break;case"|":L=s,E=s,B="path",R="M"+L/2+",0L"+L/2+","+E,N=l*s,B="path",H={d:R,opacity:re,stroke:Y,"stroke-width":N+"px"};break;case"-":L=s,E=s,B="path",R="M0,"+E/2+"L"+L+","+E/2,N=l*s,B="path",H={d:R,opacity:re,stroke:Y,"stroke-width":N+"px"};break;case"+":L=s,E=s,B="path",R="M"+L/2+",0L"+L/2+","+E+"M0,"+E/2+"L"+L+","+E/2,N=s-s*Math.sqrt(1-l),B="path",H={d:R,opacity:re,stroke:Y,"stroke-width":N+"px"};break;case".":L=s,E=s,l<Math.PI/4?z=Math.sqrt(l*s*s/Math.PI):z=I(l,Math.PI/4,1,s/2,s/Math.sqrt(2)),B="circle",H={cx:L/2,cy:E/2,r:z,opacity:re,fill:Y};break}var ne=[a||"noSh",v||"noBg",m||"noFg",s,l].join(";"),oe=M._defs.select(".patterns").selectAll("#"+k).data([ne],bi.identity);oe.exit().remove(),oe.enter().append("pattern").each(function(){var ue=ao.select(this);if(ue.attr({id:k,width:L+"px",height:E+"px",patternUnits:"userSpaceOnUse",patternTransform:T?"scale(0.8)":""}),v){var me=z5(v),Se=So.tinyRGB(me),Ce=me.getAlpha(),Me=ue.selectAll("rect").data([0]);Me.exit().remove(),Me.enter().append("rect").attr({width:L+"px",height:E+"px",fill:Se,"fill-opacity":Ce})}var _e=ue.selectAll(B).data([0]);_e.exit().remove(),_e.enter().append(B).attr(H)}),e.style("fill",I5(k,r)).style("fill-opacity",null),e.classed("pattern_filled",!0)};vr.initGradients=function(e){var t=e._fullLayout,r=bi.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove(),ao.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)};vr.initPatterns=function(e){var t=e._fullLayout,r=bi.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove(),ao.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)};vr.getPatternAttr=function(e,t,r){return e&&bi.isArrayOrTypedArray(e)?t<e.length?e[t]:r:e};vr.pointStyle=function(e,t,r,i){if(e.size()){var a=vr.makePointStyleFns(t);e.each(function(s){vr.singlePointStyle(s,ao.select(this),t,a,r,i)})}};vr.singlePointStyle=function(e,t,r,i,a,s){var l=r.marker,u=l.line;if(s&&s.i>=0&&e.i===void 0&&(e.i=s.i),t.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):e.mo===void 0?l.opacity:e.mo),i.ms2mrc){var c;e.ms==="various"||l.size==="various"?c=3:c=i.ms2mrc(e.ms),e.mrc=c,i.selectedSizeFn&&(c=e.mrc=i.selectedSizeFn(e));var v=vr.symbolNumber(e.mx||l.symbol)||0;e.om=v%200>=100;var m=F5(e,r),_=R5(e,r);t.attr("d",sL(v,c,m,_))}var T=!1,M,k,L;if(e.so)L=u.outlierwidth,k=u.outliercolor,M=l.outliercolor;else{var E=(u||{}).width;L=(e.mlw+1||E+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in e?k=e.mlcc=i.lineScale(e.mlc):bi.isArrayOrTypedArray(u.color)?k=So.defaultLine:k=u.color,bi.isArrayOrTypedArray(l.color)&&(M=So.defaultLine,T=!0),"mc"in e?M=e.mcc=i.markerScale(e.mc):M=l.color||l.colors||"rgba(0,0,0,0)",i.selectedColorFn&&(M=i.selectedColorFn(e))}if(e.om)t.call(So.stroke,M).style({"stroke-width":(L||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:L)+"px");var I=l.gradient,R=e.mgt;R?T=!0:R=I&&I.type,bi.isArrayOrTypedArray(R)&&(R=R[0],lL[R]||(R=0));var N=l.pattern,z=N&&vr.getPatternAttr(N.shape,e.i,"");if(R&&R!=="none"){var B=e.mgc;B?T=!0:B=I.color;var H=r.uid;T&&(H+="-"+e.i),vr.gradient(t,a,H,R,[[0,B],[1,M]],"fill")}else if(z){var V=!1,Y=N.fgcolor;!Y&&s&&s.color&&(Y=s.color,V=!0);var J=vr.getPatternAttr(Y,e.i,s&&s.color||null),re=vr.getPatternAttr(N.bgcolor,e.i,null),ne=N.fgopacity,oe=vr.getPatternAttr(N.size,e.i,8),ue=vr.getPatternAttr(N.solidity,e.i,.3);V=V||e.mcc||bi.isArrayOrTypedArray(N.shape)||bi.isArrayOrTypedArray(N.bgcolor)||bi.isArrayOrTypedArray(N.fgcolor)||bi.isArrayOrTypedArray(N.size)||bi.isArrayOrTypedArray(N.solidity);var me=r.uid;V&&(me+="-"+e.i),vr.pattern(t,"point",a,me,z,oe,ue,e.mcc,N.fillmode,re,J,ne)}else bi.isArrayOrTypedArray(M)?So.fill(t,M[e.i]):So.fill(t,M);L&&So.stroke(t,k)}};vr.makePointStyleFns=function(e){var t={},r=e.marker;return t.markerScale=vr.tryColorscale(r,""),t.lineScale=vr.tryColorscale(r,"line"),v2.traceIs(e,"symbols")&&(t.ms2mrc=vte.isBubble(e)?dte(e):function(){return(r.size||6)/2}),e.selectedpoints&&bi.extendFlat(t,vr.makeSelectedPointStyleFns(e)),t};vr.makeSelectedPointStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},a=e.marker||{},s=r.marker||{},l=i.marker||{},u=a.opacity,c=s.opacity,v=l.opacity,m=c!==void 0,_=v!==void 0;(bi.isArrayOrTypedArray(u)||m||_)&&(t.selectedOpacityFn=function(z){var B=z.mo===void 0?a.opacity:z.mo;return z.selected?m?c:B:_?v:nL*B});var T=a.color,M=s.color,k=l.color;(M||k)&&(t.selectedColorFn=function(z){var B=z.mcc||T;return z.selected?M||B:k||B});var L=a.size,E=s.size,I=l.size,R=E!==void 0,N=I!==void 0;return v2.traceIs(e,"symbols")&&(R||N)&&(t.selectedSizeFn=function(z){var B=z.mrc||L/2;return z.selected?R?E/2:B:N?I/2:B}),t};vr.makeSelectedTextStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},a=e.textfont||{},s=r.textfont||{},l=i.textfont||{},u=a.color,c=s.color,v=l.color;return t.selectedTextColorFn=function(m){var _=m.tc||u;return m.selected?c||_:v||(c?_:So.addOpacity(_,nL))},t};vr.selectedPointStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=vr.makeSelectedPointStyleFns(t),i=t.marker||{},a=[];r.selectedOpacityFn&&a.push(function(s,l){s.style("opacity",r.selectedOpacityFn(l))}),r.selectedColorFn&&a.push(function(s,l){So.fill(s,r.selectedColorFn(l))}),r.selectedSizeFn&&a.push(function(s,l){var u=l.mx||i.symbol||0,c=r.selectedSizeFn(l);s.attr("d",sL(vr.symbolNumber(u),c,F5(l,t),R5(l,t))),l.mrc2=c}),a.length&&e.each(function(s){for(var l=ao.select(this),u=0;u<a.length;u++)a[u](l,s)})}};vr.tryColorscale=function(e,t){var r=t?bi.nestedProperty(e,t).get():e;if(r){var i=r.color;if((r.colorscale||r._colorAx)&&bi.isArrayOrTypedArray(i))return ute.makeColorScaleFuncFromTrace(r)}return bi.identity};var E5={start:1,end:-1,middle:0,bottom:1,top:-1};function fL(e,t,r,i,a){var s=ao.select(e.node().parentNode),l=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle",u=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle",c=i?i/.8+1:0,v=(d2.lineCount(e)-1)*hte+1,m=E5[u]*c,_=r*.75+E5[l]*c+(E5[l]-1)*v*r/2;e.attr("text-anchor",u),a||s.attr("transform",lg(m,_))}function cL(e,t){var r=e.ts||t.textfont.size;return kd(r)&&r>0?r:0}vr.textPointStyle=function(e,t,r){if(e.size()){var i;if(t.selectedpoints){var a=vr.makeSelectedTextStyleFns(t);i=a.selectedTextColorFn}var s=t.texttemplate,l=r._fullLayout;e.each(function(u){var c=ao.select(this),v=s?bi.extractOption(u,t,"txt","texttemplate"):bi.extractOption(u,t,"tx","text");if(!v&&v!==0){c.remove();return}if(s){var m=t._module.formatLabels,_=m?m(u,t,l):{},T={};pte(T,t,u.i);var M=t._meta||{};v=bi.texttemplateString(v,_,l._d3locale,T,u,M)}var k=u.tp||t.textposition,L=cL(u,t),E=i?i(u):u.tc||t.textfont.color;c.call(vr.font,{family:u.tf||t.textfont.family,weight:u.tw||t.textfont.weight,style:u.ty||t.textfont.style,variant:u.tv||t.textfont.variant,textcase:u.tC||t.textfont.textcase,lineposition:u.tE||t.textfont.lineposition,shadow:u.tS||t.textfont.shadow,size:L,color:E}).text(v).call(d2.convertToTspans,r).call(fL,k,L,u.mrc)})}};vr.selectedTextStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=vr.makeSelectedTextStyleFns(t);e.each(function(i){var a=ao.select(this),s=r.selectedTextColorFn(i),l=i.tp||t.textposition,u=cL(i,t);So.fill(a,s);var c=v2.traceIs(t,"bar-like");fL(a,l,u,i.mrc2||i.mrc,c)})}};var QE=.5;vr.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var r="M"+e[0],i=[],a;for(a=1;a<e.length-1;a++)i.push(h2(e[a-1],e[a],e[a+1],t));for(r+="Q"+i[0][0]+" "+e[1],a=2;a<e.length-1;a++)r+="C"+i[a-2][1]+" "+i[a-1][0]+" "+e[a];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1],r};vr.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var r="M"+e[0],i=e.length-1,a=[h2(e[i],e[0],e[1],t)],s;for(s=1;s<i;s++)a.push(h2(e[s-1],e[s],e[s+1],t));for(a.push(h2(e[i-1],e[i],e[0],t)),s=1;s<=i;s++)r+="C"+a[s-1][1]+" "+a[s][0]+" "+e[s];return r+="C"+a[i][1]+" "+a[0][0]+" "+e[0]+"Z",r};var hL,vL;function H0(e,t,r){return r&&(e=dL(e)),t?Sd(e[1]):Md(e[0])}function Md(e){var t=ao.round(e,2);return hL=t,t}function Sd(e){var t=ao.round(e,2);return vL=t,t}function h2(e,t,r,i){var a=e[0]-t[0],s=e[1]-t[1],l=r[0]-t[0],u=r[1]-t[1],c=Math.pow(a*a+s*s,QE/2),v=Math.pow(l*l+u*u,QE/2),m=(v*v*a-c*c*l)*i,_=(v*v*s-c*c*u)*i,T=3*v*(c+v),M=3*c*(c+v);return[[Md(t[0]+(T&&m/T)),Sd(t[1]+(T&&_/T))],[Md(t[0]-(M&&m/M)),Sd(t[1]-(M&&_/M))]]}var bte={hv:function(e,t,r){return"H"+Md(t[0])+"V"+H0(t,1,r)},vh:function(e,t,r){return"V"+Sd(t[1])+"H"+H0(t,0,r)},hvh:function(e,t,r){return"H"+Md((e[0]+t[0])/2)+"V"+Sd(t[1])+"H"+H0(t,0,r)},vhv:function(e,t,r){return"V"+Sd((e[1]+t[1])/2)+"H"+Md(t[0])+"V"+H0(t,1,r)}},wte=function(e,t,r){return"L"+H0(t,0,r)+","+H0(t,1,r)};vr.steps=function(e){var t=bte[e]||wte;return function(r){for(var i="M"+Md(r[0][0])+","+Sd(r[0][1]),a=r.length,s=1;s<a;s++)i+=t(r[s-1],r[s],s===a-1);return i}};function dL(e,t){var r=e.backoff,i=e.trace,a=e.d,s=e.i;if(r&&i&&i.marker&&i.marker.angle%360===0&&i.line&&i.line.shape!=="spline"){var l=bi.isArrayOrTypedArray(r),u=e,c=t?t[0]:hL||0,v=t?t[1]:vL||0,m=u[0],_=u[1],T=m-c,M=_-v,k=Math.atan2(M,T),L=l?r[s]:r;if(L==="auto"){var E=u.i;i.type==="scatter"&&E--;var I=u.marker,R=I.symbol;bi.isArrayOrTypedArray(R)&&(R=R[E]);var N=I.size;bi.isArrayOrTypedArray(N)&&(N=N[E]),L=I?vr.symbolBackOffs[vr.symbolNumber(R)]*N:0,L+=vr.getMarkerStandoff(a[E],i)||0}var z=m-L*Math.cos(k),B=_-L*Math.sin(k);(z<=m&&z>=c||z>=m&&z<=c)&&(B<=_&&B>=v||B>=_&&B<=v)&&(e=[z,B])}return e}vr.applyBackoff=dL;vr.makeTester=function(){var e=bi.ensureSingleById(ao.select("body"),"svg","js-plotly-tester",function(r){r.attr(fte.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=bi.ensureSingle(e,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});vr.tester=e,vr.testref=t};vr.savedBBoxes={};var L5=0,Tte=1e4;vr.bBox=function(e,t,r){r||(r=$E(e));var i;if(r){if(i=vr.savedBBoxes[r],i)return bi.extendFlat({},i)}else if(e.childNodes.length===1){var a=e.childNodes[0];if(r=$E(a),r){var s=+a.getAttribute("x")||0,l=+a.getAttribute("y")||0,u=a.getAttribute("transform");if(!u){var c=vr.bBox(a,!1,r);return s&&(c.left+=s,c.right+=s),l&&(c.top+=l,c.bottom+=l),c}if(r+="~"+s+"~"+l+"~"+u,i=vr.savedBBoxes[r],i)return bi.extendFlat({},i)}}var v,m;t?v=e:(m=vr.tester.node(),v=e.cloneNode(!0),m.appendChild(v)),ao.select(v).attr("transform",null).call(d2.positionText,0,0);var _=v.getBoundingClientRect(),T=vr.testref.node().getBoundingClientRect();t||m.removeChild(v);var M={height:_.height,width:_.width,left:_.left-T.left,top:_.top-T.top,right:_.right-T.left,bottom:_.bottom-T.top};return L5>=Tte&&(vr.savedBBoxes={},L5=0),r&&(vr.savedBBoxes[r]=M),L5++,bi.extendFlat({},M)};function $E(e){var t=e.getAttribute("data-unformatted");if(t!==null)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}vr.setClipUrl=function(e,t,r){e.attr("clip-path",I5(t,r))};function I5(e,t){if(!e)return null;var r=t._context,i=r._exportedPlot?"":r._baseUrl||"";return i?"url('"+i+"#"+e+"')":"url(#"+e+")"}vr.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",a=i.replace(t,function(s,l,u){return[l,u].join(" ")}).split(" ");return{x:+a[0]||0,y:+a[1]||0}};vr.setTranslate=function(e,t,r){var i=/(\btranslate\(.*?\);?)/,a=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",l=e[a]("transform")||"";return t=t||0,r=r||0,l=l.replace(i,"").trim(),l+=lg(t,r),l=l.trim(),e[s]("transform",l),l};vr.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",a=i.replace(t,function(s,l,u){return[l,u].join(" ")}).split(" ");return{x:+a[0]||1,y:+a[1]||1}};vr.setScale=function(e,t,r){var i=/(\bscale\(.*?\);?)/,a=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",l=e[a]("transform")||"";return t=t||1,r=r||1,l=l.replace(i,"").trim(),l+="scale("+t+","+r+")",l=l.trim(),e[s]("transform",l),l};var Ate=/\s*sc.*/;vr.setPointGroupScale=function(e,t,r){if(t=t||1,r=r||1,!!e){var i=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var a=(this.getAttribute("transform")||"").replace(Ate,"");a+=i,a=a.trim(),this.setAttribute("transform",a)})}};var Mte=/translate\([^)]*\)\s*$/;vr.setTextPointsScale=function(e,t,r){e&&e.each(function(){var i,a=ao.select(this),s=a.select("text");if(s.node()){var l=parseFloat(s.attr("x")||0),u=parseFloat(s.attr("y")||0),c=(a.attr("transform")||"").match(Mte);t===1&&r===1?i=[]:i=[lg(l,u),"scale("+t+","+r+")",lg(-l,-u)],c&&i.push(c),a.attr("transform",i.join(""))}})};function R5(e,t){var r;return e&&(r=e.mf),r===void 0&&(r=t.marker&&t.marker.standoff||0),!t._geo&&!t._xA?-r:r}vr.getMarkerStandoff=R5;var sg=Math.atan2,Ad=Math.cos,G0=Math.sin;function eL(e,t){var r=t[0],i=t[1];return[r*Ad(e)-i*G0(e),r*G0(e)+i*Ad(e)]}var tL,rL,aL,iL,P5,D5;function F5(e,t){var r=e.ma;r===void 0&&(r=t.marker.angle,(!r||bi.isArrayOrTypedArray(r))&&(r=0));var i,a,s=t.marker.angleref;if(s==="previous"||s==="north"){if(t._geo){var l=t._geo.project(e.lonlat);i=l[0],a=l[1]}else{var u=t._xA,c=t._yA;if(u&&c)i=u.c2p(e.x),a=c.c2p(e.y);else return 90}if(t._geo){var v=e.lonlat[0],m=e.lonlat[1],_=t._geo.project([v,m+1e-5]),T=t._geo.project([v+1e-5,m]),M=sg(T[1]-a,T[0]-i),k=sg(_[1]-a,_[0]-i),L;if(s==="north")L=r/180*Math.PI;else if(s==="previous"){var E=v/180*Math.PI,I=m/180*Math.PI,R=tL/180*Math.PI,N=rL/180*Math.PI,z=R-E,B=Ad(N)*G0(z),H=G0(N)*Ad(I)-Ad(N)*G0(I)*Ad(z);L=-sg(B,H)-Math.PI,tL=v,rL=m}var V=eL(M,[Ad(L),0]),Y=eL(k,[G0(L),0]);r=sg(V[1]+Y[1],V[0]+Y[0])/Math.PI*180,s==="previous"&&!(D5===t.uid&&e.i===P5+1)&&(r=null)}if(s==="previous"&&!t._geo)if(D5===t.uid&&e.i===P5+1&&kd(i)&&kd(a)){var J=i-aL,re=a-iL,ne=t.line&&t.line.shape||"",oe=ne.slice(ne.length-1);oe==="h"&&(re=0),oe==="v"&&(J=0),r+=sg(re,J)/Math.PI*180+90}else r=null}return aL=i,iL=a,P5=e.i,D5=t.uid,r}vr.getMarkerAngle=F5});var ug=he((v_e,_L)=>{"use strict";var Z0=Ka(),Ste=Ia(),kte=jn(),q5=sa(),Cd=Nt(),mL=Cd.strTranslate,p2=_i(),m2=Ua(),Y0=ho(),yL=T_(),Cte=as().OPPOSITE_SIDE,gL=/ [XY][0-9]* /,N5=1.6,B5=1.6;function Ete(e,t,r){var i=e._fullLayout,a=r.propContainer,s=r.propName,l=r.placeholder,u=r.traceIndex,c=r.avoid||{},v=r.attributes,m=r.transform,_=r.containerGroup,T=1,M=a.title,k=(M&&M.text?M.text:"").trim(),L=!1,E=M&&M.font?M.font:{},I=E.family,R=E.size,N=E.color,z=E.weight,B=E.style,H=E.variant,V=E.textcase,Y=E.lineposition,J=E.shadow,re=r.subtitlePropName,ne=!!re,oe=r.subtitlePlaceholder,ue=(a.title||{}).subtitle||{text:"",font:{}},me=ue.text.trim(),Se=!1,Ce=1,Me=ue.font,_e=Me.family,Te=Me.size,Ae=Me.color,Le=Me.weight,Ke=Me.style,ct=Me.variant,it=Me.textcase,ut=Me.lineposition,Ge=Me.shadow,xt;s==="title.text"?xt="titleText":s.indexOf("axis")!==-1?xt="axisTitleText":s.indexOf("colorbar"!==-1)&&(xt="colorbarTitleText");var at=e._context.edits[xt];function At(Ot,gt){return Ot===void 0||gt===void 0?!1:Ot.replace(gL," % ")===gt.replace(gL," % ")}k===""?T=0:At(k,l)&&(at||(k=""),T=.2,L=!0),ne&&(me===""?Ce=0:At(me,oe)&&(at||(me=""),Ce=.2,Se=!0)),r._meta?k=Cd.templateString(k,r._meta):i._meta&&(k=Cd.templateString(k,i._meta));var kt=k||me||at,mt;_||(_=Cd.ensureSingle(i._infolayer,"g","g-"+t),mt=i._hColorbarMoveTitle);var ye=_.selectAll("text."+t).data(kt?[0]:[]);ye.enter().append("text"),ye.text(k).attr("class",t),ye.exit().remove();var Re=null,xe=t+"-subtitle",et=me||at;if(ne&&et&&(Re=_.selectAll("text."+xe).data(et?[0]:[]),Re.enter().append("text"),Re.text(me).attr("class",xe),Re.exit().remove()),!kt)return _;function vt(Ot,gt){Cd.syncOrAsync([tt,Bt],{title:Ot,subtitle:gt})}function tt(Ot){var gt=Ot.title,Et=Ot.subtitle,ir;!m&&mt&&(m={}),m?(ir="",m.rotate&&(ir+="rotate("+[m.rotate,v.x,v.y]+")"),(m.offset||mt)&&(ir+=mL(0,(m.offset||0)-(mt||0)))):ir=null,gt.attr("transform",ir);function Gt(Tt){if(Tt){var wt=Z0.select(Tt.node().parentNode).select("."+xe);if(!wt.empty()){var Vt=Tt.node().getBBox();if(Vt.height){var Kt=Vt.y+Vt.height+N5*Te;wt.attr("y",Kt)}}}}if(gt.style("opacity",T*m2.opacity(N)).call(p2.font,{color:m2.rgb(N),size:Z0.round(R,2),family:I,weight:z,style:B,variant:H,textcase:V,shadow:J,lineposition:Y}).attr(v).call(Y0.convertToTspans,e,Gt),Et){var Ne=_.select("."+t+"-math-group"),ft=gt.node().getBBox(),pt=Ne.node()?Ne.node().getBBox():void 0,xr=pt?pt.y+pt.height+N5*Te:ft.y+ft.height+B5*Te,pr=Cd.extendFlat({},v,{y:xr});Et.attr("transform",ir),Et.style("opacity",Ce*m2.opacity(Ae)).call(p2.font,{color:m2.rgb(Ae),size:Z0.round(Te,2),family:_e,weight:Le,style:Ke,variant:ct,textcase:it,shadow:Ge,lineposition:ut}).attr(pr).call(Y0.convertToTspans,e)}return kte.previousPromises(e)}function Bt(Ot){var gt=Ot.title,Et=Z0.select(gt.node().parentNode);if(c&&c.selection&&c.side&&k){Et.attr("transform",null);var ir=Cte[c.side],Gt=c.side==="left"||c.side==="top"?-1:1,Ne=Ste(c.pad)?c.pad:2,ft=p2.bBox(Et.node()),pt={t:0,b:0,l:0,r:0},xr=e._fullLayout._reservedMargin;for(var pr in xr)for(var Tt in xr[pr]){var wt=xr[pr][Tt];pt[Tt]=Math.max(pt[Tt],wt)}var Vt={left:pt.l,top:pt.t,right:i.width-pt.r,bottom:i.height-pt.b},Kt=c.maxShift||Gt*(Vt[c.side]-ft[c.side]),Ht=0;if(Kt<0)Ht=Kt;else{var Ut=c.offsetLeft||0,er=c.offsetTop||0;ft.left-=Ut,ft.right-=Ut,ft.top-=er,ft.bottom-=er,c.selection.each(function(){var br=p2.bBox(this);Cd.bBoxIntersect(ft,br,Ne)&&(Ht=Math.max(Ht,Gt*(br[c.side]-ft[ir])+Ne))}),Ht=Math.min(Kt,Ht),a._titleScoot=Math.abs(Ht)}if(Ht>0||Kt<0){var Mr={left:[-Ht,0],right:[Ht,0],top:[0,-Ht],bottom:[0,Ht]}[c.side];Et.attr("transform",mL(Mr[0],Mr[1]))}}}ye.call(vt,Re);function Mt(Ot,gt){Ot.text(gt).on("mouseover.opacity",function(){Z0.select(this).transition().duration(yL.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){Z0.select(this).transition().duration(yL.HIDE_PLACEHOLDER).style("opacity",0)})}if(at&&(k?ye.on(".opacity",null):(Mt(ye,l),L=!0),ye.call(Y0.makeEditable,{gd:e}).on("edit",function(Ot){u!==void 0?q5.call("_guiRestyle",e,s,Ot,u):q5.call("_guiRelayout",e,s,Ot)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(vt)}).on("input",function(Ot){this.text(Ot||" ").call(Y0.positionText,v.x,v.y)}),ne)){if(ne&&!k){var Ct=ye.node().getBBox(),Rt=Ct.y+Ct.height+B5*Te;Re.attr("y",Rt)}me?Re.on(".opacity",null):(Mt(Re,oe),Se=!0),Re.call(Y0.makeEditable,{gd:e}).on("edit",function(Ot){q5.call("_guiRelayout",e,"title.subtitle.text",Ot)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(vt)}).on("input",function(Ot){this.text(Ot||" ").call(Y0.positionText,Re.attr("x"),Re.attr("y"))})}return ye.classed("js-placeholder",L),Re&&Re.classed("js-placeholder",Se),_}_L.exports={draw:Ete,SUBTITLE_PADDING_EM:B5,SUBTITLE_PADDING_MATHJAX_EM:N5}});var A2=he((d_e,AL)=>{"use strict";var Lte=Ka(),Pte=b0().utcFormat,zi=Nt(),Dte=zi.numberFormat,zf=Ia(),Vh=zi.cleanNumber,zte=zi.ms2DateTime,xL=zi.dateTime2ms,If=zi.ensureNumber,bL=zi.isArrayOrTypedArray,Hh=Bi(),y2=Hh.FP_SAFE,Ou=Hh.BADNUM,Ite=Hh.LOG_CLIP,Rte=Hh.ONEWEEK,g2=Hh.ONEDAY,_2=Hh.ONEHOUR,wL=Hh.ONEMIN,TL=Hh.ONESEC,x2=ro(),T2=Mo(),b2=T2.HOUR_PATTERN,w2=T2.WEEKDAY_PATTERN;function fg(e){return Math.pow(10,e)}function O5(e){return e!=null}AL.exports=function(t,r){r=r||{};var i=t._id||"x",a=i.charAt(0);function s(z,B){if(z>0)return Math.log(z)/Math.LN10;if(z<=0&&B&&t.range&&t.range.length===2){var H=t.range[0],V=t.range[1];return .5*(H+V-2*Ite*Math.abs(H-V))}else return Ou}function l(z,B,H,V){if((V||{}).msUTC&&zf(z))return+z;var Y=xL(z,H||t.calendar);if(Y===Ou)if(zf(z)){z=+z;var J=Math.floor(zi.mod(z+.05,1)*10),re=Math.round(z-J/10);Y=xL(new Date(re))+J/10}else return Ou;return Y}function u(z,B,H){return zte(z,B,H||t.calendar)}function c(z){return t._categories[Math.round(z)]}function v(z){if(O5(z)){if(t._categoriesMap===void 0&&(t._categoriesMap={}),t._categoriesMap[z]!==void 0)return t._categoriesMap[z];t._categories.push(typeof z=="number"?String(z):z);var B=t._categories.length-1;return t._categoriesMap[z]=B,B}return Ou}function m(z,B){for(var H=new Array(B),V=0;V<B;V++){var Y=(z[0]||[])[V],J=(z[1]||[])[V];H[V]=_([Y,J])}return H}function _(z){if(t._categoriesMap)return t._categoriesMap[z]}function T(z){var B=_(z);if(B!==void 0)return B;if(zf(z))return+z}function M(z){return zf(z)?+z:_(z)}function k(z,B,H){return Lte.round(H+B*z,2)}function L(z,B,H){return(z-H)/B}var E=function(B){return zf(B)?k(B,t._m,t._b):Ou},I=function(z){return L(z,t._m,t._b)};if(t.rangebreaks){var R=a==="y";E=function(z){if(!zf(z))return Ou;var B=t._rangebreaks.length;if(!B)return k(z,t._m,t._b);var H=R;t.range[0]>t.range[1]&&(H=!H);for(var V=H?-1:1,Y=V*z,J=0,re=0;re<B;re++){var ne=V*t._rangebreaks[re].min,oe=V*t._rangebreaks[re].max;if(Y<ne)break;if(Y>oe)J=re+1;else{J=Y<(ne+oe)/2?re:re+1;break}}var ue=t._B[J]||0;return isFinite(ue)?k(z,t._m2,ue):0},I=function(z){var B=t._rangebreaks.length;if(!B)return L(z,t._m,t._b);for(var H=0,V=0;V<B&&!(z<t._rangebreaks[V].pmin);V++)z>t._rangebreaks[V].pmax&&(H=V+1);return L(z,t._m2,t._B[H])}}t.c2l=t.type==="log"?s:If,t.l2c=t.type==="log"?fg:If,t.l2p=E,t.p2l=I,t.c2p=t.type==="log"?function(z,B){return E(s(z,B))}:E,t.p2c=t.type==="log"?function(z){return fg(I(z))}:I,["linear","-"].indexOf(t.type)!==-1?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=Vh,t.c2d=t.c2r=t.l2d=t.l2r=If,t.d2p=t.r2p=function(z){return t.l2p(Vh(z))},t.p2d=t.p2r=I,t.cleanPos=If):t.type==="log"?(t.d2r=t.d2l=function(z,B){return s(Vh(z),B)},t.r2d=t.r2c=function(z){return fg(Vh(z))},t.d2c=t.r2l=Vh,t.c2d=t.l2r=If,t.c2r=s,t.l2d=fg,t.d2p=function(z,B){return t.l2p(t.d2r(z,B))},t.p2d=function(z){return fg(I(z))},t.r2p=function(z){return t.l2p(Vh(z))},t.p2r=I,t.cleanPos=If):t.type==="date"?(t.d2r=t.r2d=zi.identity,t.d2c=t.r2c=t.d2l=t.r2l=l,t.c2d=t.c2r=t.l2d=t.l2r=u,t.d2p=t.r2p=function(z,B,H){return t.l2p(l(z,0,H))},t.p2d=t.p2r=function(z,B,H){return u(I(z),B,H)},t.cleanPos=function(z){return zi.cleanDate(z,Ou,t.calendar)}):t.type==="category"?(t.d2c=t.d2l=v,t.r2d=t.c2d=t.l2d=c,t.d2r=t.d2l_noadd=T,t.r2c=function(z){var B=M(z);return B!==void 0?B:t.fraction2r(.5)},t.l2r=t.c2r=If,t.r2l=M,t.d2p=function(z){return t.l2p(t.r2c(z))},t.p2d=function(z){return c(I(z))},t.r2p=t.d2p,t.p2r=I,t.cleanPos=function(z){return typeof z=="string"&&z!==""?z:If(z)}):t.type==="multicategory"&&(t.r2d=t.c2d=t.l2d=c,t.d2r=t.d2l_noadd=T,t.r2c=function(z){var B=T(z);return B!==void 0?B:t.fraction2r(.5)},t.r2c_just_indices=_,t.l2r=t.c2r=If,t.r2l=T,t.d2p=function(z){return t.l2p(t.r2c(z))},t.p2d=function(z){return c(I(z))},t.r2p=t.d2p,t.p2r=I,t.cleanPos=function(z){return Array.isArray(z)||typeof z=="string"&&z!==""?z:If(z)},t.setupMultiCategory=function(z){var B=t._traceIndices,H,V,Y=t._matchGroup;if(Y&&t._categories.length===0){for(var J in Y)if(J!==i){var re=r[x2.id2name(J)];B=B.concat(re._traceIndices)}}var ne=[[0,{}],[0,{}]],oe=[];for(H=0;H<B.length;H++){var ue=z[B[H]];if(a in ue){var me=ue[a],Se=ue._length||zi.minRowLength(me);if(bL(me[0])&&bL(me[1]))for(V=0;V<Se;V++){var Ce=me[0][V],Me=me[1][V];O5(Ce)&&O5(Me)&&(oe.push([Ce,Me]),Ce in ne[0][1]||(ne[0][1][Ce]=ne[0][0]++),Me in ne[1][1]||(ne[1][1][Me]=ne[1][0]++))}}}for(oe.sort(function(_e,Te){var Ae=ne[0][1],Le=Ae[_e[0]]-Ae[Te[0]];if(Le)return Le;var Ke=ne[1][1];return Ke[_e[1]]-Ke[Te[1]]}),H=0;H<oe.length;H++)v(oe[H])}),t.fraction2r=function(z){var B=t.r2l(t.range[0]),H=t.r2l(t.range[1]);return t.l2r(B+z*(H-B))},t.r2fraction=function(z){var B=t.r2l(t.range[0]),H=t.r2l(t.range[1]);return(t.r2l(z)-B)/(H-B)},t.limitRange=function(z){var B=t.minallowed,H=t.maxallowed;if(!(B===void 0&&H===void 0)){z||(z="range");var V=zi.nestedProperty(t,z).get(),Y=zi.simpleMap(V,t.r2l),J=Y[1]<Y[0];J&&Y.reverse();var re=zi.simpleMap([B,H],t.r2l);if(B!==void 0&&Y[0]<re[0]&&(V[J?1:0]=B),H!==void 0&&Y[1]>re[1]&&(V[J?0:1]=H),V[0]===V[1]){var ne=t.l2r(B),oe=t.l2r(H);if(B!==void 0){var ue=ne+1;H!==void 0&&(ue=Math.min(ue,oe)),V[J?1:0]=ue}if(H!==void 0){var me=oe+1;B!==void 0&&(me=Math.max(me,ne)),V[J?0:1]=me}}}},t.cleanRange=function(z,B){t._cleanRange(z,B),t.limitRange(z)},t._cleanRange=function(z,B){B||(B={}),z||(z="range");var H=zi.nestedProperty(t,z).get(),V,Y;if(t.type==="date"?Y=zi.dfltRange(t.calendar):a==="y"?Y=T2.DFLTRANGEY:t._name==="realaxis"?Y=[0,1]:Y=B.dfltRange||T2.DFLTRANGEX,Y=Y.slice(),(t.rangemode==="tozero"||t.rangemode==="nonnegative")&&(Y[0]=0),!H||H.length!==2){zi.nestedProperty(t,z).set(Y);return}var J=H[0]===null,re=H[1]===null;for(t.type==="date"&&!t.autorange&&(H[0]=zi.cleanDate(H[0],Ou,t.calendar),H[1]=zi.cleanDate(H[1],Ou,t.calendar)),V=0;V<2;V++)if(t.type==="date"){if(!zi.isDateTime(H[V],t.calendar)){t[z]=Y;break}if(t.r2l(H[0])===t.r2l(H[1])){var ne=zi.constrain(t.r2l(H[0]),zi.MIN_MS+1e3,zi.MAX_MS-1e3);H[0]=t.l2r(ne-1e3),H[1]=t.l2r(ne+1e3);break}}else{if(!zf(H[V]))if(!(J||re)&&zf(H[1-V]))H[V]=H[1-V]*(V?10:.1);else{t[z]=Y;break}if(H[V]<-y2?H[V]=-y2:H[V]>y2&&(H[V]=y2),H[0]===H[1]){var oe=Math.max(1,Math.abs(H[0]*1e-6));H[0]-=oe,H[1]+=oe}}},t.setScale=function(z){var B=r._size;if(t.overlaying){var H=x2.getFromId({_fullLayout:r},t.overlaying);t.domain=H.domain}var V=z&&t._r?"_r":"range",Y=t.calendar;t.cleanRange(V);var J=t.r2l(t[V][0],Y),re=t.r2l(t[V][1],Y),ne=a==="y";if(ne?(t._offset=B.t+(1-t.domain[1])*B.h,t._length=B.h*(t.domain[1]-t.domain[0]),t._m=t._length/(J-re),t._b=-t._m*re):(t._offset=B.l+t.domain[0]*B.w,t._length=B.w*(t.domain[1]-t.domain[0]),t._m=t._length/(re-J),t._b=-t._m*J),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks){var oe,ue;if(t._rangebreaks=t.locateBreaks(Math.min(J,re),Math.max(J,re)),t._rangebreaks.length){for(oe=0;oe<t._rangebreaks.length;oe++)ue=t._rangebreaks[oe],t._lBreaks+=Math.abs(ue.max-ue.min);var me=ne;J>re&&(me=!me),me&&t._rangebreaks.reverse();var Se=me?-1:1;for(t._m2=Se*t._length/(Math.abs(re-J)-t._lBreaks),t._B.push(-t._m2*(ne?re:J)),oe=0;oe<t._rangebreaks.length;oe++)ue=t._rangebreaks[oe],t._B.push(t._B[t._B.length-1]-Se*t._m2*(ue.max-ue.min));for(oe=0;oe<t._rangebreaks.length;oe++)ue=t._rangebreaks[oe],ue.pmin=E(ue.min),ue.pmax=E(ue.max)}}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw r._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(z){var B=t.rangebreaks||[],H,V,Y,J,re;B._cachedPatterns||(B._cachedPatterns=B.map(function(Ae){return Ae.enabled&&Ae.bounds?zi.simpleMap(Ae.bounds,Ae.pattern?Vh:t.d2c):null})),B._cachedValues||(B._cachedValues=B.map(function(Ae){return Ae.enabled&&Ae.values?zi.simpleMap(Ae.values,t.d2c).sort(zi.sorterAsc):null}));for(var ne=0;ne<B.length;ne++){var oe=B[ne];if(oe.enabled){if(oe.bounds){var ue=oe.pattern;switch(H=B._cachedPatterns[ne],V=H[0],Y=H[1],ue){case w2:re=new Date(z),J=re.getUTCDay(),V>Y&&(Y+=7,J<V&&(J+=7));break;case b2:re=new Date(z);var me=re.getUTCHours(),Se=re.getUTCMinutes(),Ce=re.getUTCSeconds(),Me=re.getUTCMilliseconds();J=me+(Se/60+Ce/3600+Me/36e5),V>Y&&(Y+=24,J<V&&(J+=24));break;case"":J=z;break}if(J>=V&&J<Y)return Ou}else for(var _e=B._cachedValues[ne],Te=0;Te<_e.length;Te++)if(V=_e[Te],Y=V+oe.dvalue,z>=V&&z<Y)return Ou}}return z},t.locateBreaks=function(z,B){var H,V,Y,J,re=[];if(!t.rangebreaks)return re;var ne=t.rangebreaks.slice().sort(function(Ke,ct){return Ke.pattern===w2&&ct.pattern===b2?-1:ct.pattern===w2&&Ke.pattern===b2?1:0}),oe=function(Ke,ct){if(Ke=zi.constrain(Ke,z,B),ct=zi.constrain(ct,z,B),Ke!==ct){for(var it=!0,ut=0;ut<re.length;ut++){var Ge=re[ut];Ke<Ge.max&&ct>=Ge.min&&(Ke<Ge.min&&(Ge.min=Ke),ct>Ge.max&&(Ge.max=ct),it=!1)}it&&re.push({min:Ke,max:ct})}};for(H=0;H<ne.length;H++){var ue=ne[H];if(ue.enabled)if(ue.bounds){var me=z,Se=B;ue.pattern&&(me=Math.floor(me)),V=zi.simpleMap(ue.bounds,ue.pattern?Vh:t.r2l),Y=V[0],J=V[1];var Ce=new Date(me),Me,_e;switch(ue.pattern){case w2:_e=Rte,Me=((J<Y?7:0)+(J-Y))*g2,me+=Y*g2-(Ce.getUTCDay()*g2+Ce.getUTCHours()*_2+Ce.getUTCMinutes()*wL+Ce.getUTCSeconds()*TL+Ce.getUTCMilliseconds());break;case b2:_e=g2,Me=((J<Y?24:0)+(J-Y))*_2,me+=Y*_2-(Ce.getUTCHours()*_2+Ce.getUTCMinutes()*wL+Ce.getUTCSeconds()*TL+Ce.getUTCMilliseconds());break;default:me=Math.min(V[0],V[1]),Se=Math.max(V[0],V[1]),_e=Se-me,Me=_e}for(var Te=me;Te<Se;Te+=_e)oe(Te,Te+Me)}else for(var Ae=zi.simpleMap(ue.values,t.d2c),Le=0;Le<Ae.length;Le++)Y=Ae[Le],J=Y+ue.dvalue,oe(Y,J)}return re.sort(function(Ke,ct){return Ke.min-ct.min}),re},t.makeCalcdata=function(z,B,H){var V,Y,J,re,ne=t.type,oe=ne==="date"&&z[B+"calendar"];if(B in z){if(V=z[B],re=z._length||zi.minRowLength(V),zi.isTypedArray(V)&&(ne==="linear"||ne==="log")){if(re===V.length)return V;if(V.subarray)return V.subarray(0,re)}if(ne==="multicategory")return m(V,re);for(Y=new Array(re),J=0;J<re;J++)Y[J]=t.d2c(V[J],0,oe,H)}else{var ue=B+"0"in z?t.d2c(z[B+"0"],0,oe):0,me=z["d"+B]?Number(z["d"+B]):1;for(V=z[{x:"y",y:"x"}[B]],re=z._length||V.length,Y=new Array(re),J=0;J<re;J++)Y[J]=ue+J*me}if(t.rangebreaks)for(J=0;J<re;J++)Y[J]=t.maskBreaks(Y[J]);return Y},t.isValidRange=function(z,B){return Array.isArray(z)&&z.length===2&&(B&&z[0]===null||zf(t.r2l(z[0])))&&(B&&z[1]===null||zf(t.r2l(z[1])))},t.getAutorangeDflt=function(z,B){var H=!t.isValidRange(z,"nullOk");return H&&B&&B.reverseDflt?H="reversed":z&&(z[0]===null&&z[1]===null?H=!0:z[0]===null&&z[1]!==null?H="min":z[0]!==null&&z[1]===null&&(H="max")),H},t.isReversed=function(){var z=t.autorange;return z==="reversed"||z==="min reversed"||z==="max reversed"},t.isPtWithinRange=function(z,B){var H=t.c2l(z[a],null,B),V=t.r2l(t.range[0]),Y=t.r2l(t.range[1]);return V<Y?V<=H&&H<=Y:Y<=H&&H<=V},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var z=t._matchGroup;if(z){var B=null,H=null;for(var V in z){var Y=r[x2.id2name(V)];if(Y._categories){B=Y._categories,H=Y._categoriesMap;break}}B&&H?(t._categories=B,t._categoriesMap=H):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var J=0;J<t._initialCategories.length;J++)v(t._initialCategories[J])},t.sortByInitialCategories=function(){var z=[];if(t._emptyCategories(),t._initialCategories)for(var B=0;B<t._initialCategories.length;B++)v(t._initialCategories[B]);z=z.concat(t._traceIndices);var H=t._matchGroup;for(var V in H)if(i!==V){var Y=r[x2.id2name(V)];Y._categories=t._categories,Y._categoriesMap=t._categoriesMap,z=z.concat(Y._traceIndices)}return z};var N=r._d3locale;t.type==="date"&&(t._dateFormat=N?N.timeFormat:Pte,t._extraFormat=r._extraFormat),t._separators=r.separators,t._numFormat=N?N.numberFormat:Dte,delete t._minDtick,delete t._forceTick0}});var V5=he((p_e,CL)=>{"use strict";var ML=Ia(),U5=Nt(),Fte=Bi().BADNUM,M2=U5.isArrayOrTypedArray,qte=U5.isDateTime,Nte=U5.cleanNumber,SL=Math.round;CL.exports=function(t,r,i){var a=t,s=i.noMultiCategory;if(M2(a)&&!a.length)return"-";if(!s&&Hte(a))return"multicategory";if(s&&Array.isArray(a[0])){for(var l=[],u=0;u<a.length;u++)if(M2(a[u]))for(var c=0;c<a[u].length;c++)l.push(a[u][c]);a=l}if(Ute(a,r))return"date";var v=i.autotypenumbers!=="strict";return Vte(a,v)?"category":Ote(a,v)?"linear":"-"};function Bte(e,t){return t?ML(e):typeof e=="number"}function Ote(e,t){for(var r=e.length,i=0;i<r;i++)if(Bte(e[i],t))return!0;return!1}function Ute(e,t){for(var r=e.length,i=kL(r),a=0,s=0,l={},u=0;u<r;u+=i){var c=SL(u),v=e[c],m=String(v);l[m]||(l[m]=1,qte(v,t)&&a++,ML(v)&&s++)}return a>s*2}function kL(e){return Math.max(1,(e-1)/1e3)}function Vte(e,t){for(var r=e.length,i=kL(r),a=0,s=0,l={},u=0;u<r;u+=i){var c=SL(u),v=e[c],m=String(v);if(!l[m]){l[m]=1;var _=typeof v;_==="boolean"?s++:(t?Nte(v)!==Fte:_==="number")?a++:_==="string"&&s++}}return s>a*2}function Hte(e){return M2(e[0])&&M2(e[1])}});var cg=he((m_e,FL)=>{"use strict";var Gte=Ka(),DL=Ia(),Gh=Nt(),S2=Bi().FP_SAFE,Zte=sa(),Yte=_i(),zL=ro(),Wte=zL.getFromId,Xte=zL.isLinked;FL.exports={applyAutorangeOptions:RL,getAutoRange:H5,makePadFn:G5,doAutoRange:Jte,findExtremes:Kte,concatExtremes:W5};function H5(e,t){var r,i,a=[],s=e._fullLayout,l=G5(s,t,0),u=G5(s,t,1),c=W5(e,t),v=c.min,m=c.max;if(v.length===0||m.length===0)return Gh.simpleMap(t.range,t.r2l);var _=v[0].val,T=m[0].val;for(r=1;r<v.length&&_===T;r++)_=Math.min(_,v[r].val);for(r=1;r<m.length&&_===T;r++)T=Math.max(T,m[r].val);var M=t.autorange,k=M==="reversed"||M==="min reversed"||M==="max reversed";if(!k&&t.range){var L=Gh.simpleMap(t.range,t.r2l);k=L[1]<L[0]}t.autorange==="reversed"&&(t.autorange=!0);var E=t.rangemode,I=E==="tozero",R=E==="nonnegative",N=t._length,z=N/10,B=0,H,V,Y,J,re,ne;for(r=0;r<v.length;r++)for(H=v[r],i=0;i<m.length;i++)V=m[i],ne=V.val-H.val-EL(t,H.val,V.val),ne>0&&(re=N-l(H)-u(V),re>z?ne/re>B&&(Y=H,J=V,B=ne/re):ne/N>B&&(Y={val:H.val,nopad:1},J={val:V.val,nopad:1},B=ne/N));function oe(Me,_e){return Math.max(Me,u(_e))}if(_===T){var ue=_-1,me=_+1;if(I)if(_===0)a=[0,1];else{var Se=(_>0?m:v).reduce(oe,0),Ce=_/(1-Math.min(.5,Se/N));a=_>0?[0,Ce]:[Ce,0]}else R?a=[Math.max(0,ue),Math.max(1,me)]:a=[ue,me]}else I?(Y.val>=0&&(Y={val:0,nopad:1}),J.val<=0&&(J={val:0,nopad:1})):R&&(Y.val-B*l(Y)<0&&(Y={val:0,nopad:1}),J.val<=0&&(J={val:1,nopad:1})),B=(J.val-Y.val-EL(t,H.val,V.val))/(N-l(Y)-u(J)),a=[Y.val-B*l(Y),J.val+B*u(J)];return a=RL(a,t),t.limitRange&&t.limitRange(),k&&a.reverse(),Gh.simpleMap(a,t.l2r||Number)}function EL(e,t,r){var i=0;if(e.rangebreaks)for(var a=e.locateBreaks(t,r),s=0;s<a.length;s++){var l=a[s];i+=l.max-l.min}return i}function G5(e,t,r){var i=.05*t._length,a=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(a.ticklabelposition||"").indexOf("inside")!==-1){var s=t.isReversed();if(!s){var l=Gh.simpleMap(t.range,t.r2l);s=l[1]<l[0]}s&&(r=!r)}var u=0;return Xte(e,t._id)||(u=jte(e,t,r)),i=Math.max(u,i),t.constrain==="domain"&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(v){return v.nopad?0:v.pad+(v.extrapad?i:u)}}var LL=3;function jte(e,t,r){var i=0,a=t._id.charAt(0)==="x";for(var s in e._plots){var l=e._plots[s];if(!(t._id!==l.xaxis._id&&t._id!==l.yaxis._id)){var u=(a?l.yaxis:l.xaxis)||{};if((u.ticklabelposition||"").indexOf("inside")!==-1&&(!r&&(u.side==="left"||u.side==="bottom")||r&&(u.side==="top"||u.side==="right"))){if(u._vals){var c=Gh.deg2rad(u._tickAngles[u._id+"tick"]||0),v=Math.abs(Math.cos(c)),m=Math.abs(Math.sin(c));if(!u._vals[0].bb){var _=u._id+"tick",T=u._selections[_];T.each(function(R){var N=Gte.select(this),z=N.select(".text-math-group");z.empty()&&(R.bb=Yte.bBox(N.node()))})}for(var M=0;M<u._vals.length;M++){var k=u._vals[M],L=k.bb;if(L){var E=2*LL+L.width,I=2*LL+L.height;i=Math.max(i,a?Math.max(E*v,I*m):Math.max(I*v,E*m))}}}u.ticks==="inside"&&u.ticklabelposition==="inside"&&(i+=u.ticklen||0)}}}return i}function W5(e,t,r){var i=t._id,a=e._fullData,s=e._fullLayout,l=[],u=[],c,v,m;function _(E,I){for(c=0;c<I.length;c++){var R=E[I[c]],N=(R._extremes||{})[i];if(R.visible===!0&&N){for(v=0;v<N.min.length;v++)m=N.min[v],Z5(l,m.val,m.pad,{extrapad:m.extrapad});for(v=0;v<N.max.length;v++)m=N.max[v],Y5(u,m.val,m.pad,{extrapad:m.extrapad})}}}if(_(a,t._traceIndices),_(s.annotations||[],t._annIndices||[]),_(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!r){for(var T in t._matchGroup)if(T!==t._id){var M=Wte(e,T),k=W5(e,M,!0),L=t._length/M._length;for(v=0;v<k.min.length;v++)m=k.min[v],Z5(l,m.val,m.pad*L,{extrapad:m.extrapad});for(v=0;v<k.max.length;v++)m=k.max[v],Y5(u,m.val,m.pad*L,{extrapad:m.extrapad})}}return{min:l,max:u}}function Jte(e,t,r){if(t.setScale(),t.autorange){t.range=r?r.slice():H5(e,t),t._r=t.range.slice(),t._rl=Gh.simpleMap(t._r,t.r2l);var i=t._input,a={};a[t._attr+".range"]=t.range,a[t._attr+".autorange"]=t.autorange,Zte.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,a),i.range=t.range.slice(),i.autorange=t.autorange}var s=t._anchorAxis;if(s&&s.rangeslider){var l=s.rangeslider[t._name];l&&l.rangemode==="auto"&&(l.range=H5(e,t)),s._input.rangeslider[t._name]=Gh.extendFlat({},l)}}function Kte(e,t,r){r||(r={}),e._m||e.setScale();var i=[],a=[],s=t.length,l=r.padded||!1,u=r.tozero&&(e.type==="linear"||e.type==="-"),c=e.type==="log",v=!1,m=r.vpadLinearized||!1,_,T,M,k,L,E,I,R,N;function z(oe){if(Array.isArray(oe))return v=!0,function(me){return Math.max(Number(oe[me]||0),0)};var ue=Math.max(Number(oe||0),0);return function(){return ue}}var B=z((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),H=z((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),V=z(r.vpadplus||r.vpad),Y=z(r.vpadminus||r.vpad);if(!v){if(R=1/0,N=-1/0,c)for(_=0;_<s;_++)T=t[_],T<R&&T>0&&(R=T),T>N&&T<S2&&(N=T);else for(_=0;_<s;_++)T=t[_],T<R&&T>-S2&&(R=T),T>N&&T<S2&&(N=T);t=[R,N],s=2}var J={tozero:u,extrapad:l};function re(oe){M=t[oe],DL(M)&&(E=B(oe),I=H(oe),m?(k=e.c2l(M)-Y(oe),L=e.c2l(M)+V(oe)):(R=M-Y(oe),N=M+V(oe),c&&R<N/10&&(R=N/10),k=e.c2l(R),L=e.c2l(N)),u&&(k=Math.min(0,k),L=Math.max(0,L)),PL(k)&&Z5(i,k,I,J),PL(L)&&Y5(a,L,E,J))}var ne=Math.min(6,s);for(_=0;_<ne;_++)re(_);for(_=s-1;_>=ne;_--)re(_);return{min:i,max:a,opts:r}}function Z5(e,t,r,i){IL(e,t,r,i,Qte)}function Y5(e,t,r,i){IL(e,t,r,i,$te)}function IL(e,t,r,i,a){for(var s=i.tozero,l=i.extrapad,u=!0,c=0;c<e.length&&u;c++){var v=e[c];if(a(v.val,t)&&v.pad>=r&&(v.extrapad||!l)){u=!1;break}else a(t,v.val)&&v.pad<=r&&(l||!v.extrapad)&&(e.splice(c,1),c--)}if(u){var m=s&&t===0;e.push({val:t,pad:m?0:r,extrapad:m?!1:l})}}function PL(e){return DL(e)&&Math.abs(e)<S2}function Qte(e,t){return e<=t}function $te(e,t){return e>=t}function ere(e,t){var r=t.autorangeoptions;return r&&r.minallowed!==void 0&&k2(t,r.minallowed,r.maxallowed)?r.minallowed:r&&r.clipmin!==void 0&&k2(t,r.clipmin,r.clipmax)?Math.max(e,t.d2l(r.clipmin)):e}function tre(e,t){var r=t.autorangeoptions;return r&&r.maxallowed!==void 0&&k2(t,r.minallowed,r.maxallowed)?r.maxallowed:r&&r.clipmax!==void 0&&k2(t,r.clipmin,r.clipmax)?Math.min(e,t.d2l(r.clipmax)):e}function k2(e,t,r){return t!==void 0&&r!==void 0?(t=e.d2l(t),r=e.d2l(r),t<r):!0}function RL(e,t){if(!t||!t.autorangeoptions)return e;var r=e[0],i=e[1],a=t.autorangeoptions.include;if(a!==void 0){var s=t.d2l(r),l=t.d2l(i);Gh.isArrayOrTypedArray(a)||(a=[a]);for(var u=0;u<a.length;u++){var c=t.d2l(a[u]);s>=c&&(s=c,r=c),l<=c&&(l=c,i=c)}}return r=ere(r,t),i=tre(i,t),[r,i]}});var Ii=he((y_e,iP)=>{"use strict";var Ql=Ka(),On=Ia(),W0=jn(),vg=sa(),ra=Nt(),X0=ra.strTranslate,Ed=ho(),rre=ug(),dg=Ua(),cl=_i(),are=Bu(),qL=f5(),ko=Bi(),ire=ko.ONEMAXYEAR,L2=ko.ONEAVGYEAR,P2=ko.ONEMINYEAR,nre=ko.ONEMAXQUARTER,K5=ko.ONEAVGQUARTER,D2=ko.ONEMINQUARTER,ore=ko.ONEMAXMONTH,j0=ko.ONEAVGMONTH,z2=ko.ONEMINMONTH,hl=ko.ONEWEEK,ns=ko.ONEDAY,Zh=ns/2,Ff=ko.ONEHOUR,pg=ko.ONEMIN,I2=ko.ONESEC,sre=ko.ONEMILLI,lre=ko.ONEMICROSEC,Ld=ko.MINUS_SIGN,q2=ko.BADNUM,Q5={K:"zeroline"},$5={K:"gridline",L:"path"},e4={K:"minor-gridline",L:"path"},XL={K:"tick",L:"path"},NL={K:"tick",L:"text"},BL={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},N2=as(),hg=N2.MID_SHIFT,Pd=N2.CAP_SHIFT,mg=N2.LINE_SPACING,ure=N2.OPPOSITE_SIDE,R2=3,$t=iP.exports={};$t.setConvert=A2();var fre=V5(),Mc=ro(),cre=Mc.idSort,hre=Mc.isLinked;$t.id2name=Mc.id2name;$t.name2id=Mc.name2id;$t.cleanId=Mc.cleanId;$t.list=Mc.list;$t.listIds=Mc.listIds;$t.getFromId=Mc.getFromId;$t.getFromTrace=Mc.getFromTrace;var jL=cg();$t.getAutoRange=jL.getAutoRange;$t.findExtremes=jL.findExtremes;var vre=1e-4;function i4(e){var t=(e[1]-e[0])*vre;return[e[0]-t,e[1]+t]}$t.coerceRef=function(e,t,r,i,a,s){var l=i.charAt(i.length-1),u=r._fullLayout._subplots[l+"axis"],c=i+"ref",v={};return a||(a=u[0]||(typeof s=="string"?s:s[0])),s||(s=a),u=u.concat(u.map(function(m){return m+" domain"})),v[c]={valType:"enumerated",values:u.concat(s?typeof s=="string"?[s]:s:[]),dflt:a},ra.coerce(e,t,v,c)};$t.getRefType=function(e){return e===void 0?e:e==="paper"?"paper":e==="pixel"?"pixel":/( domain)$/.test(e)?"domain":"range"};$t.coercePosition=function(e,t,r,i,a,s){var l,u,c=$t.getRefType(i);if(c!=="range")l=ra.ensureNumber,u=r(a,s);else{var v=$t.getFromId(t,i);s=v.fraction2r(s),u=r(a,s),l=v.cleanPos}e[a]=l(u)};$t.cleanPosition=function(e,t,r){var i=r==="paper"||r==="pixel"?ra.ensureNumber:$t.getFromId(t,r).cleanPos;return i(e)};$t.redrawComponents=function(e,t){t=t||$t.listIds(e);var r=e._fullLayout;function i(a,s,l,u){for(var c=vg.getComponentMethod(a,s),v={},m=0;m<t.length;m++)for(var _=r[$t.id2name(t[m])],T=_[l],M=0;M<T.length;M++){var k=T[M];if(!v[k]&&(c(e,k),v[k]=1,u))return}}i("annotations","drawOne","_annIndices"),i("shapes","drawOne","_shapeIndices"),i("images","draw","_imgIndices",!0),i("selections","drawOne","_selectionIndices")};var dre=$t.getDataConversions=function(e,t,r,i){var a,s=r==="x"||r==="y"||r==="z"?r:i;if(ra.isArrayOrTypedArray(s)){if(a={type:fre(i,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},$t.setConvert(a),a.type==="category")for(var l=0;l<i.length;l++)a.d2c(i[l])}else a=$t.getFromTrace(e,t,s);return a?{d2c:a.d2c,c2d:a.c2d}:s==="ids"?{d2c:UL,c2d:UL}:{d2c:OL,c2d:OL}};function OL(e){return+e}function UL(e){return String(e)}$t.getDataToCoordFunc=function(e,t,r,i){return dre(e,t,r,i).d2c};$t.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};$t.minDtick=function(e,t,r,i){["log","category","multicategory"].indexOf(e.type)!==-1||!i?e._minDtick=0:e._minDtick===void 0?(e._minDtick=t,e._forceTick0=r):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=r):((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0))};$t.saveRangeInitial=function(e,t){for(var r=$t.list(e,"",!0),i=!1,a=0;a<r.length;a++){var s=r[a],l=s._rangeInitial0===void 0&&s._rangeInitial1===void 0,u=l||s.range[0]!==s._rangeInitial0||s.range[1]!==s._rangeInitial1,c=s.autorange;(l&&c!==!0||t&&u)&&(s._rangeInitial0=c==="min"||c==="max reversed"?void 0:s.range[0],s._rangeInitial1=c==="max"||c==="min reversed"?void 0:s.range[1],s._autorangeInitial=c,i=!0)}return i};$t.saveShowSpikeInitial=function(e,t){for(var r=$t.list(e,"",!0),i=!1,a="on",s=0;s<r.length;s++){var l=r[s],u=l._showSpikeInitial===void 0,c=u||l.showspikes!==l._showspikes;(u||t&&c)&&(l._showSpikeInitial=l.showspikes,i=!0),a==="on"&&!l.showspikes&&(a="off")}return e._fullLayout._cartesianSpikesEnabled=a,i};$t.autoBin=function(e,t,r,i,a,s){var l=ra.aggNums(Math.min,null,e),u=ra.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory")return{start:l-.5,end:u+.5,size:Math.max(1,Math.round(s)||1),_dataSpan:u-l};a||(a=t.calendar);var c;if(t.type==="log"?c={type:"linear",range:[l,u]}:c={type:t.type,range:ra.simpleMap([l,u],t.c2r,0,a),calendar:a},$t.setConvert(c),s=s&&qL.dtick(s,c.type),s)c.dtick=s,c.tick0=qL.tick0(void 0,c.type,a);else{var v;if(r)v=(u-l)/r;else{var m=ra.distinctVals(e),_=Math.pow(10,Math.floor(Math.log(m.minDiff)/Math.LN10)),T=_*ra.roundUp(m.minDiff/_,[.9,1.9,4.9,9.9],!0);v=Math.max(T,2*ra.stdev(e)/Math.pow(e.length,i?.25:.4)),On(v)||(v=1)}$t.autoTicks(c,v)}var M=c.dtick,k=$t.tickIncrement($t.tickFirst(c),M,"reverse",a),L,E;if(typeof M=="number")k=pre(k,e,c,l,u),E=1+Math.floor((u-k)/M),L=k+E*M;else for(c.dtick.charAt(0)==="M"&&(k=mre(k,e,M,l,a)),L=k,E=0;L<=u;)L=$t.tickIncrement(L,M,!1,a),E++;return{start:t.c2r(k,0,a),end:t.c2r(L,0,a),size:M,_dataSpan:u-l}};function pre(e,t,r,i,a){var s=0,l=0,u=0,c=0;function v(M){return(1+(M-e)*100/r.dtick)%100<2}for(var m=0;m<t.length;m++)t[m]%1===0?u++:On(t[m])||c++,v(t[m])&&s++,v(t[m]+r.dtick/2)&&l++;var _=t.length-c;if(u===_&&r.type!=="date")r.dtick<1?e=i-.5*r.dtick:(e-=.5,e+r.dtick<i&&(e+=r.dtick));else if(l<_*.1&&(s>_*.3||v(i)||v(a))){var T=r.dtick/2;e+=e+T<i?T:-T}return e}function mre(e,t,r,i,a){var s=ra.findExactDates(t,a),l=.8;if(s.exactDays>l){var u=Number(r.substr(1));s.exactYears>l&&u%12===0?e=$t.tickIncrement(e,"M6","reverse")+ns*1.5:s.exactMonths>l?e=$t.tickIncrement(e,"M1","reverse")+ns*15.5:e-=Zh;var c=$t.tickIncrement(e,r);if(c<=i)return c}return e}$t.prepMinorTicks=function(e,t,r){if(!t.minor.dtick){delete e.dtick;var i=t.dtick&&On(t._tmin),a;if(i){var s=$t.tickIncrement(t._tmin,t.dtick,!0);a=[t._tmin,s*.99+t._tmin*.01]}else{var l=ra.simpleMap(t.range,t.r2l);a=[l[0],.8*l[0]+.2*l[1]]}if(e.range=ra.simpleMap(a,t.l2r),e._isMinor=!0,$t.prepTicks(e,r),i){var u=On(t.dtick),c=On(e.dtick),v=u?t.dtick:+t.dtick.substring(1),m=c?e.dtick:+e.dtick.substring(1);u&&c?X5(v,m)?v===2*hl&&m===2*ns&&(e.dtick=hl):v===2*hl&&m===3*ns?e.dtick=hl:v===hl&&!(t._input.minor||{}).nticks?e.dtick=ns:VL(v/m,2.5)?e.dtick=v/2:e.dtick=v:String(t.dtick).charAt(0)==="M"?c?e.dtick="M1":X5(v,m)?v>=12&&m===2&&(e.dtick="M3"):e.dtick=t.dtick:String(e.dtick).charAt(0)==="L"?String(t.dtick).charAt(0)==="L"?X5(v,m)||(e.dtick=VL(v/m,2.5)?t.dtick/2:t.dtick):e.dtick="D1":e.dtick==="D2"&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}t.minor._tick0Init===void 0&&(e.tick0=t.tick0)};function X5(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function VL(e,t){return Math.abs(e/t-1)<.001}$t.prepTicks=function(e,t){var r=ra.simpleMap(e.range,e.r2l,void 0,void 0,t);if(e.tickmode==="auto"||!e.dtick){var i=e.nticks,a;i||(e.type==="category"||e.type==="multicategory"?(a=e.tickfont?ra.bigFont(e.tickfont.size||12):15,i=e._length/a):(a=e._id.charAt(0)==="y"?40:80,i=ra.constrain(e._length/a,4,9)+1),e._name==="radialaxis"&&(i*=2)),e.minor&&e.minor.tickmode!=="array"||e.tickmode==="array"&&(i*=100),e._roughDTick=Math.abs(r[1]-r[0])/i,$t.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<e._minDtick*2&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.ticklabelmode==="period"&&yre(e),e.tick0||(e.tick0=e.type==="date"?"2000-01-01":0),e.type==="date"&&e.dtick<.1&&(e.dtick=.1),$L(e)};function j5(e){return+e.substring(1)}function yre(e){var t;function r(){return!(On(e.dtick)||e.dtick.charAt(0)!=="M")}var i=r(),a=$t.getTickFormat(e);if(a){var s=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(a)||(/%[HI]/.test(a)?(t=Ff,s&&!i&&e.dtick<Ff&&(e.dtick=Ff)):/%p/.test(a)?(t=Zh,s&&!i&&e.dtick<Zh&&(e.dtick=Zh)):/%[Aadejuwx]/.test(a)?(t=ns,s&&!i&&e.dtick<ns&&(e.dtick=ns)):/%[UVW]/.test(a)?(t=hl,s&&!i&&e.dtick<hl&&(e.dtick=hl)):/%[Bbm]/.test(a)?(t=j0,s&&(i?j5(e.dtick)<1:e.dtick<z2)&&(e.dtick="M1")):/%[q]/.test(a)?(t=K5,s&&(i?j5(e.dtick)<3:e.dtick<D2)&&(e.dtick="M3")):/%[Yy]/.test(a)&&(t=L2,s&&(i?j5(e.dtick)<12:e.dtick<P2)&&(e.dtick="M12")))}i=r(),i&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}function gre(e,t,r){for(var i=0;i<e.length;i++){var a=e[i].value,s=i,l=i+1;i<e.length-1?(s=i,l=i+1):i>0?(s=i-1,l=i):(s=i,l=i);var u=e[s].value,c=e[l].value,v=Math.abs(c-u),m=r||v,_=0;m>=P2?v>=P2&&v<=ire?_=v:_=L2:r===K5&&m>=D2?v>=D2&&v<=nre?_=v:_=K5:m>=z2?v>=z2&&v<=ore?_=v:_=j0:r===hl&&m>=hl?_=hl:m>=ns?_=ns:r===Zh&&m>=Zh?_=Zh:r===Ff&&m>=Ff&&(_=Ff);var T;_>=v&&(_=v,T=!0);var M=a+_;if(t.rangebreaks&&_>0){for(var k=84,L=0,E=0;E<k;E++){var I=(E+.5)/k;t.maskBreaks(a*(1-I)+I*M)!==q2&&L++}_*=L/k,_||(e[i].drop=!0),T&&v>hl&&(_=v)}(_>0||i===0)&&(e[i].periodX=a+_/2)}}$t.calcTicks=function(t,r){for(var i=t.type,a=t.calendar,s=t.ticklabelstep,l=t.ticklabelmode==="period",u=t.range[0]>t.range[1],c=!t.ticklabelindex||ra.isArrayOrTypedArray(t.ticklabelindex)?t.ticklabelindex:[t.ticklabelindex],v=ra.simpleMap(t.range,t.r2l,void 0,void 0,r),m=v[1]<v[0],_=Math.min(v[0],v[1]),T=Math.max(v[0],v[1]),M=Math.max(1e3,t._length||0),k=[],L=[],E=[],I=[],R=[],N=t.minor&&(t.minor.ticks||t.minor.showgrid),z=1;z>=(N?0:1);z--){var B=!z;z?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var H=z?t:ra.extendFlat({},t,t.minor);if(B?$t.prepMinorTicks(H,t,r):$t.prepTicks(H,r),H.tickmode==="array"){z?(E=[],k=HL(t,!B)):(I=[],L=HL(t,!B));continue}if(H.tickmode==="sync"){E=[],k=_re(t);continue}var V=i4(v),Y=V[0],J=V[1],re=On(H.dtick),ne=i==="log"&&!(re||H.dtick.charAt(0)==="L"),oe=$t.tickFirst(H,r);if(z){if(t._tmin=oe,oe<Y!==m)break;(i==="category"||i==="multicategory")&&(J=m?Math.max(-.5,J):Math.min(t._categories.length-.5,J))}var ue=null,me=oe,Se;if(z){var Ce;re?Ce=t.dtick:i==="date"?typeof t.dtick=="string"&&t.dtick.charAt(0)==="M"&&(Ce=j0*t.dtick.substring(1)):Ce=t._roughDTick,Se=Math.round((t.r2l(me)-t.r2l(t.tick0))/Ce)-1}var Me=H.dtick;for(H.rangebreaks&&H._tick0Init!==H.tick0&&(me=J5(me,t),m||(me=$t.tickIncrement(me,Me,!m,a))),z&&l&&(me=$t.tickIncrement(me,Me,!m,a),Se--);m?me>=J:me<=J;me=$t.tickIncrement(me,Me,m,a)){if(z&&Se++,H.rangebreaks&&!m){if(me<Y)continue;if(H.maskBreaks(me)===q2&&J5(me,H)>=T)break}if(E.length>M||me===ue)break;ue=me;var _e={value:me};z?(ne&&me!==(me|0)&&(_e.simpleLabel=!0),s>1&&Se%s&&(_e.skipLabel=!0),E.push(_e)):(_e.minor=!0,I.push(_e))}}if(!I||I.length<2)c=!1;else{var Te=(I[1].value-I[0].value)*(u?-1:1);Hre(Te,t.tickformat)||(c=!1)}if(!c)R=E;else{var Ae=E.concat(I);l&&E.length&&(Ae=Ae.slice(1)),Ae=Ae.sort(function(Rt,Ot){return Rt.value-Ot.value}).filter(function(Rt,Ot,gt){return Ot===0||Rt.value!==gt[Ot-1].value});var Le=Ae.map(function(Rt,Ot){return Rt.minor===void 0&&!Rt.skipLabel?Ot:null}).filter(function(Rt){return Rt!==null});Le.forEach(function(Rt){c.map(function(Ot){var gt=Rt+Ot;gt>=0&&gt<Ae.length&&ra.pushUnique(R,Ae[gt])})})}if(N){var Ke=t.minor.ticks==="inside"&&t.ticks==="outside"||t.minor.ticks==="outside"&&t.ticks==="inside";if(!Ke){for(var ct=E.map(function(Rt){return Rt.value}),it=[],ut=0;ut<I.length;ut++){var Ge=I[ut],xt=Ge.value;if(ct.indexOf(xt)===-1){for(var at=!1,At=0;!at&&At<E.length;At++)1e7+E[At].value===1e7+xt&&(at=!0);at||it.push(Ge)}}I=it}}l&&gre(R,t,t._definedDelta);var kt;if(t.rangebreaks){var mt=t._id.charAt(0)==="y",ye=1;t.tickmode==="auto"&&(ye=t.tickfont?t.tickfont.size:12);var Re=NaN;for(kt=E.length-1;kt>-1;kt--){if(E[kt].drop){E.splice(kt,1);continue}E[kt].value=J5(E[kt].value,t);var xe=t.c2p(E[kt].value);(mt?Re>xe-ye:Re<xe+ye)?E.splice(m?kt+1:kt,1):Re=xe}}s4(t)&&Math.abs(v[1]-v[0])===360&&E.pop(),t._tmax=(E[E.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var et,vt=function(Rt){Rt.text="",t._prevDateHead=et};E=E.concat(I);function tt(Rt,Ot){var gt=$t.tickText(Rt,Ot.value,!1,Ot.simpleLabel),Et=Ot.periodX;return Et!==void 0&&(gt.periodX=Et,(Et>T||Et<_)&&(Et>T&&(gt.periodX=T),Et<_&&(gt.periodX=_),vt(gt))),gt}var Bt;for(kt=0;kt<E.length;kt++){var Mt=E[kt].minor,Ct=E[kt].value;Mt?(c&&R.indexOf(E[kt])!==-1?Bt=tt(t,E[kt]):Bt={x:Ct},Bt.minor=!0,L.push(Bt)):(et=t._prevDateHead,Bt=tt(t,E[kt]),(E[kt].skipLabel||c&&R.indexOf(E[kt])===-1)&&vt(Bt),k.push(Bt))}return k=k.concat(L),t._inCalcTicks=!1,l&&k.length&&(k[0].noTick=!0),k};function JL(e,t){return e.rangebreaks&&(t=t.filter(function(r){return e.maskBreaks(r.x)!==q2})),t}function _re(e){var t=e._mainAxis,r=[];if(t._vals){for(var i=0;i<t._vals.length;i++)if(!t._vals[i].noTick){var a=t.l2p(t._vals[i].x),s=e.p2l(a),l=$t.tickText(e,s);t._vals[i].minor&&(l.minor=!0,l.text=""),r.push(l)}}return r=JL(e,r),r}function HL(e,t){var r=ra.simpleMap(e.range,e.r2l),i=i4(r),a=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]),l=e.type==="category"?e.d2l_noadd:e.d2l;e.type==="log"&&String(e.dtick).charAt(0)!=="L"&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var u=[],c=0;c<=1;c++)if(!(t!==void 0&&(t&&c||t===!1&&!c))&&!(c&&!e.minor)){var v=c?e.minor.tickvals:e.tickvals,m=c?[]:e.ticktext;if(v){ra.isArrayOrTypedArray(m)||(m=[]);for(var _=0;_<v.length;_++){var T=l(v[_]);if(T>a&&T<s){var M=$t.tickText(e,T,!1,String(m[_]));c&&(M.minor=!0,M.text=""),u.push(M)}}}}return u=JL(e,u),u}var C2=[2,5,10],GL=[1,2,3,6,12],ZL=[1,2,5,10,15,30],xre=[1,2,3,7,14],KL=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],QL=[-.301,0,.301,.699,1],bre=[15,30,45,90,180];function Rf(e,t,r){return t*ra.roundUp(e/t,r)}$t.autoTicks=function(e,t,r){var i;function a(_){return Math.pow(_,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=ra.dateTick0(e.calendar,0);var s=2*t;if(s>L2)t/=L2,i=a(10),e.dtick="M"+12*Rf(t,i,C2);else if(s>j0)t/=j0,e.dtick="M"+Rf(t,1,GL);else if(s>ns){if(e.dtick=Rf(t,ns,e._hasDayOfWeekBreaks?[1,2,7,14]:xre),!r){var l=$t.getTickFormat(e),u=e.ticklabelmode==="period";u&&(e._rawTick0=e.tick0),/%[uVW]/.test(l)?e.tick0=ra.dateTick0(e.calendar,2):e.tick0=ra.dateTick0(e.calendar,1),u&&(e._dowTick0=e.tick0)}}else s>Ff?e.dtick=Rf(t,Ff,GL):s>pg?e.dtick=Rf(t,pg,ZL):s>I2?e.dtick=Rf(t,I2,ZL):(i=a(10),e.dtick=Rf(t,i,C2))}else if(e.type==="log"){e.tick0=0;var c=ra.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(c[1]-c[0])<1){var v=1.5*Math.abs((c[1]-c[0])/t);t=Math.abs(Math.pow(10,c[1])-Math.pow(10,c[0]))/v,i=a(10),e.dtick="L"+Rf(t,i,C2)}else e.dtick=t>.3?"D2":"D1"}else e.type==="category"||e.type==="multicategory"?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):s4(e)?(e.tick0=0,i=1,e.dtick=Rf(t,i,bre)):(e.tick0=0,i=a(10),e.dtick=Rf(t,i,C2));if(e.dtick===0&&(e.dtick=1),!On(e.dtick)&&typeof e.dtick!="string"){var m=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(m)}};function $L(e){var t=e.dtick;if(e._tickexponent=0,!On(t)&&typeof t!="string"&&(t=1),(e.type==="category"||e.type==="multicategory")&&(e._tickround=null),e.type==="date"){var r=e.r2l(e.tick0),i=e.l2r(r).replace(/(^-|i)/g,""),a=i.length;if(String(t).charAt(0)==="M")a>10||i.substr(5)!=="01-01"?e._tickround="d":e._tickround=+t.substr(1)%12===0?"y":"m";else if(t>=ns&&a<=10||t>=ns*15)e._tickround="d";else if(t>=pg&&a<=16||t>=Ff)e._tickround="M";else if(t>=I2&&a<=19||t>=pg)e._tickround="S";else{var s=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(a,s)-20,e._tickround<0&&(e._tickround=4)}}else if(On(t)||t.charAt(0)==="L"){var l=e.range.map(e.r2d||Number);On(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var u=Math.max(Math.abs(l[0]),Math.abs(l[1])),c=Math.floor(Math.log(u)/Math.LN10+.01),v=e.minexponent===void 0?3:e.minexponent;Math.abs(c)>v&&(F2(e.exponentformat)&&!n4(c)?e._tickexponent=3*Math.round((c-1)/3):e._tickexponent=c)}else e._tickround=null}$t.tickIncrement=function(e,t,r,i){var a=r?-1:1;if(On(t))return ra.increment(e,a*t);var s=t.charAt(0),l=a*Number(t.substr(1));if(s==="M")return ra.incrementMonth(e,l,i);if(s==="L")return Math.log(Math.pow(10,e)+l)/Math.LN10;if(s==="D"){var u=t==="D2"?QL:KL,c=e+a*.01,v=ra.roundUp(ra.mod(c,1),u,r);return Math.floor(c)+Math.log(Ql.round(Math.pow(10,v),1))/Math.LN10}throw"unrecognized dtick "+String(t)};$t.tickFirst=function(e,t){var r=e.r2l||Number,i=ra.simpleMap(e.range,r,void 0,void 0,t),a=i[1]<i[0],s=a?Math.floor:Math.ceil,l=i4(i)[0],u=e.dtick,c=r(e.tick0);if(On(u)){var v=s((l-c)/u)*u+c;return(e.type==="category"||e.type==="multicategory")&&(v=ra.constrain(v,0,e._categories.length-1)),v}var m=u.charAt(0),_=Number(u.substr(1));if(m==="M"){for(var T=0,M=c,k,L,E;T<10;){if(k=$t.tickIncrement(M,u,a,e.calendar),(k-l)*(M-l)<=0)return a?Math.min(M,k):Math.max(M,k);L=(l-(M+k)/2)/(k-M),E=m+(Math.abs(Math.round(L))||1)*_,M=$t.tickIncrement(M,E,L<0?!a:a,e.calendar),T++}return ra.error("tickFirst did not converge",e),M}else{if(m==="L")return Math.log(s((Math.pow(10,l)-c)/_)*_+c)/Math.LN10;if(m==="D"){var I=u==="D2"?QL:KL,R=ra.roundUp(ra.mod(l,1),I,a);return Math.floor(l)+Math.log(Ql.round(Math.pow(10,R),1))/Math.LN10}else throw"unrecognized dtick "+String(u)}};$t.tickText=function(e,t,r,i){var a=eP(e,t),s=e.tickmode==="array",l=r||s,u=e.type,c=u==="category"?e.d2l_noadd:e.d2l,v,m=function(E){var I=e.l2p(E);return I>=0&&I<=e._length?E:null};if(s&&ra.isArrayOrTypedArray(e.ticktext)){var _=ra.simpleMap(e.range,e.r2l),T=(Math.abs(_[1]-_[0])-(e._lBreaks||0))/1e4;for(v=0;v<e.ticktext.length&&!(Math.abs(t-c(e.tickvals[v]))<T);v++);if(v<e.ticktext.length)return a.text=String(e.ticktext[v]),a.xbnd=[m(a.x-.5),m(a.x+e.dtick-.5)],a}function M(E){if(E===void 0)return!0;if(r)return E==="none";var I={first:e._tmin,last:e._tmax}[E];return E!=="all"&&t!==I}var k=r?"never":e.exponentformat!=="none"&&M(e.showexponent)?"hide":"";if(u==="date"?wre(e,a,r,l):u==="log"?Tre(e,a,r,l,k):u==="category"?Are(e,a):u==="multicategory"?Mre(e,a,r):s4(e)?kre(e,a,r,l,k):Sre(e,a,r,l,k),i||(e.tickprefix&&!M(e.showtickprefix)&&(a.text=e.tickprefix+a.text),e.ticksuffix&&!M(e.showticksuffix)&&(a.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(a.text)){var L=e.labelalias[a.text];typeof L=="string"&&(a.text=L)}return(e.tickson==="boundaries"||e.showdividers)&&(a.xbnd=[m(a.x-.5),m(a.x+e.dtick-.5)]),a};$t.hoverLabelText=function(e,t,r){r&&(e=ra.extendFlat({},e,{hoverformat:r}));var i=ra.isArrayOrTypedArray(t)?t[0]:t,a=ra.isArrayOrTypedArray(t)?t[1]:void 0;if(a!==void 0&&a!==i)return $t.hoverLabelText(e,i,r)+" - "+$t.hoverLabelText(e,a,r);var s=e.type==="log"&&i<=0,l=$t.tickText(e,e.c2l(s?-i:i),"hover").text;return s?i===0?"0":Ld+l:l};function eP(e,t,r){var i=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:i.size,font:i.family,fontWeight:i.weight,fontStyle:i.style,fontVariant:i.variant,fontTextcase:i.textcase,fontLineposition:i.lineposition,fontShadow:i.shadow,fontColor:i.color}}function wre(e,t,r,i){var a=e._tickround,s=r&&e.hoverformat||$t.getTickFormat(e);i=!s&&i,i&&(On(a)?a=4:a={y:"m",m:"d",d:"M",M:"S",S:4}[a]);var l=ra.formatDate(t.x,s,a,e._dateFormat,e.calendar,e._extraFormat),u,c=l.indexOf(`
`);if(c!==-1&&(u=l.substr(c+1),l=l.substr(0,c)),i&&(u!==void 0&&(l==="00:00:00"||l==="00:00")?(l=u,u=""):l.length===8&&(l=l.replace(/:00$/,""))),u)if(r)a==="d"?l+=", "+u:l=u+(l?", "+l:"");else if(!e._inCalcTicks||e._prevDateHead!==u)e._prevDateHead=u,l+="<br>"+u;else{var v=gg(e),m=e._trueSide||e.side;(!v&&m==="top"||v&&m==="bottom")&&(l+="<br> ")}t.text=l}function Tre(e,t,r,i,a){var s=e.dtick,l=t.x,u=e.tickformat,c=typeof s=="string"&&s.charAt(0);if(a==="never"&&(a=""),i&&c!=="L"&&(s="L3",c="L"),u||c==="L")t.text=yg(Math.pow(10,l),e,a,i);else if(On(s)||c==="D"&&ra.mod(l+.01,1)<.1){var v=Math.round(l),m=Math.abs(v),_=e.exponentformat;_==="power"||F2(_)&&n4(v)?(v===0?t.text=1:v===1?t.text="10":t.text="10<sup>"+(v>1?"":Ld)+m+"</sup>",t.fontSize*=1.25):(_==="e"||_==="E")&&m>2?t.text="1"+_+(v>0?"+":Ld)+m:(t.text=yg(Math.pow(10,l),e,"","fakehover"),s==="D1"&&e._id.charAt(0)==="y"&&(t.dy-=t.fontSize/6))}else if(c==="D")t.text=String(Math.round(Math.pow(10,ra.mod(l,1)))),t.fontSize*=.75;else throw"unrecognized dtick "+String(s);if(e.dtick==="D1"){var T=String(t.text).charAt(0);(T==="0"||T==="1")&&(e._id.charAt(0)==="y"?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)))}}function Are(e,t){var r=e._categories[Math.round(t.x)];r===void 0&&(r=""),t.text=String(r)}function Mre(e,t,r){var i=Math.round(t.x),a=e._categories[i]||[],s=a[1]===void 0?"":String(a[1]),l=a[0]===void 0?"":String(a[0]);r?t.text=l+" - "+s:(t.text=s,t.text2=l)}function Sre(e,t,r,i,a){a==="never"?a="":e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6&&(a="hide"),t.text=yg(t.x,e,a,i)}function kre(e,t,r,i,a){if(e.thetaunit==="radians"&&!r){var s=t.x/180;if(s===0)t.text="0";else{var l=Cre(s);if(l[1]>=100)t.text=yg(ra.deg2rad(t.x),e,a,i);else{var u=t.x<0;l[1]===1?l[0]===1?t.text="\u03C0":t.text=l[0]+"\u03C0":t.text=["<sup>",l[0],"</sup>","\u2044","<sub>",l[1],"</sub>","\u03C0"].join(""),u&&(t.text=Ld+t.text)}}}else t.text=yg(t.x,e,a,i)}function Cre(e){function t(u,c){return Math.abs(u-c)<=1e-6}function r(u,c){return t(c,0)?u:r(c,u%c)}function i(u){for(var c=1;!t(Math.round(u*c)/c,u);)c*=10;return c}var a=i(e),s=e*a,l=Math.abs(r(s,a));return[Math.round(s/l),Math.round(a/l)]}var Ere=["f","p","n","\u03BC","m","","k","M","G","T"];function F2(e){return e==="SI"||e==="B"}function n4(e){return e>14||e<-15}function yg(e,t,r,i){var a=e<0,s=t._tickround,l=r||t.exponentformat||"B",u=t._tickexponent,c=$t.getTickFormat(t),v=t.separatethousands;if(i){var m={exponentformat:l,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:On(e)&&Math.abs(e)||1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};$L(m),s=(Number(m._tickround)||0)+4,u=m._tickexponent,t.hoverformat&&(c=t.hoverformat)}if(c)return t._numFormat(c)(e).replace(/-/g,Ld);var _=Math.pow(10,-s)/2;if(l==="none"&&(u=0),e=Math.abs(e),e<_)e="0",a=!1;else{if(e+=_,u&&(e*=Math.pow(10,-u),s+=u),s===0)e=String(Math.floor(e));else if(s<0){e=String(Math.round(e)),e=e.substr(0,e.length+s);for(var T=s;T<0;T++)e+="0"}else{e=String(e);var M=e.indexOf(".")+1;M&&(e=e.substr(0,M+s).replace(/\.?0+$/,""))}e=ra.numSeparate(e,t._separators,v)}if(u&&l!=="hide"){F2(l)&&n4(u)&&(l="power");var k;u<0?k=Ld+-u:l!=="power"?k="+"+u:k=String(u),l==="e"||l==="E"?e+=l+k:l==="power"?e+="\xD710<sup>"+k+"</sup>":l==="B"&&u===9?e+="B":F2(l)&&(e+=Ere[u/3+5])}return a?Ld+e:e}$t.getTickFormat=function(e){var t;function r(c){return typeof c!="string"?c:Number(c.replace("M",""))*j0}function i(c,v){var m=["L","D"];if(typeof c==typeof v){if(typeof c=="number")return c-v;var _=m.indexOf(c.charAt(0)),T=m.indexOf(v.charAt(0));return _===T?Number(c.replace(/(L|D)/g,""))-Number(v.replace(/(L|D)/g,"")):_-T}else return typeof c=="number"?1:-1}function a(c,v,m){var _=m||function(k){return k},T=v[0],M=v[1];return(!T&&typeof T!="number"||_(T)<=_(c))&&(!M&&typeof M!="number"||_(M)>=_(c))}function s(c,v){var m=v[0]===null,_=v[1]===null,T=i(c,v[0])>=0,M=i(c,v[1])<=0;return(m||T)&&(_||M)}var l,u;if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++)if(u=e.tickformatstops[t],u.enabled&&a(e.dtick,u.dtickrange,r)){l=u;break}break}case"log":{for(t=0;t<e.tickformatstops.length;t++)if(u=e.tickformatstops[t],u.enabled&&s(e.dtick,u.dtickrange)){l=u;break}break}default:}return l?l.value:e.tickformat};$t.getSubplots=function(e,t){var r=e._fullLayout._subplots,i=r.cartesian.concat(r.gl2d||[]),a=t?$t.findSubplotsWithAxis(i,t):i;return a.sort(function(s,l){var u=s.substr(1).split("y"),c=l.substr(1).split("y");return u[0]===c[0]?+u[1]-+c[1]:+u[0]-+c[0]}),a};$t.findSubplotsWithAxis=function(e,t){for(var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$"),i=[],a=0;a<e.length;a++){var s=e[a];r.test(s)&&i.push(s)}return i};$t.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},a=$t.list(e,"x",!0),s=$t.list(e,"y",!0),l=[],u,c;for(u=0;u<a.length;u++)for(l.push({x:a[u],y:i}),c=0;c<s.length;c++)u===0&&l.push({x:r,y:s[c]}),l.push({x:a[u],y:s[c]});var v=t._clips.selectAll(".axesclip").data(l,function(m){return m.x._id+m.y._id});v.enter().append("clipPath").classed("axesclip",!0).attr("id",function(m){return"clip"+t._uid+m.x._id+m.y._id}).append("rect"),v.exit().remove(),v.each(function(m){Ql.select(this).select("rect").attr({x:m.x._offset||0,y:m.y._offset||0,width:m.x._length||1,height:m.y._length||1})})}};$t.draw=function(e,t,r){var i=e._fullLayout;t==="redraw"&&i._paper.selectAll("g.subplot").each(function(c){var v=c[0],m=i._plots[v];if(m){var _=m.xaxis,T=m.yaxis;m.xaxislayer.selectAll("."+_._id+"tick").remove(),m.yaxislayer.selectAll("."+T._id+"tick").remove(),m.xaxislayer.selectAll("."+_._id+"tick2").remove(),m.yaxislayer.selectAll("."+T._id+"tick2").remove(),m.xaxislayer.selectAll("."+_._id+"divider").remove(),m.yaxislayer.selectAll("."+T._id+"divider").remove(),m.minorGridlayer&&m.minorGridlayer.selectAll("path").remove(),m.gridlayer&&m.gridlayer.selectAll("path").remove(),m.zerolinelayer&&m.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+_._id+"title").remove(),i._infolayer.select(".g-"+T._id+"title").remove()}});var a=!t||t==="redraw"?$t.listIds(e):t,s=$t.list(e),l=s.filter(function(c){return c.autoshift}).map(function(c){return c.overlaying});a.map(function(c){var v=$t.getFromId(e,c);if(v.tickmode==="sync"&&v.overlaying){var m=a.findIndex(function(_){return _===v.overlaying});m>=0&&a.unshift(a.splice(m,1).shift())}});var u={false:{left:0,right:0}};return ra.syncOrAsync(a.map(function(c){return function(){if(c){var v=$t.getFromId(e,c);r||(r={}),r.axShifts=u,r.overlayingShiftedAx=l;var m=$t.drawOne(e,v,r);return v._shiftPusher&&a4(v,v._fullDepth||0,u,!0),v._r=v.range.slice(),v._rl=ra.simpleMap(v._r,v.r2l),m}}}))};$t.drawOne=function(e,t,r){r=r||{};var i=r.axShifts||{},a=r.overlayingShiftedAx||[],s,l,u;t.setScale();var c=e._fullLayout,v=t._id,m=v.charAt(0),_=$t.counterLetter(v),T=c._plots[t._mainSubplot];if(!T)return;if(t._shiftPusher=t.autoshift||a.indexOf(t._id)!==-1||a.indexOf(t.overlaying)!==-1,t._shiftPusher&t.anchor==="free"){var M=t.linewidth/2||0;t.ticks==="inside"&&(M+=t.ticklen),a4(t,M,i,!0),a4(t,t.shift||0,i,!1)}(r.skipTitle!==!0||t._shift===void 0)&&(t._shift=Vre(t,i));var k=T[m+"axislayer"],L=t._mainLinePosition,E=L+=t._shift,I=t._mainMirrorPosition,R=t._vals=$t.calcTicks(t),N=[t.mirror,E,I].join("_");for(s=0;s<R.length;s++)R[s].axInfo=N;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var z={};function B(Mt){var Ct=v+(Mt||"tick");return z[Ct]||(z[Ct]=zre(t,Ct,E)),z[Ct]}if(t.visible){var H=$t.makeTransTickFn(t),V=$t.makeTransTickLabelFn(t),Y,J,re=t.ticks==="inside",ne=t.ticks==="outside";if(t.tickson==="boundaries"){var oe=Lre(t,R);J=$t.clipEnds(t,oe),Y=re?J:oe}else J=$t.clipEnds(t,R),Y=re&&t.ticklabelmode!=="period"?J:R;var ue=t._gridVals=J,me=Dre(t,R);if(!c._hasOnlyLargeSploms){var Se=t._subplotsWith,Ce={};for(s=0;s<Se.length;s++){l=Se[s],u=c._plots[l];var Me=u[_+"axis"],_e=Me._mainAxis._id;if(!Ce[_e]){Ce[_e]=1;var Te=m==="x"?"M0,"+Me._offset+"v"+Me._length:"M"+Me._offset+",0h"+Me._length;$t.drawGrid(e,t,{vals:ue,counterAxis:Me,layer:u.gridlayer.select("."+v),minorLayer:u.minorGridlayer.select("."+v),path:Te,transFn:H}),$t.drawZeroLine(e,t,{counterAxis:Me,layer:u.zerolinelayer,path:Te,transFn:H})}}}var Ae,Le=$t.getTickSigns(t),Ke=$t.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var ct=$t.makeTickPath(t,E,Le[2]),it=$t.makeTickPath(t,E,Ke[2],{minor:!0}),ut,Ge,xt,at;if(t._anchorAxis&&t.mirror&&t.mirror!==!0?(ut=$t.makeTickPath(t,I,Le[3]),Ge=$t.makeTickPath(t,I,Ke[3],{minor:!0}),xt=ct+ut,at=it+Ge):(ut="",Ge="",xt=ct,at=it),t.showdividers&&ne&&t.tickson==="boundaries"){var At={};for(s=0;s<me.length;s++)At[me[s].x]=1;Ae=function(Mt){return At[Mt.x]?ut:xt}}else Ae=function(Mt){return Mt.minor?at:xt}}if($t.drawTicks(e,t,{vals:Y,layer:k,path:Ae,transFn:H}),t.mirror==="allticks"){var kt=Object.keys(t._linepositions||{});for(s=0;s<kt.length;s++){l=kt[s],u=c._plots[l];var mt=t._linepositions[l]||[],ye=mt[0],Re=mt[1],xe=mt[2],et=$t.makeTickPath(t,ye,xe?Le[0]:Ke[0],{minor:xe})+$t.makeTickPath(t,Re,xe?Le[1]:Ke[1],{minor:xe});$t.drawTicks(e,t,{vals:Y,layer:u[m+"axislayer"],path:et,transFn:H})}}var vt=[];if(vt.push(function(){return $t.drawLabels(e,t,{vals:R,layer:k,plotinfo:u,transFn:V,labelFns:$t.makeLabelFns(t,E)})}),t.type==="multicategory"){var tt={x:2,y:10}[m];vt.push(function(){var Mt={x:"height",y:"width"}[m],Ct=B()[Mt]+tt+(t._tickAngles[v+"tick"]?t.tickfont.size*mg:0);return $t.drawLabels(e,t,{vals:Pre(t,R),layer:k,cls:v+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:H,labelFns:$t.makeLabelFns(t,E+Ct*Le[4])})}),vt.push(function(){return t._depth=Le[4]*(B("tick2")[t.side]-E),Rre(e,t,{vals:me,layer:k,path:$t.makeTickPath(t,E,Le[4],{len:t._depth}),transFn:H})})}else t.title.hasOwnProperty("standoff")&&vt.push(function(){t._depth=Le[4]*(B()[t.side]-E)});var Bt=vg.getComponentMethod("rangeslider","isVisible")(t);return!r.skipTitle&&!(Bt&&t.side==="bottom")&&vt.push(function(){return Fre(e,t)}),vt.push(function(){var Mt=t.side.charAt(0),Ct=ure[t.side].charAt(0),Rt=$t.getPxPosition(e,t),Ot=ne?t.ticklen:0,gt,Et,ir,Gt;(t.automargin||Bt||t._shiftPusher)&&(t.type==="multicategory"?gt=B("tick2"):(gt=B(),m==="x"&&Mt==="b"&&(t._depth=Math.max(gt.width>0?gt.bottom-Rt:0,Ot))));var Ne=0,ft=0;if(t._shiftPusher&&(Ne=Math.max(Ot,gt.height>0?Mt==="l"?Rt-gt.left:gt.right-Rt:0),t.title.text!==c._dfltTitle[m]&&(ft=(t._titleStandoff||0)+(t._titleScoot||0),Mt==="l"&&(ft+=WL(t))),t._fullDepth=Math.max(Ne,ft)),t.automargin){Et={x:0,y:0,r:0,l:0,t:0,b:0};var pt=[0,1],xr=typeof t._shift=="number"?t._shift:0;if(m==="x"){if(Mt==="b"?Et[Mt]=t._depth:(Et[Mt]=t._depth=Math.max(gt.width>0?Rt-gt.top:0,Ot),pt.reverse()),gt.width>0){var pr=gt.right-(t._offset+t._length);pr>0&&(Et.xr=1,Et.r=pr);var Tt=t._offset-gt.left;Tt>0&&(Et.xl=0,Et.l=Tt)}}else if(Mt==="l"?(t._depth=Math.max(gt.height>0?Rt-gt.left:0,Ot),Et[Mt]=t._depth-xr):(t._depth=Math.max(gt.height>0?gt.right-Rt:0,Ot),Et[Mt]=t._depth+xr,pt.reverse()),gt.height>0){var wt=gt.bottom-(t._offset+t._length);wt>0&&(Et.yb=0,Et.b=wt);var Vt=t._offset-gt.top;Vt>0&&(Et.yt=1,Et.t=Vt)}Et[_]=t.anchor==="free"?t.position:t._anchorAxis.domain[pt[0]],t.title.text!==c._dfltTitle[m]&&(Et[Mt]+=WL(t)+(t.title.standoff||0)),t.mirror&&t.anchor!=="free"&&(ir={x:0,y:0,r:0,l:0,t:0,b:0},ir[Ct]=t.linewidth,t.mirror&&t.mirror!==!0&&(ir[Ct]+=Ot),t.mirror===!0||t.mirror==="ticks"?ir[_]=t._anchorAxis.domain[pt[1]]:(t.mirror==="all"||t.mirror==="allticks")&&(ir[_]=[t._counterDomainMin,t._counterDomainMax][pt[1]]))}Bt&&(Gt=vg.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),typeof t.automargin=="string"&&(YL(Et,t.automargin),YL(ir,t.automargin)),W0.autoMargin(e,o4(t),Et),W0.autoMargin(e,rP(t),ir),W0.autoMargin(e,aP(t),Gt)}),ra.syncOrAsync(vt)}};function YL(e,t){if(e){var r=Object.keys(BL).reduce(function(i,a){return t.indexOf(a)!==-1&&BL[a].forEach(function(s){i[s]=1}),i},{});Object.keys(e).forEach(function(i){r[i]||(i.length===1?e[i]=0:delete e[i])})}}function Lre(e,t){var r=[],i,a=function(s,l){var u=s.xbnd[l];u!==null&&r.push(ra.extendFlat({},s,{x:u}))};if(t.length){for(i=0;i<t.length;i++)a(t[i],0);a(t[i-1],1)}return r}function Pre(e,t){for(var r=[],i={},a=0;a<t.length;a++){var s=t[a];i[s.text2]?i[s.text2].push(s.x):i[s.text2]=[s.x]}for(var l in i)r.push(eP(e,ra.interp(i[l],.5),l));return r}function Dre(e,t){var r=[],i,a,s=t.length&&t[t.length-1].x<t[0].x,l=function(c,v){var m=c.xbnd[v];m!==null&&r.push(ra.extendFlat({},c,{x:m}))};if(e.showdividers&&t.length){for(i=0;i<t.length;i++){var u=t[i];u.text2!==a&&l(u,s?1:0),a=u.text2}l(t[i-1],s?0:1)}return r}function zre(e,t,r){var i,a,s,l;if(e._selections[t].size())i=1/0,a=-1/0,s=1/0,l=-1/0,e._selections[t].each(function(){var c=r4(this),v=cl.bBox(c.node().parentNode);i=Math.min(i,v.top),a=Math.max(a,v.bottom),s=Math.min(s,v.left),l=Math.max(l,v.right)});else{var u=$t.makeLabelFns(e,r);i=a=u.yFn({dx:0,dy:0,fontSize:0}),s=l=u.xFn({dx:0,dy:0,fontSize:0})}return{top:i,bottom:a,left:s,right:l,height:a-i,width:l-s}}$t.getTickSigns=function(e,t){var r=e._id.charAt(0),i={x:"top",y:"right"}[r],a=e.side===i?1:-1,s=[-1,1,a,-a],l=t?(e.minor||{}).ticks:e.ticks;return l!=="inside"==(r==="x")&&(s=s.map(function(u){return-u})),e.side&&s.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),s};$t.makeTransTickFn=function(e){return e._id.charAt(0)==="x"?function(t){return X0(e._offset+e.l2p(t.x),0)}:function(t){return X0(0,e._offset+e.l2p(t.x))}};$t.makeTransTickLabelFn=function(e){var t=Ire(e),r=e.ticklabelshift||0,i=e.ticklabelstandoff||0,a=t[0],s=t[1],l=e.range[0]>e.range[1],u=e.ticklabelposition&&e.ticklabelposition.indexOf("inside")!==-1,c=!u;if(r){var v=l?-1:1;r=r*v}if(i){var m=e.side,_=u&&(m==="top"||m==="left")||c&&(m==="bottom"||m==="right")?1:-1;i=i*_}return e._id.charAt(0)==="x"?function(T){return X0(a+e._offset+e.l2p(t4(T))+r,s+i)}:function(T){return X0(s+i,a+e._offset+e.l2p(t4(T))+r)}};function t4(e){return e.periodX!==void 0?e.periodX:e.x}function Ire(e){var t=e.ticklabelposition||"",r=function(M){return t.indexOf(M)!==-1},i=r("top"),a=r("left"),s=r("right"),l=r("bottom"),u=r("inside"),c=l||a||i||s;if(!c&&!u)return[0,0];var v=e.side,m=c?(e.tickwidth||0)/2:0,_=R2,T=e.tickfont?e.tickfont.size:12;return(l||i)&&(m+=T*Pd,_+=(e.linewidth||0)/2),(a||s)&&(m+=(e.linewidth||0)/2,_+=R2),u&&v==="top"&&(_-=T*(1-Pd)),(a||i)&&(m=-m),(v==="bottom"||v==="right")&&(_=-_),[c?m:0,u?_:0]}$t.makeTickPath=function(e,t,r,i){i||(i={});var a=i.minor;if(a&&!e.minor)return"";var s=i.len!==void 0?i.len:a?e.minor.ticklen:e.ticklen,l=e._id.charAt(0),u=(e.linewidth||1)/2;return l==="x"?"M0,"+(t+u*r)+"v"+s*r:"M"+(t+u*r)+",0h"+s*r};$t.makeLabelFns=function(e,t,r){var i=e.ticklabelposition||"",a=function(oe){return i.indexOf(oe)!==-1},s=a("top"),l=a("left"),u=a("right"),c=a("bottom"),v=c||l||s||u,m=a("inside"),_=i==="inside"&&e.ticks==="inside"||!m&&e.ticks==="outside"&&e.tickson!=="boundaries",T=0,M=0,k=_?e.ticklen:0;if(m?k*=-1:v&&(k=0),_&&(T+=k,r)){var L=ra.deg2rad(r);T=k*Math.cos(L)+1,M=k*Math.sin(L)}e.showticklabels&&(_||e.showline)&&(T+=.2*e.tickfont.size),T+=(e.linewidth||1)/2*(m?-1:1);var E={labelStandoff:T,labelShift:M},I,R,N,z,B=0,H=e.side,V=e._id.charAt(0),Y=e.tickangle,J;if(V==="x")J=!m&&H==="bottom"||m&&H==="top",z=J?1:-1,m&&(z*=-1),I=M*z,R=t+T*z,N=J?1:-.2,Math.abs(Y)===90&&(m?N+=hg:Y===-90&&H==="bottom"?N=Pd:Y===90&&H==="top"?N=hg:N=.5,B=hg/2*(Y/90)),E.xFn=function(oe){return oe.dx+I+B*oe.fontSize},E.yFn=function(oe){return oe.dy+R+oe.fontSize*N},E.anchorFn=function(oe,ue){if(v){if(l)return"end";if(u)return"start"}return!On(ue)||ue===0||ue===180?"middle":ue*z<0!==m?"end":"start"},E.heightFn=function(oe,ue,me){return ue<-60||ue>60?-.5*me:e.side==="top"!==m?-me:0};else if(V==="y"){if(J=!m&&H==="left"||m&&H==="right",z=J?1:-1,m&&(z*=-1),I=T,R=M*z,N=0,!m&&Math.abs(Y)===90&&(Y===-90&&H==="left"||Y===90&&H==="right"?N=Pd:N=.5),m){var re=On(Y)?+Y:0;if(re!==0){var ne=ra.deg2rad(re);B=Math.abs(Math.sin(ne))*Pd*z,N=0}}E.xFn=function(oe){return oe.dx+t-(I+oe.fontSize*N)*z+B*oe.fontSize},E.yFn=function(oe){return oe.dy+R+oe.fontSize*hg},E.anchorFn=function(oe,ue){return On(ue)&&Math.abs(ue)===90?"middle":J?"end":"start"},E.heightFn=function(oe,ue,me){return e.side==="right"&&(ue*=-1),ue<-30?-me:ue<30?-.5*me:0}}return E};function B2(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}$t.drawTicks=function(e,t,r){r=r||{};var i=t._id+"tick",a=[].concat(t.minor&&t.minor.ticks?r.vals.filter(function(l){return l.minor&&!l.noTick}):[]).concat(t.ticks?r.vals.filter(function(l){return!l.minor&&!l.noTick}):[]),s=r.layer.selectAll("path."+i).data(a,B2);s.exit().remove(),s.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",r.crisp!==!1).each(function(l){return dg.stroke(Ql.select(this),l.minor?t.minor.tickcolor:t.tickcolor)}).style("stroke-width",function(l){return cl.crispRound(e,l.minor?t.minor.tickwidth:t.tickwidth,1)+"px"}).attr("d",r.path).style("display",null),O2(t,[XL]),s.attr("transform",r.transFn)};$t.drawGrid=function(e,t,r){if(r=r||{},t.tickmode!=="sync"){var i=t._id+"grid",a=t.minor&&t.minor.showgrid,s=a?r.vals.filter(function(I){return I.minor}):[],l=t.showgrid?r.vals.filter(function(I){return!I.minor}):[],u=r.counterAxis;if(u&&$t.shouldShowZeroLine(e,t,u))for(var c=t.tickmode==="array",v=0;v<l.length;v++){var m=l[v].x;if(c?!m:Math.abs(m)<t.dtick/100)if(l=l.slice(0,v).concat(l.slice(v+1)),c)v--;else break}t._gw=cl.crispRound(e,t.gridwidth,1);for(var _=a?cl.crispRound(e,t.minor.gridwidth,1):0,T=r.layer,M=r.minorLayer,k=1;k>=0;k--){var L=k?T:M;if(L){var E=L.selectAll("path."+i).data(k?l:s,B2);E.exit().remove(),E.enter().append("path").classed(i,1).classed("crisp",r.crisp!==!1),E.attr("transform",r.transFn).attr("d",r.path).each(function(I){return dg.stroke(Ql.select(this),I.minor?t.minor.gridcolor:t.gridcolor||"#ddd")}).style("stroke-dasharray",function(I){return cl.dashStyle(I.minor?t.minor.griddash:t.griddash,I.minor?t.minor.gridwidth:t.gridwidth)}).style("stroke-width",function(I){return(I.minor?_:t._gw)+"px"}).style("display",null),typeof r.path=="function"&&E.attr("d",r.path)}}O2(t,[$5,e4])}};$t.drawZeroLine=function(e,t,r){r=r||r;var i=t._id+"zl",a=$t.shouldShowZeroLine(e,t,r.counterAxis),s=r.layer.selectAll("path."+i).data(a?[{x:0,id:t._id}]:[]);s.exit().remove(),s.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",r.crisp!==!1).each(function(){r.layer.selectAll("path").sort(function(l,u){return cre(l.id,u.id)})}),s.attr("transform",r.transFn).attr("d",r.path).call(dg.stroke,t.zerolinecolor||dg.defaultLine).style("stroke-width",cl.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),O2(t,[Q5])};$t.drawLabels=function(e,t,r){r=r||{};var i=e._fullLayout,a=t._id,s=r.cls||a+"tick",l=r.vals.filter(function(_e){return _e.text}),u=r.labelFns,c=r.secondary?0:t.tickangle,v=(t._prevTickAngles||{})[s],m=r.layer.selectAll("g."+s).data(t.showticklabels?l:[],B2),_=[];m.enter().append("g").classed(s,1).append("text").attr("text-anchor","middle").each(function(_e){var Te=Ql.select(this),Ae=e._promises.length;Te.call(Ed.positionText,u.xFn(_e),u.yFn(_e)).call(cl.font,{family:_e.font,size:_e.fontSize,color:_e.fontColor,weight:_e.fontWeight,style:_e.fontStyle,variant:_e.fontVariant,textcase:_e.fontTextcase,lineposition:_e.fontLineposition,shadow:_e.fontShadow}).text(_e.text).call(Ed.convertToTspans,e),e._promises[Ae]?_.push(e._promises.pop().then(function(){T(Te,c)})):T(Te,c)}),O2(t,[NL]),m.exit().remove(),r.repositionOnUpdate&&m.each(function(_e){Ql.select(this).select("text").call(Ed.positionText,u.xFn(_e),u.yFn(_e))});function T(_e,Te){_e.each(function(Ae){var Le=Ql.select(this),Ke=Le.select(".text-math-group"),ct=u.anchorFn(Ae,Te),it=r.transFn.call(Le.node(),Ae)+(On(Te)&&+Te!=0?" rotate("+Te+","+u.xFn(Ae)+","+(u.yFn(Ae)-Ae.fontSize/2)+")":""),ut=Ed.lineCount(Le),Ge=mg*Ae.fontSize,xt=u.heightFn(Ae,On(Te)?+Te:0,(ut-1)*Ge);if(xt&&(it+=X0(0,xt)),Ke.empty()){var at=Le.select("text");at.attr({transform:it,"text-anchor":ct}),at.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var At=cl.bBox(Ke.node()).width,kt=At*{end:-.5,start:.5}[ct];Ke.attr("transform",it+X0(kt,0))}})}t._adjustTickLabelsOverflow=function(){var _e=t.ticklabeloverflow;if(!(!_e||_e==="allow")){var Te=_e.indexOf("hide")!==-1,Ae=t._id.charAt(0)==="x",Le=0,Ke=Ae?e._fullLayout.width:e._fullLayout.height;if(_e.indexOf("domain")!==-1){var ct=ra.simpleMap(t.range,t.r2l);Le=t.l2p(ct[0])+t._offset,Ke=t.l2p(ct[1])+t._offset}var it=Math.min(Le,Ke),ut=Math.max(Le,Ke),Ge=t.side,xt=1/0,at=-1/0;m.each(function(ye){var Re=Ql.select(this),xe=Re.select(".text-math-group");if(xe.empty()){var et=cl.bBox(Re.node()),vt=0;Ae?(et.right>ut||et.left<it)&&(vt=1):(et.bottom>ut||et.top+(t.tickangle?0:ye.fontSize/4)<it)&&(vt=1);var tt=Re.select("text");vt?Te&&tt.style("opacity",0):(tt.style("opacity",1),Ge==="bottom"||Ge==="right"?xt=Math.min(xt,Ae?et.top:et.left):xt=-1/0,Ge==="top"||Ge==="left"?at=Math.max(at,Ae?et.bottom:et.right):at=1/0)}});for(var At in i._plots){var kt=i._plots[At];if(!(t._id!==kt.xaxis._id&&t._id!==kt.yaxis._id)){var mt=Ae?kt.yaxis:kt.xaxis;mt&&(mt["_visibleLabelMin_"+t._id]=xt,mt["_visibleLabelMax_"+t._id]=at)}}}},t._hideCounterAxisInsideTickLabels=function(_e){var Te=t._id.charAt(0)==="x",Ae=[];for(var Le in i._plots){var Ke=i._plots[Le];t._id!==Ke.xaxis._id&&t._id!==Ke.yaxis._id||Ae.push(Te?Ke.yaxis:Ke.xaxis)}Ae.forEach(function(ct,it){ct&&gg(ct)&&(_e||[Q5,e4,$5,XL,NL]).forEach(function(ut){var Ge=ut.K==="tick"&&ut.L==="text"&&t.ticklabelmode==="period",xt=i._plots[t._mainSubplot],at;ut.K===Q5.K?at=xt.zerolinelayer.selectAll("."+t._id+"zl"):ut.K===e4.K?at=xt.minorGridlayer.selectAll("."+t._id):ut.K===$5.K?at=xt.gridlayer.selectAll("."+t._id):at=xt[t._id.charAt(0)+"axislayer"],at.each(function(){var At=Ql.select(this);ut.L&&(At=At.selectAll(ut.L)),At.each(function(kt){var mt=t.l2p(Ge?t4(kt):kt.x)+t._offset,ye=Ql.select(this);mt<t["_visibleLabelMax_"+ct._id]&&mt>t["_visibleLabelMin_"+ct._id]?ye.style("display","none"):ut.K==="tick"&&!it&&ye.style("display",null)})})})})},T(m,v+1?v:c);function M(){return _.length&&Promise.all(_)}var k=null;function L(){if(T(m,c),l.length&&t.autotickangles&&(t.type!=="log"||String(t.dtick).charAt(0)!=="D")){k=t.autotickangles[0];var _e=0,Te=[],Ae,Le=1;m.each(function(gt){_e=Math.max(_e,gt.fontSize);var Et=t.l2p(gt.x),ir=r4(this),Gt=cl.bBox(ir.node());Le=Math.max(Le,Ed.lineCount(ir)),Te.push({top:0,bottom:10,height:10,left:Et-Gt.width/2,right:Et+Gt.width/2+2,width:Gt.width+2})});var Ke=(t.tickson==="boundaries"||t.showdividers)&&!r.secondary,ct=l.length,it=Math.abs((l[ct-1].x-l[0].x)*t._m)/(ct-1),ut=Ke?it/2:it,Ge=Ke?t.ticklen:_e*1.25*Le,xt=Math.sqrt(Math.pow(ut,2)+Math.pow(Ge,2)),at=ut/xt,At=t.autotickangles.map(function(gt){return gt*Math.PI/180}),kt=At.find(function(gt){return Math.abs(Math.cos(gt))<=at});kt===void 0&&(kt=At.reduce(function(gt,Et){return Math.abs(Math.cos(gt))<Math.abs(Math.cos(Et))?gt:Et},At[0]));var mt=kt*(180/Math.PI);if(Ke){var ye=2;for(t.ticks&&(ye+=t.tickwidth/2),Ae=0;Ae<Te.length;Ae++){var Re=l[Ae].xbnd,xe=Te[Ae];if(Re[0]!==null&&xe.left-t.l2p(Re[0])<ye||Re[1]!==null&&t.l2p(Re[1])-xe.right<ye){k=mt;break}}}else{var et=t.ticklabelposition||"",vt=function(gt){return et.indexOf(gt)!==-1},tt=vt("top"),Bt=vt("left"),Mt=vt("right"),Ct=vt("bottom"),Rt=Ct||Bt||tt||Mt,Ot=Rt?(t.tickwidth||0)+2*R2:0;for(Ae=0;Ae<Te.length-1;Ae++)if(ra.bBoxIntersect(Te[Ae],Te[Ae+1],Ot)){k=mt;break}}k&&T(m,k)}}t._selections&&(t._selections[s]=m);var E=[M];t.automargin&&i._redrawFromAutoMarginCount&&v===90?(k=v,E.push(function(){T(m,v)})):E.push(L),t._tickAngles&&E.push(function(){t._tickAngles[s]=k===null?On(c)?c:0:k});var I=function(){var _e=0,Te=0;return m.each(function(Ae,Le){var Ke=r4(this),ct=Ke.select(".text-math-group");if(ct.empty()){var it;t._vals[Le]&&(it=t._vals[Le].bb||cl.bBox(Ke.node()),t._vals[Le].bb=it),_e=Math.max(_e,it.width),Te=Math.max(Te,it.height)}}),{labelsMaxW:_e,labelsMaxH:Te}},R=t._anchorAxis;if(R&&(R.autorange||R.insiderange)&&gg(t)&&!hre(i,t._id)&&(i._insideTickLabelsUpdaterange||(i._insideTickLabelsUpdaterange={}),R.autorange&&(i._insideTickLabelsUpdaterange[R._name+".autorange"]=R.autorange,E.push(I)),R.insiderange)){var N=I(),z=t._id.charAt(0)==="y"?N.labelsMaxW:N.labelsMaxH;z+=2*R2,t.ticklabelposition==="inside"&&(z+=t.ticklen||0);var B=t.side==="right"||t.side==="top"?1:-1,H=B===1?1:0,V=B===1?0:1,Y=[];Y[V]=R.range[V];var J=R.range,re=R.r2p(J[H]),ne=R.r2p(J[V]),oe=i._insideTickLabelsUpdaterange[R._name+".range"];if(oe){var ue=R.r2p(oe[H]),me=R.r2p(oe[V]),Se=B*(t._id.charAt(0)==="y"?1:-1);Se*re<Se*ue&&(re=ue,Y[H]=J[H]=oe[H]),Se*ne>Se*me&&(ne=me,Y[V]=J[V]=oe[V])}var Ce=Math.abs(ne-re);Ce-z>0?(Ce-=z,z*=1+z/Ce):z=0,t._id.charAt(0)!=="y"&&(z=-z),Y[H]=R.p2r(R.r2p(J[H])+B*z),R.autorange==="min"||R.autorange==="max reversed"?(Y[0]=null,R._rangeInitial0=void 0,R._rangeInitial1=void 0):(R.autorange==="max"||R.autorange==="min reversed")&&(Y[1]=null,R._rangeInitial0=void 0,R._rangeInitial1=void 0),i._insideTickLabelsUpdaterange[R._name+".range"]=Y}var Me=ra.syncOrAsync(E);return Me&&Me.then&&e._promises.push(Me),Me};function Rre(e,t,r){var i=t._id+"divider",a=r.vals,s=r.layer.selectAll("path."+i).data(a,B2);s.exit().remove(),s.enter().insert("path",":first-child").classed(i,1).classed("crisp",1).call(dg.stroke,t.dividercolor).style("stroke-width",cl.crispRound(e,t.dividerwidth,1)+"px"),s.attr("transform",r.transFn).attr("d",r.path)}$t.getPxPosition=function(e,t){var r=e._fullLayout._size,i=t._id.charAt(0),a=t.side,s;if(t.anchor!=="free"?s=t._anchorAxis:i==="x"?s={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:i==="y"&&(s={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}),a==="top"||a==="left")return s._offset;if(a==="bottom"||a==="right")return s._offset+s._length};function WL(e){var t=e.title.font.size,r=(e.title.text.match(Ed.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?t*(Pd+r*mg):r?t*(r+1)*mg:t}function Fre(e,t){var r=e._fullLayout,i=t._id,a=i.charAt(0),s=t.title.font.size,l,u=(t.title.text.match(Ed.BR_TAG_ALL)||[]).length;if(t.title.hasOwnProperty("standoff"))t.side==="bottom"||t.side==="right"?l=t._depth+t.title.standoff+s*Pd:(t.side==="top"||t.side==="left")&&(l=t._depth+t.title.standoff+s*(hg+u*mg));else{var c=gg(t);if(t.type==="multicategory")l=t._depth;else{var v=1.5*s;c&&(v=.5*s,t.ticks==="outside"&&(v+=t.ticklen)),l=10+v+(t.linewidth?t.linewidth-1:0)}c||(a==="x"?l+=t.side==="top"?s*(t.showticklabels?1:0):s*(t.showticklabels?1.5:.5):l+=t.side==="right"?s*(t.showticklabels?1:.5):s*(t.showticklabels?.5:0))}var m=$t.getPxPosition(e,t),_,T,M;a==="x"?(T=t._offset+t._length/2,M=t.side==="top"?m-l:m+l):(M=t._offset+t._length/2,T=t.side==="right"?m+l:m-l,_={rotate:"-90",offset:0});var k;if(t.type!=="multicategory"){var L=t._selections[t._id+"tick"];if(k={selection:L,side:t.side},L&&L.node()&&L.node().parentNode){var E=cl.getTranslate(L.node().parentNode);k.offsetLeft=E.x,k.offsetTop=E.y}t.title.hasOwnProperty("standoff")&&(k.pad=0)}return t._titleStandoff=l,rre.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[a],avoid:k,transform:_,attributes:{x:T,y:M,"text-anchor":"middle"}})}$t.shouldShowZeroLine=function(e,t,r){var i=ra.simpleMap(t.range,t.r2l);return i[0]*i[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===q2)&&(tP(t,0)||!qre(e,t,r,i)||Nre(e,t))};$t.clipEnds=function(e,t){return t.filter(function(r){return tP(e,r.x)})};function tP(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function qre(e,t,r,i){var a=r._mainAxis;if(!a)return;var s=e._fullLayout,l=t._id.charAt(0),u=$t.counterLetter(t._id),c=t._offset+(Math.abs(i[0])<Math.abs(i[1])==(l==="x")?0:t._length);function v(k){if(!k.showline||!k.linewidth)return!1;var L=Math.max((k.linewidth+t.zerolinewidth)/2,1);function E(N){return typeof N=="number"&&Math.abs(N-c)<L}if(E(k._mainLinePosition)||E(k._mainMirrorPosition))return!0;var I=k._linepositions||{};for(var R in I)if(E(I[R][0])||E(I[R][1]))return!0}var m=s._plots[r._mainSubplot];if(!(m.mainplotinfo||m).overlays.length)return v(r,c);for(var _=$t.list(e,u),T=0;T<_.length;T++){var M=_[T];if(M._mainAxis===a&&v(M,c))return!0}}function Nre(e,t){for(var r=e._fullData,i=t._mainSubplot,a=t._id.charAt(0),s=0;s<r.length;s++){var l=r[s];if(l.visible===!0&&l.xaxis+l.yaxis===i&&(vg.traceIs(l,"bar-like")&&l.orientation==={x:"h",y:"v"}[a]||l.fill&&l.fill.charAt(l.fill.length-1)===a))return!0}return!1}function r4(e){var t=Ql.select(e),r=t.select(".text-math-group");return r.empty()?t.select("text"):r}$t.allowAutoMargin=function(e){for(var t=$t.list(e,"",!0),r=0;r<t.length;r++){var i=t[r];i.automargin&&(W0.allowAutoMargin(e,o4(i)),i.mirror&&W0.allowAutoMargin(e,rP(i))),vg.getComponentMethod("rangeslider","isVisible")(i)&&W0.allowAutoMargin(e,aP(i))}};function o4(e){return e._id+".automargin"}function rP(e){return o4(e)+".mirror"}function aP(e){return e._id+".rangeslider"}$t.swap=function(e,t){for(var r=Bre(e,t),i=0;i<r.length;i++)Ore(e,r[i].x,r[i].y)};function Bre(e,t){var r=[],i,a;for(i=0;i<t.length;i++){var s=[],l=e._fullData[t[i]].xaxis,u=e._fullData[t[i]].yaxis;if(!(!l||!u)){for(a=0;a<r.length;a++)(r[a].x.indexOf(l)!==-1||r[a].y.indexOf(u)!==-1)&&s.push(a);if(!s.length){r.push({x:[l],y:[u]});continue}var c=r[s[0]],v;if(s.length>1)for(a=1;a<s.length;a++)v=r[s[a]],E2(c.x,v.x),E2(c.y,v.y);E2(c.x,[l]),E2(c.y,[u])}}return r}function E2(e,t){for(var r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r])}function Ore(e,t,r){var i=[],a=[],s=e.layout,l,u;for(l=0;l<t.length;l++)i.push($t.getFromId(e,t[l]));for(l=0;l<r.length;l++)a.push($t.getFromId(e,r[l]));var c=Object.keys(are),v=["anchor","domain","overlaying","position","side","tickangle","editType"],m=["linear","log"];for(l=0;l<c.length;l++){var _=c[l],T=i[0][_],M=a[0][_],k=!0,L=!1,E=!1;if(!(_.charAt(0)==="_"||typeof T=="function"||v.indexOf(_)!==-1)){for(u=1;u<i.length&&k;u++){var I=i[u][_];_==="type"&&m.indexOf(T)!==-1&&m.indexOf(I)!==-1&&T!==I?L=!0:I!==T&&(k=!1)}for(u=1;u<a.length&&k;u++){var R=a[u][_];_==="type"&&m.indexOf(M)!==-1&&m.indexOf(R)!==-1&&M!==R?E=!0:a[u][_]!==M&&(k=!1)}k&&(L&&(s[i[0]._name].type="linear"),E&&(s[a[0]._name].type="linear"),Ure(s,_,i,a,e._fullLayout._dfltTitle))}}for(l=0;l<e._fullLayout.annotations.length;l++){var N=e._fullLayout.annotations[l];t.indexOf(N.xref)!==-1&&r.indexOf(N.yref)!==-1&&ra.swapAttrs(s.annotations[l],["?"])}}function Ure(e,t,r,i,a){var s=ra.nestedProperty,l=s(e[r[0]._name],t).get(),u=s(e[i[0]._name],t).get(),c;for(t==="title"&&(l&&l.text===a.x&&(l.text=a.y),u&&u.text===a.y&&(u.text=a.x)),c=0;c<r.length;c++)s(e,r[c]._name+"."+t).set(u);for(c=0;c<i.length;c++)s(e,i[c]._name+"."+t).set(l)}function s4(e){return e._id==="angularaxis"}function J5(e,t){for(var r=t._rangebreaks.length,i=0;i<r;i++){var a=t._rangebreaks[i];if(e>=a.min&&e<a.max)return a.max}return e}function gg(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function O2(e,t){gg(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function a4(e,t,r,i){var a=e.anchor!=="free"&&(e.overlaying===void 0||e.overlaying===!1)?e._id:e.overlaying,s;i?s=e.side==="right"?t:-t:s=t,a in r||(r[a]={}),e.side in r[a]||(r[a][e.side]=0),r[a][e.side]+=s}function Vre(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}function Hre(e,t){return/%f/.test(t)?e>=lre:/%L/.test(t)?e>=sre:/%[SX]/.test(t)?e>=I2:/%M/.test(t)?e>=pg:/%[HI]/.test(t)?e>=Ff:/%p/.test(t)?e>=Zh:/%[Aadejuwx]/.test(t)?e>=ns:/%[UVW]/.test(t)?e>=hl:/%[Bbm]/.test(t)?e>=z2:/%[q]/.test(t)?e>=D2:/%[Yy]/.test(t)?e>=P2:!0}});var oP=he((g_e,nP)=>{"use strict";nP.exports=function(t,r,i){var a,s;if(i){var l=r==="reversed"||r==="min reversed"||r==="max reversed";a=i[l?1:0],s=i[l?0:1]}var u=t("autorangeoptions.minallowed",s===null?a:void 0),c=t("autorangeoptions.maxallowed",a===null?s:void 0);u===void 0&&t("autorangeoptions.clipmin"),c===void 0&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")}});var l4=he((__e,sP)=>{"use strict";var Gre=oP();sP.exports=function(t,r,i,a){var s=r._template||{},l=r.type||s.type||"-";i("minallowed"),i("maxallowed");var u=i("range");if(!u){var c;!a.noInsiderange&&l!=="log"&&(c=i("insiderange"),c&&(c[0]===null||c[1]===null)&&(r.insiderange=!1,c=void 0),c&&(u=i("range",c)))}var v=r.getAutorangeDflt(u,a),m=i("autorange",v),_;u&&(u[0]===null&&u[1]===null||(u[0]===null||u[1]===null)&&(m==="reversed"||m===!0)||u[0]!==null&&(m==="min"||m==="max reversed")||u[1]!==null&&(m==="max"||m==="min reversed"))&&(u=void 0,delete r.range,r.autorange=!0,_=!0),_||(v=r.getAutorangeDflt(u,a),m=i("autorange",v)),m&&(Gre(i,m,u),(l==="linear"||l==="-")&&i("rangemode")),r.cleanRange()}});var uP=he((x_e,lP)=>{var Zre={left:0,top:0};lP.exports=Yre;function Yre(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,a=e.clientY||0,s=Wre(t);return r[0]=i-s.left,r[1]=a-s.top,r}function Wre(e){return e===window||e===document||e===document.body?Zre:e.getBoundingClientRect()}});var u4=he((b_e,fP)=>{"use strict";var Xre=Rw();function jre(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(r){e=!1}return e}fP.exports=Xre&&jre()});var hP=he((w_e,cP)=>{"use strict";cP.exports=function(t,r,i,a,s){var l=(t-i)/(a-i),u=l+r/(a-i),c=(l+u)/2;return s==="left"||s==="bottom"?l:s==="center"||s==="middle"?c:s==="right"||s==="top"?u:l<2/3-c?l:u>4/3-c?u:c}});var pP=he((T_e,dP)=>{"use strict";var vP=Nt(),Jre=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];dP.exports=function(t,r,i,a){return i==="left"?t=0:i==="center"?t=1:i==="right"?t=2:t=vP.constrain(Math.floor(t*3),0,2),a==="bottom"?r=0:a==="middle"?r=1:a==="top"?r=2:r=vP.constrain(Math.floor(r*3),0,2),Jre[r][t]}});var yP=he((A_e,mP)=>{"use strict";var Kre=Ky(),Qre=H_(),$re=Hy().getGraphDiv,eae=Uy(),f4=mP.exports={};f4.wrapped=function(e,t,r){e=$re(e),e._fullLayout&&Qre.clear(e._fullLayout._uid+eae.HOVERID),f4.raw(e,t,r)};f4.raw=function(t,r){var i=t._fullLayout,a=t._hoverdata;r||(r={}),!(r.target&&!t._dragged&&Kre.triggerHandler(t,"plotly_beforehover",r)===!1)&&(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,r.target&&a&&t.emit("plotly_unhover",{event:r,points:a}))}});var $l=he((M_e,xP)=>{"use strict";var tae=uP(),c4=qw(),rae=u4(),aae=Nt().removeElement,iae=Mo(),Dd=xP.exports={};Dd.align=hP();Dd.getCursor=pP();var gP=yP();Dd.unhover=gP.wrapped;Dd.unhoverRaw=gP.raw;Dd.init=function(t){var r=t.gd,i=1,a=r._context.doubleClickDelay,s=t.element,l,u,c,v,m,_,T,M;r._mouseDownTime||(r._mouseDownTime=0),s.style.pointerEvents="all",s.onmousedown=E,rae?(s._ontouchstart&&s.removeEventListener("touchstart",s._ontouchstart),s._ontouchstart=E,s.addEventListener("touchstart",E,{passive:!1})):s.ontouchstart=E;function k(N,z,B){return Math.abs(N)<B&&(N=0),Math.abs(z)<B&&(z=0),[N,z]}var L=t.clampFn||k;function E(N){r._dragged=!1,r._dragging=!0;var z=h4(N);l=z[0],u=z[1],T=N.target,_=N,M=N.buttons===2||N.ctrlKey,typeof N.clientX=="undefined"&&typeof N.clientY=="undefined"&&(N.clientX=l,N.clientY=u),c=new Date().getTime(),c-r._mouseDownTime<a?i+=1:(i=1,r._mouseDownTime=c),t.prepFn&&t.prepFn(N,l,u),c4&&!M?(m=_P(),m.style.cursor=window.getComputedStyle(s).cursor):c4||(m=document,v=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(s).cursor),document.addEventListener("mouseup",R),document.addEventListener("touchend",R),t.dragmode!==!1&&(N.preventDefault(),document.addEventListener("mousemove",I),document.addEventListener("touchmove",I,{passive:!1}))}function I(N){N.preventDefault();var z=h4(N),B=t.minDrag||iae.MINDRAG,H=L(z[0]-l,z[1]-u,B),V=H[0],Y=H[1];(V||Y)&&(r._dragged=!0,Dd.unhover(r,N)),r._dragged&&t.moveFn&&!M&&(r._dragdata={element:s,dx:V,dy:Y},t.moveFn(V,Y))}function R(N){if(delete r._dragdata,t.dragmode!==!1&&(N.preventDefault(),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I)),document.removeEventListener("mouseup",R),document.removeEventListener("touchend",R),c4?aae(m):v&&(m.documentElement.style.cursor=v,v=null),!r._dragging){r._dragged=!1;return}if(r._dragging=!1,new Date().getTime()-r._mouseDownTime>a&&(i=Math.max(i-1,1)),r._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(i,_),!M){var z;try{z=new MouseEvent("click",N)}catch(H){var B=h4(N);z=document.createEvent("MouseEvents"),z.initMouseEvent("click",N.bubbles,N.cancelable,N.view,N.detail,N.screenX,N.screenY,B[0],B[1],N.ctrlKey,N.altKey,N.shiftKey,N.metaKey,N.button,N.relatedTarget)}T.dispatchEvent(z)}r._dragging=!1,r._dragged=!1}};function _P(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}Dd.coverSlip=_P;function h4(e){return tae(e.changedTouches?e.changedTouches[0]:e,document.body)}});var Yh=he((S_e,bP)=>{"use strict";bP.exports=function(t,r){(t.attr("class")||"").split(" ").forEach(function(i){i.indexOf("cursor-")===0&&t.classed(i,!1)}),r&&t.classed("cursor-"+r,!0)}});var AP=he((k_e,TP)=>{"use strict";var v4=Yh(),_g="data-savedcursor",wP="!!";TP.exports=function(t,r){var i=t.attr(_g);if(r){if(!i){for(var a=(t.attr("class")||"").split(" "),s=0;s<a.length;s++){var l=a[s];l.indexOf("cursor-")===0&&t.attr(_g,l.substr(7)).classed(l,!1)}t.attr(_g)||t.attr(_g,wP)}v4(t,r)}else i&&(t.attr(_g,null),i===wP?v4(t):v4(t,i))}});var p4=he((C_e,MP)=>{"use strict";var d4=No(),nae=kf();MP.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:nae.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:d4({editType:"legend"}),grouptitlefont:d4({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:d4({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}});var V2=he(U2=>{"use strict";U2.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1};U2.isVertical=function(t){return t.orientation!=="h"};U2.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}});var g4=he((L_e,SP)=>{"use strict";var m4=sa(),vl=Nt(),oae=Di(),sae=gs(),lae=p4(),uae=C0(),y4=V2();function fae(e,t,r,i){var a=t[e]||{},s=oae.newContainer(r,e);function l(Me,_e){return vl.coerce(a,s,lae,Me,_e)}var u=vl.coerceFont(l,"font",r.font);l("bgcolor",r.paper_bgcolor),l("bordercolor");var c=l("visible");if(c){for(var v,m=function(Me,_e){var Te=v._input,Ae=v;return vl.coerce(Te,Ae,sae,Me,_e)},_=r.font||{},T=vl.coerceFont(l,"grouptitlefont",_,{overrideDflt:{size:Math.round(_.size*1.1)}}),M=0,k=!1,L="normal",E=(r.shapes||[]).filter(function(Me){return Me.showlegend}),I=i.concat(E).filter(function(Me){return e===(Me.legend||"legend")}),R=0;R<I.length;R++)if(v=I[R],!!v.visible){var N=v._isShape;(v.showlegend||v._dfltShowLegend&&!(v._module&&v._module.attributes&&v._module.attributes.showlegend&&v._module.attributes.showlegend.dflt===!1))&&(M++,v.showlegend&&(k=!0,(!N&&m4.traceIs(v,"pie-like")||v._input.showlegend===!0)&&M++),vl.coerceFont(m,"legendgrouptitle.font",T)),(!N&&m4.traceIs(v,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(v.fill)!==-1)&&(L=y4.isGrouped({traceorder:L})?"grouped+reversed":"reversed"),v.legendgroup!==void 0&&v.legendgroup!==""&&(L=y4.isReversed({traceorder:L})?"reversed+grouped":"grouped")}var z=vl.coerce(t,r,uae,"showlegend",k&&M>(e==="legend"?1:0));if(z===!1&&(r[e]=void 0),!(z===!1&&!a.uirevision)&&(l("uirevision",r.uirevision),z!==!1)){l("borderwidth");var B=l("orientation"),H=l("yref"),V=l("xref"),Y=B==="h",J=H==="paper",re=V==="paper",ne,oe,ue,me="left";Y?(ne=0,m4.getComponentMethod("rangeslider","isVisible")(t.xaxis)?J?(oe=1.1,ue="bottom"):(oe=1,ue="top"):J?(oe=-.1,ue="top"):(oe=0,ue="bottom")):(oe=1,ue="auto",re?ne=1.02:(ne=1,me="right")),vl.coerce(a,s,{x:{valType:"number",editType:"legend",min:re?-2:0,max:re?3:1,dflt:ne}},"x"),vl.coerce(a,s,{y:{valType:"number",editType:"legend",min:J?-2:0,max:J?3:1,dflt:oe}},"y"),l("traceorder",L),y4.isGrouped(r[e])&&l("tracegroupgap"),l("entrywidth"),l("entrywidthmode"),l("indentation"),l("itemsizing"),l("itemwidth"),l("itemclick"),l("itemdoubleclick"),l("groupclick"),l("xanchor",me),l("yanchor",ue),l("valign"),vl.noneOrAll(a,s,["x","y"]);var Se=l("title.text");if(Se){l("title.side",Y?"left":"top");var Ce=vl.extendFlat({},u,{size:vl.bigFont(u.size)});vl.coerceFont(l,"title.font",Ce)}}}}SP.exports=function(t,r,i){var a,s=i.slice(),l=r.shapes;if(l)for(a=0;a<l.length;a++){var u=l[a];if(u.showlegend){var c={_input:u._input,visible:u.visible,showlegend:u.showlegend,legend:u.legend};s.push(c)}}var v=["legend"];for(a=0;a<s.length;a++)vl.pushUnique(v,s[a].legend);for(r._legends=[],a=0;a<v.length;a++){var m=v[a];fae(m,t,r,s),r[m]&&r[m].visible&&(r[m]._id=m),r._legends.push(m)}}});var CP=he((P_e,kP)=>{"use strict";var Wh=sa(),H2=Nt(),cae=H2.pushUnique,_4=!0;kP.exports=function(t,r,i){var a=r._fullLayout;if(r._dragged||r._editing)return;var s=a.legend.itemclick,l=a.legend.itemdoubleclick,u=a.legend.groupclick;i===1&&s==="toggle"&&l==="toggleothers"&&_4&&r.data&&r._context.showTips&&H2.notifier(H2._(r,"Double-click on legend to isolate one trace"),"long"),_4=!1;var c;if(i===1?c=s:i===2&&(c=l),!c)return;var v=u==="togglegroup",m=a.hiddenlabels?a.hiddenlabels.slice():[],_=t.data()[0][0];if(_.groupTitle&&_.noClick)return;var T=r._fullData,M=(a.shapes||[]).filter(function(Rt){return Rt.showlegend}),k=T.concat(M),L=_.trace;L._isShape&&(L=L._fullInput);var E=L.legendgroup,I,R,N,z,B,H,V={},Y=[],J=[],re=[];function ne(Rt,Ot){var gt=Y.indexOf(Rt),Et=V.visible;return Et||(Et=V.visible=[]),Y.indexOf(Rt)===-1&&(Y.push(Rt),gt=Y.length-1),Et[gt]=Ot,gt}var oe=(a.shapes||[]).map(function(Rt){return Rt._input}),ue=!1;function me(Rt,Ot){oe[Rt].visible=Ot,ue=!0}function Se(Rt,Ot){if(!(_.groupTitle&&!v)){var gt=Rt._fullInput||Rt,Et=gt._isShape,ir=gt.index;if(ir===void 0&&(ir=gt._index),Wh.hasTransform(gt,"groupby")){var Gt=J[ir];if(!Gt){var Ne=Wh.getTransformIndices(gt,"groupby"),ft=Ne[Ne.length-1];Gt=H2.keyedContainer(gt,"transforms["+ft+"].styles","target","value.visible"),J[ir]=Gt}var pt=Gt.get(Rt._group);pt===void 0&&(pt=!0),pt!==!1&&Gt.set(Rt._group,Ot),re[ir]=ne(ir,gt.visible!==!1)}else{var xr=gt.visible===!1?!1:Ot;Et?me(ir,xr):ne(ir,xr)}}}var Ce=L.legend,Me=L._fullInput,_e=Me&&Me._isShape;if(!_e&&Wh.traceIs(L,"pie-like")){var Te=_.label,Ae=m.indexOf(Te);if(c==="toggle")Ae===-1?m.push(Te):m.splice(Ae,1);else if(c==="toggleothers"){var Le=Ae!==-1,Ke=[];for(I=0;I<r.calcdata.length;I++){var ct=r.calcdata[I];for(R=0;R<ct.length;R++){var it=ct[R],ut=it.label;Ce===ct[0].trace.legend&&Te!==ut&&(m.indexOf(ut)===-1&&(Le=!0),cae(m,ut),Ke.push(ut))}}if(!Le)for(var Ge=0;Ge<Ke.length;Ge++){var xt=m.indexOf(Ke[Ge]);xt!==-1&&m.splice(xt,1)}}Wh.call("_guiRelayout",r,"hiddenlabels",m)}else{var at=E&&E.length,At=[],kt;if(at)for(I=0;I<k.length;I++)kt=k[I],kt.visible&&kt.legendgroup===E&&At.push(I);if(c==="toggle"){var mt;switch(L.visible){case!0:mt="legendonly";break;case!1:mt=!1;break;case"legendonly":mt=!0;break}if(at)if(v)for(I=0;I<k.length;I++){var ye=k[I];ye.visible!==!1&&ye.legendgroup===E&&Se(ye,mt)}else Se(L,mt);else Se(L,mt)}else if(c==="toggleothers"){var Re,xe,et,vt,tt,Bt=!0;for(I=0;I<k.length;I++)if(tt=k[I],Re=tt===L,et=tt.showlegend!==!0,!(Re||et)&&(xe=at&&tt.legendgroup===E,!xe&&tt.legend===Ce&&tt.visible===!0&&!Wh.traceIs(tt,"notLegendIsolatable"))){Bt=!1;break}for(I=0;I<k.length;I++)if(tt=k[I],!(tt.visible===!1||tt.legend!==Ce)&&!Wh.traceIs(tt,"notLegendIsolatable"))switch(L.visible){case"legendonly":Se(tt,!0);break;case!0:vt=Bt?!0:"legendonly",Re=tt===L,et=tt.showlegend!==!0&&!tt.legendgroup,xe=Re||at&&tt.legendgroup===E,Se(tt,xe||et?!0:vt);break}}for(I=0;I<J.length;I++)if(N=J[I],!!N){var Mt=N.constructUpdate(),Ct=Object.keys(Mt);for(R=0;R<Ct.length;R++)z=Ct[R],H=V[z]=V[z]||[],H[re[I]]=Mt[z]}for(B=Object.keys(V),I=0;I<B.length;I++)for(z=B[I],R=0;R<Y.length;R++)V[z].hasOwnProperty(R)||(V[z][R]=void 0);ue?Wh.call("_guiUpdate",r,V,{shapes:oe},Y):Wh.call("_guiRestyle",r,V,Y)}}});var x4=he((D_e,EP)=>{"use strict";EP.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}});var DP=he((z_e,PP)=>{"use strict";var LP=sa(),b4=V2();PP.exports=function(t,r,i){var a=r._inHover,s=b4.isGrouped(r),l=b4.isReversed(r),u={},c=[],v=!1,m={},_=0,T=0,M,k;function L(Me,_e,Te){if(r.visible!==!1&&!(i&&Me!==r._id))if(_e===""||!b4.isGrouped(r)){var Ae="~~i"+_;c.push(Ae),u[Ae]=[Te],_++}else c.indexOf(_e)===-1?(c.push(_e),v=!0,u[_e]=[Te]):u[_e].push(Te)}for(M=0;M<t.length;M++){var E=t[M],I=E[0],R=I.trace,N=R.legend,z=R.legendgroup;if(!(!a&&(!R.visible||!R.showlegend)))if(LP.traceIs(R,"pie-like"))for(m[z]||(m[z]={}),k=0;k<E.length;k++){var B=E[k].label;m[z][B]||(L(N,z,{label:B,color:E[k].color,i:E[k].i,trace:R,pts:E[k].pts}),m[z][B]=!0,T=Math.max(T,(B||"").length))}else L(N,z,I),T=Math.max(T,(R.name||"").length)}if(!c.length)return[];var H=!v||!s,V=[];for(M=0;M<c.length;M++){var Y=u[c[M]];H?V.push(Y[0]):V.push(Y)}for(H&&(V=[V]),M=0;M<V.length;M++){var J=1/0;for(k=0;k<V[M].length;k++){var re=V[M][k].trace.legendrank;J>re&&(J=re)}V[M][0]._groupMinRank=J,V[M][0]._preGroupSort=M}var ne=function(Me,_e){return Me[0]._groupMinRank-_e[0]._groupMinRank||Me[0]._preGroupSort-_e[0]._preGroupSort},oe=function(Me,_e){return Me.trace.legendrank-_e.trace.legendrank||Me._preSort-_e._preSort};for(V.forEach(function(Me,_e){Me[0]._preGroupSort=_e}),V.sort(ne),M=0;M<V.length;M++){V[M].forEach(function(Me,_e){Me._preSort=_e}),V[M].sort(oe);var ue=V[M][0].trace,me=null;for(k=0;k<V[M].length;k++){var Se=V[M][k].trace.legendgrouptitle;if(Se&&Se.text){me=Se,a&&(Se.font=r._groupTitleFont);break}}if(l&&V[M].reverse(),me){var Ce=!1;for(k=0;k<V[M].length;k++)if(LP.traceIs(V[M][k].trace,"pie-like")){Ce=!0;break}V[M].unshift({i:-1,groupTitle:me,noClick:Ce,trace:{showlegend:ue.showlegend,legendgroup:ue.legendgroup,visible:r.groupclick==="toggleitem"?!0:ue.visible}})}for(k=0;k<V[M].length;k++)V[M][k]=[V[M][k]]}return r._lgroupsLength=V.length,r._maxNameLength=T,V}});var w4=he(zd=>{"use strict";var G2=Nt();function zP(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}zd.formatPiePercent=function(t,r){var i=zP((t*100).toPrecision(3));return G2.numSeparate(i,r)+"%"};zd.formatPieValue=function(t,r){var i=zP(t.toPrecision(10));return G2.numSeparate(i,r)};zd.getFirstFilled=function(t,r){if(G2.isArrayOrTypedArray(t))for(var i=0;i<r.length;i++){var a=t[r[i]];if(a||a===0||a==="")return a}};zd.castOption=function(t,r){if(G2.isArrayOrTypedArray(t))return zd.getFirstFilled(t,r);if(t)return t};zd.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}});var RP=he((R_e,IP)=>{"use strict";var hae=_i(),vae=Ua();IP.exports=function(t,r,i,a){var s=i.marker.pattern;s&&s.shape?hae.pointStyle(t,i,a,r):vae.fill(t,r.color)}});var BP=he((F_e,NP)=>{"use strict";var FP=Ua(),qP=w4().castOption,dae=RP();NP.exports=function(t,r,i,a){var s=i.marker.line,l=qP(s.color,r.pts)||FP.defaultLine,u=qP(s.width,r.pts)||0;t.call(dae,r,i,a).style("stroke-width",u).call(FP.stroke,l)}});var S4=he((q_e,ZP)=>{"use strict";var os=Ka(),T4=sa(),Uo=Nt(),OP=Uo.strTranslate,_s=_i(),eu=Ua(),A4=Pf().extractOpts,Z2=is(),pae=BP(),mae=w4().castOption,yae=x4(),UP=12,VP=5,Id=2,gae=10,J0=5;ZP.exports=function(t,r,i){var a=r._fullLayout;i||(i=a.legend);var s=i.itemsizing==="constant",l=i.itemwidth,u=(l+yae.itemGap*2)/2,c=OP(u,0),v=function(V,Y,J,re){var ne;if(V+1)ne=V;else if(Y&&Y.width>0)ne=Y.width;else return 0;return s?re:Math.min(ne,J)};t.each(function(V){var Y=os.select(this),J=Uo.ensureSingle(Y,"g","layers");J.style("opacity",V[0].trace.opacity);var re=i.indentation,ne=i.valign,oe=V[0].lineHeight,ue=V[0].height;if(ne==="middle"&&re===0||!oe||!ue)J.attr("transform",null);else{var me={top:1,bottom:-1}[ne],Se=me*(.5*(oe-ue+3))||0,Ce=i.indentation;J.attr("transform",OP(Ce,Se))}var Me=J.selectAll("g.legendfill").data([V]);Me.enter().append("g").classed("legendfill",!0);var _e=J.selectAll("g.legendlines").data([V]);_e.enter().append("g").classed("legendlines",!0);var Te=J.selectAll("g.legendsymbols").data([V]);Te.enter().append("g").classed("legendsymbols",!0),Te.selectAll("g.legendpoints").data([V]).enter().append("g").classed("legendpoints",!0)}).each(H).each(T).each(k).each(M).each(E).each(z).each(N).each(m).each(_).each(I).each(R);function m(V){var Y=HP(V),J=Y.showFill,re=Y.showLine,ne=Y.showGradientLine,oe=Y.showGradientFill,ue=Y.anyFill,me=Y.anyLine,Se=V[0],Ce=Se.trace,Me,_e,Te=A4(Ce),Ae=Te.colorscale,Le=Te.reversescale,Ke=function(At){if(At.size())if(J)_s.fillGroupStyle(At,r,!0);else{var kt="legendfill-"+Ce.uid;_s.gradient(At,r,kt,M4(Le),Ae,"fill")}},ct=function(At){if(At.size()){var kt="legendline-"+Ce.uid;_s.lineGroupStyle(At),_s.gradient(At,r,kt,M4(Le),Ae,"stroke")}},it=Z2.hasMarkers(Ce)||!ue?"M5,0":me?"M5,-2":"M5,-3",ut=os.select(this),Ge=ut.select(".legendfill").selectAll("path").data(J||oe?[V]:[]);if(Ge.enter().append("path").classed("js-fill",!0),Ge.exit().remove(),Ge.attr("d",it+"h"+l+"v6h-"+l+"z").call(Ke),re||ne){var xt=v(void 0,Ce.line,gae,VP);_e=Uo.minExtend(Ce,{line:{width:xt}}),Me=[Uo.minExtend(Se,{trace:_e})]}var at=ut.select(".legendlines").selectAll("path").data(re||ne?[Me]:[]);at.enter().append("path").classed("js-line",!0),at.exit().remove(),at.attr("d",it+(ne?"l"+l+",0.0001":"h"+l)).call(re?_s.lineGroupStyle:ct)}function _(V){var Y=HP(V),J=Y.anyFill,re=Y.anyLine,ne=Y.showLine,oe=Y.showMarker,ue=V[0],me=ue.trace,Se=!oe&&!re&&!J&&Z2.hasText(me),Ce,Me;function _e(Ge,xt,at,At){var kt=Uo.nestedProperty(me,Ge).get(),mt=Uo.isArrayOrTypedArray(kt)&&xt?xt(kt):kt;if(s&&mt&&At!==void 0&&(mt=At),at){if(mt<at[0])return at[0];if(mt>at[1])return at[1]}return mt}function Te(Ge){return ue._distinct&&ue.index&&Ge[ue.index]?Ge[ue.index]:Ge[0]}if(oe||Se||ne){var Ae={},Le={};if(oe){Ae.mc=_e("marker.color",Te),Ae.mx=_e("marker.symbol",Te),Ae.mo=_e("marker.opacity",Uo.mean,[.2,1]),Ae.mlc=_e("marker.line.color",Te),Ae.mlw=_e("marker.line.width",Uo.mean,[0,5],Id),Le.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Ke=_e("marker.size",Uo.mean,[2,16],UP);Ae.ms=Ke,Le.marker.size=Ke}ne&&(Le.line={width:_e("line.width",Te,[0,10],VP)}),Se&&(Ae.tx="Aa",Ae.tp=_e("textposition",Te),Ae.ts=10,Ae.tc=_e("textfont.color",Te),Ae.tf=_e("textfont.family",Te),Ae.tw=_e("textfont.weight",Te),Ae.ty=_e("textfont.style",Te),Ae.tv=_e("textfont.variant",Te),Ae.tC=_e("textfont.textcase",Te),Ae.tE=_e("textfont.lineposition",Te),Ae.tS=_e("textfont.shadow",Te)),Ce=[Uo.minExtend(ue,Ae)],Me=Uo.minExtend(me,Le),Me.selectedpoints=null,Me.texttemplate=null}var ct=os.select(this).select("g.legendpoints"),it=ct.selectAll("path.scatterpts").data(oe?Ce:[]);it.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",c),it.exit().remove(),it.call(_s.pointStyle,Me,r),oe&&(Ce[0].mrc=3);var ut=ct.selectAll("g.pointtext").data(Se?Ce:[]);ut.enter().append("g").classed("pointtext",!0).append("text").attr("transform",c),ut.exit().remove(),ut.selectAll("text").call(_s.textPointStyle,Me,r)}function T(V){var Y=V[0].trace,J=Y.type==="waterfall";if(V[0]._distinct&&J){var re=V[0].trace[V[0].dir].marker;return V[0].mc=re.color,V[0].mlw=re.line.width,V[0].mlc=re.line.color,L(V,this,"waterfall")}var ne=[];Y.visible&&J&&(ne=V[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var oe=os.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ne);oe.enter().append("path").classed("legendwaterfall",!0).attr("transform",c).style("stroke-miterlimit",1),oe.exit().remove(),oe.each(function(ue){var me=os.select(this),Se=Y[ue[0]].marker,Ce=v(void 0,Se.line,J0,Id);me.attr("d",ue[1]).style("stroke-width",Ce+"px").call(eu.fill,Se.color),Ce&&me.call(eu.stroke,Se.line.color)})}function M(V){L(V,this)}function k(V){L(V,this,"funnel")}function L(V,Y,J){var re=V[0].trace,ne=re.marker||{},oe=ne.line||{},ue=ne.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",me=J?re.visible&&re.type===J:T4.traceIs(re,"bar"),Se=os.select(Y).select("g.legendpoints").selectAll("path.legend"+J).data(me?[V]:[]);Se.enter().append("path").classed("legend"+J,!0).attr("d",ue).attr("transform",c),Se.exit().remove(),Se.each(function(Ce){var Me=os.select(this),_e=Ce[0],Te=v(_e.mlw,ne.line,J0,Id);Me.style("stroke-width",Te+"px");var Ae=_e.mcc;if(!i._inHover&&"mc"in _e){var Le=A4(ne),Ke=Le.mid;Ke===void 0&&(Ke=(Le.max+Le.min)/2),Ae=_s.tryColorscale(ne,"")(Ke)}var ct=Ae||_e.mc||ne.color,it=ne.pattern,ut=it&&_s.getPatternAttr(it.shape,0,"");if(ut){var Ge=_s.getPatternAttr(it.bgcolor,0,null),xt=_s.getPatternAttr(it.fgcolor,0,null),at=it.fgopacity,At=GP(it.size,8,10),kt=GP(it.solidity,.5,1),mt="legend-"+re.uid;Me.call(_s.pattern,"legend",r,mt,ut,At,kt,Ae,it.fillmode,Ge,xt,at)}else Me.call(eu.fill,ct);Te&&eu.stroke(Me,_e.mlc||oe.color)})}function E(V){var Y=V[0].trace,J=os.select(this).select("g.legendpoints").selectAll("path.legendbox").data(Y.visible&&T4.traceIs(Y,"box-violin")?[V]:[]);J.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",c),J.exit().remove(),J.each(function(){var re=os.select(this);if((Y.boxpoints==="all"||Y.points==="all")&&eu.opacity(Y.fillcolor)===0&&eu.opacity((Y.line||{}).color)===0){var ne=Uo.minExtend(Y,{marker:{size:s?UP:Uo.constrain(Y.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});J.call(_s.pointStyle,ne,r)}else{var oe=v(void 0,Y.line,J0,Id);re.style("stroke-width",oe+"px").call(eu.fill,Y.fillcolor),oe&&eu.stroke(re,Y.line.color)}})}function I(V){var Y=V[0].trace,J=os.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(Y.visible&&Y.type==="candlestick"?[V,V]:[]);J.enter().append("path").classed("legendcandle",!0).attr("d",function(re,ne){return ne?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",c).style("stroke-miterlimit",1),J.exit().remove(),J.each(function(re,ne){var oe=os.select(this),ue=Y[ne?"increasing":"decreasing"],me=v(void 0,ue.line,J0,Id);oe.style("stroke-width",me+"px").call(eu.fill,ue.fillcolor),me&&eu.stroke(oe,ue.line.color)})}function R(V){var Y=V[0].trace,J=os.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(Y.visible&&Y.type==="ohlc"?[V,V]:[]);J.enter().append("path").classed("legendohlc",!0).attr("d",function(re,ne){return ne?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",c).style("stroke-miterlimit",1),J.exit().remove(),J.each(function(re,ne){var oe=os.select(this),ue=Y[ne?"increasing":"decreasing"],me=v(void 0,ue.line,J0,Id);oe.style("fill","none").call(_s.dashLine,ue.line.dash,me),me&&eu.stroke(oe,ue.line.color)})}function N(V){B(V,this,"pie")}function z(V){B(V,this,"funnelarea")}function B(V,Y,J){var re=V[0],ne=re.trace,oe=J?ne.visible&&ne.type===J:T4.traceIs(ne,J),ue=os.select(Y).select("g.legendpoints").selectAll("path.legend"+J).data(oe?[V]:[]);if(ue.enter().append("path").classed("legend"+J,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",c),ue.exit().remove(),ue.size()){var me=ne.marker||{},Se=v(mae(me.line.width,re.pts),me.line,J0,Id),Ce="pieLike",Me=Uo.minExtend(ne,{marker:{line:{width:Se}}},Ce),_e=Uo.minExtend(re,{trace:Me},Ce);pae(ue,_e,Me,r)}}function H(V){var Y=V[0].trace,J,re=[];if(Y.visible)switch(Y.type){case"histogram2d":case"heatmap":re=[["M-15,-2V4H15V-2Z"]],J=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":re=[["M-6,-6V6H6V-6Z"]],J=!0;break;case"densitymapbox":case"densitymap":re=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],J="radial";break;case"cone":re=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],J=!1;break;case"streamtube":re=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],J=!1;break;case"surface":re=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],J=!0;break;case"mesh3d":re=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],J=!1;break;case"volume":re=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],J=!0;break;case"isosurface":re=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],J=!1;break}var ne=os.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(re);ne.enter().append("path").classed("legend3dandfriends",!0).attr("transform",c).style("stroke-miterlimit",1),ne.exit().remove(),ne.each(function(oe,ue){var me=os.select(this),Se=A4(Y),Ce=Se.colorscale,Me=Se.reversescale,_e=function(Ke){if(Ke.size()){var ct="legendfill-"+Y.uid;_s.gradient(Ke,r,ct,M4(Me,J==="radial"),Ce,"fill")}},Te;if(Ce){if(!J){var Le=Ce.length;Te=ue===0?Ce[Me?Le-1:0][1]:ue===1?Ce[Me?0:Le-1][1]:Ce[Math.floor((Le-1)/2)][1]}}else{var Ae=Y.vertexcolor||Y.facecolor||Y.color;Te=Uo.isArrayOrTypedArray(Ae)?Ae[ue]||Ae[0]:Ae}me.attr("d",oe[0]),Te?me.call(eu.fill,Te):me.call(_e)})}};function M4(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function HP(e){var t=e[0].trace,r=t.contours,i=Z2.hasLines(t),a=Z2.hasMarkers(t),s=t.visible&&t.fill&&t.fill!=="none",l=!1,u=!1;if(r){var c=r.coloring;c==="lines"?l=!0:i=c==="none"||c==="heatmap"||r.showlines,r.type==="constraint"?s=r._operation!=="=":(c==="fill"||c==="heatmap")&&(u=!0)}return{showMarker:a,showLine:i,showFill:s,showGradientLine:l,showGradientFill:u,anyLine:i||l,anyFill:s||u}}function GP(e,t,r){return e&&Uo.isArrayOrTypedArray(e)?t:e>r?r:e}});var L4=he((N_e,tD)=>{"use strict";var Zs=Ka(),Ln=Nt(),C4=jn(),Xh=sa(),YP=Ky(),k4=$l(),Un=_i(),W2=Ua(),Rd=ho(),WP=CP(),Jn=x4(),E4=as(),$P=E4.LINE_SPACING,Q0=E4.FROM_TL,XP=E4.FROM_BR,jP=DP(),_ae=S4(),JP=V2(),K0=1,xae=/^legend[0-9]*$/;tD.exports=function(t,r){if(r)KP(t,r);else{var i=t._fullLayout,a=i._legends,s=i._infolayer.selectAll('[class^="legend"]');s.each(function(){var v=Zs.select(this),m=v.attr("class"),_=m.split(" ")[0];_.match(xae)&&a.indexOf(_)===-1&&v.remove()});for(var l=0;l<a.length;l++){var u=a[l],c=t._fullLayout[u];KP(t,c)}}};function bae(e,t,r){if(!(t.title.side!=="top center"&&t.title.side!=="top right")){var i=t.title.font,a=i.size*$P,s=0,l=e.node(),u=Un.bBox(l).width;t.title.side==="top center"?s=.5*(t._width-2*r-2*Jn.titlePad-u):t.title.side==="top right"&&(s=t._width-2*r-2*Jn.titlePad-u),Rd.positionText(e,r+Jn.titlePad+s,r+a)}}function KP(e,t){var r=t||{},i=e._fullLayout,a=K2(r),s,l,u=r._inHover;if(u?(l=r.layer,s="hover"):(l=i._infolayer,s=a),!!l){s+=i._uid,e._legendMouseDownTime||(e._legendMouseDownTime=0);var c;if(u){if(!r.entries)return;c=jP(r.entries,r)}else{for(var v=(e.calcdata||[]).slice(),m=i.shapes,_=0;_<m.length;_++){var T=m[_];if(T.showlegend){var M={_isShape:!0,_fullInput:T,index:T._index,name:T.name||T.label.text||"shape "+T._index,legend:T.legend,legendgroup:T.legendgroup,legendgrouptitle:T.legendgrouptitle,legendrank:T.legendrank,legendwidth:T.legendwidth,showlegend:T.showlegend,visible:T.visible,opacity:T.opacity,mode:T.type==="line"?"lines":"markers",line:T.line,marker:{line:T.line,color:T.fillcolor,size:12,symbol:T.type==="rect"?"square":T.type==="circle"?"circle":"hexagon2"}};v.push([{trace:M}])}}c=i.showlegend&&jP(v,r,i._legends.length>1)}var k=i.hiddenlabels||[];if(!u&&(!i.showlegend||!c.length))return l.selectAll("."+a).remove(),i._topdefs.select("#"+s).remove(),C4.autoMargin(e,a);var L=Ln.ensureSingle(l,"g",a,function(Y){u||Y.attr("pointer-events","all")}),E=Ln.ensureSingleById(i._topdefs,"clipPath",s,function(Y){Y.append("rect")}),I=Ln.ensureSingle(L,"rect","bg",function(Y){Y.attr("shape-rendering","crispEdges")});I.call(W2.stroke,r.bordercolor).call(W2.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var R=Ln.ensureSingle(L,"g","scrollbox"),N=r.title;r._titleWidth=0,r._titleHeight=0;var z;N.text?(z=Ln.ensureSingle(R,"text",a+"titletext"),z.attr("text-anchor","start").call(Un.font,N.font).text(N.text),X2(z,R,e,r,K0)):R.selectAll("."+a+"titletext").remove();var B=Ln.ensureSingle(L,"rect","scrollbar",function(Y){Y.attr(Jn.scrollBarEnterAttrs).call(W2.fill,Jn.scrollBarColor)}),H=R.selectAll("g.groups").data(c);H.enter().append("g").attr("class","groups"),H.exit().remove();var V=H.selectAll("g.traces").data(Ln.identity);V.enter().append("g").attr("class","traces"),V.exit().remove(),V.style("opacity",function(Y){var J=Y[0].trace;return Xh.traceIs(J,"pie-like")?k.indexOf(Y[0].label)!==-1?.5:1:J.visible==="legendonly"?.5:1}).each(function(){Zs.select(this).call(wae,e,r)}).call(_ae,e,r).each(function(){u||Zs.select(this).call(Tae,e,a)}),Ln.syncOrAsync([C4.previousPromises,function(){return Sae(e,H,V,r)},function(){var Y=i._size,J=r.borderwidth,re=r.xref==="paper",ne=r.yref==="paper";if(N.text&&bae(z,r,J),!u){var oe,ue;re?oe=Y.l+Y.w*r.x-Q0[j2(r)]*r._width:oe=i.width*r.x-Q0[j2(r)]*r._width,ne?ue=Y.t+Y.h*(1-r.y)-Q0[J2(r)]*r._effHeight:ue=i.height*(1-r.y)-Q0[J2(r)]*r._effHeight;var me=kae(e,a,oe,ue);if(me)return;if(i.margin.autoexpand){var Se=oe,Ce=ue;oe=re?Ln.constrain(oe,0,i.width-r._width):Se,ue=ne?Ln.constrain(ue,0,i.height-r._effHeight):Ce,oe!==Se&&Ln.log("Constrain "+a+".x to make legend fit inside graph"),ue!==Ce&&Ln.log("Constrain "+a+".y to make legend fit inside graph")}Un.setTranslate(L,oe,ue)}if(B.on(".drag",null),L.on("wheel",null),u||r._height<=r._maxHeight||e._context.staticPlot){var Me=r._effHeight;u&&(Me=r._height),I.attr({width:r._width-J,height:Me-J,x:J/2,y:J/2}),Un.setTranslate(R,0,0),E.select("rect").attr({width:r._width-2*J,height:Me-2*J,x:J,y:J}),Un.setClipUrl(R,s,e),Un.setRect(B,0,0,0,0),delete r._scrollY}else{var _e=Math.max(Jn.scrollBarMinHeight,r._effHeight*r._effHeight/r._height),Te=r._effHeight-_e-2*Jn.scrollBarMargin,Ae=r._height-r._effHeight,Le=Te/Ae,Ke=Math.min(r._scrollY||0,Ae);I.attr({width:r._width-2*J+Jn.scrollBarWidth+Jn.scrollBarMargin,height:r._effHeight-J,x:J/2,y:J/2}),E.select("rect").attr({width:r._width-2*J+Jn.scrollBarWidth+Jn.scrollBarMargin,height:r._effHeight-2*J,x:J,y:J+Ke}),Un.setClipUrl(R,s,e),kt(Ke,_e,Le),L.on("wheel",function(){Ke=Ln.constrain(r._scrollY+Zs.event.deltaY/Te*Ae,0,Ae),kt(Ke,_e,Le),Ke!==0&&Ke!==Ae&&Zs.event.preventDefault()});var ct,it,ut,Ge=function(et,vt,tt){var Bt=(tt-vt)/Le+et;return Ln.constrain(Bt,0,Ae)},xt=function(et,vt,tt){var Bt=(vt-tt)/Le+et;return Ln.constrain(Bt,0,Ae)},at=Zs.behavior.drag().on("dragstart",function(){var et=Zs.event.sourceEvent;et.type==="touchstart"?ct=et.changedTouches[0].clientY:ct=et.clientY,ut=Ke}).on("drag",function(){var et=Zs.event.sourceEvent;et.buttons===2||et.ctrlKey||(et.type==="touchmove"?it=et.changedTouches[0].clientY:it=et.clientY,Ke=Ge(ut,ct,it),kt(Ke,_e,Le))});B.call(at);var At=Zs.behavior.drag().on("dragstart",function(){var et=Zs.event.sourceEvent;et.type==="touchstart"&&(ct=et.changedTouches[0].clientY,ut=Ke)}).on("drag",function(){var et=Zs.event.sourceEvent;et.type==="touchmove"&&(it=et.changedTouches[0].clientY,Ke=xt(ut,ct,it),kt(Ke,_e,Le))});R.call(At)}function kt(et,vt,tt){r._scrollY=e._fullLayout[a]._scrollY=et,Un.setTranslate(R,0,-et),Un.setRect(B,r._width,Jn.scrollBarMargin+et*tt,Jn.scrollBarWidth,vt),E.select("rect").attr("y",J+et)}if(e._context.edits.legendPosition){var mt,ye,Re,xe;L.classed("cursor-move",!0),k4.init({element:L.node(),gd:e,prepFn:function(et){if(et.target!==B.node()){var vt=Un.getTranslate(L);Re=vt.x,xe=vt.y}},moveFn:function(et,vt){if(Re!==void 0&&xe!==void 0){var tt=Re+et,Bt=xe+vt;Un.setTranslate(L,tt,Bt),mt=k4.align(tt,r._width,Y.l,Y.l+Y.w,r.xanchor),ye=k4.align(Bt+r._height,-r._height,Y.t+Y.h,Y.t,r.yanchor)}},doneFn:function(){if(mt!==void 0&&ye!==void 0){var et={};et[a+".x"]=mt,et[a+".y"]=ye,Xh.call("_guiRelayout",e,et)}},clickFn:function(et,vt){var tt=l.selectAll("g.traces").filter(function(){var Bt=this.getBoundingClientRect();return vt.clientX>=Bt.left&&vt.clientX<=Bt.right&&vt.clientY>=Bt.top&&vt.clientY<=Bt.bottom});tt.size()>0&&eD(e,L,tt,et,vt)}})}}],e)}}function Y2(e,t,r){var i=e[0],a=i.width,s=t.entrywidthmode,l=i.trace.legendwidth||t.entrywidth;return s==="fraction"?t._maxWidth*l:r+(l||a)}function eD(e,t,r,i,a){var s=r.data()[0][0].trace,l={event:a,node:r.node(),curveNumber:s.index,expandedIndex:s._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};s._group&&(l.group=s._group),Xh.traceIs(s,"pie-like")&&(l.label=r.datum()[0].label);var u=YP.triggerHandler(e,"plotly_legendclick",l);if(i===1){if(u===!1)return;t._clickTimeout=setTimeout(function(){e._fullLayout&&WP(r,e,i)},e._context.doubleClickDelay)}else if(i===2){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0;var c=YP.triggerHandler(e,"plotly_legenddoubleclick",l);c!==!1&&u!==!1&&WP(r,e,i)}}function wae(e,t,r){var i=K2(r),a=e.data()[0][0],s=a.trace,l=Xh.traceIs(s,"pie-like"),u=!r._inHover&&t._context.edits.legendText&&!l,c=r._maxNameLength,v,m;a.groupTitle?(v=a.groupTitle.text,m=a.groupTitle.font):(m=r.font,r.entries?v=a.text:(v=l?a.label:s.name,s._meta&&(v=Ln.templateString(v,s._meta))));var _=Ln.ensureSingle(e,"text",i+"text");_.attr("text-anchor","start").call(Un.font,m).text(u?QP(v,c):v);var T=r.indentation+r.itemwidth+Jn.itemGap*2;Rd.positionText(_,T,0),u?_.call(Rd.makeEditable,{gd:t,text:v}).call(X2,e,t,r).on("edit",function(M){this.text(QP(M,c)).call(X2,e,t,r);var k=a.trace._fullInput||{},L={};if(Xh.hasTransform(k,"groupby")){var E=Xh.getTransformIndices(k,"groupby"),I=E[E.length-1],R=Ln.keyedContainer(k,"transforms["+I+"].styles","target","value.name");R.set(a.trace._group,M),L=R.constructUpdate()}else L.name=M;return k._isShape?Xh.call("_guiRelayout",t,"shapes["+s.index+"].name",L.name):Xh.call("_guiRestyle",t,L,s.index)}):X2(_,e,t,r)}function QP(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var i=r-e.length;i>0;i--)e+=" ";return e}function Tae(e,t,r){var i=t._context.doubleClickDelay,a,s=1,l=Ln.ensureSingle(e,"rect",r+"toggle",function(u){t._context.staticPlot||u.style("cursor","pointer").attr("pointer-events","all"),u.call(W2.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(l.on("mousedown",function(){a=new Date().getTime(),a-t._legendMouseDownTime<i?s+=1:(s=1,t._legendMouseDownTime=a)}),l.on("mouseup",function(){if(!(t._dragged||t._editing)){var u=t._fullLayout[r];new Date().getTime()-t._legendMouseDownTime>i&&(s=Math.max(s-1,1)),eD(t,u,e,s,Zs.event)}}))}function X2(e,t,r,i,a){i._inHover&&e.attr("data-notex",!0),Rd.convertToTspans(e,r,function(){Aae(t,r,i,a)})}function Aae(e,t,r,i){var a=e.data()[0][0];if(!r._inHover&&a&&!a.trace.showlegend){e.remove();return}var s=e.select("g[class*=math-group]"),l=s.node(),u=K2(r);r||(r=t._fullLayout[u]);var c=r.borderwidth,v;i===K0?v=r.title.font:a.groupTitle?v=a.groupTitle.font:v=r.font;var m=v.size*$P,_,T;if(l){var M=Un.bBox(l);_=M.height,T=M.width,i===K0?Un.setTranslate(s,c,c+_*.75):Un.setTranslate(s,0,_*.25)}else{var k="."+u+(i===K0?"title":"")+"text",L=e.select(k),E=Rd.lineCount(L),I=L.node();if(_=m*E,T=I?Un.bBox(I).width:0,i===K0)r.title.side==="left"&&(T+=Jn.itemGap*2),Rd.positionText(L,c+Jn.titlePad,c+m);else{var R=Jn.itemGap*2+r.indentation+r.itemwidth;a.groupTitle&&(R=Jn.itemGap,T-=r.indentation+r.itemwidth),Rd.positionText(L,R,-m*((E-1)/2-.3))}}i===K0?(r._titleWidth=T,r._titleHeight=_):(a.lineHeight=m,a.height=Math.max(_,16)+3,a.width=T)}function Mae(e){var t=0,r=0,i=e.title.side;return i&&(i.indexOf("left")!==-1&&(t=e._titleWidth),i.indexOf("top")!==-1&&(r=e._titleHeight)),[t,r]}function Sae(e,t,r,i){var a=e._fullLayout,s=K2(i);i||(i=a[s]);var l=a._size,u=JP.isVertical(i),c=JP.isGrouped(i),v=i.entrywidthmode==="fraction",m=i.borderwidth,_=2*m,T=Jn.itemGap,M=i.indentation+i.itemwidth+T*2,k=2*(m+T),L=J2(i),E=i.y<0||i.y===0&&L==="top",I=i.y>1||i.y===1&&L==="bottom",R=i.tracegroupgap,N={};i._maxHeight=Math.max(E||I?a.height/2:l.h,30);var z=0;i._width=0,i._height=0;var B=Mae(i);if(u)r.each(function(ut){var Ge=ut[0].height;Un.setTranslate(this,m+B[0],m+B[1]+i._height+Ge/2+T),i._height+=Ge,i._width=Math.max(i._width,ut[0].width)}),z=M+i._width,i._width+=T+M+_,i._height+=k,c&&(t.each(function(ut,Ge){Un.setTranslate(this,0,Ge*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var H=j2(i),V=i.x<0||i.x===0&&H==="right",Y=i.x>1||i.x===1&&H==="left",J=I||E,re=a.width/2;i._maxWidth=Math.max(V?J&&H==="left"?l.l+l.w:re:Y?J&&H==="right"?l.r+l.w:re:l.w,2*M);var ne=0,oe=0;r.each(function(ut){var Ge=Y2(ut,i,M);ne=Math.max(ne,Ge),oe+=Ge}),z=null;var ue=0;if(c){var me=0,Se=0,Ce=0;t.each(function(){var ut=0,Ge=0;Zs.select(this).selectAll("g.traces").each(function(at){var At=Y2(at,i,M),kt=at[0].height;Un.setTranslate(this,B[0],B[1]+m+T+kt/2+Ge),Ge+=kt,ut=Math.max(ut,At),N[at[0].trace.legendgroup]=ut});var xt=ut+T;Se>0&&xt+m+Se>i._maxWidth?(ue=Math.max(ue,Se),Se=0,Ce+=me+R,me=Ge):me=Math.max(me,Ge),Un.setTranslate(this,Se,Ce),Se+=xt}),i._width=Math.max(ue,Se)+m,i._height=Ce+me+k}else{var Me=r.size(),_e=oe+_+(Me-1)*T<i._maxWidth,Te=0,Ae=0,Le=0,Ke=0;r.each(function(ut){var Ge=ut[0].height,xt=Y2(ut,i,M,c),at=_e?xt:ne;v||(at+=T),at+m+Ae-T>=i._maxWidth&&(ue=Math.max(ue,Ke),Ae=0,Le+=Te,i._height+=Te,Te=0),Un.setTranslate(this,B[0]+m+Ae,B[1]+m+Le+Ge/2+T),Ke=Ae+xt+T,Ae+=at,Te=Math.max(Te,Ge)}),_e?(i._width=Ae+_,i._height=Te+k):(i._width=Math.max(ue,Ke)+_,i._height+=Te+k)}}i._width=Math.ceil(Math.max(i._width+B[0],i._titleWidth+2*(m+Jn.titlePad))),i._height=Math.ceil(Math.max(i._height+B[1],i._titleHeight+2*(m+Jn.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var ct=e._context.edits,it=ct.legendText||ct.legendPosition;r.each(function(ut){var Ge=Zs.select(this).select("."+s+"toggle"),xt=ut[0].height,at=ut[0].trace.legendgroup,At=Y2(ut,i,M);c&&at!==""&&(At=N[at]);var kt=it?M:z||At;!u&&!v&&(kt+=T/2),Un.setRect(Ge,0,-xt/2,kt,xt)})}function kae(e,t,r,i){var a=e._fullLayout,s=a[t],l=j2(s),u=J2(s),c=s.xref==="paper",v=s.yref==="paper";e._fullLayout._reservedMargin[t]={};var m=s.y<.5?"b":"t",_=s.x<.5?"l":"r",T={r:a.width-r,l:r+s._width,b:a.height-i,t:i+s._effHeight};if(c&&v)return C4.autoMargin(e,t,{x:s.x,y:s.y,l:s._width*Q0[l],r:s._width*XP[l],b:s._effHeight*XP[u],t:s._effHeight*Q0[u]});c?e._fullLayout._reservedMargin[t][m]=T[m]:v||s.orientation==="v"?e._fullLayout._reservedMargin[t][_]=T[_]:e._fullLayout._reservedMargin[t][m]=T[m]}function j2(e){return Ln.isRightAnchor(e)?"right":Ln.isCenterAnchor(e)?"center":"left"}function J2(e){return Ln.isBottomAnchor(e)?"bottom":Ln.isMiddleAnchor(e)?"middle":"top"}function K2(e){return e._id||"legend"}});var I4=he(z4=>{"use strict";var Fd=Ka(),Sc=Ia(),rD=Sf(),vn=Nt(),Cae=vn.pushUnique,P4=vn.strTranslate,Eae=vn.strRotate,Lae=Ky(),tu=ho(),Pae=AP(),qf=_i(),io=Ua(),Q2=$l(),Nf=Ii(),Dae=Mo().zindexSeparator,em=sa(),Uu=Ac(),qd=Uy(),zae=g4(),Iae=L4(),fD=qd.YANGLE,D4=Math.PI*fD/180,Rae=1/Math.sin(D4),Fae=Math.cos(D4),qae=Math.sin(D4),ji=qd.HOVERARROWSIZE,qa=qd.HOVERTEXTPAD,aD={box:!0,ohlc:!0,violin:!0,candlestick:!0},Nae={scatter:!0,scattergl:!0,splom:!0};function iD(e,t){return e.distance-t.distance}z4.hover=function(t,r,i,a){t=vn.getGraphDiv(t);var s=r.target;vn.throttle(t._fullLayout._uid+qd.HOVERID,qd.HOVERMINTIME,function(){Bae(t,r,i,a,s)})};z4.loneHover=function(t,r){var i=!0;Array.isArray(t)||(i=!1,t=[t]);var a=r.gd,s=pD(a),l=mD(a),u=t.map(function(E){var I=E._x0||E.x0||E.x||0,R=E._x1||E.x1||E.x||0,N=E._y0||E.y0||E.y||0,z=E._y1||E.y1||E.y||0,B=E.eventData;if(B){var H=Math.min(I,R),V=Math.max(I,R),Y=Math.min(N,z),J=Math.max(N,z),re=E.trace;if(em.traceIs(re,"gl3d")){var ne=a._fullLayout[re.scene]._scene.container,oe=ne.offsetLeft,ue=ne.offsetTop;H+=oe,V+=oe,Y+=ue,J+=ue}B.bbox={x0:H+l,x1:V+l,y0:Y+s,y1:J+s},r.inOut_bbox&&r.inOut_bbox.push(B.bbox)}else B=!1;return{color:E.color||io.defaultLine,x0:E.x0||E.x||0,x1:E.x1||E.x||0,y0:E.y0||E.y||0,y1:E.y1||E.y||0,xLabel:E.xLabel,yLabel:E.yLabel,zLabel:E.zLabel,text:E.text,name:E.name,idealAlign:E.idealAlign,borderColor:E.borderColor,fontFamily:E.fontFamily,fontSize:E.fontSize,fontColor:E.fontColor,fontWeight:E.fontWeight,fontStyle:E.fontStyle,fontVariant:E.fontVariant,nameLength:E.nameLength,textAlign:E.textAlign,trace:E.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:E.hovertemplate||!1,hovertemplateLabels:E.hovertemplateLabels||!1,eventData:B}}),c=!1,v=hD(u,{gd:a,hovermode:"closest",rotateLabels:c,bgColor:r.bgColor||io.background,container:Fd.select(r.container),outerContainer:r.outerContainer||r.container}),m=v.hoverLabels,_=5,T=0,M=0;m.sort(function(E,I){return E.y0-I.y0}).each(function(E,I){var R=E.y0-E.by/2;R-_<T?E.offset=T-R+_:E.offset=0,T=R+E.by+E.offset,I===r.anchorIndex&&(M=E.offset)}).each(function(E){E.offset-=M});var k=a._fullLayout._invScaleX,L=a._fullLayout._invScaleY;return dD(m,c,k,L),i?m:m.node()};function Bae(e,t,r,i,a){r||(r="xy"),typeof r=="string"&&(r=r.split(Dae)[0]);var s=Array.isArray(r)?r:[r],l,u=e._fullLayout,c=u.hoversubplots,v=u._plots||[],m=v[r],_=u._has("cartesian"),T=t.hovermode||u.hovermode,M=(T||"").charAt(0)==="x",k=(T||"").charAt(0)==="y",L,E;if(_&&(M||k)&&c==="axis"){for(var I=s.length,R=0;R<I;R++)if(l=s[R],v[l]){L=Nf.getFromId(e,l,"x"),E=Nf.getFromId(e,l,"y");var N=(M?L:E)._subplotsWith;if(N&&N.length)for(var z=0;z<N.length;z++)Cae(s,N[z])}}if(m&&c!=="single"){var B=m.overlays.map(function(Gr){return Gr.id});s=s.concat(B)}for(var H=s.length,V=new Array(H),Y=new Array(H),J=!1,re=0;re<H;re++)if(l=s[re],v[l])J=!0,V[re]=v[l].xaxis,Y[re]=v[l].yaxis;else if(u[l]&&u[l]._subplot){var ne=u[l]._subplot;V[re]=ne.xaxis,Y[re]=ne.yaxis}else{vn.warn("Unrecognized subplot: "+l);return}if(T&&!J&&(T="closest"),["x","y","closest","x unified","y unified"].indexOf(T)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return Q2.unhoverRaw(e,t);var oe=u.hoverdistance;oe===-1&&(oe=1/0);var ue=u.spikedistance;ue===-1&&(ue=1/0);var me=[],Se=[],Ce,Me,_e,Te,Ae,Le,Ke,ct,it,ut,Ge,xt,at,At={hLinePoint:null,vLinePoint:null},kt=!1;if(Array.isArray(t))for(T="array",_e=0;_e<t.length;_e++)Ae=e.calcdata[t[_e].curveNumber||0],Ae&&(Le=Ae[0].trace,Ae[0].trace.hoverinfo!=="skip"&&(Se.push(Ae),Le.orientation==="h"&&(kt=!0)));else{var mt=e.calcdata.slice();for(mt.sort(function(Gr,Qa){var Zr=Gr[0].trace.zorder||0,vi=Qa[0].trace.zorder||0;return Zr-vi}),Te=0;Te<mt.length;Te++)Ae=mt[Te],Le=Ae[0].trace,Le.hoverinfo!=="skip"&&Uu.isTraceInSubplots(Le,s)&&(Se.push(Ae),Le.orientation==="h"&&(kt=!0));var ye=!a,Re,xe;if(ye)"xpx"in t?Re=t.xpx:Re=V[0]._length/2,"ypx"in t?xe=t.ypx:xe=Y[0]._length/2;else{if(Lae.triggerHandler(e,"plotly_beforehover",t)===!1)return;var et=a.getBoundingClientRect();Re=t.clientX-et.left,xe=t.clientY-et.top,u._calcInverseTransform(e);var vt=vn.apply3DTransform(u._invTransform)(Re,xe);if(Re=vt[0],xe=vt[1],Re<0||Re>V[0]._length||xe<0||xe>Y[0]._length)return Q2.unhoverRaw(e,t)}if(t.pointerX=Re+V[0]._offset,t.pointerY=xe+Y[0]._offset,"xval"in t?Ce=Uu.flat(s,t.xval):Ce=Uu.p2c(V,Re),"yval"in t?Me=Uu.flat(s,t.yval):Me=Uu.p2c(Y,xe),!Sc(Ce[0])||!Sc(Me[0]))return vn.warn("Fx.hover failed",t,e),Q2.unhoverRaw(e,t)}var tt=1/0;function Bt(Gr,Qa){for(Te=0;Te<Se.length;Te++)if(Ae=Se[Te],!(!Ae||!Ae[0]||!Ae[0].trace)&&(Le=Ae[0].trace,!(Le.visible!==!0||Le._length===0)&&["carpet","contourcarpet"].indexOf(Le._module.name)===-1)){if(it=T,Uu.isUnifiedHover(it)&&(it=it.charAt(0)),Le.type==="splom"?(ct=0,Ke=s[ct]):(Ke=Uu.getSubplot(Le),ct=s.indexOf(Ke)),xt={cd:Ae,trace:Le,xa:V[ct],ya:Y[ct],maxHoverDistance:oe,maxSpikeDistance:ue,index:!1,distance:Math.min(tt,oe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:io.defaultLine,name:Le.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[Ke]&&(xt.subplot=u[Ke]._subplot),u._splomScenes&&u._splomScenes[Le.uid]&&(xt.scene=u._splomScenes[Le.uid]),it==="array"){var Zr=t[Te];"pointNumber"in Zr?(xt.index=Zr.pointNumber,it="closest"):(it="","xval"in Zr&&(ut=Zr.xval,it="x"),"yval"in Zr&&(Ge=Zr.yval,it=it?"closest":"y"))}else Gr!==void 0&&Qa!==void 0?(ut=Gr,Ge=Qa):(ut=Ce[ct],Ge=Me[ct]);if(at=me.length,oe!==0)if(Le._module&&Le._module.hoverPoints){var vi=Le._module.hoverPoints(xt,ut,Ge,it,{finiteRange:!0,hoverLayer:u._hoverlayer,hoversubplots:c,gd:e});if(vi)for(var ga,le=0;le<vi.length;le++)ga=vi[le],Sc(ga.x0)&&Sc(ga.y0)&&me.push(Hae(ga,T))}else vn.log("Unrecognized trace type in hover:",Le);if(T==="closest"&&me.length>at&&(me.splice(0,at),tt=me[0].distance),_&&ue!==0&&me.length===0){xt.distance=ue,xt.index=!1;var ee=Le._module.hoverPoints(xt,ut,Ge,"closest",{hoverLayer:u._hoverlayer});if(ee&&(ee=ee.filter(function(Ve){return Ve.spikeDistance<=ue})),ee&&ee.length){var se,ce=ee.filter(function(Ve){return Ve.xa.showspikes&&Ve.xa.spikesnap!=="hovered data"});if(ce.length){var Ee=ce[0];Sc(Ee.x0)&&Sc(Ee.y0)&&(se=Ct(Ee),(!At.vLinePoint||At.vLinePoint.spikeDistance>se.spikeDistance)&&(At.vLinePoint=se))}var Be=ee.filter(function(Ve){return Ve.ya.showspikes&&Ve.ya.spikesnap!=="hovered data"});if(Be.length){var rt=Be[0];Sc(rt.x0)&&Sc(rt.y0)&&(se=Ct(rt),(!At.hLinePoint||At.hLinePoint.spikeDistance>se.spikeDistance)&&(At.hLinePoint=se))}}}}}Bt();function Mt(Gr,Qa,Zr){for(var vi=null,ga=1/0,le,ee=0;ee<Gr.length;ee++)L&&L._id!==Gr[ee].xa._id||E&&E._id!==Gr[ee].ya._id||(le=Gr[ee].spikeDistance,Zr&&ee===0&&(le=-1/0),le<=ga&&le<=Qa&&(vi=Gr[ee],ga=le));return vi}function Ct(Gr){return Gr?{xa:Gr.xa,ya:Gr.ya,x:Gr.xSpike!==void 0?Gr.xSpike:(Gr.x0+Gr.x1)/2,y:Gr.ySpike!==void 0?Gr.ySpike:(Gr.y0+Gr.y1)/2,distance:Gr.distance,spikeDistance:Gr.spikeDistance,curveNumber:Gr.trace.index,color:Gr.color,pointNumber:Gr.index}:null}var Rt={fullLayout:u,container:u._hoverlayer,event:t},Ot=e._spikepoints,gt={vLinePoint:At.vLinePoint,hLinePoint:At.hLinePoint};e._spikepoints=gt;var Et=function(){var Gr=me.filter(function(Zr){return L&&L._id===Zr.xa._id&&E&&E._id===Zr.ya._id}),Qa=me.filter(function(Zr){return!(L&&L._id===Zr.xa._id&&E&&E._id===Zr.ya._id)});Gr.sort(iD),Qa.sort(iD),me=Gr.concat(Qa),me=Zae(me,T)};Et();var ir=T.charAt(0),Gt=(ir==="x"||ir==="y")&&me[0]&&Nae[me[0].trace.type];if(_&&ue!==0&&me.length!==0){var Ne=me.filter(function(Gr){return Gr.ya.showspikes}),ft=Mt(Ne,ue,Gt);At.hLinePoint=Ct(ft);var pt=me.filter(function(Gr){return Gr.xa.showspikes}),xr=Mt(pt,ue,Gt);At.vLinePoint=Ct(xr)}if(me.length===0){var pr=Q2.unhoverRaw(e,t);return _&&(At.hLinePoint!==null||At.vLinePoint!==null)&&sD(Ot)&&oD(e,At,Rt),pr}if(_&&sD(Ot)&&oD(e,At,Rt),Uu.isXYhover(it)&&me[0].length!==0&&me[0].trace.type!=="splom"){var Tt=me[0];aD[Tt.trace.type]?me=me.filter(function(Gr){return Gr.trace.index===Tt.trace.index}):me=[Tt];var wt=me.length,Vt=uD("x",Tt,u),Kt=uD("y",Tt,u);Bt(Vt,Kt);var Ht=[],Ut={},er=0,Mr=function(Gr){var Qa=aD[Gr.trace.type]?cD(Gr):Gr.trace.index;if(!Ut[Qa])er++,Ut[Qa]=er,Ht.push(Gr);else{var Zr=Ut[Qa]-1,vi=Ht[Zr];Zr>0&&Math.abs(Gr.distance)<Math.abs(vi.distance)&&(Ht[Zr]=Gr)}},br;for(br=0;br<wt;br++)Mr(me[br]);for(br=me.length-1;br>wt-1;br--)Mr(me[br]);me=Ht,Et()}var Pt=e._hoverdata,Fe=[],He=pD(e),bt=mD(e);for(_e=0;_e<me.length;_e++){var dt=me[_e],gr=Uu.makeEventData(dt,dt.trace,dt.cd);if(dt.hovertemplate!==!1){var Lr=!1;dt.cd[dt.index]&&dt.cd[dt.index].ht&&(Lr=dt.cd[dt.index].ht),dt.hovertemplate=Lr||dt.trace.hovertemplate||!1}if(dt.xa&&dt.ya){var Ar=dt.x0+dt.xa._offset,Hr=dt.x1+dt.xa._offset,xa=dt.y0+dt.ya._offset,Ca=dt.y1+dt.ya._offset,Pa=Math.min(Ar,Hr),Fi=Math.max(Ar,Hr),Ki=Math.min(xa,Ca),gn=Math.max(xa,Ca);gr.bbox={x0:Pa+bt,x1:Fi+bt,y0:Ki+He,y1:gn+He}}dt.eventData=[gr],Fe.push(gr)}e._hoverdata=Fe;var Xi=T==="y"&&(Se.length>1||me.length>1)||T==="closest"&&kt&&me.length>1,Qn=io.combine(u.plot_bgcolor||io.background,u.paper_bgcolor),Pn=hD(me,{gd:e,hovermode:T,rotateLabels:Xi,bgColor:Qn,container:u._hoverlayer,outerContainer:u._paper.node(),commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance}),Gi=Pn.hoverLabels;if(Uu.isUnifiedHover(T)||(Uae(Gi,Xi,u,Pn.commonLabelBoundingBox),dD(Gi,Xi,u._invScaleX,u._invScaleY)),a&&a.tagName){var pa=em.getComponentMethod("annotations","hasClickToShow")(e,Fe);Pae(Fd.select(a),pa?"pointer":"")}!a||i||!Gae(e,t,Pt)||(Pt&&e.emit("plotly_unhover",{event:t,points:Pt}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:V,yaxes:Y,xvals:Ce,yvals:Me}))}function cD(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}var Oae=/<extra>([\s\S]*)<\/extra>/;function hD(e,t){var r=t.gd,i=r._fullLayout,a=t.hovermode,s=t.rotateLabels,l=t.bgColor,u=t.container,c=t.outerContainer,v=t.commonLabelOpts||{};if(e.length===0)return[[]];var m=t.fontFamily||qd.HOVERFONT,_=t.fontSize||qd.HOVERFONTSIZE,T=t.fontWeight||i.font.weight,M=t.fontStyle||i.font.style,k=t.fontVariant||i.font.variant,L=t.fontTextcase||i.font.textcase,E=t.fontLineposition||i.font.lineposition,I=t.fontShadow||i.font.shadow,R=e[0],N=R.xa,z=R.ya,B=a.charAt(0),H=B+"Label",V=R[H];if(V===void 0&&N.type==="multicategory")for(var Y=0;Y<e.length&&(V=e[Y][H],V===void 0);Y++);var J=$0(r,c),re=J.top,ne=J.width,oe=J.height,ue=V!==void 0&&R.distance<=t.hoverdistance&&(a==="x"||a==="y");if(ue){var me=!0,Se,Ce;for(Se=0;Se<e.length;Se++)if(me&&e[Se].zLabel===void 0&&(me=!1),Ce=e[Se].hoverinfo||e[Se].trace.hoverinfo,Ce){var Me=Array.isArray(Ce)?Ce:Ce.split("+");if(Me.indexOf("all")===-1&&Me.indexOf(a)===-1){ue=!1;break}}me&&(ue=!1)}var _e=u.selectAll("g.axistext").data(ue?[0]:[]);_e.enter().append("g").classed("axistext",!0),_e.exit().remove();var Te={minX:0,maxX:0,minY:0,maxY:0};if(_e.each(function(){var pt=Fd.select(this),xr=vn.ensureSingle(pt,"path","",function(Pa){Pa.style({"stroke-width":"1px"})}),pr=vn.ensureSingle(pt,"text","",function(Pa){Pa.attr("data-notex",1)}),Tt=v.bgcolor||io.defaultLine,wt=v.bordercolor||io.contrast(Tt),Vt=io.contrast(Tt),Kt=v.font,Ht={weight:Kt.weight||T,style:Kt.style||M,variant:Kt.variant||k,textcase:Kt.textcase||L,lineposition:Kt.lineposition||E,shadow:Kt.shadow||I,family:Kt.family||m,size:Kt.size||_,color:Kt.color||Vt};xr.style({fill:Tt,stroke:wt}),pr.text(V).call(qf.font,Ht).call(tu.positionText,0,0).call(tu.convertToTspans,r),pt.attr("transform","");var Ut=$0(r,pr.node()),er,Mr;if(a==="x"){var br=N.side==="top"?"-":"";pr.attr("text-anchor","middle").call(tu.positionText,0,N.side==="top"?re-Ut.bottom-ji-qa:re-Ut.top+ji+qa),er=N._offset+(R.x0+R.x1)/2,Mr=z._offset+(N.side==="top"?0:z._length);var Pt=Ut.width/2+qa,Fe=er;er<Pt?Fe=Pt:er>i.width-Pt&&(Fe=i.width-Pt),xr.attr("d","M"+(er-Fe)+",0L"+(er-Fe+ji)+","+br+ji+"H"+Pt+"v"+br+(qa*2+Ut.height)+"H"+-Pt+"V"+br+ji+"H"+(er-Fe-ji)+"Z"),er=Fe,Te.minX=er-Pt,Te.maxX=er+Pt,N.side==="top"?(Te.minY=Mr-(qa*2+Ut.height),Te.maxY=Mr-qa):(Te.minY=Mr+qa,Te.maxY=Mr+(qa*2+Ut.height))}else{var He,bt,dt;z.side==="right"?(He="start",bt=1,dt="",er=N._offset+N._length):(He="end",bt=-1,dt="-",er=N._offset),Mr=z._offset+(R.y0+R.y1)/2,pr.attr("text-anchor",He),xr.attr("d","M0,0L"+dt+ji+","+ji+"V"+(qa+Ut.height/2)+"h"+dt+(qa*2+Ut.width)+"V-"+(qa+Ut.height/2)+"H"+dt+ji+"V-"+ji+"Z"),Te.minY=Mr-(qa+Ut.height/2),Te.maxY=Mr+(qa+Ut.height/2),z.side==="right"?(Te.minX=er+ji,Te.maxX=er+ji+(qa*2+Ut.width)):(Te.minX=er-ji-(qa*2+Ut.width),Te.maxX=er-ji);var gr=Ut.height/2,Lr=re-Ut.top-gr,Ar="clip"+i._uid+"commonlabel"+z._id,Hr;if(er<Ut.width+2*qa+ji){Hr="M-"+(ji+qa)+"-"+gr+"h-"+(Ut.width-qa)+"V"+gr+"h"+(Ut.width-qa)+"Z";var xa=Ut.width-er+qa;tu.positionText(pr,xa,Lr),He==="end"&&pr.selectAll("tspan").each(function(){var Pa=Fd.select(this),Fi=qf.tester.append("text").text(Pa.text()).call(qf.font,Ht),Ki=$0(r,Fi.node());Math.round(Ki.width)<Math.round(Ut.width)&&Pa.attr("x",xa-Ki.width),Fi.remove()})}else tu.positionText(pr,bt*(qa+ji),Lr),Hr=null;var Ca=i._topclips.selectAll("#"+Ar).data(Hr?[0]:[]);Ca.enter().append("clipPath").attr("id",Ar).append("path"),Ca.exit().remove(),Ca.select("path").attr("d",Hr),qf.setClipUrl(pr,Hr?Ar:null,r)}pt.attr("transform",P4(er,Mr))}),Uu.isUnifiedHover(a)){u.selectAll("g.hovertext").remove();var Ae=e.filter(function(pt){return pt.hoverinfo!=="none"});if(Ae.length===0)return[];var Le=i.hoverlabel,Ke=Le.font,ct={showlegend:!0,legend:{title:{text:V,font:Ke},font:Ke,bgcolor:Le.bgcolor,bordercolor:Le.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},it={font:Ke};zae(ct,it,r._fullData);var ut=it.legend;ut.entries=[];for(var Ge=0;Ge<Ae.length;Ge++){var xt=Ae[Ge];if(xt.hoverinfo!=="none"){var at=nD(xt,!0,a,i,V),At=at[0],kt=at[1];xt.name=kt,kt!==""?xt.text=kt+" : "+At:xt.text=At;var mt=xt.cd[xt.index];mt&&(mt.mc&&(xt.mc=mt.mc),mt.mcc&&(xt.mc=mt.mcc),mt.mlc&&(xt.mlc=mt.mlc),mt.mlcc&&(xt.mlc=mt.mlcc),mt.mlw&&(xt.mlw=mt.mlw),mt.mrc&&(xt.mrc=mt.mrc),mt.dir&&(xt.dir=mt.dir)),xt._distinct=!0,ut.entries.push([xt])}}ut.entries.sort(function(pt,xr){return pt[0].trace.index-xr[0].trace.index}),ut.layer=u,ut._inHover=!0,ut._groupTitleFont=Le.grouptitlefont,Iae(r,ut);var ye=u.select("g.legend"),Re=$0(r,ye.node()),xe=Re.width+2*qa,et=Re.height+2*qa,vt=Ae[0],tt=(vt.x0+vt.x1)/2,Bt=(vt.y0+vt.y1)/2,Mt=!(em.traceIs(vt.trace,"bar-like")||em.traceIs(vt.trace,"box-violin")),Ct,Rt;B==="y"?Mt?(Rt=Bt-qa,Ct=Bt+qa):(Rt=Math.min.apply(null,Ae.map(function(pt){return Math.min(pt.y0,pt.y1)})),Ct=Math.max.apply(null,Ae.map(function(pt){return Math.max(pt.y0,pt.y1)}))):Rt=Ct=vn.mean(Ae.map(function(pt){return(pt.y0+pt.y1)/2}))-et/2;var Ot,gt;B==="x"?Mt?(Ot=tt+qa,gt=tt-qa):(Ot=Math.max.apply(null,Ae.map(function(pt){return Math.max(pt.x0,pt.x1)})),gt=Math.min.apply(null,Ae.map(function(pt){return Math.min(pt.x0,pt.x1)}))):Ot=gt=vn.mean(Ae.map(function(pt){return(pt.x0+pt.x1)/2}))-xe/2;var Et=N._offset,ir=z._offset;Ct+=ir,Ot+=Et,gt+=Et-xe,Rt+=ir-et;var Gt,Ne;return Ot+xe<ne&&Ot>=0?Gt=Ot:gt+xe<ne&&gt>=0?Gt=gt:Et+xe<ne?Gt=Et:Ot-tt<tt-gt+xe?Gt=ne-xe:Gt=0,Gt+=qa,Ct+et<oe&&Ct>=0?Ne=Ct:Rt+et<oe&&Rt>=0?Ne=Rt:ir+et<oe?Ne=ir:Ct-Bt<Bt-Rt+et?Ne=oe-et:Ne=0,Ne+=qa,ye.attr("transform",P4(Gt-1,Ne-1)),ye}var ft=u.selectAll("g.hovertext").data(e,function(pt){return cD(pt)});return ft.enter().append("g").classed("hovertext",!0).each(function(){var pt=Fd.select(this);pt.append("rect").call(io.fill,io.addOpacity(l,.8)),pt.append("text").classed("name",!0),pt.append("path").style("stroke-width","1px"),pt.append("text").classed("nums",!0).call(qf.font,{weight:T,style:M,variant:k,textcase:L,lineposition:E,shadow:I,family:m,size:_})}),ft.exit().remove(),ft.each(function(pt){var xr=Fd.select(this).attr("transform",""),pr=pt.color;Array.isArray(pr)&&(pr=pr[pt.eventData[0].pointNumber]);var Tt=pt.bgcolor||pr,wt=io.combine(io.opacity(Tt)?Tt:io.defaultLine,l),Vt=io.combine(io.opacity(pr)?pr:io.defaultLine,l),Kt=pt.borderColor||io.contrast(wt),Ht=nD(pt,ue,a,i,V,xr),Ut=Ht[0],er=Ht[1],Mr=xr.select("text.nums").call(qf.font,{family:pt.fontFamily||m,size:pt.fontSize||_,color:pt.fontColor||Kt,weight:pt.fontWeight||T,style:pt.fontStyle||M,variant:pt.fontVariant||k,textcase:pt.fontTextcase||L,lineposition:pt.fontLineposition||E,shadow:pt.fontShadow||I}).text(Ut).attr("data-notex",1).call(tu.positionText,0,0).call(tu.convertToTspans,r),br=xr.select("text.name"),Pt=0,Fe=0;if(er&&er!==Ut){br.call(qf.font,{family:pt.fontFamily||m,size:pt.fontSize||_,color:Vt,weight:pt.fontWeight||T,style:pt.fontStyle||M,variant:pt.fontVariant||k,textcase:pt.fontTextcase||L,lineposition:pt.fontLineposition||E,shadow:pt.fontShadow||I}).text(er).attr("data-notex",1).call(tu.positionText,0,0).call(tu.convertToTspans,r);var He=$0(r,br.node());Pt=He.width+2*qa,Fe=He.height+2*qa}else br.remove(),xr.select("rect").remove();xr.select("path").style({fill:wt,stroke:Kt});var bt=pt.xa._offset+(pt.x0+pt.x1)/2,dt=pt.ya._offset+(pt.y0+pt.y1)/2,gr=Math.abs(pt.x1-pt.x0),Lr=Math.abs(pt.y1-pt.y0),Ar=$0(r,Mr.node()),Hr=Ar.width/i._invScaleX,xa=Ar.height/i._invScaleY;pt.ty0=(re-Ar.top)/i._invScaleY,pt.bx=Hr+2*qa,pt.by=Math.max(xa+2*qa,Fe),pt.anchor="start",pt.txwidth=Hr,pt.tx2width=Pt,pt.offset=0;var Ca=(Hr+ji+qa+Pt)*i._invScaleX,Pa,Fi;if(s)pt.pos=bt,Pa=dt+Lr/2+Ca<=oe,Fi=dt-Lr/2-Ca>=0,(pt.idealAlign==="top"||!Pa)&&Fi?(dt-=Lr/2,pt.anchor="end"):Pa?(dt+=Lr/2,pt.anchor="start"):pt.anchor="middle",pt.crossPos=dt;else{if(pt.pos=dt,Pa=bt+gr/2+Ca<=ne,Fi=bt-gr/2-Ca>=0,(pt.idealAlign==="left"||!Pa)&&Fi)bt-=gr/2,pt.anchor="end";else if(Pa)bt+=gr/2,pt.anchor="start";else{pt.anchor="middle";var Ki=Ca/2,gn=bt+Ki-ne,Xi=bt-Ki;gn>0&&(bt-=gn),Xi<0&&(bt+=-Xi)}pt.crossPos=bt}Mr.attr("text-anchor",pt.anchor),Pt&&br.attr("text-anchor",pt.anchor),xr.attr("transform",P4(bt,dt)+(s?Eae(fD):""))}),{hoverLabels:ft,commonLabelBoundingBox:Te}}function nD(e,t,r,i,a,s){var l="",u="";e.nameOverride!==void 0&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=vn.templateString(e.name,e.trace._meta)),l=lD(e.name,e.nameLength));var c=r.charAt(0),v=c==="x"?"y":"x";e.zLabel!==void 0?(e.xLabel!==void 0&&(u+="x: "+e.xLabel+"<br>"),e.yLabel!==void 0&&(u+="y: "+e.yLabel+"<br>"),e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"&&e.trace.type!=="choroplethmap"&&(u+=(u?"z: ":"")+e.zLabel)):t&&e[c+"Label"]===a?u=e[v+"Label"]||"":e.xLabel===void 0?e.yLabel!==void 0&&e.trace.type!=="scattercarpet"&&(u=e.yLabel):e.yLabel===void 0?u=e.xLabel:u="("+e.xLabel+", "+e.yLabel+")",(e.text||e.text===0)&&!Array.isArray(e.text)&&(u+=(u?"<br>":"")+e.text),e.extraText!==void 0&&(u+=(u?"<br>":"")+e.extraText),s&&u===""&&!e.hovertemplate&&(l===""&&s.remove(),u=l);var m=e.hovertemplate||!1;if(m){var _=e.hovertemplateLabels||e;e[c+"Label"]!==a&&(_[c+"other"]=_[c+"Val"],_[c+"otherLabel"]=_[c+"Label"]),u=vn.hovertemplateString(m,_,i._d3locale,e.eventData[0]||{},e.trace._meta),u=u.replace(Oae,function(T,M){return l=lD(M,e.nameLength),""})}return[u,l]}function Uae(e,t,r,i){var a=t?"xa":"ya",s=t?"ya":"xa",l=0,u=1,c=e.size(),v=new Array(c),m=0,_=i.minX,T=i.maxX,M=i.minY,k=i.maxY,L=function(Ce){return Ce*r._invScaleX},E=function(Ce){return Ce*r._invScaleY};e.each(function(Ce){var Me=Ce[a],_e=Ce[s],Te=Me._id.charAt(0)==="x",Ae=Me.range;m===0&&Ae&&Ae[0]>Ae[1]!==Te&&(u=-1);var Le=0,Ke=Te?r.width:r.height;if(r.hovermode==="x"||r.hovermode==="y"){var ct=vD(Ce,t),it=Ce.anchor,ut=it==="end"?-1:1,Ge,xt;if(it==="middle")Ge=Ce.crossPos+(Te?E(ct.y-Ce.by/2):L(Ce.bx/2+Ce.tx2width/2)),xt=Ge+(Te?E(Ce.by):L(Ce.bx));else if(Te)Ge=Ce.crossPos+E(ji+ct.y)-E(Ce.by/2-ji),xt=Ge+E(Ce.by);else{var at=L(ut*ji+ct.x),At=at+L(ut*Ce.bx);Ge=Ce.crossPos+Math.min(at,At),xt=Ce.crossPos+Math.max(at,At)}Te?M!==void 0&&k!==void 0&&Math.min(xt,k)-Math.max(Ge,M)>1&&(_e.side==="left"?(Le=_e._mainLinePosition,Ke=r.width):Ke=_e._mainLinePosition):_!==void 0&&T!==void 0&&Math.min(xt,T)-Math.max(Ge,_)>1&&(_e.side==="top"?(Le=_e._mainLinePosition,Ke=r.height):Ke=_e._mainLinePosition)}v[m++]=[{datum:Ce,traceIndex:Ce.trace.index,dp:0,pos:Ce.pos,posref:Ce.posref,size:Ce.by*(Te?Rae:1)/2,pmin:Le,pmax:Ke}]}),v.sort(function(Ce,Me){return Ce[0].posref-Me[0].posref||u*(Me[0].traceIndex-Ce[0].traceIndex)});var I,R,N,z,B,H,V;function Y(Ce){var Me=Ce[0],_e=Ce[Ce.length-1];if(R=Me.pmin-Me.pos-Me.dp+Me.size,N=_e.pos+_e.dp+_e.size-Me.pmax,R>.01){for(B=Ce.length-1;B>=0;B--)Ce[B].dp+=R;I=!1}if(!(N<.01)){if(R<-.01){for(B=Ce.length-1;B>=0;B--)Ce[B].dp-=N;I=!1}if(I){var Te=0;for(z=0;z<Ce.length;z++)H=Ce[z],H.pos+H.dp+H.size>Me.pmax&&Te++;for(z=Ce.length-1;z>=0&&!(Te<=0);z--)H=Ce[z],H.pos>Me.pmax-1&&(H.del=!0,Te--);for(z=0;z<Ce.length&&!(Te<=0);z++)if(H=Ce[z],H.pos<Me.pmin+1)for(H.del=!0,Te--,N=H.size*2,B=Ce.length-1;B>=0;B--)Ce[B].dp-=N;for(z=Ce.length-1;z>=0&&!(Te<=0);z--)H=Ce[z],H.pos+H.dp+H.size>Me.pmax&&(H.del=!0,Te--)}}}for(;!I&&l<=c;){for(l++,I=!0,z=0;z<v.length-1;){var J=v[z],re=v[z+1],ne=J[J.length-1],oe=re[0];if(R=ne.pos+ne.dp+ne.size-oe.pos-oe.dp+oe.size,R>.01){for(B=re.length-1;B>=0;B--)re[B].dp+=R;for(J.push.apply(J,re),v.splice(z+1,1),V=0,B=J.length-1;B>=0;B--)V+=J[B].dp;for(N=V/J.length,B=J.length-1;B>=0;B--)J[B].dp-=N;I=!1}else z++}v.forEach(Y)}for(z=v.length-1;z>=0;z--){var ue=v[z];for(B=ue.length-1;B>=0;B--){var me=ue[B],Se=me.datum;Se.offset=me.dp,Se.del=me.del}}}function vD(e,t){var r=0,i=e.offset;return t&&(i*=-qae,r=e.offset*Fae),{x:r,y:i}}function Vae(e){var t={start:1,end:-1,middle:0}[e.anchor],r=t*(ji+qa),i=r+t*(e.txwidth+qa),a=e.anchor==="middle";return a&&(r-=e.tx2width/2,i+=e.txwidth/2+qa),{alignShift:t,textShiftX:r,text2ShiftX:i}}function dD(e,t,r,i){var a=function(l){return l*r},s=function(l){return l*i};e.each(function(l){var u=Fd.select(this);if(l.del)return u.remove();var c=u.select("text.nums"),v=l.anchor,m=v==="end"?-1:1,_=Vae(l),T=vD(l,t),M=T.x,k=T.y,L=v==="middle";u.select("path").attr("d",L?"M-"+a(l.bx/2+l.tx2width/2)+","+s(k-l.by/2)+"h"+a(l.bx)+"v"+s(l.by)+"h-"+a(l.bx)+"Z":"M0,0L"+a(m*ji+M)+","+s(ji+k)+"v"+s(l.by/2-ji)+"h"+a(m*l.bx)+"v-"+s(l.by)+"H"+a(m*ji+M)+"V"+s(k-ji)+"Z");var E=M+_.textShiftX,I=k+l.ty0-l.by/2+qa,R=l.textAlign||"auto";R!=="auto"&&(R==="left"&&v!=="start"?(c.attr("text-anchor","start"),E=L?-l.bx/2-l.tx2width/2+qa:-l.bx-qa):R==="right"&&v!=="end"&&(c.attr("text-anchor","end"),E=L?l.bx/2-l.tx2width/2-qa:l.bx+qa)),c.call(tu.positionText,a(E),s(I)),l.tx2width&&(u.select("text.name").call(tu.positionText,a(_.text2ShiftX+_.alignShift*qa+M),s(k+l.ty0-l.by/2+qa)),u.select("rect").call(qf.setRect,a(_.text2ShiftX+(_.alignShift-1)*l.tx2width/2+M),s(k-l.by/2-1),a(l.tx2width),s(l.by+2)))})}function Hae(e,t){var r=e.index,i=e.trace||{},a=e.cd[0],s=e.cd[r]||{};function l(T){return T||Sc(T)&&T===0}var u=Array.isArray(r)?function(T,M){var k=vn.castOption(a,r,T);return l(k)?k:vn.extractOption({},i,"",M)}:function(T,M){return vn.extractOption(s,i,T,M)};function c(T,M,k){var L=u(M,k);l(L)&&(e[T]=L)}if(c("hoverinfo","hi","hoverinfo"),c("bgcolor","hbg","hoverlabel.bgcolor"),c("borderColor","hbc","hoverlabel.bordercolor"),c("fontFamily","htf","hoverlabel.font.family"),c("fontSize","hts","hoverlabel.font.size"),c("fontColor","htc","hoverlabel.font.color"),c("fontWeight","htw","hoverlabel.font.weight"),c("fontStyle","hty","hoverlabel.font.style"),c("fontVariant","htv","hoverlabel.font.variant"),c("nameLength","hnl","hoverlabel.namelength"),c("textAlign","hta","hoverlabel.align"),e.posref=t==="y"||t==="closest"&&i.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=vn.constrain(e.x0,0,e.xa._length),e.x1=vn.constrain(e.x1,0,e.xa._length),e.y0=vn.constrain(e.y0,0,e.ya._length),e.y1=vn.constrain(e.y1,0,e.ya._length),e.xLabelVal!==void 0&&(e.xLabel="xLabel"in e?e.xLabel:Nf.hoverLabelText(e.xa,e.xLabelVal,i.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),e.yLabelVal!==void 0&&(e.yLabel="yLabel"in e?e.yLabel:Nf.hoverLabelText(e.ya,e.yLabelVal,i.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),e.zLabelVal!==void 0&&e.zLabel===void 0&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var v=Nf.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==void 0?e.xLabel+=" +"+v+" / -"+Nf.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xB1 "+v,t==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var m=Nf.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==void 0?e.yLabel+=" +"+m+" / -"+Nf.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xB1 "+m,t==="y"&&(e.distance+=1)}var _=e.hoverinfo||e.trace.hoverinfo;return _&&_!=="all"&&(_=Array.isArray(_)?_:_.split("+"),_.indexOf("x")===-1&&(e.xLabel=void 0),_.indexOf("y")===-1&&(e.yLabel=void 0),_.indexOf("z")===-1&&(e.zLabel=void 0),_.indexOf("text")===-1&&(e.text=void 0),_.indexOf("name")===-1&&(e.name=void 0)),e}function oD(e,t,r){var i=r.container,a=r.fullLayout,s=a._size,l=r.event,u=!!t.hLinePoint,c=!!t.vLinePoint,v,m;if(i.selectAll(".spikeline").remove(),!!(c||u)){var _=io.combine(a.plot_bgcolor,a.paper_bgcolor);if(u){var T=t.hLinePoint,M,k;v=T&&T.xa,m=T&&T.ya;var L=m.spikesnap;L==="cursor"?(M=l.pointerX,k=l.pointerY):(M=v._offset+T.x,k=m._offset+T.y);var E=rD.readability(T.color,_)<1.5?io.contrast(_):T.color,I=m.spikemode,R=m.spikethickness,N=m.spikecolor||E,z=Nf.getPxPosition(e,m),B,H;if(I.indexOf("toaxis")!==-1||I.indexOf("across")!==-1){if(I.indexOf("toaxis")!==-1&&(B=z,H=M),I.indexOf("across")!==-1){var V=m._counterDomainMin,Y=m._counterDomainMax;m.anchor==="free"&&(V=Math.min(V,m.position),Y=Math.max(Y,m.position)),B=s.l+V*s.w,H=s.l+Y*s.w}i.insert("line",":first-child").attr({x1:B,x2:H,y1:k,y2:k,"stroke-width":R,stroke:N,"stroke-dasharray":qf.dashStyle(m.spikedash,R)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:B,x2:H,y1:k,y2:k,"stroke-width":R+2,stroke:_}).classed("spikeline",!0).classed("crisp",!0)}I.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:z+(m.side!=="right"?R:-R),cy:k,r:R,fill:N}).classed("spikeline",!0)}if(c){var J=t.vLinePoint,re,ne;v=J&&J.xa,m=J&&J.ya;var oe=v.spikesnap;oe==="cursor"?(re=l.pointerX,ne=l.pointerY):(re=v._offset+J.x,ne=m._offset+J.y);var ue=rD.readability(J.color,_)<1.5?io.contrast(_):J.color,me=v.spikemode,Se=v.spikethickness,Ce=v.spikecolor||ue,Me=Nf.getPxPosition(e,v),_e,Te;if(me.indexOf("toaxis")!==-1||me.indexOf("across")!==-1){if(me.indexOf("toaxis")!==-1&&(_e=Me,Te=ne),me.indexOf("across")!==-1){var Ae=v._counterDomainMin,Le=v._counterDomainMax;v.anchor==="free"&&(Ae=Math.min(Ae,v.position),Le=Math.max(Le,v.position)),_e=s.t+(1-Le)*s.h,Te=s.t+(1-Ae)*s.h}i.insert("line",":first-child").attr({x1:re,x2:re,y1:_e,y2:Te,"stroke-width":Se,stroke:Ce,"stroke-dasharray":qf.dashStyle(v.spikedash,Se)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:re,x2:re,y1:_e,y2:Te,"stroke-width":Se+2,stroke:_}).classed("spikeline",!0).classed("crisp",!0)}me.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:re,cy:Me-(v.side!=="top"?Se:-Se),r:Se,fill:Ce}).classed("spikeline",!0)}}}function Gae(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var i=r.length-1;i>=0;i--){var a=r[i],s=e._hoverdata[i];if(a.curveNumber!==s.curveNumber||String(a.pointNumber)!==String(s.pointNumber)||String(a.pointNumbers)!==String(s.pointNumbers))return!0}return!1}function sD(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function lD(e,t){return tu.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function Zae(e,t){for(var r=t.charAt(0),i=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l];em.traceIs(u.trace,"bar-like")||em.traceIs(u.trace,"box-violin")?s.push(u):u.trace[r+"period"]?a.push(u):i.push(u)}return i.concat(a).concat(s)}function uD(e,t,r){var i=t[e+"a"],a=t[e+"Val"],s=t.cd[0];if(i.type==="category"||i.type==="multicategory")a=i._categoriesMap[a];else if(i.type==="date"){var l=t.trace[e+"periodalignment"];if(l){var u=t.cd[t.index],c=u[e+"Start"];c===void 0&&(c=u[e]);var v=u[e+"End"];v===void 0&&(v=u[e]);var m=v-c;l==="end"?a+=m:l==="middle"&&(a+=m/2)}a=i.d2c(a)}return s&&s.t&&s.t.posLetter===i._id&&(r.boxmode==="group"||r.violinmode==="group")&&(a+=s.t.dPos),a}function pD(e){return e.offsetTop+e.clientTop}function mD(e){return e.offsetLeft+e.clientLeft}function $0(e,t){var r=e._fullLayout,i=t.getBoundingClientRect(),a=i.left,s=i.top,l=a+i.width,u=s+i.height,c=vn.apply3DTransform(r._invTransform)(a,s),v=vn.apply3DTransform(r._invTransform)(l,u),m=c[0],_=c[1],T=v[0],M=v[1];return{x:m,y:_,width:T-m,height:M-_,top:Math.min(_,M),left:Math.min(m,T),right:Math.max(m,T),bottom:Math.max(_,M)}}});var $2=he((O_e,yD)=>{"use strict";var Yae=Nt(),Wae=Ua(),Xae=Ac().isUnifiedHover;yD.exports=function(t,r,i,a){a=a||{};var s=r.legend;function l(u){a.font[u]||(a.font[u]=s?r.legend.font[u]:r.font[u])}r&&Xae(r.hovermode)&&(a.font||(a.font={}),l("size"),l("family"),l("color"),l("weight"),l("style"),l("variant"),s?(a.bgcolor||(a.bgcolor=Wae.combine(r.legend.bgcolor,r.paper_bgcolor)),a.bordercolor||(a.bordercolor=r.legend.bordercolor)):a.bgcolor||(a.bgcolor=r.paper_bgcolor)),i("hoverlabel.bgcolor",a.bgcolor),i("hoverlabel.bordercolor",a.bordercolor),i("hoverlabel.namelength",a.namelength),Yae.coerceFont(i,"hoverlabel.font",a.font),i("hoverlabel.align",a.align)}});var _D=he((U_e,gD)=>{"use strict";var jae=Nt(),Jae=$2(),Kae=A0();gD.exports=function(t,r){function i(a,s){return jae.coerce(t,r,Kae,a,s)}Jae(t,r,i)}});var wD=he((V_e,bD)=>{"use strict";var xD=Nt(),Qae=x_(),$ae=$2();bD.exports=function(t,r,i,a){function s(u,c){return xD.coerce(t,r,Qae,u,c)}var l=xD.extendFlat({},a.hoverlabel);r.hovertemplate&&(l.namelength=-1),$ae(t,r,s,l)}});var R4=he((H_e,TD)=>{"use strict";var eie=Nt(),tie=A0();TD.exports=function(t,r){function i(a,s){return r[a]!==void 0?r[a]:eie.coerce(t,r,tie,a,s)}return i("clickmode"),i("hoversubplots"),i("hovermode")}});var SD=he((G_e,MD)=>{"use strict";var AD=Nt(),rie=A0(),aie=R4(),iie=$2();MD.exports=function(t,r){function i(m,_){return AD.coerce(t,r,rie,m,_)}var a=aie(t,r);a&&(i("hoverdistance"),i("spikedistance"));var s=i("dragmode");s==="select"&&i("selectdirection");var l=r._has("mapbox"),u=r._has("map"),c=r._has("geo"),v=r._basePlotModules.length;r.dragmode==="zoom"&&((l||u||c)&&v===1||(l||u)&&c&&v===2)&&(r.dragmode="pan"),iie(t,r,i),AD.coerceFont(i,"hoverlabel.grouptitlefont",r.hoverlabel.font)}});var ED=he((Z_e,CD)=>{"use strict";var F4=Nt(),kD=sa();CD.exports=function(t){var r=t.calcdata,i=t._fullLayout;function a(v){return function(m){return F4.coerceHoverinfo({hoverinfo:m},{_module:v._module},i)}}for(var s=0;s<r.length;s++){var l=r[s],u=l[0].trace;if(!kD.traceIs(u,"pie-like")){var c=kD.traceIs(u,"2dMap")?nie:F4.fillArray;c(u.hoverinfo,l,"hi",a(u)),u.hovertemplate&&c(u.hovertemplate,l,"ht"),u.hoverlabel&&(c(u.hoverlabel.bgcolor,l,"hbg"),c(u.hoverlabel.bordercolor,l,"hbc"),c(u.hoverlabel.font.size,l,"hts"),c(u.hoverlabel.font.color,l,"htc"),c(u.hoverlabel.font.family,l,"htf"),c(u.hoverlabel.font.weight,l,"htw"),c(u.hoverlabel.font.style,l,"hty"),c(u.hoverlabel.font.variant,l,"htv"),c(u.hoverlabel.namelength,l,"hnl"),c(u.hoverlabel.align,l,"hta"))}}};function nie(e,t,r,i){i=i||F4.identity,Array.isArray(e)&&(t[0][r]=i(e))}});var PD=he((Y_e,LD)=>{"use strict";var oie=sa(),sie=I4().hover;LD.exports=function(t,r,i){var a=oie.getComponentMethod("annotations","onClick")(t,t._hoverdata);i!==void 0&&sie(t,r,i,!0);function s(){t.emit("plotly_click",{points:t._hoverdata,event:r})}t._hoverdata&&r&&r.target&&(a&&a.then?a.then(s):s(),r.stopImmediatePropagation&&r.stopImmediatePropagation())}});var Bf=he((W_e,ID)=>{"use strict";var lie=Ka(),ex=Nt(),uie=$l(),xg=Ac(),DD=A0(),zD=I4();ID.exports={moduleType:"component",name:"fx",constants:Uy(),schema:{layout:DD},attributes:x_(),layoutAttributes:DD,supplyLayoutGlobalDefaults:_D(),supplyDefaults:wD(),supplyLayoutDefaults:SD(),calc:ED(),getDistanceFunction:xg.getDistanceFunction,getClosest:xg.getClosest,inbox:xg.inbox,quadrature:xg.quadrature,appendArrayPointValue:xg.appendArrayPointValue,castHoverOption:cie,castHoverinfo:hie,hover:zD.hover,unhover:uie.unhover,loneHover:zD.loneHover,loneUnhover:fie,click:PD()};function fie(e){var t=ex.isD3Selection(e)?e:lie.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function cie(e,t,r){return ex.castOption(e,t,"hoverlabel."+r)}function hie(e,t,r){function i(a){return ex.coerceHoverinfo({hoverinfo:a},{_module:e._module},t)}return ex.castOption(e,r,"hoverinfo",i)}});var Nd=he(kc=>{"use strict";kc.selectMode=function(e){return e==="lasso"||e==="select"};kc.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};kc.openMode=function(e){return e==="drawline"||e==="drawopenpath"};kc.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};kc.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};kc.selectingOrDrawing=function(e){return kc.freeMode(e)||kc.rectMode(e)}});var tx=he((j_e,RD)=>{"use strict";RD.exports=function(t){var r=t._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})}});var rx=he((J_e,FD)=>{"use strict";FD.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}});var ix=he((K_e,qD)=>{"use strict";var ax=32;qD.exports={CIRCLE_SIDES:ax,i000:0,i090:ax/4,i180:ax/2,i270:ax/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}});var nx=he((Q_e,BD)=>{"use strict";var vie=Nt().strTranslate;function ND(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function die(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function pie(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return ND(e,r[t])}}function mie(e){return vie(e.xaxis._offset,e.yaxis._offset)}BD.exports={p2r:ND,r2p:die,axValue:pie,getTransform:mie}});var jh=he(Cc=>{"use strict";var yie=A5(),VD=ix(),tm=VD.CIRCLE_SIDES,q4=VD.SQRT2,HD=nx(),OD=HD.p2r,UD=HD.r2p,gie=[0,3,4,5,6,1,2],_ie=[0,3,4,1,2];Cc.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var r="",i=0;i<t;i++)for(var a=e[i].length,s=0;s<a;s++){var l=e[i][s][0];if(l==="Z")r+="Z";else for(var u=e[i][s].length,c=0;c<u;c++){var v=c;l==="Q"||l==="S"?v=_ie[c]:l==="C"&&(v=gie[c]),r+=e[i][s][v],c>0&&c<u-1&&(r+=",")}}return r};Cc.readPaths=function(e,t,r,i){var a=yie(e),s=[],l=-1,u=function(){l++,s[l]=[]},c,v=0,m=0,_,T,M=function(){_=v,T=m};M();for(var k=0;k<a.length;k++){var L=[],E,I,R,N,z=a[k][0],B=z;switch(z){case"M":u(),v=+a[k][1],m=+a[k][2],L.push([B,v,m]),M();break;case"Q":case"S":E=+a[k][1],R=+a[k][2],v=+a[k][3],m=+a[k][4],L.push([B,v,m,E,R]);break;case"C":E=+a[k][1],R=+a[k][2],I=+a[k][3],N=+a[k][4],v=+a[k][5],m=+a[k][6],L.push([B,v,m,E,R,I,N]);break;case"T":case"L":v=+a[k][1],m=+a[k][2],L.push([B,v,m]);break;case"H":B="L",v=+a[k][1],L.push([B,v,m]);break;case"V":B="L",m=+a[k][1],L.push([B,v,m]);break;case"A":B="L";var H=+a[k][1],V=+a[k][2];+a[k][4]||(H=-H,V=-V);var Y=v-H,J=m;for(c=1;c<=tm/2;c++){var re=2*Math.PI*c/tm;L.push([B,Y+H*Math.cos(re),J+V*Math.sin(re)])}break;case"Z":(v!==_||m!==T)&&(v=_,m=T,L.push([B,v,m]));break}for(var ne=(r||{}).domain,oe=t._fullLayout._size,ue=r&&r.xsizemode==="pixel",me=r&&r.ysizemode==="pixel",Se=i===!1,Ce=0;Ce<L.length;Ce++){for(c=0;c+2<7;c+=2){var Me=L[Ce][c+1],_e=L[Ce][c+2];Me===void 0||_e===void 0||(v=Me,m=_e,r&&(r.xaxis&&r.xaxis.p2r?(Se&&(Me-=r.xaxis._offset),ue?Me=UD(r.xaxis,r.xanchor)+Me:Me=OD(r.xaxis,Me)):(Se&&(Me-=oe.l),ne?Me=ne.x[0]+Me/oe.w:Me=Me/oe.w),r.yaxis&&r.yaxis.p2r?(Se&&(_e-=r.yaxis._offset),me?_e=UD(r.yaxis,r.yanchor)-_e:_e=OD(r.yaxis,_e)):(Se&&(_e-=oe.t),ne?_e=ne.y[1]-_e/oe.h:_e=1-_e/oe.h)),L[Ce][c+1]=Me,L[Ce][c+2]=_e)}s[l].push(L[Ce].slice())}}return s};function bg(e,t){return Math.abs(e-t)<=1e-6}function ox(e,t){var r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+i*i)}Cc.pointsOnRectangle=function(e){var t=e.length;if(t!==5)return!1;for(var r=1;r<3;r++){var i=e[0][r]-e[1][r],a=e[3][r]-e[2][r];if(!bg(i,a))return!1;var s=e[0][r]-e[3][r],l=e[1][r]-e[2][r];if(!bg(s,l))return!1}return!bg(e[0][1],e[1][1])&&!bg(e[0][1],e[3][1])?!1:!!(ox(e[0],e[1])*ox(e[0],e[3]))};Cc.pointsOnEllipse=function(e){var t=e.length;if(t!==tm+1)return!1;t=tm;for(var r=0;r<t;r++){var i=(t*2-r)%t,a=(t/2+i)%t,s=(t/2+r)%t;if(!bg(ox(e[r],e[s]),ox(e[i],e[a])))return!1}return!0};Cc.handleEllipse=function(e,t,r){if(!e)return[t,r];var i=Cc.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]}),a=(i.x1+i.x0)/2,s=(i.y1+i.y0)/2,l=(i.x1-i.x0)/2,u=(i.y1-i.y0)/2;l||(l=u=u/q4),u||(u=l=l/q4);for(var c=[],v=0;v<tm;v++){var m=v*2*Math.PI/tm;c.push([a+l*Math.cos(m),s+u*Math.sin(m)])}return c};Cc.ellipseOver=function(e){var t=e.x0,r=e.y0,i=e.x1,a=e.y1,s=i-t,l=a-r;t-=s,r-=l;var u=(t+i)/2,c=(r+a)/2,v=q4;return s*=v,l*=v,{x0:u-s,y0:c-l,x1:u+s,y1:c+l}};Cc.fixDatesForPaths=function(e,t,r){var i=t.type==="date",a=r.type==="date";if(!i&&!a)return e;for(var s=0;s<e.length;s++)for(var l=0;l<e[s].length;l++)for(var u=0;u+2<e[s][l].length;u+=2)i&&(e[s][l][u+1]=e[s][l][u+1].replace(" ","_")),a&&(e[s][l][u+2]=e[s][l][u+2].replace(" ","_"));return e}});var ux=he((e2e,KD)=>{"use strict";var XD=Nd(),xie=XD.drawMode,bie=XD.openMode,rm=ix(),GD=rm.i000,ZD=rm.i090,YD=rm.i180,WD=rm.i270,wie=rm.cos45,Tie=rm.sin45,jD=nx(),sx=jD.p2r,Jh=jD.r2p,Aie=Nh(),Mie=Aie.clearOutline,lx=jh(),Sie=lx.readPaths,kie=lx.writePaths,Cie=lx.ellipseOver,Eie=lx.fixDatesForPaths;function Lie(e,t){if(e.length){var r=e[0][0];if(r){var i=t.gd,a=t.isActiveShape,s=t.dragmode,l=(i.layout||{}).shapes||[];if(!xie(s)&&a!==void 0){var u=i._fullLayout._activeShapeIndex;if(u<l.length)switch(i._fullLayout.shapes[u].type){case"rect":s="drawrect";break;case"circle":s="drawcircle";break;case"line":s="drawline";break;case"path":var c=l[u].path||"";c[c.length-1]==="Z"?s="drawclosedpath":s="drawopenpath";break}}var v=JD(e,t,s);Mie(i);for(var m=t.editHelpers,_=(m||{}).modifyItem,T=[],M=0;M<l.length;M++){var k=i._fullLayout.shapes[M];if(T[M]=k._input,a!==void 0&&M===i._fullLayout._activeShapeIndex){var L=v;switch(k.type){case"line":case"rect":case"circle":_("x0",L.x0-(k.x0shift||0)),_("x1",L.x1-(k.x1shift||0)),_("y0",L.y0-(k.y0shift||0)),_("y1",L.y1-(k.y1shift||0));break;case"path":_("path",L.path);break}}}return a===void 0?(T.push(v),T):m?m.getUpdateObj():{}}}}function JD(e,t,r){var i=e[0][0],a=t.gd,s=i.getAttribute("d"),l=a._fullLayout.newshape,u=t.plotinfo,c=t.isActiveShape,v=u.xaxis,m=u.yaxis,_=!!u.domain||!u.xaxis,T=!!u.domain||!u.yaxis,M=bie(r),k=Sie(s,a,u,c),L={editable:!0,visible:l.visible,name:l.name,showlegend:l.showlegend,legend:l.legend,legendwidth:l.legendwidth,legendgroup:l.legendgroup,legendgrouptitle:{text:l.legendgrouptitle.text,font:l.legendgrouptitle.font},legendrank:l.legendrank,label:l.label,xref:_?"paper":v._id,yref:T?"paper":m._id,layer:l.layer,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}};M||(L.fillcolor=l.fillcolor,L.fillrule=l.fillrule);var E;if(k.length===1&&(E=k[0]),E&&E.length===5&&r==="drawrect")L.type="rect",L.x0=E[0][1],L.y0=E[0][2],L.x1=E[2][1],L.y1=E[2][2];else if(E&&r==="drawline")L.type="line",L.x0=E[0][1],L.y0=E[0][2],L.x1=E[1][1],L.y1=E[1][2];else if(E&&r==="drawcircle"){L.type="circle";var I=E[GD][1],R=E[ZD][1],N=E[YD][1],z=E[WD][1],B=E[GD][2],H=E[ZD][2],V=E[YD][2],Y=E[WD][2],J=u.xaxis&&(u.xaxis.type==="date"||u.xaxis.type==="log"),re=u.yaxis&&(u.yaxis.type==="date"||u.yaxis.type==="log");J&&(I=Jh(u.xaxis,I),R=Jh(u.xaxis,R),N=Jh(u.xaxis,N),z=Jh(u.xaxis,z)),re&&(B=Jh(u.yaxis,B),H=Jh(u.yaxis,H),V=Jh(u.yaxis,V),Y=Jh(u.yaxis,Y));var ne=(R+z)/2,oe=(B+V)/2,ue=(z-R+N-I)/2,me=(Y-H+V-B)/2,Se=Cie({x0:ne,y0:oe,x1:ne+ue*wie,y1:oe+me*Tie});J&&(Se.x0=sx(u.xaxis,Se.x0),Se.x1=sx(u.xaxis,Se.x1)),re&&(Se.y0=sx(u.yaxis,Se.y0),Se.y1=sx(u.yaxis,Se.y1)),L.x0=Se.x0,L.y0=Se.y0,L.x1=Se.x1,L.y1=Se.y1}else L.type="path",v&&m&&Eie(k,v,m),L.path=kie(k),E=null;return L}KD.exports={newShapes:Lie,createShapeObj:JD}});var B4=he((t2e,QD)=>{"use strict";var Pie=Nd(),Die=Pie.selectMode,zie=Nh(),Iie=zie.clearOutline,N4=jh(),Rie=N4.readPaths,Fie=N4.writePaths,qie=N4.fixDatesForPaths;QD.exports=function(t,r){if(t.length){var i=t[0][0];if(i){var a=i.getAttribute("d"),s=r.gd,l=s._fullLayout.newselection,u=r.plotinfo,c=u.xaxis,v=u.yaxis,m=r.isActiveSelection,_=r.dragmode,T=(s.layout||{}).selections||[];if(!Die(_)&&m!==void 0){var M=s._fullLayout._activeSelectionIndex;if(M<T.length)switch(s._fullLayout.selections[M].type){case"rect":_="select";break;case"path":_="lasso";break}}var k=Rie(a,s,u,m),L={xref:c._id,yref:v._id,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}},E;k.length===1&&(E=k[0]),E&&E.length===5&&_==="select"?(L.type="rect",L.x0=E[0][1],L.y0=E[0][2],L.x1=E[2][1],L.y1=E[2][2]):(L.type="path",c&&v&&qie(k,c,v),L.path=Fie(k),E=null),Iie(s);for(var I=r.editHelpers,R=(I||{}).modifyItem,N=[],z=0;z<T.length;z++){var B=s._fullLayout.selections[z];if(!B){N[z]=B;continue}if(N[z]=B._input,m!==void 0&&z===s._fullLayout._activeSelectionIndex){var H=L;switch(B.type){case"rect":R("x0",H.x0),R("x1",H.x1),R("y0",H.y0),R("y1",H.y1);break;case"path":R("path",H.path);break}}}return m===void 0?(N.push(L),N):I?I.getUpdateObj():{}}}}});var wg=he((r2e,$D)=>{"use strict";$D.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}});var Kh=he(vo=>{"use strict";var Bd=wg(),ez=Nt(),fx=Ii();vo.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(t){return t}};vo.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(t){return t}};vo.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}};vo.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};vo.extractPathCoords=function(e,t,r){var i=[],a=e.match(Bd.segmentRE);return a.forEach(function(s){var l=t[s.charAt(0)].drawn;if(l!==void 0){var u=s.substr(1).match(Bd.paramRE);if(!(!u||u.length<l)){var c=u[l],v=r?c:ez.cleanNumber(c);i.push(v)}}}),i};vo.getDataToPixel=function(e,t,r,i,a){var s=e._fullLayout._size,l;if(t)if(a==="domain")l=function(c){return t._length*(i?1-c:c)+t._offset};else{var u=vo.shapePositionToRange(t);l=function(c){var v=Tg(t,r);return t._offset+t.r2p(u(c,!0))+v},t.type==="date"&&(l=vo.decodeDate(l))}else i?l=function(c){return s.t+s.h*(1-c)}:l=function(c){return s.l+s.w*c};return l};vo.getPixelToData=function(e,t,r,i){var a=e._fullLayout._size,s;if(t)if(i==="domain")s=function(u){var c=(u-t._offset)/t._length;return r?1-c:c};else{var l=vo.rangeToShapePosition(t);s=function(u){return l(t.p2r(u-t._offset))}}else r?s=function(u){return 1-(u-a.t)/a.h}:s=function(u){return(u-a.l)/a.w};return s};vo.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1,i=Math.round(e);return r?i+.5:i};vo.makeShapesOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{},i=e._fullLayout._plots[r.xref+r.yref],a=!!i;return a?i._hadPlotinfo=!0:(i={},r.xref&&r.xref!=="paper"&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&r.yref!=="paper"&&(i.yaxis=e._fullLayout[r.yref+"axis"])),i.xsizemode=r.xsizemode,i.ysizemode=r.ysizemode,i.xanchor=r.xanchor,i.yanchor=r.yanchor,{options:r,plotinfo:i}};vo.makeSelectionsOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.selections[t]||{},i=e._fullLayout._plots[r.xref+r.yref],a=!!i;return a?i._hadPlotinfo=!0:(i={},r.xref&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&(i.yaxis=e._fullLayout[r.yref+"axis"])),{options:r,plotinfo:i}};vo.getPathString=function(e,t){var r=t.type,i=fx.getRefType(t.xref),a=fx.getRefType(t.yref),s=fx.getFromId(e,t.xref),l=fx.getFromId(e,t.yref),u=e._fullLayout._size,c,v,m,_,T=Tg(s,t.x0shift),M=Tg(s,t.x1shift),k=Tg(l,t.y0shift),L=Tg(l,t.y1shift),E,I,R,N;if(s?i==="domain"?v=function(ue){return s._offset+s._length*ue}:(c=vo.shapePositionToRange(s),v=function(ue){return s._offset+s.r2p(c(ue,!0))}):v=function(ue){return u.l+u.w*ue},l?a==="domain"?_=function(ue){return l._offset+l._length*(1-ue)}:(m=vo.shapePositionToRange(l),_=function(ue){return l._offset+l.r2p(m(ue,!0))}):_=function(ue){return u.t+u.h*(1-ue)},r==="path")return s&&s.type==="date"&&(v=vo.decodeDate(v)),l&&l.type==="date"&&(_=vo.decodeDate(_)),Nie(t,v,_);if(t.xsizemode==="pixel"){var z=v(t.xanchor);E=z+t.x0+T,I=z+t.x1+M}else E=v(t.x0)+T,I=v(t.x1)+M;if(t.ysizemode==="pixel"){var B=_(t.yanchor);R=B-t.y0+k,N=B-t.y1+L}else R=_(t.y0)+k,N=_(t.y1)+L;if(r==="line")return"M"+E+","+R+"L"+I+","+N;if(r==="rect")return"M"+E+","+R+"H"+I+"V"+N+"H"+E+"Z";var H=(E+I)/2,V=(R+N)/2,Y=Math.abs(H-E),J=Math.abs(V-R),re="A"+Y+","+J,ne=H+Y+","+V,oe=H+","+(V-J);return"M"+ne+re+" 0 1,1 "+oe+re+" 0 0,1 "+ne+"Z"};function Nie(e,t,r){var i=e.path,a=e.xsizemode,s=e.ysizemode,l=e.xanchor,u=e.yanchor;return i.replace(Bd.segmentRE,function(c){var v=0,m=c.charAt(0),_=Bd.paramIsX[m],T=Bd.paramIsY[m],M=Bd.numParams[m],k=c.substr(1).replace(Bd.paramRE,function(L){return _[v]?a==="pixel"?L=t(l)+Number(L):L=t(L):T[v]&&(s==="pixel"?L=r(u)-Number(L):L=r(L)),v++,v>M&&(L="X"),L});return v>M&&(k=k.replace(/[\s,]*X.*/,""),ez.log("Ignoring extra params in segment "+c)),m+k})}function Tg(e,t){t=t||0;var r=0;return t&&e&&(e.type==="category"||e.type==="multicategory")&&(r=(e.r2p(1)-e.r2p(0))*t),r}});var U4=he((i2e,iz)=>{"use strict";var Bie=Nt(),am=Ii(),tz=ho(),rz=_i(),Oie=jh().readPaths,O4=Kh(),Uie=O4.getPathString,az=L_(),Vie=as().FROM_TL;iz.exports=function(t,r,i,a){if(a.selectAll(".shape-label").remove(),!!(i.label.text||i.label.texttemplate)){var s;if(i.label.texttemplate){var l={};if(i.type!=="path"){var u=am.getFromId(t,i.xref),c=am.getFromId(t,i.yref);for(var v in az){var m=az[v](i,u,c);m!==void 0&&(l[v]=m)}}s=Bie.texttemplateStringForShapes(i.label.texttemplate,{},t._fullLayout._d3locale,l)}else s=i.label.text;var _={"data-index":r},T=i.label.font,M={"data-notex":1},k=a.append("g").attr(_).classed("shape-label",!0),L=k.append("text").attr(M).classed("shape-label-text",!0).text(s),E,I,R,N;if(i.path){var z=Uie(t,i),B=Oie(z,t);E=1/0,R=1/0,I=-1/0,N=-1/0;for(var H=0;H<B.length;H++)for(var V=0;V<B[H].length;V++)for(var Y=B[H][V],J=1;J<Y.length;J+=2){var re=Y[J],ne=Y[J+1];E=Math.min(E,re),I=Math.max(I,re),R=Math.min(R,ne),N=Math.max(N,ne)}}else{var oe=am.getFromId(t,i.xref),ue=i.x0shift,me=i.x1shift,Se=am.getRefType(i.xref),Ce=am.getFromId(t,i.yref),Me=i.y0shift,_e=i.y1shift,Te=am.getRefType(i.yref),Ae=function(at,At){var kt=O4.getDataToPixel(t,oe,At,!1,Se);return kt(at)},Le=function(at,At){var kt=O4.getDataToPixel(t,Ce,At,!0,Te);return kt(at)};E=Ae(i.x0,ue),I=Ae(i.x1,me),R=Le(i.y0,Me),N=Le(i.y1,_e)}var Ke=i.label.textangle;Ke==="auto"&&(i.type==="line"?Ke=Hie(E,R,I,N):Ke=0),L.call(function(at){return at.call(rz.font,T).attr({}),tz.convertToTspans(at,t),at});var ct=rz.bBox(L.node()),it=Gie(E,R,I,N,i,Ke,ct),ut=it.textx,Ge=it.texty,xt=it.xanchor;L.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[xt],y:Ge,x:ut,transform:"rotate("+Ke+","+ut+","+Ge+")"}).call(tz.positionText,ut,Ge)}};function Hie(e,t,r,i){var a,s;return s=Math.abs(r-e),r>=e?a=t-i:a=i-t,-180/Math.PI*Math.atan2(a,s)}function Gie(e,t,r,i,a,s,l){var u=a.label.textposition,c=a.label.textangle,v=a.label.padding,m=a.type,_=Math.PI/180*s,T=Math.sin(_),M=Math.cos(_),k=a.label.xanchor,L=a.label.yanchor,E,I,R,N;if(m==="line"){u==="start"?(E=e,I=t):u==="end"?(E=r,I=i):(E=(e+r)/2,I=(t+i)/2),k==="auto"&&(u==="start"?c==="auto"?r>e?k="left":r<e?k="right":k="center":r>e?k="right":r<e?k="left":k="center":u==="end"?c==="auto"?r>e?k="right":r<e?k="left":k="center":r>e?k="left":r<e?k="right":k="center":k="center");var z={left:1,center:0,right:-1},B={bottom:-1,middle:0,top:1};if(c==="auto"){var H=B[L];R=-v*T*H,N=v*M*H}else{var V=z[k],Y=B[L];R=v*V,N=v*Y}E=E+R,I=I+N}else R=v+3,u.indexOf("right")!==-1?(E=Math.max(e,r)-R,k==="auto"&&(k="right")):u.indexOf("left")!==-1?(E=Math.min(e,r)+R,k==="auto"&&(k="left")):(E=(e+r)/2,k==="auto"&&(k="center")),u.indexOf("top")!==-1?I=Math.min(t,i):u.indexOf("bottom")!==-1?I=Math.max(t,i):I=(t+i)/2,N=v,L==="bottom"?I=I-N:L==="top"&&(I=I+N);var J=Vie[L],re=a.label.font.size,ne=l.height,oe=(ne*J-re)*T,ue=-(ne*J-re)*M;return{textx:E+oe,texty:I+ue,xanchor:k}}});var vx=he((n2e,hz)=>{"use strict";var Zie=Nt(),Yie=Zie.strTranslate,nz=$l(),lz=Nd(),Wie=lz.drawMode,uz=lz.selectMode,fz=sa(),oz=Ua(),hx=ix(),Xie=hx.i000,jie=hx.i090,Jie=hx.i180,Kie=hx.i270,Qie=Nh(),cz=Qie.clearOutlineControllers,H4=jh(),cx=H4.pointsOnRectangle,V4=H4.pointsOnEllipse,$ie=H4.writePaths,ene=ux().newShapes,tne=ux().createShapeObj,rne=B4(),ane=U4();hz.exports=function e(t,r,i,a){a||(a=0);var s=i.gd;function l(){e(t,r,i,a++),(V4(t[0])||i.hasText)&&u({redrawing:!0})}function u(Me){var _e={};i.isActiveShape!==void 0&&(i.isActiveShape=!1,_e=ene(r,i)),i.isActiveSelection!==void 0&&(i.isActiveSelection=!1,_e=rne(r,i),s._fullLayout._reselect=!0),Object.keys(_e).length&&fz.call((Me||{}).redrawing?"relayout":"_guiRelayout",s,_e)}var c=s._fullLayout,v=c._zoomlayer,m=i.dragmode,_=Wie(m),T=uz(m);(_||T)&&(s._fullLayout._outlining=!0),cz(s),r.attr("d",$ie(t));var M,k,L,E,I;if(!a&&(i.isActiveShape||i.isActiveSelection)){I=ine([],t);var R=v.append("g").attr("class","outline-controllers");re(R),Ce()}if(_&&i.hasText){var N=v.select(".label-temp"),z=tne(r,i,i.dragmode);ane(s,"label-temp",z,N)}function B(Me){L=+Me.srcElement.getAttribute("data-i"),E=+Me.srcElement.getAttribute("data-j"),M[L][E].moveFn=H}function H(Me,_e){if(t.length){var Te=I[L][E][1],Ae=I[L][E][2],Le=t[L],Ke=Le.length;if(cx(Le)){var ct=Me,it=_e;if(i.isActiveSelection){var ut=sz(Le,E);ut[1]===Le[E][1]?it=0:ct=0}for(var Ge=0;Ge<Ke;Ge++)if(Ge!==E){var xt=Le[Ge];xt[1]===Le[E][1]&&(xt[1]=Te+ct),xt[2]===Le[E][2]&&(xt[2]=Ae+it)}if(Le[E][1]=Te+ct,Le[E][2]=Ae+it,!cx(Le))for(var at=0;at<Ke;at++)for(var At=0;At<Le[at].length;At++)Le[at][At]=I[L][at][At]}else Le[E][1]=Te+Me,Le[E][2]=Ae+_e;l()}}function V(){u()}function Y(){if(t.length&&t[L]&&t[L].length){for(var Me=[],_e=0;_e<t[L].length;_e++)_e!==E&&Me.push(t[L][_e]);Me.length>1&&!(Me.length===2&&Me[1][0]==="Z")&&(E===0&&(Me[0][0]="M"),t[L]=Me,l(),u())}}function J(Me,_e){if(Me===2){L=+_e.srcElement.getAttribute("data-i"),E=+_e.srcElement.getAttribute("data-j");var Te=t[L];!cx(Te)&&!V4(Te)&&Y()}}function re(Me){M=[];for(var _e=0;_e<t.length;_e++){var Te=t[_e],Ae=cx(Te),Le=!Ae&&V4(Te);M[_e]=[];for(var Ke=Te.length,ct=0;ct<Ke;ct++)if(Te[ct][0]!=="Z"&&!(Le&&ct!==Xie&&ct!==jie&&ct!==Jie&&ct!==Kie)){var it=Ae&&i.isActiveSelection,ut;it&&(ut=sz(Te,ct));var Ge=Te[ct][1],xt=Te[ct][2],at=Me.append(it?"rect":"circle").attr("data-i",_e).attr("data-j",ct).style({fill:oz.background,stroke:oz.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(it){var At=ut[1]-Ge,kt=ut[2]-xt,mt=kt?5:Math.max(Math.min(25,Math.abs(At)-5),5),ye=At?5:Math.max(Math.min(25,Math.abs(kt)-5),5);at.classed(kt?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",mt).attr("height",ye).attr("x",Ge-mt/2).attr("y",xt-ye/2).attr("transform",Yie(At/2,kt/2))}else at.classed("cursor-grab",!0).attr("r",5).attr("cx",Ge).attr("cy",xt);M[_e][ct]={element:at.node(),gd:s,prepFn:B,doneFn:V,clickFn:J},nz.init(M[_e][ct])}}}function ne(Me,_e){if(t.length)for(var Te=0;Te<t.length;Te++)for(var Ae=0;Ae<t[Te].length;Ae++)for(var Le=0;Le+2<t[Te][Ae].length;Le+=2)t[Te][Ae][Le+1]=I[Te][Ae][Le+1]+Me,t[Te][Ae][Le+2]=I[Te][Ae][Le+2]+_e}function oe(Me,_e){ne(Me,_e),l()}function ue(Me){L=+Me.srcElement.getAttribute("data-i"),L||(L=0),k[L].moveFn=oe}function me(){u()}function Se(Me){Me===2&&nne(s)}function Ce(){if(k=[],!!t.length){var Me=0;k[Me]={element:r[0][0],gd:s,prepFn:ue,doneFn:me,clickFn:Se},nz.init(k[Me])}}};function ine(e,t){for(var r=0;r<t.length;r++){var i=t[r];e[r]=[];for(var a=0;a<i.length;a++){e[r][a]=[];for(var s=0;s<i[a].length;s++)e[r][a][s]=i[a][s]}}return e}function sz(e,t){var r=e[t][1],i=e[t][2],a=e.length,s,l,u;return s=(t+1)%a,l=e[s][1],u=e[s][2],l===r&&u===i&&(s=(t+2)%a,l=e[s][1],u=e[s][2]),[s,l,u]}function nne(e){if(uz(e._fullLayout.dragmode)){cz(e);var t=e._fullLayout._activeSelectionIndex,r=(e.layout||{}).selections||[];if(t<r.length){for(var i=[],a=0;a<r.length;a++)a!==t&&i.push(r[a]);delete e._fullLayout._activeSelectionIndex;var s=e._fullLayout.selections[t];e._fullLayout._deselect={xref:s.xref,yref:s.yref},fz.call("_guiRelayout",e,{selections:i})}}}});var yx=he((o2e,wz)=>{"use strict";var one=Ka(),gz=sa(),vz=Nt(),im=Ii(),sne=jh().readPaths,lne=vx(),px=U4(),_z=Nh().clearOutlineControllers,G4=Ua(),Y4=_i(),une=Di().arrayEditor,dz=$l(),pz=Yh(),Od=wg(),Ys=Kh(),Z4=Ys.getPathString;wz.exports={draw:W4,drawOne:xz,eraseActiveShape:hne,drawLabel:px};function W4(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove();for(var r in t._plots){var i=t._plots[r].shapelayer;i&&(i.selectAll("path").remove(),i.selectAll("text").remove())}for(var a=0;a<t.shapes.length;a++)t.shapes[a].visible===!0&&xz(e,a)}function dx(e){return!!e._fullLayout._outlining}function mx(e){return!e._context.edits.shapePosition}function xz(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=Ys.makeShapesOptionsAndPlotinfo(e,t),i=r.options,a=r.plotinfo;if(!i._input||i.visible!==!0)return;if(i.layer==="above")l(e._fullLayout._shapeUpperLayer);else if(i.xref==="paper"||i.yref==="paper")l(e._fullLayout._shapeLowerLayer);else if(i.layer==="between")l(a.shapelayerBetween);else if(a._hadPlotinfo){var s=a.mainplotinfo||a;l(s.shapelayer)}else l(e._fullLayout._shapeLowerLayer);function l(u){var c=Z4(e,i),v={"data-index":t,"fill-rule":i.fillrule,d:c},m=i.opacity,_=i.fillcolor,T=i.line.width?i.line.color:"rgba(0,0,0,0)",M=i.line.width,k=i.line.dash;!M&&i.editable===!0&&(M=5,k="solid");var L=c[c.length-1]!=="Z",E=mx(e)&&i.editable&&e._fullLayout._activeShapeIndex===t;E&&(_=L?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,m=e._fullLayout.activeshape.opacity);var I=u.append("g").classed("shape-group",!0).attr({"data-index":t}),R=I.append("path").attr(v).style("opacity",m).call(G4.stroke,T).call(G4.fill,_).call(Y4.dashLine,k,M);bz(I,e,i),px(e,t,i,I);var N;if((E||e._context.edits.shapePosition)&&(N=une(e.layout,"shapes",i)),E){R.style({cursor:"move"});var z={element:R.node(),plotinfo:a,gd:e,editHelpers:N,hasText:i.label.text||i.label.texttemplate,isActiveShape:!0},B=sne(c,e);lne(B,R,z)}else e._context.edits.shapePosition?fne(e,R,i,t,u,N):i.editable===!0&&R.style("pointer-events",L||G4.opacity(_)*m<=.5?"stroke":"all");R.node().addEventListener("click",function(){return cne(e,R)})}}function bz(e,t,r){var i=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");Y4.setClipUrl(e,i?"clip"+t._fullLayout._uid+i:null,t)}function fne(e,t,r,i,a,s){var l=10,u=10,c=r.xsizemode==="pixel",v=r.ysizemode==="pixel",m=r.type==="line",_=r.type==="path",T=s.modifyItem,M,k,L,E,I,R,N,z,B,H,V,Y,J,re,ne,oe=one.select(t.node().parentNode),ue=im.getFromId(e,r.xref),me=im.getRefType(r.xref),Se=im.getFromId(e,r.yref),Ce=im.getRefType(r.yref),Me=r.x0shift,_e=r.x1shift,Te=r.y0shift,Ae=r.y1shift,Le=function(Mt,Ct){var Rt=Ys.getDataToPixel(e,ue,Ct,!1,me);return Rt(Mt)},Ke=function(Mt,Ct){var Rt=Ys.getDataToPixel(e,Se,Ct,!0,Ce);return Rt(Mt)},ct=Ys.getPixelToData(e,ue,!1,me),it=Ys.getPixelToData(e,Se,!0,Ce),ut=at(),Ge={element:ut.node(),gd:e,prepFn:mt,doneFn:ye,clickFn:Re},xt;dz.init(Ge),ut.node().onmousemove=kt;function at(){return m?At():t}function At(){var Mt=10,Ct=Math.max(r.line.width,Mt),Rt=a.append("g").attr("data-index",i).attr("drag-helper",!0);Rt.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":Ct,"stroke-opacity":"0"});var Ot={"fill-opacity":"0"},gt=Math.max(Ct/2,Mt);return Rt.append("circle").attr({"data-line-point":"start-point",cx:c?Le(r.xanchor)+r.x0:Le(r.x0,Me),cy:v?Ke(r.yanchor)-r.y0:Ke(r.y0,Te),r:gt}).style(Ot).classed("cursor-grab",!0),Rt.append("circle").attr({"data-line-point":"end-point",cx:c?Le(r.xanchor)+r.x1:Le(r.x1,_e),cy:v?Ke(r.yanchor)-r.y1:Ke(r.y1,Ae),r:gt}).style(Ot).classed("cursor-grab",!0),Rt}function kt(Mt){if(dx(e)){xt=null;return}if(m)Mt.target.tagName==="path"?xt="move":xt=Mt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ct=Ge.element.getBoundingClientRect(),Rt=Ct.right-Ct.left,Ot=Ct.bottom-Ct.top,gt=Mt.clientX-Ct.left,Et=Mt.clientY-Ct.top,ir=!_&&Rt>l&&Ot>u&&!Mt.shiftKey?dz.getCursor(gt/Rt,1-Et/Ot):"move";pz(t,ir),xt=ir.split("-")[0]}}function mt(Mt){dx(e)||(c&&(I=Le(r.xanchor)),v&&(R=Ke(r.yanchor)),r.type==="path"?ne=r.path:(M=c?r.x0:Le(r.x0),k=v?r.y0:Ke(r.y0),L=c?r.x1:Le(r.x1),E=v?r.y1:Ke(r.y1)),M<L?(B=M,J="x0",H=L,re="x1"):(B=L,J="x1",H=M,re="x0"),!v&&k<E||v&&k>E?(N=k,V="y0",z=E,Y="y1"):(N=E,V="y1",z=k,Y="y0"),kt(Mt),vt(a,r),Bt(t,r,e),Ge.moveFn=xt==="move"?xe:et,Ge.altKey=Mt.altKey)}function ye(){dx(e)||(pz(t),tt(a),bz(t,e,r),gz.call("_guiRelayout",e,s.getUpdateObj()))}function Re(){dx(e)||tt(a)}function xe(Mt,Ct){if(r.type==="path"){var Rt=function(Et){return Et},Ot=Rt,gt=Rt;c?T("xanchor",r.xanchor=ct(I+Mt)):(Ot=function(ir){return ct(Le(ir)+Mt)},ue&&ue.type==="date"&&(Ot=Ys.encodeDate(Ot))),v?T("yanchor",r.yanchor=it(R+Ct)):(gt=function(ir){return it(Ke(ir)+Ct)},Se&&Se.type==="date"&&(gt=Ys.encodeDate(gt))),T("path",r.path=mz(ne,Ot,gt))}else c?T("xanchor",r.xanchor=ct(I+Mt)):(T("x0",r.x0=ct(M+Mt)),T("x1",r.x1=ct(L+Mt))),v?T("yanchor",r.yanchor=it(R+Ct)):(T("y0",r.y0=it(k+Ct)),T("y1",r.y1=it(E+Ct)));t.attr("d",Z4(e,r)),vt(a,r),px(e,i,r,oe)}function et(Mt,Ct){if(_){var Rt=function(Ut){return Ut},Ot=Rt,gt=Rt;c?T("xanchor",r.xanchor=ct(I+Mt)):(Ot=function(er){return ct(Le(er)+Mt)},ue&&ue.type==="date"&&(Ot=Ys.encodeDate(Ot))),v?T("yanchor",r.yanchor=it(R+Ct)):(gt=function(er){return it(Ke(er)+Ct)},Se&&Se.type==="date"&&(gt=Ys.encodeDate(gt))),T("path",r.path=mz(ne,Ot,gt))}else if(m){if(xt==="resize-over-start-point"){var Et=M+Mt,ir=v?k-Ct:k+Ct;T("x0",r.x0=c?Et:ct(Et)),T("y0",r.y0=v?ir:it(ir))}else if(xt==="resize-over-end-point"){var Gt=L+Mt,Ne=v?E-Ct:E+Ct;T("x1",r.x1=c?Gt:ct(Gt)),T("y1",r.y1=v?Ne:it(Ne))}}else{var ft=function(Ut){return xt.indexOf(Ut)!==-1},pt=ft("n"),xr=ft("s"),pr=ft("w"),Tt=ft("e"),wt=pt?N+Ct:N,Vt=xr?z+Ct:z,Kt=pr?B+Mt:B,Ht=Tt?H+Mt:H;v&&(pt&&(wt=N-Ct),xr&&(Vt=z-Ct)),(!v&&Vt-wt>u||v&&wt-Vt>u)&&(T(V,r[V]=v?wt:it(wt)),T(Y,r[Y]=v?Vt:it(Vt))),Ht-Kt>l&&(T(J,r[J]=c?Kt:ct(Kt)),T(re,r[re]=c?Ht:ct(Ht)))}t.attr("d",Z4(e,r)),vt(a,r),px(e,i,r,oe)}function vt(Mt,Ct){(c||v)&&Rt();function Rt(){var Ot=Ct.type!=="path",gt=Mt.selectAll(".visual-cue").data([0]),Et=1;gt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Et}).classed("visual-cue",!0);var ir=Le(c?Ct.xanchor:vz.midRange(Ot?[Ct.x0,Ct.x1]:Ys.extractPathCoords(Ct.path,Od.paramIsX))),Gt=Ke(v?Ct.yanchor:vz.midRange(Ot?[Ct.y0,Ct.y1]:Ys.extractPathCoords(Ct.path,Od.paramIsY)));if(ir=Ys.roundPositionForSharpStrokeRendering(ir,Et),Gt=Ys.roundPositionForSharpStrokeRendering(Gt,Et),c&&v){var Ne="M"+(ir-1-Et)+","+(Gt-1-Et)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";gt.attr("d",Ne)}else if(c){var ft="M"+(ir-1-Et)+","+(Gt-9-Et)+"v18 h2 v-18 Z";gt.attr("d",ft)}else{var pt="M"+(ir-9-Et)+","+(Gt-1-Et)+"h18 v2 h-18 Z";gt.attr("d",pt)}}}function tt(Mt){Mt.selectAll(".visual-cue").remove()}function Bt(Mt,Ct,Rt){var Ot=Ct.xref,gt=Ct.yref,Et=im.getFromId(Rt,Ot),ir=im.getFromId(Rt,gt),Gt="";Ot!=="paper"&&!Et.autorange&&(Gt+=Ot),gt!=="paper"&&!ir.autorange&&(Gt+=gt),Y4.setClipUrl(Mt,Gt?"clip"+Rt._fullLayout._uid+Gt:null,Rt)}}function mz(e,t,r){return e.replace(Od.segmentRE,function(i){var a=0,s=i.charAt(0),l=Od.paramIsX[s],u=Od.paramIsY[s],c=Od.numParams[s],v=i.substr(1).replace(Od.paramRE,function(m){return a>=c||(l[a]?m=t(m):u[a]&&(m=r(m)),a++),m});return s+v})}function cne(e,t){if(mx(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeShapeIndex){yz(e);return}e._fullLayout._activeShapeIndex=i,e._fullLayout._deactivateShape=yz,W4(e)}}}function yz(e){if(mx(e)){var t=e._fullLayout._activeShapeIndex;t>=0&&(_z(e),delete e._fullLayout._activeShapeIndex,W4(e))}}function hne(e){if(mx(e)){_z(e);var t=e._fullLayout._activeShapeIndex,r=(e.layout||{}).shapes||[];if(t<r.length){for(var i=[],a=0;a<r.length;a++)a!==t&&i.push(r[a]);return delete e._fullLayout._activeShapeIndex,gz.call("_guiRelayout",e,{shapes:i})}}}});var K4=he((s2e,Lz)=>{"use strict";var ru=sa(),Tz=jn(),Az=ro(),Ga=rx(),vne=yx().eraseActiveShape,nm=Nt(),Ea=nm._,Za=Lz.exports={};Za.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{},r=t.format||"png";return r==="png"?Ea(e,"Download plot as a png"):Ea(e,"Download plot")},icon:Ga.camera,click:function(e){var t=e._context.toImageButtonOptions,r={format:t.format||"png"};nm.notifier(Ea(e,"Taking snapshot - this may take a few seconds"),"long"),r.format!=="svg"&&nm.isIE()&&(nm.notifier(Ea(e,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(i){i in t&&(r[i]=t[i])}),ru.call("downloadImage",e,r).then(function(i){nm.notifier(Ea(e,"Snapshot succeeded")+" - "+i,"long")}).catch(function(){nm.notifier(Ea(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};Za.sendDataToCloud={name:"sendDataToCloud",title:function(e){return Ea(e,"Edit in Chart Studio")},icon:Ga.disk,click:function(e){Tz.sendDataToCloud(e)}};Za.editInChartStudio={name:"editInChartStudio",title:function(e){return Ea(e,"Edit in Chart Studio")},icon:Ga.pencil,click:function(e){Tz.sendDataToCloud(e)}};Za.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return Ea(e,"Zoom")},attr:"dragmode",val:"zoom",icon:Ga.zoombox,click:ss};Za.pan2d={name:"pan2d",_cat:"pan",title:function(e){return Ea(e,"Pan")},attr:"dragmode",val:"pan",icon:Ga.pan,click:ss};Za.select2d={name:"select2d",_cat:"select",title:function(e){return Ea(e,"Box Select")},attr:"dragmode",val:"select",icon:Ga.selectbox,click:ss};Za.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return Ea(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:Ga.lasso,click:ss};Za.drawclosedpath={name:"drawclosedpath",title:function(e){return Ea(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:Ga.drawclosedpath,click:ss};Za.drawopenpath={name:"drawopenpath",title:function(e){return Ea(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:Ga.drawopenpath,click:ss};Za.drawline={name:"drawline",title:function(e){return Ea(e,"Draw line")},attr:"dragmode",val:"drawline",icon:Ga.drawline,click:ss};Za.drawrect={name:"drawrect",title:function(e){return Ea(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:Ga.drawrect,click:ss};Za.drawcircle={name:"drawcircle",title:function(e){return Ea(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:Ga.drawcircle,click:ss};Za.eraseshape={name:"eraseshape",title:function(e){return Ea(e,"Erase active shape")},icon:Ga.eraseshape,click:vne};Za.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return Ea(e,"Zoom in")},attr:"zoom",val:"in",icon:Ga.zoom_plus,click:ss};Za.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return Ea(e,"Zoom out")},attr:"zoom",val:"out",icon:Ga.zoom_minus,click:ss};Za.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return Ea(e,"Autoscale")},attr:"zoom",val:"auto",icon:Ga.autoscale,click:ss};Za.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return Ea(e,"Reset axes")},attr:"zoom",val:"reset",icon:Ga.home,click:ss};Za.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return Ea(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:Ga.tooltip_basic,gravity:"ne",click:ss};Za.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return Ea(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:Ga.tooltip_compare,gravity:"ne",click:ss};function ss(e,t){var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout,l={},u=Az.list(e,null,!0),c=s._cartesianSpikesEnabled,v,m;if(i==="zoom"){var _=a==="in"?.5:2,T=(1+_)/2,M=(1-_)/2,k;for(m=0;m<u.length;m++)if(v=u[m],!v.fixedrange)if(k=v._name,a==="auto")l[k+".autorange"]=!0;else if(a==="reset")v._rangeInitial0===void 0&&v._rangeInitial1===void 0?l[k+".autorange"]=!0:v._rangeInitial0===void 0?(l[k+".autorange"]=v._autorangeInitial,l[k+".range"]=[null,v._rangeInitial1]):v._rangeInitial1===void 0?(l[k+".range"]=[v._rangeInitial0,null],l[k+".autorange"]=v._autorangeInitial):l[k+".range"]=[v._rangeInitial0,v._rangeInitial1],v._showSpikeInitial!==void 0&&(l[k+".showspikes"]=v._showSpikeInitial,c==="on"&&!v._showSpikeInitial&&(c="off"));else{var L=[v.r2l(v.range[0]),v.r2l(v.range[1])],E=[T*L[0]+M*L[1],T*L[1]+M*L[0]];l[k+".range[0]"]=v.l2r(E[0]),l[k+".range[1]"]=v.l2r(E[1])}}else i==="hovermode"&&(a==="x"||a==="y")&&(a=s._isHoriz?"y":"x",r.setAttribute("data-val",a)),l[i]=a;s._cartesianSpikesEnabled=c,ru.call("_guiRelayout",e,l)}Za.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return Ea(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:Ga.zoombox,click:gx};Za.pan3d={name:"pan3d",_cat:"pan",title:function(e){return Ea(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:Ga.pan,click:gx};Za.orbitRotation={name:"orbitRotation",title:function(e){return Ea(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:Ga["3d_rotate"],click:gx};Za.tableRotation={name:"tableRotation",title:function(e){return Ea(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:Ga["z-axis"],click:gx};function gx(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout._subplots.gl3d||[],l={},u=i.split("."),c=0;c<s.length;c++)l[s[c]+"."+u[1]]=a;var v=a==="pan"?a:"zoom";l.dragmode=v,ru.call("_guiRelayout",e,l)}Za.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return Ea(e,"Reset camera to default")},attr:"resetDefault",icon:Ga.home,click:X4};Za.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return Ea(e,"Reset camera to last save")},attr:"resetLastSave",icon:Ga.movie,click:X4};function X4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=i==="resetLastSave",s=i==="resetDefault",l=e._fullLayout,u=l._subplots.gl3d||[],c={},v=0;v<u.length;v++){var m=u[v],_=m+".camera",T=m+".aspectratio",M=m+".aspectmode",k=l[m]._scene,L;a?(c[_+".up"]=k.viewInitial.up,c[_+".eye"]=k.viewInitial.eye,c[_+".center"]=k.viewInitial.center,L=!0):s&&(c[_+".up"]=null,c[_+".eye"]=null,c[_+".center"]=null,L=!0),L&&(c[T+".x"]=k.viewInitial.aspectratio.x,c[T+".y"]=k.viewInitial.aspectratio.y,c[T+".z"]=k.viewInitial.aspectratio.z,c[M]=k.viewInitial.aspectmode)}ru.call("_guiRelayout",e,c)}Za.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return Ea(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ga.tooltip_basic,gravity:"ne",click:dne};function Mz(e,t){var r=t.currentTarget,i=r._previousVal,a=e._fullLayout,s=a._subplots.gl3d||[],l=["xaxis","yaxis","zaxis"],u={},c={};if(i)c=i,r._previousVal=null;else{for(var v=0;v<s.length;v++){var m=s[v],_=a[m],T=m+".hovermode";u[T]=_.hovermode,c[T]=!1;for(var M=0;M<3;M++){var k=l[M],L=m+"."+k+".showspikes";c[L]=!1,u[L]=_[k].showspikes}}r._previousVal=u}return c}function dne(e,t){var r=Mz(e,t);ru.call("_guiRelayout",e,r)}Za.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return Ea(e,"Zoom in")},attr:"zoom",val:"in",icon:Ga.zoom_plus,click:j4};Za.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return Ea(e,"Zoom out")},attr:"zoom",val:"out",icon:Ga.zoom_minus,click:j4};Za.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return Ea(e,"Reset")},attr:"reset",val:null,icon:Ga.autoscale,click:j4};Za.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return Ea(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ga.tooltip_basic,gravity:"ne",click:J4};function j4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout,l=s._subplots.geo||[],u=0;u<l.length;u++){var c=l[u],v=s[c];if(i==="zoom"){var m=v.projection.scale,_=a==="in"?2*m:.5*m;ru.call("_guiRelayout",e,c+".projection.scale",_)}}i==="reset"&&om(e,"geo")}Za.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return Ea(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ga.tooltip_basic,gravity:"ne",click:J4};Za.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return Ea(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:Ga.tooltip_basic,gravity:"ne",click:J4};function Sz(e){var t=e._fullLayout;return t.hovermode?!1:t._has("cartesian")?t._isHoriz?"y":"x":"closest"}function J4(e){var t=Sz(e);ru.call("_guiRelayout",e,"hovermode",t)}Za.resetViewSankey={name:"resetSankeyGroup",title:function(e){return Ea(e,"Reset view")},icon:Ga.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<e._fullData.length;r++){var i=e._fullData[r]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}ru.call("restyle",e,t)}};Za.toggleHover={name:"toggleHover",title:function(e){return Ea(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ga.tooltip_basic,gravity:"ne",click:function(e,t){var r=Mz(e,t);r.hovermode=Sz(e),ru.call("_guiRelayout",e,r)}};Za.resetViews={name:"resetViews",title:function(e){return Ea(e,"Reset views")},icon:Ga.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),ss(e,t),r.setAttribute("data-attr","resetLastSave"),X4(e,t),om(e,"geo"),om(e,"mapbox"),om(e,"map")}};Za.toggleSpikelines={name:"toggleSpikelines",title:function(e){return Ea(e,"Toggle Spike Lines")},icon:Ga.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on",ru.call("_guiRelayout",e,pne(e))}};function pne(e){for(var t=e._fullLayout,r=t._cartesianSpikesEnabled==="on",i=Az.list(e,null,!0),a={},s=0;s<i.length;s++){var l=i[s];a[l._name+".showspikes"]=r?!0:l._showSpikeInitial}return a}Za.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return Ea(e,"Reset view")},attr:"reset",icon:Ga.home,click:function(e){om(e,"mapbox")}};Za.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(e){return Ea(e,"Reset view")},attr:"reset",icon:Ga.home,click:function(e){om(e,"map")}};Za.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return Ea(e,"Zoom in")},attr:"zoom",val:"in",icon:Ga.zoom_plus,click:kz};Za.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(e){return Ea(e,"Zoom in")},attr:"zoom",val:"in",icon:Ga.zoom_plus,click:Cz};Za.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return Ea(e,"Zoom out")},attr:"zoom",val:"out",icon:Ga.zoom_minus,click:kz};Za.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(e){return Ea(e,"Zoom out")},attr:"zoom",val:"out",icon:Ga.zoom_minus,click:Cz};function kz(e,t){Ez(e,t,"mapbox")}function Cz(e,t){Ez(e,t,"map")}function Ez(e,t,r){for(var i=t.currentTarget,a=i.getAttribute("data-val"),s=e._fullLayout,l=s._subplots[r]||[],u=1.05,c={},v=0;v<l.length;v++){var m=l[v],_=s[m].zoom,T=a==="in"?u*_:_/u;c[m+".zoom"]=T}ru.call("_guiRelayout",e,c)}function om(e,t){for(var r=e._fullLayout,i=r._subplots[t]||[],a={},s=0;s<i.length;s++)for(var l=i[s],u=r[l]._subplot,c=u.viewInitial,v=Object.keys(c),m=0;m<v.length;m++){var _=v[m];a[l+"."+_]=c[_]}ru.call("_guiRelayout",e,a)}});var Q4=he((l2e,Iz)=>{"use strict";var Pz=K4(),mne=Object.keys(Pz),Dz=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],zz=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(Dz),sm=[],yne=function(e){if(zz.indexOf(e._cat||e.name)===-1){var t=e.name,r=(e._cat||e.name).toLowerCase();sm.indexOf(t)===-1&&sm.push(t),sm.indexOf(r)===-1&&sm.push(r)}};mne.forEach(function(e){yne(Pz[e])});sm.sort();Iz.exports={DRAW_MODES:Dz,backButtons:zz,foreButtons:sm}});var $4=he((f2e,Rz)=>{"use strict";var u2e=Q4();Rz.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}});var qz=he((c2e,Fz)=>{"use strict";var gne=Nt(),Ag=Ua(),_ne=Di(),xne=$4();Fz.exports=function(t,r){var i=t.modebar||{},a=_ne.newContainer(r,"modebar");function s(u,c){return gne.coerce(i,a,xne,u,c)}s("orientation"),s("bgcolor",Ag.addOpacity(r.paper_bgcolor,.5));var l=Ag.contrast(Ag.rgb(r.modebar.bgcolor));s("color",Ag.addOpacity(l,.3)),s("activecolor",Ag.addOpacity(l,.7)),s("uirevision",r.uirevision),s("add"),s("remove")}});var Uz=he((h2e,Oz)=>{"use strict";var e6=Ka(),bne=Ia(),Ec=Nt(),Nz=rx(),wne=s_().version,Tne=new DOMParser;function Bz(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var Of=Bz.prototype;Of.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context,i=this.graphInfo._fullLayout,a="modebar-"+i._uid;this.element.setAttribute("id",a),this._uid=a,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",t=t.reverse());var s=i.modebar,l=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";Ec.deleteRelatedStyleRule(a),Ec.addRelatedStyleRule(a,l+"#"+a+" .modebar-group","background-color: "+s.bgcolor),Ec.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+s.color),Ec.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+s.activecolor),Ec.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+s.activecolor);var u=!this.hasButtons(t),c=this.hasLogo!==r.displaylogo,v=this.locale!==r.locale;if(this.locale=r.locale,(u||c||v)&&(this.removeAllButtons(),this.updateButtons(t),r.watermark||r.displaylogo)){var m=this.getLogo();r.watermark&&(m.className=m.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(m,this.element.childNodes[0]):this.element.appendChild(m),this.hasLogo=!0}this.updateActiveButton()};Of.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=t.createGroup();r.forEach(function(a){var s=a.name;if(!s)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(s)!==-1)throw new Error("button name '"+s+"' is taken");t.buttonsNames.push(s);var l=t.createButton(a);t.buttonElements.push(l),i.appendChild(l)}),t.element.appendChild(i)})};Of.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e};Of.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var i=e.title;i===void 0?i=e.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&r.setAttribute("data-title",i),e.attr!==void 0&&r.setAttribute("data-attr",e.attr);var a=e.val;a!==void 0&&(typeof a=="function"&&(a=a(this.graphInfo)),r.setAttribute("data-val",a));var s=e.click;if(typeof s!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(u){e.click(t.graphInfo,u),t.updateActiveButton(u.currentTarget)}),r.setAttribute("data-toggle",e.toggle||!1),e.toggle&&e6.select(r).classed("active",!0);var l=e.icon;return typeof l=="function"?r.appendChild(l()):r.appendChild(this.createIcon(l||Nz.question)),r.setAttribute("data-gravity",e.gravity||"n"),r};Of.createIcon=function(e){var t=bne(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",i;if(e.path){i=document.createElementNS(r,"svg"),i.setAttribute("viewBox",[0,0,e.width,t].join(" ")),i.setAttribute("class","icon");var a=document.createElementNS(r,"path");a.setAttribute("d",e.path),e.transform?a.setAttribute("transform",e.transform):e.ascent!==void 0&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),i.appendChild(a)}if(e.svg){var s=Tne.parseFromString(e.svg,"application/xml");i=s.childNodes[0]}return i.setAttribute("height","1em"),i.setAttribute("width","1em"),i};Of.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==void 0?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var a=i.getAttribute("data-val")||!0,s=i.getAttribute("data-attr"),l=i.getAttribute("data-toggle")==="true",u=e6.select(i);if(l)s===r&&u.classed("active",!u.classed("active"));else{var c=s===null?s:Ec.nestedProperty(t,s).get();u.classed("active",c===a)}})};Of.hasButtons=function(e){var t=this.buttons;if(!t||e.length!==t.length)return!1;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return!1;for(var i=0;i<e[r].length;i++)if(e[r][i].name!==t[r][i].name)return!1}return!0};function Ane(e){return e+" (v"+wne+")"}Of.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",Ane(Ec._(this.graphInfo,"Produced with Plotly.js"))),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(Nz.newplotlylogo)),e.appendChild(t),e};Of.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};Of.destroy=function(){Ec.removeElement(this.container.querySelector(".modebar")),Ec.deleteRelatedStyleRule(this._uid)};function Mne(e,t){var r=e._fullLayout,i=new Bz({graphInfo:e,container:r._modebardiv.node(),buttons:t});return r._privateplot&&e6.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}Oz.exports=Mne});var Gz=he((v2e,Hz)=>{"use strict";var Sne=ro(),Vz=is(),t6=sa(),kne=Ac().isUnifiedHover,Cne=Uz(),_x=K4(),Ene=Q4().DRAW_MODES,Lne=Nt().extendDeep;Hz.exports=function(t){var r=t._fullLayout,i=t._context,a=r._modeBar;if(!i.displayModeBar&&!i.watermark){a&&(a.destroy(),delete r._modeBar);return}if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s=i.modeBarButtons,l;Array.isArray(s)&&s.length?l=Fne(s):!i.displayModeBar&&i.watermark?l=[]:l=Pne(t),a?a.update(t,l):r._modeBar=Cne(t,l)};function Pne(e){var t=e._fullLayout,r=e._fullData,i=e._context;function a(Te,Ae){if(typeof Ae=="string"){if(Ae.toLowerCase()===Te.toLowerCase())return!0}else{var Le=Ae.name,Ke=Ae._cat||Ae.name;if(Le===Te||Ke===Te.toLowerCase())return!0}return!1}var s=t.modebar.add;typeof s=="string"&&(s=[s]);var l=t.modebar.remove;typeof l=="string"&&(l=[l]);var u=i.modeBarButtonsToAdd.concat(s.filter(function(Te){for(var Ae=0;Ae<i.modeBarButtonsToRemove.length;Ae++)if(a(Te,i.modeBarButtonsToRemove[Ae]))return!1;return!0})),c=i.modeBarButtonsToRemove.concat(l.filter(function(Te){for(var Ae=0;Ae<i.modeBarButtonsToAdd.length;Ae++)if(a(Te,i.modeBarButtonsToAdd[Ae]))return!1;return!0})),v=t._has("cartesian"),m=t._has("gl3d"),_=t._has("geo"),T=t._has("pie"),M=t._has("funnelarea"),k=t._has("gl2d"),L=t._has("ternary"),E=t._has("mapbox"),I=t._has("map"),R=t._has("polar"),N=t._has("smith"),z=t._has("sankey"),B=Dne(t),H=kne(t.hovermode),V=[];function Y(Te){if(Te.length){for(var Ae=[],Le=0;Le<Te.length;Le++){for(var Ke=Te[Le],ct=_x[Ke],it=ct.name.toLowerCase(),ut=(ct._cat||ct.name).toLowerCase(),Ge=!1,xt=0;xt<c.length;xt++){var at=c[xt].toLowerCase();if(at===it||at===ut){Ge=!0;break}}Ge||Ae.push(_x[Ke])}V.push(Ae)}}var J=["toImage"];i.showEditInChartStudio?J.push("editInChartStudio"):i.showSendToCloud&&J.push("sendDataToCloud"),Y(J);var re=[],ne=[],oe=[],ue=[];(v||k||T||M||L)+_+m+E+I+R+N>1?(ne=["toggleHover"],oe=["resetViews"]):_?(re=["zoomInGeo","zoomOutGeo"],ne=["hoverClosestGeo"],oe=["resetGeo"]):m?(ne=["hoverClosest3d"],oe=["resetCameraDefault3d","resetCameraLastSave3d"]):E?(re=["zoomInMapbox","zoomOutMapbox"],ne=["toggleHover"],oe=["resetViewMapbox"]):I?(re=["zoomInMap","zoomOutMap"],ne=["toggleHover"],oe=["resetViewMap"]):k?ne=["hoverClosestGl2d"]:T?ne=["hoverClosestPie"]:z?(ne=["hoverClosestCartesian","hoverCompareCartesian"],oe=["resetViewSankey"]):ne=["toggleHover"],v&&ne.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(Ine(r)||H)&&(ne=[]),(v||k)&&!B&&(re=["zoomIn2d","zoomOut2d","autoScale2d"],oe[0]!=="resetViews"&&(oe=["resetScale2d"])),m?ue=["zoom3d","pan3d","orbitRotation","tableRotation"]:(v||k)&&!B||L?ue=["zoom2d","pan2d"]:E||I||_?ue=["pan2d"]:R&&(ue=["zoom2d"]),zne(r)&&ue.push("select2d","lasso2d");var me=[],Se=function(Te){me.indexOf(Te)===-1&&ne.indexOf(Te)!==-1&&me.push(Te)};if(Array.isArray(u)){for(var Ce=[],Me=0;Me<u.length;Me++){var _e=u[Me];typeof _e=="string"?(_e=_e.toLowerCase(),Ene.indexOf(_e)!==-1?(t._has("mapbox")||t._has("map")||t._has("cartesian"))&&ue.push(_e):_e==="togglespikelines"?Se("toggleSpikelines"):_e==="togglehover"?Se("toggleHover"):_e==="hovercompare"?Se("hoverCompareCartesian"):_e==="hoverclosest"?(Se("hoverClosestCartesian"),Se("hoverClosestGeo"),Se("hoverClosest3d"),Se("hoverClosestGl2d"),Se("hoverClosestPie")):_e==="v1hovermode"&&(Se("hoverClosestCartesian"),Se("hoverCompareCartesian"),Se("hoverClosestGeo"),Se("hoverClosest3d"),Se("hoverClosestGl2d"),Se("hoverClosestPie"))):Ce.push(_e)}u=Ce}return Y(ue),Y(re.concat(oe)),Y(me),Rne(V,u)}function Dne(e){for(var t=Sne.list({_fullLayout:e},null,!0),r=0;r<t.length;r++)if(!t[r].fixedrange)return!1;return!0}function zne(e){for(var t=!1,r=0;r<e.length&&!t;r++){var i=e[r];!i._module||!i._module.selectPoints||(t6.traceIs(i,"scatter-like")?(Vz.hasMarkers(i)||Vz.hasText(i))&&(t=!0):t6.traceIs(i,"box-violin")?(i.boxpoints==="all"||i.points==="all")&&(t=!0):t=!0)}return t}function Ine(e){for(var t=0;t<e.length;t++)if(!t6.traceIs(e[t],"noHover"))return!1;return!0}function Rne(e,t){if(t.length)if(Array.isArray(t[0]))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e}function Fne(e){for(var t=Lne([],e),r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.length;a++){var s=i[a];if(typeof s=="string")if(_x[s]!==void 0)t[r][a]=_x[s];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return t}});var r6=he((d2e,Zz)=>{"use strict";Zz.exports={moduleType:"component",name:"modebar",layoutAttributes:$4(),supplyLayoutDefaults:qz(),manage:Gz()}});var a6=he((p2e,Yz)=>{"use strict";var qne=as().FROM_BL;Yz.exports=function(t,r,i){i===void 0&&(i=qne[t.constraintoward||"center"]);var a=[t.r2l(t.range[0]),t.r2l(t.range[1])],s=a[0]+(a[1]-a[0])*i;t.range=t._input.range=[t.l2r(s+(a[0]-s)*r),t.l2r(s+(a[1]-s)*r)],t.setScale()}});var Sg=he(Mg=>{"use strict";var Ud=Nt(),i6=cg(),Vu=ro().id2name,Nne=Bu(),Wz=a6(),Bne=A2(),One=Bi().ALMOST_EQUAL,Une=as().FROM_BL;Mg.handleDefaults=function(e,t,r){var i=r.axIds,a=r.axHasImage,s=t._axisConstraintGroups=[],l=t._axisMatchGroups=[],u,c,v,m,_,T,M,k;for(u=0;u<i.length;u++)m=Vu(i[u]),_=e[m],T=t[m],Vne(_,T,{axIds:i,layoutOut:t,hasImage:a[m]});function L(Y,J){for(u=0;u<Y.length;u++){c=Y[u];for(v in c)t[Vu(v)][J]=c}}for(L(l,"_matchGroup"),u=0;u<s.length;u++){c=s[u];for(v in c)if(T=t[Vu(v)],T.fixedrange){for(var E in c){var I=Vu(E);(e[I]||{}).fixedrange===!1&&Ud.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),t[I].fixedrange=!0}break}}for(u=0;u<s.length;){c=s[u];for(v in c){T=t[Vu(v)],T._matchGroup&&Object.keys(T._matchGroup).length===Object.keys(c).length&&(s.splice(u,1),u--);break}u++}L(s,"_constraintGroup");var R=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],N=!1,z=!1;function B(){k=T[M],M==="rangebreaks"&&(z=T._hasDayOfWeekBreaks)}for(u=0;u<l.length;u++){c=l[u];for(var H=0;H<R.length;H++){M=R[H],k=null;var V;for(v in c)if(m=Vu(v),_=e[m],T=t[m],M in T){if(!T.matches&&(V=T,M in _)){B();break}k===null&&M in _&&B()}if(M==="range"&&k&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(N=!0),M==="autorange"&&k===null&&N&&(k=!1),k===null&&M in V&&(k=V[M]),k!==null)for(v in c)T=t[Vu(v)],T[M]=M==="range"?k.slice():k,M==="rangebreaks"&&(T._hasDayOfWeekBreaks=z,Bne(T,t))}}};function Vne(e,t,r){var i=r.axIds,a=r.layoutOut,s=r.hasImage,l=a._axisConstraintGroups,u=a._axisMatchGroups,c=t._id,v=c.charAt(0),m=((a._splomAxes||{})[v]||{})[c]||{},_=t._id,T=_.charAt(0)==="x";t._matchGroup=null,t._constraintGroup=null;function M(oe,ue){return Ud.coerce(e,t,Nne,oe,ue)}M("constrain",s?"domain":"range"),Ud.coerce(e,t,{constraintoward:{valType:"enumerated",values:T?["left","center","right"]:["bottom","middle","top"],dflt:T?"center":"middle"}},"constraintoward");var k=t.type,L,E,I=[];for(L=0;L<i.length;L++)if(E=i[L],E!==_){var R=a[Vu(E)];R.type===k&&I.push(E)}var N=Jz(l,_);if(N){var z=[];for(L=0;L<I.length;L++)E=I[L],N[E]||z.push(E);I=z}var B=I.length,H,V;B&&(e.matches||m.matches)&&(H=Ud.coerce(e,t,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(m.matches)!==-1?m.matches:void 0}},"matches"));var Y=s&&!T?t.anchor:void 0;if(B&&!H&&(e.scaleanchor||Y)&&(V=Ud.coerce(e,t,{scaleanchor:{valType:"enumerated",values:I.concat([!1])}},"scaleanchor",Y)),H){t._matchGroup=n6(u,_,H,1);var J=a[Vu(H)],re=Xz(a,t)/Xz(a,J);T!==(H.charAt(0)==="x")&&(re=(T?"x":"y")+re),n6(l,_,H,re)}else e.matches&&i.indexOf(e.matches)!==-1&&Ud.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(V){var ne=M("scaleratio");ne||(ne=t.scaleratio=1),n6(l,_,V,ne)}else e.scaleanchor&&i.indexOf(e.scaleanchor)!==-1&&Ud.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function Xz(e,t){var r=t.domain;return r||(r=e[Vu(t.overlaying)].domain),r[1]-r[0]}function Jz(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function n6(e,t,r,i){var a,s,l,u,c,v=Jz(e,t);v===null?(v={},v[t]=1,c=e.length,e.push(v)):c=e.indexOf(v);var m=Object.keys(v);for(a=0;a<e.length;a++)if(l=e[a],a!==c&&l[r]){var _=l[r];for(s=0;s<m.length;s++)u=m[s],l[u]=o6(_,o6(i,v[u]));e.splice(c,1);return}if(i!==1)for(s=0;s<m.length;s++){var T=m[s];v[T]=o6(i,v[T])}v[r]=1}function o6(e,t){var r="",i="",a,s;typeof e=="string"&&(r=e.match(/^[xy]*/)[0],a=r.length,e=+e.substr(a)),typeof t=="string"&&(i=t.match(/^[xy]*/)[0],s=i.length,t=+t.substr(s));var l=e*t;return!a&&!s?l:!a||!s||r.charAt(0)===i.charAt(0)?r+i+e*t:a===s?l:(a>s?r.substr(s):i.substr(a))+l}function Hne(e,t){for(var r=t._size,i=r.h/r.w,a={},s=Object.keys(e),l=0;l<s.length;l++){var u=s[l],c=e[u];if(typeof c=="string"){var v=c.match(/^[xy]*/)[0],m=v.length;c=+c.substr(m);for(var _=v.charAt(0)==="y"?i:1/i,T=0;T<m;T++)c*=_}a[u]=c}return a}Mg.enforce=function(t){var r=t._fullLayout,i=r._axisConstraintGroups||[],a,s,l,u,c,v,m,_;for(a=0;a<i.length;a++){l=Hne(i[a],r);var T=Object.keys(l),M=1/0,k=0,L=1/0,E={},I={},R=!1;for(s=0;s<T.length;s++)u=T[s],I[u]=c=r[Vu(u)],c._inputDomain?c.domain=c._inputDomain.slice():c._inputDomain=c.domain.slice(),c._inputRange||(c._inputRange=c.range.slice()),c.setScale(),E[u]=v=Math.abs(c._m)/l[u],M=Math.min(M,v),(c.constrain==="domain"||!c._constraintShrinkable)&&(L=Math.min(L,v)),delete c._constraintShrinkable,k=Math.max(k,v),c.constrain==="domain"&&(R=!0);if(!(M>One*k&&!R)){for(s=0;s<T.length;s++)if(u=T[s],v=E[u],c=I[u],m=c.constrain,v!==L||m==="domain")if(_=v/L,m==="range")Wz(c,_);else{var N=c._inputDomain,z=(c.domain[1]-c.domain[0])/(N[1]-N[0]),B=(c.r2l(c.range[1])-c.r2l(c.range[0]))/(c.r2l(c._inputRange[1])-c.r2l(c._inputRange[0]));if(_/=z,_*B<1){c.domain=c._input.domain=N.slice(),Wz(c,_);continue}if(B<1&&(c.range=c._input.range=c._inputRange.slice(),_*=B),c.autorange){var H=c.r2l(c.range[0]),V=c.r2l(c.range[1]),Y=(H+V)/2,J=Y,re=Y,ne=Math.abs(V-Y),oe=Y-ne*_*1.0001,ue=Y+ne*_*1.0001,me=i6.makePadFn(r,c,0),Se=i6.makePadFn(r,c,1);jz(c,_);var Ce=Math.abs(c._m),Me=i6.concatExtremes(t,c),_e=Me.min,Te=Me.max,Ae,Le;for(Le=0;Le<_e.length;Le++)Ae=_e[Le].val-me(_e[Le])/Ce,Ae>oe&&Ae<J&&(J=Ae);for(Le=0;Le<Te.length;Le++)Ae=Te[Le].val+Se(Te[Le])/Ce,Ae<ue&&Ae>re&&(re=Ae);var Ke=(re-J)/(2*ne);_/=Ke,J=c.l2r(J),re=c.l2r(re),c.range=c._input.range=H<V?[J,re]:[re,J]}jz(c,_)}}}};Mg.getAxisGroup=function(t,r){for(var i=t._axisMatchGroups,a=0;a<i.length;a++){var s=i[a];if(s[r])return"g"+a}return r};Mg.clean=function(t,r){if(r._inputDomain){for(var i=!1,a=r._id,s=t._fullLayout._axisConstraintGroups,l=0;l<s.length;l++)if(s[l][a]){i=!0;break}(!i||r.constrain!=="domain")&&(r._input.domain=r.domain=r._inputDomain,delete r._inputDomain)}};function jz(e,t){var r=e._inputDomain,i=Une[e.constraintoward],a=r[0]+(r[1]-r[0])*i;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t],e.setScale()}});var wx=he(no=>{"use strict";var bx=Ka(),ls=sa(),dl=jn(),au=Nt(),s6=ho(),l6=tx(),kg=Ua(),lm=_i(),Kz=ug(),rI=r6(),Cg=Ii(),Lc=as(),aI=Sg(),Gne=aI.enforce,Zne=aI.clean,Qz=cg().doAutoRange,iI="start",Yne="middle",nI="end",Wne=Mo().zindexSeparator;no.layoutStyles=function(e){return au.syncOrAsync([dl.doAutoMargin,jne],e)};function Xne(e,t,r){for(var i=0;i<r.length;i++){var a=r[i][0],s=r[i][1];if(!(a[0]>=e[1]||a[1]<=e[0])&&s[0]<t[1]&&s[1]>t[0])return!0}return!1}function jne(e){var t=e._fullLayout,r=t._size,i=r.p,a=Cg.list(e,"",!0),s,l,u,c,v,m;if(t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(lm.setSize,t.width,t.height),e._context.setBackground(e,t.paper_bgcolor),no.drawMainTitle(e),rI.manage(e),!t._has("cartesian"))return dl.previousPromises(e);function _(mt,ye,Re){var xe=mt._lw/2;if(mt._id.charAt(0)==="x"){if(ye){if(Re==="top")return ye._offset-i-xe}else return r.t+r.h*(1-(mt.position||0))+xe%1;return ye._offset+ye._length+i+xe}if(ye){if(Re==="right")return ye._offset+ye._length+i+xe}else return r.l+r.w*(mt.position||0)+xe%1;return ye._offset-i-xe}for(s=0;s<a.length;s++){c=a[s];var T=c._anchorAxis;c._linepositions={},c._lw=lm.crispRound(e,c.linewidth,1),c._mainLinePosition=_(c,T,c.side),c._mainMirrorPosition=c.mirror&&T?_(c,T,Lc.OPPOSITE_SIDE[c.side]):null}var M=[],k=[],L=[],E=kg.opacity(t.paper_bgcolor)===1&&kg.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(l in t._plots)if(u=t._plots[l],u.mainplot)u.bg&&u.bg.remove(),u.bg=void 0;else{var I=u.xaxis.domain,R=u.yaxis.domain,N=u.plotgroup;if(Xne(I,R,L)&&l.indexOf(Wne)===-1){var z=N.node(),B=u.bg=au.ensureSingle(N,"rect","bg");z.insertBefore(B.node(),z.childNodes[0]),k.push(l)}else N.select("rect.bg").remove(),L.push([I,R]),E||(M.push(l),k.push(l))}var H=t._bgLayer.selectAll(".bg").data(M);for(H.enter().append("rect").classed("bg",!0),H.exit().remove(),H.each(function(mt){t._plots[mt].bg=bx.select(this)}),s=0;s<k.length;s++)u=t._plots[k[s]],v=u.xaxis,m=u.yaxis,u.bg&&v._offset!==void 0&&m._offset!==void 0&&u.bg.call(lm.setRect,v._offset-i,m._offset-i,v._length+2*i,m._length+2*i).call(kg.fill,t.plot_bgcolor).style("stroke-width",0);if(!t._hasOnlyLargeSploms)for(l in t._plots){u=t._plots[l],v=u.xaxis,m=u.yaxis;var V=u.clipId="clip"+t._uid+l+"plot",Y=au.ensureSingleById(t._clips,"clipPath",V,function(mt){mt.classed("plotclip",!0).append("rect")});u.clipRect=Y.select("rect").attr({width:v._length,height:m._length}),lm.setTranslate(u.plot,v._offset,m._offset);var J,re;u._hasClipOnAxisFalse?(J=null,re=V):(J=V,re=null),lm.setClipUrl(u.plot,J,e),u.layerClipId=re}var ne,oe,ue,me,Se,Ce,Me,_e,Te,Ae,Le,Ke,ct;function it(mt){return"M"+ne+","+mt+"H"+oe}function ut(mt){return"M"+v._offset+","+mt+"h"+v._length}function Ge(mt){return"M"+mt+","+_e+"V"+Me}function xt(mt){return m._shift!==void 0&&(mt+=m._shift),"M"+mt+","+m._offset+"v"+m._length}function at(mt,ye,Re){if(!mt.showline||l!==mt._mainSubplot)return"";if(!mt._anchorAxis)return Re(mt._mainLinePosition);var xe=ye(mt._mainLinePosition);return mt.mirror&&(xe+=ye(mt._mainMirrorPosition)),xe}for(l in t._plots){u=t._plots[l],v=u.xaxis,m=u.yaxis;var At="M0,0";$z(v,l)&&(Se=xx(v,"left",m,a),ne=v._offset-(Se?i+Se:0),Ce=xx(v,"right",m,a),oe=v._offset+v._length+(Ce?i+Ce:0),ue=_(v,m,"bottom"),me=_(v,m,"top"),ct=!v._anchorAxis||l!==v._mainSubplot,ct&&(v.mirror==="allticks"||v.mirror==="all")&&(v._linepositions[l]=[ue,me]),At=at(v,it,ut),ct&&v.showline&&(v.mirror==="all"||v.mirror==="allticks")&&(At+=it(ue)+it(me)),u.xlines.style("stroke-width",v._lw+"px").call(kg.stroke,v.showline?v.linecolor:"rgba(0,0,0,0)")),u.xlines.attr("d",At);var kt="M0,0";$z(m,l)&&(Le=xx(m,"bottom",v,a),Me=m._offset+m._length+(Le?i:0),Ke=xx(m,"top",v,a),_e=m._offset-(Ke?i:0),Te=_(m,v,"left"),Ae=_(m,v,"right"),ct=!m._anchorAxis||l!==m._mainSubplot,ct&&(m.mirror==="allticks"||m.mirror==="all")&&(m._linepositions[l]=[Te,Ae]),kt=at(m,Ge,xt),ct&&m.showline&&(m.mirror==="all"||m.mirror==="allticks")&&(kt+=Ge(Te)+Ge(Ae)),u.ylines.style("stroke-width",m._lw+"px").call(kg.stroke,m.showline?m.linecolor:"rgba(0,0,0,0)")),u.ylines.attr("d",kt)}return Cg.makeClipPaths(e),dl.previousPromises(e)}function $z(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function eI(e,t,r){if(!r.showline||!r._lw)return!1;if(r.mirror==="all"||r.mirror==="allticks")return!0;var i=r._anchorAxis;if(!i)return!1;var a=Lc.FROM_BL[t];return r.side===t?i.domain[a]===e.domain[a]:r.mirror&&i.domain[1-a]===e.domain[1-a]}function xx(e,t,r,i){if(eI(e,t,r))return r._lw;for(var a=0;a<i.length;a++){var s=i[a];if(s._mainAxis===r._mainAxis&&eI(e,t,s))return s._lw}return 0}no.drawMainTitle=function(e){var t=e._fullLayout.title,r=e._fullLayout,i=roe(r),a=aoe(r),s=toe(r,a),l=eoe(r,i);if(Kz.draw(e,"gtitle",{propContainer:r,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:r._dfltTitle.plot,subtitlePlaceholder:r._dfltTitle.subtitle,attributes:{x:l,y:s,"text-anchor":i,dy:a}}),t.text&&t.automargin){var u=bx.selectAll(".gtitle"),c=lm.bBox(bx.selectAll(".g-gtitle").node()).height,v=Qne(e,t,c);if(v>0){$ne(e,s,v,c),u.attr({x:l,y:s,"text-anchor":i,dy:tI(t.yanchor)}).call(s6.positionText,l,s);var m=(t.text.match(s6.BR_TAG_ALL)||[]).length;if(m){var _=Lc.LINE_SPACING*m+Lc.MID_SHIFT;t.y===0&&(_=-_),u.selectAll(".line").each(function(){var E=+this.getAttribute("dy").slice(0,-2)-_+"em";this.setAttribute("dy",E)})}var T=bx.selectAll(".gtitle-subtitle");if(T.node()){var M=u.node().getBBox(),k=M.y+M.height,L=k+Kz.SUBTITLE_PADDING_EM*t.subtitle.font.size;T.attr({x:l,y:L,"text-anchor":i,dy:tI(t.yanchor)}).call(s6.positionText,l,L)}}}};function Jne(e,t,r,i,a){var s=t.yref==="paper"?e._fullLayout._size.h:e._fullLayout.height,l=au.isTopAnchor(t)?i:i-a,u=r==="b"?s-l:l;return au.isTopAnchor(t)&&r==="t"||au.isBottomAnchor(t)&&r==="b"?!1:u<a}function Kne(e,t,r,i,a){var s=0;return r==="middle"&&(s+=a/2),e==="t"?(r==="top"&&(s+=a),s+=i-t*i):(r==="bottom"&&(s+=a),s+=t*i),s}function Qne(e,t,r){var i=t.y,a=t.yanchor,s=i>.5?"t":"b",l=e._fullLayout.margin[s],u=0;return t.yref==="paper"?u=r+t.pad.t+t.pad.b:t.yref==="container"&&(u=Kne(s,i,a,e._fullLayout.height,r)+t.pad.t+t.pad.b),u>l?u:0}function $ne(e,t,r,i){var a="title.automargin",s=e._fullLayout.title,l=s.y>.5?"t":"b",u={x:s.x,y:s.y,t:0,b:0},c={};s.yref==="paper"&&Jne(e,s,l,t,i)?u[l]=r:s.yref==="container"&&(c[l]=r,e._fullLayout._reservedMargin[a]=c),dl.allowAutoMargin(e,a),dl.autoMargin(e,a,u)}function eoe(e,t){var r=e.title,i=e._size,a=0;switch(t===iI?a=r.pad.l:t===nI&&(a=-r.pad.r),r.xref){case"paper":return i.l+i.w*r.x+a;case"container":default:return e.width*r.x+a}}function toe(e,t){var r=e.title,i=e._size,a=0;if(t==="0em"||!t?a=-r.pad.b:t===Lc.CAP_SHIFT+"em"&&(a=r.pad.t),r.y==="auto")return i.t/2;switch(r.yref){case"paper":return i.t+i.h-i.h*r.y+a;case"container":default:return e.height-e.height*r.y+a}}function tI(e){return e==="top"?Lc.CAP_SHIFT+.3+"em":e==="bottom"?"-0.3em":Lc.MID_SHIFT+"em"}function roe(e){var t=e.title,r=Yne;return au.isRightAnchor(t)?r=nI:au.isLeftAnchor(t)&&(r=iI),r}function aoe(e){var t=e.title,r="0em";return au.isTopAnchor(t)?r=Lc.CAP_SHIFT+"em":au.isMiddleAnchor(t)&&(r=Lc.MID_SHIFT+"em"),r}no.doTraceStyle=function(e){var t=e.calcdata,r=[],i;for(i=0;i<t.length;i++){var a=t[i],s=a[0]||{},l=s.trace||{},u=l._module||{},c=u.arraysToCalcdata;c&&c(a,l);var v=u.editStyle;v&&r.push({fn:v,cd0:s})}if(r.length){for(i=0;i<r.length;i++){var m=r[i];m.fn(e,m.cd0)}l6(e),no.redrawReglTraces(e)}return dl.style(e),ls.getComponentMethod("legend","draw")(e),dl.previousPromises(e)};no.doColorBars=function(e){return ls.getComponentMethod("colorbar","draw")(e),dl.previousPromises(e)};no.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,ls.call("_doPlot",e,"",t)};no.doLegend=function(e){return ls.getComponentMethod("legend","draw")(e),dl.previousPromises(e)};no.doTicksRelayout=function(e){return Cg.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(ls.subplotsRegistry.splom.updateGrid(e),l6(e),no.redrawReglTraces(e)),no.drawMainTitle(e),dl.previousPromises(e)};no.doModeBar=function(e){var t=e._fullLayout;rI.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var i=t._basePlotModules[r].updateFx;i&&i(e)}return dl.previousPromises(e)};no.doCamera=function(e){for(var t=e._fullLayout,r=t._subplots.gl3d,i=0;i<r.length;i++){var a=t[r[i]],s=a._scene;s.setViewport(a)}};no.drawData=function(e){var t=e._fullLayout;l6(e);for(var r=t._basePlotModules,i=0;i<r.length;i++)r[i].plot(e);return no.redrawReglTraces(e),dl.style(e),ls.getComponentMethod("selections","draw")(e),ls.getComponentMethod("shapes","draw")(e),ls.getComponentMethod("annotations","draw")(e),ls.getComponentMethod("images","draw")(e),t._replotting=!1,dl.previousPromises(e)};no.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData,i=[],a=[],s,l;for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),s=0;s<r.length;s++){var u=r[s];u.visible===!0&&u._length!==0&&(u.type==="splom"?t._splomScenes[u.uid].draw():u.type==="scattergl"?au.pushUnique(i,u.xaxis+u.yaxis):u.type==="scatterpolargl"&&au.pushUnique(a,u.subplot))}for(s=0;s<i.length;s++)l=t._plots[i[s]],l._scene&&l._scene.draw();for(s=0;s<a.length;s++)l=t[a[s]]._subplot,l._scene&&l._scene.draw()}};no.doAutoRangeAndConstraints=function(e){for(var t=Cg.list(e,"",!0),r,i={},a=0;a<t.length;a++)if(r=t[a],!i[r._id]){i[r._id]=1,Zne(e,r),Qz(e,r);var s=r._matchGroup;if(s)for(var l in s){var u=Cg.getFromId(e,l);Qz(e,u,r.range),i[l]=1}}Gne(e)};no.finalDraw=function(e){ls.getComponentMethod("rangeslider","draw")(e),ls.getComponentMethod("rangeselector","draw")(e)};no.drawMarginPushers=function(e){ls.getComponentMethod("legend","draw")(e),ls.getComponentMethod("rangeselector","draw")(e),ls.getComponentMethod("sliders","draw")(e),ls.getComponentMethod("updatemenus","draw")(e),ls.getComponentMethod("colorbar","draw")(e)}});var c6=he((g2e,fI)=>{"use strict";var ioe=jh().readPaths,noe=vx(),oI=Nh().clearOutlineControllers,u6=Ua(),sI=_i(),ooe=Di().arrayEditor,lI=Kh(),soe=lI.getPathString;fI.exports={draw:Tx,drawOne:uI,activateLastSelection:foe};function Tx(e){var t=e._fullLayout;oI(e),t._selectionLayer.selectAll("path").remove();for(var r in t._plots){var i=t._plots[r].selectionLayer;i&&i.selectAll("path").remove()}for(var a=0;a<t.selections.length;a++)uI(e,a)}function Ax(e){return e._context.editSelection}function uI(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=lI.makeSelectionsOptionsAndPlotinfo(e,t),i=r.options,a=r.plotinfo;if(!i._input)return;s(e._fullLayout._selectionLayer);function s(l){var u=soe(e,i),c={"data-index":t,"fill-rule":"evenodd",d:u},v=i.opacity,m="rgba(0,0,0,0)",_=i.line.color||u6.contrast(e._fullLayout.plot_bgcolor),T=i.line.width,M=i.line.dash;T||(T=5,M="solid");var k=Ax(e)&&e._fullLayout._activeSelectionIndex===t;k&&(m=e._fullLayout.activeselection.fillcolor,v=e._fullLayout.activeselection.opacity);for(var L=[],E=1;E>=0;E--){var I=l.append("path").attr(c).style("opacity",E?.1:v).call(u6.stroke,_).call(u6.fill,m).call(sI.dashLine,E?"solid":M,E?4+T:T);if(loe(I,e,i),k){var R=ooe(e.layout,"selections",i);I.style({cursor:"move"});var N={element:I.node(),plotinfo:a,gd:e,editHelpers:R,isActiveSelection:!0},z=ioe(u,e);noe(z,I,N)}else I.style("pointer-events",E?"all":"none");L[E]=I}var B=L[0],H=L[1];H.node().addEventListener("click",function(){return uoe(e,B)})}}function loe(e,t,r){var i=r.xref+r.yref;sI.setClipUrl(e,"clip"+t._fullLayout._uid+i,t)}function uoe(e,t){if(Ax(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeSelectionIndex){f6(e);return}e._fullLayout._activeSelectionIndex=i,e._fullLayout._deactivateSelection=f6,Tx(e)}}}function foe(e){if(Ax(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=f6,Tx(e)}}function f6(e){if(Ax(e)){var t=e._fullLayout._activeSelectionIndex;t>=0&&(oI(e),delete e._fullLayout._activeSelectionIndex,Tx(e))}}});var hI=he((_2e,cI)=>{function coe(){var e,t=0,r=!1;function i(a,s){return e.list.push({type:a,data:s?JSON.parse(JSON.stringify(s)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(a,s){return i("check",{seg1:a,seg2:s})},segmentChop:function(a,s){return i("div_seg",{seg:a,pt:s}),i("chop",{seg:a,pt:s})},statusRemove:function(a){return i("pop_seg",{seg:a})},segmentUpdate:function(a){return i("seg_update",{seg:a})},segmentNew:function(a,s){return i("new_seg",{seg:a,primary:s})},segmentRemove:function(a){return i("rem_seg",{seg:a})},tempStatus:function(a,s,l){return i("temp_status",{seg:a,above:s,below:l})},rewind:function(a){return i("rewind",{seg:a})},status:function(a,s,l){return i("status",{seg:a,above:s,below:l})},vert:function(a){return a===r?e:(r=a,i("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),i("log",{txt:a})},reset:function(){return i("reset")},selected:function(a){return i("selected",{segs:a})},chainStart:function(a){return i("chain_start",{seg:a})},chainRemoveHead:function(a,s){return i("chain_rem_head",{index:a,pt:s})},chainRemoveTail:function(a,s){return i("chain_rem_tail",{index:a,pt:s})},chainNew:function(a,s){return i("chain_new",{pt1:a,pt2:s})},chainMatch:function(a){return i("chain_match",{index:a})},chainClose:function(a){return i("chain_close",{index:a})},chainAddHead:function(a,s){return i("chain_add_head",{index:a,pt:s})},chainAddTail:function(a,s){return i("chain_add_tail",{index:a,pt:s})},chainConnect:function(a,s){return i("chain_con",{index1:a,index2:s})},chainReverse:function(a){return i("chain_rev",{index:a})},chainJoin:function(a,s){return i("chain_join",{index1:a,index2:s})},done:function(){return i("done")}},e}cI.exports=coe});var dI=he((x2e,vI)=>{function hoe(e){typeof e!="number"&&(e=1e-10);var t={epsilon:function(r){return typeof r=="number"&&(e=r),e},pointAboveOrOnLine:function(r,i,a){var s=i[0],l=i[1],u=a[0],c=a[1],v=r[0],m=r[1];return(u-s)*(m-l)-(c-l)*(v-s)>=-e},pointBetween:function(r,i,a){var s=r[1]-i[1],l=a[0]-i[0],u=r[0]-i[0],c=a[1]-i[1],v=u*l+s*c;if(v<e)return!1;var m=l*l+c*c;return!(v-m>-e)},pointsSameX:function(r,i){return Math.abs(r[0]-i[0])<e},pointsSameY:function(r,i){return Math.abs(r[1]-i[1])<e},pointsSame:function(r,i){return t.pointsSameX(r,i)&&t.pointsSameY(r,i)},pointsCompare:function(r,i){return t.pointsSameX(r,i)?t.pointsSameY(r,i)?0:r[1]<i[1]?-1:1:r[0]<i[0]?-1:1},pointsCollinear:function(r,i,a){var s=r[0]-i[0],l=r[1]-i[1],u=i[0]-a[0],c=i[1]-a[1];return Math.abs(s*c-u*l)<e},linesIntersect:function(r,i,a,s){var l=i[0]-r[0],u=i[1]-r[1],c=s[0]-a[0],v=s[1]-a[1],m=l*v-u*c;if(Math.abs(m)<e)return!1;var _=r[0]-a[0],T=r[1]-a[1],M=(c*T-v*_)/m,k=(l*T-u*_)/m,L={alongA:0,alongB:0,pt:[r[0]+M*l,r[1]+M*u]};return M<=-e?L.alongA=-2:M<e?L.alongA=-1:M-1<=-e?L.alongA=0:M-1<e?L.alongA=1:L.alongA=2,k<=-e?L.alongB=-2:k<e?L.alongB=-1:k-1<=-e?L.alongB=0:k-1<e?L.alongB=1:L.alongB=2,L},pointInsideRegion:function(r,i){for(var a=r[0],s=r[1],l=i[i.length-1][0],u=i[i.length-1][1],c=!1,v=0;v<i.length;v++){var m=i[v][0],_=i[v][1];_-s>e!=u-s>e&&(l-m)*(s-_)/(u-_)+m-a>e&&(c=!c),l=m,u=_}return c}};return t}vI.exports=hoe});var mI=he((b2e,pI)=>{var voe={create:function(){var e={root:{root:!0,next:null},exists:function(t){return!(t===null||t===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){for(var i=e.root,a=e.root.next;a!==null;){if(r(a)){t.prev=a.prev,t.next=a,a.prev.next=t,a.prev=t;return}i=a,a=a.next}i.next=t,t.prev=i,t.next=null},findTransition:function(t){for(var r=e.root,i=e.root.next;i!==null&&!t(i);)r=i,i=i.next;return{before:r===e.root?null:r,after:i,insert:function(a){return a.prev=r,a.next=i,r.next=a,i!==null&&(i.prev=a),a}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}};pI.exports=voe});var gI=he((w2e,yI)=>{var Eg=mI();function doe(e,t,r){function i(k,L){return{id:r?r.segmentId():-1,start:k,end:L,myFill:{above:null,below:null},otherFill:null}}function a(k,L,E){return{id:r?r.segmentId():-1,start:k,end:L,myFill:{above:E.myFill.above,below:E.myFill.below},otherFill:null}}var s=Eg.create();function l(k,L,E,I,R,N){var z=t.pointsCompare(L,R);return z!==0?z:t.pointsSame(E,N)?0:k!==I?k?1:-1:t.pointAboveOrOnLine(E,I?R:N,I?N:R)?1:-1}function u(k,L){s.insertBefore(k,function(E){var I=l(k.isStart,k.pt,L,E.isStart,E.pt,E.other.pt);return I<0})}function c(k,L){var E=Eg.node({isStart:!0,pt:k.start,seg:k,primary:L,other:null,status:null});return u(E,k.end),E}function v(k,L,E){var I=Eg.node({isStart:!1,pt:L.end,seg:L,primary:E,other:k,status:null});k.other=I,u(I,k.pt)}function m(k,L){var E=c(k,L);return v(E,k,L),E}function _(k,L){r&&r.segmentChop(k.seg,L),k.other.remove(),k.seg.end=L,k.other.pt=L,u(k.other,k.pt)}function T(k,L){var E=a(L,k.seg.end,k.seg);return _(k,L),m(E,k.primary)}function M(k,L){var E=Eg.create();function I(Se,Ce){var Me=Se.seg.start,_e=Se.seg.end,Te=Ce.seg.start,Ae=Ce.seg.end;return t.pointsCollinear(Me,Te,Ae)?t.pointsCollinear(_e,Te,Ae)||t.pointAboveOrOnLine(_e,Te,Ae)?1:-1:t.pointAboveOrOnLine(Me,Te,Ae)?1:-1}function R(Se){return E.findTransition(function(Ce){var Me=I(Se,Ce.ev);return Me>0})}function N(Se,Ce){var Me=Se.seg,_e=Ce.seg,Te=Me.start,Ae=Me.end,Le=_e.start,Ke=_e.end;r&&r.checkIntersection(Me,_e);var ct=t.linesIntersect(Te,Ae,Le,Ke);if(ct===!1){if(!t.pointsCollinear(Te,Ae,Le)||t.pointsSame(Te,Ke)||t.pointsSame(Ae,Le))return!1;var it=t.pointsSame(Te,Le),ut=t.pointsSame(Ae,Ke);if(it&&ut)return Ce;var Ge=!it&&t.pointBetween(Te,Le,Ke),xt=!ut&&t.pointBetween(Ae,Le,Ke);if(it)return xt?T(Ce,Ae):T(Se,Ke),Ce;Ge&&(ut||(xt?T(Ce,Ae):T(Se,Ke)),T(Ce,Te))}else ct.alongA===0&&(ct.alongB===-1?T(Se,Le):ct.alongB===0?T(Se,ct.pt):ct.alongB===1&&T(Se,Ke)),ct.alongB===0&&(ct.alongA===-1?T(Ce,Te):ct.alongA===0?T(Ce,ct.pt):ct.alongA===1&&T(Ce,Ae));return!1}for(var z=[];!s.isEmpty();){var B=s.getHead();if(r&&r.vert(B.pt[0]),B.isStart){let Se=function(){if(V){var Ce=N(B,V);if(Ce)return Ce}return Y?N(B,Y):!1};var me=Se;r&&r.segmentNew(B.seg,B.primary);var H=R(B),V=H.before?H.before.ev:null,Y=H.after?H.after.ev:null;r&&r.tempStatus(B.seg,V?V.seg:!1,Y?Y.seg:!1);var J=Se();if(J){if(e){var re;B.seg.myFill.below===null?re=!0:re=B.seg.myFill.above!==B.seg.myFill.below,re&&(J.seg.myFill.above=!J.seg.myFill.above)}else J.seg.otherFill=B.seg.myFill;r&&r.segmentUpdate(J.seg),B.other.remove(),B.remove()}if(s.getHead()!==B){r&&r.rewind(B.seg);continue}if(e){var re;B.seg.myFill.below===null?re=!0:re=B.seg.myFill.above!==B.seg.myFill.below,Y?B.seg.myFill.below=Y.seg.myFill.above:B.seg.myFill.below=k,re?B.seg.myFill.above=!B.seg.myFill.below:B.seg.myFill.above=B.seg.myFill.below}else if(B.seg.otherFill===null){var ne;Y?B.primary===Y.primary?ne=Y.seg.otherFill.above:ne=Y.seg.myFill.above:ne=B.primary?L:k,B.seg.otherFill={above:ne,below:ne}}r&&r.status(B.seg,V?V.seg:!1,Y?Y.seg:!1),B.other.status=H.insert(Eg.node({ev:B}))}else{var oe=B.status;if(oe===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(E.exists(oe.prev)&&E.exists(oe.next)&&N(oe.prev.ev,oe.next.ev),r&&r.statusRemove(oe.ev.seg),oe.remove(),!B.primary){var ue=B.seg.myFill;B.seg.myFill=B.seg.otherFill,B.seg.otherFill=ue}z.push(B.seg)}s.getHead().remove()}return r&&r.done(),z}return e?{addRegion:function(k){for(var L,E=k[k.length-1],I=0;I<k.length;I++){L=E,E=k[I];var R=t.pointsCompare(L,E);R!==0&&m(i(R<0?L:E,R<0?E:L),!0)}},calculate:function(k){return M(k,!1)}}:{calculate:function(k,L,E,I){return k.forEach(function(R){m(a(R.start,R.end,R),!0)}),E.forEach(function(R){m(a(R.start,R.end,R),!1)}),M(L,I)}}}yI.exports=doe});var xI=he((T2e,_I)=>{function poe(e,t,r){var i=[],a=[];return e.forEach(function(s){var l=s.start,u=s.end;if(t.pointsSame(l,u)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}r&&r.chainStart(s);var c={index:0,matches_head:!1,matches_pt1:!1},v={index:0,matches_head:!1,matches_pt1:!1},m=c;function _(me,Se,Ce){return m.index=me,m.matches_head=Se,m.matches_pt1=Ce,m===c?(m=v,!1):(m=null,!0)}for(var T=0;T<i.length;T++){var M=i[T],k=M[0],L=M[1],E=M[M.length-1],I=M[M.length-2];if(t.pointsSame(k,l)){if(_(T,!0,!0))break}else if(t.pointsSame(k,u)){if(_(T,!0,!1))break}else if(t.pointsSame(E,l)){if(_(T,!1,!0))break}else if(t.pointsSame(E,u)&&_(T,!1,!1))break}if(m===c){i.push([l,u]),r&&r.chainNew(l,u);return}if(m===v){r&&r.chainMatch(c.index);var R=c.index,N=c.matches_pt1?u:l,z=c.matches_head,M=i[R],B=z?M[0]:M[M.length-1],H=z?M[1]:M[M.length-2],V=z?M[M.length-1]:M[0],Y=z?M[M.length-2]:M[1];if(t.pointsCollinear(H,B,N)&&(z?(r&&r.chainRemoveHead(c.index,N),M.shift()):(r&&r.chainRemoveTail(c.index,N),M.pop()),B=H),t.pointsSame(V,N)){i.splice(R,1),t.pointsCollinear(Y,V,B)&&(z?(r&&r.chainRemoveTail(c.index,B),M.pop()):(r&&r.chainRemoveHead(c.index,B),M.shift())),r&&r.chainClose(c.index),a.push(M);return}z?(r&&r.chainAddHead(c.index,N),M.unshift(N)):(r&&r.chainAddTail(c.index,N),M.push(N));return}function J(me){r&&r.chainReverse(me),i[me].reverse()}function re(me,Se){var Ce=i[me],Me=i[Se],_e=Ce[Ce.length-1],Te=Ce[Ce.length-2],Ae=Me[0],Le=Me[1];t.pointsCollinear(Te,_e,Ae)&&(r&&r.chainRemoveTail(me,_e),Ce.pop(),_e=Te),t.pointsCollinear(_e,Ae,Le)&&(r&&r.chainRemoveHead(Se,Ae),Me.shift()),r&&r.chainJoin(me,Se),i[me]=Ce.concat(Me),i.splice(Se,1)}var ne=c.index,oe=v.index;r&&r.chainConnect(ne,oe);var ue=i[ne].length<i[oe].length;c.matches_head?v.matches_head?ue?(J(ne),re(ne,oe)):(J(oe),re(oe,ne)):re(oe,ne):v.matches_head?re(ne,oe):ue?(J(ne),re(oe,ne)):(J(oe),re(ne,oe))}),a}_I.exports=poe});var wI=he((A2e,bI)=>{function Lg(e,t,r){var i=[];return e.forEach(function(a){var s=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);t[s]!==0&&i.push({id:r?r.segmentId():-1,start:a.start,end:a.end,myFill:{above:t[s]===1,below:t[s]===2},otherFill:null})}),r&&r.selected(i),i}var moe={union:function(e,t){return Lg(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return Lg(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return Lg(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return Lg(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return Lg(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};bI.exports=moe});var AI=he((M2e,TI)=>{var yoe={toPolygon:function(e,t){function r(s){if(s.length<=0)return e.segments({inverted:!1,regions:[]});function l(v){var m=v.slice(0,v.length-1);return e.segments({inverted:!1,regions:[m]})}for(var u=l(s[0]),c=1;c<s.length;c++)u=e.selectDifference(e.combine(u,l(s[c])));return u}if(t.type==="Polygon")return e.polygon(r(t.coordinates));if(t.type==="MultiPolygon"){for(var i=e.segments({inverted:!1,regions:[]}),a=0;a<t.coordinates.length;a++)i=e.selectUnion(e.combine(i,r(t.coordinates[a])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function i(M,k){return t.pointInsideRegion([(M[0][0]+M[1][0])*.5,(M[0][1]+M[1][1])*.5],k)}function a(M){return{region:M,children:[]}}var s=a(null);function l(M,k){for(var L=0;L<M.children.length;L++){var E=M.children[L];if(i(k,E.region)){l(E,k);return}}for(var I=a(k),L=0;L<M.children.length;L++){var E=M.children[L];i(E.region,k)&&(I.children.push(E),M.children.splice(L,1),L--)}M.children.push(I)}for(var u=0;u<r.regions.length;u++){var c=r.regions[u];c.length<3||l(s,c)}function v(M,k){for(var L=0,E=M[M.length-1][0],I=M[M.length-1][1],R=[],N=0;N<M.length;N++){var z=M[N][0],B=M[N][1];R.push([z,B]),L+=B*E-z*I,E=z,I=B}var H=L<0;return H!==k&&R.reverse(),R.push([R[0][0],R[0][1]]),R}var m=[];function _(M){var k=[v(M.region,!1)];m.push(k);for(var L=0;L<M.children.length;L++)k.push(T(M.children[L]))}function T(M){for(var k=0;k<M.children.length;k++)_(M.children[k]);return v(M.region,!0)}for(var u=0;u<s.children.length;u++)_(s.children[u]);return m.length<=0?{type:"Polygon",coordinates:[]}:m.length==1?{type:"Polygon",coordinates:m[0]}:{type:"MultiPolygon",coordinates:m}}};TI.exports=yoe});var CI=he((S2e,kI)=>{var goe=hI(),_oe=dI(),MI=gI(),xoe=xI(),Pg=wI(),SI=AI(),iu=!1,Dg=_oe(),Ws;Ws={buildLog:function(e){return e===!0?iu=goe():e===!1&&(iu=!1),iu===!1?!1:iu.list},epsilon:function(e){return Dg.epsilon(e)},segments:function(e){var t=MI(!0,Dg,iu);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=MI(!1,Dg,iu);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:Pg.union(e.combined,iu),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:Pg.intersect(e.combined,iu),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:Pg.difference(e.combined,iu),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:Pg.differenceRev(e.combined,iu),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:Pg.xor(e.combined,iu),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:xoe(e.segments,Dg,iu),inverted:e.inverted}},polygonFromGeoJSON:function(e){return SI.toPolygon(Ws,e)},polygonToGeoJSON:function(e){return SI.fromPolygon(Ws,Dg,e)},union:function(e,t){return zg(e,t,Ws.selectUnion)},intersect:function(e,t){return zg(e,t,Ws.selectIntersect)},difference:function(e,t){return zg(e,t,Ws.selectDifference)},differenceRev:function(e,t){return zg(e,t,Ws.selectDifferenceRev)},xor:function(e,t){return zg(e,t,Ws.selectXor)}};function zg(e,t,r){var i=Ws.segments(e),a=Ws.segments(t),s=Ws.combine(i,a),l=r(s);return Ws.polygon(l)}typeof window=="object"&&(window.PolyBool=Ws);kI.exports=Ws});var LI=he((k2e,EI)=>{EI.exports=function(t,r,i,a){var s=t[0],l=t[1],u=!1;i===void 0&&(i=0),a===void 0&&(a=r.length);for(var c=a-i,v=0,m=c-1;v<c;m=v++){var _=r[v+i][0],T=r[v+i][1],M=r[m+i][0],k=r[m+i][1],L=T>l!=k>l&&s<(M-_)*(l-T)/(k-T)+_;L&&(u=!u)}return u}});var kx=he((C2e,PI)=>{"use strict";var h6=S_().dot,Mx=Bi().BADNUM,Sx=PI.exports={};Sx.tester=function(t){var r=t.slice(),i=r[0][0],a=i,s=r[0][1],l=s,u;for((r[r.length-1][0]!==r[0][0]||r[r.length-1][1]!==r[0][1])&&r.push(r[0]),u=1;u<r.length;u++)i=Math.min(i,r[u][0]),a=Math.max(a,r[u][0]),s=Math.min(s,r[u][1]),l=Math.max(l,r[u][1]);var c=!1,v;r.length===5&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(c=!0,v=function(k){return k[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(c=!0,v=function(k){return k[1]===r[0][1]}));function m(k,L){var E=k[0],I=k[1];return!(E===Mx||E<i||E>a||I===Mx||I<s||I>l||L&&v(k))}function _(k,L){var E=k[0],I=k[1];if(E===Mx||E<i||E>a||I===Mx||I<s||I>l)return!1;var R=r.length,N=r[0][0],z=r[0][1],B=0,H,V,Y,J,re;for(H=1;H<R;H++)if(V=N,Y=z,N=r[H][0],z=r[H][1],J=Math.min(V,N),!(E<J||E>Math.max(V,N)||I>Math.max(Y,z)))if(I<Math.min(Y,z))E!==J&&B++;else{if(N===V?re=I:re=Y+(E-V)*(z-Y)/(N-V),I===re)return!(H===1&&L);I<=re&&E!==J&&B++}return B%2===1}var T=!0,M=r[0];for(u=1;u<r.length;u++)if(M[0]!==r[u][0]||M[1]!==r[u][1]){T=!1;break}return{xmin:i,xmax:a,ymin:s,ymax:l,pts:r,contains:c?m:_,isRect:c,degenerate:T}};Sx.isSegmentBent=function(t,r,i,a){var s=t[r],l=[t[i][0]-s[0],t[i][1]-s[1]],u=h6(l,l),c=Math.sqrt(u),v=[-l[1]/c,l[0]/c],m,_,T;for(m=r+1;m<i;m++)if(_=[t[m][0]-s[0],t[m][1]-s[1]],T=h6(_,l),T<0||T>u||Math.abs(h6(_,v))>a)return!0;return!1};Sx.filter=function(t,r){var i=[t[0]],a=0,s=0;function l(c){t.push(c);var v=i.length,m=a;i.splice(s+1);for(var _=m+1;_<t.length;_++)(_===t.length-1||Sx.isSegmentBent(t,m,_+1,r))&&(i.push(t[_]),i.length<v-2&&(a=_,s=i.length-1),m=_)}if(t.length>1){var u=t.pop();l(u)}return{addPt:l,raw:t,filtered:i}}});var zI=he((E2e,DI)=>{"use strict";DI.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}});var tR=he((L2e,eR)=>{"use strict";var II=CI(),boe=LI(),Fg=sa(),woe=_i().dashStyle,Ig=Ua(),Toe=Bf(),Aoe=Ac().makeEventData,Ug=Nd(),Moe=Ug.freeMode,Soe=Ug.rectMode,qg=Ug.drawMode,m6=Ug.openMode,y6=Ug.selectMode,RI=Kh(),FI=wg(),UI=vx(),VI=Nh().clearOutline,HI=jh(),v6=HI.handleEllipse,koe=HI.readPaths,Coe=ux().newShapes,Eoe=B4(),Loe=c6().activateLastSelection,Ex=Nt(),Poe=Ex.sorterAsc,GI=kx(),Rg=H_(),nu=ro().getFromId,Doe=tx(),zoe=wx().redrawReglTraces,Lx=zI(),Uf=Lx.MINSELECT,Ioe=GI.filter,g6=GI.tester,_6=nx(),qI=_6.p2r,Roe=_6.axValue,Foe=_6.getTransform;function x6(e){return e.subplot!==void 0}function qoe(e,t,r,i,a){var s=!x6(i),l=Moe(a),u=Soe(a),c=m6(a),v=qg(a),m=y6(a),_=a==="drawline",T=a==="drawcircle",M=_||T,k=i.gd,L=k._fullLayout,E=m&&L.newselection.mode==="immediate"&&s,I=L._zoomlayer,R=i.element.getBoundingClientRect(),N=i.plotinfo,z=Foe(N),B=t-R.left,H=r-R.top;L._calcInverseTransform(k);var V=Ex.apply3DTransform(L._invTransform)(B,H);B=V[0],H=V[1];var Y=L._invScaleX,J=L._invScaleY,re=B,ne=H,oe="M"+B+","+H,ue=i.xaxes[0],me=i.yaxes[0],Se=ue._length,Ce=me._length,Me=e.altKey&&!(qg(a)&&c),_e,Te,Ae,Le,Ke,ct,it;YI(e,k,i),l&&(_e=Ioe([[B,H]],Lx.BENDPX));var ut=I.selectAll("path.select-outline-"+N.id).data([1]),Ge=v?L.newshape:L.newselection;v&&(i.hasText=Ge.label.text||Ge.label.texttemplate);var xt=v&&!c?Ge.fillcolor:"rgba(0,0,0,0)",at=Ge.line.color||(s?Ig.contrast(k._fullLayout.plot_bgcolor):"#7f7f7f");ut.enter().append("path").attr("class","select-outline select-outline-"+N.id).style({opacity:v?Ge.opacity/2:1,"stroke-dasharray":woe(Ge.line.dash,Ge.line.width),"stroke-width":Ge.line.width+"px","shape-rendering":"crispEdges"}).call(Ig.stroke,at).call(Ig.fill,xt).attr("fill-rule","evenodd").classed("cursor-move",!!v).attr("transform",z).attr("d",oe+"Z");var At=I.append("path").attr("class","zoombox-corners").style({fill:Ig.background,stroke:Ig.defaultLine,"stroke-width":1}).attr("transform",z).attr("d","M0,0Z");if(v&&i.hasText){var kt=I.select(".label-temp");kt.empty()&&(kt=I.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var mt=L._uid+Lx.SELECTID,ye=[],Re=Px(k,i.xaxes,i.yaxes,i.subplot);E&&!e.shiftKey&&(i._clearSubplotSelections=function(){if(s){var et=ue._id,vt=me._id;KI(k,et,vt,Re);for(var tt=(k.layout||{}).selections||[],Bt=[],Mt=!1,Ct=0;Ct<tt.length;Ct++){var Rt=L.selections[Ct];Rt.xref!==et||Rt.yref!==vt?Bt.push(tt[Ct]):Mt=!0}Mt&&(k._fullLayout._noEmitSelectedAtStart=!0,Fg.call("_guiRelayout",k,{selections:Bt}))}});var xe=Koe(i);i.moveFn=function(et,vt){i._clearSubplotSelections&&(i._clearSubplotSelections(),i._clearSubplotSelections=void 0),re=Math.max(0,Math.min(Se,Y*et+B)),ne=Math.max(0,Math.min(Ce,J*vt+H));var tt=Math.abs(re-B),Bt=Math.abs(ne-H);if(u){var Mt,Ct,Rt;if(m){var Ot=L.selectdirection;switch(Ot==="any"?Bt<Math.min(tt*.6,Uf)?Mt="h":tt<Math.min(Bt*.6,Uf)?Mt="v":Mt="d":Mt=Ot,Mt){case"h":Ct=T?Ce/2:0,Rt=Ce;break;case"v":Ct=T?Se/2:0,Rt=Se;break}}if(v)switch(L.newshape.drawdirection){case"vertical":Mt="h",Ct=T?Ce/2:0,Rt=Ce;break;case"horizontal":Mt="v",Ct=T?Se/2:0,Rt=Se;break;case"ortho":tt<Bt?(Mt="h",Ct=H,Rt=ne):(Mt="v",Ct=B,Rt=re);break;default:Mt="d"}Mt==="h"?(Le=M?v6(T,[re,Ct],[re,Rt]):[[B,Ct],[B,Rt],[re,Rt],[re,Ct]],Le.xmin=M?re:Math.min(B,re),Le.xmax=M?re:Math.max(B,re),Le.ymin=Math.min(Ct,Rt),Le.ymax=Math.max(Ct,Rt),At.attr("d","M"+Le.xmin+","+(H-Uf)+"h-4v"+2*Uf+"h4ZM"+(Le.xmax-1)+","+(H-Uf)+"h4v"+2*Uf+"h-4Z")):Mt==="v"?(Le=M?v6(T,[Ct,ne],[Rt,ne]):[[Ct,H],[Ct,ne],[Rt,ne],[Rt,H]],Le.xmin=Math.min(Ct,Rt),Le.xmax=Math.max(Ct,Rt),Le.ymin=M?ne:Math.min(H,ne),Le.ymax=M?ne:Math.max(H,ne),At.attr("d","M"+(B-Uf)+","+Le.ymin+"v-4h"+2*Uf+"v4ZM"+(B-Uf)+","+(Le.ymax-1)+"v4h"+2*Uf+"v-4Z")):Mt==="d"&&(Le=M?v6(T,[B,H],[re,ne]):[[B,H],[B,ne],[re,ne],[re,H]],Le.xmin=Math.min(B,re),Le.xmax=Math.max(B,re),Le.ymin=Math.min(H,ne),Le.ymax=Math.max(H,ne),At.attr("d","M0,0Z"))}else l&&(_e.addPt([re,ne]),Le=_e.filtered);if(i.selectionDefs&&i.selectionDefs.length?(Ae=WI(i.mergedPolygons,Le,Me),Le.subtract=Me,Te=b6(i.selectionDefs.concat([Le]))):(Ae=[Le],Te=g6(Le)),UI(jI(Ae,c),ut,i),m){var gt=p6(k,!1),Et=gt.eventData?gt.eventData.points.slice():[];gt=p6(k,!1,Te,Re,i),Te=gt.selectionTesters,it=gt.eventData;var ir;_e?ir=_e.filtered:ir=QI(Ae),Rg.throttle(mt,Lx.SELECTDELAY,function(){ye=JI(Te,Re);for(var Gt=ye.slice(),Ne=0;Ne<Et.length;Ne++){for(var ft=Et[Ne],pt=!1,xr=0;xr<Gt.length;xr++)if(Gt[xr].curveNumber===ft.curveNumber&&Gt[xr].pointNumber===ft.pointNumber){pt=!0;break}pt||Gt.push(ft)}Gt.length&&(it||(it={}),it.points=Gt),xe(it,ir),Qoe(k,it)})}},i.clickFn=function(et,vt){if(At.remove(),k._fullLayout._activeShapeIndex>=0){k._fullLayout._deactivateShape(k);return}if(!v){var tt=L.clickmode;Rg.done(mt).then(function(){if(Rg.clear(mt),et===2){for(ut.remove(),Ke=0;Ke<Re.length;Ke++)ct=Re[Ke],ct._module.selectPoints(ct,!1);if(Bg(k,Re),Ng(i),T6(k),Re.length){var Bt=Re[0].xaxis,Mt=Re[0].yaxis;if(Bt&&Mt){for(var Ct=[],Rt=k._fullLayout.selections,Ot=0;Ot<Rt.length;Ot++){var gt=Rt[Ot];gt&&(gt.xref!==Bt._id||gt.yref!==Mt._id)&&Ct.push(gt)}Ct.length<Rt.length&&(k._fullLayout._noEmitSelectedAtStart=!0,Fg.call("_guiRelayout",k,{selections:Ct}))}}}else tt.indexOf("select")>-1&&ZI(vt,k,i.xaxes,i.yaxes,i.subplot,i,ut),tt==="event"&&Og(k,void 0);Toe.click(k,vt,N.id)}).catch(Ex.error)}},i.doneFn=function(){At.remove(),Rg.done(mt).then(function(){Rg.clear(mt),!E&&Le&&i.selectionDefs&&(Le.subtract=Me,i.selectionDefs.push(Le),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,Ae)),(E||v)&&Ng(i,E),i.doneFnCompleted&&i.doneFnCompleted(ye),m&&Og(k,it)}).catch(Ex.error)}}function ZI(e,t,r,i,a,s,l){var u=t._hoverdata,c=t._fullLayout,v=c.clickmode,m=v.indexOf("event")>-1,_=[],T,M,k,L,E,I,R,N,z,B;if(Voe(u)){YI(e,t,s),T=Px(t,r,i,a);var H=Hoe(u,T),V=H.pointNumbers.length>0;if(V?Goe(T,H):Zoe(T)&&(R=BI(H))){for(l&&l.remove(),B=0;B<T.length;B++)M=T[B],M._module.selectPoints(M,!1);Bg(t,T),Ng(s),m&&T6(t)}else{N=e.shiftKey&&(R!==void 0?R:BI(H)),k=Noe(H.pointNumber,H.searchInfo,N);var Y=s.selectionDefs.concat([k]);for(L=b6(Y,L),B=0;B<T.length;B++)if(E=T[B]._module.selectPoints(T[B],L),I=XI(E,T[B]),_.length)for(var J=0;J<I.length;J++)_.push(I[J]);else _=I;if(z={points:_},Bg(t,T,z),k&&s&&s.selectionDefs.push(k),l){var re=s.mergedPolygons,ne=m6(s.dragmode);UI(jI(re,ne),l,s)}m&&Og(t,z)}}}function Noe(e,t,r){return{pointNumber:e,searchInfo:t,subtract:!!r}}function d6(e){return"pointNumber"in e&&"searchInfo"in e}function Boe(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,i,a){var s=e.searchInfo.cd[0].trace._expandedIndex,l=a.cd[0].trace._expandedIndex;return l===s&&i===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function b6(e){if(!e.length)return;for(var t=[],r=d6(e[0])?0:e[0][0][0],i=r,a=d6(e[0])?0:e[0][0][1],s=a,l=0;l<e.length;l++)if(d6(e[l]))t.push(Boe(e[l]));else{var u=g6(e[l]);u.subtract=!!e[l].subtract,t.push(u),r=Math.min(r,u.xmin),i=Math.max(i,u.xmax),a=Math.min(a,u.ymin),s=Math.max(s,u.ymax)}function c(v,m,_,T){for(var M=!1,k=0;k<t.length;k++)t[k].contains(v,m,_,T)&&(M=!t[k].subtract);return M}return{xmin:r,xmax:i,ymin:a,ymax:s,pts:[],contains:c,isRect:!1,degenerate:!1}}function YI(e,t,r){var i=t._fullLayout,a=r.plotinfo,s=r.dragmode,l=i._lastSelectedSubplot&&i._lastSelectedSubplot===a.id,u=(e.shiftKey||e.altKey)&&!(qg(s)&&m6(s));l&&u&&a.selection&&a.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=a.selection.selectionDefs,r.mergedPolygons=a.selection.mergedPolygons):(!u||!a.selection)&&Ng(r),l||(VI(t),i._lastSelectedSubplot=a.id)}function Ooe(e){return e._fullLayout._activeShapeIndex>=0}function Uoe(e){return e._fullLayout._activeSelectionIndex>=0}function Ng(e,t){var r=e.dragmode,i=e.plotinfo,a=e.gd;Ooe(a)&&a._fullLayout._deactivateShape(a),Uoe(a)&&a._fullLayout._deactivateSelection(a);var s=a._fullLayout,l=s._zoomlayer,u=qg(r),c=y6(r);if(u||c){var v=l.selectAll(".select-outline-"+i.id);if(v&&a._fullLayout._outlining){var m;u&&(m=Coe(v,e)),m&&Fg.call("_guiRelayout",a,{shapes:m});var _;c&&!x6(e)&&(_=Eoe(v,e)),_&&(a._fullLayout._noEmitSelectedAtStart=!0,Fg.call("_guiRelayout",a,{selections:_}).then(function(){t&&Loe(a)})),a._fullLayout._outlining=!1}}i.selection={},i.selection.selectionDefs=e.selectionDefs=[],i.selection.mergedPolygons=e.mergedPolygons=[]}function NI(e){return e._id}function Px(e,t,r,i){if(!e.calcdata)return[];var a=[],s=t.map(NI),l=r.map(NI),u,c,v;for(v=0;v<e.calcdata.length;v++)if(u=e.calcdata[v],c=u[0].trace,!(c.visible!==!0||!c._module||!c._module.selectPoints))if(x6({subplot:i})&&(c.subplot===i||c.geo===i))a.push(Cx(c._module,u,t[0],r[0]));else if(c.type==="splom"){if(c._xaxes[s[0]]&&c._yaxes[l[0]]){var m=Cx(c._module,u,t[0],r[0]);m.scene=e._fullLayout._splomScenes[c.uid],a.push(m)}}else if(c.type==="sankey"){var _=Cx(c._module,u,t[0],r[0]);a.push(_)}else{if(s.indexOf(c.xaxis)===-1&&(!c._xA||!c._xA.overlaying)||l.indexOf(c.yaxis)===-1&&(!c._yA||!c._yA.overlaying))continue;a.push(Cx(c._module,u,nu(e,c.xaxis),nu(e,c.yaxis)))}return a}function Cx(e,t,r,i){return{_module:e,cd:t,xaxis:r,yaxis:i}}function Voe(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==!0}function Hoe(e,t){var r=e[0],i=-1,a=[],s,l;for(l=0;l<t.length;l++)if(s=t[l],r.fullData._expandedIndex===s.cd[0].trace._expandedIndex){if(r.hoverOnBox===!0)break;r.pointNumber!==void 0?i=r.pointNumber:r.binNumber!==void 0&&(i=r.binNumber,a=r.pointNumbers);break}return{pointNumber:i,pointNumbers:a,searchInfo:s}}function BI(e){var t=e.searchInfo.cd[0].trace,r=e.pointNumber,i=e.pointNumbers,a=i.length>0,s=a?i[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(s)>-1:!1}function Goe(e,t){var r=[],i,a,s,l;for(l=0;l<e.length;l++)i=e[l],i.cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&r.push(i);if(r.length===1&&(s=r[0]===t.searchInfo,s&&(a=t.searchInfo.cd[0].trace,a.selectedpoints.length===t.pointNumbers.length))){for(l=0;l<t.pointNumbers.length;l++)if(a.selectedpoints.indexOf(t.pointNumbers[l])<0)return!1;return!0}return!1}function Zoe(e){var t=0,r,i,a;for(a=0;a<e.length;a++)if(r=e[a],i=r.cd[0].trace,i.selectedpoints&&(i.selectedpoints.length>1||(t+=i.selectedpoints.length,t>1)))return!1;return t===1}function Bg(e,t,r){var i;for(i=0;i<t.length;i++){var a=t[i].cd[0].trace._fullInput,s=e._fullLayout._tracePreGUI[a.uid]||{};s.selectedpoints===void 0&&(s.selectedpoints=a._input.selectedpoints||null)}var l;if(r){var u=r.points||[];for(i=0;i<t.length;i++)l=t[i].cd[0].trace,l._input.selectedpoints=l._fullInput.selectedpoints=[],l._fullInput!==l&&(l.selectedpoints=[]);for(var c=0;c<u.length;c++){var v=u[c],m=v.data,_=v.fullData,T=v.pointIndex,M=v.pointIndices;M?([].push.apply(m.selectedpoints,M),l._fullInput!==l&&[].push.apply(_.selectedpoints,M)):(m.selectedpoints.push(T),l._fullInput!==l&&_.selectedpoints.push(T))}}else for(i=0;i<t.length;i++)l=t[i].cd[0].trace,delete l.selectedpoints,delete l._input.selectedpoints,l._fullInput!==l&&delete l._fullInput.selectedpoints;Yoe(e,t)}function Yoe(e,t){for(var r=!1,i=0;i<t.length;i++){var a=t[i],s=a.cd;Fg.traceIs(s[0].trace,"regl")&&(r=!0);var l=a._module,u=l.styleOnSelect||l.style;u&&(u(e,s,s[0].node3),s[0].nodeRangePlot3&&u(e,s,s[0].nodeRangePlot3))}r&&(Doe(e),zoe(e))}function WI(e,t,r){for(var i=r?II.difference:II.union,a=i({regions:e},{regions:[t]}),s=a.regions.reverse(),l=0;l<s.length;l++){var u=s[l];u.subtract=w6(u,s.slice(0,l))}return s}function XI(e,t){if(Array.isArray(e))for(var r=t.cd,i=t.cd[0].trace,a=0;a<e.length;a++)e[a]=Aoe(e[a],i,r);return e}function jI(e,t){for(var r=[],i=0;i<e.length;i++){r[i]=[];for(var a=0;a<e[i].length;a++){r[i][a]=[],r[i][a][0]=a?"L":"M";for(var s=0;s<e[i][a].length;s++)r[i][a].push(e[i][a][s])}t||r[i].push(["Z",r[i][0][1],r[i][0][2]])}return r}function JI(e,t){for(var r=[],i,a=[],s,l=0;l<t.length;l++){var u=t[l];s=u._module.selectPoints(u,e),a.push(s),i=XI(s,u),r=r.concat(i)}return r}function p6(e,t,r,i,a){var s=!!i,l,u,c;a&&(l=a.plotinfo,u=a.xaxes[0]._id,c=a.yaxes[0]._id);var v=[],m=[],_=OI(e),T=e._fullLayout;if(l){var M=T._zoomlayer,k=T.dragmode,L=qg(k),E=y6(k);if(L||E){var I=nu(e,u,"x"),R=nu(e,c,"y");if(I&&R){var N=M.selectAll(".select-outline-"+l.id);if(N&&e._fullLayout._outlining&&N.length){for(var z=N[0][0],B=z.getAttribute("d"),H=koe(B,e,l),V=[],Y=0;Y<H.length;Y++){for(var J=H[Y],re=[],ne=0;ne<J.length;ne++)re.push([Qh(I,J[ne][1]),Qh(R,J[ne][2])]);re.xref=u,re.yref=c,re.subtract=w6(re,V),V.push(re)}_=_.concat(V)}}}}var oe=u&&c?[u+c]:T._subplots.cartesian;Woe(e);for(var ue={},me=0;me<oe.length;me++){var Se=oe[me],Ce=Se.indexOf("y"),Me=Se.slice(0,Ce),_e=Se.slice(Ce),Te=u&&c?r:void 0;if(Te=joe(_,Me,_e,Te),Te){var Ae=i;if(!s){var Le=nu(e,Me,"x"),Ke=nu(e,_e,"y");Ae=Px(e,[Le],[Ke],Se);for(var ct=0;ct<Ae.length;ct++){var it=Ae[ct],ut=it.cd[0],Ge=ut.trace;if(it._module.name==="scattergl"&&!ut.t.xpx){var xt=Ge.x,at=Ge.y,At=Ge._length;ut.t.xpx=[],ut.t.ypx=[];for(var kt=0;kt<At;kt++)ut.t.xpx[kt]=Le.c2p(xt[kt]),ut.t.ypx[kt]=Ke.c2p(at[kt])}it._module.name==="splom"&&(ue[Ge.uid]||(ue[Ge.uid]=!0))}}var mt=JI(Te,Ae);v=v.concat(mt),m=m.concat(Ae)}}var ye={points:v};Bg(e,m,ye);var Re=T.clickmode,xe=Re.indexOf("event")>-1&&t;if(!l&&t){var et=OI(e,!0);if(et.length){var vt=et[0].xref,tt=et[0].yref;if(vt&&tt){var Bt=QI(et),Mt=$I([nu(e,vt,"x"),nu(e,tt,"y")]);Mt(ye,Bt)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:xe&&Og(e,ye),T._reselect=!1}if(!l&&T._deselect){var Ct=T._deselect;u=Ct.xref,c=Ct.yref,Xoe(u,c,m)||KI(e,u,c,i),xe&&(ye.points.length?Og(e,ye):T6(e)),T._deselect=!1}return{eventData:ye,selectionTesters:r}}function Woe(e){var t=e.calcdata;if(t)for(var r=0;r<t.length;r++){var i=t[r][0],a=i.trace,s=e._fullLayout._splomScenes;if(s){var l=s[a.uid];l&&(l.selectBatch=[])}}}function Xoe(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];if(a.xaxis&&a.xaxis._id===e&&a.yaxis&&a.yaxis._id===t)return!0}return!1}function KI(e,t,r,i){i=Px(e,[nu(e,t,"x")],[nu(e,r,"y")],t+r);for(var a=0;a<i.length;a++){var s=i[a];s._module.selectPoints(s,!1)}Bg(e,i)}function joe(e,t,r,i){for(var a,s=0;s<e.length;s++){var l=e[s];if(!(t!==l.xref||r!==l.yref))if(a){var u=!!l.subtract;a=WI(a,l,u),i=b6(a)}else a=[l],i=g6(l)}return i}function OI(e,t){for(var r=[],i=e._fullLayout,a=i.selections,s=a.length,l=0;l<s;l++)if(!(t&&l!==i._activeSelectionIndex)){var u=a[l];if(u){var c=u.xref,v=u.yref,m=nu(e,c,"x"),_=nu(e,v,"y"),T,M,k,L,E;if(u.type==="rect"){E=[];var I=Qh(m,u.x0),R=Qh(m,u.x1),N=Qh(_,u.y0),z=Qh(_,u.y1);E=[[I,N],[I,z],[R,z],[R,N]],T=Math.min(I,R),M=Math.max(I,R),k=Math.min(N,z),L=Math.max(N,z),E.xmin=T,E.xmax=M,E.ymin=k,E.ymax=L,E.xref=c,E.yref=v,E.subtract=!1,E.isRect=!0,r.push(E)}else if(u.type==="path")for(var B=u.path.split("Z"),H=[],V=0;V<B.length;V++){var Y=B[V];if(Y){Y+="Z";var J=RI.extractPathCoords(Y,FI.paramIsX,"raw"),re=RI.extractPathCoords(Y,FI.paramIsY,"raw");T=1/0,M=-1/0,k=1/0,L=-1/0,E=[];for(var ne=0;ne<J.length;ne++){var oe=Qh(m,J[ne]),ue=Qh(_,re[ne]);E.push([oe,ue]),T=Math.min(oe,T),M=Math.max(oe,M),k=Math.min(ue,k),L=Math.max(ue,L)}E.xmin=T,E.xmax=M,E.ymin=k,E.ymax=L,E.xref=c,E.yref=v,E.subtract=w6(E,H),H.push(E),r.push(E)}}}}return r}function w6(e,t){for(var r=!1,i=0;i<t.length;i++)for(var a=t[i],s=0;s<e.length;s++)if(boe(e[s],a)){r=!r;break}return r}function Qh(e,t){return e.type==="date"&&(t=t.replace("_"," ")),e.type==="log"?e.c2p(t):e.r2p(t,null,e.calendar)}function QI(e){for(var t=e.length,r=[],i=0;i<t;i++){var a=e[i];r=r.concat(a),r=r.concat([a[0]])}return Joe(r)}function Joe(e){return e.isRect=e.length===5&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1])),e}function $I(e){return function(t,r){for(var i,a,s=0;s<e.length;s++){var l=e[s],u=l._id,c=u.charAt(0);if(r.isRect){i||(i={});var v=r[c+"min"],m=r[c+"max"];v!==void 0&&m!==void 0&&(i[u]=[qI(l,v),qI(l,m)].sort(Poe))}else a||(a={}),a[u]=r.map(Roe(l))}i&&(t.range=i),a&&(t.lassoPoints=a)}}function Koe(e){var t=e.plotinfo;return t.fillRangeItems||$I(e.xaxes.concat(e.yaxes))}function Qoe(e,t){e.emit("plotly_selecting",t)}function Og(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function T6(e){e.emit("plotly_deselect",null)}eR.exports={reselect:p6,prepSelect:qoe,clearOutline:VI,clearSelectionsCache:Ng,selectOnClick:ZI}});var A6=he((P2e,rR)=>{"use strict";rR.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]});var Vg=he((D2e,aR)=>{"use strict";aR.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}});var um=he((I2e,oR)=>{"use strict";var iR=A6(),nR=No(),Dx=Mo(),$oe=Di().templatedArray,z2e=Vg();oR.exports=$oe("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:nR({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:iR.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:iR.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",Dx.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",Dx.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",Dx.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",Dx.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:nR({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})});var zx=he((R2e,sR)=>{"use strict";sR.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}});var Ix=he((F2e,lR)=>{"use strict";lR.exports=function(t){return{valType:"color",editType:"style",anim:!0}}});var Pc=he((q2e,dR)=>{"use strict";var uR=e5().axisHoverFormat,ese=Wl().texttemplateAttrs,tse=Wl().hovertemplateAttrs,fR=Tc(),rse=No(),ase=pc().dash,ise=pc().pattern,nse=_i(),ose=zx(),Rx=hn().extendFlat,sse=Ix();function cR(e){return{valType:"any",dflt:0,editType:"calc"}}function hR(e){return{valType:"any",editType:"calc"}}function vR(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}dR.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:cR("x"),yperiod:cR("y"),xperiod0:hR("x0"),yperiod0:hR("y0"),xperiodalignment:vR("x"),yperiodalignment:vR("y"),xhoverformat:uR("x"),yhoverformat:uR("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:ese({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:tse({},{keys:ose.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:Rx({},ase,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:sse(!0),fillgradient:Rx({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:ise,marker:Rx({symbol:{valType:"enumerated",values:nse.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:Rx({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},fR("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},fR("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:rse({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}});var M6=he((B2e,yR)=>{"use strict";var pR=um(),mR=Pc().line,lse=pc().dash,Fx=hn().extendFlat,use=ul().overrideAll,fse=Di().templatedArray,N2e=Vg();yR.exports=use(fse("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:Fx({},pR.xref,{}),yref:Fx({},pR.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:mR.color,width:Fx({},mR.width,{min:1,dflt:1}),dash:Fx({},lse,{dflt:"dot"})}}),"arraydraw","from-root")});var bR=he((O2e,xR)=>{"use strict";var gR=Nt(),qx=Ii(),cse=Kl(),hse=M6(),_R=Kh();xR.exports=function(t,r){cse(t,r,{name:"selections",handleItemDefaults:vse});for(var i=r.selections,a=0;a<i.length;a++){var s=i[a];s&&s.path===void 0&&(s.x0===void 0||s.x1===void 0||s.y0===void 0||s.y1===void 0)&&(r.selections[a]=null)}};function vse(e,t,r){function i(H,V){return gR.coerce(e,t,hse,H,V)}var a=i("path"),s=a?"path":"rect",l=i("type",s),u=l!=="path";u&&delete t.path,i("opacity"),i("line.color"),i("line.width"),i("line.dash");for(var c=["x","y"],v=0;v<2;v++){var m=c[v],_={_fullLayout:r},T,M,k,L=qx.coerceRef(e,t,_,m);if(T=qx.getFromId(_,L),T._selectionIndices.push(t._index),k=_R.rangeToShapePosition(T),M=_R.shapePositionToRange(T),u){var E=m+"0",I=m+"1",R=e[E],N=e[I];e[E]=M(e[E],!0),e[I]=M(e[I],!0),qx.coercePosition(t,_,i,L,E),qx.coercePosition(t,_,i,L,I);var z=t[E],B=t[I];z!==void 0&&B!==void 0&&(t[E]=k(z),t[I]=k(B),e[E]=R,e[I]=N)}}u&&gR.noneOrAll(e,t,["x0","x1","y0","y1"])}});var TR=he((U2e,wR)=>{"use strict";wR.exports=function(t,r,i){i("newselection.mode");var a=i("newselection.line.width");a&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")}});var Hg=he((V2e,SR)=>{"use strict";var dse=sa(),AR=Nt(),MR=ro();SR.exports=function(t){return function(i,a){var s=i[t];if(Array.isArray(s))for(var l=dse.subplotsRegistry.cartesian,u=l.idRegex,c=a._subplots,v=c.xaxis,m=c.yaxis,_=c.cartesian,T=a._has("cartesian")||a._has("gl2d"),M=0;M<s.length;M++){var k=s[M];if(AR.isPlainObject(k)){var L=MR.cleanId(k.xref,"x",!1),E=MR.cleanId(k.yref,"y",!1),I=u.x.test(L),R=u.y.test(E);if(I||R){T||AR.pushUnique(a._basePlotModules,l);var N=!1;I&&v.indexOf(L)===-1&&(v.push(L),N=!0),R&&m.indexOf(E)===-1&&(m.push(E),N=!0),N&&I&&R&&_.push(L+E)}}}}}});var Vf=he((H2e,CR)=>{"use strict";var kR=c6(),Gg=tR();CR.exports={moduleType:"component",name:"selections",layoutAttributes:M6(),supplyLayoutDefaults:bR(),supplyDrawNewSelectionDefaults:TR(),includeBasePlot:Hg()("selections"),draw:kR.draw,drawOne:kR.drawOne,reselect:Gg.reselect,prepSelect:Gg.prepSelect,clearOutline:Gg.clearOutline,clearSelectionsCache:Gg.clearSelectionsCache,selectOnClick:Gg.selectOnClick}});var jR=he((G2e,XR)=>{"use strict";var L6=Ka(),ou=Nt(),ER=ou.numberFormat,pse=Sf(),mse=u4(),Nx=sa(),NR=ou.strTranslate,yse=ho(),LR=Ua(),$h=_i(),gse=Bf(),PR=Ii(),_se=Yh(),xse=$l(),BR=Nd(),Bx=BR.selectingOrDrawing,bse=BR.freeMode,wse=as().FROM_TL,Tse=tx(),Ase=wx().redrawReglTraces,Mse=jn(),k6=ro().getFromId,Sse=Vf().prepSelect,kse=Vf().clearOutline,Cse=Vf().selectOnClick,S6=a6(),P6=Mo(),DR=P6.MINDRAG,xs=P6.MINZOOM,zR=!0;function Ese(e,t,r,i,a,s,l,u){var c=e._fullLayout._zoomlayer,v=l+u==="nsew",m=(l+u).length===1,_,T,M,k,L,E,I,R,N,z,B,H,V,Y,J,re,ne,oe,ue,me,Se,Ce,Me;r+=t.yaxis._shift;function _e(){if(_=t.xaxis,T=t.yaxis,N=_._length,z=T._length,I=_._offset,R=T._offset,M={},M[_._id]=_,k={},k[T._id]=T,l&&u)for(var Tt=t.overlays,wt=0;wt<Tt.length;wt++){var Vt=Tt[wt].xaxis;M[Vt._id]=Vt;var Kt=Tt[wt].yaxis;k[Kt._id]=Kt}L=qR(M),E=qR(k),V=IR(L,u),Y=IR(E,l),J=!Y&&!V,H=FR(e,e._fullLayout._axisMatchGroups,M,k),B=FR(e,e._fullLayout._axisConstraintGroups,M,k,H);var Ht=B.isSubplotConstrained||H.isSubplotConstrained;re=u||Ht,ne=l||Ht;var Ut=e._fullLayout;oe=Ut._has("scattergl"),ue=Ut._has("splom"),me=Ut._has("svg")}_e();var Te=Dse(Y+V,e._fullLayout.dragmode,v),Ae=UR(t,l+u+"drag",Te,r,i,a,s);if(J&&!v)return Ae.onmousedown=null,Ae.style.pointerEvents="none",Ae;var Le={element:Ae,gd:e,plotinfo:t};Le.prepFn=function(Tt,wt,Vt){var Kt=Le.dragmode,Ht=e._fullLayout.dragmode;Ht!==Kt&&(Le.dragmode=Ht),_e(),Ce=e._fullLayout._invScaleX,Me=e._fullLayout._invScaleY,J||(v?Tt.shiftKey?Ht==="pan"?Ht="zoom":Bx(Ht)||(Ht="pan"):Tt.ctrlKey&&(Ht="pan"):Ht="pan"),bse(Ht)?Le.minDrag=1:Le.minDrag=void 0,Bx(Ht)?(Le.xaxes=L,Le.yaxes=E,Sse(Tt,wt,Vt,Le,Ht)):(Le.clickFn=ct,Bx(Kt)&&Ke(),J||(Ht==="zoom"?(Le.moveFn=et,Le.doneFn=tt,Le.minDrag=1,xe(Tt,wt,Vt)):Ht==="pan"&&(Le.moveFn=gt,Le.doneFn=Ne))),e._fullLayout._redrag=function(){var Ut=e._dragdata;if(Ut&&Ut.element===Ae){var er=e._fullLayout.dragmode;Bx(er)||(_e(),ft([0,0,N,z]),Le.moveFn(Ut.dx,Ut.dy))}}};function Ke(){Le.plotinfo.selection=!1,kse(e)}function ct(Tt,wt){var Vt=Le.gd;if(Vt._fullLayout._activeShapeIndex>=0){Vt._fullLayout._deactivateShape(Vt);return}var Kt=Vt._fullLayout.clickmode;if(E6(Vt),Tt===2&&!m&&Gt(),v)Kt.indexOf("select")>-1&&Cse(wt,Vt,L,E,t.id,Le),Kt.indexOf("event")>-1&&gse.click(Vt,wt,t.id);else if(Tt===1&&m){var Ht=l?T:_,Ut=l==="s"||u==="w"?0:1,er=Ht._name+".range["+Ut+"]",Mr=Lse(Ht,Ut),br="left",Pt="middle";if(Ht.fixedrange)return;l?(Pt=l==="n"?"top":"bottom",Ht.side==="right"&&(br="right")):u==="e"&&(br="right"),Vt._context.showAxisRangeEntryBoxes&&L6.select(Ae).call(yse.makeEditable,{gd:Vt,immediate:!0,background:Vt._fullLayout.paper_bgcolor,text:String(Mr),fill:Ht.tickfont?Ht.tickfont.color:"#444",horizontalAlign:br,verticalAlign:Pt}).on("edit",function(Fe){var He=Ht.d2r(Fe);He!==void 0&&Nx.call("_guiRelayout",Vt,er,He)})}}xse.init(Le);var it,ut,Ge,xt,at,At,kt,mt,ye,Re;function xe(Tt,wt,Vt){var Kt=Ae.getBoundingClientRect();it=wt-Kt.left,ut=Vt-Kt.top,e._fullLayout._calcInverseTransform(e);var Ht=ou.apply3DTransform(e._fullLayout._invTransform)(it,ut);it=Ht[0],ut=Ht[1],Ge={l:it,r:it,w:0,t:ut,b:ut,h:0},xt=e._hmpixcount?e._hmlumcount/e._hmpixcount:pse(e._fullLayout.plot_bgcolor).getLuminance(),at="M0,0H"+N+"V"+z+"H0V0",At=!1,kt="xy",Re=!1,mt=VR(c,xt,I,R,at),ye=HR(c,I,R)}function et(Tt,wt){if(e._transitioningWithDuration)return!1;var Vt=Math.max(0,Math.min(N,Ce*Tt+it)),Kt=Math.max(0,Math.min(z,Me*wt+ut)),Ht=Math.abs(Vt-it),Ut=Math.abs(Kt-ut);Ge.l=Math.min(it,Vt),Ge.r=Math.max(it,Vt),Ge.t=Math.min(ut,Kt),Ge.b=Math.max(ut,Kt);function er(){kt="",Ge.r=Ge.l,Ge.t=Ge.b,ye.attr("d","M0,0Z")}if(B.isSubplotConstrained)Ht>xs||Ut>xs?(kt="xy",Ht/N>Ut/z?(Ut=Ht*z/N,ut>Kt?Ge.t=ut-Ut:Ge.b=ut+Ut):(Ht=Ut*N/z,it>Vt?Ge.l=it-Ht:Ge.r=it+Ht),ye.attr("d",Ox(Ge))):er();else if(H.isSubplotConstrained)if(Ht>xs||Ut>xs){kt="xy";var Mr=Math.min(Ge.l/N,(z-Ge.b)/z),br=Math.max(Ge.r/N,(z-Ge.t)/z);Ge.l=Mr*N,Ge.r=br*N,Ge.b=(1-Mr)*z,Ge.t=(1-br)*z,ye.attr("d",Ox(Ge))}else er();else!Y||Ut<Math.min(Math.max(Ht*.6,DR),xs)?Ht<DR||!V?er():(Ge.t=0,Ge.b=z,kt="x",ye.attr("d",zse(Ge,ut))):!V||Ht<Math.min(Ut*.6,xs)?(Ge.l=0,Ge.r=N,kt="y",ye.attr("d",Ise(Ge,it))):(kt="xy",ye.attr("d",Ox(Ge)));Ge.w=Ge.r-Ge.l,Ge.h=Ge.b-Ge.t,kt&&(Re=!0),e._dragged=Re,GR(mt,ye,Ge,at,At,xt),vt(),e.emit("plotly_relayouting",Se),At=!0}function vt(){Se={},(kt==="xy"||kt==="x")&&(C6(L,Ge.l/N,Ge.r/N,Se,B.xaxes),Et("x",Se)),(kt==="xy"||kt==="y")&&(C6(E,(z-Ge.b)/z,(z-Ge.t)/z,Se,B.yaxes),Et("y",Se))}function tt(){vt(),E6(e),Ne(),YR(e)}var Bt=[0,0,N,z],Mt=null,Ct=P6.REDRAWDELAY,Rt=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function Ot(Tt){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom)return;if(Ke(),e._transitioningWithDuration){Tt.preventDefault(),Tt.stopPropagation();return}_e(),clearTimeout(Mt);var wt=-Tt.deltaY;if(isFinite(wt)||(wt=Tt.wheelDelta/10),!isFinite(wt)){ou.log("Did not find wheel motion attributes: ",Tt);return}var Vt=Math.exp(-Math.min(Math.max(wt,-20),20)/200),Kt=Rt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Ht=(Tt.clientX-Kt.left)/Kt.width,Ut=(Kt.bottom-Tt.clientY)/Kt.height,er;function Mr(br,Pt,Fe){if(br.fixedrange)return;var He=ou.simpleMap(br.range,br.r2l),bt=He[0]+(He[1]-He[0])*Pt;function dt(gr){return br.l2r(bt+(gr-bt)*Fe)}br.range=He.map(dt)}if(re){for(u||(Ht=.5),er=0;er<L.length;er++)Mr(L[er],Ht,Vt);Et("x"),Bt[2]*=Vt,Bt[0]+=Bt[2]*Ht*(1/Vt-1)}if(ne){for(l||(Ut=.5),er=0;er<E.length;er++)Mr(E[er],Ut,Vt);Et("y"),Bt[3]*=Vt,Bt[1]+=Bt[3]*(1-Ut)*(1/Vt-1)}ft(Bt),ir(),e.emit("plotly_relayouting",Se),Mt=setTimeout(function(){e._fullLayout&&(Bt=[0,0,N,z],Ne())},Ct),Tt.preventDefault()}l.length*u.length!==1&&WR(Ae,Ot);function gt(Tt,wt){if(Tt=Tt*Ce,wt=wt*Me,e._transitioningWithDuration)return;if(e._fullLayout._replotting=!0,V==="ew"||Y==="ns"){var Vt=V?-Tt:0,Kt=Y?-wt:0;if(H.isSubplotConstrained){if(V&&Y){var Ht=(Tt/N-wt/z)/2;Tt=Ht*N,wt=-Ht*z,Vt=-Tt,Kt=-wt}Y?Vt=-Kt*N/z:Kt=-Vt*z/N}V&&(RR(L,Tt),Et("x")),Y&&(RR(E,wt),Et("y")),ft([Vt,Kt,N,z]),ir(),e.emit("plotly_relayouting",Se);return}function Ut(dt,gr,Lr){for(var Ar=1-gr,Hr,xa,Ca=0;Ca<dt.length;Ca++){var Pa=dt[Ca];if(!Pa.fixedrange){Hr=Pa,xa=Pa._rl[Ar]+(Pa._rl[gr]-Pa._rl[Ar])/Pse(Lr/Pa._length);var Fi=Pa.l2r(xa);Fi!==!1&&Fi!==void 0&&(Pa.range[gr]=Fi)}}return Hr._length*(Hr._rl[gr]-xa)/(Hr._rl[gr]-Hr._rl[Ar])}var er=V==="w"==(Y==="n")?1:-1;if(V&&Y&&(B.isSubplotConstrained||H.isSubplotConstrained)){var Mr=(Tt/N+er*wt/z)/2;Tt=Mr*N,wt=er*Mr*z}var br,Pt;if(V==="w"?Tt=Ut(L,0,Tt):V==="e"?Tt=Ut(L,1,-Tt):V||(Tt=0),Y==="n"?wt=Ut(E,1,wt):Y==="s"?wt=Ut(E,0,-wt):Y||(wt=0),br=V==="w"?Tt:0,Pt=Y==="n"?wt:0,B.isSubplotConstrained&&!H.isSubplotConstrained||H.isSubplotConstrained&&V&&Y&&er>0){var Fe;if(H.isSubplotConstrained||!V&&Y.length===1){for(Fe=0;Fe<L.length;Fe++)L[Fe].range=L[Fe]._r.slice(),S6(L[Fe],1-wt/z);Tt=wt*N/z,br=Tt/2}if(H.isSubplotConstrained||!Y&&V.length===1){for(Fe=0;Fe<E.length;Fe++)E[Fe].range=E[Fe]._r.slice(),S6(E[Fe],1-Tt/N);wt=Tt*z/N,Pt=wt/2}}(!H.isSubplotConstrained||!Y)&&Et("x"),(!H.isSubplotConstrained||!V)&&Et("y");var He=N-Tt,bt=z-wt;H.isSubplotConstrained&&!(V&&Y)&&(V?(Pt=br?0:Tt*z/N,bt=He*z/N):(br=Pt?0:wt*N/z,He=bt*N/z)),ft([br,Pt,He,bt]),ir(),e.emit("plotly_relayouting",Se)}function Et(Tt,wt){for(var Vt=H.isSubplotConstrained?{x:E,y:L}[Tt]:H[Tt+"axes"],Kt=H.isSubplotConstrained?{x:L,y:E}[Tt]:[],Ht=0;Ht<Vt.length;Ht++){var Ut=Vt[Ht],er=Ut._id,Mr=H.xLinks[er]||H.yLinks[er],br=Kt[0]||M[Mr]||k[Mr];br&&(wt?(wt[Ut._name+".range[0]"]=wt[br._name+".range[0]"],wt[Ut._name+".range[1]"]=wt[br._name+".range[1]"]):Ut.range=br.range.slice())}}function ir(){var Tt=[],wt;function Vt(er){for(wt=0;wt<er.length;wt++)er[wt].fixedrange||Tt.push(er[wt]._id)}function Kt(er,Mr){for(wt=0;wt<er.length;wt++){var br=er[wt],Pt=br[Mr];!br.fixedrange&&Pt.tickmode==="sync"&&Tt.push(Pt._id)}}for(re&&(Vt(L),Vt(B.xaxes),Vt(H.xaxes),Kt(t.overlays,"xaxis")),ne&&(Vt(E),Vt(B.yaxes),Vt(H.yaxes),Kt(t.overlays,"yaxis")),Se={},wt=0;wt<Tt.length;wt++){var Ht=Tt[wt],Ut=k6(e,Ht);PR.drawOne(e,Ut,{skipTitle:!0}),Se[Ut._name+".range[0]"]=Ut.range[0],Se[Ut._name+".range[1]"]=Ut.range[1]}PR.redrawComponents(e,Tt)}function Gt(){if(!e._transitioningWithDuration){var Tt=e._context.doubleClick,wt=[];V&&(wt=wt.concat(L)),Y&&(wt=wt.concat(E)),H.xaxes&&(wt=wt.concat(H.xaxes)),H.yaxes&&(wt=wt.concat(H.yaxes));var Vt={},Kt,Ht;if(Tt==="reset+autosize")for(Tt="autosize",Ht=0;Ht<wt.length;Ht++){Kt=wt[Ht];var Ut=Kt._rangeInitial0,er=Kt._rangeInitial1,Mr=Ut!==void 0||er!==void 0;if(Mr&&(Ut!==void 0&&Ut!==Kt.range[0]||er!==void 0&&er!==Kt.range[1])||!Mr&&Kt.autorange!==!0){Tt="reset";break}}if(Tt==="autosize")for(Ht=0;Ht<wt.length;Ht++)Kt=wt[Ht],Kt.fixedrange||(Vt[Kt._name+".autorange"]=!0);else if(Tt==="reset"){for((V||B.isSubplotConstrained)&&(wt=wt.concat(B.xaxes)),Y&&!B.isSubplotConstrained&&(wt=wt.concat(B.yaxes)),B.isSubplotConstrained&&(V?Y||(wt=wt.concat(E)):wt=wt.concat(L)),Ht=0;Ht<wt.length;Ht++)if(Kt=wt[Ht],!Kt.fixedrange){var br=Kt._name,Pt=Kt._autorangeInitial;Kt._rangeInitial0===void 0&&Kt._rangeInitial1===void 0?Vt[br+".autorange"]=!0:Kt._rangeInitial0===void 0?(Vt[br+".autorange"]=Pt,Vt[br+".range"]=[null,Kt._rangeInitial1]):Kt._rangeInitial1===void 0?(Vt[br+".range"]=[Kt._rangeInitial0,null],Vt[br+".autorange"]=Pt):Vt[br+".range"]=[Kt._rangeInitial0,Kt._rangeInitial1]}}e.emit("plotly_doubleclick",null),Nx.call("_guiRelayout",e,Vt)}}function Ne(){ft([0,0,N,z]),ou.syncOrAsync([Mse.previousPromises,function(){e._fullLayout._replotting=!1,Nx.call("_guiRelayout",e,Se)}],e)}function ft(Tt){var wt=e._fullLayout,Vt=wt._plots,Kt=wt._subplots.cartesian,Ht,Ut,er,Mr;if(ue&&Nx.subplotsRegistry.splom.drag(e),oe){for(Ht=0;Ht<Kt.length;Ht++)if(Ut=Vt[Kt[Ht]],er=Ut.xaxis,Mr=Ut.yaxis,Ut._scene){er.limitRange&&er.limitRange(),Mr.limitRange&&Mr.limitRange();var br=ou.simpleMap(er.range,er.r2l),Pt=ou.simpleMap(Mr.range,Mr.r2l);Ut._scene.update({range:[br[0],Pt[0],br[1],Pt[1]]})}}if((ue||oe)&&(Tse(e),Ase(e)),me){var Fe=Tt[2]/_._length,He=Tt[3]/T._length;for(Ht=0;Ht<Kt.length;Ht++){Ut=Vt[Kt[Ht]],er=Ut.xaxis,Mr=Ut.yaxis;var bt=(re||H.isSubplotConstrained)&&!er.fixedrange&&M[er._id],dt=(ne||H.isSubplotConstrained)&&!Mr.fixedrange&&k[Mr._id],gr,Lr,Ar,Hr;if(bt?(gr=Fe,Ar=u||H.isSubplotConstrained?Tt[0]:pr(er,gr)):H.xaHash[er._id]?(gr=Fe,Ar=Tt[0]*er._length/_._length):H.yaHash[er._id]?(gr=He,Ar=Y==="ns"?-Tt[1]*er._length/T._length:pr(er,gr,{n:"top",s:"bottom"}[Y])):(gr=pt(er,Fe,He),Ar=xr(er,gr)),gr>1&&(er.maxallowed!==void 0&&re===(er.range[0]<er.range[1]?"e":"w")||er.minallowed!==void 0&&re===(er.range[0]<er.range[1]?"w":"e"))&&(gr=1,Ar=0),dt?(Lr=He,Hr=l||H.isSubplotConstrained?Tt[1]:pr(Mr,Lr)):H.yaHash[Mr._id]?(Lr=He,Hr=Tt[1]*Mr._length/T._length):H.xaHash[Mr._id]?(Lr=Fe,Hr=V==="ew"?-Tt[0]*Mr._length/_._length:pr(Mr,Lr,{e:"right",w:"left"}[V])):(Lr=pt(Mr,Fe,He),Hr=xr(Mr,Lr)),Lr>1&&(Mr.maxallowed!==void 0&&ne===(Mr.range[0]<Mr.range[1]?"n":"s")||Mr.minallowed!==void 0&&ne===(Mr.range[0]<Mr.range[1]?"s":"n"))&&(Lr=1,Hr=0),!(!gr&&!Lr)){gr||(gr=1),Lr||(Lr=1);var xa=er._offset-Ar/gr,Ca=Mr._offset-Hr/Lr;Ut.clipRect.call($h.setTranslate,Ar,Hr).call($h.setScale,gr,Lr),Ut.plot.call($h.setTranslate,xa,Ca).call($h.setScale,1/gr,1/Lr),(gr!==Ut.xScaleFactor||Lr!==Ut.yScaleFactor)&&($h.setPointGroupScale(Ut.zoomScalePts,gr,Lr),$h.setTextPointsScale(Ut.zoomScaleTxt,gr,Lr)),$h.hideOutsideRangePoints(Ut.clipOnAxisFalseTraces,Ut),Ut.xScaleFactor=gr,Ut.yScaleFactor=Lr}}}}function pt(Tt,wt,Vt){return Tt.fixedrange?0:re&&B.xaHash[Tt._id]?wt:ne&&(B.isSubplotConstrained?B.xaHash:B.yaHash)[Tt._id]?Vt:0}function xr(Tt,wt){return wt?(Tt.range=Tt._r.slice(),S6(Tt,wt),pr(Tt,wt)):0}function pr(Tt,wt,Vt){return Tt._length*(1-wt)*wse[Vt||Tt.constraintoward||"middle"]}return Ae}function OR(e,t,r,i){var a=ou.ensureSingle(e.draglayer,t,r,function(s){s.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return a.call(_se,i),a.node()}function UR(e,t,r,i,a,s,l){var u=OR(e,"rect",t,r);return L6.select(u).call($h.setRect,i,a,s,l),u}function IR(e,t){for(var r=0;r<e.length;r++)if(!e[r].fixedrange)return t;return""}function Lse(e,t){var r=e.range[t],i=Math.abs(r-e.range[1-t]),a;return e.type==="date"?r:e.type==="log"?(a=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,ER("."+a+"g")(Math.pow(10,r))):(a=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,ER("."+String(a)+"g")(r))}function C6(e,t,r,i,a){for(var s=0;s<e.length;s++){var l=e[s];if(!l.fixedrange)if(l.rangebreaks){var u=l._id.charAt(0)==="y",c=u?1-t:t,v=u?1-r:r;i[l._name+".range[0]"]=l.l2r(l.p2l(c*l._length)),i[l._name+".range[1]"]=l.l2r(l.p2l(v*l._length))}else{var m=l._rl[0],_=l._rl[1]-m;i[l._name+".range[0]"]=l.l2r(m+_*t),i[l._name+".range[1]"]=l.l2r(m+_*r)}}if(a&&a.length){var T=(t+(1-r))/2;C6(a,T,1-T,i,[])}}function RR(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i.fixedrange){if(i.rangebreaks){var a=0,s=i._length,l=i.p2l(a+t)-i.p2l(a),u=i.p2l(s+t)-i.p2l(s),c=(l+u)/2;i.range=[i.l2r(i._rl[0]-c),i.l2r(i._rl[1]-c)]}else i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)];i.limitRange&&i.limitRange()}}}function Pse(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function Dse(e,t,r){return e?e==="nsew"?r?"":t==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function VR(e,t,r,i,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",NR(r,i)).attr("d",a+"Z")}function HR(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:LR.background,stroke:LR.defaultLine,"stroke-width":1,opacity:0}).attr("transform",NR(t,r)).attr("d","M0,0Z")}function GR(e,t,r,i,a,s){e.attr("d",i+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),ZR(e,t,a,s)}function ZR(e,t,r,i){r||(e.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function E6(e){L6.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function YR(e){zR&&e.data&&e._context.showTips&&(ou.notifier(ou._(e,"Double-click to zoom back out"),"long"),zR=!1)}function zse(e,t){return"M"+(e.l-.5)+","+(t-xs-.5)+"h-3v"+(2*xs+1)+"h3ZM"+(e.r+.5)+","+(t-xs-.5)+"h3v"+(2*xs+1)+"h-3Z"}function Ise(e,t){return"M"+(t-xs-.5)+","+(e.t-.5)+"v-3h"+(2*xs+1)+"v3ZM"+(t-xs-.5)+","+(e.b+.5)+"v3h"+(2*xs+1)+"v-3Z"}function Ox(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,xs)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function FR(e,t,r,i,a){for(var s=!1,l={},u={},c,v,m,_,T=(a||{}).xaHash,M=(a||{}).yaHash,k=0;k<t.length;k++){var L=t[k];for(c in r)if(L[c]){for(m in L)!(a&&(T[m]||M[m]))&&!(m.charAt(0)==="x"?r:i)[m]&&(l[m]=c);for(v in i)!(a&&(T[v]||M[v]))&&L[v]&&(s=!0)}for(v in i)if(L[v])for(_ in L)!(a&&(T[_]||M[_]))&&!(_.charAt(0)==="x"?r:i)[_]&&(u[_]=v)}s&&(ou.extendFlat(l,u),u={});var E={},I=[];for(m in l){var R=k6(e,m);I.push(R),E[R._id]=R}var N={},z=[];for(_ in u){var B=k6(e,_);z.push(B),N[B._id]=B}return{xaHash:E,yaHash:N,xaxes:I,yaxes:z,xLinks:l,yLinks:u,isSubplotConstrained:s}}function WR(e,t){if(!mse)e.onwheel!==void 0?e.onwheel=t:e.onmousewheel!==void 0?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}));else{var r=e.onwheel!==void 0?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(r,e._onwheel),e._onwheel=t,e.addEventListener(r,t,{passive:!1})}}function qR(e){var t=[];for(var r in e)t.push(e[r]);return t}XR.exports={makeDragBox:Ese,makeDragger:OR,makeRectDragger:UR,makeZoombox:VR,makeCorners:HR,updateZoombox:GR,xyCorners:Ox,transitionZoombox:ZR,removeZoombox:E6,showDoubleClickNotifier:YR,attachWheelEventHandler:WR}});var D6=he(Vx=>{"use strict";var Rse=Ka(),Ux=Bf(),Fse=$l(),qse=Yh(),Hu=jR().makeDragBox,oo=Mo().DRAGGERSIZE;Vx.initInteractions=function(t){var r=t._fullLayout;if(t._context.staticPlot){Rse.select(t).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var i=Object.keys(r._plots||{}).sort(function(s,l){if((r._plots[s].mainplot&&!0)===(r._plots[l].mainplot&&!0)){var u=s.split("y"),c=l.split("y");return u[0]===c[0]?Number(u[1]||1)-Number(c[1]||1):Number(u[0]||1)-Number(c[0]||1)}return r._plots[s].mainplot?1:-1});i.forEach(function(s){var l=r._plots[s],u=l.xaxis,c=l.yaxis;if(!l.mainplot){var v=Hu(t,l,u._offset,c._offset,u._length,c._length,"ns","ew");v.onmousemove=function(T){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===s&&t._fullLayout._plots[s]&&Ux.hover(t,T,s)},Ux.hover(t,T,s),t._fullLayout._lasthover=v,t._fullLayout._hoversubplot=s},v.onmouseout=function(T){t._dragging||(t._fullLayout._hoversubplot=null,Fse.unhover(t,T))},t._context.showAxisDragHandles&&(Hu(t,l,u._offset-oo,c._offset-oo,oo,oo,"n","w"),Hu(t,l,u._offset+u._length,c._offset-oo,oo,oo,"n","e"),Hu(t,l,u._offset-oo,c._offset+c._length,oo,oo,"s","w"),Hu(t,l,u._offset+u._length,c._offset+c._length,oo,oo,"s","e"))}if(t._context.showAxisDragHandles){if(s===u._mainSubplot){var m=u._mainLinePosition;u.side==="top"&&(m-=oo),Hu(t,l,u._offset+u._length*.1,m,u._length*.8,oo,"","ew"),Hu(t,l,u._offset,m,u._length*.1,oo,"","w"),Hu(t,l,u._offset+u._length*.9,m,u._length*.1,oo,"","e")}if(s===c._mainSubplot){var _=c._mainLinePosition;c.side!=="right"&&(_-=oo),Hu(t,l,_,c._offset+c._length*.1,oo,c._length*.8,"ns",""),Hu(t,l,_,c._offset+c._length*.9,oo,c._length*.1,"s",""),Hu(t,l,_,c._offset,oo,c._length*.1,"n","")}}});var a=r._hoverlayer.node();a.onmousemove=function(s){s.target=t._fullLayout._lasthover,Ux.hover(t,s,r._hoversubplot)},a.onclick=function(s){s.target=t._fullLayout._lasthover,Ux.click(t,s)},a.onmousedown=function(s){t._fullLayout._lasthover.onmousedown(s)},Vx.updateFx(t)}};Vx.updateFx=function(e){var t=e._fullLayout,r=t.dragmode==="pan"?"move":"crosshair";qse(t._draggers,r)}});var QR=he((Y2e,KR)=>{"use strict";var JR=sa();KR.exports=function(t){for(var r=JR.layoutArrayContainers,i=JR.layoutArrayRegexes,a=t.split("[")[0],s,l,u=0;u<i.length;u++)if(l=t.match(i[u]),l&&l.index===0){s=l[0];break}if(s||(s=r[r.indexOf(a)]),!s)return!1;var c=t.substr(s.length);return c?(l=c.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),l?{array:s,index:Number(l[1]),property:l[3]||""}:!1):{array:s,index:"",property:""}}});var eF=he(Yg=>{"use strict";var Nse=dc(),z6=M_(),Zg=Ch(),Bse=Aw().sorterAsc,I6=sa();Yg.containerArrayMatch=QR();var Ose=Yg.isAddVal=function(t){return t==="add"||Nse(t)},$R=Yg.isRemoveVal=function(t){return t===null||t==="remove"};Yg.applyContainerArrayChanges=function(t,r,i,a,s){var l=r.astr,u=I6.getComponentMethod(l,"supplyLayoutDefaults"),c=I6.getComponentMethod(l,"draw"),v=I6.getComponentMethod(l,"drawOne"),m=a.replot||a.recalc||u===z6||c===z6,_=t.layout,T=t._fullLayout;if(i[""]){Object.keys(i).length>1&&Zg.warn("Full array edits are incompatible with other edits",l);var M=i[""][""];if($R(M))r.set(null);else if(Array.isArray(M))r.set(M);else return Zg.warn("Unrecognized full array edit value",l,M),!0;return m?!1:(u(_,T),c(t),!0)}var k=Object.keys(i).map(Number).sort(Bse),L=r.get(),E=L||[],I=s(T,l).get(),R=[],N=-1,z=E.length,B,H,V,Y,J,re,ne,oe;for(B=0;B<k.length;B++){if(V=k[B],Y=i[V],J=Object.keys(Y),re=Y[""],ne=Ose(re),V<0||V>E.length-(ne?0:1)){Zg.warn("index out of range",l,V);continue}if(re!==void 0)J.length>1&&Zg.warn("Insertion & removal are incompatible with edits to the same index.",l,V),$R(re)?R.push(V):ne?(re==="add"&&(re={}),E.splice(V,0,re),I&&I.splice(V,0,{})):Zg.warn("Unrecognized full object edit value",l,V,re),N===-1&&(N=V);else for(H=0;H<J.length;H++)oe=l+"["+V+"].",s(E[V],J[H],oe).set(Y[J[H]])}for(B=R.length-1;B>=0;B--)E.splice(R[B],1),I&&I.splice(R[B],1);if(E.length?L||r.set(E):r.set(null),m)return!1;if(u(_,T),v!==z6){var ue;if(N===-1)ue=k;else{for(z=Math.max(E.length,z),ue=[],B=0;B<k.length&&(V=k[B],!(V>=N));B++)ue.push(V);for(B=N;B<z;B++)ue.push(B)}for(B=0;B<ue.length;B++)v(t,ue[B])}else c(t);return!0}});var sF=he(su=>{"use strict";var iF=Ia(),Use=yw(),nF=sa(),ws=Nt(),Xg=jn(),oF=ro(),Vd=Ua(),jg=oF.cleanId,Vse=oF.getFromTrace,Wg=nF.traceIs;su.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&ws.log("Clearing previous rejected promises from queue."),e._promises=[]};su.cleanLayout=function(e){var t,r;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var i=(Xg.subplotsRegistry.cartesian||{}).attrRegex,a=(Xg.subplotsRegistry.polar||{}).attrRegex,s=(Xg.subplotsRegistry.ternary||{}).attrRegex,l=(Xg.subplotsRegistry.gl3d||{}).attrRegex,u=Object.keys(e);for(t=0;t<u.length;t++){var c=u[t];if(i&&i.test(c)){var v=e[c];v.anchor&&v.anchor!=="free"&&(v.anchor=jg(v.anchor)),v.overlaying&&(v.overlaying=jg(v.overlaying)),v.type||(v.isdate?v.type="date":v.islog?v.type="log":v.isdate===!1&&v.islog===!1&&(v.type="linear")),(v.autorange==="withzero"||v.autorange==="tozero")&&(v.autorange=!0,v.rangemode="tozero"),v.insiderange&&delete v.range,delete v.islog,delete v.isdate,delete v.categories,Hx(v,"domain")&&delete v.domain,v.autotick!==void 0&&(v.tickmode===void 0&&(v.tickmode=v.autotick?"auto":"linear"),delete v.autotick),bs(v)}else if(a&&a.test(c)){var m=e[c];bs(m.radialaxis)}else if(s&&s.test(c)){var _=e[c];bs(_.aaxis),bs(_.baxis),bs(_.caxis)}else if(l&&l.test(c)){var T=e[c],M=T.cameraposition;if(Array.isArray(M)&&M[0].length===4){var k=M[0],L=M[1],E=M[2],I=Use([],k),R=[];for(r=0;r<3;++r)R[r]=L[r]+E*I[2+4*r];T.camera={eye:{x:R[0],y:R[1],z:R[2]},center:{x:L[0],y:L[1],z:L[2]},up:{x:0,y:0,z:1}},delete T.cameraposition}bs(T.xaxis),bs(T.yaxis),bs(T.zaxis)}}var N=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<N;t++){var z=e.annotations[t];ws.isPlainObject(z)&&(z.ref&&(z.ref==="paper"?(z.xref="paper",z.yref="paper"):z.ref==="data"&&(z.xref="x",z.yref="y"),delete z.ref),fm(z,"xref"),fm(z,"yref"))}var B=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<B;t++){var H=e.shapes[t];ws.isPlainObject(H)&&(fm(H,"xref"),fm(H,"yref"))}var V=Array.isArray(e.images)?e.images.length:0;for(t=0;t<V;t++){var Y=e.images[t];ws.isPlainObject(Y)&&(fm(Y,"xref"),fm(Y,"yref"))}var J=e.legend;return J&&(J.x>3?(J.x=1.02,J.xanchor="left"):J.x<-2&&(J.x=-.02,J.xanchor="right"),J.y>3?(J.y=1.02,J.yanchor="bottom"):J.y<-2&&(J.y=-.02,J.yanchor="top")),bs(e),e.dragmode==="rotate"&&(e.dragmode="orbit"),Vd.clean(e),e.template&&e.template.layout&&su.cleanLayout(e.template.layout),e};function fm(e,t){var r=e[t],i=t.charAt(0);r&&r!=="paper"&&(e[t]=jg(r,i,!0))}function bs(e){e&&((typeof e.title=="string"||typeof e.title=="number")&&(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"));function t(r,i){var a=e[r],s=e.title&&e.title[i];a&&!s&&(e.title||(e.title={}),e.title[i]=e[r],delete e[r])}}su.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t],i;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)&&(r.ybins=r.xbins,delete r.xbins),r.error_y&&"opacity"in r.error_y){var a=Vd.defaults,s=r.error_y.color||(Wg(r,"bar")?Vd.defaultLine:a[t%a.length]);r.error_y.color=Vd.addOpacity(Vd.rgb(s),Vd.opacity(s)*r.error_y.opacity),delete r.error_y.opacity}if("bardir"in r&&(r.bardir==="h"&&(Wg(r,"bar")||r.type.substr(0,9)==="histogram")&&(r.orientation="h",su.swapXYData(r)),delete r.bardir),r.type==="histogramy"&&su.swapXYData(r),(r.type==="histogramx"||r.type==="histogramy")&&(r.type="histogram"),"scl"in r&&!("colorscale"in r)&&(r.colorscale=r.scl,delete r.scl),"reversescl"in r&&!("reversescale"in r)&&(r.reversescale=r.reversescl,delete r.reversescl),r.xaxis&&(r.xaxis=jg(r.xaxis,"x")),r.yaxis&&(r.yaxis=jg(r.yaxis,"y")),Wg(r,"gl3d")&&r.scene&&(r.scene=Xg.subplotsRegistry.gl3d.cleanId(r.scene)),!Wg(r,"pie-like")&&!Wg(r,"bar-like"))if(Array.isArray(r.textposition))for(i=0;i<r.textposition.length;i++)r.textposition[i]=rF(r.textposition[i]);else r.textposition&&(r.textposition=rF(r.textposition));var l=nF.getModule(r);if(l&&l.colorbar){var u=l.colorbar.container,c=u?r[u]:r;c&&c.colorscale&&(c.colorscale==="YIGnBu"&&(c.colorscale="YlGnBu"),c.colorscale==="YIOrRd"&&(c.colorscale="YlOrRd"))}if(r.type==="surface"&&ws.isPlainObject(r.contours)){var v=["x","y","z"];for(i=0;i<v.length;i++){var m=r.contours[v[i]];ws.isPlainObject(m)&&(m.highlightColor&&(m.highlightcolor=m.highlightColor,delete m.highlightColor),m.highlightWidth&&(m.highlightwidth=m.highlightWidth,delete m.highlightWidth))}}if(r.type==="candlestick"||r.type==="ohlc"){var _=(r.increasing||{}).showlegend!==!1,T=(r.decreasing||{}).showlegend!==!1,M=tF(r.increasing),k=tF(r.decreasing);if(M!==!1&&k!==!1){var L=Hse(M,k,_,T);L&&(r.name=L)}else(M||k)&&!r.name&&(r.name=M||k)}if(Array.isArray(r.transforms)){var E=r.transforms;for(i=0;i<E.length;i++){var I=E[i];if(ws.isPlainObject(I))switch(I.type){case"filter":I.filtersrc&&(I.target=I.filtersrc,delete I.filtersrc),I.calendar&&(I.valuecalendar||(I.valuecalendar=I.calendar),delete I.calendar);break;case"groupby":if(I.styles=I.styles||I.style,I.styles&&!Array.isArray(I.styles)){var R=I.styles,N=Object.keys(R);I.styles=[];for(var z=0;z<N.length;z++)I.styles.push({target:N[z],value:R[N[z]]})}break}}}Hx(r,"line")&&delete r.line,"marker"in r&&(Hx(r.marker,"line")&&delete r.marker.line,Hx(r,"marker")&&delete r.marker),Vd.clean(r),r.autobinx&&(delete r.autobinx,delete r.xbins),r.autobiny&&(delete r.autobiny,delete r.ybins),bs(r),r.colorbar&&bs(r.colorbar),r.marker&&r.marker.colorbar&&bs(r.marker.colorbar),r.line&&r.line.colorbar&&bs(r.line.colorbar),r.aaxis&&bs(r.aaxis),r.baxis&&bs(r.baxis)}};function tF(e){if(!ws.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,(typeof t=="string"||typeof t=="number")&&String(t)}function Hse(e,t,r,i){if(r&&!i)return e;if(i&&!r||!e.trim())return t;if(!t.trim())return e;var a=Math.min(e.length,t.length),s;for(s=0;s<a&&e.charAt(s)===t.charAt(s);s++);var l=e.substr(0,s);return l.trim()}function rF(e){var t="middle",r="center";return typeof e=="string"&&(e.indexOf("top")!==-1?t="top":e.indexOf("bottom")!==-1&&(t="bottom"),e.indexOf("left")!==-1?r="left":e.indexOf("right")!==-1&&(r="right")),t+" "+r}function Hx(e,t){return t in e&&typeof e[t]=="object"&&Object.keys(e[t]).length===0}su.swapXYData=function(e){var t;if(ws.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var r=e.error_y,i="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);ws.swapAttrs(e,["error_?.copy_ystyle"]),i&&ws.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(typeof e.hoverinfo=="string"){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++)a[t]==="x"?a[t]="y":a[t]==="y"&&(a[t]="x");e.hoverinfo=a.join("+")}};su.coerceTraceIndices=function(e,t){if(iF(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(a,s){return s});if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)ws.isIndex(t[i],e.data.length)?r.push(t[i]):ws.warn("trace index (",t[i],") is not a number or is out of bounds");return r}return t};su.manageArrayContainers=function(e,t,r){var i=e.obj,a=e.parts,s=a.length,l=a[s-1],u=iF(l);if(u&&t===null){var c=a.slice(0,s-1).join("."),v=ws.nestedProperty(i,c).get();v.splice(l,1)}else u&&e.get()===void 0&&e.get()===void 0&&(r[e.astr]=null),e.set(t)};var Gse=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function aF(e){var t=e.search(Gse);if(t>0)return e.substr(0,t)}su.hasParent=function(e,t){for(var r=aF(t);r;){if(r in e)return!0;r=aF(r)}return!1};var Zse=["x","y","z"];su.clearAxisTypes=function(e,t,r){for(var i=0;i<t.length;i++)for(var a=e._fullData[i],s=0;s<3;s++){var l=Vse(e,a,Zse[s]);if(l&&l.type!=="log"){var u=l._name,c=l._id.substr(1);if(c.substr(0,5)==="scene"){if(r[c]!==void 0)continue;u=c+"."+u}var v=u+".type";r[u]===void 0&&r[v]===void 0&&ws.nestedProperty(e.layout,v).set(null)}}}});var U6=he(ei=>{"use strict";var Yx=Ka(),Yse=Ia(),Wse=qw(),mr=Nt(),Ri=mr.nestedProperty,q6=Ky(),Ts=Zk(),lu=sa(),$x=Fh(),$r=jn(),us=Ii(),Xse=l4(),jse=Bu(),R6=_i(),Jse=Ua(),Kse=D6().initInteractions,Qse=Bh(),$se=Vf().clearOutline,hF=hd().dfltConfig,Gx=eF(),Vn=sF(),hi=wx(),ev=ul(),ele=Mo().AX_NAME_PATTERN,F6=0,lF=5;function tle(e,t,r,i){var a;if(e=mr.getGraphDiv(e),q6.init(e),mr.isPlainObject(t)){var s=t;t=s.data,r=s.layout,i=s.config,a=s.frames}var l=q6.triggerHandler(e,"plotly_beforeplot",[t,r,i]);if(l===!1)return Promise.reject();!t&&!r&&!mr.isPlotDiv(e)&&mr.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e);function u(){if(a)return ei.addFrames(e,a)}dF(e,i),r||(r={}),Yx.select(e).classed("js-plotly-plot",!0),R6.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var c=(e.data||[]).length===0&&Array.isArray(t);Array.isArray(t)&&(Vn.cleanData(t),c?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),(!e.layout||c)&&(e.layout=Vn.cleanLayout(r)),$r.supplyDefaults(e);var v=e._fullLayout,m=v._has("cartesian");v._replotting=!0,(c||v._shouldCreateBgLayer)&&(Tle(e),v._shouldCreateBgLayer&&delete v._shouldCreateBgLayer),R6.initGradients(e),R6.initPatterns(e),c&&us.saveShowSpikeInitial(e);var _=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;_&&$r.doCalcdata(e);for(var T=0;T<e.calcdata.length;T++)e.calcdata[T][0].trace=e._fullData[T];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){mr.isHidden(e)||$r.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):mr.clearResponsive(e);var M=mr.extendFlat({},v._size),k=0;function L(){for(var V=v._basePlotModules,Y=0;Y<V.length;Y++)V[Y].drawFramework&&V[Y].drawFramework(e);!v._glcanvas&&v._has("gl")&&(v._glcanvas=v._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(oe){return oe.key}),v._glcanvas.enter().append("canvas").attr("class",function(oe){return"gl-canvas gl-canvas-"+oe.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var J=e._context.plotGlPixelRatio;if(v._glcanvas){v._glcanvas.attr("width",v.width*J).attr("height",v.height*J).style("width",v.width+"px").style("height",v.height+"px");var re=v._glcanvas.data()[0].regl;if(re&&(Math.floor(v.width*J)!==re._gl.drawingBufferWidth||Math.floor(v.height*J)!==re._gl.drawingBufferHeight)){var ne="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(k)mr.error(ne);else return mr.log(ne+" Clearing graph and plotting again."),$r.cleanPlot([],{},e._fullData,v),$r.supplyDefaults(e),v=e._fullLayout,$r.doCalcdata(e),k++,L()}}return v.modebar.orientation==="h"?v._modebardiv.style("height",null).style("width","100%"):v._modebardiv.style("width",null).style("height",v.height+"px"),$r.previousPromises(e)}function E(){if($r.clearAutoMarginIds(e),hi.drawMarginPushers(e),us.allowAutoMargin(e),e._fullLayout.title.text&&e._fullLayout.title.automargin&&$r.allowAutoMargin(e,"title.automargin"),v._has("pie"))for(var V=e._fullData,Y=0;Y<V.length;Y++){var J=V[Y];J.type==="pie"&&J.automargin&&$r.allowAutoMargin(e,"pie."+J.uid+".automargin")}return $r.doAutoMargin(e),$r.previousPromises(e)}function I(){if($r.didMarginChange(M,v._size))return mr.syncOrAsync([E,hi.layoutStyles],e)}function R(){if(!_){N();return}return mr.syncOrAsync([lu.getComponentMethod("shapes","calcAutorange"),lu.getComponentMethod("annotations","calcAutorange"),N],e)}function N(){e._transitioning||(hi.doAutoRangeAndConstraints(e),c&&us.saveRangeInitial(e),lu.getComponentMethod("rangeslider","calcAutorange")(e))}function z(){return us.draw(e,c?"":"redraw")}var B=[$r.previousPromises,u,L,E,I];m&&B.push(R),B.push(hi.layoutStyles),m&&B.push(z,function(Y){var J=Y._fullLayout._insideTickLabelsUpdaterange;if(J)return Y._fullLayout._insideTickLabelsUpdaterange=void 0,Jg(Y,J).then(function(){us.saveRangeInitial(Y,!0)})}),B.push(hi.drawData,hi.finalDraw,Kse,$r.addLinks,$r.rehover,$r.redrag,$r.reselect,$r.doAutoMargin,$r.previousPromises);var H=mr.syncOrAsync(B,e);return(!H||!H.then)&&(H=Promise.resolve()),H.then(function(){return Kg(e),e})}function Kg(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function rle(e){return mr.extendFlat(hF,e)}function vF(e,t){try{e._fullLayout._paper.style("background",t)}catch(r){mr.error(r)}}function ale(e,t){var r=Jse.combine(t,"white");vF(e,r)}function dF(e,t){if(!e._context){e._context=mr.extendDeep({},hF);var r=Yx.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var i=e._context,a,s,l;if(t){for(s=Object.keys(t),a=0;a<s.length;a++)l=s[a],!(l==="editable"||l==="edits")&&l in i&&(l==="setBackground"&&t[l]==="opaque"?i[l]=ale:i[l]=t[l]);t.plot3dPixelRatio&&!i.plotGlPixelRatio&&(i.plotGlPixelRatio=i.plot3dPixelRatio);var u=t.editable;if(u!==void 0)for(i.editable=u,s=Object.keys(i.edits),a=0;a<s.length;a++)i.edits[s[a]]=u;if(t.edits)for(s=Object.keys(t.edits),a=0;a<s.length;a++)l=s[a],l in i.edits&&(i.edits[l]=t.edits[l]);i._exportedPlot=t._exportedPlot}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),i.displayModeBar==="hover"&&!Wse&&(i.displayModeBar=!0),(i.setBackground==="transparent"||typeof i.setBackground!="function")&&(i.setBackground=vF),i._hasZeroHeight=i._hasZeroHeight||e.clientHeight===0,i._hasZeroWidth=i._hasZeroWidth||e.clientWidth===0;var c=i.scrollZoom,v=i._scrollZoom={};if(c===!0)v.cartesian=1,v.gl3d=1,v.geo=1,v.mapbox=1,v.map=1;else if(typeof c=="string"){var m=c.split("+");for(a=0;a<m.length;a++)v[m[a]]=1}else c!==!1&&(v.gl3d=1,v.geo=1,v.mapbox=1,v.map=1)}function ile(e){if(e=mr.getGraphDiv(e),!mr.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return Vn.cleanData(e.data),Vn.cleanLayout(e.layout),e.calcdata=void 0,ei._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})}function nle(e,t,r,i){return e=mr.getGraphDiv(e),$r.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),$r.purge(e),ei._doPlot(e,t,r,i)}function Wx(e,t){var r=t+1,i=[],a,s;for(a=0;a<e.length;a++)s=e[a],s<0?i.push(r+s):i.push(s);return i}function Xx(e,t,r){var i,a;for(i=0;i<t.length;i++){if(a=t[i],a!==parseInt(a,10))throw new Error("all values in "+r+" must be integers");if(a>=e.data.length||a<-e.data.length)throw new Error(r+" must be valid indices for gd.data.");if(t.indexOf(a,i+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1)throw new Error("each index in "+r+" must be unique.")}}function pF(e,t,r){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),Xx(e,t,"currentIndices"),typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&Xx(e,r,"newIndices"),typeof r!="undefined"&&t.length!==r.length)throw new Error("current and new indices must be of equal length.")}function ole(e,t,r){var i,a;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),i=0;i<t.length;i++)if(a=t[i],typeof a!="object"||Array.isArray(a)||a===null)throw new Error("all values in traces array must be non-array objects");if(typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&r.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function sle(e,t,r,i){var a=mr.isPlainObject(i);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!mr.isPlainObject(t))throw new Error("update must be a key:value object");if(typeof r=="undefined")throw new Error("indices must be an integer or array of integers");Xx(e,r,"indices");for(var s in t){if(!Array.isArray(t[s])||t[s].length!==r.length)throw new Error("attribute "+s+" must be an array of length equal to indices array length");if(a&&(!(s in i)||!Array.isArray(i[s])||i[s].length!==t[s].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function lle(e,t,r,i){var a=mr.isPlainObject(i),s=[],l,u,c,v,m;Array.isArray(r)||(r=[r]),r=Wx(r,e.data.length-1);for(var _ in t)for(var T=0;T<r.length;T++){if(l=e.data[r[T]],c=Ri(l,_),u=c.get(),v=t[_][T],!mr.isArrayOrTypedArray(v))throw new Error("attribute: "+_+" index: "+T+" must be an array");if(!mr.isArrayOrTypedArray(u))throw new Error("cannot extend missing or non-array attribute: "+_);if(u.constructor!==v.constructor)throw new Error("cannot extend array with an array of a different type: "+_);m=a?i[_][T]:i,Yse(m)||(m=-1),s.push({prop:c,target:u,insert:v,maxp:Math.floor(m)})}return s}function mF(e,t,r,i,a){sle(e,t,r,i);for(var s=lle(e,t,r,i),l={},u={},c=0;c<s.length;c++){var v=s[c].prop,m=s[c].maxp,_=a(s[c].target,s[c].insert,m);v.set(_[0]),Array.isArray(l[v.astr])||(l[v.astr]=[]),l[v.astr].push(_[1]),Array.isArray(u[v.astr])||(u[v.astr]=[]),u[v.astr].push(s[c].target.length)}return{update:l,maxPoints:u}}function yF(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}function gF(e,t,r,i){e=mr.getGraphDiv(e);function a(c,v,m){var _,T;if(mr.isTypedArray(c))if(m<0){var M=new c.constructor(0),k=yF(c,v);m<0?(_=k,T=M):(_=M,T=k)}else if(_=new c.constructor(m),T=new c.constructor(c.length+v.length-m),m===v.length)_.set(v),T.set(c);else if(m<v.length){var L=v.length-m;_.set(v.subarray(L)),T.set(c),T.set(v.subarray(0,L),c.length)}else{var E=m-v.length,I=c.length-E;_.set(c.subarray(I)),_.set(v,E),T.set(c.subarray(0,I))}else _=c.concat(v),T=m>=0&&m<_.length?_.splice(0,_.length-m):[];return[_,T]}var s=mF(e,t,r,i,a),l=ei.redraw(e),u=[e,s.update,r,s.maxPoints];return Ts.add(e,ei.prependTraces,u,gF,arguments),l}function _F(e,t,r,i){e=mr.getGraphDiv(e);function a(c,v,m){var _,T;if(mr.isTypedArray(c))if(m<=0){var M=new c.constructor(0),k=yF(v,c);m<0?(_=k,T=M):(_=M,T=k)}else if(_=new c.constructor(m),T=new c.constructor(c.length+v.length-m),m===v.length)_.set(v),T.set(c);else if(m<v.length){var L=v.length-m;_.set(v.subarray(0,L)),T.set(v.subarray(L)),T.set(c,L)}else{var E=m-v.length;_.set(v),_.set(c.subarray(0,E),v.length),T.set(c.subarray(E))}else _=v.concat(c),T=m>=0&&m<_.length?_.splice(m,_.length):[];return[_,T]}var s=mF(e,t,r,i,a),l=ei.redraw(e),u=[e,s.update,r,s.maxPoints];return Ts.add(e,ei.extendTraces,u,_F,arguments),l}function xF(e,t,r){e=mr.getGraphDiv(e);var i=[],a=ei.deleteTraces,s=xF,l=[e,i],u=[e,t],c,v;for(ole(e,t,r),Array.isArray(t)||(t=[t]),t=t.map(function(m){return mr.extendFlat({},m)}),Vn.cleanData(t),c=0;c<t.length;c++)e.data.push(t[c]);for(c=0;c<t.length;c++)i.push(-t.length+c);if(typeof r=="undefined")return v=ei.redraw(e),Ts.add(e,a,l,s,u),v;Array.isArray(r)||(r=[r]);try{pF(e,i,r)}catch(m){throw e.data.splice(e.data.length-t.length,t.length),m}return Ts.startSequence(e),Ts.add(e,a,l,s,u),v=ei.moveTraces(e,i,r),Ts.stopSequence(e),v}function bF(e,t){e=mr.getGraphDiv(e);var r=[],i=ei.addTraces,a=bF,s=[e,r,t],l=[e,t],u,c;if(typeof t=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(t)||(t=[t]),Xx(e,t,"indices"),t=Wx(t,e.data.length-1),t.sort(mr.sorterDes),u=0;u<t.length;u+=1)c=e.data.splice(t[u],1)[0],r.push(c);var v=ei.redraw(e);return Ts.add(e,i,s,a,l),v}function N6(e,t,r){e=mr.getGraphDiv(e);var i=[],a=[],s=N6,l=N6,u=[e,r,t],c=[e,t,r],v;if(pF(e,t,r),t=Array.isArray(t)?t:[t],typeof r=="undefined")for(r=[],v=0;v<t.length;v++)r.push(-t.length+v);for(r=Array.isArray(r)?r:[r],t=Wx(t,e.data.length-1),r=Wx(r,e.data.length-1),v=0;v<e.data.length;v++)t.indexOf(v)===-1&&i.push(e.data[v]);for(v=0;v<t.length;v++)a.push({newIndex:r[v],trace:e.data[t[v]]});for(a.sort(function(_,T){return _.newIndex-T.newIndex}),v=0;v<a.length;v+=1)i.splice(a[v].newIndex,0,a[v].trace);e.data=i;var m=ei.redraw(e);return Ts.add(e,s,u,l,c),m}function jx(e,t,r,i){e=mr.getGraphDiv(e),Vn.clearPromiseQueue(e);var a={};if(typeof t=="string")a[t]=r;else if(mr.isPlainObject(t))a=mr.extendFlat({},t),i===void 0&&(i=r);else return mr.warn("Restyle fail.",t,r,i),Promise.reject();Object.keys(a).length&&(e.changed=!0);var s=Vn.coerceTraceIndices(e,i),l=wF(e,a,s),u=l.flags;u.calc&&(e.calcdata=void 0),u.clearAxisTypes&&Vn.clearAxisTypes(e,s,{});var c=[];u.fullReplot?c.push(ei._doPlot):(c.push($r.previousPromises),$r.supplyDefaults(e),u.markerSize&&($r.doCalcdata(e),eb(c)),u.style&&c.push(hi.doTraceStyle),u.colorbars&&c.push(hi.doColorBars),c.push(Kg)),c.push($r.rehover,$r.redrag,$r.reselect),Ts.add(e,jx,[e,l.undoit,l.traces],jx,[e,l.redoit,l.traces]);var v=mr.syncOrAsync(c,e);return(!v||!v.then)&&(v=Promise.resolve()),v.then(function(){return e.emit("plotly_restyle",l.eventData),e})}function Dc(e){return e===void 0?null:e}function Zx(e,t){return t?function(r,i,a){var s=Ri(r,i),l=s.set;return s.set=function(u){var c=(a||"")+i;Jx(c,s.get(),u,e),l(u)},s}:Ri}function Jx(e,t,r,i){if(Array.isArray(t)||Array.isArray(r))for(var a=Array.isArray(t)?t:[],s=Array.isArray(r)?r:[],l=Math.max(a.length,s.length),u=0;u<l;u++)Jx(e+"["+u+"]",a[u],s[u],i);else if(mr.isPlainObject(t)||mr.isPlainObject(r)){var c=mr.isPlainObject(t)?t:{},v=mr.isPlainObject(r)?r:{},m=mr.extendFlat({},c,v);for(var _ in m)Jx(e+"."+_,c[_],v[_],i)}else i[e]===void 0&&(i[e]=Dc(t))}function ule(e,t,r){for(var i in r){var a=Ri(e,i);Jx(i,a.get(),r[i],t)}}function wF(e,t,r){var i=e._fullLayout,a=e._fullData,s=e.data,l=i._guiEditing,u=Zx(i._preGUI,l),c=mr.extendDeepAll({},t),v;TF(t);var m=ev.traceFlags(),_={},T={},M;function k(){return r.map(function(){})}function L(ye){var Re=us.id2name(ye);M.indexOf(Re)===-1&&M.push(Re)}function E(ye){return"LAYOUT"+ye+".autorange"}function I(ye){return"LAYOUT"+ye+".range"}function R(ye){for(var Re=ye;Re<a.length;Re++)if(a[Re]._input===s[ye])return a[Re]}function N(ye,Re,xe){if(Array.isArray(ye)){ye.forEach(function(Bt){N(Bt,Re,xe)});return}if(!(ye in t||Vn.hasParent(t,ye))){var et;if(ye.substr(0,6)==="LAYOUT")et=u(e.layout,ye.replace("LAYOUT",""));else{var vt=r[xe],tt=i._tracePreGUI[R(vt)._fullInput.uid];et=Zx(tt,l)(s[vt],ye)}ye in T||(T[ye]=k()),T[ye][xe]===void 0&&(T[ye][xe]=Dc(et.get())),Re!==void 0&&et.set(Re)}}function z(ye){return function(Re){return a[Re][ye]}}function B(ye){return function(Re,xe){return Re===!1?a[r[xe]][ye]:null}}for(var H in t){if(Vn.hasParent(t,H))throw new Error("cannot set "+H+" and a parent attribute simultaneously");var V=t[H],Y,J,re,ne,oe,ue;if((H==="autobinx"||H==="autobiny")&&(H=H.charAt(H.length-1)+"bins",Array.isArray(V)?V=V.map(B(H)):V===!1?V=r.map(z(H)):V=null),_[H]=V,H.substr(0,6)==="LAYOUT"){re=u(e.layout,H.replace("LAYOUT","")),T[H]=[Dc(re.get())],re.set(Array.isArray(V)?V[0]:V),m.calc=!0;continue}for(T[H]=k(),v=0;v<r.length;v++){Y=s[r[v]],J=R(r[v]);var me=i._tracePreGUI[J._fullInput.uid];if(re=Zx(me,l)(Y,H),ne=re.get(),oe=Array.isArray(V)?V[v%V.length]:V,oe!==void 0){var Se=re.parts[re.parts.length-1],Ce=H.substr(0,H.length-Se.length-1),Me=Ce?Ce+".":"",_e=Ce?Ri(J,Ce).get():J;if(ue=$x.getTraceValObject(J,re.parts),ue&&ue.impliedEdits&&oe!==null)for(var Te in ue.impliedEdits)N(mr.relativeAttr(H,Te),ue.impliedEdits[Te],v);else if((Se==="thicknessmode"||Se==="lenmode")&&ne!==oe&&(oe==="fraction"||oe==="pixels")&&_e){var Ae=i._size,Le=_e.orient,Ke=Le==="top"||Le==="bottom";if(Se==="thicknessmode"){var ct=Ke?Ae.h:Ae.w;N(Me+"thickness",_e.thickness*(oe==="fraction"?1/ct:ct),v)}else{var it=Ke?Ae.w:Ae.h;N(Me+"len",_e.len*(oe==="fraction"?1/it:it),v)}}else if(H==="type"&&(oe==="pie"!=(ne==="pie")||oe==="funnelarea"!=(ne==="funnelarea"))){var ut="x",Ge="y";(oe==="bar"||ne==="bar")&&Y.orientation==="h"&&(ut="y",Ge="x"),mr.swapAttrs(Y,["?","?src"],"labels",ut),mr.swapAttrs(Y,["d?","?0"],"label",ut),mr.swapAttrs(Y,["?","?src"],"values",Ge),ne==="pie"||ne==="funnelarea"?(Ri(Y,"marker.color").set(Ri(Y,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):lu.traceIs(Y,"cartesian")&&Ri(Y,"marker.colors").set(Ri(Y,"marker.color").get())}T[H][v]=Dc(ne);var xt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(xt.indexOf(H)!==-1){if(H==="orientation"){re.set(oe);var at=Y.x&&!Y.y?"h":"v";if((re.get()||at)===J.orientation)continue}else H==="orientationaxes"&&(Y.orientation={v:"h",h:"v"}[J.orientation]);Vn.swapXYData(Y),m.calc=m.clearAxisTypes=!0}else $r.dataArrayContainers.indexOf(re.parts[0])!==-1?(Vn.manageArrayContainers(re,oe,T),m.calc=!0):(ue?ue.arrayOk&&!lu.traceIs(J,"regl")&&(mr.isArrayOrTypedArray(oe)||mr.isArrayOrTypedArray(ne))?m.calc=!0:ev.update(m,ue):m.calc=!0,re.set(oe))}}if(["swapxyaxes","orientationaxes"].indexOf(H)!==-1&&us.swap(e,r),H==="orientationaxes"){var At=Ri(e.layout,"hovermode"),kt=At.get();kt==="x"?At.set("y"):kt==="y"?At.set("x"):kt==="x unified"?At.set("y unified"):kt==="y unified"&&At.set("x unified")}if(["orientation","type"].indexOf(H)!==-1){for(M=[],v=0;v<r.length;v++){var mt=s[r[v]];lu.traceIs(mt,"cartesian")&&(L(mt.xaxis||"x"),L(mt.yaxis||"y"))}N(M.map(E),!0,0),N(M.map(I),[0,1],0)}}return(m.calc||m.plot)&&(m.fullReplot=!0),{flags:m,undoit:T,redoit:_,traces:r,eventData:mr.extendDeepNoArrays([],[c,r])}}function TF(e){var t=mr.counterRegex("axis",".title",!1,!1),r=/colorbar\.title$/,i=Object.keys(e),a,s,l;for(a=0;a<i.length;a++)s=i[a],l=e[s],(s==="title"||t.test(s)||r.test(s))&&(typeof l=="string"||typeof l=="number")?u(s,s.replace("title","title.text")):s.indexOf("titlefont")>-1&&s.indexOf("grouptitlefont")===-1?u(s,s.replace("titlefont","title.font")):s.indexOf("titleposition")>-1?u(s,s.replace("titleposition","title.position")):s.indexOf("titleside")>-1?u(s,s.replace("titleside","title.side")):s.indexOf("titleoffset")>-1&&u(s,s.replace("titleoffset","title.offset"));function u(c,v){e[v]=e[c],delete e[c]}}function Jg(e,t,r){e=mr.getGraphDiv(e),Vn.clearPromiseQueue(e);var i={};if(typeof t=="string")i[t]=r;else if(mr.isPlainObject(t))i=mr.extendFlat({},t);else return mr.warn("Relayout fail.",t,r),Promise.reject();Object.keys(i).length&&(e.changed=!0);var a=CF(e,i),s=a.flags;s.calc&&(e.calcdata=void 0);var l=[$r.previousPromises];s.layoutReplot?l.push(hi.layoutReplot):Object.keys(i).length&&(AF(e,s,a)||$r.supplyDefaults(e),s.legend&&l.push(hi.doLegend),s.layoutstyle&&l.push(hi.layoutStyles),s.axrange&&eb(l,a.rangesAltered),s.ticks&&l.push(hi.doTicksRelayout),s.modebar&&l.push(hi.doModeBar),s.camera&&l.push(hi.doCamera),s.colorbars&&l.push(hi.doColorBars),l.push(Kg)),l.push($r.rehover,$r.redrag,$r.reselect),Ts.add(e,Jg,[e,a.undoit],Jg,[e,a.redoit]);var u=mr.syncOrAsync(l,e);return(!u||!u.then)&&(u=Promise.resolve(e)),u.then(function(){return e.emit("plotly_relayout",a.eventData),e})}function AF(e,t,r){var i=e._fullLayout;if(!t.axrange)return!1;for(var a in t)if(a!=="axrange"&&t[a])return!1;var s,l,u=function(M,k){return mr.coerce(s,l,jse,M,k)},c={};for(var v in r.rangesAltered){var m=us.id2name(v);if(s=e.layout[m],l=i[m],Xse(s,l,u,c),l._matchGroup){for(var _ in l._matchGroup)if(_!==v){var T=i[us.id2name(_)];T.autorange=l.autorange,T.range=l.range.slice(),T._input.range=l.range.slice()}}}return!0}function eb(e,t){var r=t?function(i){var a=[],s=!0;for(var l in t){var u=us.getFromId(i,l);if(a.push(l),(u.ticklabelposition||"").indexOf("inside")!==-1&&u._anchorAxis&&a.push(u._anchorAxis._id),u._matchGroup)for(var c in u._matchGroup)t[c]||a.push(c)}return us.draw(i,a,{skipTitle:s})}:function(i){return us.draw(i,"redraw")};e.push($se,hi.doAutoRangeAndConstraints,r,hi.drawData,hi.finalDraw)}var MF=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,SF=/^[xyz]axis[0-9]*\.autorange$/,kF=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function CF(e,t){var r=e.layout,i=e._fullLayout,a=i._guiEditing,s=Zx(i._preGUI,a),l=Object.keys(t),u=us.list(e),c=mr.extendDeepAll({},t),v={},m,_,T;for(TF(t),l=Object.keys(t),_=0;_<l.length;_++)if(l[_].indexOf("allaxes")===0){for(T=0;T<u.length;T++){var M=u[T]._id.substr(1),k=M.indexOf("scene")!==-1?M+".":"",L=l[_].replace("allaxes",k+u[T]._name);t[L]||(t[L]=t[l[_]])}delete t[l[_]]}var E=ev.layoutFlags(),I={},R={};function N(tt,Bt){if(Array.isArray(tt)){tt.forEach(function(Ct){N(Ct,Bt)});return}if(!(tt in t||Vn.hasParent(t,tt))){var Mt=s(r,tt);tt in R||(R[tt]=Dc(Mt.get())),Bt!==void 0&&Mt.set(Bt)}}var z={},B;function H(tt){var Bt=us.name2id(tt.split(".")[0]);return z[Bt]=1,Bt}for(var V in t){if(Vn.hasParent(t,V))throw new Error("cannot set "+V+" and a parent attribute simultaneously");for(var Y=s(r,V),J=t[V],re=Y.parts.length,ne=re-1;ne>0&&typeof Y.parts[ne]!="string";)ne--;var oe=Y.parts[ne],ue=Y.parts[ne-1]+"."+oe,me=Y.parts.slice(0,ne).join("."),Se=Ri(e.layout,me).get(),Ce=Ri(i,me).get(),Me=Y.get();if(J!==void 0){I[V]=J,R[V]=oe==="reverse"?J:Dc(Me);var _e=$x.getLayoutValObject(i,Y.parts);if(_e&&_e.impliedEdits&&J!==null)for(var Te in _e.impliedEdits)N(mr.relativeAttr(V,Te),_e.impliedEdits[Te]);if(["width","height"].indexOf(V)!==-1)if(J){N("autosize",null);var Ae=V==="height"?"width":"height";N(Ae,i[Ae])}else i[V]=e._initialAutoSize[V];else if(V==="autosize")N("width",J?null:i.width),N("height",J?null:i.height);else if(ue.match(MF))H(ue),Ri(i,me+"._inputRange").set(null);else if(ue.match(SF)){H(ue),Ri(i,me+"._inputRange").set(null);var Le=Ri(i,me).get();Le._inputDomain&&(Le._input.domain=Le._inputDomain.slice())}else ue.match(kF)&&Ri(i,me+"._inputDomain").set(null);if(oe==="type"){B=Se;var Ke=Ce.type==="linear"&&J==="log",ct=Ce.type==="log"&&J==="linear";if(Ke||ct){if(!B||!B.range)N(me+".autorange",!0);else if(Ce.autorange)Ke&&(B.range=B.range[1]>B.range[0]?[1,2]:[2,1]);else{var it=B.range[0],ut=B.range[1];Ke?(it<=0&&ut<=0&&N(me+".autorange",!0),it<=0?it=ut/1e6:ut<=0&&(ut=it/1e6),N(me+".range[0]",Math.log(it)/Math.LN10),N(me+".range[1]",Math.log(ut)/Math.LN10)):(N(me+".range[0]",Math.pow(10,it)),N(me+".range[1]",Math.pow(10,ut)))}Array.isArray(i._subplots.polar)&&i._subplots.polar.length&&i[Y.parts[0]]&&Y.parts[1]==="radialaxis"&&delete i[Y.parts[0]]._subplot.viewInitial["radialaxis.range"],lu.getComponentMethod("annotations","convertCoords")(e,Ce,J,N),lu.getComponentMethod("images","convertCoords")(e,Ce,J,N)}else N(me+".autorange",!0),N(me+".range",null);Ri(i,me+"._inputRange").set(null)}else if(oe.match(ele)){var Ge=Ri(i,V).get(),xt=(J||{}).type;(!xt||xt==="-")&&(xt="linear"),lu.getComponentMethod("annotations","convertCoords")(e,Ge,xt,N),lu.getComponentMethod("images","convertCoords")(e,Ge,xt,N)}var at=Gx.containerArrayMatch(V);if(at){m=at.array,_=at.index;var At=at.property,kt=_e||{editType:"calc"};_!==""&&At===""&&(Gx.isAddVal(J)?R[V]=null:Gx.isRemoveVal(J)?R[V]=(Ri(r,m).get()||[])[_]:mr.warn("unrecognized full object value",t)),ev.update(E,kt),v[m]||(v[m]={});var mt=v[m][_];mt||(mt=v[m][_]={}),mt[At]=J,delete t[V]}else oe==="reverse"?(Se.range?Se.range.reverse():(N(me+".autorange",!0),Se.range=[1,0]),Ce.autorange?E.calc=!0:E.plot=!0):(V==="dragmode"&&(J===!1&&Me!==!1||J!==!1&&Me===!1)||i._has("scatter-like")&&i._has("regl")&&V==="dragmode"&&(J==="lasso"||J==="select")&&!(Me==="lasso"||Me==="select")||i._has("gl2d")?E.plot=!0:_e?ev.update(E,_e):E.calc=!0,Y.set(J))}}for(m in v){var ye=Gx.applyContainerArrayChanges(e,s(r,m),v[m],E,s);ye||(E.plot=!0)}for(var Re in z){B=us.getFromId(e,Re);var xe=B&&B._constraintGroup;if(xe){E.calc=!0;for(var et in xe)z[et]||(us.getFromId(e,et)._constraintShrinkable=!0)}}(EF(e)||t.height||t.width)&&(E.plot=!0);var vt=i.shapes;for(_=0;_<vt.length;_++)if(vt[_].showlegend){E.calc=!0;break}return(E.plot||E.calc)&&(E.layoutReplot=!0),{flags:E,rangesAltered:z,undoit:R,redoit:I,eventData:c}}function EF(e){var t=e._fullLayout,r=t.width,i=t.height;return e.layout.autosize&&$r.plotAutoSize(e,e.layout,t),t.width!==r||t.height!==i}function Kx(e,t,r,i){e=mr.getGraphDiv(e),Vn.clearPromiseQueue(e),mr.isPlainObject(t)||(t={}),mr.isPlainObject(r)||(r={}),Object.keys(t).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var a=Vn.coerceTraceIndices(e,i),s=wF(e,mr.extendFlat({},t),a),l=s.flags,u=CF(e,mr.extendFlat({},r)),c=u.flags;(l.calc||c.calc)&&(e.calcdata=void 0),l.clearAxisTypes&&Vn.clearAxisTypes(e,a,r);var v=[];c.layoutReplot?v.push(hi.layoutReplot):l.fullReplot?v.push(ei._doPlot):(v.push($r.previousPromises),AF(e,c,u)||$r.supplyDefaults(e),l.style&&v.push(hi.doTraceStyle),(l.colorbars||c.colorbars)&&v.push(hi.doColorBars),c.legend&&v.push(hi.doLegend),c.layoutstyle&&v.push(hi.layoutStyles),c.axrange&&eb(v,u.rangesAltered),c.ticks&&v.push(hi.doTicksRelayout),c.modebar&&v.push(hi.doModeBar),c.camera&&v.push(hi.doCamera),v.push(Kg)),v.push($r.rehover,$r.redrag,$r.reselect),Ts.add(e,Kx,[e,s.undoit,u.undoit,s.traces],Kx,[e,s.redoit,u.redoit,s.traces]);var m=mr.syncOrAsync(v,e);return(!m||!m.then)&&(m=Promise.resolve(e)),m.then(function(){return e.emit("plotly_update",{data:s.eventData,layout:u.eventData}),e})}function O6(e){return function(r){r._fullLayout._guiEditing=!0;var i=e.apply(null,arguments);return r._fullLayout._guiEditing=!1,i}}var fle=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],cle=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function uF(e,t){for(var r=0;r<t.length;r++){var i=t[r],a=e.match(i.pattern);if(a){var s=a[1]||"";return{head:s,tail:e.substr(s.length+1),attr:i.attr}}}}function fF(e,t){var r=Ri(t,e).get();if(r!==void 0)return r;var i=e.split(".");for(i.pop();i.length>1;)if(i.pop(),r=Ri(t,i.join(".")+".uirevision").get(),r!==void 0)return r;return t.uirevision}function hle(e,t){for(var r=0;r<t.length;r++)if(t[r]._fullInput.uid===e)return r;return-1}function vle(e,t,r){for(var i=0;i<t.length;i++)if(t[i].uid===e)return i;return!t[r]||t[r].uid?-1:r}function cF(e,t){var r=mr.isPlainObject(e),i=Array.isArray(e);return r||i?(r&&mr.isPlainObject(t)||i&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function dle(e,t,r,i){var a=i._preGUI,s,l,u,c,v,m,_,T,M,k,L=[],E={},I={};for(s in a){if(v=uF(s,fle),v){if(M=v.head,k=v.tail,l=v.attr||M+".uirevision",u=Ri(i,l).get(),c=u&&fF(l,t),c&&c===u){if(m=a[s],m===null&&(m=void 0),_=Ri(t,s),T=_.get(),cF(T,m)){T===void 0&&k==="autorange"&&L.push(M),_.set(Dc(Ri(i,s).get()));continue}else if(k==="autorange"||k.substr(0,6)==="range["){var R=a[M+".range[0]"],N=a[M+".range[1]"],z=a[M+".autorange"];if(z||z===null&&R===null&&N===null){if(!(M in E)){var B=Ri(t,M).get();E[M]=B&&(B.autorange||B.autorange!==!1&&(!B.range||B.range.length!==2))}if(E[M]){_.set(Dc(Ri(i,s).get()));continue}}}}}else mr.warn("unrecognized GUI edit: "+s);delete a[s],v&&v.tail.substr(0,6)==="range["&&(I[v.head]=1)}for(var H=0;H<L.length;H++){var V=L[H];if(I[V]){var Y=Ri(t,V).get();Y&&delete Y.autorange}}var J=i._tracePreGUI;for(var re in J){var ne=J[re],oe=null,ue;for(s in ne){if(!oe){var me=hle(re,r);if(me<0){delete J[re];break}var Se=r[me];ue=Se._fullInput;var Ce=vle(re,e,ue.index);if(Ce<0){delete J[re];break}oe=e[Ce]}if(v=uF(s,cle),v){if(v.attr?(u=Ri(i,v.attr).get(),c=u&&fF(v.attr,t)):(u=ue.uirevision,c=oe.uirevision,c===void 0&&(c=t.uirevision)),c&&c===u&&(m=ne[s],m===null&&(m=void 0),_=Ri(oe,s),T=_.get(),cF(T,m))){_.set(Dc(Ri(ue,s).get()));continue}}else mr.warn("unrecognized GUI edit: "+s+" in trace uid "+re);delete ne[s]}}}function ple(e,t,r,i){var a,s;function l(){return ei.addFrames(e,a)}e=mr.getGraphDiv(e),Vn.clearPromiseQueue(e);var u=e._fullData,c=e._fullLayout;if(!mr.isPlotDiv(e)||!u||!c)s=ei.newPlot(e,t,r,i);else{if(mr.isPlainObject(t)){var v=t;t=v.data,r=v.layout,i=v.config,a=v.frames}var m=!1;if(i){var _=mr.extendDeep({},e._context);e._context=void 0,dF(e,i),m=B6(_,e._context)}e.data=t||[],Vn.cleanData(e.data),e.layout=r||{},Vn.cleanLayout(e.layout),dle(e.data,e.layout,u,c),$r.supplyDefaults(e,{skipUpdateCalc:!0});var T=e._fullData,M=e._fullLayout,k=M.datarevision===void 0,L=M.transition,E=yle(e,c,M,k,L),I=E.newDataRevision,R=mle(e,u,T,k,L,I);if(EF(e)&&(E.layoutReplot=!0),R.calc||E.calc){e.calcdata=void 0;for(var N=Object.getOwnPropertyNames(M),z=0;z<N.length;z++){var B=N[z],H=B.substring(0,5);if(H==="xaxis"||H==="yaxis"){var V=M[B]._emptyCategories;V&&V()}}}else $r.supplyDefaultsUpdateCalc(e.calcdata,T);var Y=[];if(a&&(e._transitionData={},$r.createTransitionData(e),Y.push(l)),M.transition&&!m&&(R.anim||E.anim))E.ticks&&Y.push(hi.doTicksRelayout),$r.doCalcdata(e),hi.doAutoRangeAndConstraints(e),Y.push(function(){return $r.transitionFromReact(e,R,E,c)});else if(R.fullReplot||E.layoutReplot||m)e._fullLayout._skipDefaults=!0,Y.push(ei._doPlot);else{for(var J in E.arrays){var re=E.arrays[J];if(re.length){var ne=lu.getComponentMethod(J,"drawOne");if(ne!==mr.noop)for(var oe=0;oe<re.length;oe++)ne(e,re[oe]);else{var ue=lu.getComponentMethod(J,"draw");if(ue===mr.noop)throw new Error("cannot draw components: "+J);ue(e)}}}Y.push($r.previousPromises),R.style&&Y.push(hi.doTraceStyle),(R.colorbars||E.colorbars)&&Y.push(hi.doColorBars),E.legend&&Y.push(hi.doLegend),E.layoutstyle&&Y.push(hi.layoutStyles),E.axrange&&eb(Y),E.ticks&&Y.push(hi.doTicksRelayout),E.modebar&&Y.push(hi.doModeBar),E.camera&&Y.push(hi.doCamera),Y.push(Kg)}Y.push($r.rehover,$r.redrag,$r.reselect),s=mr.syncOrAsync(Y,e),(!s||!s.then)&&(s=Promise.resolve(e))}return s.then(function(){return e.emit("plotly_react",{data:t,layout:r}),e})}function mle(e,t,r,i,a,s){var l=t.length===r.length;if(!a&&!l)return{fullReplot:!0,calc:!0};var u=ev.traceFlags();u.arrays={},u.nChanges=0,u.nChangesAnim=0;var c,v;function m(M){var k=$x.getTraceValObject(v,M);return!v._module.animatable&&k.anim&&(k.anim=!1),k}var _={getValObject:m,flags:u,immutable:i,transition:a,newDataRevision:s,gd:e},T={};for(c=0;c<t.length;c++)if(r[c]){if(v=r[c]._fullInput,$r.hasMakesDataTransform(v)&&(v=r[c]),T[v.uid])continue;T[v.uid]=1,Qx(t[c]._fullInput,v,[],_)}return(u.calc||u.plot)&&(u.fullReplot=!0),a&&u.nChanges&&u.nChangesAnim&&(u.anim=u.nChanges===u.nChangesAnim&&l?"all":"some"),u}function yle(e,t,r,i,a){var s=ev.layoutFlags();s.arrays={},s.rangesAltered={},s.nChanges=0,s.nChangesAnim=0;function l(c){return $x.getLayoutValObject(r,c)}var u={getValObject:l,flags:s,immutable:i,transition:a,gd:e};return Qx(t,r,[],u),(s.plot||s.calc)&&(s.layoutReplot=!0),a&&s.nChanges&&s.nChangesAnim&&(s.anim=s.nChanges===s.nChangesAnim?"all":"some"),s}function Qx(e,t,r,i){var a,s,l,u=i.getValObject,c=i.flags,v=i.immutable,m=i.inArray,_=i.arrayIndex;function T(){var me=a.editType;if(m&&me.indexOf("arraydraw")!==-1){mr.pushUnique(c.arrays[m],_);return}ev.update(c,a),me!=="none"&&c.nChanges++,i.transition&&a.anim&&c.nChangesAnim++,(MF.test(l)||SF.test(l))&&(c.rangesAltered[r[0]]=1),kF.test(l)&&Ri(t,"_inputDomain").set(null),s==="datarevision"&&(c.newDataRevision=1)}function M(me){return me.valType==="data_array"||me.arrayOk}for(s in e){if(c.calc&&!i.transition)return;var k=e[s],L=t[s],E=r.concat(s);if(l=E.join("."),!(s.charAt(0)==="_"||typeof k=="function"||k===L)){if((s==="tick0"||s==="dtick")&&r[0]!=="geo"){var I=t.tickmode;if(I==="auto"||I==="array"||!I)continue}if(!(s==="range"&&t.autorange)&&!((s==="zmin"||s==="zmax")&&t.type==="contourcarpet")&&(a=u(E),!!a&&!(a._compareAsJSON&&JSON.stringify(k)===JSON.stringify(L)))){var R=a.valType,N,z=M(a),B=Array.isArray(k),H=Array.isArray(L);if(B&&H){var V="_input_"+s,Y=e[V],J=t[V];if(Array.isArray(Y)&&Y===J)continue}if(L===void 0)z&&B?c.calc=!0:T();else if(a._isLinkedToArray){var re=[],ne=!1;m||(c.arrays[s]=re);var oe=Math.min(k.length,L.length),ue=Math.max(k.length,L.length);if(oe!==ue)if(a.editType==="arraydraw")ne=!0;else{T();continue}for(N=0;N<oe;N++)Qx(k[N],L[N],E.concat(N),mr.extendFlat({inArray:s,arrayIndex:N},i));if(ne)for(N=oe;N<ue;N++)re.push(N)}else!R&&mr.isPlainObject(k)?Qx(k,L,E,i):z?B&&H?(v&&(c.calc=!0),(v||i.newDataRevision)&&T()):B!==H?c.calc=!0:T():B&&H?(k.length!==L.length||String(k)!==String(L))&&T():T()}}}for(s in t)if(!(s in e||s.charAt(0)==="_"||typeof t[s]=="function"))if(a=u(r.concat(s)),M(a)&&Array.isArray(t[s])){c.calc=!0;return}else T()}function B6(e,t){var r;for(r in e)if(r.charAt(0)!=="_"){var i=e[r],a=t[r];if(i!==a)if(mr.isPlainObject(i)&&mr.isPlainObject(a)){if(B6(i,a))return!0}else if(Array.isArray(i)&&Array.isArray(a)){if(i.length!==a.length)return!0;for(var s=0;s<i.length;s++)if(i[s]!==a[s])if(mr.isPlainObject(i[s])&&mr.isPlainObject(a[s])){if(B6(i[s],a[s]))return!0}else return!0}else return!0}}function gle(e,t,r){if(e=mr.getGraphDiv(e),!mr.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var i=e._transitionData;i._frameQueue||(i._frameQueue=[]),r=$r.supplyAnimationDefaults(r);var a=r.transition,s=r.frame;i._frameWaitingCnt===void 0&&(i._frameWaitingCnt=0);function l(v){return Array.isArray(a)?v>=a.length?a[0]:a[v]:a}function u(v){return Array.isArray(s)?v>=s.length?s[0]:s[v]:s}function c(v,m){var _=0;return function(){if(v&&++_===m)return v()}}return new Promise(function(v,m){function _(){if(i._frameQueue.length!==0){for(;i._frameQueue.length;){var oe=i._frameQueue.pop();oe.onInterrupt&&oe.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}function T(oe){if(oe.length!==0){for(var ue=0;ue<oe.length;ue++){var me;oe[ue].type==="byname"?me=$r.computeFrame(e,oe[ue].name):me=oe[ue].data;var Se=u(ue),Ce=l(ue);Ce.duration=Math.min(Ce.duration,Se.duration);var Me={frame:me,name:oe[ue].name,frameOpts:Se,transitionOpts:Ce};ue===oe.length-1&&(Me.onComplete=c(v,2),Me.onInterrupt=m),i._frameQueue.push(Me)}r.mode==="immediate"&&(i._lastFrameAt=-1/0),i._animationRaf||L()}}function M(){e.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null}function k(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var oe=i._currentFrame=i._frameQueue.shift();if(oe){var ue=oe.name?oe.name.toString():null;e._fullLayout._currentFrame=ue,i._lastFrameAt=Date.now(),i._timeToNext=oe.frameOpts.duration,$r.transition(e,oe.frame.data,oe.frame.layout,Vn.coerceTraceIndices(e,oe.frame.traces),oe.frameOpts,oe.transitionOpts).then(function(){oe.onComplete&&oe.onComplete()}),e.emit("plotly_animatingframe",{name:ue,frame:oe.frame,animation:{frame:oe.frameOpts,transition:oe.transitionOpts}})}else M()}function L(){e.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var oe=function(){i._animationRaf=window.requestAnimationFrame(oe),Date.now()-i._lastFrameAt>i._timeToNext&&k()};oe()}var E=0;function I(oe){return Array.isArray(a)?E>=a.length?oe.transitionOpts=a[E]:oe.transitionOpts=a[0]:oe.transitionOpts=a,E++,oe}var R,N,z=[],B=t==null,H=Array.isArray(t),V=!B&&!H&&mr.isPlainObject(t);if(V)z.push({type:"object",data:I(mr.extendFlat({},t))});else if(B||["string","number"].indexOf(typeof t)!==-1)for(R=0;R<i._frames.length;R++)N=i._frames[R],N&&(B||String(N.group)===String(t))&&z.push({type:"byname",name:String(N.name),data:I({name:N.name})});else if(H)for(R=0;R<t.length;R++){var Y=t[R];["number","string"].indexOf(typeof Y)!==-1?(Y=String(Y),z.push({type:"byname",name:Y,data:I({name:Y})})):mr.isPlainObject(Y)&&z.push({type:"object",data:I(mr.extendFlat({},Y))})}for(R=0;R<z.length;R++)if(N=z[R],N.type==="byname"&&!i._frameHash[N.data.name]){mr.warn('animate failure: frame not found: "'+N.data.name+'"'),m();return}["next","immediate"].indexOf(r.mode)!==-1&&_(),r.direction==="reverse"&&z.reverse();var J=e._fullLayout._currentFrame;if(J&&r.fromcurrent){var re=-1;for(R=0;R<z.length;R++)if(N=z[R],N.type==="byname"&&N.name===J){re=R;break}if(re>0&&re<z.length-1){var ne=[];for(R=0;R<z.length;R++)N=z[R],(z[R].type!=="byname"||R>re)&&ne.push(N);z=ne}}z.length>0?T(z):(e.emit("plotly_animated"),v())})}function _le(e,t,r){if(e=mr.getGraphDiv(e),t==null)return Promise.resolve();if(!mr.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var i,a,s,l,u=e._transitionData._frames,c=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var v=u.length+t.length*2,m=[],_={};for(i=t.length-1;i>=0;i--)if(mr.isPlainObject(t[i])){var T=t[i].name,M=(c[T]||_[T]||{}).name,k=t[i].name,L=c[M]||_[M];M&&k&&typeof k=="number"&&L&&F6<lF&&(F6++,mr.warn('addFrames: overwriting frame "'+(c[M]||_[M]).name+'" with a frame whose name of type "number" also equates to "'+M+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),F6===lF&&mr.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),_[T]={name:T},m.push({frame:$r.supplyFrameDefaults(t[i]),index:r&&r[i]!==void 0&&r[i]!==null?r[i]:v+i})}m.sort(function(V,Y){return V.index>Y.index?-1:V.index<Y.index?1:0});var E=[],I=[],R=u.length;for(i=m.length-1;i>=0;i--){if(a=m[i].frame,typeof a.name=="number"&&mr.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;c[a.name="frame "+e._transitionData._counter++];);if(c[a.name]){for(s=0;s<u.length&&(u[s]||{}).name!==a.name;s++);E.push({type:"replace",index:s,value:a}),I.unshift({type:"replace",index:s,value:u[s]})}else l=Math.max(0,Math.min(m[i].index,R)),E.push({type:"insert",index:l,value:a}),I.unshift({type:"delete",index:l}),R++}var N=$r.modifyFrames,z=$r.modifyFrames,B=[e,I],H=[e,E];return Ts&&Ts.add(e,N,B,z,H),$r.modifyFrames(e,E)}function xle(e,t){if(e=mr.getGraphDiv(e),!mr.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var r,i,a=e._transitionData._frames,s=[],l=[];if(!t)for(t=[],r=0;r<a.length;r++)t.push(r);for(t=t.slice(),t.sort(),r=t.length-1;r>=0;r--)i=t[r],s.push({type:"delete",index:i}),l.unshift({type:"insert",index:i,value:a[i]});var u=$r.modifyFrames,c=$r.modifyFrames,v=[e,l],m=[e,s];return Ts&&Ts.add(e,u,v,c,m),$r.modifyFrames(e,s)}function ble(e){e=mr.getGraphDiv(e);var t=e._fullLayout||{},r=e._fullData||[];return $r.cleanPlot([],{},r,t),$r.purge(e),q6.purge(e),t._container&&t._container.remove(),delete e._context,e}function wle(e){var t=e._fullLayout,r=e.getBoundingClientRect();if(!mr.equalDomRects(r,t._lastBBox)){var i=t._invTransform=mr.inverseTransformMatrix(mr.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(i[0][0]*i[0][0]+i[0][1]*i[0][1]+i[0][2]*i[0][2]),t._invScaleY=Math.sqrt(i[1][0]*i[1][0]+i[1][1]*i[1][1]+i[1][2]*i[1][2]),t._lastBBox=r}}function Tle(e){var t=Yx.select(e),r=e._fullLayout;if(r._calcInverseTransform=wle,r._calcInverseTransform(e),r._container=t.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var i={};Yx.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),r._uid=mr.randstr(i)}r._paperdiv.selectAll(".main-svg").attr(Qse.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var a=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=a.append("g").classed("imagelayer",!0),r._shapeLowerLayer=a.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._smithlayer=r._paper.append("g").classed("smithlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._iciclelayer=r._paper.append("g").classed("iciclelayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var s=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=s.append("g").classed("imagelayer",!0),r._shapeUpperLayer=s.append("g").classed("shapelayer",!0),r._selectionLayer=r._toppaper.append("g").classed("selectionlayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}ei.animate=gle;ei.addFrames=_le;ei.deleteFrames=xle;ei.addTraces=xF;ei.deleteTraces=bF;ei.extendTraces=gF;ei.moveTraces=N6;ei.prependTraces=_F;ei.newPlot=nle;ei._doPlot=tle;ei.purge=ble;ei.react=ple;ei.redraw=ile;ei.relayout=Jg;ei.restyle=jx;ei.setPlotConfig=rle;ei.update=Kx;ei._guiRelayout=O6(Jg);ei._guiRestyle=O6(jx);ei._guiUpdate=O6(Kx);ei._storeDirectGUIEdit=ule});var Hd=he(Gu=>{"use strict";var Ale=sa();Gu.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox")||e._has("map"))?500:0};Gu.getRedrawFunc=function(e){return function(){Ale.getComponentMethod("colorbar","draw")(e)}};Gu.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};Gu.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var LF=window.URL||window.webkitURL;Gu.createObjectURL=function(e){return LF.createObjectURL(e)};Gu.revokeObjectURL=function(e){return LF.revokeObjectURL(e)};Gu.createBlob=function(e,t){if(t==="svg")return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([e],{type:"application/json;charset=utf-8"});var r=Mle(window.atob(e));return new window.Blob([r],{type:"image/"+t})};Gu.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function Mle(e){for(var t=e.length,r=new ArrayBuffer(t),i=new Uint8Array(r),a=0;a<t;a++)i[a]=e.charCodeAt(a);return r}Gu.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;Gu.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."});var rb=he((K2e,PF)=>{"use strict";var H6=Ka(),Sle=Nt(),kle=_i(),Cle=Ua(),tb=Bh(),V6=/"/g,Qg="TOBESTRIPPED",Ele=new RegExp('("'+Qg+")|("+Qg+'")',"g");function Lle(e){var t=H6.select("body").append("div").style({display:"none"}).html(""),r=e.replace(/(&[^;]*;)/gi,function(i){return i==="&lt;"?"&#60;":i==="&rt;"?"&#62;":i.indexOf("<")!==-1||i.indexOf(">")!==-1?"":t.html(i).text()});return t.remove(),r}function Ple(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}PF.exports=function(t,r,i){var a=t._fullLayout,s=a._paper,l=a._toppaper,u=a.width,c=a.height,v;s.insert("rect",":first-child").call(kle.setRect,0,0,u,c).call(Cle.fill,a.paper_bgcolor);var m=a._basePlotModules||[];for(v=0;v<m.length;v++){var _=m[v];_.toSVG&&_.toSVG(t)}if(l){var T=l.node().childNodes,M=Array.prototype.slice.call(T);for(v=0;v<M.length;v++){var k=M[v];k.childNodes.length&&s.node().appendChild(k)}}a._draggers&&a._draggers.remove(),s.node().style.background="",s.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=H6.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){E.remove();return}else E.style({visibility:null,display:null});var I=this.style.fontFamily;I&&I.indexOf('"')!==-1&&E.style("font-family",I.replace(V6,Qg));var R=this.style.fontWeight;R&&(R==="normal"||R==="400")&&E.style("font-weight",void 0);var N=this.style.fontStyle;N&&N==="normal"&&E.style("font-style",void 0);var z=this.style.fontVariant;z&&z==="normal"&&E.style("font-variant",void 0)}),s.selectAll(".gradient_filled,.pattern_filled").each(function(){var E=H6.select(this),I=this.style.fill;I&&I.indexOf("url(")!==-1&&E.style("fill",I.replace(V6,Qg));var R=this.style.stroke;R&&R.indexOf("url(")!==-1&&E.style("stroke",R.replace(V6,Qg))}),(r==="pdf"||r==="eps")&&s.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),s.node().setAttributeNS(tb.xmlns,"xmlns",tb.svg),s.node().setAttributeNS(tb.xmlns,"xmlns:xlink",tb.xlink),r==="svg"&&i&&(s.attr("width",i*u),s.attr("height",i*c),s.attr("viewBox","0 0 "+u+" "+c));var L=new window.XMLSerializer().serializeToString(s.node());return L=Lle(L),L=Ple(L),L=L.replace(Ele,"'"),Sle.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}});var ab=he((Q2e,zF)=>{"use strict";var DF=Nt(),Dle=J_().EventEmitter,cm=Hd();function zle(e){var t=e.emitter||new Dle,r=new Promise(function(i,a){var s=window.Image,l=e.svg,u=e.format||"png";if(DF.isIE()&&u!=="svg"){var c=new Error(cm.MSG_IE_BAD_FORMAT);return a(c),e.promise?r:t.emit("error",c)}var v=e.canvas,m=e.scale||1,_=e.width||300,T=e.height||150,M=m*_,k=m*T,L=v.getContext("2d",{willReadFrequently:!0}),E=new s,I,R;u==="svg"||DF.isSafari()?R=cm.encodeSVG(l):(I=cm.createBlob(l,"svg"),R=cm.createObjectURL(I)),v.width=M,v.height=k,E.onload=function(){var N;switch(I=null,cm.revokeObjectURL(R),u!=="svg"&&L.drawImage(E,0,0,M,k),u){case"jpeg":N=v.toDataURL("image/jpeg");break;case"png":N=v.toDataURL("image/png");break;case"webp":N=v.toDataURL("image/webp");break;case"svg":N=R;break;default:var z="Image format is not jpeg, png, svg or webp.";if(a(new Error(z)),!e.promise)return t.emit("error",z)}i(N),e.promise||t.emit("success",N)},E.onerror=function(N){if(I=null,cm.revokeObjectURL(R),a(N),!e.promise)return t.emit("error",N)},E.src=R});return e.promise?r:t}zF.exports=zle});var Z6=he(($2e,FF)=>{"use strict";var IF=Ia(),RF=U6(),Ile=jn(),Hf=Nt(),$g=Hd(),Rle=rb(),Fle=ab(),qle=s_().version,G6={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function Nle(e,t){t=t||{};var r,i,a,s;Hf.isPlainObject(e)?(r=e.data||[],i=e.layout||{},a=e.config||{},s={}):(e=Hf.getGraphDiv(e),r=Hf.extendDeep([],e.data),i=Hf.extendDeep({},e.layout),a=e._context,s=e._fullLayout||{});function l(H){return!(H in t)||Hf.validate(t[H],G6[H])}if(!l("width")&&t.width!==null||!l("height")&&t.height!==null)throw new Error("Height and width should be pixel values.");if(!l("format"))throw new Error("Export format is not "+Hf.join2(G6.format.values,", "," or ")+".");var u={};function c(H,V){return Hf.coerce(t,u,G6,H,V)}var v=c("format"),m=c("width"),_=c("height"),T=c("scale"),M=c("setBackground"),k=c("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var E=Hf.extendFlat({},i);m?E.width=m:t.width===null&&IF(s.width)&&(E.width=s.width),_?E.height=_:t.height===null&&IF(s.height)&&(E.height=s.height);var I=Hf.extendFlat({},a,{_exportedPlot:!0,staticPlot:!0,setBackground:M}),R=$g.getRedrawFunc(L);function N(){return new Promise(function(H){setTimeout(H,$g.getDelay(L._fullLayout))})}function z(){return new Promise(function(H,V){var Y=Rle(L,v,T),J=L._fullLayout.width,re=L._fullLayout.height;function ne(){RF.purge(L),document.body.removeChild(L)}if(v==="full-json"){var oe=Ile.graphJson(L,!1,"keepdata","object",!0,!0);return oe.version=qle,oe=JSON.stringify(oe),ne(),H(k?oe:$g.encodeJSON(oe))}if(ne(),v==="svg")return H(k?Y:$g.encodeSVG(Y));var ue=document.createElement("canvas");ue.id=Hf.randstr(),Fle({format:v,width:J,height:re,scale:T,canvas:ue,svg:Y,promise:!0}).then(H).catch(V)})}function B(H){return k?H.replace($g.IMAGE_URL_PREFIX,""):H}return new Promise(function(H,V){RF.newPlot(L,r,E,I).then(R).then(N).then(z).then(function(Y){H(B(Y))}).catch(function(Y){V(Y)})})}FF.exports=Nle});var OF=he((exe,BF)=>{"use strict";var fu=Nt(),Ble=jn(),Ole=Fh(),Ule=hd().dfltConfig,uu=fu.isPlainObject,tv=Array.isArray,qF=fu.isArrayOrTypedArray;BF.exports=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var i=Ole.get(),a=[],s={_context:fu.extendFlat({},Ule)},l,u;tv(t)?(s.data=fu.extendDeep([],t),l=t):(s.data=[],l=[],a.push(Hn("array","data"))),uu(r)?(s.layout=fu.extendDeep({},r),u=r):(s.layout={},u={},arguments.length>1&&a.push(Hn("object","layout"))),Ble.supplyDefaults(s);for(var c=s._fullData,v=l.length,m=0;m<v;m++){var _=l[m],T=["data",m];if(!uu(_)){a.push(Hn("object",T));continue}var M=c[m],k=M.type,L=i.traces[k].attributes;L.type={valType:"enumerated",values:[k]},M.visible===!1&&_.visible!==!1&&a.push(Hn("invisible",T)),e1(_,M,L,a,T);var E=_.transforms,I=M.transforms;if(E){tv(E)||a.push(Hn("array",T,["transforms"])),T.push("transforms");for(var R=0;R<E.length;R++){var N=["transforms",R],z=E[R].type;if(!uu(E[R])){a.push(Hn("object",T,N));continue}var B=i.transforms[z]?i.transforms[z].attributes:{};B.type={valType:"enumerated",values:Object.keys(i.transforms)},e1(E[R],I[R],B,a,T,N)}}}var H=s._fullLayout,V=Vle(i,c);return e1(u,H,V,a,"layout"),a.length===0?void 0:a};function e1(e,t,r,i,a,s){s=s||[];for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];if(c!=="transforms"){var v=s.slice();v.push(c);var m=e[c],_=t[c],T=Zle(r,c),M=(T||{}).valType,k=M==="info_array",L=M==="colorscale",E=(T||{}).items;if(!Gle(r,c))i.push(Hn("schema",a,v));else if(uu(m)&&uu(_)&&M!=="any")e1(m,_,T,i,a,v);else if(k&&tv(m)){m.length>_.length&&i.push(Hn("unused",a,v.concat(_.length)));var I=_.length,R=Array.isArray(E);R&&(I=Math.min(I,E.length));var N,z,B,H,V;if(T.dimensions===2)for(z=0;z<I;z++)if(tv(m[z])){m[z].length>_[z].length&&i.push(Hn("unused",a,v.concat(z,_[z].length)));var Y=_[z].length;for(N=0;N<(R?Math.min(Y,E[z].length):Y);N++)B=R?E[z][N]:E,H=m[z][N],V=_[z][N],fu.validate(H,B)?V!==H&&V!==+H&&i.push(Hn("dynamic",a,v.concat(z,N),H,V)):i.push(Hn("value",a,v.concat(z,N),H))}else i.push(Hn("array",a,v.concat(z),m[z]));else for(z=0;z<I;z++)B=R?E[z]:E,H=m[z],V=_[z],fu.validate(H,B)?V!==H&&V!==+H&&i.push(Hn("dynamic",a,v.concat(z),H,V)):i.push(Hn("value",a,v.concat(z),H))}else if(T.items&&!k&&tv(m)){var J=E[Object.keys(E)[0]],re=[],ne,oe;for(ne=0;ne<_.length;ne++){var ue=_[ne]._index||ne;if(oe=v.slice(),oe.push(ue),uu(m[ue])&&uu(_[ne])){re.push(ue);var me=m[ue],Se=_[ne];uu(me)&&me.visible!==!1&&Se.visible===!1?i.push(Hn("invisible",a,oe)):e1(me,Se,J,i,a,oe)}}for(ne=0;ne<m.length;ne++)oe=v.slice(),oe.push(ne),uu(m[ne])?re.indexOf(ne)===-1&&i.push(Hn("unused",a,oe)):i.push(Hn("object",a,oe,m[ne]))}else!uu(m)&&uu(_)?i.push(Hn("object",a,v,m)):!qF(m)&&qF(_)&&!k&&!L?i.push(Hn("array",a,v,m)):c in t?fu.validate(m,T)?T.valType==="enumerated"&&(T.coerceNumber&&m!==+_||m!==_)&&i.push(Hn("dynamic",a,v,m,_)):i.push(Hn("value",a,v,m)):i.push(Hn("unused",a,v,m))}}return i}function Vle(e,t){for(var r=e.layout.layoutAttributes,i=0;i<t.length;i++){var a=t[i],s=e.traces[a.type],l=s.layoutAttributes;l&&(a.subplot?fu.extendFlat(r[s.attributes.subplot.dflt],l):fu.extendFlat(r,l))}return r}var Hle={object:function(e,t){var r;return e==="layout"&&t===""?r="The layout argument":e[0]==="data"&&t===""?r="Trace "+e[1]+" in the data argument":r=Gd(e)+"key "+t,r+" must be linked to an object container"},array:function(e,t){var r;return e==="data"?r="The data argument":r=Gd(e)+"key "+t,r+" must be linked to an array container"},schema:function(e,t){return Gd(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var i=uu(r)?"container":"key";return Gd(e)+i+" "+t+" did not get coerced"},dynamic:function(e,t,r,i){return[Gd(e)+"key",t,"(set to '"+r+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?Gd(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[Gd(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function Gd(e){return tv(e)?"In data trace "+e[1]+", ":"In "+e+", "}function Hn(e,t,r,i,a){r=r||"";var s,l;tv(t)?(s=t[0],l=t[1]):(s=t,l=null);var u=Wle(r),c=Hle[e](t,u,i,a);return fu.log(c),{code:e,container:s,trace:l,path:r,astr:u,msg:c}}function Gle(e,t){var r=NF(t),i=r.keyMinusId,a=r.id;return i in e&&e[i]._isSubplotObj&&a?!0:t in e}function Zle(e,t){if(t in e)return e[t];var r=NF(t);return e[r.keyMinusId]}var Yle=fu.counterRegex("([a-z]+)");function NF(e){var t=e.match(Yle);return{keyMinusId:t&&t[1],id:t&&t[2]}}function Wle(e){if(!tv(e))return String(e);for(var t="",r=0;r<e.length;r++){var i=e[r];typeof i=="number"?t=t.substr(0,t.length-1)+"["+i+"]":t+=i,r<e.length-1&&(t+=".")}return t}});var HF=he((txe,VF)=>{"use strict";var UF=Nt(),t1=Hd();function Xle(e,t,r){var i=document.createElement("a"),a="download"in i,s=new Promise(function(l,u){var c,v;if(UF.isIE())return c=t1.createBlob(e,"svg"),window.navigator.msSaveBlob(c,t),c=null,l(t);if(a)return c=t1.createBlob(e,r),v=t1.createObjectURL(c),i.href=v,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),t1.revokeObjectURL(v),c=null,l(t);if(UF.isSafari()){var m=r==="svg"?",":";base64,";return t1.octetStream(m+encodeURIComponent(e)),l(t)}u(new Error("download error"))});return s}VF.exports=Xle});var W6=he((rxe,GF)=>{"use strict";var Y6=Nt(),jle=Z6(),Jle=HF(),Kle=Hd();function Qle(e,t){var r;return Y6.isPlainObject(e)||(r=Y6.getGraphDiv(e)),t=t||{},t.format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(i,a){r&&r._snapshotInProgress&&a(new Error("Snapshotting already in progress.")),Y6.isIE()&&t.format!=="svg"&&a(new Error(Kle.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var s=jle(e,t),l=t.filename||e.fn||"newplot";l+="."+t.format.replace("-","."),s.then(function(u){return r&&(r._snapshotInProgress=!1),Jle(u,l,t.format)}).then(function(u){i(u)}).catch(function(u){r&&(r._snapshotInProgress=!1),a(u)})})}GF.exports=Qle});var jF=he(X6=>{"use strict";var Xs=Nt(),js=Xs.isPlainObject,ZF=Fh(),YF=jn(),$le=gs(),WF=Di(),XF=hd().dfltConfig;X6.makeTemplate=function(e){e=Xs.isPlainObject(e)?e:Xs.getGraphDiv(e),e=Xs.extendDeep({_context:XF},{data:e.data,layout:e.layout}),YF.supplyDefaults(e);var t=e.data||[],r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules,r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(M){var k={};r1(M,k,tue.bind(null,M));var L=Xs.coerce(M,{},$le,"type"),E=i.data[L];E||(E=i.data[L]=[]),E.push(k)}),r1(r,i.layout,eue.bind(null,r)),delete i.layout.template;var a=r.template;if(js(a)){var s=a.layout,l,u,c,v,m,_;js(s)&&ib(s,i.layout);var T=a.data;if(js(T)){for(u in i.data)if(c=T[u],Array.isArray(c)){for(m=i.data[u],_=m.length,v=c.length,l=0;l<_;l++)ib(c[l%v],m[l]);for(l=_;l<v;l++)m.push(Xs.extendDeep({},c[l]))}for(u in T)u in i.data||(i.data[u]=Xs.extendDeep([],T[u]))}}return i};function ib(e,t){e=Xs.extendDeep({},e);var r=Object.keys(e).sort(),i,a;function s(m,_,T){if(js(_)&&js(m))ib(m,_);else if(Array.isArray(_)&&Array.isArray(m)){var M=WF.arrayTemplater({_template:e},T);for(a=0;a<_.length;a++){var k=_[a],L=M.newItem(k)._template;L&&ib(L,k)}var E=M.defaultItems();for(a=0;a<E.length;a++)_.push(E[a]._template);for(a=0;a<_.length;a++)delete _[a].templateitemname}}for(i=0;i<r.length;i++){var l=r[i],u=e[l];if(l in t?s(u,t[l],l):t[l]=u,nb(l)===l)for(var c in t){var v=nb(c);c!==v&&v===l&&!(c in e)&&s(u,t[c],l)}}}function nb(e){return e.replace(/[0-9]+$/,"")}function r1(e,t,r,i,a){var s=a&&r(a);for(var l in e){var u=e[l],c=cu(e,l,i),v=cu(e,l,a),m=r(v);if(!m){var _=nb(l);_!==l&&(v=cu(e,_,a),m=r(v))}if(!(s&&s===m)&&!(!m||m._noTemplating||m.valType==="data_array"||m.arrayOk&&Array.isArray(u)))if(!m.valType&&js(u))r1(u,t,r,c,v);else if(m._isLinkedToArray&&Array.isArray(u))for(var T=!1,M=0,k={},L=0;L<u.length;L++){var E=u[L];if(js(E)){var I=E.name;if(I)k[I]||(r1(E,t,r,cu(u,M,c),cu(u,M,v)),M++,k[I]=1);else if(!T){var R=WF.arrayDefaultKey(l),N=cu(e,R,i),z=cu(u,M,c);r1(E,t,r,z,cu(u,M,v));var B=Xs.nestedProperty(t,z),H=Xs.nestedProperty(t,N);H.set(B.get()),B.set(null),T=!0}}}else{var V=Xs.nestedProperty(t,c);V.set(u)}}}function eue(e,t){return ZF.getLayoutValObject(e,Xs.nestedProperty({},t).parts)}function tue(e,t){return ZF.getTraceValObject(e,Xs.nestedProperty({},t).parts)}function cu(e,t,r){var i;return r?Array.isArray(e)?i=r+"["+t+"]":i=r+"."+t:i=t,i}X6.validateTemplate=function(e,t){var r=Xs.extendDeep({},{_context:XF,data:e.data,layout:e.layout}),i=r.layout||{};js(t)||(t=i.template||{});var a=t.layout,s=t.data,l=[];r.layout=i,r.layout.template=t,YF.supplyDefaults(r);var u=r._fullLayout,c=r._fullData,v={};function m(N,z){for(var B in N)if(B.charAt(0)!=="_"&&js(N[B])){var H=nb(B),V=[],Y;for(Y=0;Y<z.length;Y++)V.push(cu(N,B,z[Y])),H!==B&&V.push(cu(N,H,z[Y]));for(Y=0;Y<V.length;Y++)v[V[Y]]=1;m(N[B],V)}}function _(N,z){for(var B in N)if(B.indexOf("defaults")===-1&&js(N[B])){var H=cu(N,B,z);v[H]?_(N[B],H):l.push({code:"unused",path:H})}}if(js(a)?(m(u,["layout"]),_(a,"layout")):l.push({code:"layout"}),!js(s))l.push({code:"data"});else{for(var T={},M,k=0;k<c.length;k++){var L=c[k];M=L.type,T[M]=(T[M]||0)+1,L._fullInput._template||l.push({code:"missing",index:L._fullInput.index,traceType:M})}for(M in s){var E=s[M].length,I=T[M]||0;E>I?l.push({code:"unused",traceType:M,templateCount:E,dataCount:I}):I>E&&l.push({code:"reused",traceType:M,templateCount:E,dataCount:I})}}function R(N,z){for(var B in N)if(B.charAt(0)!=="_"){var H=N[B],V=cu(N,B,z);js(H)?(Array.isArray(N)&&H._template===!1&&H.templateitemname&&l.push({code:"missing",path:V,templateitemname:H.templateitemname}),R(H,V)):Array.isArray(H)&&rue(H)&&R(H,V)}}if(R({data:c,layout:u},""),l.length)return l.map(aue)};function rue(e){for(var t=0;t<e.length;t++)if(js(e[t]))return!0}function aue(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":e.path?t="There are no templates for item "+e.path+" with name "+e.templateitemname:t="There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":e.path?t="The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}return e.msg=t,e}});var KF=he(Wi=>{"use strict";var Kn=U6();Wi._doPlot=Kn._doPlot;Wi.newPlot=Kn.newPlot;Wi.restyle=Kn.restyle;Wi.relayout=Kn.relayout;Wi.redraw=Kn.redraw;Wi.update=Kn.update;Wi._guiRestyle=Kn._guiRestyle;Wi._guiRelayout=Kn._guiRelayout;Wi._guiUpdate=Kn._guiUpdate;Wi._storeDirectGUIEdit=Kn._storeDirectGUIEdit;Wi.react=Kn.react;Wi.extendTraces=Kn.extendTraces;Wi.prependTraces=Kn.prependTraces;Wi.addTraces=Kn.addTraces;Wi.deleteTraces=Kn.deleteTraces;Wi.moveTraces=Kn.moveTraces;Wi.purge=Kn.purge;Wi.addFrames=Kn.addFrames;Wi.deleteFrames=Kn.deleteFrames;Wi.animate=Kn.animate;Wi.setPlotConfig=Kn.setPlotConfig;var iue=Hy().getGraphDiv,nue=yx().eraseActiveShape;Wi.deleteActiveShape=function(e){return nue(iue(e))};Wi.toImage=Z6();Wi.validate=OF();Wi.downloadImage=W6();var JF=jF();Wi.makeTemplate=JF.makeTemplate;Wi.validateTemplate=JF.validateTemplate});var $F=he((nxe,QF)=>{"use strict";var j6=Nt(),oue=sa();QF.exports=function(t,r,i,a){var s=a("x"),l=a("y"),u,c=oue.getComponentMethod("calendars","handleTraceDefaults");if(c(t,r,["x","y"],i),s){var v=j6.minRowLength(s);l?u=Math.min(v,j6.minRowLength(l)):(u=v,a("y0"),a("dy"))}else{if(!l)return 0;u=j6.minRowLength(l),a("x0"),a("dx")}return r._length=u,u}});var aq=he((oxe,rq)=>{"use strict";var eq=Nt().dateTick0,sue=Bi(),lue=sue.ONEWEEK;function tq(e,t){return e%lue===0?eq(t,1):eq(t,0)}rq.exports=function(t,r,i,a,s){if(s||(s={x:!0,y:!0}),s.x){var l=a("xperiod");l&&(a("xperiod0",tq(l,r.xcalendar)),a("xperiodalignment"))}if(s.y){var u=a("yperiod");u&&(a("yperiod0",tq(u,r.ycalendar)),a("yperiodalignment"))}}});var oq=he((sxe,nq)=>{"use strict";var iq=["orientation","groupnorm","stackgaps"];nq.exports=function(t,r,i,a){var s=i._scatterStackOpts,l=a("stackgroup");if(l){var u=r.xaxis+r.yaxis,c=s[u];c||(c=s[u]={});var v=c[l],m=!1;v?v.traces.push(r):(v=c[l]={traceIndices:[],traces:[r]},m=!0);for(var _={orientation:r.x&&!r.y?"h":"v"},T=0;T<iq.length;T++){var M=iq[T],k=M+"Found";if(!v[k]){var L=t[M]!==void 0,E=M==="orientation";if((L||m)&&(v[M]=a(M,_[M]),E&&(v.fillDflt=v[M]==="h"?"tonextx":"tonexty"),L&&(v[k]=!0,!m&&(delete v.traces[0][M],E))))for(var I=0;I<v.traces.length-1;I++){var R=v.traces[I];R._input.fill!==R.fill&&(R.fill=v.fillDflt)}}}return v}}});var J6=he((lxe,fq)=>{"use strict";var sq=Ua(),lq=Pf().hasColorscale,uq=Td(),uue=is();fq.exports=function(t,r,i,a,s,l){var u=uue.isBubble(t),c=(t.line||{}).color,v;if(l=l||{},c&&(i=c),s("marker.symbol"),s("marker.opacity",u?.7:1),s("marker.size"),l.noAngle||(s("marker.angle"),l.noAngleRef||s("marker.angleref"),l.noStandOff||s("marker.standoff")),s("marker.color",i),lq(t,"marker")&&uq(t,r,a,s,{prefix:"marker.",cLetter:"c"}),l.noSelect||(s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size")),l.noLine||(c&&!Array.isArray(c)&&r.marker.color!==c?v=c:u?v=sq.background:v=sq.defaultLine,s("marker.line.color",v),lq(t,"marker.line")&&uq(t,r,a,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",u?1:0)),u&&(s("marker.sizeref"),s("marker.sizemin"),s("marker.sizemode")),l.gradient){var m=s("marker.gradient.type");m!=="none"&&s("marker.gradient.color")}}});var K6=he((uxe,cq)=>{"use strict";var fue=Nt().isArrayOrTypedArray,cue=Pf().hasColorscale,hue=Td();cq.exports=function(t,r,i,a,s,l){l||(l={});var u=(t.marker||{}).color;if(u&&u._inputArray&&(u=u._inputArray),s("line.color",i),cue(t,"line"))hue(t,r,a,s,{prefix:"line.",cLetter:"c"});else{var c=(fue(u)?!1:u)||i;s("line.color",c)}s("line.width"),l.noDash||s("line.dash"),l.backoff&&s("line.backoff")}});var vq=he((fxe,hq)=>{"use strict";hq.exports=function(t,r,i){var a=i("line.shape");a==="spline"&&i("line.smoothing")}});var Q6=he((cxe,dq)=>{"use strict";var vue=Nt();dq.exports=function(e,t,r,i,a){a=a||{},i("textposition"),vue.coerceFont(i,"textfont",a.font||r.font,a),a.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}});var $6=he((hxe,mq)=>{"use strict";var ob=Ua(),pq=Nt().isArrayOrTypedArray;function due(e){for(var t=ob.interpolate(e[0][1],e[1][1],.5),r=2;r<e.length;r++){var i=ob.interpolate(e[r-1][1],e[r][1],.5);t=ob.interpolate(t,i,e[r-1][0]/e[r][0])}return t}mq.exports=function(t,r,i,a,s){s||(s={});var l=!1;if(r.marker){var u=r.marker.color,c=(r.marker.line||{}).color;u&&!pq(u)?l=u:c&&!pq(c)&&(l=c)}var v;if(s.moduleHasFillgradient){var m=a("fillgradient.type");if(m!=="none"){a("fillgradient.start"),a("fillgradient.stop");var _=a("fillgradient.colorscale");_&&(v=due(_))}}a("fillcolor",ob.addOpacity((r.line||{}).color||l||v||i,.5))}});var xq=he((vxe,_q)=>{"use strict";var yq=Nt(),pue=sa(),mue=Pc(),yue=zx(),hm=is(),gue=$F(),_ue=aq(),xue=oq(),bue=J6(),wue=K6(),gq=vq(),Tue=Q6(),Aue=$6(),Mue=Nt().coercePattern;_q.exports=function(t,r,i,a){function s(M,k){return yq.coerce(t,r,mue,M,k)}var l=gue(t,r,a,s);if(l||(r.visible=!1),!!r.visible){_ue(t,r,a,s),s("xhoverformat"),s("yhoverformat"),s("zorder");var u=xue(t,r,a,s);a.scattermode==="group"&&r.orientation===void 0&&s("orientation","v");var c=!u&&l<yue.PTS_LINESONLY?"lines+markers":"lines";s("text"),s("hovertext"),s("mode",c),hm.hasMarkers(r)&&bue(t,r,i,a,s,{gradient:!0}),hm.hasLines(r)&&(wue(t,r,i,a,s,{backoff:!0}),gq(t,r,s),s("connectgaps"),s("line.simplify")),hm.hasText(r)&&(s("texttemplate"),Tue(t,r,a,s));var v=[];(hm.hasMarkers(r)||hm.hasText(r))&&(s("cliponaxis"),s("marker.maxdisplayed"),v.push("points")),s("fill",u?u.fillDflt:"none"),r.fill!=="none"&&(Aue(t,r,i,s,{moduleHasFillgradient:!0}),hm.hasLines(r)||gq(t,r,s),Mue(s,"fillpattern",r.fillcolor,!1));var m=(r.line||{}).color,_=(r.marker||{}).color;(r.fill==="tonext"||r.fill==="toself")&&v.push("fills"),s("hoveron",v.join("+")||"points"),r.hoveron!=="fills"&&s("hovertemplate");var T=pue.getComponentMethod("errorbars","supplyDefaults");T(t,r,m||_||i,{axis:"y"}),T(t,r,m||_||i,{axis:"x",inherit:"y"}),yq.coerceSelectionMarkerOpacity(r,s)}}});var wq=he((dxe,bq)=>{"use strict";var Sue=Sg().getAxisGroup;bq.exports=function(t,r,i,a){var s=r.orientation,l=r[{v:"x",h:"y"}[s]+"axis"],u=Sue(i,l)+s,c=i._alignmentOpts||{},v=a("alignmentgroup"),m=c[u];m||(m=c[u]={});var _=m[v];_?_.traces.push(r):_=m[v]={traces:[r],alignmentIndex:Object.keys(m).length,offsetGroups:{}};var T=a("offsetgroup"),M=_.offsetGroups,k=M[T];T&&(k||(k=M[T]={offsetIndex:Object.keys(M).length}),r._offsetIndex=k.offsetIndex)}});var Aq=he((pxe,Tq)=>{"use strict";var kue=Nt(),Cue=wq(),Eue=Pc();Tq.exports=function(t,r){var i,a,s;function l(_){return kue.coerce(a._input,a,Eue,_)}if(r.scattermode==="group")for(s=0;s<t.length;s++)a=t[s],a.type==="scatter"&&(i=a._input,Cue(i,a,r,l));for(s=0;s<t.length;s++){var u=t[s];if(u.type==="scatter"){var c=u.fill;if(!(c==="none"||c==="toself")&&(u.opacity=void 0,c==="tonexty"||c==="tonextx"))for(var v=s-1;v>=0;v--){var m=t[v];if(m.type==="scatter"&&m.xaxis===u.xaxis&&m.yaxis===u.yaxis){m.opacity=void 0;break}}}}}});var Sq=he((mxe,Mq)=>{"use strict";var Lue=Nt(),Pue=$_();Mq.exports=function(e,t){function r(a,s){return Lue.coerce(e,t,Pue,a,s)}var i=t.barmode==="group";t.scattermode==="group"&&r("scattergap",i?t.bargap:.2)}});var Eq=he((yxe,Cq)=>{"use strict";var Due=Ia(),kq=Nt(),zue=kq.dateTime2ms,sb=kq.incrementMonth,Iue=Bi(),Rue=Iue.ONEAVGMONTH;Cq.exports=function(t,r,i,a){if(r.type!=="date")return{vals:a};var s=t[i+"periodalignment"];if(!s)return{vals:a};var l=t[i+"period"],u;if(Due(l)){if(l=+l,l<=0)return{vals:a}}else if(typeof l=="string"&&l.charAt(0)==="M"){var c=+l.substring(1);if(c>0&&Math.round(c)===c)u=c;else return{vals:a}}for(var v=r.calendar,m=s==="start",_=s==="end",T=t[i+"period0"],M=zue(T,v)||0,k=[],L=[],E=[],I=a.length,R=0;R<I;R++){var N=a[R],z,B,H;if(u){for(z=Math.round((N-M)/(u*Rue)),H=sb(M,u*z,v);H>N;)H=sb(H,-u,v);for(;H<=N;)H=sb(H,u,v);B=sb(H,-u,v)}else{for(z=Math.round((N-M)/l),H=M+z*l;H>N;)H-=l;for(;H<=N;)H+=l;B=H-l}k[R]=m?B:_?H:(B+H)/2,L[R]=B,E[R]=H}return{vals:k,starts:L,ends:E}}});var rT=he((gxe,Pq)=>{"use strict";var eT=Pf().hasColorscale,tT=og(),Lq=is();Pq.exports=function(t,r){Lq.hasLines(r)&&eT(r,"line")&&tT(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),Lq.hasMarkers(r)&&(eT(r,"marker")&&tT(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),eT(r,"marker.line")&&tT(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}});var a1=he((_xe,Dq)=>{"use strict";var dn=Nt();Dq.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;dn.mergeArray(r.text,t,"tx"),dn.mergeArray(r.texttemplate,t,"txt"),dn.mergeArray(r.hovertext,t,"htx"),dn.mergeArray(r.customdata,t,"data"),dn.mergeArray(r.textposition,t,"tp"),r.textfont&&(dn.mergeArrayCastPositive(r.textfont.size,t,"ts"),dn.mergeArray(r.textfont.color,t,"tc"),dn.mergeArray(r.textfont.family,t,"tf"),dn.mergeArray(r.textfont.weight,t,"tw"),dn.mergeArray(r.textfont.style,t,"ty"),dn.mergeArray(r.textfont.variant,t,"tv"),dn.mergeArray(r.textfont.textcase,t,"tC"),dn.mergeArray(r.textfont.lineposition,t,"tE"),dn.mergeArray(r.textfont.shadow,t,"tS"));var a=r.marker;if(a){dn.mergeArrayCastPositive(a.size,t,"ms"),dn.mergeArrayCastPositive(a.opacity,t,"mo"),dn.mergeArray(a.symbol,t,"mx"),dn.mergeArray(a.angle,t,"ma"),dn.mergeArray(a.standoff,t,"mf"),dn.mergeArray(a.color,t,"mc");var s=a.line;a.line&&(dn.mergeArray(s.color,t,"mlc"),dn.mergeArrayCastPositive(s.width,t,"mlw"));var l=a.gradient;l&&l.type!=="none"&&(dn.mergeArray(l.type,t,"mgt"),dn.mergeArray(l.color,t,"mgc"))}}});var lb=he((xxe,Iq)=>{"use strict";var zq=Nt();Iq.exports=function(t,r){zq.isArrayOrTypedArray(r.selectedpoints)&&zq.tagSelected(t,r)}});var sT=he((bxe,Uq)=>{"use strict";var Rq=Ia(),iT=Nt(),i1=Ii(),Fq=Eq(),aT=Bi().BADNUM,nT=is(),Fue=rT(),que=a1(),Nue=lb();function Bue(e,t){var r=e._fullLayout,i=t._xA=i1.getFromId(e,t.xaxis||"x","x"),a=t._yA=i1.getFromId(e,t.yaxis||"y","y"),s=i.makeCalcdata(t,"x"),l=a.makeCalcdata(t,"y"),u=Fq(t,i,"x",s),c=Fq(t,a,"y",l),v=u.vals,m=c.vals,_=t._length,T=new Array(_),M=t.ids,k=oT(t,r,i,a),L=!1,E,I,R,N,z,B;Bq(r,t);var H="x",V="y",Y;if(k)iT.pushUnique(k.traceIndices,t._expandedIndex),E=k.orientation==="v",E?(V="s",Y="x"):(H="s",Y="y"),z=k.stackgaps==="interpolate";else{var J=Nq(t,_);qq(e,t,i,a,v,m,J)}var re=!!t.xperiodalignment,ne=!!t.yperiodalignment;for(I=0;I<_;I++){var oe=T[I]={},ue=Rq(v[I]),me=Rq(m[I]);ue&&me?(oe[H]=v[I],oe[V]=m[I],re&&(oe.orig_x=s[I],oe.xEnd=u.ends[I],oe.xStart=u.starts[I]),ne&&(oe.orig_y=l[I],oe.yEnd=c.ends[I],oe.yStart=c.starts[I])):k&&(E?ue:me)?(oe[Y]=E?v[I]:m[I],oe.gap=!0,z?(oe.s=aT,L=!0):oe.s=0):oe[H]=oe[V]=aT,M&&(oe.id=String(M[I]))}if(que(T,t),Fue(e,t),Nue(T,t),k){for(I=0;I<T.length;)T[I][Y]===aT?T.splice(I,1):I++;if(iT.sort(T,function(_e,Te){return _e[Y]-Te[Y]||_e.i-Te.i}),L){for(I=0;I<T.length-1&&T[I].gap;)I++;for(B=T[I].s,B||(B=T[I].s=0),R=0;R<I;R++)T[R].s=B;for(N=T.length-1;N>I&&T[N].gap;)N--;for(B=T[N].s,R=T.length-1;R>N;R--)T[R].s=B;for(;I<N;)if(I++,T[I].gap){for(R=I+1;T[R].gap;)R++;for(var Se=T[I-1][Y],Ce=T[I-1].s,Me=(T[R].s-Ce)/(T[R][Y]-Se);I<R;)T[I].s=Ce+(T[I][Y]-Se)*Me,I++}}}return T}function qq(e,t,r,i,a,s,l){var u=t._length,c=e._fullLayout,v=r._id,m=i._id,_=c._firstScatter[Oq(t)]===t.uid,T=(oT(t,c,r,i)||{}).orientation,M=t.fill;r._minDtick=0,i._minDtick=0;var k={padded:!0},L={padded:!0};l&&(k.ppad=L.ppad=l);var E=u<2||a[0]!==a[u-1]||s[0]!==s[u-1];E&&(M==="tozerox"||M==="tonextx"&&(_||T==="h"))?k.tozero=!0:!(t.error_y||{}).visible&&(M==="tonexty"||M==="tozeroy"||!nT.hasMarkers(t)&&!nT.hasText(t))&&(k.padded=!1,k.ppad=0),E&&(M==="tozeroy"||M==="tonexty"&&(_||T==="v"))?L.tozero=!0:(M==="tonextx"||M==="tozerox")&&(L.padded=!1),v&&(t._extremes[v]=i1.findExtremes(r,a,k)),m&&(t._extremes[m]=i1.findExtremes(i,s,L))}function Nq(e,t){if(nT.hasMarkers(e)){var r=e.marker,i=1.6*(e.marker.sizeref||1),a;if(e.marker.sizemode==="area"?a=function(v){return Math.max(Math.sqrt((v||0)/i),3)}:a=function(v){return Math.max((v||0)/i,3)},iT.isArrayOrTypedArray(r.size)){var s={type:"linear"};i1.setConvert(s);for(var l=s.makeCalcdata(e.marker,"size"),u=new Array(t),c=0;c<t;c++)u[c]=a(l[c]);return u}else return a(r.size)}}function Bq(e,t){var r=Oq(t),i=e._firstScatter;i[r]||(i[r]=t.uid)}function Oq(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function oT(e,t,r,i){var a=e.stackgroup;if(a){var s=t._scatterStackOpts[r._id+i._id][a],l=s.orientation==="v"?i:r;if(l.type==="linear"||l.type==="log")return s}}Uq.exports={calc:Bue,calcMarkerSize:Nq,calcAxisExpansion:qq,setFirstScatter:Bq,getStackOpts:oT}});var Hq=he((wxe,Vq)=>{"use strict";Vq.exports=ub;var Oue=Nt().distinctVals;function ub(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,i=t.posAxis._id.charAt(0),a=[],s=0;s<e.length;s++){for(var l=e[s],u=0;u<l.length;u++){var c=l[u],v=c.p;v===void 0&&(v=c[i]),v!==void 0&&a.push(v)}l[0]&&l[0].width1&&(r=Math.min(l[0].width1,r))}this.positions=a;var m=Oue(a);this.distinctPositions=m.vals,m.vals.length===1&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(m.minDiff,r);var _=(t.posAxis||{}).type;(_==="category"||_==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}ub.prototype.put=function(t,r){var i=this.getLabel(t,r),a=this.bins[i]||0;return this.bins[i]=a+r,a};ub.prototype.get=function(t,r){var i=this.getLabel(t,r);return this.bins[i]||0};ub.prototype.getLabel=function(t,r){var i=r<0&&this.sepNegVal?"v":"^",a=this.overlapNoMerge?t:Math.round(t/this.binWidth);return i+a}});var Kq=he((Txe,Jq)=>{"use strict";var hu=Ia(),rv=Nt().isArrayOrTypedArray,vm=Bi().BADNUM,Uue=sa(),n1=Ii(),Vue=Sg().getAxisGroup,fb=Hq();function Hue(e,t){for(var r=t.xaxis,i=t.yaxis,a=e._fullLayout,s=e._fullData,l=e.calcdata,u=[],c=[],v=0;v<s.length;v++){var m=s[v];if(m.visible===!0&&Uue.traceIs(m,"bar")&&m.xaxis===r._id&&m.yaxis===i._id&&(m.orientation==="h"?u.push(l[v]):c.push(l[v]),m._computePh))for(var _=e.calcdata[v],T=0;T<_.length;T++)typeof _[T].ph0=="function"&&(_[T].ph0=_[T].ph0()),typeof _[T].ph1=="function"&&(_[T].ph1=_[T].ph1())}var M={xCat:r.type==="category"||r.type==="multicategory",yCat:i.type==="category"||i.type==="multicategory",mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap};uT(e,r,i,c,M),uT(e,i,r,u,M)}function uT(e,t,r,i,a){if(i.length){var s,l,u,c,v;switch(Yue(r,i),a.mode){case"overlay":lT(t,r,i,a);break;case"group":for(s=[],l=[],u=0;u<i.length;u++)c=i[u],v=c[0].trace,v.offset===void 0?l.push(c):s.push(c);l.length&&Wue(e,t,r,l,a),s.length&&lT(t,r,s,a);break;case"stack":case"relative":for(s=[],l=[],u=0;u<i.length;u++)c=i[u],v=c[0].trace,v.base===void 0?l.push(c):s.push(c);Zue(l),l.length&&Xue(e,t,r,l,a),s.length&&lT(t,r,s,a);break}Gue(i),$ue(i,t)}}function Gue(e){var t,r,i,a,s,l,u;for(t=0;t<e.length;t++)r=e[t],i=r[0].trace,a=r[0].t,a.cornerradiusvalue===void 0&&(s=i.marker?i.marker.cornerradius:void 0,s!==void 0&&(l=hu(s)?+s:+s.slice(0,-1),u=hu(s)?"px":"%",a.cornerradiusvalue=l,a.cornerradiusform=u))}function Zue(e){if(!(e.length<2)){var t,r,i,a,s,l,u;for(t=0;t<e.length&&(r=e[t],i=r[0].trace,s=i.marker?i.marker.cornerradius:void 0,s===void 0);t++);if(s!==void 0)for(l=hu(s)?+s:+s.slice(0,-1),u=hu(s)?"px":"%",t=0;t<e.length;t++)r=e[t],a=r[0].t,a.cornerradiusvalue=l,a.cornerradiusform=u}}function Yue(e,t){var r,i;for(r=0;r<t.length;r++){var a=t[r],s=a[0].trace,l=s.type==="funnel"?s._base:s.base,u,c=s.orientation==="h"?s.xcalendar:s.ycalendar,v=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(rv(l)){for(i=0;i<Math.min(l.length,a.length);i++)u=v(l[i],0,c),hu(u)?(a[i].b=+u,a[i].hasB=1):a[i].b=0;for(;i<a.length;i++)a[i].b=0}else{u=v(l,0,c);var m=hu(u);for(u=m?u:0,i=0;i<a.length;i++)a[i].b=u,m&&(a[i].hasB=1)}}}function lT(e,t,r,i){for(var a=0;a<r.length;a++){var s=r[a],l=new fb([s],{posAxis:e,sepNegVal:!1,overlapNoMerge:!i.norm});Gq(e,l,i),i.norm?(jq(l),fT(t,l,i)):Xq(t,l)}}function Wue(e,t,r,i,a){var s=new fb(i,{posAxis:t,sepNegVal:!1,overlapNoMerge:!a.norm});jue(e,t,s,a),Kue(s,t),a.norm?(jq(s),fT(r,s,a)):Xq(r,s)}function Xue(e,t,r,i,a){var s=new fb(i,{posAxis:t,sepNegVal:a.mode==="relative",overlapNoMerge:!(a.norm||a.mode==="stack"||a.mode==="relative")});Gq(t,s,a),Jue(r,s,a);for(var l=0;l<i.length;l++)for(var u=i[l],c=0;c<u.length;c++){var v=u[c];if(v.s!==vm){var m=v.b+v.s===s.get(v.p,v.s);m&&(v._outmost=!0)}}a.norm&&fT(r,s,a)}function Gq(e,t,r){for(var i=t.minDiff,a=t.traces,s=i*(1-r.gap),l=s,u=l*(1-(r.groupgap||0)),c=-u/2,v=0;v<a.length;v++){var m=a[v],_=m[0].t;_.barwidth=u,_.poffset=c,_.bargroupwidth=s,_.bardelta=i}t.binWidth=a[0][0].t.barwidth/100,Zq(t),Yq(e,t),Wq(e,t)}function jue(e,t,r,i){for(var a=e._fullLayout,s=r.positions,l=r.distinctPositions,u=r.minDiff,c=r.traces,v=c.length,m=s.length!==l.length,_=u*(1-i.gap),T=Vue(a,t._id)+c[0][0].trace.orientation,M=a._alignmentOpts[T]||{},k=0;k<v;k++){var L=c[k],E=L[0].trace,I=M[E.alignmentgroup]||{},R=Object.keys(I.offsetGroups||{}).length,N;R?N=_/R:N=m?_/v:_;var z=N*(1-(i.groupgap||0)),B;R?B=((2*E._offsetIndex+1-R)*N-z)/2:B=m?((2*k+1-v)*N-z)/2:-z/2;var H=L[0].t;H.barwidth=z,H.poffset=B,H.bargroupwidth=_,H.bardelta=u}r.binWidth=c[0][0].t.barwidth/100,Zq(r),Yq(t,r),Wq(t,r,m)}function Zq(e){var t=e.traces,r,i;for(r=0;r<t.length;r++){var a=t[r],s=a[0],l=s.trace,u=s.t,c=l._offset||l.offset,v=u.poffset,m;if(rv(c)){for(m=Array.prototype.slice.call(c,0,a.length),i=0;i<m.length;i++)hu(m[i])||(m[i]=v);for(i=m.length;i<a.length;i++)m.push(v);u.poffset=m}else c!==void 0&&(u.poffset=c);var _=l._width||l.width,T=u.barwidth;if(rv(_)){var M=Array.prototype.slice.call(_,0,a.length);for(i=0;i<M.length;i++)hu(M[i])||(M[i]=T);for(i=M.length;i<a.length;i++)M.push(T);if(u.barwidth=M,c===void 0){for(m=[],i=0;i<a.length;i++)m.push(v+(T-M[i])/2);u.poffset=m}}else _!==void 0&&(u.barwidth=_,c===void 0&&(u.poffset=v+(T-_)/2))}}function Yq(e,t){for(var r=t.traces,i=dm(e),a=0;a<r.length;a++)for(var s=r[a],l=s[0].t,u=l.poffset,c=rv(u),v=l.barwidth,m=rv(v),_=0;_<s.length;_++){var T=s[_],M=T.w=m?v[_]:v;T.p===void 0&&(T.p=T[i],T["orig_"+i]=T[i]);var k=(c?u[_]:u)+M/2;T[i]=T.p+k}}function Wq(e,t,r){var i=t.traces,a=t.minDiff,s=a/2;n1.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var l=0;l<i.length;l++){var u=i[l],c=u[0],v=c.trace,m=[],_,T,M,k;for(k=0;k<u.length;k++)_=u[k],T=_.p-s,M=_.p+s,m.push(T,M);if(v.width||v.offset){var L=c.t,E=L.poffset,I=L.barwidth,R=rv(E),N=rv(I);for(k=0;k<u.length;k++){_=u[k];var z=R?E[k]:E,B=N?I[k]:I;T=_.p+z,M=T+B,m.push(T,M)}}v._extremes[e._id]=n1.findExtremes(e,m,{padded:!1})}}function Xq(e,t){for(var r=t.traces,i=dm(e),a=0;a<r.length;a++){for(var s=r[a],l=s[0].trace,u=l.type==="scatter",c=l.orientation==="v",v=[],m=!1,_=0;_<s.length;_++){var T=s[_],M=u?0:T.b,k=u?c?T.y:T.x:M+T.s;T[i]=k,v.push(k),T.hasB&&v.push(M),(!T.hasB||!T.b)&&(m=!0)}l._extremes[e._id]=n1.findExtremes(e,v,{tozero:m,padded:!0})}}function Jue(e,t,r){var i=dm(e),a=t.traces,s,l,u,c,v,m;for(c=0;c<a.length;c++)if(s=a[c],l=s[0].trace,l.type==="funnel")for(v=0;v<s.length;v++)m=s[v],m.s!==vm&&t.put(m.p,-.5*m.s);for(c=0;c<a.length;c++){s=a[c],l=s[0].trace,u=l.type==="funnel";var _=[];for(v=0;v<s.length;v++)if(m=s[v],m.s!==vm){var T;u?T=m.s:T=m.s+m.b;var M=t.put(m.p,T),k=M+T;m.b=M,m[i]=k,r.norm||(_.push(k),m.hasB&&_.push(M))}r.norm||(l._extremes[e._id]=n1.findExtremes(e,_,{tozero:!0,padded:!0}))}}function jq(e){for(var t=e.traces,r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.length;a++){var s=i[a];s.s!==vm&&e.put(s.p,s.b+s.s)}}function Kue(e,t){for(var r=e.traces,i=0;i<r.length;i++){var a=r[i],s=a[0].trace;if(s.base===void 0)for(var l=new fb([a],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),u=0;u<a.length;u++){var c=a[u];if(c.p!==vm){var v=l.put(c.p,c.b+c.s);v&&(c.b=v)}}}}function fT(e,t,r){var i=t.traces,a=dm(e),s=r.norm==="fraction"?1:100,l=s/1e9,u=e.l2c(e.c2l(0)),c=r.mode==="stack"?s:u;function v(B){return hu(e.c2l(B))&&(B<u-l||B>c+l||!hu(u))}for(var m=0;m<i.length;m++){for(var _=i[m],T=_[0].trace,M=[],k=!1,L=!1,E=0;E<_.length;E++){var I=_[E];if(I.s!==vm){var R=Math.abs(s/t.get(I.p,I.s));I.b*=R,I.s*=R;var N=I.b,z=N+I.s;I[a]=z,M.push(z),L=L||v(z),I.hasB&&(M.push(N),L=L||v(N)),(!I.hasB||!I.b)&&(k=!0)}}T._extremes[e._id]=n1.findExtremes(e,M,{tozero:k,padded:L})}}function Que(e,t,r,i){for(var a=dm(i),s=0;s<e.length;s++)for(var l=e[s],u=0;u<l.length;u++){var c=l[u],v=c[a];c._sMin=t[v],c._sMax=r[v]}}function $ue(e,t){var r=dm(t),i={},a,s,l,u=1/0,c=-1/0;for(a=0;a<e.length;a++)for(l=e[a],s=0;s<l.length;s++){var v=l[s].p;hu(v)&&(u=Math.min(u,v),c=Math.max(c,v))}var m=1e4/(c-u),_=i.round=function(Y){return String(Math.round(m*(Y-u)))},T={},M={},k=e.some(function(Y){var J=Y[0].trace;return"marker"in J&&J.marker.cornerradius});for(a=0;a<e.length;a++){l=e[a],l[0].t.extents=i;var L=l[0].t.poffset,E=rv(L);for(s=0;s<l.length;s++){var I=l[s],R=I[r]-I.w/2;if(hu(R)){var N=I[r]+I.w/2,z=_(I.p);i[z]?i[z]=[Math.min(R,i[z][0]),Math.max(N,i[z][1])]:i[z]=[R,N]}if(I.p0=I.p+(E?L[s]:L),I.p1=I.p0+I.w,I.s0=I.b,I.s1=I.s0+I.s,k){var B=Math.min(I.s0,I.s1)||0,H=Math.max(I.s0,I.s1)||0,V=I[r];T[V]=V in T?Math.min(T[V],B):B,M[V]=V in M?Math.max(M[V],H):H}}}k&&Que(e,T,M,t)}function dm(e){return e._id.charAt(0)}Jq.exports={crossTraceCalc:Hue,setGroupPositions:uT}});var tN=he((Axe,eN)=>{"use strict";var Qq=sT(),$q=Kq().setGroupPositions;function efe(e,t){for(var r=t.xaxis,i=t.yaxis,a=e._fullLayout,s=e._fullData,l=e.calcdata,u=[],c=[],v=0;v<s.length;v++){var m=s[v];m.visible===!0&&m.type==="scatter"&&m.xaxis===r._id&&m.yaxis===i._id&&(m.orientation==="h"?u.push(l[v]):m.orientation==="v"&&c.push(l[v]))}var _={mode:a.scattermode,gap:a.scattergap};$q(e,r,i,c,_),$q(e,i,r,u,_)}eN.exports=function(t,r){t._fullLayout.scattermode==="group"&&efe(t,r);var i=r.xaxis,a=r.yaxis,s=i._id+a._id,l=t._fullLayout._scatterStackOpts[s];if(l){var u=t.calcdata,c,v,m,_,T,M,k,L,E,I,R,N,z,B,H;for(var V in l){I=l[V];var Y=I.traceIndices;if(Y.length){for(R=I.stackgaps==="interpolate",N=I.groupnorm,I.orientation==="v"?(z="x",B="y"):(z="y",B="x"),H=new Array(Y.length),c=0;c<H.length;c++)H[c]=!1;M=u[Y[0]];var J=new Array(M.length);for(c=0;c<M.length;c++)J[c]=M[c][z];for(c=1;c<Y.length;c++){for(T=u[Y[c]],v=m=0;v<T.length;v++){for(k=T[v][z];k>J[m]&&m<J.length;m++)cT(T,v,J[m],c,H,R,z),v++;if(k!==J[m]){for(_=0;_<c;_++)cT(u[Y[_]],m,k,_,H,R,z);J.splice(m,0,k)}m++}for(;m<J.length;m++)cT(T,v,J[m],c,H,R,z),v++}var re=J.length;for(v=0;v<M.length;v++){for(L=M[v][B]=M[v].s,c=1;c<Y.length;c++)T=u[Y[c]],T[0].trace._rawLength=T[0].trace._length,T[0].trace._length=re,L+=T[v].s,T[v][B]=L;if(N)for(E=(N==="fraction"?L:L/100)||1,c=0;c<Y.length;c++){var ne=u[Y[c]][v];ne[B]/=E,ne.sNorm=ne.s/E}}for(c=0;c<Y.length;c++){T=u[Y[c]];var oe=T[0].trace,ue=Qq.calcMarkerSize(oe,oe._rawLength),me=Array.isArray(ue);if(ue&&H[c]||me){var Se=ue;for(ue=new Array(re),v=0;v<re;v++)ue[v]=T[v].gap?0:me?Se[T[v].i]:Se}var Ce=new Array(re),Me=new Array(re);for(v=0;v<re;v++)Ce[v]=T[v].x,Me[v]=T[v].y;Qq.calcAxisExpansion(t,oe,i,a,Ce,Me,ue),T[0].t.orientation=I.orientation}}}}};function cT(e,t,r,i,a,s,l){a[i]=!0;var u={i:null,gap:!0,s:0};if(u[l]=r,e.splice(t,0,u),t&&r===e[t-1][l]){var c=e[t-1];u.s=c.s,u.i=c.i,u.gap=c.gap}else s&&(u.s=tfe(e,t,r,l));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}function tfe(e,t,r,i){var a=e[t-1],s=e[t+1];return s?a?a.s+(s.s-a.s)*(r-a[i])/(s[i]-a[i]):s.s:a.s}});var lN=he((Mxe,sN)=>{"use strict";var rfe=_i(),nN=Bi(),o1=nN.BADNUM,oN=nN.LOG_CLIP,rN=oN+.5,aN=oN-.5,cb=Nt(),afe=cb.segmentsIntersect,iN=cb.constrain,hT=zx();sN.exports=function(t,r){var i=r.trace||{},a=r.xaxis,s=r.yaxis,l=a.type==="log",u=s.type==="log",c=a._length,v=s._length,m=r.backoff,_=i.marker,T=r.connectGaps,M=r.baseTolerance,k=r.shape,L=k==="linear",E=i.fill&&i.fill!=="none",I=[],R=hT.minTolerance,N=t.length,z=new Array(N),B=0,H,V,Y,J,re,ne,oe,ue,me,Se,Ce,Me,_e,Te,Ae,Le;function Ke(Pt){var Fe=t[Pt];if(!Fe)return!1;var He=r.linearized?a.l2p(Fe.x):a.c2p(Fe.x),bt=r.linearized?s.l2p(Fe.y):s.c2p(Fe.y);if(He===o1){if(l&&(He=a.c2p(Fe.x,!0)),He===o1)return!1;u&&bt===o1&&(He*=Math.abs(a._m*v*(a._m>0?rN:aN)/(s._m*c*(s._m>0?rN:aN)))),He*=1e3}if(bt===o1){if(u&&(bt=s.c2p(Fe.y,!0)),bt===o1)return!1;bt*=1e3}return[He,bt]}function ct(Pt,Fe,He,bt){var dt=He-Pt,gr=bt-Fe,Lr=.5-Pt,Ar=.5-Fe,Hr=dt*dt+gr*gr,xa=dt*Lr+gr*Ar;if(xa>0&&xa<Hr){var Ca=Lr*gr-Ar*dt;if(Ca*Ca<Hr)return!0}}var it,ut;function Ge(Pt,Fe){var He=Pt[0]/c,bt=Pt[1]/v,dt=Math.max(0,-He,He-1,-bt,bt-1);return dt&&it!==void 0&&ct(He,bt,it,ut)&&(dt=0),dt&&Fe&&ct(He,bt,Fe[0]/c,Fe[1]/v)&&(dt=0),(1+hT.toleranceGrowth*dt)*M}function xt(Pt,Fe){var He=Pt[0]-Fe[0],bt=Pt[1]-Fe[1];return Math.sqrt(He*He+bt*bt)}var at=hT.maxScreensAway,At=-c*at,kt=c*(1+at),mt=-v*at,ye=v*(1+at),Re=[[At,mt,kt,mt],[kt,mt,kt,ye],[kt,ye,At,ye],[At,ye,At,mt]],xe,et,vt,tt,Bt,Mt;function Ct(Pt,Fe){for(var He=[],bt=0,dt=0;dt<4;dt++){var gr=Re[dt],Lr=afe(Pt[0],Pt[1],Fe[0],Fe[1],gr[0],gr[1],gr[2],gr[3]);Lr&&(!bt||Math.abs(Lr.x-He[0][0])>1||Math.abs(Lr.y-He[0][1])>1)&&(Lr=[Lr.x,Lr.y],bt&&xt(Lr,Pt)<xt(He[0],Pt)?He.unshift(Lr):He.push(Lr),bt++)}return He}function Rt(Pt){if(Pt[0]<At||Pt[0]>kt||Pt[1]<mt||Pt[1]>ye)return[iN(Pt[0],At,kt),iN(Pt[1],mt,ye)]}function Ot(Pt,Fe){if(Pt[0]===Fe[0]&&(Pt[0]===At||Pt[0]===kt)||Pt[1]===Fe[1]&&(Pt[1]===mt||Pt[1]===ye))return!0}function gt(Pt,Fe){var He=[],bt=Rt(Pt),dt=Rt(Fe);return bt&&dt&&Ot(bt,dt)||(bt&&He.push(bt),dt&&He.push(dt)),He}function Et(Pt,Fe,He){return function(bt,dt){var gr=Rt(bt),Lr=Rt(dt),Ar=[];if(gr&&Lr&&Ot(gr,Lr))return Ar;gr&&Ar.push(gr),Lr&&Ar.push(Lr);var Hr=2*cb.constrain((bt[Pt]+dt[Pt])/2,Fe,He)-((gr||bt)[Pt]+(Lr||dt)[Pt]);if(Hr){var xa;gr&&Lr?xa=Hr>0==gr[Pt]>Lr[Pt]?gr:Lr:xa=gr||Lr,xa[Pt]+=Hr}return Ar}}var ir;k==="linear"||k==="spline"?ir=Ct:k==="hv"||k==="vh"?ir=gt:k==="hvh"?ir=Et(0,At,kt):k==="vhv"&&(ir=Et(1,mt,ye));function Gt(Pt,Fe){var He=Fe[0]-Pt[0],bt=(Fe[1]-Pt[1])/He,dt=(Pt[1]*Fe[0]-Fe[1]*Pt[0])/He;return dt>0?[bt>0?At:kt,ye]:[bt>0?kt:At,mt]}function Ne(Pt){var Fe=Pt[0],He=Pt[1],bt=Fe===z[B-1][0],dt=He===z[B-1][1];if(!(bt&&dt))if(B>1){var gr=Fe===z[B-2][0],Lr=He===z[B-2][1];bt&&(Fe===At||Fe===kt)&&gr?Lr?B--:z[B-1]=Pt:dt&&(He===mt||He===ye)&&Lr?gr?B--:z[B-1]=Pt:z[B++]=Pt}else z[B++]=Pt}function ft(Pt){z[B-1][0]!==Pt[0]&&z[B-1][1]!==Pt[1]&&Ne([vt,tt]),Ne(Pt),Bt=null,vt=tt=0}var pt=cb.isArrayOrTypedArray(_);function xr(Pt){if(Pt&&m&&(Pt.i=H,Pt.d=t,Pt.trace=i,Pt.marker=pt?_[Pt.i]:_,Pt.backoff=m),it=Pt[0]/c,ut=Pt[1]/v,xe=Pt[0]<At?At:Pt[0]>kt?kt:0,et=Pt[1]<mt?mt:Pt[1]>ye?ye:0,xe||et){if(!B)z[B++]=[xe||Pt[0],et||Pt[1]];else if(Bt){var Fe=ir(Bt,Pt);Fe.length>1&&(ft(Fe[0]),z[B++]=Fe[1])}else Mt=ir(z[B-1],Pt)[0],z[B++]=Mt;var He=z[B-1];xe&&et&&(He[0]!==xe||He[1]!==et)?(Bt&&(vt!==xe&&tt!==et?Ne(vt&&tt?Gt(Bt,Pt):[vt||xe,tt||et]):vt&&tt&&Ne([vt,tt])),Ne([xe,et])):vt-xe&&tt-et&&Ne([xe||vt,et||tt]),Bt=Pt,vt=xe,tt=et}else Bt&&ft(ir(Bt,Pt)[0]),z[B++]=Pt}for(H=0;H<N;H++)if(V=Ke(H),!!V){for(B=0,Bt=null,xr(V),H++;H<N;H++){if(J=Ke(H),!J){if(T)continue;break}if(!L||!r.simplify){xr(J);continue}var pr=Ke(H+1);if(Se=xt(J,V),!(!(E&&(B===0||B===N-1))&&Se<Ge(J,pr)*R)){for(ue=[(J[0]-V[0])/Se,(J[1]-V[1])/Se],re=V,Ce=Se,Me=Te=Ae=0,oe=!1,Y=J,H++;H<t.length;H++){if(ne=pr,pr=Ke(H+1),!ne){if(T)continue;break}if(me=[ne[0]-V[0],ne[1]-V[1]],Le=me[0]*ue[1]-me[1]*ue[0],Te=Math.min(Te,Le),Ae=Math.max(Ae,Le),Ae-Te>Ge(ne,pr))break;Y=ne,_e=me[0]*ue[0]+me[1]*ue[1],_e>Ce?(Ce=_e,J=ne,oe=!1):_e<Me&&(Me=_e,re=ne,oe=!0)}if(oe?(xr(J),Y!==re&&xr(re)):(re!==V&&xr(re),Y!==J&&xr(J)),xr(Y),H>=t.length||!ne)break;xr(ne),V=ne}}Bt&&Ne([vt||Bt[0],tt||Bt[1]]),I.push(z.slice(0,B))}var Tt=k.slice(k.length-1);if(m&&Tt!=="h"&&Tt!=="v"){for(var wt=!1,Vt=-1,Kt=[],Ht=0;Ht<I.length;Ht++)for(var Ut=0;Ut<I[Ht].length-1;Ut++){var er=I[Ht][Ut],Mr=I[Ht][Ut+1],br=rfe.applyBackoff(Mr,er);(br[0]!==Mr[0]||br[1]!==Mr[1])&&(wt=!0),Kt[Vt+1]||(Vt++,Kt[Vt]=[er,[br[0],br[1]]])}return wt?Kt:I}return I}});var cN=he((Sxe,fN)=>{"use strict";var uN={tonextx:1,tonexty:1,tonext:1};fN.exports=function(t,r,i){var a,s,l,u,c,v={},m=!1,_=-1,T=0,M=-1;for(s=0;s<i.length;s++)a=i[s][0].trace,l=a.stackgroup||"",l?l in v?c=v[l]:(c=v[l]=T,T++):a.fill in uN&&M>=0?c=M:(c=M=T,T++),c<_&&(m=!0),a._groupIndex=_=c;var k=i.slice();m&&k.sort(function(E,I){var R=E[0].trace,N=I[0].trace;return R._groupIndex-N._groupIndex||R.index-N.index});var L={};for(s=0;s<k.length;s++)a=k[s][0].trace,l=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in uN&&(u=L[l],a._prevtrace=u||null,u&&(u._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),L[l]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return k}});var pN=he((kxe,dN)=>{"use strict";var Zu=Ka(),ife=sa(),s1=Nt(),pm=s1.ensureSingle,vN=s1.identity,pn=_i(),mm=is(),nfe=lN(),ofe=cN(),hb=kx().tester;dN.exports=function(t,r,i,a,s,l){var u,c,v=!s,m=!!s&&s.duration>0,_=ofe(t,r,i);if(u=a.selectAll("g.trace").data(_,function(M){return M[0].trace.uid}),u.enter().append("g").attr("class",function(M){return"trace scatter trace"+M[0].trace.uid}).style("stroke-miterlimit",2),u.order(),sfe(t,u,r),m){l&&(c=l());var T=Zu.transition().duration(s.duration).ease(s.easing).each("end",function(){c&&c()}).each("interrupt",function(){c&&c()});T.each(function(){a.selectAll("g.trace").each(function(M,k){hN(t,k,r,M,_,this,s)})})}else u.each(function(M,k){hN(t,k,r,M,_,this,s)});v&&u.exit().remove(),a.selectAll("path:not([d])").remove()};function sfe(e,t,r){t.each(function(i){var a=pm(Zu.select(this),"g","fills");pn.setClipUrl(a,r.layerClipId,e);var s=i[0].trace,l=[];s._ownfill&&l.push("_ownFill"),s._nexttrace&&l.push("_nextFill");var u=a.selectAll("g").data(l,vN);u.enter().append("g"),u.exit().each(function(c){s[c]=null}).remove(),u.order().each(function(c){s[c]=pm(Zu.select(this),"path","js-fill")})})}function hN(e,t,r,i,a,s,l){var u=e._context.staticPlot,c;lfe(e,t,r,i,a);var v=!!l&&l.duration>0;function m(Et){return v?Et.transition():Et}var _=r.xaxis,T=r.yaxis,M=i[0].trace,k=M.line,L=Zu.select(s),E=pm(L,"g","errorbars"),I=pm(L,"g","lines"),R=pm(L,"g","points"),N=pm(L,"g","text");if(ife.getComponentMethod("errorbars","plot")(e,E,r,l),M.visible!==!0)return;m(L).style("opacity",M.opacity);var z,B,H=M.fill.charAt(M.fill.length-1);H!=="x"&&H!=="y"&&(H="");var V,Y;H==="y"?(V=1,Y=T.c2p(0,!0)):H==="x"&&(V=0,Y=_.c2p(0,!0)),i[0][r.isRangePlot?"nodeRangePlot3":"node3"]=L;var J="",re=[],ne=M._prevtrace,oe=null,ue=null;ne&&(J=ne._prevRevpath||"",B=ne._nextFill,re=ne._ownPolygons,oe=ne._fillsegments,ue=ne._fillElement);var me,Se,Ce="",Me="",_e,Te,Ae,Le,Ke,ct,it=[];M._polygons=[];var ut=[],Ge=[],xt=s1.noop;if(z=M._ownFill,mm.hasLines(M)||M.fill!=="none"){B&&B.datum(i),["hv","vh","hvh","vhv"].indexOf(k.shape)!==-1?(_e=pn.steps(k.shape),Te=pn.steps(k.shape.split("").reverse().join(""))):k.shape==="spline"?_e=Te=function(Et){var ir=Et[Et.length-1];return Et.length>1&&Et[0][0]===ir[0]&&Et[0][1]===ir[1]?pn.smoothclosed(Et.slice(1),k.smoothing):pn.smoothopen(Et,k.smoothing)}:_e=Te=function(Et){return"M"+Et.join("L")},Ae=function(Et){return Te(Et.reverse())},Ge=nfe(i,{xaxis:_,yaxis:T,trace:M,connectGaps:M.connectgaps,baseTolerance:Math.max(k.width||1,3)/4,shape:k.shape,backoff:k.backoff,simplify:k.simplify,fill:M.fill}),ut=new Array(Ge.length);var at=0;for(c=0;c<Ge.length;c++){var At,kt=Ge[c];!At||!H?(At=kt.slice(),ut[at]=At,at++):At.push.apply(At,kt)}M._fillElement=null,M._fillExclusionElement=ue,M._fillsegments=ut.slice(0,at),ut=M._fillsegments,Ge.length&&(Le=Ge[0][0].slice(),Ke=Ge[Ge.length-1],ct=Ke[Ke.length-1].slice()),xt=function(Et){return function(ir){if(me=_e(ir),Se=Ae(ir),Ce?H?(Ce+="L"+me.substr(1),Me=Se+("L"+Me.substr(1))):(Ce+="Z"+me,Me=Se+"Z"+Me):(Ce=me,Me=Se),mm.hasLines(M)){var Gt=Zu.select(this);if(Gt.datum(i),Et)m(Gt.style("opacity",0).attr("d",me).call(pn.lineGroupStyle)).style("opacity",1);else{var Ne=m(Gt);Ne.attr("d",me),pn.singleLineStyle(i,Ne)}}}}}var mt=I.selectAll(".js-line").data(Ge);m(mt.exit()).style("opacity",0).remove(),mt.each(xt(!1)),mt.enter().append("path").classed("js-line",!0).style("vector-effect",u?"none":"non-scaling-stroke").call(pn.lineGroupStyle).each(xt(!0)),pn.setClipUrl(mt,r.layerClipId,e);function ye(Et){m(Et).attr("d","M0,0Z")}var Re=function(){var Et=new Array(ut.length);for(c=0;c<ut.length;c++)Et[c]=hb(ut[c]);return Et},xe=function(Et){var ir,Gt;if(!Et||Et.length===0)for(ir=new Array(ut.length),Gt=0;Gt<ut.length;Gt++){var Ne=ut[Gt][0].slice(),ft=ut[Gt][ut[Gt].length-1].slice();Ne[V]=ft[V]=Y;var pt=[ft,Ne],xr=pt.concat(ut[Gt]);ir[Gt]=hb(xr)}else{for(ir=new Array(Et.length-1+ut.length),Gt=0;Gt<Et.length-1;Gt++)ir[Gt]=hb(Et[Gt]);var pr=Et[Et.length-1].slice();for(pr.reverse(),Gt=0;Gt<ut.length;Gt++)ir[Et.length-1+Gt]=hb(ut[Gt].concat(pr))}return ir};Ge.length?(z?(z.datum(i),Le&&ct&&(H?(Le[V]=ct[V]=Y,m(z).attr("d","M"+ct+"L"+Le+"L"+Ce.substr(1)).call(pn.singleFillStyle,e),it=xe(null)):(m(z).attr("d",Ce+"Z").call(pn.singleFillStyle,e),it=Re())),M._polygons=it,M._fillElement=z):B&&(M.fill.substr(0,6)==="tonext"&&Ce&&J?(M.fill==="tonext"?(m(B).attr("d",Ce+"Z"+J+"Z").call(pn.singleFillStyle,e),it=Re(),M._polygons=it.concat(re)):(m(B).attr("d",Ce+"L"+J.substr(1)+"Z").call(pn.singleFillStyle,e),it=xe(oe),M._polygons=it),M._fillElement=B):ye(B)),M._prevRevpath=Me):(z?ye(z):B&&ye(B),M._prevRevpath=null),M._ownPolygons=it;function et(Et){return Et.filter(function(ir){return!ir.gap&&ir.vis})}function vt(Et){return Et.filter(function(ir){return ir.vis})}function tt(Et){return Et.filter(function(ir){return!ir.gap})}function Bt(Et){return Et.id}function Mt(Et){if(Et.ids)return Bt}function Ct(){return!1}function Rt(Et,ir,Gt){var Ne,ft,pt,xr=Gt[0].trace,pr=mm.hasMarkers(xr),Tt=mm.hasText(xr),wt=Mt(xr),Vt=Ct,Kt=Ct;if(pr||Tt){var Ht=vN,Ut=xr.stackgroup,er=Ut&&e._fullLayout._scatterStackOpts[_._id+T._id][Ut].stackgaps==="infer zero";xr.marker.maxdisplayed||xr._needsCull?Ht=er?vt:et:Ut&&!er&&(Ht=tt),pr&&(Vt=Ht),Tt&&(Kt=Ht)}ft=Et.selectAll("path.point"),Ne=ft.data(Vt,wt);var Mr=Ne.enter().append("path").classed("point",!0);v&&Mr.call(pn.pointStyle,xr,e).call(pn.translatePoints,_,T).style("opacity",0).transition().style("opacity",1),Ne.order();var br;pr&&(br=pn.makePointStyleFns(xr)),Ne.each(function(Pt){var Fe=Zu.select(this),He=m(Fe);pt=pn.translatePoint(Pt,He,_,T),pt?(pn.singlePointStyle(Pt,He,xr,br,e),r.layerClipId&&pn.hideOutsideRangePoint(Pt,He,_,T,xr.xcalendar,xr.ycalendar),xr.customdata&&Fe.classed("plotly-customdata",Pt.data!==null&&Pt.data!==void 0)):He.remove()}),v?Ne.exit().transition().style("opacity",0).remove():Ne.exit().remove(),ft=ir.selectAll("g"),Ne=ft.data(Kt,wt),Ne.enter().append("g").classed("textpoint",!0).append("text"),Ne.order(),Ne.each(function(Pt){var Fe=Zu.select(this),He=m(Fe.select("text"));pt=pn.translatePoint(Pt,He,_,T),pt?r.layerClipId&&pn.hideOutsideRangePoint(Pt,Fe,_,T,xr.xcalendar,xr.ycalendar):Fe.remove()}),Ne.selectAll("text").call(pn.textPointStyle,xr,e).each(function(Pt){var Fe=_.c2p(Pt.x),He=T.c2p(Pt.y);Zu.select(this).selectAll("tspan.line").each(function(){m(Zu.select(this)).attr({x:Fe,y:He})})}),Ne.exit().remove()}R.datum(i),N.datum(i),Rt(R,N,i);var Ot=M.cliponaxis===!1,gt=Ot?null:r.layerClipId;pn.setClipUrl(R,gt,e),pn.setClipUrl(N,gt,e)}function lfe(e,t,r,i,a){var s=r.xaxis,l=r.yaxis,u=Zu.extent(s1.simpleMap(s.range,s.r2c)),c=Zu.extent(s1.simpleMap(l.range,l.r2c)),v=i[0].trace;if(mm.hasMarkers(v)){var m=v.marker.maxdisplayed;if(m!==0){var _=i.filter(function(L){return L.x>=u[0]&&L.x<=u[1]&&L.y>=c[0]&&L.y<=c[1]}),T=Math.ceil(_.length/m),M=0;a.forEach(function(L,E){var I=L[0].trace;mm.hasMarkers(I)&&I.marker.maxdisplayed>0&&E<t&&M++});var k=Math.round(M*T/3+Math.floor(M/3)*T/7.1);i.forEach(function(L){delete L.vis}),_.forEach(function(L,E){Math.round((E+k)%T)===0&&(L.vis=!0)})}}}});var vT=he((Cxe,mN)=>{"use strict";mN.exports={container:"marker",min:"cmin",max:"cmax"}});var gN=he((Exe,yN)=>{"use strict";var vb=Ii();yN.exports=function(t,r,i){var a={},s={_fullLayout:i},l=vb.getFromTrace(s,r,"x"),u=vb.getFromTrace(s,r,"y"),c=t.orig_x;c===void 0&&(c=t.x);var v=t.orig_y;return v===void 0&&(v=t.y),a.xLabel=vb.tickText(l,l.c2l(c),!0).text,a.yLabel=vb.tickText(u,u.c2l(v),!0).text,a}});var yT=he((Lxe,_N)=>{"use strict";var dT=Ka(),ym=_i(),ufe=sa();function ffe(e){var t=dT.select(e).selectAll("g.trace.scatter");t.style("opacity",function(r){return r[0].trace.opacity}),t.selectAll("g.points").each(function(r){var i=dT.select(this),a=r.trace||r[0].trace;pT(i,a,e)}),t.selectAll("g.text").each(function(r){var i=dT.select(this),a=r.trace||r[0].trace;mT(i,a,e)}),t.selectAll("g.trace path.js-line").call(ym.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(ym.fillGroupStyle,e,!1),ufe.getComponentMethod("errorbars","style")(t)}function pT(e,t,r){ym.pointStyle(e.selectAll("path.point"),t,r)}function mT(e,t,r){ym.textPointStyle(e.selectAll("text"),t,r)}function cfe(e,t,r){var i=t[0].trace;i.selectedpoints?(ym.selectedPointStyle(r.selectAll("path.point"),i),ym.selectedTextStyle(r.selectAll("text"),i)):(pT(r,i,e),mT(r,i,e))}_N.exports={style:ffe,stylePoints:pT,styleText:mT,styleOnSelect:cfe}});var gT=he((Pxe,xN)=>{"use strict";var gm=Ua(),hfe=is();xN.exports=function(t,r){var i,a;if(t.mode==="lines")return i=t.line.color,i&&gm.opacity(i)?i:t.fillcolor;if(t.mode==="none")return t.fill?t.fillcolor:"";var s=r.mcc||(t.marker||{}).color,l=r.mlcc||((t.marker||{}).line||{}).color;return a=s&&gm.opacity(s)?s:l&&gm.opacity(l)&&(r.mlw||((t.marker||{}).line||{}).width)?l:"",a?gm.opacity(a)<.3?gm.addOpacity(a,.3):a:(i=(t.line||{}).color,i&&gm.opacity(i)&&hfe.hasLines(t)&&t.line.width?i:t.fillcolor)}});var TN=he((Dxe,wN)=>{"use strict";var db=Nt(),bN=Bf(),vfe=sa(),dfe=gT(),_T=Ua(),pfe=db.fillText;wN.exports=function(t,r,i,a){var s=t.cd,l=s[0].trace,u=t.xa,c=t.ya,v=u.c2p(r),m=c.c2p(i),_=[v,m],T=l.hoveron||"",M=l.mode.indexOf("markers")!==-1?3:.5,k=!!l.xperiodalignment,L=!!l.yperiodalignment;if(T.indexOf("points")!==-1){var E=function(Me){if(k){var _e=u.c2p(Me.xStart),Te=u.c2p(Me.xEnd);return v>=Math.min(_e,Te)&&v<=Math.max(_e,Te)?0:1/0}var Ae=Math.max(3,Me.mrc||0),Le=1-1/Ae,Ke=Math.abs(u.c2p(Me.x)-v);return Ke<Ae?Le*Ke/Ae:Ke-Ae+Le},I=function(Me){if(L){var _e=c.c2p(Me.yStart),Te=c.c2p(Me.yEnd);return m>=Math.min(_e,Te)&&m<=Math.max(_e,Te)?0:1/0}var Ae=Math.max(3,Me.mrc||0),Le=1-1/Ae,Ke=Math.abs(c.c2p(Me.y)-m);return Ke<Ae?Le*Ke/Ae:Ke-Ae+Le},R=function(Me){var _e=Math.max(M,Me.mrc||0),Te=u.c2p(Me.x)-v,Ae=c.c2p(Me.y)-m;return Math.max(Math.sqrt(Te*Te+Ae*Ae)-_e,1-M/_e)},N=bN.getDistanceFunction(a,E,I,R);if(bN.getClosest(s,N,t),t.index!==!1){var z=s[t.index],B=u.c2p(z.x,!0),H=c.c2p(z.y,!0),V=z.mrc||1;t.index=z.i;var Y=s[0].t.orientation,J=Y&&(z.sNorm||z.s),re=Y==="h"?J:z.orig_x!==void 0?z.orig_x:z.x,ne=Y==="v"?J:z.orig_y!==void 0?z.orig_y:z.y;return db.extendFlat(t,{color:dfe(l,z),x0:B-V,x1:B+V,xLabelVal:re,y0:H-V,y1:H+V,yLabelVal:ne,spikeDistance:R(z),hovertemplate:l.hovertemplate}),pfe(z,l,t),vfe.getComponentMethod("errorbars","hoverInfo")(z,l,t),[t]}}function oe(Me){if(!Me)return!1;var _e=Me.node();try{var Te=new DOMPoint(_[0],_[1]);return _e.isPointInFill(Te)}catch(Le){var Ae=_e.ownerSVGElement.createSVGPoint();return Ae.x=_[0],Ae.y=_[1],_e.isPointInFill(Ae)}}function ue(Me){var _e,Te=[],Ae=1/0,Le=-1/0,Ke=1/0,ct=-1/0,it;for(_e=0;_e<Me.length;_e++){var ut=Me[_e];ut.contains(_)&&(Te.push(ut),Ke=Math.min(Ke,ut.ymin),ct=Math.max(ct,ut.ymax))}if(Te.length===0)return null;Ke=Math.max(Ke,0),ct=Math.min(ct,c._length),it=(Ke+ct)/2;var Ge,xt,at,At,kt,mt,ye;for(_e=0;_e<Te.length;_e++)for(xt=Te[_e].pts,Ge=1;Ge<xt.length;Ge++)mt=xt[Ge-1][1],ye=xt[Ge][1],mt>it!=ye>=it&&(At=xt[Ge-1][0],kt=xt[Ge][0],ye-mt&&(at=At+(kt-At)*(it-mt)/(ye-mt),Ae=Math.min(Ae,at),Le=Math.max(Le,at)));return Ae=Math.max(Ae,0),Le=Math.min(Le,u._length),{x0:Ae,x1:Le,y0:it,y1:it}}if(T.indexOf("fills")!==-1&&l._fillElement){var me=oe(l._fillElement)&&!oe(l._fillExclusionElement);if(me){var Se=ue(l._polygons);Se===null&&(Se={x0:_[0],x1:_[0],y0:_[1],y1:_[1]});var Ce=_T.defaultLine;return _T.opacity(l.fillcolor)?Ce=l.fillcolor:_T.opacity((l.line||{}).color)&&(Ce=l.line.color),db.extendFlat(t,{distance:t.maxHoverDistance,x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1,color:Ce,hovertemplate:!1}),delete t.index,l.text&&!db.isArrayOrTypedArray(l.text)?t.text=String(l.text):t.text=l.name,[t]}}}});var SN=he((zxe,MN)=>{"use strict";var AN=is();MN.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],u=i[0].trace,c,v,m,_,T=!AN.hasMarkers(u)&&!AN.hasText(u);if(T)return[];if(r===!1)for(c=0;c<i.length;c++)i[c].selected=0;else for(c=0;c<i.length;c++)v=i[c],m=a.c2p(v.x),_=s.c2p(v.y),v.i!==null&&r.contains([m,_],!1,c,t)?(l.push({pointNumber:v.i,x:a.c2d(v.x),y:s.c2d(v.y)}),v.selected=1):v.selected=0;return l}});var CN=he((Ixe,kN)=>{"use strict";kN.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}});var DN=he((Rxe,PN)=>{"use strict";var l1=sa().traceIs,xT=V5();PN.exports=function(t,r,i,a){i("autotypenumbers",a.autotypenumbersDflt);var s=i("type",(a.splomStash||{}).type);s==="-"&&(mfe(r,a.data),r.type==="-"?r.type="linear":t.type=r.type)};function mfe(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),a;r.indexOf("scene")!==-1&&(r=i);var s=yfe(t,r,i);if(s){if(s.type==="histogram"&&i==={v:"y",h:"x"}[s.orientation||"v"]){e.type="linear";return}var l=i+"calendar",u=s[l],c={noMultiCategory:!l1(s,"cartesian")||l1(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&i==={h:"x",v:"y"}[s.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=e.autotypenumbers,LN(s,i)){var v=EN(s),m=[];for(a=0;a<t.length;a++){var _=t[a];!l1(_,"box-violin")||(_[i+"axis"]||i)!==r||(_[v]!==void 0?m.push(_[v][0]):_.name!==void 0?m.push(_.name):m.push("text"),_[l]!==u&&(u=void 0))}e.type=xT(m,u,c)}else if(s.type==="splom"){var T=s.dimensions,M=T[s._axesDim[r]];M.visible&&(e.type=xT(M.values,u,c))}else e.type=xT(s[i]||[s[i+"0"]],u,c)}}}function yfe(e,t,r){for(var i=0;i<e.length;i++){var a=e[i];if(a.type==="splom"&&a._length>0&&(a["_"+r+"axes"]||{})[t])return a;if((a[r+"axis"]||r)===t){if(LN(a,r))return a;if((a[r]||[]).length||a[r+"0"])return a}}}function EN(e){return{v:"x",h:"y"}[e.orientation||"v"]}function LN(e,t){var r=EN(e),i=l1(e,"box-violin"),a=l1(e._fullInput||{},"candlestick");return i&&!a&&t===r&&e[r]===void 0&&e[r+"0"]===void 0}});var IN=he((Fxe,zN)=>{"use strict";var gfe=ll().isTypedArraySpec;function _fe(e,t){var r=t.dataAttr||e._id.charAt(0),i={},a,s,l;if(t.axData)a=t.axData;else for(a=[],s=0;s<t.data.length;s++){var u=t.data[s];u[r+"axis"]===e._id&&a.push(u)}for(s=0;s<a.length;s++){var c=a[s][r];for(l=0;l<c.length;l++){var v=c[l];v!=null&&(i[v]=1)}}return Object.keys(i)}zN.exports=function(t,r,i,a){if(r.type==="category"){var s=t.categoryarray,l=Array.isArray(s)&&s.length>0||gfe(s),u;l&&(u="array");var c=i("categoryorder",u),v;c==="array"&&(v=i("categoryarray")),!l&&c==="array"&&(c=r.categoryorder="trace"),c==="trace"?r._initialCategories=[]:c==="array"?r._initialCategories=v.slice():(v=_fe(r,a).sort(),c==="category ascending"?r._initialCategories=v:c==="category descending"&&(r._initialCategories=v.reverse()))}}});var qN=he((qxe,FN)=>{"use strict";var RN=Sf().mix,xfe=kf(),bfe=Nt();FN.exports=function(t,r,i,a){a=a||{};var s=a.dfltColor;function l(V,Y){return bfe.coerce2(t,r,a.attributes,V,Y)}var u=l("linecolor",s),c=l("linewidth"),v=i("showline",a.showLine||!!u||!!c);v||(delete r.linecolor,delete r.linewidth);var m=RN(s,a.bgColor,a.blend||xfe.lightFraction).toRgbString(),_=l("gridcolor",m),T=l("gridwidth"),M=l("griddash"),k=i("showgrid",a.showGrid||!!_||!!T||!!M);if(k||(delete r.gridcolor,delete r.gridwidth,delete r.griddash),a.hasMinor){var L=RN(r.gridcolor,a.bgColor,67).toRgbString(),E=l("minor.gridcolor",L),I=l("minor.gridwidth",r.gridwidth||1),R=l("minor.griddash",r.griddash||"solid"),N=i("minor.showgrid",!!E||!!I||!!R);N||(delete r.minor.gridcolor,delete r.minor.gridwidth,delete r.minor.griddash)}if(!a.noZeroLine){var z=l("zerolinecolor",s),B=l("zerolinewidth"),H=i("zeroline",a.showGrid||!!z||!!B);H||(delete r.zerolinecolor,delete r.zerolinewidth)}}});var wT=he((Nxe,HN)=>{"use strict";var NN=Ia(),wfe=sa(),u1=Nt(),Tfe=Di(),Afe=Kl(),bT=Bu(),BN=c5(),ON=v5(),Mfe=m5(),Sfe=y5(),kfe=IN(),Cfe=qN(),Efe=l4(),UN=A2(),pb=Mo().WEEKDAY_PATTERN,Lfe=Mo().HOUR_PATTERN;HN.exports=function(t,r,i,a,s){var l=a.letter,u=a.font||{},c=a.splomStash||{},v=i("visible",!a.visibleDflt),m=r._template||{},_=r.type||m.type||"-",T;if(_==="date"){var M=wfe.getComponentMethod("calendars","handleDefaults");M(t,r,"calendar",a.calendar),a.noTicklabelmode||(T=i("ticklabelmode"))}!a.noTicklabelindex&&(_==="date"||_==="linear")&&i("ticklabelindex");var k="";(!a.noTicklabelposition||_==="multicategory")&&(k=u1.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:T==="period"?["outside","inside"]:l==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),a.noTicklabeloverflow||i("ticklabeloverflow",k.indexOf("inside")!==-1?"hide past domain":_==="category"||_==="multicategory"?"allow":"hide past div"),UN(r,s),Efe(t,r,i,a),kfe(t,r,i,a),_!=="category"&&!a.noHover&&i("hoverformat");var L=i("color"),E=L!==bT.color.dflt?L:u.color,I=c.label||s._dfltTitle[l];if(Sfe(t,r,i,_,a),!v)return r;i("title.text",I),u1.coerceFont(i,"title.font",u,{overrideDflt:{size:u1.bigFont(u.size),color:E}}),BN(t,r,i,_);var R=a.hasMinor;if(R&&(Tfe.newContainer(r,"minor"),BN(t,r,i,_,{isMinor:!0})),Mfe(t,r,i,_,a),ON(t,r,i,a),R){var N=a.isMinor;a.isMinor=!0,ON(t,r,i,a),a.isMinor=N}Cfe(t,r,i,{dfltColor:L,bgColor:a.bgColor,showGrid:a.showGrid,hasMinor:R,attributes:bT}),R&&!r.minor.ticks&&!r.minor.showgrid&&delete r.minor,(r.showline||r.ticks)&&i("mirror");var z=_==="multicategory";if(!a.noTickson&&(_==="category"||z)&&(r.ticks||r.showgrid)){var B;z&&(B="boundaries");var H=i("tickson",B);H==="boundaries"&&delete r.ticklabelposition}if(z){var V=i("showdividers");V&&(i("dividercolor"),i("dividerwidth"))}if(_==="date")if(Afe(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:Pfe}),!r.rangebreaks.length)delete r.rangebreaks;else{for(var Y=0;Y<r.rangebreaks.length;Y++)if(r.rangebreaks[Y].pattern===pb){r._hasDayOfWeekBreaks=!0;break}if(UN(r,s),s._has("scattergl")||s._has("splom"))for(var J=0;J<a.data.length;J++){var re=a.data[J];(re.type==="scattergl"||re.type==="splom")&&(re.visible=!1,u1.warn(re.type+" traces do not work on axes with rangebreaks. Setting trace "+re.index+" to `visible: false`."))}}return r};function Pfe(e,t,r){function i(T,M){return u1.coerce(e,t,bT.rangebreaks,T,M)}var a=i("enabled");if(a){var s=i("bounds");if(s&&s.length>=2){var l="",u,c;if(s.length===2){for(u=0;u<2;u++)if(c=VN(s[u]),c){l=pb;break}}var v=i("pattern",l);if(v===pb)for(u=0;u<2;u++)c=VN(s[u]),c&&(t.bounds[u]=s[u]=c-1);if(v)for(u=0;u<2;u++)switch(c=s[u],v){case pb:if(!NN(c)){t.enabled=!1;return}if(c=+c,c!==Math.floor(c)||c<0||c>=7){t.enabled=!1;return}t.bounds[u]=s[u]=c;break;case Lfe:if(!NN(c)){t.enabled=!1;return}if(c=+c,c<0||c>24){t.enabled=!1;return}t.bounds[u]=s[u]=c;break}if(r.autorange===!1){var m=r.range;if(m[0]<m[1]){if(s[0]<m[0]&&s[1]>m[1]){t.enabled=!1;return}}else if(s[0]>m[0]&&s[1]<m[1]){t.enabled=!1;return}}}else{var _=i("values");if(_&&_.length)i("dvalue");else{t.enabled=!1;return}}}}var Dfe={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function VN(e){if(typeof e=="string")return Dfe[e.substr(0,3).toLowerCase()]}});var TT=he((Bxe,GN)=>{"use strict";var zfe=Ia(),mb=Nt();GN.exports=function(t,r,i,a){var s=a.counterAxes||[],l=a.overlayableAxes||[],u=a.letter,c=a.grid,v=a.overlayingDomain,m,_,T,M,k,L;c&&(_=c._domains[u][c._axisMap[r._id]],m=c._anchors[r._id],_&&(T=c[u+"side"].split(" ")[0],M=c.domain[u][T==="right"||T==="top"?1:0])),_=_||[0,1],m=m||(zfe(t.position)?"free":s[0]||"free"),T=T||(u==="x"?"bottom":"left"),M=M||0,k=0,L=!1;var E=mb.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:m}},"anchor"),I=mb.coerce(t,r,{side:{valType:"enumerated",values:u==="x"?["bottom","top"]:["left","right"],dflt:T}},"side");if(E==="free"){if(u==="y"){var R=i("autoshift");R&&(M=I==="left"?v[0]:v[1],L=r.automargin?r.automargin:!0,k=I==="left"?-3:3),i("shift",k)}i("position",M)}i("automargin",L);var N=!1;if(l.length&&(N=mb.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying")),!N){var z=i("domain",_);z[0]>z[1]-1/4096&&(r.domain=_),mb.noneOrAll(t.domain,r.domain,_),r.tickmode==="sync"&&(r.tickmode="auto")}return i("layer"),r}});var $N=he((Oxe,QN)=>{"use strict";var Zd=Nt(),ZN=Ua(),Ife=Ac().isUnifiedHover,Rfe=R4(),YN=Di(),Ffe=C0(),WN=Bu(),qfe=DN(),XN=wT(),Nfe=Sg(),jN=TT(),MT=ro(),Gf=MT.id2name,JN=MT.name2id,Bfe=Mo().AX_ID_PATTERN,KN=sa(),f1=KN.traceIs,AT=KN.getComponentMethod;function yb(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}QN.exports=function(t,r,i){var a=r.autotypenumbers,s={},l={},u={},c={},v={},m={},_={},T={},M={},k={},L,E;for(L=0;L<i.length;L++){var I=i[L];if(!(!f1(I,"cartesian")&&!f1(I,"gl2d"))){var R;if(I.xaxis)R=Gf(I.xaxis),yb(s,R,I);else if(I.xaxes)for(E=0;E<I.xaxes.length;E++)yb(s,Gf(I.xaxes[E]),I);var N;if(I.yaxis)N=Gf(I.yaxis),yb(s,N,I);else if(I.yaxes)for(E=0;E<I.yaxes.length;E++)yb(s,Gf(I.yaxes[E]),I);if(I.type==="funnel"?I.orientation==="h"?(R&&(l[R]=!0),N&&(_[N]=!0)):N&&(u[N]=!0):I.type==="image"?(N&&(T[N]=!0),R&&(T[R]=!0)):(N&&(v[N]=!0,m[N]=!0),(!f1(I,"carpet")||I.type==="carpet"&&!I._cheater)&&R&&(c[R]=!0)),I.type==="carpet"&&I._cheater&&R&&(l[R]=!0),f1(I,"2dMap")&&(M[R]=!0,M[N]=!0),f1(I,"oriented")){var z=I.orientation==="h"?N:R;k[z]=!0}}}var B=r._subplots,H=B.xaxis,V=B.yaxis,Y=Zd.simpleMap(H,Gf),J=Zd.simpleMap(V,Gf),re=Y.concat(J),ne=ZN.background;H.length&&V.length&&(ne=Zd.coerce(t,r,Ffe,"plot_bgcolor"));var oe=ZN.combine(ne,r.paper_bgcolor),ue,me,Se,Ce,Me;function _e(){var ft=s[ue]||[];Me._traceIndices=ft.map(function(pt){return pt._expandedIndex}),Me._annIndices=[],Me._shapeIndices=[],Me._selectionIndices=[],Me._imgIndices=[],Me._subplotsWith=[],Me._counterAxes=[],Me._name=Me._attr=ue,Me._id=me}function Te(ft,pt){return Zd.coerce(Ce,Me,WN,ft,pt)}function Ae(ft,pt){return Zd.coerce2(Ce,Me,WN,ft,pt)}function Le(ft){return ft==="x"?V:H}function Ke(ft,pt){for(var xr=ft==="x"?Y:J,pr=[],Tt=0;Tt<xr.length;Tt++){var wt=xr[Tt];wt!==pt&&!(t[wt]||{}).overlaying&&pr.push(JN(wt))}return pr}var ct={x:Le("x"),y:Le("y")},it=ct.x.concat(ct.y),ut={},Ge=[];function xt(){var ft=Ce.matches;Bfe.test(ft)&&it.indexOf(ft)===-1&&(ut[ft]=Ce.type,Ge=Object.keys(ut))}var at=Rfe(t,r),At=Ife(at);for(L=0;L<re.length;L++){ue=re[L],me=JN(ue),Se=ue.charAt(0),Zd.isPlainObject(t[ue])||(t[ue]={}),Ce=t[ue],Me=YN.newContainer(r,ue,Se+"axis"),_e();var kt=Se==="x"&&!c[ue]&&l[ue]||Se==="y"&&!v[ue]&&u[ue],mt=Se==="y"&&(!m[ue]&&_[ue]||T[ue]),ye={hasMinor:!0,letter:Se,font:r.font,outerTicks:M[ue],showGrid:!k[ue],data:s[ue]||[],bgColor:oe,calendar:r.calendar,automargin:!0,visibleDflt:kt,reverseDflt:mt,autotypenumbersDflt:a,splomStash:((r._splomAxes||{})[Se]||{})[me],noAutotickangles:Se==="y"};Te("uirevision",r.uirevision),qfe(Ce,Me,Te,ye),XN(Ce,Me,Te,ye,r);var Re=At&&Se===at.charAt(0),xe=Ae("spikecolor",At?Me.color:void 0),et=Ae("spikethickness",At?1.5:void 0),vt=Ae("spikedash",At?"dot":void 0),tt=Ae("spikemode",At?"across":void 0),Bt=Ae("spikesnap"),Mt=Te("showspikes",!!Re||!!xe||!!et||!!vt||!!tt||!!Bt);Mt||(delete Me.spikecolor,delete Me.spikethickness,delete Me.spikedash,delete Me.spikemode,delete Me.spikesnap);var Ct=Gf(Ce.overlaying),Rt=[0,1];if(r[Ct]!==void 0){var Ot=Gf(r[Ct].anchor);r[Ot]!==void 0&&(Rt=r[Ot].domain)}jN(Ce,Me,Te,{letter:Se,counterAxes:ct[Se],overlayableAxes:Ke(Se,ue),grid:r.grid,overlayingDomain:Rt}),Te("title.standoff"),xt(),Me._input=Ce}for(L=0;L<Ge.length;){me=Ge[L++],ue=Gf(me),Se=ue.charAt(0),Zd.isPlainObject(t[ue])||(t[ue]={}),Ce=t[ue],Me=YN.newContainer(r,ue,Se+"axis"),_e();var gt={letter:Se,font:r.font,outerTicks:M[ue],showGrid:!k[ue],data:[],bgColor:oe,calendar:r.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:a,splomStash:((r._splomAxes||{})[Se]||{})[me]};Te("uirevision",r.uirevision),Me.type=ut[me]||"linear",XN(Ce,Me,Te,gt,r),jN(Ce,Me,Te,{letter:Se,counterAxes:ct[Se],overlayableAxes:Ke(Se,ue),grid:r.grid}),Te("fixedrange"),xt(),Me._input=Ce}var Et=AT("rangeslider","handleDefaults"),ir=AT("rangeselector","handleDefaults");for(L=0;L<Y.length;L++)ue=Y[L],Ce=t[ue],Me=r[ue],Et(t,r,ue),Me.type==="date"&&ir(Ce,Me,r,J,Me.calendar),Te("fixedrange");for(L=0;L<J.length;L++){ue=J[L],Ce=t[ue],Me=r[ue];var Gt=r[Gf(Me.anchor)],Ne=AT("rangeslider","isVisible")(Gt);Te("fixedrange",Ne)}Nfe.handleDefaults(t,r,{axIds:it.concat(Ge).sort(MT.idSort),axHasImage:T})}});var rB=he((Uxe,tB)=>{"use strict";var Ofe=Ka(),eB=sa(),gb=Nt(),pl=_i(),_b=Ii();tB.exports=function(t,r,i,a){var s=t._fullLayout;if(r.length===0){_b.redrawComponents(t);return}function l(E){var I=E.xaxis,R=E.yaxis;s._defs.select("#"+E.clipId+"> rect").call(pl.setTranslate,0,0).call(pl.setScale,1,1),E.plot.call(pl.setTranslate,I._offset,R._offset).call(pl.setScale,1,1);var N=E.plot.selectAll(".scatterlayer .trace");N.selectAll(".point").call(pl.setPointGroupScale,1,1),N.selectAll(".textpoint").call(pl.setTextPointsScale,1,1),N.call(pl.hideOutsideRangePoints,E)}function u(E,I){var R=E.plotinfo,N=R.xaxis,z=R.yaxis,B=N._length,H=z._length,V=!!E.xr1,Y=!!E.yr1,J=[];if(V){var re=gb.simpleMap(E.xr0,N.r2l),ne=gb.simpleMap(E.xr1,N.r2l),oe=re[1]-re[0],ue=ne[1]-ne[0];J[0]=(re[0]*(1-I)+I*ne[0]-re[0])/(re[1]-re[0])*B,J[2]=B*(1-I+I*ue/oe),N.range[0]=N.l2r(re[0]*(1-I)+I*ne[0]),N.range[1]=N.l2r(re[1]*(1-I)+I*ne[1])}else J[0]=0,J[2]=B;if(Y){var me=gb.simpleMap(E.yr0,z.r2l),Se=gb.simpleMap(E.yr1,z.r2l),Ce=me[1]-me[0],Me=Se[1]-Se[0];J[1]=(me[1]*(1-I)+I*Se[1]-me[1])/(me[0]-me[1])*H,J[3]=H*(1-I+I*Me/Ce),z.range[0]=N.l2r(me[0]*(1-I)+I*Se[0]),z.range[1]=z.l2r(me[1]*(1-I)+I*Se[1])}else J[1]=0,J[3]=H;_b.drawOne(t,N,{skipTitle:!0}),_b.drawOne(t,z,{skipTitle:!0}),_b.redrawComponents(t,[N._id,z._id]);var _e=V?B/J[2]:1,Te=Y?H/J[3]:1,Ae=V?J[0]:0,Le=Y?J[1]:0,Ke=V?J[0]/J[2]*B:0,ct=Y?J[1]/J[3]*H:0,it=N._offset-Ke,ut=z._offset-ct;R.clipRect.call(pl.setTranslate,Ae,Le).call(pl.setScale,1/_e,1/Te),R.plot.call(pl.setTranslate,it,ut).call(pl.setScale,_e,Te),pl.setPointGroupScale(R.zoomScalePts,1/_e,1/Te),pl.setTextPointsScale(R.zoomScaleTxt,1/_e,1/Te)}var c;a&&(c=a());function v(){for(var E={},I=0;I<r.length;I++){var R=r[I],N=R.plotinfo.xaxis,z=R.plotinfo.yaxis;R.xr1&&(E[N._name+".range"]=R.xr1.slice()),R.yr1&&(E[z._name+".range"]=R.yr1.slice())}return c&&c(),eB.call("relayout",t,E).then(function(){for(var B=0;B<r.length;B++)l(r[B].plotinfo)})}function m(){for(var E={},I=0;I<r.length;I++){var R=r[I],N=R.plotinfo.xaxis,z=R.plotinfo.yaxis;R.xr0&&(E[N._name+".range"]=R.xr0.slice()),R.yr0&&(E[z._name+".range"]=R.yr0.slice())}return eB.call("relayout",t,E).then(function(){for(var B=0;B<r.length;B++)l(r[B].plotinfo)})}var _,T,M,k=Ofe.ease(i.easing);t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(M),M=null,m()});function L(){T=Date.now();for(var E=Math.min(1,(T-_)/i.duration),I=k(E),R=0;R<r.length;R++)u(r[R],I);T-_>i.duration?(v(),M=window.cancelAnimationFrame(L)):M=window.requestAnimationFrame(L)}return _=Date.now(),M=window.requestAnimationFrame(L),Promise.resolve()}});var ST=he(Vo=>{"use strict";var bb=Ka(),aB=sa(),Yd=Nt(),Ufe=jn(),Vfe=_i(),iB=t2().getModuleCalcData,av=ro(),Yu=Mo(),Hfe=Bh(),oi=Yd.ensureSingle;function xb(e,t,r){return Yd.ensureSingle(e,t,r,function(i){i.datum(r)})}var Wd=Yu.zindexSeparator;Vo.name="cartesian";Vo.attr=["xaxis","yaxis"];Vo.idRoot=["x","y"];Vo.idRegex=Yu.idRegex;Vo.attrRegex=Yu.attrRegex;Vo.attributes=CN();Vo.layoutAttributes=Bu();Vo.supplyLayoutDefaults=$N();Vo.transitionAxes=rB();Vo.finalizeSubplots=function(e,t){var r=t._subplots,i=r.xaxis,a=r.yaxis,s=r.cartesian,l=s.concat(r.gl2d||[]),u={},c={},v,m,_;for(v=0;v<l.length;v++){var T=l[v].split("y");u[T[0]]=1,c["y"+T[1]]=1}for(v=0;v<i.length;v++)m=i[v],u[m]||(_=(e[av.id2name(m)]||{}).anchor,Yu.idRegex.y.test(_)||(_="y"),s.push(m+_),l.push(m+_),c[_]||(c[_]=1,Yd.pushUnique(a,_)));for(v=0;v<a.length;v++)_=a[v],c[_]||(m=(e[av.id2name(_)]||{}).anchor,Yu.idRegex.x.test(m)||(m="x"),s.push(m+_),l.push(m+_),u[m]||(u[m]=1,Yd.pushUnique(i,m)));if(!l.length){m="",_="";for(var M in e)if(Yu.attrRegex.test(M)){var k=M.charAt(0);k==="x"?(!m||+M.substr(5)<+m.substr(5))&&(m=M):(!_||+M.substr(5)<+_.substr(5))&&(_=M)}m=m?av.name2id(m):"x",_=_?av.name2id(_):"y",i.push(m),a.push(_),s.push(m+_)}};Vo.plot=function(e,t,r,i){var a=e._fullLayout,s=a._subplots.cartesian,l=e.calcdata,u;if(!Array.isArray(t))for(t=[],u=0;u<l.length;u++)t.push(u);for(var c=a._zindices,v=0;v<c.length;v++){var m=c[v];for(u=0;u<s.length;u++){var _=s[u],T=a._plots[_];if(v>0){var M=T.id;if(M.indexOf(Wd)!==-1)continue;M+=Wd+(v+1),T=Yd.extendFlat({},T,{id:M,plot:a._cartesianlayer.selectAll(".subplot").select("."+M)})}for(var k=[],L,E=0;E<l.length;E++){var I=l[E],R=I[0].trace;m===(R.zorder||0)&&R.xaxis+R.yaxis===_&&((t.indexOf(R.index)!==-1||R.carpet)&&(L&&L[0].trace.xaxis+L[0].trace.yaxis===_&&["tonextx","tonexty","tonext"].indexOf(R.fill)!==-1&&k.indexOf(L)===-1&&k.push(L),k.push(I)),L=I)}nB(e,T,k,r,i)}}};function nB(e,t,r,i,a){for(var s=Yu.traceLayerClasses,l=e._fullLayout,u=l._zindices,c=l._modules,v,m,_,T=[],M=[],k=0;k<u.length;k++)for(var L=u[k],E=0;E<c.length;E++){v=c[E];var I=v.name,R=aB.modules[I].categories;if(R.svg){var N=v.layerName||I+"layer",z=N+(k?Number(k)+1:""),B=v.plot;m=iB(r,B,L),_=m[0],r=m[1],_.length&&T.push({i:s.indexOf(N),zindex:k,className:z,plotMethod:B,cdModule:_}),R.zoomScale&&M.push("."+z)}}T.sort(function(Y,J){return(Y.zindex||0)-(J.zindex||0)||Y.i-J.i});var H=t.plot.selectAll("g.mlayer").data(T,function(Y){return Y.className});if(H.enter().append("g").attr("class",function(Y){return Y.className}).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),H.exit().remove(),H.order(),H.each(function(Y){var J=bb.select(this),re=Y.className;Y.plotMethod(e,t,Y.cdModule,J,i,a),Yu.clipOnAxisFalseQuery.indexOf("."+re)===-1&&Vfe.setClipUrl(J,t.layerClipId,e)}),l._has("scattergl")&&(v=aB.getModule("scattergl"),_=iB(r,v)[0],v.plot(e,t,_)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(Yu.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),M.length)){var V=t.plot.selectAll(M.join(",")).selectAll(".trace");t.zoomScalePts=V.selectAll("path.point"),t.zoomScaleTxt=V.selectAll(".textpoint")}}Vo.clean=function(e,t,r,i){var a=i._plots||{},s=t._plots||{},l=i._subplots||{},u,c,v;if(i._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(v in a)u=a[v],u.plotgroup&&u.plotgroup.remove();var m=i._has&&i._has("gl"),_=t._has&&t._has("gl");if(m&&!_)for(v in a)u=a[v],u._scene&&u._scene.destroy();if(l.xaxis&&l.yaxis){var T=av.listIds({_fullLayout:i});for(c=0;c<T.length;c++){var M=T[c];t[av.id2name(M)]||i._infolayer.selectAll(".g-"+M+"title").remove()}}var k=i._has&&i._has("cartesian"),L=t._has&&t._has("cartesian");if(k&&!L)sB(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups,delete i._axisMatchGroups;else if(l.cartesian)for(c=0;c<l.cartesian.length;c++){var E=l.cartesian[c];if(E.indexOf(Wd)===-1&&!s[E]){var I="."+E+",."+E+"-x,."+E+"-y";i._cartesianlayer.selectAll(I).remove(),lB(E,i)}}};Vo.drawFramework=function(e){var t=e._fullLayout,r=e.calcdata,i,a={};for(i=0;i<r.length;i++){var s=r[i][0],l=s.trace,u=l.zorder||0;a[u]||(a[u]=[]),a[u].push(s)}var c=Object.keys(a).map(Number).sort(Yd.sorterAsc);c.length||(c=[0]),t._zindices=c;var v=Gfe(e),m=v.length,_=[];for(i=0;i<m;i++)_[i]=v[i].slice();for(var T=1;T<c.length;T++){var M=[];for(i=0;i<m;i++)M[i]=v[i].slice(),M[i][0]+=Wd+(T+1);_=_.concat(M)}var k=t._cartesianlayer.selectAll(".subplot").data(_,String);k.enter().append("g").attr("class",function(L){return"subplot "+L[0]}),k.order(),k.exit().call(sB,t),k.each(function(L){var E=L[0],I=E.indexOf(Wd),R=I!==-1,N=R?E.slice(0,I):E,z=t._plots[E];z||(z=Yd.extendFlat({},t._plots[N]),z&&(z.id=E,t._plots[E]=z,t._subplots.cartesian.push(E))),z&&(z.plotgroup=bb.select(this),oB(e,z),R||(z.draglayer=oi(t._draggers,"g",E)))})};Vo.rangePlot=function(e,t,r){oB(e,t),nB(e,t,r),Ufe.style(e)};function Gfe(e){var t=e._fullLayout,r=t._zindices.length,i=t._subplots.cartesian,a=i.length,s,l,u,c,v,m,_=[],T=[];for(s=0;s<a;s++){u=i[s],c=t._plots[u],v=c.xaxis,m=c.yaxis;var M=v._mainAxis,k=m._mainAxis,L=M._id+k._id,E=t._plots[L];c.overlays=[],L!==u&&E?(c.mainplot=L,c.mainplotinfo=E,T.push(u)):(c.mainplot=void 0,c.mainplotinfo=void 0,_.push(u))}for(s=0;s<T.length;s++)u=T[s],c=t._plots[u],c.mainplotinfo.overlays.push(c);var I=_.concat(T),R=[];for(s=0;s<a;s++){u=I[s],c=t._plots[u],v=c.xaxis,m=c.yaxis;for(var N=[],z=1;z<=r;z++){var B="";for(z>1&&(B+=Wd+z),N.push(u+B),l=0;l<c.overlays.length;l++)N.push(c.overlays[l].id+B)}N=N.concat([v.layer,m.layer,v.overlaying||"",m.overlaying||""]),R.push(N)}return R}function oB(e,t){var r=e._fullLayout,i=t.plotgroup,a=t.id,s=a.indexOf(Wd),l=s!==-1,u=Yu.layerValue2layerClass[t.xaxis.layer],c=Yu.layerValue2layerClass[t.yaxis.layer],v=r._hasOnlyLargeSploms;if(!t.mainplot||r._zindices.length>1)if(v)t.xlines=oi(i,"path","xlines-above"),t.ylines=oi(i,"path","ylines-above"),t.xaxislayer=oi(i,"g","xaxislayer-above"),t.yaxislayer=oi(i,"g","yaxislayer-above");else{if(!l){var m=oi(i,"g","layer-subplot");t.shapelayer=oi(m,"g","shapelayer"),t.imagelayer=oi(m,"g","imagelayer"),t.minorGridlayer=oi(i,"g","minor-gridlayer"),t.gridlayer=oi(i,"g","gridlayer"),t.zerolinelayer=oi(i,"g","zerolinelayer");var _=oi(i,"g","layer-between");t.shapelayerBetween=oi(_,"g","shapelayer"),t.imagelayerBetween=oi(_,"g","imagelayer"),oi(i,"path","xlines-below"),oi(i,"path","ylines-below"),t.overlinesBelow=oi(i,"g","overlines-below"),oi(i,"g","xaxislayer-below"),oi(i,"g","yaxislayer-below"),t.overaxesBelow=oi(i,"g","overaxes-below")}t.overplot=oi(i,"g","overplot"),t.plot=oi(t.overplot,"g",a),l||(t.xlines=oi(i,"path","xlines-above"),t.ylines=oi(i,"path","ylines-above"),t.overlinesAbove=oi(i,"g","overlines-above"),oi(i,"g","xaxislayer-above"),oi(i,"g","yaxislayer-above"),t.overaxesAbove=oi(i,"g","overaxes-above"),t.xlines=i.select(".xlines-"+u),t.ylines=i.select(".ylines-"+c),t.xaxislayer=i.select(".xaxislayer-"+u),t.yaxislayer=i.select(".yaxislayer-"+c))}else{var T=t.mainplotinfo,M=T.plotgroup,k=a+"-x",L=a+"-y";t.minorGridlayer=T.minorGridlayer,t.gridlayer=T.gridlayer,t.zerolinelayer=T.zerolinelayer,oi(T.overlinesBelow,"path",k),oi(T.overlinesBelow,"path",L),oi(T.overaxesBelow,"g",k),oi(T.overaxesBelow,"g",L),t.plot=oi(T.overplot,"g",a),oi(T.overlinesAbove,"path",k),oi(T.overlinesAbove,"path",L),oi(T.overaxesAbove,"g",k),oi(T.overaxesAbove,"g",L),t.xlines=M.select(".overlines-"+u).select("."+k),t.ylines=M.select(".overlines-"+c).select("."+L),t.xaxislayer=M.select(".overaxes-"+u).select("."+k),t.yaxislayer=M.select(".overaxes-"+c).select("."+L)}l||(v||(xb(t.minorGridlayer,"g",t.xaxis._id),xb(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map(function(E){return E[0]}).sort(av.idSort),xb(t.gridlayer,"g",t.xaxis._id),xb(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(E){return E[0]}).sort(av.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0))}function sB(e,t){if(e){var r={};e.each(function(c){var v=c[0],m=bb.select(this);m.remove(),lB(v,t),r[v]=!0});for(var i in t._plots)for(var a=t._plots[i],s=a.overlays||[],l=0;l<s.length;l++){var u=s[l];r[u.id]&&u.plot.selectAll(".trace").remove()}}}function lB(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}Vo.toSVG=function(e){var t=e._fullLayout._glimages,r=bb.select(e).selectAll(".svg-container"),i=r.filter(function(s,l){return l===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function a(){var s=this,l=s.toDataURL("image/png"),u=t.append("svg:image");u.attr({xmlns:Hfe.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:s.style.width,height:s.style.height})}i.each(a)};Vo.updateFx=D6().updateFx});var fB=he((Hxe,uB)=>{"use strict";var wb=is();uB.exports={hasLines:wb.hasLines,hasMarkers:wb.hasMarkers,hasText:wb.hasText,isBubble:wb.isBubble,attributes:Pc(),layoutAttributes:$_(),supplyDefaults:xq(),crossTraceDefaults:Aq(),supplyLayoutDefaults:Sq(),calc:sT().calc,crossTraceCalc:tN(),arraysToCalcdata:a1(),plot:pN(),colorbar:vT(),formatLabels:gN(),style:yT().style,styleOnSelect:yT().styleOnSelect,hoverPoints:TN(),selectPoints:SN(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:ST(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}});var vB=he((Gxe,hB)=>{"use strict";var Zfe=Ka(),Yfe=Ua(),cB=A6(),kT=Nt(),Wfe=kT.strScale,Xfe=kT.strRotate,jfe=kT.strTranslate;hB.exports=function(t,r,i){var a=t.node(),s=cB[i.arrowhead||0],l=cB[i.startarrowhead||0],u=(i.arrowwidth||1)*(i.arrowsize||1),c=(i.arrowwidth||1)*(i.startarrowsize||1),v=r.indexOf("start")>=0,m=r.indexOf("end")>=0,_=s.backoff*u+i.standoff,T=l.backoff*c+i.startstandoff,M,k,L,E;if(a.nodeName==="line"){M={x:+t.attr("x1"),y:+t.attr("y1")},k={x:+t.attr("x2"),y:+t.attr("y2")};var I=M.x-k.x,R=M.y-k.y;if(L=Math.atan2(R,I),E=L+Math.PI,_&&T&&_+T>Math.sqrt(I*I+R*R)){me();return}if(_){if(_*_>I*I+R*R){me();return}var N=_*Math.cos(L),z=_*Math.sin(L);k.x+=N,k.y+=z,t.attr({x2:k.x,y2:k.y})}if(T){if(T*T>I*I+R*R){me();return}var B=T*Math.cos(L),H=T*Math.sin(L);M.x-=B,M.y-=H,t.attr({x1:M.x,y1:M.y})}}else if(a.nodeName==="path"){var V=a.getTotalLength(),Y="";if(V<_+T){me();return}var J=a.getPointAtLength(0),re=a.getPointAtLength(.1);L=Math.atan2(J.y-re.y,J.x-re.x),M=a.getPointAtLength(Math.min(T,V)),Y="0px,"+T+"px,";var ne=a.getPointAtLength(V),oe=a.getPointAtLength(V-.1);E=Math.atan2(ne.y-oe.y,ne.x-oe.x),k=a.getPointAtLength(Math.max(0,V-_));var ue=Y?T+_:_;Y+=V-ue+"px,"+V+"px",t.style("stroke-dasharray",Y)}function me(){t.style("stroke-dasharray","0px,100px")}function Se(Ce,Me,_e,Te){Ce.path&&(Ce.noRotate&&(_e=0),Zfe.select(a.parentNode).append("path").attr({class:t.attr("class"),d:Ce.path,transform:jfe(Me.x,Me.y)+Xfe(_e*180/Math.PI)+Wfe(Te)}).style({fill:Yfe.rgb(i.arrowcolor),"stroke-width":0}))}v&&Se(l,M,L,c),m&&Se(s,k,E,u)}});var Tb=he((Zxe,gB)=>{"use strict";var dB=Ka(),CT=sa(),Jfe=jn(),nv=Nt(),ET=nv.strTranslate,h1=Ii(),Xd=Ua(),zc=_i(),pB=Bf(),LT=ho(),PT=Yh(),c1=$l(),Kfe=Di().arrayEditor,Qfe=vB();gB.exports={draw:$fe,drawOne:mB,drawRaw:yB};function $fe(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++)t.annotations[r].visible&&mB(e,r);return Jfe.previousPromises(e)}function mB(e,t){var r=e._fullLayout,i=r.annotations[t]||{},a=h1.getFromId(e,i.xref),s=h1.getFromId(e,i.yref);a&&a.setScale(),s&&s.setScale(),yB(e,i,t,!1,a,s)}function iv(e,t,r,i,a){var s=a[r],l=a[r+"ref"],u=r.indexOf("y")!==-1,c=h1.getRefType(l)==="domain",v=u?i.h:i.w;return e?c?s+(u?-t:t)/e._length:e.p2r(e.r2p(s)+t):s+(u?-t:t)/v}function yB(e,t,r,i,a,s){var l=e._fullLayout,u=e._fullLayout._size,c=e._context.edits,v,m;i?(v="annotation-"+i,m=i+".annotations"):(v="annotation",m="annotations");var _=Kfe(e.layout,m,t),T=_.modifyBase,M=_.modifyItem,k=_.getUpdateObj;l._infolayer.selectAll("."+v+'[data-index="'+r+'"]').remove();var L="clip"+l._uid+"_ann"+r;if(!t._input||t.visible===!1){dB.selectAll("#"+L).remove();return}var E={x:{},y:{}},I=+t.textangle||0,R=l._infolayer.append("g").classed(v,!0).attr("data-index",String(r)).style("opacity",t.opacity),N=R.append("g").classed("annotation-text-g",!0),z=c[t.showarrow?"annotationTail":"annotationPosition"],B=t.captureevents||c.annotationText||z;function H(Te){var Ae={index:r,annotation:t._input,fullAnnotation:t,event:Te};return i&&(Ae.subplotId=i),Ae}var V=N.append("g").style("pointer-events",B?"all":null).call(PT,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",H(dB.event))});t.hovertext&&V.on("mouseover",function(){var Te=t.hoverlabel,Ae=Te.font,Le=this.getBoundingClientRect(),Ke=e.getBoundingClientRect();pB.loneHover({x0:Le.left-Ke.left,x1:Le.right-Ke.left,y:(Le.top+Le.bottom)/2-Ke.top,text:t.hovertext,color:Te.bgcolor,borderColor:Te.bordercolor,fontFamily:Ae.family,fontSize:Ae.size,fontColor:Ae.color,fontWeight:Ae.weight,fontStyle:Ae.style,fontVariant:Ae.variant,fontShadow:Ae.fontShadow,fontLineposition:Ae.fontLineposition,fontTextcase:Ae.fontTextcase},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:e})}).on("mouseout",function(){pB.loneUnhover(l._hoverlayer.node())});var Y=t.borderwidth,J=t.borderpad,re=Y+J,ne=V.append("rect").attr("class","bg").style("stroke-width",Y+"px").call(Xd.stroke,t.bordercolor).call(Xd.fill,t.bgcolor),oe=t.width||t.height,ue=l._topclips.selectAll("#"+L).data(oe?[0]:[]);ue.enter().append("clipPath").classed("annclip",!0).attr("id",L).append("rect"),ue.exit().remove();var me=t.font,Se=l._meta?nv.templateString(t.text,l._meta):t.text,Ce=V.append("text").classed("annotation-text",!0).text(Se);function Me(Te){return Te.call(zc.font,me).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),LT.convertToTspans(Te,e,_e),Te}function _e(){var Te=Ce.selectAll("a");if(Te.size()===1&&Te.text()===Ce.text()){var Ae=V.insert("a",":first-child").attr({"xlink:xlink:href":Te.attr("xlink:href"),"xlink:xlink:show":Te.attr("xlink:show")}).style({cursor:"pointer"});Ae.node().appendChild(ne.node())}var Le=V.select(".annotation-text-math-group"),Ke=!Le.empty(),ct=zc.bBox((Ke?Le:Ce).node()),it=ct.width,ut=ct.height,Ge=t.width||it,xt=t.height||ut,at=Math.round(Ge+2*re),At=Math.round(xt+2*re);function kt(bt,dt){return dt==="auto"&&(bt<1/3?dt="left":bt>2/3?dt="right":dt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[dt]}for(var mt=!1,ye=["x","y"],Re=0;Re<ye.length;Re++){var xe=ye[Re],et=t[xe+"ref"]||xe,vt=t["a"+xe+"ref"],tt={x:a,y:s}[xe],Bt=(I+(xe==="x"?0:-90))*Math.PI/180,Mt=at*Math.cos(Bt),Ct=At*Math.sin(Bt),Rt=Math.abs(Mt)+Math.abs(Ct),Ot=t[xe+"anchor"],gt=t[xe+"shift"]*(xe==="x"?1:-1),Et=E[xe],ir,Gt,Ne,ft,pt,xr=h1.getRefType(et);if(tt&&xr!=="domain"){var pr=tt.r2fraction(t[xe]);(pr<0||pr>1)&&(vt===et?(pr=tt.r2fraction(t["a"+xe]),(pr<0||pr>1)&&(mt=!0)):mt=!0),ir=tt._offset+tt.r2p(t[xe]),ft=.5}else{var Tt=xr==="domain";xe==="x"?(Ne=t[xe],ir=Tt?tt._offset+tt._length*Ne:ir=u.l+u.w*Ne):(Ne=1-t[xe],ir=Tt?tt._offset+tt._length*Ne:ir=u.t+u.h*Ne),ft=t.showarrow?.5:Ne}if(t.showarrow){Et.head=ir;var wt=t["a"+xe];if(pt=Mt*kt(.5,t.xanchor)-Ct*kt(.5,t.yanchor),vt===et){var Vt=h1.getRefType(vt);Vt==="domain"?(xe==="y"&&(wt=1-wt),Et.tail=tt._offset+tt._length*wt):Vt==="paper"?xe==="y"?(wt=1-wt,Et.tail=u.t+u.h*wt):Et.tail=u.l+u.w*wt:Et.tail=tt._offset+tt.r2p(wt),Gt=pt}else Et.tail=ir+wt,Gt=pt+wt;Et.text=Et.tail+pt;var Kt=l[xe==="x"?"width":"height"];if(et==="paper"&&(Et.head=nv.constrain(Et.head,1,Kt-1)),vt==="pixel"){var Ht=-Math.max(Et.tail-3,Et.text),Ut=Math.min(Et.tail+3,Et.text)-Kt;Ht>0?(Et.tail+=Ht,Et.text+=Ht):Ut>0&&(Et.tail-=Ut,Et.text-=Ut)}Et.tail+=gt,Et.head+=gt}else pt=Rt*kt(ft,Ot),Gt=pt,Et.text=ir+pt;Et.text+=gt,pt+=gt,Gt+=gt,t["_"+xe+"padplus"]=Rt/2+Gt,t["_"+xe+"padminus"]=Rt/2-Gt,t["_"+xe+"size"]=Rt,t["_"+xe+"shift"]=pt}if(mt){V.remove();return}var er=0,Mr=0;if(t.align!=="left"&&(er=(Ge-it)*(t.align==="center"?.5:1)),t.valign!=="top"&&(Mr=(xt-ut)*(t.valign==="middle"?.5:1)),Ke)Le.select("svg").attr({x:re+er-1,y:re+Mr}).call(zc.setClipUrl,oe?L:null,e);else{var br=re+Mr-ct.top,Pt=re+er-ct.left;Ce.call(LT.positionText,Pt,br).call(zc.setClipUrl,oe?L:null,e)}ue.select("rect").call(zc.setRect,re,re,Ge,xt),ne.call(zc.setRect,Y/2,Y/2,at-Y,At-Y),V.call(zc.setTranslate,Math.round(E.x.text-at/2),Math.round(E.y.text-At/2)),N.attr({transform:"rotate("+I+","+E.x.text+","+E.y.text+")"});var Fe=function(bt,dt){R.selectAll(".annotation-arrow-g").remove();var gr=E.x.head,Lr=E.y.head,Ar=E.x.tail+bt,Hr=E.y.tail+dt,xa=E.x.text+bt,Ca=E.y.text+dt,Pa=nv.rotationXYMatrix(I,xa,Ca),Fi=nv.apply2DTransform(Pa),Ki=nv.apply2DTransform2(Pa),gn=+ne.attr("width"),Xi=+ne.attr("height"),Qn=xa-.5*gn,Pn=Qn+gn,Gi=Ca-.5*Xi,pa=Gi+Xi,Gr=[[Qn,Gi,Qn,pa],[Qn,pa,Pn,pa],[Pn,pa,Pn,Gi],[Pn,Gi,Qn,Gi]].map(Ki);if(!Gr.reduce(function(Ve,yt){return Ve^!!nv.segmentsIntersect(gr,Lr,gr+1e6,Lr+1e6,yt[0],yt[1],yt[2],yt[3])},!1)){Gr.forEach(function(Ve){var yt=nv.segmentsIntersect(Ar,Hr,gr,Lr,Ve[0],Ve[1],Ve[2],Ve[3]);yt&&(Ar=yt.x,Hr=yt.y)});var Qa=t.arrowwidth,Zr=t.arrowcolor,vi=t.arrowside,ga=R.append("g").style({opacity:Xd.opacity(Zr)}).classed("annotation-arrow-g",!0),le=ga.append("path").attr("d","M"+Ar+","+Hr+"L"+gr+","+Lr).style("stroke-width",Qa+"px").call(Xd.stroke,Xd.rgb(Zr));if(Qfe(le,vi,t),c.annotationPosition&&le.node().parentNode&&!i){var ee=gr,se=Lr;if(t.standoff){var ce=Math.sqrt(Math.pow(gr-Ar,2)+Math.pow(Lr-Hr,2));ee+=t.standoff*(Ar-gr)/ce,se+=t.standoff*(Hr-Lr)/ce}var Ee=ga.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Ar-ee)+","+(Hr-se),transform:ET(ee,se)}).style("stroke-width",Qa+6+"px").call(Xd.stroke,"rgba(0,0,0,0)").call(Xd.fill,"rgba(0,0,0,0)"),Be,rt;c1.init({element:Ee.node(),gd:e,prepFn:function(){var Ve=zc.getTranslate(V);Be=Ve.x,rt=Ve.y,a&&a.autorange&&T(a._name+".autorange",!0),s&&s.autorange&&T(s._name+".autorange",!0)},moveFn:function(Ve,yt){var Dt=Fi(Be,rt),Ft=Dt[0]+Ve,tr=Dt[1]+yt;V.call(zc.setTranslate,Ft,tr),M("x",iv(a,Ve,"x",u,t)),M("y",iv(s,yt,"y",u,t)),t.axref===t.xref&&M("ax",iv(a,Ve,"ax",u,t)),t.ayref===t.yref&&M("ay",iv(s,yt,"ay",u,t)),ga.attr("transform",ET(Ve,yt)),N.attr({transform:"rotate("+I+","+Ft+","+tr+")"})},doneFn:function(){CT.call("_guiRelayout",e,k());var Ve=document.querySelector(".js-notes-box-panel");Ve&&Ve.redraw(Ve.selectedObj)}})}}};if(t.showarrow&&Fe(0,0),z){var He;c1.init({element:V.node(),gd:e,prepFn:function(){He=N.attr("transform")},moveFn:function(bt,dt){var gr="pointer";if(t.showarrow)t.axref===t.xref?M("ax",iv(a,bt,"ax",u,t)):M("ax",t.ax+bt),t.ayref===t.yref?M("ay",iv(s,dt,"ay",u.w,t)):M("ay",t.ay+dt),Fe(bt,dt);else{if(i)return;var Lr,Ar;if(a)Lr=iv(a,bt,"x",u,t);else{var Hr=t._xsize/u.w,xa=t.x+(t._xshift-t.xshift)/u.w-Hr/2;Lr=c1.align(xa+bt/u.w,Hr,0,1,t.xanchor)}if(s)Ar=iv(s,dt,"y",u,t);else{var Ca=t._ysize/u.h,Pa=t.y-(t._yshift+t.yshift)/u.h-Ca/2;Ar=c1.align(Pa-dt/u.h,Ca,0,1,t.yanchor)}M("x",Lr),M("y",Ar),(!a||!s)&&(gr=c1.getCursor(a?.5:Lr,s?.5:Ar,t.xanchor,t.yanchor))}N.attr({transform:ET(bt,dt)+He}),PT(V,gr)},clickFn:function(bt,dt){t.captureevents&&e.emit("plotly_clickannotation",H(dt))},doneFn:function(){PT(V),CT.call("_guiRelayout",e,k());var bt=document.querySelector(".js-notes-box-panel");bt&&bt.redraw(bt.selectedObj)}})}}c.annotationText?Ce.call(LT.makeEditable,{delegate:V,gd:e}).call(Me).on("edit",function(Te){t.text=Te,this.call(Me),M("text",Te),a&&a.autorange&&T(a._name+".autorange",!0),s&&s.autorange&&T(s._name+".autorange",!0),CT.call("_guiRelayout",e,k())}):Ce.call(Me)}});var AB=he((Yxe,TB)=>{"use strict";var _B=Nt(),ece=sa(),xB=Di().arrayEditor;TB.exports={hasClickToShow:tce,onClick:rce};function tce(e,t){var r=wB(e,t);return r.on.length>0||r.explicitOff.length>0}function rce(e,t){var r=wB(e,t),i=r.on,a=r.off.concat(r.explicitOff),s={},l=e._fullLayout.annotations,u,c;if(i.length||a.length){for(u=0;u<i.length;u++)c=xB(e.layout,"annotations",l[i[u]]),c.modifyItem("visible",!0),_B.extendFlat(s,c.getUpdateObj());for(u=0;u<a.length;u++)c=xB(e.layout,"annotations",l[a[u]]),c.modifyItem("visible",!1),_B.extendFlat(s,c.getUpdateObj());return ece.call("update",e,{},s)}}function wB(e,t){var r=e._fullLayout.annotations,i=[],a=[],s=[],l=(t||[]).length,u,c,v,m,_,T,M,k;for(u=0;u<r.length;u++)if(v=r[u],m=v.clicktoshow,m){for(c=0;c<l;c++)if(_=t[c],T=_.xaxis,M=_.yaxis,T._id===v.xref&&M._id===v.yref&&T.d2r(_.x)===bB(v._xclick,T)&&M.d2r(_.y)===bB(v._yclick,M)){v.visible?m==="onout"?k=a:k=s:k=i,k.push(u);break}c===l&&v.visible&&m==="onout"&&a.push(u)}return{on:i,off:a,explicitOff:s}}function bB(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}});var zT=he((Wxe,MB)=>{"use strict";var DT=Nt(),_m=Ua();MB.exports=function(t,r,i,a){a("opacity");var s=a("bgcolor"),l=a("bordercolor"),u=_m.opacity(l);a("borderpad");var c=a("borderwidth"),v=a("showarrow");a("text",v?" ":i._dfltTitle.annotation),a("textangle"),DT.coerceFont(a,"font",i.font),a("width"),a("align");var m=a("height");if(m&&a("valign"),v){var _=a("arrowside"),T,M;_.indexOf("end")!==-1&&(T=a("arrowhead"),M=a("arrowsize")),_.indexOf("start")!==-1&&(a("startarrowhead",T),a("startarrowsize",M)),a("arrowcolor",u?r.bordercolor:_m.defaultLine),a("arrowwidth",(u&&c||1)*2),a("standoff"),a("startstandoff")}var k=a("hovertext"),L=i.hoverlabel||{};if(k){var E=a("hoverlabel.bgcolor",L.bgcolor||(_m.opacity(s)?_m.rgb(s):_m.defaultLine)),I=a("hoverlabel.bordercolor",L.bordercolor||_m.contrast(E)),R=DT.extendFlat({},L.font);R.color||(R.color=I),DT.coerceFont(a,"hoverlabel.font",R)}a("captureevents",!!k)}});var kB=he((Xxe,SB)=>{"use strict";var IT=Nt(),jd=Ii(),ace=Kl(),ice=zT(),nce=um();SB.exports=function(t,r){ace(t,r,{name:"annotations",handleItemDefaults:oce})};function oce(e,t,r){function i(N,z){return IT.coerce(e,t,nce,N,z)}var a=i("visible"),s=i("clicktoshow");if(a||s){ice(e,t,r,i);for(var l=t.showarrow,u=["x","y"],c=[-10,-30],v={_fullLayout:r},m=0;m<2;m++){var _=u[m],T=jd.coerceRef(e,t,v,_,"","paper");if(T!=="paper"){var M=jd.getFromId(v,T);M._annIndices.push(t._index)}if(jd.coercePosition(t,v,i,T,_,.5),l){var k="a"+_,L=jd.coerceRef(e,t,v,k,"pixel",["pixel","paper"]);L!=="pixel"&&L!==T&&(L=t[k]="pixel");var E=L==="pixel"?c[m]:.4;jd.coercePosition(t,v,i,L,k,E)}i(_+"anchor"),i(_+"shift")}if(IT.noneOrAll(e,t,["x","y"]),l&&IT.noneOrAll(e,t,["ax","ay"]),s){var I=i("xclick"),R=i("yclick");t._xclick=I===void 0?t.x:jd.cleanPosition(I,v,t.xref),t._yclick=R===void 0?t.y:jd.cleanPosition(R,v,t.yref)}}}});var LB=he((jxe,EB)=>{"use strict";var RT=Nt(),Jd=Ii(),sce=Tb().draw;EB.exports=function(t){var r=t._fullLayout,i=RT.filterVisible(r.annotations);if(i.length&&t._fullData.length)return RT.syncOrAsync([sce,lce],t)};function lce(e){var t=e._fullLayout;RT.filterVisible(t.annotations).forEach(function(r){var i=Jd.getFromId(e,r.xref),a=Jd.getFromId(e,r.yref),s=Jd.getRefType(r.xref),l=Jd.getRefType(r.yref);r._extremes={},s==="range"&&CB(r,i),l==="range"&&CB(r,a)})}function CB(e,t){var r=t._id,i=r.charAt(0),a=e[i],s=e["a"+i],l=e[i+"ref"],u=e["a"+i+"ref"],c=e["_"+i+"padplus"],v=e["_"+i+"padminus"],m={x:1,y:-1}[i]*e[i+"shift"],_=3*e.arrowsize*e.arrowwidth||0,T=_+m,M=_-m,k=3*e.startarrowsize*e.arrowwidth||0,L=k+m,E=k-m,I;if(u===l){var R=Jd.findExtremes(t,[t.r2c(a)],{ppadplus:T,ppadminus:M}),N=Jd.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(c,L),ppadminus:Math.max(v,E)});I={min:[R.min[0],N.min[0]],max:[R.max[0],N.max[0]]}}else L=s?L+s:L,E=s?E-s:E,I=Jd.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(c,T,L),ppadminus:Math.max(v,M,E)});e._extremes[r]=I}});var DB=he((Jxe,PB)=>{"use strict";var uce=Ia(),fce=m_();PB.exports=function(t,r,i,a){r=r||{};var s=i==="log"&&r.type==="linear",l=i==="linear"&&r.type==="log";if(!(s||l))return;var u=t._fullLayout.annotations,c=r._id.charAt(0),v,m;function _(M){var k=v[M],L=null;s?L=fce(k,r.range):L=Math.pow(10,k),uce(L)||(L=null),a(m+M,L)}for(var T=0;T<u.length;T++)v=u[T],m="annotations["+T+"].",v[c+"ref"]===r._id&&_(c),v["a"+c+"ref"]===r._id&&_("a"+c)}});var RB=he((Kxe,IB)=>{"use strict";var FT=Tb(),zB=AB();IB.exports={moduleType:"component",name:"annotations",layoutAttributes:um(),supplyLayoutDefaults:kB(),includeBasePlot:Hg()("annotations"),calcAutorange:LB(),draw:FT.draw,drawOne:FT.drawOne,drawRaw:FT.drawRaw,hasClickToShow:zB.hasClickToShow,onClick:zB.onClick,convertCoords:DB()}});var Ab=he((Qxe,FB)=>{"use strict";var Oi=um(),cce=ul().overrideAll,hce=Di().templatedArray;FB.exports=cce(hce("annotation",{visible:Oi.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:Oi.xanchor,xshift:Oi.xshift,yanchor:Oi.yanchor,yshift:Oi.yshift,text:Oi.text,textangle:Oi.textangle,font:Oi.font,width:Oi.width,height:Oi.height,opacity:Oi.opacity,align:Oi.align,valign:Oi.valign,bgcolor:Oi.bgcolor,bordercolor:Oi.bordercolor,borderpad:Oi.borderpad,borderwidth:Oi.borderwidth,showarrow:Oi.showarrow,arrowcolor:Oi.arrowcolor,arrowhead:Oi.arrowhead,startarrowhead:Oi.startarrowhead,arrowside:Oi.arrowside,arrowsize:Oi.arrowsize,startarrowsize:Oi.startarrowsize,arrowwidth:Oi.arrowwidth,standoff:Oi.standoff,startstandoff:Oi.startstandoff,hovertext:Oi.hovertext,hoverlabel:Oi.hoverlabel,captureevents:Oi.captureevents}),"calc","from-root")});var NB=he(($xe,qB)=>{"use strict";var qT=Nt(),vce=Ii(),dce=Kl(),pce=zT(),mce=Ab();qB.exports=function(t,r,i){dce(t,r,{name:"annotations",handleItemDefaults:yce,fullLayout:i.fullLayout})};function yce(e,t,r,i){function a(u,c){return qT.coerce(e,t,mce,u,c)}function s(u){var c=u+"axis",v={_fullLayout:{}};return v._fullLayout[c]=r[c],vce.coercePosition(t,v,a,u,u,.5)}var l=a("visible");l&&(pce(e,t,i.fullLayout,a),s("x"),s("y"),s("z"),qT.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",a("ax",-10),a("ay",-30),qT.noneOrAll(e,t,["ax","ay"])))}});var VB=he((ebe,UB)=>{"use strict";var BB=Nt(),OB=Ii();UB.exports=function(t){for(var r=t.fullSceneLayout,i=r.annotations,a=0;a<i.length;a++)gce(i[a],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function gce(e,t){var r=t.fullSceneLayout,i=r.domain,a=t.fullLayout._size,s={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},BB.extendFlat(e._xa,s),OB.setConvert(e._xa),e._xa._offset=a.l+i.x[0]*a.w,e._xa.l2p=function(){return .5*(1+e._pdata[0]/e._pdata[3])*a.w*(i.x[1]-i.x[0])},e._ya={},BB.extendFlat(e._ya,s),OB.setConvert(e._ya),e._ya._offset=a.t+(1-i.y[1])*a.h,e._ya.l2p=function(){return .5*(1-e._pdata[1]/e._pdata[3])*a.h*(i.y[1]-i.y[0])}}});var GB=he((tbe,HB)=>{"use strict";function NT(e,t){var r=[0,0,0,0],i,a;for(i=0;i<4;++i)for(a=0;a<4;++a)r[a]+=e[4*i+a]*t[i];return r}function _ce(e,t){var r=NT(e.projection,NT(e.view,NT(e.model,[t[0],t[1],t[2],1])));return r}HB.exports=_ce});var YB=he((rbe,ZB)=>{"use strict";var xce=Tb().drawRaw,bce=GB(),wce=["x","y","z"];ZB.exports=function(t){for(var r=t.fullSceneLayout,i=t.dataScale,a=r.annotations,s=0;s<a.length;s++){for(var l=a[s],u=!1,c=0;c<3;c++){var v=wce[c],m=l[v],_=r[v+"axis"],T=_.r2fraction(m);if(T<0||T>1){u=!0;break}}u?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(l._pdata=bce(t.glplot.cameraParams,[r.xaxis.r2l(l.x)*i[0],r.yaxis.r2l(l.y)*i[1],r.zaxis.r2l(l.z)*i[2]]),xce(t.graphDiv,l,s,t.id,l._xa,l._ya))}}});var jB=he((abe,XB)=>{"use strict";var Tce=sa(),WB=Nt();XB.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:Ab()}}},layoutAttributes:Ab(),handleDefaults:NB(),includeBasePlot:Ace,convert:VB(),draw:YB()};function Ace(e,t){var r=Tce.subplotsRegistry.gl3d;if(r)for(var i=r.attrRegex,a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];i.test(l)&&(e[l].annotations||[]).length&&(WB.pushUnique(t._basePlotModules,r),WB.pushUnique(t._subplots.gl3d,l))}}});var BT=he((nbe,$B)=>{"use strict";var JB=um(),KB=No(),QB=Pc().line,Mce=pc().dash,Wu=hn().extendFlat,Sce=Di().templatedArray,ibe=Vg(),xm=gs(),kce=Wl().shapeTexttemplateAttrs,Cce=L_();$B.exports=Sce("shape",{visible:Wu({},xm.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:Wu({},xm.legend,{editType:"calc+arraydraw"}),legendgroup:Wu({},xm.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:Wu({},xm.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:KB({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:Wu({},xm.legendrank,{editType:"calc+arraydraw"}),legendwidth:Wu({},xm.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:Wu({},JB.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:Wu({},JB.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:Wu({},QB.color,{editType:"arraydraw"}),width:Wu({},QB.width,{editType:"calc+arraydraw"}),dash:Wu({},Mce,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:kce({},{keys:Object.keys(Cce)}),font:KB({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})});var rO=he((obe,tO)=>{"use strict";var v1=Nt(),bm=Ii(),Ece=Kl(),Lce=BT(),eO=Kh();tO.exports=function(t,r){Ece(t,r,{name:"shapes",handleItemDefaults:Dce})};function Pce(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}function Dce(e,t,r){function i(Te,Ae){return v1.coerce(e,t,Lce,Te,Ae)}t._isShape=!0;var a=i("visible");if(a){var s=i("showlegend");s&&(i("legend"),i("legendwidth"),i("legendgroup"),i("legendgrouptitle.text"),v1.coerceFont(i,"legendgrouptitle.font"),i("legendrank"));var l=i("path"),u=l?"path":"rect",c=i("type",u),v=c!=="path";v&&delete t.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule");var m=i("line.width");m&&(i("line.color"),i("line.dash"));for(var _=i("xsizemode"),T=i("ysizemode"),M=["x","y"],k=0;k<2;k++){var L=M[k],E=L+"anchor",I=L==="x"?_:T,R={_fullLayout:r},N,z,B,H=bm.coerceRef(e,t,R,L,void 0,"paper"),V=bm.getRefType(H);if(V==="range"?(N=bm.getFromId(R,H),N._shapeIndices.push(t._index),B=eO.rangeToShapePosition(N),z=eO.shapePositionToRange(N),(N.type==="category"||N.type==="multicategory")&&(i(L+"0shift"),i(L+"1shift"))):z=B=v1.identity,v){var Y=.25,J=.75,re=L+"0",ne=L+"1",oe=e[re],ue=e[ne];e[re]=z(e[re],!0),e[ne]=z(e[ne],!0),I==="pixel"?(i(re,0),i(ne,10)):(bm.coercePosition(t,R,i,H,re,Y),bm.coercePosition(t,R,i,H,ne,J)),t[re]=B(t[re]),t[ne]=B(t[ne]),e[re]=oe,e[ne]=ue}if(I==="pixel"){var me=e[E];e[E]=z(e[E],!0),bm.coercePosition(t,R,i,H,E,.25),t[E]=B(t[E]),e[E]=me}}v&&v1.noneOrAll(e,t,["x0","x1","y0","y1"]);var Se=c==="line",Ce,Me;if(v&&(Ce=i("label.texttemplate")),Ce||(Me=i("label.text")),Me||Ce){i("label.textangle");var _e=i("label.textposition",Se?"middle":"middle center");i("label.xanchor"),i("label.yanchor",Pce(Se,_e)),i("label.padding"),v1.coerceFont(i,"label.font",r.font)}}}});var nO=he((sbe,iO)=>{"use strict";var zce=Ua(),aO=Nt();function Ice(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}iO.exports=function(t,r,i){i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),aO.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity");var a=i("newshape.line.width");if(a){var s=(t||{}).plot_bgcolor||"#FFF";i("newshape.line.color",zce.contrast(s)),i("newshape.line.dash")}var l=t.dragmode==="drawline",u=i("newshape.label.text"),c=i("newshape.label.texttemplate");if(u||c){i("newshape.label.textangle");var v=i("newshape.label.textposition",l?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",Ice(l,v)),i("newshape.label.padding"),aO.coerceFont(i,"newshape.label.font",r.font)}i("activeshape.fillcolor"),i("activeshape.opacity")}});var fO=he((lbe,uO)=>{"use strict";var OT=Nt(),wm=Ii(),Tm=wg(),sO=Kh();uO.exports=function(t){var r=t._fullLayout,i=OT.filterVisible(r.shapes);if(!(!i.length||!t._fullData.length))for(var a=0;a<i.length;a++){var s=i[a];s._extremes={};var l,u,c=wm.getRefType(s.xref),v=wm.getRefType(s.yref);s.xref!=="paper"&&c!=="domain"&&(l=wm.getFromId(t,s.xref),u=oO(l,s,Tm.paramIsX),u&&(s._extremes[l._id]=wm.findExtremes(l,u,Rce(s)))),s.yref!=="paper"&&v!=="domain"&&(l=wm.getFromId(t,s.yref),u=oO(l,s,Tm.paramIsY),u&&(s._extremes[l._id]=wm.findExtremes(l,u,Fce(s))))}};function Rce(e){return lO(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function Fce(e){return lO(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function lO(e,t,r,i,a,s){var l=e/2,u=s;if(t==="pixel"){var c=a?sO.extractPathCoords(a,s?Tm.paramIsY:Tm.paramIsX):[r,i],v=OT.aggNums(Math.max,null,c),m=OT.aggNums(Math.min,null,c),_=m<0?Math.abs(m)+l:l,T=v>0?v+l:l;return{ppad:l,ppadplus:u?_:T,ppadminus:u?T:_}}else return{ppad:l}}function oO(e,t,r){var i=e._id.charAt(0)==="x"?"x":"y",a=e.type==="category"||e.type==="multicategory",s,l,u=0,c=0,v=a?e.r2c:e.d2c,m=t[i+"sizemode"]==="scaled";if(m?(s=t[i+"0"],l=t[i+"1"],a&&(u=t[i+"0shift"],c=t[i+"1shift"])):(s=t[i+"anchor"],l=t[i+"anchor"]),s!==void 0)return[v(s)+u,v(l)+c];if(t.path){var _=1/0,T=-1/0,M=t.path.match(Tm.segmentRE),k,L,E,I,R;for(e.type==="date"&&(v=sO.decodeDate(v)),k=0;k<M.length;k++)L=M[k],E=r[L.charAt(0)].drawn,E!==void 0&&(I=M[k].substr(1).match(Tm.paramRE),!(!I||I.length<E)&&(R=v(I[E]),R<_&&(_=R),R>T&&(T=R)));if(T>=_)return[_,T]}}});var vO=he((ube,hO)=>{"use strict";var cO=yx();hO.exports={moduleType:"component",name:"shapes",layoutAttributes:BT(),supplyLayoutDefaults:rO(),supplyDrawNewShapeDefaults:nO(),includeBasePlot:Hg()("shapes"),calcAutorange:fO(),draw:cO.draw,drawOne:cO.drawOne}});var UT=he((cbe,pO)=>{"use strict";var dO=Mo(),qce=Di().templatedArray,fbe=Vg();pO.exports=qce("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",dO.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",dO.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})});var yO=he((hbe,mO)=>{"use strict";var Nce=Nt(),VT=Ii(),Bce=Kl(),Oce=UT(),Uce="images";mO.exports=function(t,r){var i={name:Uce,handleItemDefaults:Vce};Bce(t,r,i)};function Vce(e,t,r){function i(T,M){return Nce.coerce(e,t,Oce,T,M)}var a=i("source"),s=i("visible",!!a);if(!s)return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var l={_fullLayout:r},u=["x","y"],c=0;c<2;c++){var v=u[c],m=VT.coerceRef(e,t,l,v,"paper",void 0);if(m!=="paper"){var _=VT.getFromId(l,m);_._imgIndices.push(t._index)}VT.coercePosition(t,l,i,m,v,0)}return t}});var bO=he((vbe,xO)=>{"use strict";var gO=Ka(),Hce=_i(),Am=Ii(),_O=ro(),Gce=Bh();xO.exports=function(t){var r=t._fullLayout,i=[],a={},s=[],l,u;for(u=0;u<r.images.length;u++){var c=r.images[u];if(c.visible)if(c.layer==="below"&&c.xref!=="paper"&&c.yref!=="paper"){l=_O.ref2id(c.xref)+_O.ref2id(c.yref);var v=r._plots[l];if(!v){s.push(c);continue}v.mainplot&&(l=v.mainplot.id),a[l]||(a[l]=[]),a[l].push(c)}else c.layer==="above"?i.push(c):s.push(c)}var m={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function _(R){var N=gO.select(this);if(this._imgSrc!==R.source)if(N.attr("xmlns",Gce.svg),R.source&&R.source.slice(0,5)==="data:")N.attr("xlink:href",R.source),this._imgSrc=R.source;else{var z=new Promise(function(B){var H=new Image;this.img=H,H.setAttribute("crossOrigin","anonymous"),H.onerror=V,H.onload=function(){var Y=document.createElement("canvas");Y.width=this.width,Y.height=this.height;var J=Y.getContext("2d",{willReadFrequently:!0});J.drawImage(this,0,0);var re=Y.toDataURL("image/png");N.attr("xlink:href",re),B()},N.on("error",V),H.src=R.source,this._imgSrc=R.source;function V(){N.remove(),B()}}.bind(this));t._promises.push(z)}}function T(R){var N=gO.select(this),z=Am.getFromId(t,R.xref),B=Am.getFromId(t,R.yref),H=Am.getRefType(R.xref)==="domain",V=Am.getRefType(R.yref)==="domain",Y=r._size,J,re;z!==void 0?J=typeof R.xref=="string"&&H?z._length*R.sizex:Math.abs(z.l2p(R.sizex)-z.l2p(0)):J=R.sizex*Y.w,B!==void 0?re=typeof R.yref=="string"&&V?B._length*R.sizey:Math.abs(B.l2p(R.sizey)-B.l2p(0)):re=R.sizey*Y.h;var ne=J*m.x[R.xanchor].offset,oe=re*m.y[R.yanchor].offset,ue=m.x[R.xanchor].sizing+m.y[R.yanchor].sizing,me,Se;switch(z!==void 0?me=typeof R.xref=="string"&&H?z._length*R.x+z._offset:z.r2p(R.x)+z._offset:me=R.x*Y.w+Y.l,me+=ne,B!==void 0?Se=typeof R.yref=="string"&&V?B._length*(1-R.y)+B._offset:B.r2p(R.y)+B._offset:Se=Y.h-R.y*Y.h+Y.t,Se+=oe,R.sizing){case"fill":ue+=" slice";break;case"stretch":ue="none";break}N.attr({x:me,y:Se,width:J,height:re,preserveAspectRatio:ue,opacity:R.opacity});var Ce=z&&Am.getRefType(R.xref)!=="domain"?z._id:"",Me=B&&Am.getRefType(R.yref)!=="domain"?B._id:"",_e=Ce+Me;Hce.setClipUrl(N,_e?"clip"+r._uid+_e:null,t)}var M=r._imageLowerLayer.selectAll("image").data(s),k=r._imageUpperLayer.selectAll("image").data(i);M.enter().append("image"),k.enter().append("image"),M.exit().remove(),k.exit().remove(),M.each(function(R){_.bind(this)(R),T.bind(this)(R)}),k.each(function(R){_.bind(this)(R),T.bind(this)(R)});var L=Object.keys(r._plots);for(u=0;u<L.length;u++){l=L[u];var E=r._plots[l];if(E.imagelayer){var I=E.imagelayer.selectAll("image").data(a[l]||[]);I.enter().append("image"),I.exit().remove(),I.each(function(R){_.bind(this)(R),T.bind(this)(R)})}}}});var AO=he((dbe,TO)=>{"use strict";var wO=Ia(),Zce=m_();TO.exports=function(t,r,i,a){r=r||{};var s=i==="log"&&r.type==="linear",l=i==="linear"&&r.type==="log";if(s||l){for(var u=t._fullLayout.images,c=r._id.charAt(0),v,m,_=0;_<u.length;_++)if(v=u[_],m="images["+_+"].",v[c+"ref"]===r._id){var T=v[c],M=v["size"+c],k=null,L=null;if(s){k=Zce(T,r.range);var E=M/Math.pow(10,k)/2;L=2*Math.log(E+Math.sqrt(1+E*E))/Math.LN10}else k=Math.pow(10,T),L=k*(Math.pow(10,M/2)-Math.pow(10,-M/2));wO(k)?wO(L)||(L=null):(k=null,L=null),a(m+c,k),a(m+"size"+c,L)}}}});var SO=he((pbe,MO)=>{"use strict";MO.exports={moduleType:"component",name:"images",layoutAttributes:UT(),supplyLayoutDefaults:yO(),includeBasePlot:Hg()("images"),draw:bO(),convertCoords:AO()}});var Mb=he((mbe,kO)=>{"use strict";kO.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}});var HT=he((ybe,EO)=>{"use strict";var Yce=No(),Wce=kf(),Xce=hn().extendFlat,jce=ul().overrideAll,Jce=P_(),CO=Di().templatedArray,Kce=CO("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});EO.exports=jce(CO("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:Kce,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:Xce(Jce({editType:"arraydraw"}),{}),font:Yce({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:Wce.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")});var zO=he((gbe,DO)=>{"use strict";var Sb=Nt(),LO=Kl(),PO=HT(),Qce=Mb(),$ce=Qce.name,ehe=PO.buttons;DO.exports=function(t,r){var i={name:$ce,handleItemDefaults:the};LO(t,r,i)};function the(e,t,r){function i(l,u){return Sb.coerce(e,t,PO,l,u)}var a=LO(e,t,{name:"buttons",handleItemDefaults:rhe}),s=i("visible",a.length>0);s&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),Sb.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),Sb.coerceFont(i,"font",r.font),i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function rhe(e,t){function r(a,s){return Sb.coerce(e,t,ehe,a,s)}var i=r("visible",e.method==="skip"||Array.isArray(e.args));i&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}});var FO=he((_be,RO)=>{"use strict";RO.exports=rn;var Xu=Ka(),IO=Ua(),Mm=_i(),kb=Nt();function rn(e,t,r){this.gd=e,this.container=t,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}rn.barWidth=2;rn.barLength=20;rn.barRadius=2;rn.barPad=1;rn.barColor="#808BA4";rn.prototype.enable=function(t,r,i){var a=this.gd._fullLayout,s=a.width,l=a.height;this.position=t;var u=this.position.l,c=this.position.w,v=this.position.t,m=this.position.h,_=this.position.direction,T=_==="down",M=_==="left",k=_==="right",L=_==="up",E=c,I=m,R,N,z,B;!T&&!M&&!k&&!L&&(this.position.direction="down",T=!0);var H=T||L;H?(R=u,N=R+E,T?(z=v,B=Math.min(z+I,l),I=B-z):(B=v+I,z=Math.max(B-I,0),I=B-z)):(z=v,B=z+I,M?(N=u+E,R=Math.max(N-E,0),E=N-R):(R=u,N=Math.min(R+E,s),E=N-R)),this._box={l:R,t:z,w:E,h:I};var V=c>E,Y=rn.barLength+2*rn.barPad,J=rn.barWidth+2*rn.barPad,re=u,ne=v+m;ne+J>l&&(ne=l-J);var oe=this.container.selectAll("rect.scrollbar-horizontal").data(V?[0]:[]);oe.exit().on(".drag",null).remove(),oe.enter().append("rect").classed("scrollbar-horizontal",!0).call(IO.fill,rn.barColor),V?(this.hbar=oe.attr({rx:rn.barRadius,ry:rn.barRadius,x:re,y:ne,width:Y,height:J}),this._hbarXMin=re+Y/2,this._hbarTranslateMax=E-Y):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var ue=m>I,me=rn.barWidth+2*rn.barPad,Se=rn.barLength+2*rn.barPad,Ce=u+c,Me=v;Ce+me>s&&(Ce=s-me);var _e=this.container.selectAll("rect.scrollbar-vertical").data(ue?[0]:[]);_e.exit().on(".drag",null).remove(),_e.enter().append("rect").classed("scrollbar-vertical",!0).call(IO.fill,rn.barColor),ue?(this.vbar=_e.attr({rx:rn.barRadius,ry:rn.barRadius,x:Ce,y:Me,width:me,height:Se}),this._vbarYMin=Me+Se/2,this._vbarTranslateMax=I-Se):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Te=this.id,Ae=R-.5,Le=ue?N+me+.5:N+.5,Ke=z-.5,ct=V?B+J+.5:B+.5,it=a._topdefs.selectAll("#"+Te).data(V||ue?[0]:[]);if(it.exit().remove(),it.enter().append("clipPath").attr("id",Te).append("rect"),V||ue?(this._clipRect=it.select("rect").attr({x:Math.floor(Ae),y:Math.floor(Ke),width:Math.ceil(Le)-Math.floor(Ae),height:Math.ceil(ct)-Math.floor(Ke)}),this.container.call(Mm.setClipUrl,Te,this.gd),this.bg.attr({x:u,y:v,width:c,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Mm.setClipUrl,null),delete this._clipRect),V||ue){var ut=Xu.behavior.drag().on("dragstart",function(){Xu.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ut);var Ge=Xu.behavior.drag().on("dragstart",function(){Xu.event.sourceEvent.preventDefault(),Xu.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));V&&this.hbar.on(".drag",null).call(Ge),ue&&this.vbar.on(".drag",null).call(Ge)}this.setTranslate(r,i)};rn.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Mm.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};rn.prototype._onBoxDrag=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t-=Xu.event.dx),this.vbar&&(r-=Xu.event.dy),this.setTranslate(t,r)};rn.prototype._onBoxWheel=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t+=Xu.event.deltaY),this.vbar&&(r+=Xu.event.deltaY),this.setTranslate(t,r)};rn.prototype._onBarDrag=function(){var t=this.translateX,r=this.translateY;if(this.hbar){var i=t+this._hbarXMin,a=i+this._hbarTranslateMax,s=kb.constrain(Xu.event.x,i,a),l=(s-i)/(a-i),u=this.position.w-this._box.w;t=l*u}if(this.vbar){var c=r+this._vbarYMin,v=c+this._vbarTranslateMax,m=kb.constrain(Xu.event.y,c,v),_=(m-c)/(v-c),T=this.position.h-this._box.h;r=_*T}this.setTranslate(t,r)};rn.prototype.setTranslate=function(t,r){var i=this.position.w-this._box.w,a=this.position.h-this._box.h;if(t=kb.constrain(t||0,0,i),r=kb.constrain(r||0,0,a),this.translateX=t,this.translateY=r,this.container.call(Mm.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var s=t/i;this.hbar.call(Mm.setTranslate,t+s*this._hbarTranslateMax,r)}if(this.vbar){var l=r/a;this.vbar.call(Mm.setTranslate,t,r+l*this._vbarTranslateMax)}}});var YO=he((xbe,ZO)=>{"use strict";var Sm=Ka(),d1=jn(),p1=Ua(),km=_i(),ml=Nt(),Cb=ho(),ahe=Di().arrayEditor,NO=as().LINE_SPACING,aa=Mb(),ihe=FO();ZO.exports=function(t){var r=t._fullLayout,i=ml.filterVisible(r[aa.name]);function a(T){d1.autoMargin(t,HO(T))}var s=r._menulayer.selectAll("g."+aa.containerClassName).data(i.length>0?[0]:[]);if(s.enter().append("g").classed(aa.containerClassName,!0).style("cursor","pointer"),s.exit().each(function(){Sm.select(this).selectAll("g."+aa.headerGroupClassName).each(a)}).remove(),i.length!==0){var l=s.selectAll("g."+aa.headerGroupClassName).data(i,nhe);l.enter().append("g").classed(aa.headerGroupClassName,!0);for(var u=ml.ensureSingle(s,"g",aa.dropdownButtonGroupClassName,function(T){T.style("pointer-events","all")}),c=0;c<i.length;c++){var v=i[c];che(t,v)}var m="updatemenus"+r._uid,_=new ihe(t,u,m);l.enter().size()&&(u.node().parentNode.appendChild(u.node()),u.call(ZT)),l.exit().each(function(T){u.call(ZT),a(T)}).remove(),l.each(function(T){var M=Sm.select(this),k=T.type==="dropdown"?u:null;d1.manageCommandObserver(t,T,T.buttons,function(L){GT(t,T,T.buttons[L.index],M,k,_,L.index,!0)}),T.type==="dropdown"?(OO(t,M,u,_,T),BO(u,T)&&m1(t,M,u,_,T)):m1(t,M,null,null,T)})}};function nhe(e){return e._index}function ohe(e){return+e.attr(aa.menuIndexAttrName)==-1}function BO(e,t){return+e.attr(aa.menuIndexAttrName)===t._index}function GT(e,t,r,i,a,s,l,u){t.active=l,ahe(e.layout,aa.name,t).applyUpdate("active",l),t.type==="buttons"?m1(e,i,null,null,t):t.type==="dropdown"&&(a.attr(aa.menuIndexAttrName,"-1"),OO(e,i,a,s,t),u||m1(e,i,a,s,t))}function OO(e,t,r,i,a){var s=ml.ensureSingle(t,"g",aa.headerClassName,function(T){T.style("pointer-events","all")}),l=a._dims,u=a.active,c=a.buttons[u]||aa.blankHeaderOpts,v={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},m={width:l.headerWidth,height:l.headerHeight};s.call(YT,a,c,e).call(GO,a,v,m);var _=ml.ensureSingle(t,"text",aa.headerArrowClassName,function(T){T.attr("text-anchor","end").call(km.font,a.font).text(aa.arrowSymbol[a.direction])});_.attr({x:l.headerWidth-aa.arrowOffsetX+a.pad.l,y:l.headerHeight/2+aa.textOffsetY+a.pad.t}),s.on("click",function(){r.call(ZT,String(BO(r,a)?-1:a._index)),m1(e,t,r,i,a)}),s.on("mouseover",function(){s.call(UO)}),s.on("mouseout",function(){s.call(VO,a)}),km.setTranslate(t,l.lx,l.ly)}function m1(e,t,r,i,a){r||(r=t,r.attr("pointer-events","all"));var s=!ohe(r)||a.type==="buttons"?a.buttons:[],l=a.type==="dropdown"?aa.dropdownButtonClassName:aa.buttonClassName,u=r.selectAll("g."+l).data(ml.filterVisible(s)),c=u.enter().append("g").classed(l,!0),v=u.exit();a.type==="dropdown"?(c.attr("opacity","0").transition().attr("opacity","1"),v.transition().attr("opacity","0").remove()):v.remove();var m=0,_=0,T=a._dims,M=["up","down"].indexOf(a.direction)!==-1;a.type==="dropdown"&&(M?_=T.headerHeight+aa.gapButtonHeader:m=T.headerWidth+aa.gapButtonHeader),a.type==="dropdown"&&a.direction==="up"&&(_=-aa.gapButtonHeader+aa.gapButton-T.openHeight),a.type==="dropdown"&&a.direction==="left"&&(m=-aa.gapButtonHeader+aa.gapButton-T.openWidth);var k={x:T.lx+m+a.pad.l,y:T.ly+_+a.pad.t,yPad:aa.gapButton,xPad:aa.gapButton,index:0},L={l:k.x+a.borderwidth,t:k.y+a.borderwidth};u.each(function(E,I){var R=Sm.select(this);R.call(YT,a,E,e).call(GO,a,k),R.on("click",function(){Sm.event.defaultPrevented||(E.execute&&(E.args2&&a.active===I?(GT(e,a,E,t,r,i,-1),d1.executeAPICommand(e,E.method,E.args2)):(GT(e,a,E,t,r,i,I),d1.executeAPICommand(e,E.method,E.args))),e.emit("plotly_buttonclicked",{menu:a,button:E,active:a.active}))}),R.on("mouseover",function(){R.call(UO)}),R.on("mouseout",function(){R.call(VO,a),u.call(qO,a)})}),u.call(qO,a),M?(L.w=Math.max(T.openWidth,T.headerWidth),L.h=k.y-L.t):(L.w=k.x-L.l,L.h=Math.max(T.openHeight,T.headerHeight)),L.direction=a.direction,i&&(u.size()?she(e,t,r,i,a,L):lhe(i))}function she(e,t,r,i,a,s){var l=a.direction,u=l==="up"||l==="down",c=a._dims,v=a.active,m,_,T;if(u)for(_=0,T=0;T<v;T++)_+=c.heights[T]+aa.gapButton;else for(m=0,T=0;T<v;T++)m+=c.widths[T]+aa.gapButton;i.enable(s,m,_),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1"),i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}function lhe(e){var t=!!e.hbar,r=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,r||e.disable()}),r&&e.vbar.transition().attr("opacity","0").each("end",function(){r=!1,t||e.disable()})}function YT(e,t,r,i){e.call(uhe,t).call(fhe,t,r,i)}function uhe(e,t){var r=ml.ensureSingle(e,"rect",aa.itemRectClassName,function(i){i.attr({rx:aa.rx,ry:aa.ry,"shape-rendering":"crispEdges"})});r.call(p1.stroke,t.bordercolor).call(p1.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function fhe(e,t,r,i){var a=ml.ensureSingle(e,"text",aa.itemTextClassName,function(u){u.attr({"text-anchor":"start","data-notex":1})}),s=r.label,l=i._fullLayout._meta;l&&(s=ml.templateString(s,l)),a.call(km.font,t.font).text(s).call(Cb.convertToTspans,i)}function qO(e,t){var r=t.active;e.each(function(i,a){var s=Sm.select(this);a===r&&t.showactive&&s.select("rect."+aa.itemRectClassName).call(p1.fill,aa.activeColor)})}function UO(e){e.select("rect."+aa.itemRectClassName).call(p1.fill,aa.hoverColor)}function VO(e,t){e.select("rect."+aa.itemRectClassName).call(p1.fill,t.bgcolor)}function che(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=km.tester.selectAll("g."+aa.dropdownButtonClassName).data(ml.filterVisible(t.buttons));i.enter().append("g").classed(aa.dropdownButtonClassName,!0);var a=["up","down"].indexOf(t.direction)!==-1;i.each(function(m,_){var T=Sm.select(this);T.call(YT,t,m,e);var M=T.select("."+aa.itemTextClassName),k=M.node()&&km.bBox(M.node()).width,L=Math.max(k+aa.textPadX,aa.minWidth),E=t.font.size*NO,I=Cb.lineCount(M),R=Math.max(E*I,aa.minHeight)+aa.textOffsetY;R=Math.ceil(R),L=Math.ceil(L),r.widths[_]=L,r.heights[_]=R,r.height1=Math.max(r.height1,R),r.width1=Math.max(r.width1,L),a?(r.totalWidth=Math.max(r.totalWidth,L),r.openWidth=r.totalWidth,r.totalHeight+=R+aa.gapButton,r.openHeight+=R+aa.gapButton):(r.totalWidth+=L+aa.gapButton,r.openWidth+=L+aa.gapButton,r.totalHeight=Math.max(r.totalHeight,R),r.openHeight=r.totalHeight)}),a?r.totalHeight-=aa.gapButton:r.totalWidth-=aa.gapButton,r.headerWidth=r.width1+aa.arrowPadX,r.headerHeight=r.height1,t.type==="dropdown"&&(a?(r.width1+=aa.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=aa.arrowPadX),i.remove();var s=r.totalWidth+t.pad.l+t.pad.r,l=r.totalHeight+t.pad.t+t.pad.b,u=e._fullLayout._size;r.lx=u.l+u.w*t.x,r.ly=u.t+u.h*(1-t.y);var c="left";ml.isRightAnchor(t)&&(r.lx-=s,c="right"),ml.isCenterAnchor(t)&&(r.lx-=s/2,c="center");var v="top";ml.isBottomAnchor(t)&&(r.ly-=l,v="bottom"),ml.isMiddleAnchor(t)&&(r.ly-=l/2,v="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),d1.autoMargin(e,HO(t),{x:t.x,y:t.y,l:s*({right:1,center:.5}[c]||0),r:s*({left:1,center:.5}[c]||0),b:l*({top:1,middle:.5}[v]||0),t:l*({bottom:1,middle:.5}[v]||0)})}function HO(e){return aa.autoMarginIdRoot+e._index}function GO(e,t,r,i){i=i||{};var a=e.select("."+aa.itemRectClassName),s=e.select("."+aa.itemTextClassName),l=t.borderwidth,u=r.index,c=t._dims;km.setTranslate(e,l+r.x,l+r.y);var v=["up","down"].indexOf(t.direction)!==-1,m=i.height||(v?c.heights[u]:c.height1);a.attr({x:0,y:0,width:i.width||(v?c.width1:c.widths[u]),height:m});var _=t.font.size*NO,T=Cb.lineCount(s),M=(T-1)*_/2;Cb.positionText(s,aa.textOffsetX,m/2-M+aa.textOffsetY),v?r.y+=c.heights[u]+r.yPad:r.x+=c.widths[u]+r.xPad,r.index++}function ZT(e,t){e.attr(aa.menuIndexAttrName,t||"-1").selectAll("g."+aa.dropdownButtonClassName).remove()}});var XO=he((bbe,WO)=>{"use strict";var hhe=Mb();WO.exports={moduleType:"component",name:hhe.name,layoutAttributes:HT(),supplyLayoutDefaults:zO(),draw:YO()}});var y1=he((wbe,jO)=>{"use strict";jO.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}});var WT=he((Tbe,QO)=>{"use strict";var JO=No(),vhe=P_(),dhe=hn().extendDeepAll,phe=ul().overrideAll,mhe=Gy(),KO=Di().templatedArray,Kd=y1(),yhe=KO("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});QO.exports=phe(KO("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:yhe,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:dhe(vhe({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:mhe.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:JO({})},font:JO({}),activebgcolor:{valType:"color",dflt:Kd.gripBgActiveColor},bgcolor:{valType:"color",dflt:Kd.railBgColor},bordercolor:{valType:"color",dflt:Kd.railBorderColor},borderwidth:{valType:"number",min:0,dflt:Kd.railBorderWidth},ticklen:{valType:"number",min:0,dflt:Kd.tickLength},tickcolor:{valType:"color",dflt:Kd.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:Kd.minorTickLength}}),"arraydraw","from-root")});var rU=he((Abe,tU)=>{"use strict";var Cm=Nt(),$O=Kl(),eU=WT(),ghe=y1(),_he=ghe.name,xhe=eU.steps;tU.exports=function(t,r){$O(t,r,{name:_he,handleItemDefaults:bhe})};function bhe(e,t,r){function i(_,T){return Cm.coerce(e,t,eU,_,T)}for(var a=$O(e,t,{name:"steps",handleItemDefaults:whe}),s=0,l=0;l<a.length;l++)a[l].visible&&s++;var u;if(s<2?u=t.visible=!1:u=i("visible"),!!u){t._stepCount=s;var c=t._visibleSteps=Cm.filterVisible(a),v=i("active");(a[v]||{}).visible||(t.active=c[0]._index),i("x"),i("y"),Cm.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),Cm.coerceFont(i,"font",r.font);var m=i("currentvalue.visible");m&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),Cm.coerceFont(i,"currentvalue.font",t.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function whe(e,t){function r(s,l){return Cm.coerce(e,t,xhe,s,l)}var i;if(e.method!=="skip"&&!Array.isArray(e.args)?i=t.visible=!1:i=r("visible"),i){r("method"),r("args");var a=r("label","step-"+t._index);r("value",a),r("execute")}}});var hU=he((Mbe,cU)=>{"use strict";var ju=Ka(),Eb=jn(),ov=Ua(),Ju=_i(),yl=Nt(),The=yl.strTranslate,g1=ho(),Ahe=Di().arrayEditor,wa=y1(),JT=as(),nU=JT.LINE_SPACING,XT=JT.FROM_TL,jT=JT.FROM_BR;cU.exports=function(t){var r=t._context.staticPlot,i=t._fullLayout,a=Mhe(i,t),s=i._infolayer.selectAll("g."+wa.containerClassName).data(a.length>0?[0]:[]);s.enter().append("g").classed(wa.containerClassName,!0).style("cursor",r?null:"ew-resize");function l(m){m._commandObserver&&(m._commandObserver.remove(),delete m._commandObserver),Eb.autoMargin(t,oU(m))}if(s.exit().each(function(){ju.select(this).selectAll("g."+wa.groupClassName).each(l)}).remove(),a.length!==0){var u=s.selectAll("g."+wa.groupClassName).data(a,She);u.enter().append("g").classed(wa.groupClassName,!0),u.exit().each(l).remove();for(var c=0;c<a.length;c++){var v=a[c];khe(t,v)}u.each(function(m){var _=ju.select(this);Dhe(m),Eb.manageCommandObserver(t,m,m._visibleSteps,function(T){var M=_.data()[0];M.active!==T.index&&(M._dragging||lU(t,_,M,T.index,!1,!0))}),Che(t,ju.select(this),m)})}};function oU(e){return wa.autoMarginIdRoot+e._index}function Mhe(e,t){for(var r=e[wa.name],i=[],a=0;a<r.length;a++){var s=r[a];s.visible&&(s._gd=t,i.push(s))}return i}function She(e){return e._index}function khe(e,t){var r=Ju.tester.selectAll("g."+wa.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(wa.labelGroupClass,!0);var i=0,a=0;r.each(function(k){var L=ju.select(this),E=sU(L,{step:k},t),I=E.node();if(I){var R=Ju.bBox(I);a=Math.max(a,R.height),i=Math.max(i,R.width)}}),r.remove();var s=t._dims={};s.inputAreaWidth=Math.max(wa.railWidth,wa.gripHeight);var l=e._fullLayout._size;s.lx=l.l+l.w*t.x,s.ly=l.t+l.h*(1-t.y),t.lenmode==="fraction"?s.outerLength=Math.round(l.w*t.len):s.outerLength=t.len,s.inputAreaStart=0,s.inputAreaLength=Math.round(s.outerLength-t.pad.l-t.pad.r);var u=s.inputAreaLength-2*wa.stepInset,c=u/(t._stepCount-1),v=i+wa.labelPadding;if(s.labelStride=Math.max(1,Math.ceil(v/c)),s.labelHeight=a,s.currentValueMaxWidth=0,s.currentValueHeight=0,s.currentValueTotalHeight=0,s.currentValueMaxLines=1,t.currentvalue.visible){var m=Ju.tester.append("g");r.each(function(k){var L=Lb(m,t,k.label),E=L.node()&&Ju.bBox(L.node())||{width:0,height:0},I=g1.lineCount(L);s.currentValueMaxWidth=Math.max(s.currentValueMaxWidth,Math.ceil(E.width)),s.currentValueHeight=Math.max(s.currentValueHeight,Math.ceil(E.height)),s.currentValueMaxLines=Math.max(s.currentValueMaxLines,I)}),s.currentValueTotalHeight=s.currentValueHeight+t.currentvalue.offset,m.remove()}s.height=s.currentValueTotalHeight+wa.tickOffset+t.ticklen+wa.labelOffset+s.labelHeight+t.pad.t+t.pad.b;var _="left";yl.isRightAnchor(t)&&(s.lx-=s.outerLength,_="right"),yl.isCenterAnchor(t)&&(s.lx-=s.outerLength/2,_="center");var T="top";yl.isBottomAnchor(t)&&(s.ly-=s.height,T="bottom"),yl.isMiddleAnchor(t)&&(s.ly-=s.height/2,T="middle"),s.outerLength=Math.ceil(s.outerLength),s.height=Math.ceil(s.height),s.lx=Math.round(s.lx),s.ly=Math.round(s.ly);var M={y:t.y,b:s.height*jT[T],t:s.height*XT[T]};t.lenmode==="fraction"?(M.l=0,M.xl=t.x-t.len*XT[_],M.r=0,M.xr=t.x+t.len*jT[_]):(M.x=t.x,M.l=s.outerLength*XT[_],M.r=s.outerLength*jT[_]),Eb.autoMargin(e,oU(t),M)}function Che(e,t,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),t.call(Lb,r).call(Ihe,r).call(Lhe,r).call(Phe,r).call(zhe,e,r).call(Ehe,e,r);var i=r._dims;Ju.setTranslate(t,i.lx+r.pad.l,i.ly+r.pad.t),t.call(fU,r,!1),t.call(Lb,r)}function Lb(e,t,r){if(t.currentvalue.visible){var i=t._dims,a,s;switch(t.currentvalue.xanchor){case"right":a=i.inputAreaLength-wa.currentValueInset-i.currentValueMaxWidth,s="left";break;case"center":a=i.inputAreaLength*.5,s="middle";break;default:a=wa.currentValueInset,s="left"}var l=yl.ensureSingle(e,"text",wa.labelClass,function(T){T.attr({"text-anchor":s,"data-notex":1})}),u=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r=="string")u+=r;else{var c=t.steps[t.active].label,v=t._gd._fullLayout._meta;v&&(c=yl.templateString(c,v)),u+=c}t.currentvalue.suffix&&(u+=t.currentvalue.suffix),l.call(Ju.font,t.currentvalue.font).text(u).call(g1.convertToTspans,t._gd);var m=g1.lineCount(l),_=(i.currentValueMaxLines+1-m)*t.currentvalue.font.size*nU;return g1.positionText(l,a,_),l}}function Ehe(e,t,r){var i=yl.ensureSingle(e,"rect",wa.gripRectClass,function(a){a.call(uU,t,e,r).style("pointer-events","all")});i.attr({width:wa.gripWidth,height:wa.gripHeight,rx:wa.gripRadius,ry:wa.gripRadius}).call(ov.stroke,r.bordercolor).call(ov.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function sU(e,t,r){var i=yl.ensureSingle(e,"text",wa.labelClass,function(l){l.attr({"text-anchor":"middle","data-notex":1})}),a=t.step.label,s=r._gd._fullLayout._meta;return s&&(a=yl.templateString(a,s)),i.call(Ju.font,r.font).text(a).call(g1.convertToTspans,r._gd),i}function Lhe(e,t){var r=yl.ensureSingle(e,"g",wa.labelsClass),i=t._dims,a=r.selectAll("g."+wa.labelGroupClass).data(i.labelSteps);a.enter().append("g").classed(wa.labelGroupClass,!0),a.exit().remove(),a.each(function(s){var l=ju.select(this);l.call(sU,s,t),Ju.setTranslate(l,KT(t,s.fraction),wa.tickOffset+t.ticklen+t.font.size*nU+wa.labelOffset+i.currentValueTotalHeight)})}function aU(e,t,r,i,a){var s=Math.round(i*(r._stepCount-1)),l=r._visibleSteps[s]._index;l!==r.active&&lU(e,t,r,l,!0,a)}function lU(e,t,r,i,a,s){var l=r.active;r.active=i,Ahe(e.layout,wa.name,r).applyUpdate("active",i);var u=r.steps[r.active];t.call(fU,r,s),t.call(Lb,r),e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:a,previousActive:l}),u&&u.method&&a&&(t._nextMethod?(t._nextMethod.step=u,t._nextMethod.doCallback=a,t._nextMethod.doTransition=s):(t._nextMethod={step:u,doCallback:a,doTransition:s},t._nextMethodRaf=window.requestAnimationFrame(function(){var c=t._nextMethod.step;c.method&&(c.execute&&Eb.executeAPICommand(e,c.method,c.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function uU(e,t,r){if(t._context.staticPlot)return;var i=r.node(),a=ju.select(t);function s(){return r.data()[0]}function l(){var u=s();t.emit("plotly_sliderstart",{slider:u});var c=r.select("."+wa.gripRectClass);ju.event.stopPropagation(),ju.event.preventDefault(),c.call(ov.fill,u.activebgcolor);var v=iU(u,ju.mouse(i)[0]);aU(t,r,u,v,!0),u._dragging=!0;function m(){var T=s(),M=iU(T,ju.mouse(i)[0]);aU(t,r,T,M,!1)}a.on("mousemove",m),a.on("touchmove",m);function _(){var T=s();T._dragging=!1,c.call(ov.fill,T.bgcolor),a.on("mouseup",null),a.on("mousemove",null),a.on("touchend",null),a.on("touchmove",null),t.emit("plotly_sliderend",{slider:T,step:T.steps[T.active]})}a.on("mouseup",_),a.on("touchend",_)}e.on("mousedown",l),e.on("touchstart",l)}function Phe(e,t){var r=e.selectAll("rect."+wa.tickRectClass).data(t._visibleSteps),i=t._dims;r.enter().append("rect").classed(wa.tickRectClass,!0),r.exit().remove(),r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(a,s){var l=s%i.labelStride===0,u=ju.select(this);u.attr({height:l?t.ticklen:t.minorticklen}).call(ov.fill,t.tickcolor),Ju.setTranslate(u,KT(t,s/(t._stepCount-1))-.5*t.tickwidth,(l?wa.tickOffset:wa.minorTickOffset)+i.currentValueTotalHeight)})}function Dhe(e){var t=e._dims;t.labelSteps=[];for(var r=e._stepCount,i=0;i<r;i+=t.labelStride)t.labelSteps.push({fraction:i/(r-1),step:e._visibleSteps[i]})}function fU(e,t,r){for(var i=e.select("rect."+wa.gripRectClass),a=0,s=0;s<t._stepCount;s++)if(t._visibleSteps[s]._index===t.active){a=s;break}var l=KT(t,a/(t._stepCount-1));if(!t._invokingCommand){var u=i;r&&t.transition.duration>0&&(u=u.transition().duration(t.transition.duration).ease(t.transition.easing)),u.attr("transform",The(l-wa.gripWidth*.5,t._dims.currentValueTotalHeight))}}function KT(e,t){var r=e._dims;return r.inputAreaStart+wa.stepInset+(r.inputAreaLength-2*wa.stepInset)*Math.min(1,Math.max(0,t))}function iU(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-wa.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*wa.stepInset-2*r.inputAreaStart)))}function zhe(e,t,r){var i=r._dims,a=yl.ensureSingle(e,"rect",wa.railTouchRectClass,function(s){s.call(uU,t,e,r).style("pointer-events","all")});a.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,wa.tickOffset+r.ticklen+i.labelHeight)}).call(ov.fill,r.bgcolor).attr("opacity",0),Ju.setTranslate(a,0,i.currentValueTotalHeight)}function Ihe(e,t){var r=t._dims,i=r.inputAreaLength-wa.railInset*2,a=yl.ensureSingle(e,"rect",wa.railRectClass);a.attr({width:i,height:wa.railWidth,rx:wa.railRadius,ry:wa.railRadius,"shape-rendering":"crispEdges"}).call(ov.stroke,t.bordercolor).call(ov.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),Ju.setTranslate(a,wa.railInset,(r.inputAreaWidth-wa.railWidth)*.5+r.currentValueTotalHeight)}});var dU=he((Sbe,vU)=>{"use strict";var Rhe=y1();vU.exports={moduleType:"component",name:Rhe.name,layoutAttributes:WT(),supplyLayoutDefaults:rU(),draw:hU()}});var Pb=he((kbe,mU)=>{"use strict";var pU=kf();mU.exports={bgcolor:{valType:"color",dflt:pU.background,editType:"plot"},bordercolor:{valType:"color",dflt:pU.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}});var QT=he((Cbe,yU)=>{"use strict";yU.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}});var Db=he((Ebe,gU)=>{"use strict";gU.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}});var bU=he(Ib=>{"use strict";var Fhe=ro(),qhe=ho(),_U=Db(),Nhe=as().LINE_SPACING,zb=_U.name;function xU(e){var t=e&&e[zb];return t&&t.visible}Ib.isVisible=xU;Ib.makeData=function(e){var t=Fhe.list({_fullLayout:e},"x",!0),r=e.margin,i=[];if(!e._has("gl2d"))for(var a=0;a<t.length;a++){var s=t[a];if(xU(s)){i.push(s);var l=s[zb];l._id=zb+s._id,l._height=(e.height-r.b-r.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}e._rangeSliderData=i};Ib.autoMarginOpts=function(e,t){var r=e._fullLayout,i=t[zb],a=t._id.charAt(0),s=0,l=0;if(t.side==="bottom"&&(s=t._depth,t.title.text!==r._dfltTitle[a])){l=1.5*t.title.font.size+10+i._offsetShift;var u=(t.title.text.match(qhe.BR_TAG_ALL)||[]).length;l+=u*t.title.font.size*Nhe}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:i._height+s+Math.max(r.margin.b,l),pad:_U.extraPad+i._offsetShift*2}}});var MU=he((Pbe,AU)=>{"use strict";var Rb=Nt(),wU=Di(),TU=ro(),Bhe=Pb(),Ohe=QT();AU.exports=function(t,r,i){var a=t[i],s=r[i];if(!(a.rangeslider||r._requestRangeslider[s._id]))return;Rb.isPlainObject(a.rangeslider)||(a.rangeslider={});var l=a.rangeslider,u=wU.newContainer(s,"rangeslider");function c(B,H){return Rb.coerce(l,u,Bhe,B,H)}var v,m;function _(B,H){return Rb.coerce(v,m,Ohe,B,H)}var T=c("visible");if(T){c("bgcolor",r.plot_bgcolor),c("bordercolor"),c("borderwidth"),c("thickness"),c("autorange",!s.isValidRange(l.range)),c("range");var M=r._subplots;if(M)for(var k=M.cartesian.filter(function(B){return B.substr(0,B.indexOf("y"))===TU.name2id(i)}).map(function(B){return B.substr(B.indexOf("y"),B.length)}),L=Rb.simpleMap(k,TU.id2name),E=0;E<L.length;E++){var I=L[E];v=l[I]||{},m=wU.newContainer(u,I,"yaxis");var R=r[I],N;v.range&&R.isValidRange(v.range)&&(N="fixed");var z=_("rangemode",N);z!=="match"&&_("range",R.range.slice())}u._input=l}}});var kU=he((Dbe,SU)=>{"use strict";var Uhe=ro().list,Vhe=cg().getAutoRange,Hhe=Db();SU.exports=function(t){for(var r=Uhe(t,"x",!0),i=0;i<r.length;i++){var a=r[i],s=a[Hhe.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=Vhe(t,a))}}});var PU=he((zbe,LU)=>{"use strict";var Fb=Ka(),Ghe=sa(),Zhe=jn(),mn=Nt(),qb=mn.strTranslate,EU=_i(),sv=Ua(),Yhe=ug(),Whe=ST(),$T=ro(),Xhe=$l(),jhe=Yh(),Ra=Db();LU.exports=function(e){for(var t=e._fullLayout,r=t._rangeSliderData,i=0;i<r.length;i++){var a=r[i][Ra.name];a._clipId=a._id+"-"+t._uid}function s(u){return u._name}var l=t._infolayer.selectAll("g."+Ra.containerClassName).data(r,s);l.exit().each(function(u){var c=u[Ra.name];t._topdefs.select("#"+c._clipId).remove()}).remove(),r.length!==0&&(l.enter().append("g").classed(Ra.containerClassName,!0).attr("pointer-events","all"),l.each(function(u){var c=Fb.select(this),v=u[Ra.name],m=t[$T.id2name(u.anchor)],_=v[$T.id2name(u.anchor)];if(v.range){var T=mn.simpleMap(v.range,u.r2l),M=mn.simpleMap(u.range,u.r2l),k;M[0]<M[1]?k=[Math.min(T[0],M[0]),Math.max(T[1],M[1])]:k=[Math.max(T[0],M[0]),Math.min(T[1],M[1])],v.range=v._input.range=mn.simpleMap(k,u.l2r)}u.cleanRange("rangeslider.range");var L=t._size,E=u.domain;v._width=L.w*(E[1]-E[0]);var I=Math.round(L.l+L.w*E[0]),R=Math.round(L.t+L.h*(1-u._counterDomainMin)+(u.side==="bottom"?u._depth:0)+v._offsetShift+Ra.extraPad);c.attr("transform",qb(I,R)),v._rl=mn.simpleMap(v.range,u.r2l);var N=v._rl[0],z=v._rl[1],B=z-N;if(v.p2d=function(Se){return Se/v._width*B+N},v.d2p=function(Se){return(Se-N)/B*v._width},u.rangebreaks){var H=u.locateBreaks(N,z);if(H.length){var V,Y,J=0;for(V=0;V<H.length;V++)Y=H[V],J+=Y.max-Y.min;var re=v._width/(z-N-J),ne=[-re*N];for(V=0;V<H.length;V++)Y=H[V],ne.push(ne[ne.length-1]-re*(Y.max-Y.min));for(v.d2p=function(Se){for(var Ce=ne[0],Me=0;Me<H.length;Me++){var _e=H[Me];if(Se>=_e.max)Ce=ne[Me+1];else if(Se<_e.min)break}return Ce+re*Se},V=0;V<H.length;V++)Y=H[V],Y.pmin=v.d2p(Y.min),Y.pmax=v.d2p(Y.max);v.p2d=function(Se){for(var Ce=ne[0],Me=0;Me<H.length;Me++){var _e=H[Me];if(Se>=_e.pmax)Ce=ne[Me+1];else if(Se<_e.pmin)break}return(Se-Ce)/re}}}if(_.rangemode!=="match"){var oe=m.r2l(_.range[0]),ue=m.r2l(_.range[1]),me=ue-oe;v.d2pOppAxis=function(Se){return(Se-oe)/me*v._height}}c.call($he,e,u,v).call(eve,e,u,v).call(tve,e,u,v).call(ave,e,u,v,_).call(ive,e,u,v).call(nve,e,u,v),Jhe(c,e,u,v),Qhe(c,e,u,v,m,_),u.side==="bottom"&&Yhe.draw(e,u._id+"title",{propContainer:u,propName:u._name+".title",placeholder:t._dfltTitle.x,attributes:{x:u._offset+u._length/2,y:R+v._height+v._offsetShift+10+1.5*u.title.font.size,"text-anchor":"middle"}})}))};function CU(e){return typeof e.clientX=="number"?e.clientX:e.touches&&e.touches.length>0?e.touches[0].clientX:0}function Jhe(e,t,r,i){if(t._context.staticPlot)return;var a=e.select("rect."+Ra.slideBoxClassName).node(),s=e.select("rect."+Ra.grabAreaMinClassName).node(),l=e.select("rect."+Ra.grabAreaMaxClassName).node();function u(){var c=Fb.event,v=c.target,m=CU(c),_=m-e.node().getBoundingClientRect().left,T=i.d2p(r._rl[0]),M=i.d2p(r._rl[1]),k=Xhe.coverSlip();this.addEventListener("touchmove",L),this.addEventListener("touchend",E),k.addEventListener("mousemove",L),k.addEventListener("mouseup",E);function L(I){var R=CU(I),N=+R-m,z,B,H;switch(v){case a:if(H="ew-resize",T+N>r._length||M+N<0)return;z=T+N,B=M+N;break;case s:if(H="col-resize",T+N>r._length)return;z=T+N,B=M;break;case l:if(H="col-resize",M+N<0)return;z=T,B=M+N;break;default:H="ew-resize",z=_,B=_+N;break}if(B<z){var V=B;B=z,z=V}i._pixelMin=z,i._pixelMax=B,jhe(Fb.select(k),H),Khe(e,t,r,i)}function E(){k.removeEventListener("mousemove",L),k.removeEventListener("mouseup",E),this.removeEventListener("touchmove",L),this.removeEventListener("touchend",E),mn.removeElement(k)}}e.on("mousedown",u),e.on("touchstart",u)}function Khe(e,t,r,i){function a(u){return r.l2r(mn.constrain(u,i._rl[0],i._rl[1]))}var s=a(i.p2d(i._pixelMin)),l=a(i.p2d(i._pixelMax));window.requestAnimationFrame(function(){Ghe.call("_guiRelayout",t,r._name+".range",[s,l])})}function Qhe(e,t,r,i,a,s){var l=Ra.handleWidth/2;function u(I){return mn.constrain(I,0,i._width)}function c(I){return mn.constrain(I,0,i._height)}function v(I){return mn.constrain(I,-l,i._width+l)}var m=u(i.d2p(r._rl[0])),_=u(i.d2p(r._rl[1]));if(e.select("rect."+Ra.slideBoxClassName).attr("x",m).attr("width",_-m),e.select("rect."+Ra.maskMinClassName).attr("width",m),e.select("rect."+Ra.maskMaxClassName).attr("x",_).attr("width",i._width-_),s.rangemode!=="match"){var T=i._height-c(i.d2pOppAxis(a._rl[1])),M=i._height-c(i.d2pOppAxis(a._rl[0]));e.select("rect."+Ra.maskMinOppAxisClassName).attr("x",m).attr("height",T).attr("width",_-m),e.select("rect."+Ra.maskMaxOppAxisClassName).attr("x",m).attr("y",M).attr("height",i._height-M).attr("width",_-m),e.select("rect."+Ra.slideBoxClassName).attr("y",T).attr("height",M-T)}var k=.5,L=Math.round(v(m-l))-k,E=Math.round(v(_-l))+k;e.select("g."+Ra.grabberMinClassName).attr("transform",qb(L,k)),e.select("g."+Ra.grabberMaxClassName).attr("transform",qb(E,k))}function $he(e,t,r,i){var a=mn.ensureSingle(e,"rect",Ra.bgClassName,function(c){c.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),s=i.borderwidth%2===0?i.borderwidth:i.borderwidth-1,l=-i._offsetShift,u=EU.crispRound(t,i.borderwidth);a.attr({width:i._width+s,height:i._height+s,transform:qb(l,l),"stroke-width":u}).call(sv.stroke,i.bordercolor).call(sv.fill,i.bgcolor)}function eve(e,t,r,i){var a=t._fullLayout,s=mn.ensureSingleById(a._topdefs,"clipPath",i._clipId,function(l){l.append("rect").attr({x:0,y:0})});s.select("rect").attr({width:i._width,height:i._height})}function tve(e,t,r,i){var a=t.calcdata,s=e.selectAll("g."+Ra.rangePlotClassName).data(r._subplotsWith,mn.identity);s.enter().append("g").attr("class",function(u){return Ra.rangePlotClassName+" "+u}).call(EU.setClipUrl,i._clipId,t),s.order(),s.exit().remove();var l;s.each(function(u,c){var v=Fb.select(this),m=c===0,_=$T.getFromId(t,u,"y"),T=_._name,M=i[T],k={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:i.range.slice(),calendar:r.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};r.rangebreaks&&(k.layout.xaxis.rangebreaks=r.rangebreaks),k.layout[T]={type:_.type,domain:[0,1],range:M.rangemode!=="match"?M.range.slice():_.range.slice(),calendar:_.calendar},_.rangebreaks&&(k.layout[T].rangebreaks=_.rangebreaks),Zhe.supplyDefaults(k);var L=k._fullLayout.xaxis,E=k._fullLayout[T];L.clearCalc(),L.setScale(),E.clearCalc(),E.setScale();var I={id:u,plotgroup:v,xaxis:L,yaxis:E,isRangePlot:!0};m?l=I:(I.mainplot="xy",I.mainplotinfo=l),Whe.rangePlot(t,I,rve(a,u))})}function rve(e,t){for(var r=[],i=0;i<e.length;i++){var a=e[i],s=a[0].trace;s.xaxis+s.yaxis===t&&r.push(a)}return r}function ave(e,t,r,i,a){var s=mn.ensureSingle(e,"rect",Ra.maskMinClassName,function(v){v.attr({x:0,y:0,"shape-rendering":"crispEdges"})});s.attr("height",i._height).call(sv.fill,Ra.maskColor);var l=mn.ensureSingle(e,"rect",Ra.maskMaxClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});if(l.attr("height",i._height).call(sv.fill,Ra.maskColor),a.rangemode!=="match"){var u=mn.ensureSingle(e,"rect",Ra.maskMinOppAxisClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});u.attr("width",i._width).call(sv.fill,Ra.maskOppAxisColor);var c=mn.ensureSingle(e,"rect",Ra.maskMaxOppAxisClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});c.attr("width",i._width).style("border-top",Ra.maskOppBorder).call(sv.fill,Ra.maskOppAxisColor)}}function ive(e,t,r,i){if(!t._context.staticPlot){var a=mn.ensureSingle(e,"rect",Ra.slideBoxClassName,function(s){s.attr({y:0,cursor:Ra.slideBoxCursor,"shape-rendering":"crispEdges"})});a.attr({height:i._height,fill:Ra.slideBoxFill})}}function nve(e,t,r,i){var a=mn.ensureSingle(e,"g",Ra.grabberMinClassName),s=mn.ensureSingle(e,"g",Ra.grabberMaxClassName),l={x:0,width:Ra.handleWidth,rx:Ra.handleRadius,fill:sv.background,stroke:sv.defaultLine,"stroke-width":Ra.handleStrokeWidth,"shape-rendering":"crispEdges"},u={y:Math.round(i._height/4),height:Math.round(i._height/2)},c=mn.ensureSingle(a,"rect",Ra.handleMinClassName,function(M){M.attr(l)});c.attr(u);var v=mn.ensureSingle(s,"rect",Ra.handleMaxClassName,function(M){M.attr(l)});v.attr(u);var m={width:Ra.grabAreaWidth,x:0,y:0,fill:Ra.grabAreaFill,cursor:t._context.staticPlot?void 0:Ra.grabAreaCursor},_=mn.ensureSingle(a,"rect",Ra.grabAreaMinClassName,function(M){M.attr(m)});_.attr("height",i._height);var T=mn.ensureSingle(s,"rect",Ra.grabAreaMaxClassName,function(M){M.attr(m)});T.attr("height",i._height)}});var zU=he((Ibe,DU)=>{"use strict";var ove=Nt(),sve=Pb(),lve=QT(),eA=bU();DU.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:ove.extendFlat({},sve,{yaxis:lve})}}},layoutAttributes:Pb(),handleDefaults:MU(),calcAutorange:kU(),draw:PU(),isVisible:eA.isVisible,makeData:eA.makeData,autoMarginOpts:eA.autoMarginOpts}});var Nb=he((Rbe,RU)=>{"use strict";var uve=No(),IU=kf(),fve=Di().templatedArray,cve=fve("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});RU.exports={visible:{valType:"boolean",editType:"plot"},buttons:cve,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:uve({editType:"plot"}),bgcolor:{valType:"color",dflt:IU.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:IU.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}});var tA=he((Fbe,FU)=>{"use strict";FU.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}});var BU=he((qbe,NU)=>{"use strict";var Bb=Nt(),hve=Ua(),vve=Di(),dve=Kl(),qU=Nb(),rA=tA();NU.exports=function(t,r,i,a,s){var l=t.rangeselector||{},u=vve.newContainer(r,"rangeselector");function c(M,k){return Bb.coerce(l,u,qU,M,k)}var v=dve(l,u,{name:"buttons",handleItemDefaults:pve,calendar:s}),m=c("visible",v.length>0);if(m){var _=mve(r,i,a);c("x",_[0]),c("y",_[1]),Bb.noneOrAll(t,r,["x","y"]),c("xanchor"),c("yanchor"),Bb.coerceFont(c,"font",i.font);var T=c("bgcolor");c("activecolor",hve.contrast(T,rA.lightAmount,rA.darkAmount)),c("bordercolor"),c("borderwidth")}};function pve(e,t,r,i){var a=i.calendar;function s(c,v){return Bb.coerce(e,t,qU.buttons,c,v)}var l=s("visible");if(l){var u=s("step");u!=="all"&&(a&&a!=="gregorian"&&(u==="month"||u==="year")?t.stepmode="backward":s("stepmode"),s("count")),s("label")}}function mve(e,t,r){for(var i=r.filter(function(u){return t[u].anchor===e._id}),a=0,s=0;s<i.length;s++){var l=t[i[s]].domain;l&&(a=Math.max(l[1],a))}return[e.domain[0],a+rA.yPad]}});var UU=he((Nbe,OU)=>{"use strict";var yve=ew(),gve=Nt().titleCase;OU.exports=function(t,r){var i=t._name,a={};if(r.step==="all")a[i+".autorange"]=!0;else{var s=_ve(t,r);a[i+".range[0]"]=s[0],a[i+".range[1]"]=s[1]}return a};function _ve(e,t){var r=e.range,i=new Date(e.r2l(r[1])),a=t.step,s=yve["utc"+gve(a)],l=t.count,u;switch(t.stepmode){case"backward":u=e.l2r(+s.offset(i,-l));break;case"todate":var c=s.offset(i,-l);u=e.l2r(+s.ceil(c));break}var v=r[1];return[u,v]}});var jU=he((Bbe,XU)=>{"use strict";var Ub=Ka(),xve=sa(),bve=jn(),VU=Ua(),WU=_i(),Ic=Nt(),HU=Ic.strTranslate,Ob=ho(),wve=ro(),nA=as(),GU=nA.LINE_SPACING,ZU=nA.FROM_TL,YU=nA.FROM_BR,iA=tA(),Tve=UU();XU.exports=function(t){var r=t._fullLayout,i=r._infolayer.selectAll(".rangeselector").data(Ave(t),Mve);i.enter().append("g").classed("rangeselector",!0),i.exit().remove(),i.style({cursor:"pointer","pointer-events":"all"}),i.each(function(a){var s=Ub.select(this),l=a,u=l.rangeselector,c=s.selectAll("g.button").data(Ic.filterVisible(u.buttons));c.enter().append("g").classed("button",!0),c.exit().remove(),c.each(function(v){var m=Ub.select(this),_=Tve(l,v);v._isActive=Sve(l,v,_),m.call(aA,u,v),m.call(Cve,u,v,t),m.on("click",function(){t._dragged||xve.call("_guiRelayout",t,_)}),m.on("mouseover",function(){v._isHovered=!0,m.call(aA,u,v)}),m.on("mouseout",function(){v._isHovered=!1,m.call(aA,u,v)})}),Lve(t,c,u,l._name,s)})};function Ave(e){for(var t=wve.list(e,"x",!0),r=[],i=0;i<t.length;i++){var a=t[i];a.rangeselector&&a.rangeselector.visible&&r.push(a)}return r}function Mve(e){return e._id}function Sve(e,t,r){if(t.step==="all")return e.autorange===!0;var i=Object.keys(r);return e.range[0]===r[i[0]]&&e.range[1]===r[i[1]]}function aA(e,t,r){var i=Ic.ensureSingle(e,"rect","selector-rect",function(a){a.attr("shape-rendering","crispEdges")});i.attr({rx:iA.rx,ry:iA.ry}),i.call(VU.stroke,t.bordercolor).call(VU.fill,kve(t,r)).style("stroke-width",t.borderwidth+"px")}function kve(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function Cve(e,t,r,i){function a(l){Ob.convertToTspans(l,i)}var s=Ic.ensureSingle(e,"text","selector-text",function(l){l.attr("text-anchor","middle")});s.call(WU.font,t.font).text(Eve(r,i._fullLayout._meta)).call(a)}function Eve(e,t){return e.label?t?Ic.templateString(e.label,t):e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}function Lve(e,t,r,i,a){var s=0,l=0,u=r.borderwidth;t.each(function(){var M=Ub.select(this),k=M.select(".selector-text"),L=r.font.size*GU,E=Math.max(L*Ob.lineCount(k),16)+3;l=Math.max(l,E)}),t.each(function(){var M=Ub.select(this),k=M.select(".selector-rect"),L=M.select(".selector-text"),E=L.node()&&WU.bBox(L.node()).width,I=r.font.size*GU,R=Ob.lineCount(L),N=Math.max(E+10,iA.minButtonWidth);M.attr("transform",HU(u+s,u)),k.attr({x:0,y:0,width:N,height:l}),Ob.positionText(L,N/2,l/2-(R-1)*I/2+3),s+=N+5});var c=e._fullLayout._size,v=c.l+c.w*r.x,m=c.t+c.h*(1-r.y),_="left";Ic.isRightAnchor(r)&&(v-=s,_="right"),Ic.isCenterAnchor(r)&&(v-=s/2,_="center");var T="top";Ic.isBottomAnchor(r)&&(m-=l,T="bottom"),Ic.isMiddleAnchor(r)&&(m-=l/2,T="middle"),s=Math.ceil(s),l=Math.ceil(l),v=Math.round(v),m=Math.round(m),bve.autoMargin(e,i+"-range-selector",{x:r.x,y:r.y,l:s*ZU[_],r:s*YU[_],b:l*YU[T],t:l*ZU[T]}),a.attr("transform",HU(v,m))}});var KU=he((Obe,JU)=>{"use strict";JU.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:Nb()}}},layoutAttributes:Nb(),handleDefaults:BU(),draw:jU()}});var Vb=he(oA=>{"use strict";var QU=hn().extendFlat;oA.attributes=function(e,t){e=e||{},t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",a=e.trace?"trace ":"subplot ",s=t.description?" "+t.description:"",l={x:QU({},r,{}),y:QU({},r,{}),editType:e.editType};return e.noGridCell||(l.row={valType:"integer",min:0,dflt:0,editType:e.editType},l.column={valType:"integer",min:0,dflt:0,editType:e.editType}),l};oA.defaults=function(e,t,r,i){var a=i&&i.x||[0,1],s=i&&i.y||[0,1],l=t.grid;if(l){var u=r("domain.column");u!==void 0&&(u<l.columns?a=l._domains.x[u]:delete e.domain.column);var c=r("domain.row");c!==void 0&&(c<l.rows?s=l._domains.y[c]:delete e.domain.row)}var v=r("domain.x",a),m=r("domain.y",s);v[0]<v[1]||(e.domain.x=a.slice()),m[0]<m[1]||(e.domain.y=s.slice())}});var aV=he((Vbe,rV)=>{"use strict";var Pve=Nt(),Dve=M0().counter,zve=Vb().attributes,$U=Mo().idRegex,Ive=Di(),sA={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[Dve("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[$U.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[$U.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:zve({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function Hb(e,t,r){var i=t[r+"axes"],a=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(i))return i;if(a.length)return a}function Rve(e,t){var r=e.grid||{},i=Hb(t,r,"x"),a=Hb(t,r,"y");if(!e.grid&&!i&&!a)return;var s=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),l=Array.isArray(i),u=Array.isArray(a),c=l&&i!==r.xaxes&&u&&a!==r.yaxes,v,m;s?(v=r.subplots.length,m=r.subplots[0].length):(u&&(v=a.length),l&&(m=i.length));var _=Ive.newContainer(t,"grid");function T(H,V){return Pve.coerce(r,_,sA,H,V)}var M=T("rows",v),k=T("columns",m);if(!(M*k>1)){delete t.grid;return}if(!s&&!l&&!u){var L=T("pattern")==="independent";L&&(s=!0)}_._hasSubplotGrid=s;var E=T("roworder"),I=E==="top to bottom",R=s?.2:.1,N=s?.3:.1,z,B;c&&t._splomGridDflt&&(z=t._splomGridDflt.xside,B=t._splomGridDflt.yside),_._domains={x:eV("x",T,R,z,k),y:eV("y",T,N,B,M,I)}}function eV(e,t,r,i,a,s){var l=t(e+"gap",r),u=t("domain."+e);t(e+"side",i);for(var c=new Array(a),v=u[0],m=(u[1]-v)/(a-l),_=m*(1-l),T=0;T<a;T++){var M=v+m*T;c[s?a-1-T:T]=[M,M+_]}return c}function Fve(e,t){var r=t.grid;if(!(!r||!r._domains)){var i=e.grid||{},a=t._subplots,s=r._hasSubplotGrid,l=r.rows,u=r.columns,c=r.pattern==="independent",v,m,_,T,M,k,L,E=r._axisMap={};if(s){var I=i.subplots||[];k=r.subplots=new Array(l);var R=1;for(v=0;v<l;v++){var N=k[v]=new Array(u),z=I[v]||[];for(m=0;m<u;m++)if(c?(M=R===1?"xy":"x"+R+"y"+R,R++):M=z[m],N[m]="",a.cartesian.indexOf(M)!==-1){if(L=M.indexOf("y"),_=M.slice(0,L),T=M.slice(L),E[_]!==void 0&&E[_]!==m||E[T]!==void 0&&E[T]!==v)continue;N[m]=M,E[_]=m,E[T]=v}}}else{var B=Hb(t,i,"x"),H=Hb(t,i,"y");r.xaxes=tV(B,a.xaxis,u,E,"x"),r.yaxes=tV(H,a.yaxis,l,E,"y")}var V=r._anchors={},Y=r.roworder==="top to bottom";for(var J in E){var re=J.charAt(0),ne=r[re+"side"],oe,ue,me;if(ne.length<8)V[J]="free";else if(re==="x"){if(ne.charAt(0)==="t"===Y?(oe=0,ue=1,me=l):(oe=l-1,ue=-1,me=-1),s){var Se=E[J];for(v=oe;v!==me;v+=ue)if(M=k[v][Se],!!M&&(L=M.indexOf("y"),M.slice(0,L)===J)){V[J]=M.slice(L);break}}else for(v=oe;v!==me;v+=ue)if(T=r.yaxes[v],a.cartesian.indexOf(J+T)!==-1){V[J]=T;break}}else if(ne.charAt(0)==="l"?(oe=0,ue=1,me=u):(oe=u-1,ue=-1,me=-1),s){var Ce=E[J];for(v=oe;v!==me;v+=ue)if(M=k[Ce][v],!!M&&(L=M.indexOf("y"),M.slice(L)===J)){V[J]=M.slice(0,L);break}}else for(v=oe;v!==me;v+=ue)if(_=r.xaxes[v],a.cartesian.indexOf(_+J)!==-1){V[J]=_;break}}}}function tV(e,t,r,i,a){var s=new Array(r),l;function u(c,v){t.indexOf(v)!==-1&&i[v]===void 0?(s[c]=v,i[v]=c):s[c]=""}if(Array.isArray(e))for(l=0;l<r;l++)u(l,e[l]);else for(u(0,a),l=1;l<r;l++)u(l,a+(l+1));return s}rV.exports={moduleType:"component",name:"grid",schema:{layout:{grid:sA}},layoutAttributes:sA,sizeDefaults:Rve,contentDefaults:Fve}});var lA=he((Hbe,iV)=>{"use strict";iV.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}});var sV=he((Gbe,oV)=>{"use strict";var nV=Ia(),qve=sa(),Nve=Nt(),Bve=Di(),Ove=lA();oV.exports=function(e,t,r,i){var a="error_"+i.axis,s=Bve.newContainer(t,a),l=e[a]||{};function u(k,L){return Nve.coerce(l,s,Ove,k,L)}var c=l.array!==void 0||l.value!==void 0||l.type==="sqrt",v=u("visible",c);if(v!==!1){var m=u("type","array"in l?"data":"percent"),_=!0;m!=="sqrt"&&(_=u("symmetric",!((m==="data"?"arrayminus":"valueminus")in l))),m==="data"?(u("array"),u("traceref"),_||(u("arrayminus"),u("tracerefminus"))):(m==="percent"||m==="constant")&&(u("value"),_||u("valueminus"));var T="copy_"+i.inherit+"style";if(i.inherit){var M=t["error_"+i.inherit];(M||{}).visible&&u(T,!(l.color||nV(l.thickness)||nV(l.width)))}(!i.inherit||!s[T])&&(u("color",r),u("thickness"),u("width",qve.traceIs(t,"gl3d")?0:4))}}});var uA=he((Zbe,uV)=>{"use strict";uV.exports=function(t){var r=t.type,i=t.symmetric;if(r==="data"){var a=t.array||[];if(i)return function(v,m){var _=+a[m];return[_,_]};var s=t.arrayminus||[];return function(v,m){var _=+a[m],T=+s[m];return!isNaN(_)||!isNaN(T)?[T||0,_||0]:[NaN,NaN]}}else{var l=lV(r,t.value),u=lV(r,t.valueminus);return i||t.valueminus===void 0?function(v){var m=l(v);return[m,m]}:function(v){return[u(v),l(v)]}}};function lV(e,t){if(e==="percent")return function(r){return Math.abs(r*t/100)};if(e==="constant")return function(){return Math.abs(t)};if(e==="sqrt")return function(r){return Math.sqrt(Math.abs(r))}}});var hV=he((Ybe,cV)=>{"use strict";var fA=Ia(),Uve=sa(),cA=Ii(),Vve=Nt(),Hve=uA();cV.exports=function(t){for(var r=t.calcdata,i=0;i<r.length;i++){var a=r[i],s=a[0].trace;if(s.visible===!0&&Uve.traceIs(s,"errorBarsOK")){var l=cA.getFromId(t,s.xaxis),u=cA.getFromId(t,s.yaxis);fV(a,s,l,"x"),fV(a,s,u,"y")}}};function fV(e,t,r,i){var a=t["error_"+i]||{},s=a.visible&&["linear","log"].indexOf(r.type)!==-1,l=[];if(s){for(var u=Hve(a),c=0;c<e.length;c++){var v=e[c],m=v.i;if(m===void 0)m=c;else if(m===null)continue;var _=v[i];if(fA(r.c2l(_))){var T=u(_,m);if(fA(T[0])&&fA(T[1])){var M=v[i+"s"]=_-T[0],k=v[i+"h"]=_+T[1];l.push(M,k)}}}var L=r._id,E=t._extremes[L],I=cA.findExtremes(r,l,Vve.extendFlat({tozero:E.opts.tozero},{padded:!0}));E.min=E.min.concat(I.min),E.max=E.max.concat(I.max)}}});var pV=he((Wbe,dV)=>{"use strict";var vV=Ka(),lv=Ia(),Gve=_i(),Zve=is();dV.exports=function(t,r,i,a){var s,l=i.xaxis,u=i.yaxis,c=a&&a.duration>0,v=t._context.staticPlot;r.each(function(m){var _=m[0].trace,T=_.error_x||{},M=_.error_y||{},k;_.ids&&(k=function(R){return R.id});var L=Zve.hasMarkers(_)&&_.marker.maxdisplayed>0;!M.visible&&!T.visible&&(m=[]);var E=vV.select(this).selectAll("g.errorbar").data(m,k);if(E.exit().remove(),!!m.length){T.visible||E.selectAll("path.xerror").remove(),M.visible||E.selectAll("path.yerror").remove(),E.style("opacity",1);var I=E.enter().append("g").classed("errorbar",!0);c&&I.style("opacity",0).transition().duration(a.duration).style("opacity",1),Gve.setClipUrl(E,i.layerClipId,t),E.each(function(R){var N=vV.select(this),z=Yve(R,l,u);if(!(L&&!R.vis)){var B,H=N.select("path.yerror");if(M.visible&&lv(z.x)&&lv(z.yh)&&lv(z.ys)){var V=M.width;B="M"+(z.x-V)+","+z.yh+"h"+2*V+"m-"+V+",0V"+z.ys,z.noYS||(B+="m-"+V+",0h"+2*V),s=!H.size(),s?H=N.append("path").style("vector-effect",v?"none":"non-scaling-stroke").classed("yerror",!0):c&&(H=H.transition().duration(a.duration).ease(a.easing)),H.attr("d",B)}else H.remove();var Y=N.select("path.xerror");if(T.visible&&lv(z.y)&&lv(z.xh)&&lv(z.xs)){var J=(T.copy_ystyle?M:T).width;B="M"+z.xh+","+(z.y-J)+"v"+2*J+"m0,-"+J+"H"+z.xs,z.noXS||(B+="m0,-"+J+"v"+2*J),s=!Y.size(),s?Y=N.append("path").style("vector-effect",v?"none":"non-scaling-stroke").classed("xerror",!0):c&&(Y=Y.transition().duration(a.duration).ease(a.easing)),Y.attr("d",B)}else Y.remove()}})}})};function Yve(e,t,r){var i={x:t.c2p(e.x),y:r.c2p(e.y)};return e.yh!==void 0&&(i.yh=r.c2p(e.yh),i.ys=r.c2p(e.ys),lv(i.ys)||(i.noYS=!0,i.ys=r.c2p(e.ys,!0))),e.xh!==void 0&&(i.xh=t.c2p(e.xh),i.xs=t.c2p(e.xs),lv(i.xs)||(i.noXS=!0,i.xs=t.c2p(e.xs,!0))),i}});var gV=he((Xbe,yV)=>{"use strict";var Wve=Ka(),mV=Ua();yV.exports=function(t){t.each(function(r){var i=r[0].trace,a=i.error_y||{},s=i.error_x||{},l=Wve.select(this);l.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(mV.stroke,a.color),s.copy_ystyle&&(s=a),l.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(mV.stroke,s.color)})}});var bV=he((jbe,xV)=>{"use strict";var _1=Nt(),_V=ul().overrideAll,x1=lA(),Qd={error_x:_1.extendFlat({},x1),error_y:_1.extendFlat({},x1)};delete Qd.error_x.copy_zstyle;delete Qd.error_y.copy_zstyle;delete Qd.error_y.copy_ystyle;var b1={error_x:_1.extendFlat({},x1),error_y:_1.extendFlat({},x1),error_z:_1.extendFlat({},x1)};delete b1.error_x.copy_ystyle;delete b1.error_y.copy_ystyle;delete b1.error_z.copy_ystyle;delete b1.error_z.copy_zstyle;xV.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Qd,bar:Qd,histogram:Qd,scatter3d:_V(b1,"calc","nested"),scattergl:_V(Qd,"calc","nested")}},supplyDefaults:sV(),calc:hV(),makeComputeError:uA(),plot:pV(),style:gV(),hoverInfo:Xve};function Xve(e,t,r){(t.error_y||{}).visible&&(r.yerr=e.yh-e.y,t.error_y.symmetric||(r.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(r.xerr=e.xh-e.x,t.error_x.symmetric||(r.xerrneg=e.x-e.xs))}});var TV=he((Jbe,wV)=>{"use strict";wV.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}});var LV=he((Kbe,EV)=>{"use strict";var uv=Ka(),hA=Sf(),Zb=jn(),AV=sa(),Rc=Ii(),Gb=$l(),vu=Nt(),Qu=vu.strTranslate,CV=hn().extendFlat,vA=Yh(),Ku=_i(),dA=Ua(),jve=ug(),Jve=ho(),Kve=Pf().flipScale,Qve=wT(),$ve=TT(),ede=Bu(),pA=as(),MV=pA.LINE_SPACING,SV=pA.FROM_TL,kV=pA.FROM_BR,Ji=TV().cn;function tde(e){var t=e._fullLayout,r=t._infolayer.selectAll("g."+Ji.colorbar).data(rde(e),function(i){return i._id});r.enter().append("g").attr("class",function(i){return i._id}).classed(Ji.colorbar,!0),r.each(function(i){var a=uv.select(this);vu.ensureSingle(a,"rect",Ji.cbbg),vu.ensureSingle(a,"g",Ji.cbfills),vu.ensureSingle(a,"g",Ji.cblines),vu.ensureSingle(a,"g",Ji.cbaxis,function(l){l.classed(Ji.crisp,!0)}),vu.ensureSingle(a,"g",Ji.cbtitleunshift,function(l){l.append("g").classed(Ji.cbtitle,!0)}),vu.ensureSingle(a,"rect",Ji.cboutline);var s=ade(a,i,e);s&&s.then&&(e._promises||[]).push(s),e._context.edits.colorbarPosition&&ide(a,i,e)}),r.exit().each(function(i){Zb.autoMargin(e,i._id)}).remove(),r.order()}function rde(e){var t=e._fullLayout,r=e.calcdata,i=[],a,s,l,u;function c(N){return CV(N,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function v(){typeof u.calc=="function"?u.calc(e,l,a):(a._fillgradient=s.reversescale?Kve(s.colorscale):s.colorscale,a._zrange=[s[u.min],s[u.max]])}for(var m=0;m<r.length;m++){var _=r[m];if(l=_[0].trace,!!l._module){var T=l._module.colorbar;if(l.visible===!0&&T)for(var M=Array.isArray(T),k=M?T:[T],L=0;L<k.length;L++){u=k[L];var E=u.container;s=E?l[E]:l,s&&s.showscale&&(a=c(s.colorbar),a._id="cb"+l.uid+(M&&E?"-"+E:""),a._traceIndex=l.index,a._propPrefix=(E?E+".":"")+"colorbar.",a._meta=l._meta,v(),i.push(a))}}}for(var I in t._colorAxes)if(s=t[I],s.showscale){var R=t._colorAxes[I];a=c(s.colorbar),a._id="cb"+I,a._propPrefix=I+".colorbar.",a._meta=t._meta,u={min:"cmin",max:"cmax"},R[0]!=="heatmap"&&(l=R[1],u.calc=l._module.colorbar.calc),v(),i.push(a)}return i}function ade(e,t,r){var i=t.orientation==="v",a=t.len,s=t.lenmode,l=t.thickness,u=t.thicknessmode,c=t.outlinewidth,v=t.borderwidth,m=t.bgcolor,_=t.xanchor,T=t.yanchor,M=t.xpad,k=t.ypad,L=t.x,E=i?t.y:1-t.y,I=t.yref==="paper",R=t.xref==="paper",N=r._fullLayout,z=N._size,B=t._fillcolor,H=t._line,V=t.title,Y=V.side,J=t._zrange||uv.extent((typeof B=="function"?B:H.color).domain()),re=typeof H.color=="function"?H.color:function(){return H.color},ne=typeof B=="function"?B:function(){return B},oe=t._levels,ue=nde(r,t,J),me=ue.fill,Se=ue.line,Ce=Math.round(l*(u==="fraction"?i?z.w:z.h:1)),Me=Ce/(i?z.w:z.h),_e=Math.round(a*(s==="fraction"?i?z.h:z.w:1)),Te=_e/(i?z.h:z.w),Ae=R?z.w:r._fullLayout.width,Le=I?z.h:r._fullLayout.height,Ke=Math.round(i?L*Ae+M:E*Le+k),ct={center:.5,right:1}[_]||0,it={top:1,middle:.5}[T]||0,ut=i?L-ct*Me:E-it*Me,Ge=i?E-it*Te:L-ct*Te,xt=Math.round(i?Le*(1-Ge):Ae*Ge);t._lenFrac=Te,t._thickFrac=Me,t._uFrac=ut,t._vFrac=Ge;var at=t._axis=ode(r,t,J);at.position=Me+(i?L+M/z.w:E+k/z.h);var At=["top","bottom"].indexOf(Y)!==-1;if(i&&At&&(at.title.side=Y,at.titlex=L+M/z.w,at.titley=Ge+(V.side==="top"?Te-k/z.h:k/z.h)),!i&&!At&&(at.title.side=Y,at.titley=E+k/z.h,at.titlex=Ge+M/z.w),H.color&&t.tickmode==="auto"){at.tickmode="linear",at.tick0=oe.start;var kt=oe.size,mt=vu.constrain(_e/50,4,15)+1,ye=(J[1]-J[0])/((t.nticks||mt)*kt);if(ye>1){var Re=Math.pow(10,Math.floor(Math.log(ye)/Math.LN10));kt*=Re*vu.roundUp(ye/Re,[2,5,10]),(Math.abs(oe.start)/oe.size+1e-6)%1<2e-6&&(at.tick0=0)}at.dtick=kt}at.domain=i?[Ge+k/z.h,Ge+Te-k/z.h]:[Ge+M/z.w,Ge+Te-M/z.w],at.setScale(),e.attr("transform",Qu(Math.round(z.l),Math.round(z.t)));var xe=e.select("."+Ji.cbtitleunshift).attr("transform",Qu(-Math.round(z.l),-Math.round(z.t))),et=at.ticklabelposition,vt=at.title.font.size,tt=e.select("."+Ji.cbaxis),Bt,Mt=0,Ct=0;function Rt(Gt,Ne){var ft={propContainer:at,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:N._dfltTitle.colorbar,containerGroup:e.select("."+Ji.cbtitle)},pt=Gt.charAt(0)==="h"?Gt.substr(1):"h"+Gt;e.selectAll("."+pt+",."+pt+"-math-group").remove(),jve.draw(r,Gt,CV(ft,Ne||{}))}function Ot(){if(i&&At||!i&&!At){var Gt,Ne;Y==="top"&&(Gt=M+z.l+Ae*L,Ne=k+z.t+Le*(1-Ge-Te)+3+vt*.75),Y==="bottom"&&(Gt=M+z.l+Ae*L,Ne=k+z.t+Le*(1-Ge)-3-vt*.25),Y==="right"&&(Ne=k+z.t+Le*E+3+vt*.75,Gt=M+z.l+Ae*Ge),Rt(at._id+"title",{attributes:{x:Gt,y:Ne,"text-anchor":i?"start":"middle"}})}}function gt(){if(i&&!At||!i&&At){var Gt=at.position||0,Ne=at._offset+at._length/2,ft,pt;if(Y==="right")pt=Ne,ft=z.l+Ae*Gt+10+vt*(at.showticklabels?1:.5);else if(ft=Ne,Y==="bottom"&&(pt=z.t+Le*Gt+10+(et.indexOf("inside")===-1?at.tickfont.size:0)+(at.ticks!=="intside"&&t.ticklen||0)),Y==="top"){var xr=V.text.split("<br>").length;pt=z.t+Le*Gt+10-Ce-MV*vt*xr}Rt((i?"h":"v")+at._id+"title",{avoid:{selection:uv.select(r).selectAll("g."+at._id+"tick"),side:Y,offsetTop:i?0:z.t,offsetLeft:i?z.l:0,maxShift:i?N.width:N.height},attributes:{x:ft,y:pt,"text-anchor":"middle"},transform:{rotate:i?-90:0,offset:0}})}}function Et(){if(!i&&!At||i&&At){var Gt=e.select("."+Ji.cbtitle),Ne=Gt.select("text"),ft=[-c/2,c/2],pt=Gt.select(".h"+at._id+"title-math-group").node(),xr=15.6;Ne.node()&&(xr=parseInt(Ne.node().style.fontSize,10)*MV);var pr;if(pt?(pr=Ku.bBox(pt),Ct=pr.width,Mt=pr.height,Mt>xr&&(ft[1]-=(Mt-xr)/2)):Ne.node()&&!Ne.classed(Ji.jsPlaceholder)&&(pr=Ku.bBox(Ne.node()),Ct=pr.width,Mt=pr.height),i){if(Mt){if(Mt+=5,Y==="top")at.domain[1]-=Mt/z.h,ft[1]*=-1;else{at.domain[0]+=Mt/z.h;var Tt=Jve.lineCount(Ne);ft[1]+=(1-Tt)*xr}Gt.attr("transform",Qu(ft[0],ft[1])),at.setScale()}}else Ct&&(Y==="right"&&(at.domain[0]+=(Ct+vt/2)/z.w),Gt.attr("transform",Qu(ft[0],ft[1])),at.setScale())}e.selectAll("."+Ji.cbfills+",."+Ji.cblines).attr("transform",i?Qu(0,Math.round(z.h*(1-at.domain[1]))):Qu(Math.round(z.w*at.domain[0]),0)),tt.attr("transform",i?Qu(0,Math.round(-z.t)):Qu(Math.round(-z.l),0));var wt=e.select("."+Ji.cbfills).selectAll("rect."+Ji.cbfill).attr("style","").data(me);wt.enter().append("rect").classed(Ji.cbfill,!0).attr("style",""),wt.exit().remove();var Vt=J.map(at.c2p).map(Math.round).sort(function(Mr,br){return Mr-br});wt.each(function(Mr,br){var Pt=[br===0?J[0]:(me[br]+me[br-1])/2,br===me.length-1?J[1]:(me[br]+me[br+1])/2].map(at.c2p).map(Math.round);i&&(Pt[1]=vu.constrain(Pt[1]+(Pt[1]>Pt[0])?1:-1,Vt[0],Vt[1]));var Fe=uv.select(this).attr(i?"x":"y",Ke).attr(i?"y":"x",uv.min(Pt)).attr(i?"width":"height",Math.max(Ce,2)).attr(i?"height":"width",Math.max(uv.max(Pt)-uv.min(Pt),2));if(t._fillgradient)Ku.gradient(Fe,r,t._id,i?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var He=ne(Mr).replace("e-","");Fe.attr("fill",hA(He).toHexString())}});var Kt=e.select("."+Ji.cblines).selectAll("path."+Ji.cbline).data(H.color&&H.width?Se:[]);Kt.enter().append("path").classed(Ji.cbline,!0),Kt.exit().remove(),Kt.each(function(Mr){var br=Ke,Pt=Math.round(at.c2p(Mr))+H.width/2%1;uv.select(this).attr("d","M"+(i?br+","+Pt:Pt+","+br)+(i?"h":"v")+Ce).call(Ku.lineGroupStyle,H.width,re(Mr),H.dash)}),tt.selectAll("g."+at._id+"tick,path").remove();var Ht=Ke+Ce+(c||0)/2-(t.ticks==="outside"?1:0),Ut=Rc.calcTicks(at),er=Rc.getTickSigns(at)[2];return Rc.drawTicks(r,at,{vals:at.ticks==="inside"?Rc.clipEnds(at,Ut):Ut,layer:tt,path:Rc.makeTickPath(at,Ht,er),transFn:Rc.makeTransTickFn(at)}),Rc.drawLabels(r,at,{vals:Ut,layer:tt,transFn:Rc.makeTransTickLabelFn(at),labelFns:Rc.makeLabelFns(at,Ht)})}function ir(){var Gt,Ne=Ce+c/2;et.indexOf("inside")===-1&&(Gt=Ku.bBox(tt.node()),Ne+=i?Gt.width:Gt.height),Bt=xe.select("text");var ft=0,pt=i&&Y==="top",xr=!i&&Y==="right",pr=0;if(Bt.node()&&!Bt.classed(Ji.jsPlaceholder)){var Tt,wt=xe.select(".h"+at._id+"title-math-group").node();wt&&(i&&At||!i&&!At)?(Gt=Ku.bBox(wt),ft=Gt.width,Tt=Gt.height):(Gt=Ku.bBox(xe.node()),ft=Gt.right-z.l-(i?Ke:xt),Tt=Gt.bottom-z.t-(i?xt:Ke),!i&&Y==="top"&&(Ne+=Gt.height,pr=Gt.height)),xr&&(Bt.attr("transform",Qu(ft/2+vt/2,0)),ft*=2),Ne=Math.max(Ne,i?ft:Tt)}var Vt=(i?M:k)*2+Ne+v+c/2,Kt=0;!i&&V.text&&T==="bottom"&&E<=0&&(Kt=Vt/2,Vt+=Kt,pr+=Kt),N._hColorbarMoveTitle=Kt,N._hColorbarMoveCBTitle=pr;var Ht=v+c,Ut=(i?Ke:xt)-Ht/2-(i?M:0),er=(i?xt:Ke)-(i?_e:k+pr-Kt);e.select("."+Ji.cbbg).attr("x",Ut).attr("y",er).attr(i?"width":"height",Math.max(Vt-Kt,2)).attr(i?"height":"width",Math.max(_e+Ht,2)).call(dA.fill,m).call(dA.stroke,t.bordercolor).style("stroke-width",v);var Mr=xr?Math.max(ft-10,0):0;e.selectAll("."+Ji.cboutline).attr("x",(i?Ke:xt+M)+Mr).attr("y",(i?xt+k-_e:Ke)+(pt?Mt:0)).attr(i?"width":"height",Math.max(Ce,2)).attr(i?"height":"width",Math.max(_e-(i?2*k+Mt:2*M+Mr),2)).call(dA.stroke,t.outlinecolor).style({fill:"none","stroke-width":c});var br=i?ct*Vt:0,Pt=i?0:(1-it)*Vt-pr;if(br=R?z.l-br:-br,Pt=I?z.t-Pt:-Pt,e.attr("transform",Qu(br,Pt)),!i&&(v||hA(m).getAlpha()&&!hA.equals(N.paper_bgcolor,m))){var Fe=tt.selectAll("text"),He=Fe[0].length,bt=e.select("."+Ji.cbbg).node(),dt=Ku.bBox(bt),gr=Ku.getTranslate(e),Lr=2;Fe.each(function(Qn,Pn){var Gi=0,pa=He-1;if(Pn===Gi||Pn===pa){var Gr=Ku.bBox(this),Qa=Ku.getTranslate(this),Zr;if(Pn===pa){var vi=Gr.right+Qa.x,ga=dt.right+gr.x+xt-v-Lr+L;Zr=ga-vi,Zr>0&&(Zr=0)}else if(Pn===Gi){var le=Gr.left+Qa.x,ee=dt.left+gr.x+xt+v+Lr;Zr=ee-le,Zr<0&&(Zr=0)}Zr&&(He<3?this.setAttribute("transform","translate("+Zr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ar={},Hr=SV[_],xa=kV[_],Ca=SV[T],Pa=kV[T],Fi=Vt-Ce;i?(s==="pixels"?(Ar.y=E,Ar.t=_e*Ca,Ar.b=_e*Pa):(Ar.t=Ar.b=0,Ar.yt=E+a*Ca,Ar.yb=E-a*Pa),u==="pixels"?(Ar.x=L,Ar.l=Vt*Hr,Ar.r=Vt*xa):(Ar.l=Fi*Hr,Ar.r=Fi*xa,Ar.xl=L-l*Hr,Ar.xr=L+l*xa)):(s==="pixels"?(Ar.x=L,Ar.l=_e*Hr,Ar.r=_e*xa):(Ar.l=Ar.r=0,Ar.xl=L+a*Hr,Ar.xr=L-a*xa),u==="pixels"?(Ar.y=1-E,Ar.t=Vt*Ca,Ar.b=Vt*Pa):(Ar.t=Fi*Ca,Ar.b=Fi*Pa,Ar.yt=E-l*Ca,Ar.yb=E+l*Pa));var Ki=t.y<.5?"b":"t",gn=t.x<.5?"l":"r";r._fullLayout._reservedMargin[t._id]={};var Xi={r:N.width-Ut-br,l:Ut+Ar.r,b:N.height-er-Pt,t:er+Ar.b};R&&I?Zb.autoMargin(r,t._id,Ar):R?r._fullLayout._reservedMargin[t._id][Ki]=Xi[Ki]:I||i?r._fullLayout._reservedMargin[t._id][gn]=Xi[gn]:r._fullLayout._reservedMargin[t._id][Ki]=Xi[Ki]}return vu.syncOrAsync([Zb.previousPromises,Ot,Et,gt,Zb.previousPromises,ir],r)}function ide(e,t,r){var i=t.orientation==="v",a=r._fullLayout,s=a._size,l,u,c;Gb.init({element:e.node(),gd:r,prepFn:function(){l=e.attr("transform"),vA(e)},moveFn:function(v,m){e.attr("transform",l+Qu(v,m)),u=Gb.align((i?t._uFrac:t._vFrac)+v/s.w,i?t._thickFrac:t._lenFrac,0,1,t.xanchor),c=Gb.align((i?t._vFrac:1-t._uFrac)-m/s.h,i?t._lenFrac:t._thickFrac,0,1,t.yanchor);var _=Gb.getCursor(u,c,t.xanchor,t.yanchor);vA(e,_)},doneFn:function(){if(vA(e),u!==void 0&&c!==void 0){var v={};v[t._propPrefix+"x"]=u,v[t._propPrefix+"y"]=c,t._traceIndex!==void 0?AV.call("_guiRestyle",r,v,t._traceIndex):AV.call("_guiRelayout",r,v)}}})}function nde(e,t,r){var i=t._levels,a=[],s=[],l,u,c=i.end+i.size/100,v=i.size,m=1.001*r[0]-.001*r[1],_=1.001*r[1]-.001*r[0];for(u=0;u<1e5&&(l=i.start+u*v,!(v>0?l>=c:l<=c));u++)l>m&&l<_&&a.push(l);if(t._fillgradient)s=[0];else if(typeof t._fillcolor=="function"){var T=t._filllevels;if(T)for(c=T.end+T.size/100,v=T.size,u=0;u<1e5&&(l=T.start+u*v,!(v>0?l>=c:l<=c));u++)l>r[0]&&l<r[1]&&s.push(l);else s=a.map(function(M){return M-i.size/2}),s.push(s[s.length-1]+i.size)}else t._fillcolor&&typeof t._fillcolor=="string"&&(s=[0]);return i.size<0&&(a.reverse(),s.reverse()),{line:a,fill:s}}function ode(e,t,r){var i=e._fullLayout,a=t.orientation==="v",s={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:a?"right":"bottom",position:1},l=a?"y":"x",u={type:"linear",_id:l+t._id},c={letter:l,font:i.font,noAutotickangles:l==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:i.calendar};function v(m,_){return vu.coerce(s,u,ede,m,_)}return Qve(s,u,v,c,i),$ve(s,u,v,c),u}EV.exports={draw:tde}});var DV=he((Qbe,PV)=>{"use strict";PV.exports={moduleType:"component",name:"colorbar",attributes:l2(),supplyDefaults:g5(),draw:LV().draw,hasColorbar:s5()}});var IV=he(($be,zV)=>{"use strict";zV.exports={moduleType:"component",name:"legend",layoutAttributes:p4(),supplyLayoutDefaults:g4(),draw:L4(),style:S4()}});var FV=he((e3e,RV)=>{"use strict";RV.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}});var NV=he((t3e,qV)=>{"use strict";qV.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}});var yA=he((r3e,VV)=>{"use strict";var sde=sa(),UV=Nt(),mA=UV.extendFlat,BV=UV.extendDeep;function OV(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function lde(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}VV.exports=function(t,r){var i,a=t.data,s=t.layout,l=BV([],a),u=BV({},s,OV(r.tileClass)),c=t._context||{};if(r.width&&(u.width=r.width),r.height&&(u.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){u.annotations=[];var v=Object.keys(u);for(i=0;i<v.length;i++)lde(v[i])&&(u[v[i]].title={text:""});for(i=0;i<l.length;i++){var m=l[i];m.showscale=!1,m.marker&&(m.marker.showscale=!1),sde.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(r.annotations))for(i=0;i<r.annotations.length;i++)u.annotations.push(r.annotations[i]);var _=Object.keys(u).filter(function(E){return E.match(/^scene\d*$/)});if(_.length){var T={};for(r.tileClass==="thumbnail"&&(T={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<_.length;i++){var M=u[_[i]];M.xaxis||(M.xaxis={}),M.yaxis||(M.yaxis={}),M.zaxis||(M.zaxis={}),mA(M.xaxis,T),mA(M.yaxis,T),mA(M.zaxis,T),M._scene=null}}var k=document.createElement("div");r.tileClass&&(k.className=r.tileClass);var L={gd:k,td:k,layout:u,data:l,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return r.setBackground!=="transparent"&&(L.config.setBackground=r.setBackground||"opaque"),L.gd.defaultLayout=OV(r.tileClass),L}});var ZV=he((a3e,GV)=>{"use strict";var ude=J_().EventEmitter,fde=sa(),cde=Nt(),HV=Hd(),hde=yA(),vde=rb(),dde=ab();function pde(e,t){var r=new ude,i=hde(e,{format:"png"}),a=i.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);function s(){var u=HV.getDelay(a._fullLayout);setTimeout(function(){var c=vde(a),v=document.createElement("canvas");v.id=cde.randstr(),r=dde({format:t.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:v,emitter:r,svg:c}),r.clean=function(){a&&document.body.removeChild(a)}},u)}var l=HV.getRedrawFunc(a);return fde.call("_doPlot",a,i.data,i.layout,i.config).then(l).then(s).catch(function(u){r.emit("error",u)}),r}GV.exports=pde});var XV=he((i3e,WV)=>{"use strict";var YV=Hd(),mde={getDelay:YV.getDelay,getRedrawFunc:YV.getRedrawFunc,clone:yA(),toSVG:rb(),svgToImg:ab(),toImage:ZV(),downloadImage:W6()};WV.exports=mde});var JV=he(Fc=>{"use strict";Fc.version=s_().version;B7();Ek();var yde=sa(),w1=Fc.register=yde.register,_A=KF(),jV=Object.keys(_A);for(Yb=0;Yb<jV.length;Yb++)Em=jV[Yb],Em.charAt(0)!=="_"&&(Fc[Em]=_A[Em]),w1({moduleType:"apiMethod",name:Em,fn:_A[Em]});var Em,Yb;w1(fB());w1([RB(),jB(),Vf(),vO(),SO(),XO(),dU(),zU(),KU(),aV(),bV(),V0(),DV(),IV(),Bf(),r6()]);w1([FV(),NV()]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(w1(window.PlotlyLocales),delete window.PlotlyLocales);Fc.Icons=rx();var Wb=Bf(),gA=jn();Fc.Plots={resize:gA.resize,graphJson:gA.graphJson,sendDataToCloud:gA.sendDataToCloud};Fc.Fx={hover:Wb.hover,unhover:Wb.unhover,loneHover:Wb.loneHover,loneUnhover:Wb.loneUnhover};Fc.Snapshot=XV();Fc.PlotSchema=Fh()});var QV=he((o3e,KV)=>{"use strict";KV.exports=JV()});var xA=he((s3e,tH)=>{"use strict";var gde=Wl().hovertemplateAttrs,_de=Wl().texttemplateAttrs,xde=Ix(),Zf=Pc(),bde=gs(),$V=Tc(),wde=pc().dash,$d=hn().extendFlat,Tde=ul().overrideAll,du=Zf.marker,eH=Zf.line,Ade=du.line;tH.exports=Tde({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:$d({},Zf.mode,{dflt:"markers"}),text:$d({},Zf.text,{}),texttemplate:_de({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:$d({},Zf.hovertext,{}),textfont:Zf.textfont,textposition:Zf.textposition,line:{color:eH.color,width:eH.width,dash:wde},connectgaps:Zf.connectgaps,marker:$d({symbol:du.symbol,opacity:du.opacity,angle:du.angle,angleref:$d({},du.angleref,{values:["previous","up","north"]}),standoff:du.standoff,size:du.size,sizeref:du.sizeref,sizemin:du.sizemin,sizemode:du.sizemode,colorbar:du.colorbar,line:$d({width:Ade.width},$V("marker.line")),gradient:du.gradient},$V("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:xde(),selected:Zf.selected,unselected:Zf.unselected,hoverinfo:$d({},bde.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:gde()},"calc","nested")});var qc=he((l3e,lH)=>{"use strict";var Mde=O_(),rH="1.13.4",oH='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',aH=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',oH].join(" "),iH=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),Sde=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),sH={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:oH,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:aH,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:aH,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:iH,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:iH,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:Sde,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},nH=Mde(sH);lH.exports={requiredVersion:rH,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:sH,styleValuesNonMapbox:nH,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+rH+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",nH.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}});var T1=he((u3e,hH)=>{"use strict";var uH=Nt(),fH=Ua().defaultLine,kde=Vb().attributes,Cde=No(),Ede=Pc().textposition,Lde=ul().overrideAll,Pde=Di().templatedArray,bA=qc(),cH=Cde({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});cH.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var Dde=hH.exports=Lde({_arrayAttrRegexps:[uH.counterRegex("mapbox",".layers",!0)],domain:kde({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:bA.styleValuesMapbox.concat(bA.styleValuesNonMapbox),dflt:bA.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:Pde("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:fH},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:fH}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:cH,textposition:uH.extendFlat({},Ede,{arrayOk:!1})}})},"plot","from-root");Dde.uirevision={valType:"any",editType:"none"}});var Xb=he((f3e,pH)=>{"use strict";var zde=Wl().hovertemplateAttrs,Ide=Wl().texttemplateAttrs,Rde=Ix(),A1=xA(),Lm=Pc(),vH=T1(),Fde=gs(),qde=Tc(),ep=hn().extendFlat,Nde=ul().overrideAll,Bde=T1(),dH=A1.line,Pm=A1.marker;pH.exports=Nde({lon:A1.lon,lat:A1.lat,cluster:{enabled:{valType:"boolean"},maxzoom:ep({},Bde.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:ep({},Pm.opacity,{dflt:1})},mode:ep({},Lm.mode,{dflt:"markers"}),text:ep({},Lm.text,{}),texttemplate:Ide({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:ep({},Lm.hovertext,{}),line:{color:dH.color,width:dH.width},connectgaps:Lm.connectgaps,marker:ep({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:Pm.opacity,size:Pm.size,sizeref:Pm.sizeref,sizemin:Pm.sizemin,sizemode:Pm.sizemode},qde("marker")),fill:A1.fill,fillcolor:Rde(),textfont:vH.layers.symbol.textfont,textposition:vH.layers.symbol.textposition,below:{valType:"string"},selected:{marker:Lm.selected.marker},unselected:{marker:Lm.unselected.marker},hoverinfo:ep({},Fde.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:zde()},"calc","nested")});var wA=he((c3e,mH)=>{"use strict";var Ode=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];mH.exports={isSupportedFont:function(e){return Ode.indexOf(e)!==-1}}});var _H=he((h3e,gH)=>{"use strict";var M1=Nt(),TA=is(),Ude=J6(),Vde=K6(),Hde=Q6(),Gde=$6(),yH=Xb(),Zde=wA().isSupportedFont;gH.exports=function(t,r,i,a){function s(I,R){return M1.coerce(t,r,yH,I,R)}function l(I,R){return M1.coerce2(t,r,yH,I,R)}var u=Yde(t,r,s);if(!u){r.visible=!1;return}if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),TA.hasMarkers(r)){Ude(t,r,i,a,s,{noLine:!0,noAngle:!0}),s("marker.allowoverlap"),s("marker.angle");var c=r.marker;c.symbol!=="circle"&&(M1.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),M1.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}TA.hasLines(r)&&(Vde(t,r,i,a,s,{noDash:!0}),s("connectgaps"));var v=l("cluster.maxzoom"),m=l("cluster.step"),_=l("cluster.color",r.marker&&r.marker.color||i),T=l("cluster.size"),M=l("cluster.opacity"),k=v!==!1||m!==!1||_!==!1||T!==!1||M!==!1,L=s("cluster.enabled",k);if(L||TA.hasText(r)){var E=a.font.family;Hde(t,r,a,s,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:Zde(E)?E:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}})}s("fill"),r.fill!=="none"&&Gde(t,r,i,s),M1.coerceSelectionMarkerOpacity(r,s)};function Yde(e,t,r){var i=r("lon")||[],a=r("lat")||[],s=Math.min(i.length,a.length);return t._length=s,s}});var AA=he((v3e,bH)=>{"use strict";var xH=Ii();bH.exports=function(t,r,i){var a={},s=i[r.subplot]._subplot,l=s.mockAxis,u=t.lonlat;return a.lonLabel=xH.tickText(l,l.c2l(u[0]),!0).text,a.latLabel=xH.tickText(l,l.c2l(u[1]),!0).text,a}});var SH=he((d3e,MH)=>{"use strict";var MA=Ia(),wH=Bi().BADNUM,Wde=rT(),Xde=a1(),jde=lb(),Jde=Nt().isArrayOrTypedArray,TH=Nt()._;function AH(e){return e&&typeof e=="string"}MH.exports=function(t,r){var i=Jde(r.locations),a=i?r.locations.length:r._length,s=new Array(a),l;r.geojson?l=function(T){return AH(T)||MA(T)}:l=AH;for(var u=0;u<a;u++){var c=s[u]={};if(i){var v=r.locations[u];c.loc=l(v)?v:null}else{var m=r.lon[u],_=r.lat[u];MA(m)&&MA(_)?c.lonlat=[+m,+_]:c.lonlat=[wH,wH]}}return Xde(s,r),Wde(t,r),jde(s,r),a&&(s[0].t={labels:{lat:TH(t,"lat:")+" ",lon:TH(t,"lon:")+" "}}),s}});var jb=he(S1=>{"use strict";var Kde=Bi().BADNUM;S1.calcTraceToLineCoords=function(e){for(var t=e[0].trace,r=t.connectgaps,i=[],a=[],s=0;s<e.length;s++){var l=e[s],u=l.lonlat;u[0]!==Kde?a.push(u):!r&&a.length>0&&(i.push(a),a=[])}return a.length>0&&i.push(a),i};S1.makeLine=function(e){return e.length===1?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}};S1.makePolygon=function(e){if(e.length===1)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=[e[r]];return{type:"MultiPolygon",coordinates:t}};S1.makeBlank=function(){return{type:"Point",coordinates:[]}}});var SA=he((m3e,CH)=>{"use strict";var kH=Nt();CH.exports=function(t,r){var i=t.split(" "),a=i[0],s=i[1],l=kH.isArrayOrTypedArray(r)?kH.mean(r):r,u=.5+l/100,c=1.5+l/100,v=["",""],m=[0,0];switch(a){case"top":v[0]="top",m[1]=-c;break;case"bottom":v[0]="bottom",m[1]=c;break}switch(s){case"left":v[1]="right",m[0]=-u;break;case"right":v[1]="left",m[0]=u;break}var _;return v[0]&&v[1]?_=v.join("-"):v[0]?_=v[0]:v[1]?_=v[1]:_="center",{anchor:_,offset:m}}});var IH=he((y3e,zH)=>{"use strict";var PH=Ia(),Co=Nt(),Qde=Bi().BADNUM,Kb=jb(),EH=V0(),$de=_i(),epe=w5(),Qb=is(),tpe=wA().isSupportedFont,rpe=SA(),ape=Ac().appendArrayPointValue,ipe=ho().NEWLINES,npe=ho().BR_TAG_ALL;zH.exports=function(t,r){var i=r[0].trace,a=i.visible===!0&&i._length!==0,s=i.fill!=="none",l=Qb.hasLines(i),u=Qb.hasMarkers(i),c=Qb.hasText(i),v=u&&i.marker.symbol==="circle",m=u&&i.marker.symbol!=="circle",_=i.cluster&&i.cluster.enabled,T=Jb("fill"),M=Jb("line"),k=Jb("circle"),L=Jb("symbol"),E={fill:T,line:M,circle:k,symbol:L};if(!a)return E;var I;if((s||l)&&(I=Kb.calcTraceToLineCoords(r)),s&&(T.geojson=Kb.makePolygon(I),T.layout.visibility="visible",Co.extendFlat(T.paint,{"fill-color":i.fillcolor})),l&&(M.geojson=Kb.makeLine(I),M.layout.visibility="visible",Co.extendFlat(M.paint,{"line-width":i.line.width,"line-color":i.line.color,"line-opacity":i.opacity})),v){var R=ope(r);k.geojson=R.geojson,k.layout.visibility="visible",_&&(k.filter=["!",["has","point_count"]],E.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":CA(i.cluster.color,i.cluster.step),"circle-radius":CA(i.cluster.size,i.cluster.step),"circle-opacity":CA(i.cluster.opacity,i.cluster.step)}},E.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":LH(i),"text-size":12}}),Co.extendFlat(k.paint,{"circle-color":R.mcc,"circle-radius":R.mrc,"circle-opacity":R.mo})}if(v&&_&&(k.filter=["!",["has","point_count"]]),(m||c)&&(L.geojson=spe(r,t),Co.extendFlat(L.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),m&&(Co.extendFlat(L.layout,{"icon-size":i.marker.size/10}),"angle"in i.marker&&i.marker.angle!=="auto"&&Co.extendFlat(L.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),L.layout["icon-allow-overlap"]=i.marker.allowoverlap,Co.extendFlat(L.paint,{"icon-opacity":i.opacity*i.marker.opacity,"icon-color":i.marker.color})),c)){var N=(i.marker||{}).size,z=rpe(i.textposition,N);Co.extendFlat(L.layout,{"text-size":i.textfont.size,"text-anchor":z.anchor,"text-offset":z.offset,"text-font":LH(i)}),Co.extendFlat(L.paint,{"text-color":i.textfont.color,"text-opacity":i.opacity})}return E};function Jb(e){return{type:e,geojson:Kb.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function ope(e){var t=e[0].trace,r=t.marker,i=t.selectedpoints,a=Co.isArrayOrTypedArray(r.color),s=Co.isArrayOrTypedArray(r.size),l=Co.isArrayOrTypedArray(r.opacity),u;function c(N){return t.opacity*N}function v(N){return N/2}var m;a&&(EH.hasColorscale(t,"marker")?m=EH.makeColorScaleFuncFromTrace(r):m=Co.identity);var _;s&&(_=epe(t));var T;l&&(T=function(N){var z=PH(N)?+Co.constrain(N,0,1):0;return c(z)});var M=[];for(u=0;u<e.length;u++){var k=e[u],L=k.lonlat;if(!DH(L)){var E={};m&&(E.mcc=k.mcc=m(k.mc)),_&&(E.mrc=k.mrc=_(k.ms)),T&&(E.mo=T(k.mo)),i&&(E.selected=k.selected||0),M.push({type:"Feature",id:u+1,geometry:{type:"Point",coordinates:L},properties:E})}}var I;if(i)for(I=$de.makeSelectedPointStyleFns(t),u=0;u<M.length;u++){var R=M[u].properties;I.selectedOpacityFn&&(R.mo=c(I.selectedOpacityFn(R))),I.selectedColorFn&&(R.mcc=I.selectedColorFn(R)),I.selectedSizeFn&&(R.mrc=I.selectedSizeFn(R))}return{geojson:{type:"FeatureCollection",features:M},mcc:a||I&&I.selectedColorFn?{type:"identity",property:"mcc"}:r.color,mrc:s||I&&I.selectedSizeFn?{type:"identity",property:"mrc"}:v(r.size),mo:l||I&&I.selectedOpacityFn?{type:"identity",property:"mo"}:c(r.opacity)}}function spe(e,t){for(var r=t._fullLayout,i=e[0].trace,a=i.marker||{},s=a.symbol,l=a.angle,u=s!=="circle"?kA(s):$b,c=l!=="auto"?kA(l,!0):$b,v=Qb.hasText(i)?kA(i.text):$b,m=[],_=0;_<e.length;_++){var T=e[_];if(!DH(T.lonlat)){var M=i.texttemplate,k;if(M){var L=Array.isArray(M)?M[_]||"":M,E=i._module.formatLabels(T,i,r),I={};ape(I,i,T.i);var R=i._meta||{};k=Co.texttemplateString(L,E,r._d3locale,I,T,R)}else k=v(_);k&&(k=k.replace(ipe,"").replace(npe,`
`)),m.push({type:"Feature",geometry:{type:"Point",coordinates:T.lonlat},properties:{symbol:u(_),angle:c(_),text:k}})}}return{type:"FeatureCollection",features:m}}function kA(e,t){return Co.isArrayOrTypedArray(e)?t?function(r){return PH(e[r])?+e[r]:0}:function(r){return e[r]}:e?function(){return e}:$b}function $b(){return""}function DH(e){return e[0]===Qde}function CA(e,t){var r;if(Co.isArrayOrTypedArray(e)&&Co.isArrayOrTypedArray(t)){r=["step",["get","point_count"],e[0]];for(var i=1;i<e.length;i++)r.push(t[i-1],e[i])}else r=e;return r}function LH(e){var t=e.textfont,r=t.family,i=t.style,a=t.weight,s=r.split(" "),l=s[s.length-1]==="Italic";l&&s.pop(),l=l||i==="italic";var u=s.join(" ");a==="bold"&&s.indexOf("Bold")===-1?u+=" Bold":a<=1e3&&(s[0]==="Metropolis"?(u="Metropolis",a>850?u+=" Black":a>750?u+=" Extra Bold":a>650?u+=" Bold":a>550?u+=" Semi Bold":a>450?u+=" Medium":a>350?u+=" Regular":a>250?u+=" Light":a>150?u+=" Extra Light":u+=" Thin"):s.slice(0,2).join(" ")==="Open Sans"?(u="Open Sans",a>750?u+=" Extrabold":a>650?u+=" Bold":a>550?u+=" Semibold":a>350?u+=" Regular":u+=" Light"):s.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(u="Klokantech Noto Sans",s[3]==="CJK"&&(u+=" CJK"),u+=a>500?" Bold":" Regular")),l&&(u+=" Italic"),u==="Open Sans Regular Italic"?u="Open Sans Italic":u==="Open Sans Regular Bold"?u="Open Sans Bold":u==="Open Sans Regular Bold Italic"?u="Open Sans Bold Italic":u==="Klokantech Noto Sans Regular Italic"&&(u="Klokantech Noto Sans Italic"),tpe(u)||(u=r);var c=u.split(", ");return c}});var NH=he((g3e,qH)=>{"use strict";var lpe=Nt(),RH=IH(),Dm=qc().traceLayerPrefix,pu={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function FH(e,t,r,i){this.type="scattermapbox",this.subplot=e,this.uid=t,this.clusterEnabled=r,this.isHidden=i,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:Dm+t+"-fill",line:Dm+t+"-line",circle:Dm+t+"-circle",symbol:Dm+t+"-symbol",cluster:Dm+t+"-cluster",clusterCount:Dm+t+"-cluster-count"},this.below=null}var k1=FH.prototype;k1.addSource=function(e,t,r){var i={type:"geojson",data:t.geojson};r&&r.enabled&&lpe.extendFlat(i,{cluster:!0,clusterMaxZoom:r.maxzoom});var a=this.subplot.map.getSource(this.sourceIds[e]);a?a.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[e],i)};k1.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)};k1.addLayer=function(e,t,r){var i={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint};t.filter&&(i.filter=t.filter);for(var a=this.layerIds[e],s,l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===a){s=!0;break}s?(this.subplot.setOptions(a,"setLayoutProperty",i.layout),i.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",i.paint)):this.subplot.addLayer(i,r)};k1.update=function(t){var r=t[0].trace,i=this.subplot,a=i.map,s=RH(i.gd,t),l=i.belowLookup["trace-"+this.uid],u=!!(r.cluster&&r.cluster.enabled),c=!!this.clusterEnabled,v=this;function m(N){N||v.addSource("circle",s.circle,r.cluster);for(var z=pu.cluster,B=0;B<z.length;B++){var H=z[B],V=s[H];v.addLayer(H,V,l)}}function _(N){for(var z=pu.cluster,B=z.length-1;B>=0;B--){var H=z[B];a.removeLayer(v.layerIds[H])}N||a.removeSource(v.sourceIds.circle)}function T(N){for(var z=pu.nonCluster,B=0;B<z.length;B++){var H=z[B],V=s[H];N||v.addSource(H,V),v.addLayer(H,V,l)}}function M(N){for(var z=pu.nonCluster,B=z.length-1;B>=0;B--){var H=z[B];a.removeLayer(v.layerIds[H]),N||a.removeSource(v.sourceIds[H])}}function k(N){c?_(N):M(N)}function L(N){u?m(N):T(N)}function E(){for(var N=u?pu.cluster:pu.nonCluster,z=0;z<N.length;z++){var B=N[z],H=s[B];H&&(i.setOptions(v.layerIds[B],"setLayoutProperty",H.layout),H.layout.visibility==="visible"&&(B!=="cluster"&&v.setSourceData(B,H),i.setOptions(v.layerIds[B],"setPaintProperty",H.paint)))}}var I=this.isHidden,R=r.visible!==!0;R?I||k():I?R||L():c!==u?(k(),L()):(this.below!==l&&(k(!0),L(!0)),E()),this.clusterEnabled=u,this.isHidden=R,this.below=l,t[0].trace._glTrace=this};k1.dispose=function(){for(var t=this.subplot.map,r=this.clusterEnabled?pu.cluster:pu.nonCluster,i=r.length-1;i>=0;i--){var a=r[i];t.removeLayer(this.layerIds[a]),t.removeSource(this.sourceIds[a])}};qH.exports=function(t,r){var i=r[0].trace,a=i.cluster&&i.cluster.enabled,s=i.visible!==!0,l=new FH(t,i.uid,a,s),u=RH(t.gd,r),c=l.below=t.belowLookup["trace-"+i.uid],v,m,_;if(a)for(l.addSource("circle",u.circle,i.cluster),v=0;v<pu.cluster.length;v++)m=pu.cluster[v],_=u[m],l.addLayer(m,_,c);else for(v=0;v<pu.nonCluster.length;v++)m=pu.nonCluster[v],_=u[m],l.addSource(m,_,i.cluster),l.addLayer(m,_,c);return r[0].trace._glTrace=l,l}});var e3=he((_3e,OH)=>{"use strict";var upe=Bf(),EA=Nt(),fpe=gT(),cpe=EA.fillText,hpe=Bi().BADNUM,vpe=qc().traceLayerPrefix;function dpe(e,t,r){var i=e.cd,a=i[0].trace,s=e.xa,l=e.ya,u=e.subplot,c=[],v=vpe+a.uid+"-circle",m=a.cluster&&a.cluster.enabled;if(m){var _=u.map.queryRenderedFeatures(null,{layers:[v]});c=_.map(function(Y){return Y.id})}var T=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),M=T*360,k=t-M;function L(Y){var J=Y.lonlat;if(J[0]===hpe||m&&c.indexOf(Y.i+1)===-1)return 1/0;var re=EA.modHalf(J[0],360),ne=J[1],oe=u.project([re,ne]),ue=oe.x-s.c2p([k,ne]),me=oe.y-l.c2p([re,r]),Se=Math.max(3,Y.mrc||0);return Math.max(Math.sqrt(ue*ue+me*me)-Se,1-3/Se)}if(upe.getClosest(i,L,e),e.index!==!1){var E=i[e.index],I=E.lonlat,R=[EA.modHalf(I[0],360)+M,I[1]],N=s.c2p(R),z=l.c2p(R),B=E.mrc||1;e.x0=N-B,e.x1=N+B,e.y0=z-B,e.y1=z+B;var H={};H[a.subplot]={_subplot:u};var V=a._module.formatLabels(E,a,H);return e.lonLabel=V.lonLabel,e.latLabel=V.latLabel,e.color=fpe(a,E),e.extraText=BH(a,E,i[0].t.labels),e.hovertemplate=a.hovertemplate,[e]}}function BH(e,t,r){if(e.hovertemplate)return;var i=t.hi||e.hoverinfo,a=i.split("+"),s=a.indexOf("all")!==-1,l=a.indexOf("lon")!==-1,u=a.indexOf("lat")!==-1,c=t.lonlat,v=[];function m(_){return _+"\xB0"}return s||l&&u?v.push("("+m(c[1])+", "+m(c[0])+")"):l?v.push(r.lon+m(c[0])):u&&v.push(r.lat+m(c[1])),(s||a.indexOf("text")!==-1)&&cpe(t,e,v),v.join("<br>")}OH.exports={hoverPoints:dpe,getExtraText:BH}});var VH=he((x3e,UH)=>{"use strict";UH.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t}});var GH=he((b3e,HH)=>{"use strict";var ppe=Nt(),mpe=is(),ype=Bi().BADNUM;HH.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],u=i[0].trace,c;if(!mpe.hasMarkers(u))return[];if(r===!1)for(c=0;c<i.length;c++)i[c].selected=0;else for(c=0;c<i.length;c++){var v=i[c],m=v.lonlat;if(m[0]!==ype){var _=[ppe.modHalf(m[0],360),m[1]],T=[a.c2p(_),s.c2p(_)];r.contains(T,null,c,t)?(l.push({pointNumber:c,lon:m[0],lat:m[1]}),v.selected=1):v.selected=0}}return l}});var DA=he((LA,PA)=>{(function(e,t){typeof LA=="object"&&typeof PA!="undefined"?PA.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.mapboxgl=t())})(LA,function(){"use strict";var e,t,r;function i(a,s){if(!e)e=s;else if(!t)t=s;else{var l="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",u={};e(u),r=s(u),typeof window!="undefined"&&(r.workerUrl=window.URL.createObjectURL(new Blob([l],{type:"text/javascript"})))}}return i(["exports"],function(a){"use strict";function s(n,o){return o={exports:{}},n(o,o.exports),o.exports}var l="1.13.4",u=c;function c(n,o,f,p){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=p,this.p2x=f,this.p2y=p}c.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},c.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},c.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},c.prototype.solveCurveX=function(n,o){typeof o=="undefined"&&(o=1e-6);var f,p,x,A,C;for(x=n,C=0;C<8;C++){if(A=this.sampleCurveX(x)-n,Math.abs(A)<o)return x;var q=this.sampleCurveDerivativeX(x);if(Math.abs(q)<1e-6)break;x=x-A/q}if(f=0,p=1,x=n,x<f)return f;if(x>p)return p;for(;f<p;){if(A=this.sampleCurveX(x),Math.abs(A-n)<o)return x;n>A?f=x:p=x,x=(p-f)*.5+f}return x},c.prototype.solve=function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))};var v=m;function m(n,o){this.x=n,this.y=o}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,o){return this.clone()._rotateAround(n,o)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var o=n.x-this.x,f=n.y-this.y;return o*o+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,o){return Math.atan2(this.x*o-this.y*n,this.x*n+this.y*o)},_matMult:function(n){var o=n[0]*this.x+n[1]*this.y,f=n[2]*this.x+n[3]*this.y;return this.x=o,this.y=f,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var o=Math.cos(n),f=Math.sin(n),p=o*this.x-f*this.y,x=f*this.x+o*this.y;return this.x=p,this.y=x,this},_rotateAround:function(n,o){var f=Math.cos(n),p=Math.sin(n),x=o.x+f*(this.x-o.x)-p*(this.y-o.y),A=o.y+p*(this.x-o.x)+f*(this.y-o.y);return this.x=x,this.y=A,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(n){return n instanceof m?n:Array.isArray(n)?new m(n[0],n[1]):n};var _=typeof self!="undefined"?self:{};function T(n,o){if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(var f=0;f<n.length;f++)if(!T(n[f],o[f]))return!1;return!0}if(typeof n=="object"&&n!==null&&o!==null){if(typeof o!="object")return!1;var p=Object.keys(n);if(p.length!==Object.keys(o).length)return!1;for(var x in n)if(!T(n[x],o[x]))return!1;return!0}return n===o}var M=Math.pow(2,53)-1;function k(n){if(n<=0)return 0;if(n>=1)return 1;var o=n*n,f=o*n;return 4*(n<.5?f:3*(n-o)+f-.75)}function L(n,o,f,p){var x=new u(n,o,f,p);return function(A){return x.solve(A)}}var E=L(.25,.1,.25,1);function I(n,o,f){return Math.min(f,Math.max(o,n))}function R(n,o,f){var p=f-o,x=((n-o)%p+p)%p+o;return x===o?f:x}function N(n,o,f){if(!n.length)return f(null,[]);var p=n.length,x=new Array(n.length),A=null;n.forEach(function(C,q){o(C,function(W,j){W&&(A=W),x[q]=j,--p===0&&f(A,x)})})}function z(n){var o=[];for(var f in n)o.push(n[f]);return o}function B(n,o){var f=[];for(var p in n)p in o||f.push(p);return f}function H(n){for(var o=[],f=arguments.length-1;f-- >0;)o[f]=arguments[f+1];for(var p=0,x=o;p<x.length;p+=1){var A=x[p];for(var C in A)n[C]=A[C]}return n}function V(n,o){for(var f={},p=0;p<o.length;p++){var x=o[p];x in n&&(f[x]=n[x])}return f}var Y=1;function J(){return Y++}function re(){function n(o){return o?(o^Math.random()*16>>o/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}return n()}function ne(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function oe(n){return n?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n):!1}function ue(n,o){n.forEach(function(f){o[f]&&(o[f]=o[f].bind(o))})}function me(n,o){return n.indexOf(o,n.length-o.length)!==-1}function Se(n,o,f){var p={};for(var x in n)p[x]=o.call(f||this,n[x],x,n);return p}function Ce(n,o,f){var p={};for(var x in n)o.call(f||this,n[x],x,n)&&(p[x]=n[x]);return p}function Me(n){return Array.isArray(n)?n.map(Me):typeof n=="object"&&n?Se(n,Me):n}function _e(n,o){for(var f=0;f<n.length;f++)if(o.indexOf(n[f])>=0)return!0;return!1}var Te={};function Ae(n){Te[n]||(typeof console!="undefined"&&console.warn(n),Te[n]=!0)}function Le(n,o,f){return(f.y-n.y)*(o.x-n.x)>(o.y-n.y)*(f.x-n.x)}function Ke(n){for(var o=0,f=0,p=n.length,x=p-1,A=void 0,C=void 0;f<p;x=f++)A=n[f],C=n[x],o+=(C.x-A.x)*(A.y+C.y);return o}function ct(n){var o=n[0],f=n[1],p=n[2];return f+=90,f*=Math.PI/180,p*=Math.PI/180,{x:o*Math.cos(f)*Math.sin(p),y:o*Math.sin(f)*Math.sin(p),z:o*Math.cos(p)}}function it(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ut(n){var o=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,f={};if(n.replace(o,function(x,A,C,q){var W=C||q;return f[A]=W?W.toLowerCase():!0,""}),f["max-age"]){var p=parseInt(f["max-age"],10);isNaN(p)?delete f["max-age"]:f["max-age"]=p}return f}var Ge=null;function xt(n){if(Ge==null){var o=n.navigator?n.navigator.userAgent:null;Ge=!!n.safari||!!(o&&(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ge}function at(n){try{var o=_[n];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch(f){return!1}}function At(n){return _.btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(o,f){return String.fromCharCode(+("0x"+f))}))}function kt(n){return decodeURIComponent(_.atob(n).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var mt=_.performance&&_.performance.now?_.performance.now.bind(_.performance):Date.now.bind(Date),ye=_.requestAnimationFrame||_.mozRequestAnimationFrame||_.webkitRequestAnimationFrame||_.msRequestAnimationFrame,Re=_.cancelAnimationFrame||_.mozCancelAnimationFrame||_.webkitCancelAnimationFrame||_.msCancelAnimationFrame,xe,et,vt={now:mt,frame:function(o){var f=ye(o);return{cancel:function(){return Re(f)}}},getImageData:function(o,f){f===void 0&&(f=0);var p=_.document.createElement("canvas"),x=p.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return p.width=o.width,p.height=o.height,x.drawImage(o,0,0,o.width,o.height),x.getImageData(-f,-f,o.width+2*f,o.height+2*f)},resolveURL:function(o){return xe||(xe=_.document.createElement("a")),xe.href=o,xe.href},hardwareConcurrency:_.navigator&&_.navigator.hardwareConcurrency||4,get devicePixelRatio(){return _.devicePixelRatio},get prefersReducedMotion(){return _.matchMedia?(et==null&&(et=_.matchMedia("(prefers-reduced-motion: reduce)")),et.matches):!1}},tt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Bt={supported:!1,testSupport:gt},Mt,Ct=!1,Rt,Ot=!1;_.document&&(Rt=_.document.createElement("img"),Rt.onload=function(){Mt&&Et(Mt),Mt=null,Ot=!0},Rt.onerror=function(){Ct=!0,Mt=null},Rt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function gt(n){Ct||!Rt||(Ot?Et(n):Mt=n)}function Et(n){var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,Rt),n.isContextLost())return;Bt.supported=!0}catch(f){}n.deleteTexture(o),Ct=!0}var ir="01";function Gt(){for(var n="1",o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",f="",p=0;p<10;p++)f+=o[Math.floor(Math.random()*62)];var x=12*60*60*1e3,A=[n,ir,f].join(""),C=Date.now()+x;return{token:A,tokenExpiresAt:C}}var Ne=function(o,f){this._transformRequestFn=o,this._customAccessToken=f,this._createSkuToken()};Ne.prototype._createSkuToken=function(){var o=Gt();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt},Ne.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ne.prototype.transformRequest=function(o,f){return this._transformRequestFn?this._transformRequestFn(o,f)||{url:o}:{url:o}},Ne.prototype.normalizeStyleURL=function(o,f){if(!ft(o))return o;var p=Vt(o);return p.path="/styles/v1"+p.path,this._makeAPIURL(p,this._customAccessToken||f)},Ne.prototype.normalizeGlyphsURL=function(o,f){if(!ft(o))return o;var p=Vt(o);return p.path="/fonts/v1"+p.path,this._makeAPIURL(p,this._customAccessToken||f)},Ne.prototype.normalizeSourceURL=function(o,f){if(!ft(o))return o;var p=Vt(o);return p.path="/v4/"+p.authority+".json",p.params.push("secure"),this._makeAPIURL(p,this._customAccessToken||f)},Ne.prototype.normalizeSpriteURL=function(o,f,p,x){var A=Vt(o);return ft(o)?(A.path="/styles/v1"+A.path+"/sprite"+f+p,this._makeAPIURL(A,this._customAccessToken||x)):(A.path+=""+f+p,Kt(A))},Ne.prototype.normalizeTileURL=function(o,f){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!ft(o))return o;var p=Vt(o),x=/(\.(png|jpg)\d*)(?=$)/,A=/^.+\/v4\//,C=vt.devicePixelRatio>=2||f===512?"@2x":"",q=Bt.supported?".webp":"$1";p.path=p.path.replace(x,""+C+q),p.path=p.path.replace(A,"/"),p.path="/v4"+p.path;var W=this._customAccessToken||Tt(p.params)||tt.ACCESS_TOKEN;return tt.REQUIRE_ACCESS_TOKEN&&W&&this._skuToken&&p.params.push("sku="+this._skuToken),this._makeAPIURL(p,W)},Ne.prototype.canonicalizeTileURL=function(o,f){var p="/v4/",x=/\.[\w]+$/,A=Vt(o);if(!A.path.match(/(^\/v4\/)/)||!A.path.match(x))return o;var C="mapbox://tiles/";C+=A.path.replace(p,"");var q=A.params;return f&&(q=q.filter(function(W){return!W.match(/^access_token=/)})),q.length&&(C+="?"+q.join("&")),C},Ne.prototype.canonicalizeTileset=function(o,f){for(var p=f?ft(f):!1,x=[],A=0,C=o.tiles||[];A<C.length;A+=1){var q=C[A];xr(q)?x.push(this.canonicalizeTileURL(q,p)):x.push(q)}return x},Ne.prototype._makeAPIURL=function(o,f){var p="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",x=Vt(tt.API_URL);if(o.protocol=x.protocol,o.authority=x.authority,o.protocol==="http"){var A=o.params.indexOf("secure");A>=0&&o.params.splice(A,1)}if(x.path!=="/"&&(o.path=""+x.path+o.path),!tt.REQUIRE_ACCESS_TOKEN)return Kt(o);if(f=f||tt.ACCESS_TOKEN,!f)throw new Error("An API access token is required to use Mapbox GL. "+p);if(f[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+p);return o.params=o.params.filter(function(C){return C.indexOf("access_token")===-1}),o.params.push("access_token="+f),Kt(o)};function ft(n){return n.indexOf("mapbox:")===0}var pt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function xr(n){return pt.test(n)}function pr(n){return n.indexOf("sku=")>0&&xr(n)}function Tt(n){for(var o=0,f=n;o<f.length;o+=1){var p=f[o],x=p.match(/^access_token=(.*)$/);if(x)return x[1]}return null}var wt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Vt(n){var o=n.match(wt);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function Kt(n){var o=n.params.length?"?"+n.params.join("&"):"";return n.protocol+"://"+n.authority+n.path+o}var Ht="mapbox.eventData";function Ut(n){if(!n)return null;var o=n.split(".");if(!o||o.length!==3)return null;try{var f=JSON.parse(kt(o[1]));return f}catch(p){return null}}var er=function(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};er.prototype.getStorageKey=function(o){var f=Ut(tt.ACCESS_TOKEN),p="";return f&&f.u?p=At(f.u):p=tt.ACCESS_TOKEN||"",o?Ht+"."+o+":"+p:Ht+":"+p},er.prototype.fetchEventData=function(){var o=at("localStorage"),f=this.getStorageKey(),p=this.getStorageKey("uuid");if(o)try{var x=_.localStorage.getItem(f);x&&(this.eventData=JSON.parse(x));var A=_.localStorage.getItem(p);A&&(this.anonId=A)}catch(C){Ae("Unable to read from LocalStorage")}},er.prototype.saveEventData=function(){var o=at("localStorage"),f=this.getStorageKey(),p=this.getStorageKey("uuid");if(o)try{_.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&_.localStorage.setItem(f,JSON.stringify(this.eventData))}catch(x){Ae("Unable to write to LocalStorage")}},er.prototype.processRequests=function(o){},er.prototype.postEvent=function(o,f,p,x){var A=this;if(tt.EVENTS_URL){var C=Vt(tt.EVENTS_URL);C.params.push("access_token="+(x||tt.ACCESS_TOKEN||""));var q={event:this.type,created:new Date(o).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:l,skuId:ir,userId:this.anonId},W=f?H(q,f):q,j={url:Kt(C),headers:{"Content-Type":"text/plain"},body:JSON.stringify([W])};this.pendingRequest=Ve(j,function(Q){A.pendingRequest=null,p(Q),A.saveEventData(),A.processRequests(x)})}},er.prototype.queueRequest=function(o,f){this.queue.push(o),this.processRequests(f)};var Mr=function(n){function o(){n.call(this,"map.load"),this.success={},this.skuToken=""}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.postMapLoadEvent=function(p,x,A,C){this.skuToken=A,(tt.EVENTS_URL&&C||tt.ACCESS_TOKEN&&Array.isArray(p)&&p.some(function(q){return ft(q)||xr(q)}))&&this.queueRequest({id:x,timestamp:Date.now()},C)},o.prototype.processRequests=function(p){var x=this;if(!(this.pendingRequest||this.queue.length===0)){var A=this.queue.shift(),C=A.id,q=A.timestamp;C&&this.success[C]||(this.anonId||this.fetchEventData(),oe(this.anonId)||(this.anonId=re()),this.postEvent(q,{skuToken:this.skuToken},function(W){W||C&&(x.success[C]=!0)},p))}},o}(er),br=function(n){function o(f){n.call(this,"appUserTurnstile"),this._customAccessToken=f}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.postTurnstileEvent=function(p,x){tt.EVENTS_URL&&tt.ACCESS_TOKEN&&Array.isArray(p)&&p.some(function(A){return ft(A)||xr(A)})&&this.queueRequest(Date.now(),x)},o.prototype.processRequests=function(p){var x=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var A=Ut(tt.ACCESS_TOKEN),C=A?A.u:tt.ACCESS_TOKEN,q=C!==this.eventData.tokenU;oe(this.anonId)||(this.anonId=re(),q=!0);var W=this.queue.shift();if(this.eventData.lastSuccess){var j=new Date(this.eventData.lastSuccess),Q=new Date(W),ie=(W-this.eventData.lastSuccess)/(24*60*60*1e3);q=q||ie>=1||ie<-1||j.getDate()!==Q.getDate()}else q=!0;if(!q)return this.processRequests();this.postEvent(W,{"enabled.telemetry":!1},function(pe){pe||(x.eventData.lastSuccess=W,x.eventData.tokenU=C)},p)}},o}(er),Pt=new br,Fe=Pt.postTurnstileEvent.bind(Pt),He=new Mr,bt=He.postMapLoadEvent.bind(He),dt="mapbox-tiles",gr=500,Lr=50,Ar=1e3*60*7,Hr;function xa(){_.caches&&!Hr&&(Hr=_.caches.open(dt))}var Ca;function Pa(n,o){if(Ca===void 0)try{new Response(new ReadableStream),Ca=!0}catch(f){Ca=!1}Ca?o(n.body):n.blob().then(o)}function Fi(n,o,f){if(xa(),!!Hr){var p={status:o.status,statusText:o.statusText,headers:new _.Headers};o.headers.forEach(function(C,q){return p.headers.set(q,C)});var x=ut(o.headers.get("Cache-Control")||"");if(!x["no-store"]){x["max-age"]&&p.headers.set("Expires",new Date(f+x["max-age"]*1e3).toUTCString());var A=new Date(p.headers.get("Expires")).getTime()-f;A<Ar||Pa(o,function(C){var q=new _.Response(C,p);xa(),Hr&&Hr.then(function(W){return W.put(Ki(n.url),q)}).catch(function(W){return Ae(W.message)})})}}}function Ki(n){var o=n.indexOf("?");return o<0?n:n.slice(0,o)}function gn(n,o){if(xa(),!Hr)return o(null);var f=Ki(n.url);Hr.then(function(p){p.match(f).then(function(x){var A=Xi(x);p.delete(f),A&&p.put(f,x.clone()),o(null,x,A)}).catch(o)}).catch(o)}function Xi(n){if(!n)return!1;var o=new Date(n.headers.get("Expires")||0),f=ut(n.headers.get("Cache-Control")||"");return o>Date.now()&&!f["no-cache"]}var Qn=1/0;function Pn(n){Qn++,Qn>Lr&&(n.getActor().send("enforceCacheSizeLimit",gr),Qn=0)}function Gi(n){xa(),Hr&&Hr.then(function(o){o.keys().then(function(f){for(var p=0;p<f.length-n;p++)o.delete(f[p])})})}function pa(n){var o=_.caches.delete(dt);n&&o.catch(n).then(function(){return n()})}function Gr(n,o){gr=n,Lr=o}var Qa;function Zr(){return Qa==null&&(Qa=_.OffscreenCanvas&&new _.OffscreenCanvas(1,1).getContext("2d")&&typeof _.createImageBitmap=="function"),Qa}var vi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(vi);var ga=function(n){function o(f,p,x){p===401&&xr(x)&&(f+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),n.call(this,f),this.status=p,this.url=x,this.name=this.constructor.name,this.message=f}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},o}(Error),le=it()?function(){return self.worker&&self.worker.referrer}:function(){return(_.location.protocol==="blob:"?_.parent:_).location.href},ee=function(n){return/^file:/.test(n)||/^file:/.test(le())&&!/^\w+:/.test(n)};function se(n,o){var f=new _.AbortController,p=new _.Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:le(),signal:f.signal}),x=!1,A=!1,C=pr(p.url);n.type==="json"&&p.headers.set("Accept","application/json");var q=function(j,Q,ie){if(!A){if(j&&j.message!=="SecurityError"&&Ae(j),Q&&ie)return W(Q);var pe=Date.now();_.fetch(p).then(function(ve){if(ve.ok){var ke=C?ve.clone():null;return W(ve,ke,pe)}else return o(new ga(ve.statusText,ve.status,n.url))}).catch(function(ve){ve.code!==20&&o(new Error(ve.message))})}},W=function(j,Q,ie){(n.type==="arrayBuffer"?j.arrayBuffer():n.type==="json"?j.json():j.text()).then(function(pe){A||(Q&&ie&&Fi(p,Q,ie),x=!0,o(null,pe,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(function(pe){A||o(new Error(pe.message))})};return C?gn(p,q):q(null,null),{cancel:function(){A=!0,x||f.abort()}}}function ce(n,o){var f=new _.XMLHttpRequest;f.open(n.method||"GET",n.url,!0),n.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(var p in n.headers)f.setRequestHeader(p,n.headers[p]);return n.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=n.credentials==="include",f.onerror=function(){o(new Error(f.statusText))},f.onload=function(){if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){var x=f.response;if(n.type==="json")try{x=JSON.parse(f.response)}catch(A){return o(A)}o(null,x,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else o(new ga(f.statusText,f.status,n.url))},f.send(n.body),{cancel:function(){return f.abort()}}}var Ee=function(n,o){if(!ee(n.url)){if(_.fetch&&_.Request&&_.AbortController&&_.Request.prototype.hasOwnProperty("signal"))return se(n,o);if(it()&&self.worker&&self.worker.actor){var f=!0;return self.worker.actor.send("getResource",n,o,void 0,f)}}return ce(n,o)},Be=function(n,o){return Ee(H(n,{type:"json"}),o)},rt=function(n,o){return Ee(H(n,{type:"arrayBuffer"}),o)},Ve=function(n,o){return Ee(H(n,{method:"POST"}),o)};function yt(n){var o=_.document.createElement("a");return o.href=n,o.protocol===_.document.location.protocol&&o.host===_.document.location.host}var Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ft(n,o,f,p){var x=new _.Image,A=_.URL;x.onload=function(){o(null,x),A.revokeObjectURL(x.src),x.onload=null,_.requestAnimationFrame(function(){x.src=Dt})},x.onerror=function(){return o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var C=new _.Blob([new Uint8Array(n)],{type:"image/png"});x.cacheControl=f,x.expires=p,x.src=n.byteLength?A.createObjectURL(C):Dt}function tr(n,o){var f=new _.Blob([new Uint8Array(n)],{type:"image/png"});_.createImageBitmap(f).then(function(p){o(null,p)}).catch(function(p){o(new Error("Could not load image because of "+p.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var Wt,Tr,Yr=function(){Wt=[],Tr=0};Yr();var Br=function(n,o){if(Bt.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),Tr>=tt.MAX_PARALLEL_IMAGE_REQUESTS){var f={requestParameters:n,callback:o,cancelled:!1,cancel:function(){this.cancelled=!0}};return Wt.push(f),f}Tr++;var p=!1,x=function(){if(!p)for(p=!0,Tr--;Wt.length&&Tr<tt.MAX_PARALLEL_IMAGE_REQUESTS;){var C=Wt.shift(),q=C.requestParameters,W=C.callback,j=C.cancelled;j||(C.cancel=Br(q,W).cancel)}},A=rt(n,function(C,q,W,j){x(),C?o(C):q&&(Zr()?tr(q,o):Ft(q,o,W,j))});return{cancel:function(){A.cancel(),x()}}},ca=function(n,o){var f=_.document.createElement("video");f.muted=!0,f.onloadstart=function(){o(null,f)};for(var p=0;p<n.length;p++){var x=_.document.createElement("source");yt(n[p])||(f.crossOrigin="Anonymous"),x.src=n[p],f.appendChild(x)}return{cancel:function(){}}};function ua(n,o,f){var p=f[n]&&f[n].indexOf(o)!==-1;p||(f[n]=f[n]||[],f[n].push(o))}function Na(n,o,f){if(f&&f[n]){var p=f[n].indexOf(o);p!==-1&&f[n].splice(p,1)}}var ii=function(o,f){f===void 0&&(f={}),H(this,f),this.type=o},Wr=function(n){function o(f,p){p===void 0&&(p={}),n.call(this,"error",H({error:f},p))}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(ii),yr=function(){};yr.prototype.on=function(o,f){return this._listeners=this._listeners||{},ua(o,f,this._listeners),this},yr.prototype.off=function(o,f){return Na(o,f,this._listeners),Na(o,f,this._oneTimeListeners),this},yr.prototype.once=function(o,f){return this._oneTimeListeners=this._oneTimeListeners||{},ua(o,f,this._oneTimeListeners),this},yr.prototype.fire=function(o,f){typeof o=="string"&&(o=new ii(o,f||{}));var p=o.type;if(this.listens(p)){o.target=this;for(var x=this._listeners&&this._listeners[p]?this._listeners[p].slice():[],A=0,C=x;A<C.length;A+=1){var q=C[A];q.call(this,o)}for(var W=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[],j=0,Q=W;j<Q.length;j+=1){var ie=Q[j];Na(p,ie,this._oneTimeListeners),ie.call(this,o)}var pe=this._eventedParent;pe&&(H(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),pe.fire(o))}else o instanceof Wr&&console.error(o.error);return this},yr.prototype.listens=function(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)},yr.prototype.setEventedParent=function(o,f){return this._eventedParent=o,this._eventedParentData=f,this};var ea=8,_a={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},nr={"*":{type:"source"}},wi=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Da={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},si={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},fa={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Dn={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Eo={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ms={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ya={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},$n=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],gu={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ui={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},gl={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},hp={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vc={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hc={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wv={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tv={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_u={type:"array",value:"*"},_l={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},vp={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},ef={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Xf={type:"array",value:"*",minimum:1},Qi={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Zo=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],yo={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},xl={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Yo={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},xu={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dp={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Av={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},tf={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Mv={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Sv={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},so={"*":{type:"string"}},Xt={$version:ea,$root:_a,sources:nr,source:wi,source_vector:Da,source_raster:si,source_raster_dem:fa,source_geojson:Dn,source_video:Eo,source_image:Ms,layer:Ya,layout:$n,layout_background:gu,layout_fill:Ui,layout_circle:gl,layout_heatmap:hp,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Vc,layout_symbol:Hc,layout_raster:wv,layout_hillshade:Tv,filter:_u,filter_operator:_l,geometry_type:vp,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:ef,expression:Xf,light:Qi,paint:Zo,paint_fill:yo,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:xl,paint_circle:Yo,paint_heatmap:xu,paint_symbol:dp,paint_raster:Av,paint_hillshade:tf,paint_background:Mv,transition:Sv,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:so},Or=function(o,f,p,x){this.message=(o?o+": ":"")+p,x&&(this.identifier=x),f!=null&&f.__line__&&(this.line=f.__line__)};function pp(n){var o=n.key,f=n.value;return f?[new Or(o,f,"constants have been deprecated as of v8")]:[]}function bu(n){for(var o=[],f=arguments.length-1;f-- >0;)o[f]=arguments[f+1];for(var p=0,x=o;p<x.length;p+=1){var A=x[p];for(var C in A)n[C]=A[C]}return n}function an(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function bl(n){if(Array.isArray(n))return n.map(bl);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var o={};for(var f in n)o[f]=bl(n[f]);return o}return an(n)}var Ss=function(n){function o(f,p){n.call(this,p),this.message=p,this.key=f}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(Error),rf=function(o,f){f===void 0&&(f=[]),this.parent=o,this.bindings={};for(var p=0,x=f;p<x.length;p+=1){var A=x[p],C=A[0],q=A[1];this.bindings[C]=q}};rf.prototype.concat=function(o){return new rf(this,o)},rf.prototype.get=function(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(o+" not found in scope.")},rf.prototype.has=function(o){return this.bindings[o]?!0:this.parent?this.parent.has(o):!1};var af={kind:"null"},Cr={kind:"number"},Ta={kind:"string"},Aa={kind:"boolean"},ks={kind:"color"},wl={kind:"object"},Sa={kind:"value"},Qs={kind:"error"},wu={kind:"collator"},cs={kind:"formatted"},Tl={kind:"resolvedImage"};function go(n,o){return{kind:"array",itemType:n,N:o}}function ki(n){if(n.kind==="array"){var o=ki(n.itemType);return typeof n.N=="number"?"array<"+o+", "+n.N+">":n.itemType.kind==="value"?"array":"array<"+o+">"}else return n.kind}var Cs=[af,Cr,Ta,Aa,ks,cs,wl,go(Sa),Tl];function hs(n,o){if(o.kind==="error")return null;if(n.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!hs(n.itemType,o.itemType))&&(typeof n.N!="number"||n.N===o.N))return null}else{if(n.kind===o.kind)return null;if(n.kind==="value")for(var f=0,p=Cs;f<p.length;f+=1){var x=p[f];if(!hs(x,o))return null}}return"Expected "+ki(n)+" but found "+ki(o)+" instead."}function Gc(n,o){return o.some(function(f){return f.kind===n.kind})}function Tu(n,o){return o.some(function(f){return f==="null"?n===null:f==="array"?Array.isArray(n):f==="object"?n&&!Array.isArray(n)&&typeof n=="object":f===typeof n})}var Bm=s(function(n,o){var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function p(j){return j=Math.round(j),j<0?0:j>255?255:j}function x(j){return j<0?0:j>1?1:j}function A(j){return j[j.length-1]==="%"?p(parseFloat(j)/100*255):p(parseInt(j))}function C(j){return j[j.length-1]==="%"?x(parseFloat(j)/100):x(parseFloat(j))}function q(j,Q,ie){return ie<0?ie+=1:ie>1&&(ie-=1),ie*6<1?j+(Q-j)*ie*6:ie*2<1?Q:ie*3<2?j+(Q-j)*(2/3-ie)*6:j}function W(j){var Q=j.replace(/ /g,"").toLowerCase();if(Q in f)return f[Q].slice();if(Q[0]==="#"){if(Q.length===4){var ie=parseInt(Q.substr(1),16);return ie>=0&&ie<=4095?[(ie&3840)>>4|(ie&3840)>>8,ie&240|(ie&240)>>4,ie&15|(ie&15)<<4,1]:null}else if(Q.length===7){var ie=parseInt(Q.substr(1),16);return ie>=0&&ie<=16777215?[(ie&16711680)>>16,(ie&65280)>>8,ie&255,1]:null}return null}var pe=Q.indexOf("("),ve=Q.indexOf(")");if(pe!==-1&&ve+1===Q.length){var ke=Q.substr(0,pe),qe=Q.substr(pe+1,ve-(pe+1)).split(","),st=1;switch(ke){case"rgba":if(qe.length!==4)return null;st=C(qe.pop());case"rgb":return qe.length!==3?null:[A(qe[0]),A(qe[1]),A(qe[2]),st];case"hsla":if(qe.length!==4)return null;st=C(qe.pop());case"hsl":if(qe.length!==3)return null;var Qe=(parseFloat(qe[0])%360+360)%360/360,Lt=C(qe[1]),_t=C(qe[2]),St=_t<=.5?_t*(Lt+1):_t+Lt-_t*Lt,It=_t*2-St;return[p(q(It,St,Qe+1/3)*255),p(q(It,St,Qe)*255),p(q(It,St,Qe-1/3)*255),st];default:return null}}return null}try{o.parseCSSColor=W}catch(j){}}),jf=Bm.parseCSSColor,ni=function(o,f,p,x){x===void 0&&(x=1),this.r=o,this.g=f,this.b=p,this.a=x};ni.parse=function(o){if(o){if(o instanceof ni)return o;if(typeof o=="string"){var f=jf(o);if(f)return new ni(f[0]/255*f[3],f[1]/255*f[3],f[2]/255*f[3],f[3])}}},ni.prototype.toString=function(){var o=this.toArray(),f=o[0],p=o[1],x=o[2],A=o[3];return"rgba("+Math.round(f)+","+Math.round(p)+","+Math.round(x)+","+A+")"},ni.prototype.toArray=function(){var o=this,f=o.r,p=o.g,x=o.b,A=o.a;return A===0?[0,0,0,0]:[f*255/A,p*255/A,x*255/A,A]},ni.black=new ni(0,0,0,1),ni.white=new ni(1,1,1,1),ni.transparent=new ni(0,0,0,0),ni.red=new ni(1,0,0,1);var Jf=function(o,f,p){o?this.sensitivity=f?"variant":"case":this.sensitivity=f?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Jf.prototype.compare=function(o,f){return this.collator.compare(o,f)},Jf.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var kv=function(o,f,p,x,A){this.text=o,this.image=f,this.scale=p,this.fontStack=x,this.textColor=A},_n=function(o){this.sections=o};_n.fromString=function(o){return new _n([new kv(o,null,null,null,null)])},_n.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(o){return o.text.length!==0||o.image&&o.image.name.length!==0})},_n.factory=function(o){return o instanceof _n?o:_n.fromString(o)},_n.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(o){return o.text}).join("")},_n.prototype.serialize=function(){for(var o=["format"],f=0,p=this.sections;f<p.length;f+=1){var x=p[f];if(x.image){o.push(["image",x.image.name]);continue}o.push(x.text);var A={};x.fontStack&&(A["text-font"]=["literal",x.fontStack.split(",")]),x.scale&&(A["font-scale"]=x.scale),x.textColor&&(A["text-color"]=["rgba"].concat(x.textColor.toArray())),o.push(A)}return o};var zn=function(o){this.name=o.name,this.available=o.available};zn.prototype.toString=function(){return this.name},zn.fromString=function(o){return o?new zn({name:o,available:!1}):null},zn.prototype.serialize=function(){return["image",this.name]};function mp(n,o,f,p){if(!(typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof f=="number"&&f>=0&&f<=255)){var x=typeof p=="number"?[n,o,f,p]:[n,o,f];return"Invalid rgba value ["+x.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof p=="undefined"||typeof p=="number"&&p>=0&&p<=1?null:"Invalid rgba value ["+[n,o,f,p].join(", ")+"]: 'a' must be between 0 and 1."}function nf(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof ni)return!0;if(n instanceof Jf)return!0;if(n instanceof _n)return!0;if(n instanceof zn)return!0;if(Array.isArray(n)){for(var o=0,f=n;o<f.length;o+=1){var p=f[o];if(!nf(p))return!1}return!0}else if(typeof n=="object"){for(var x in n)if(!nf(n[x]))return!1;return!0}else return!1}function nn(n){if(n===null)return af;if(typeof n=="string")return Ta;if(typeof n=="boolean")return Aa;if(typeof n=="number")return Cr;if(n instanceof ni)return ks;if(n instanceof Jf)return wu;if(n instanceof _n)return cs;if(n instanceof zn)return Tl;if(Array.isArray(n)){for(var o=n.length,f,p=0,x=n;p<x.length;p+=1){var A=x[p],C=nn(A);if(!f)f=C;else{if(f===C)continue;f=Sa;break}}return go(f||Sa,o)}else return wl}function Lo(n){var o=typeof n;return n===null?"":o==="string"||o==="number"||o==="boolean"?String(n):n instanceof ni||n instanceof _n||n instanceof zn?n.toString():JSON.stringify(n)}var Wo=function(o,f){this.type=o,this.value=f};Wo.parse=function(o,f){if(o.length!==2)return f.error("'literal' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(!nf(o[1]))return f.error("invalid value");var p=o[1],x=nn(p),A=f.expectedType;return x.kind==="array"&&x.N===0&&A&&A.kind==="array"&&(typeof A.N!="number"||A.N===0)&&(x=A),new Wo(x,p)},Wo.prototype.evaluate=function(){return this.value},Wo.prototype.eachChild=function(){},Wo.prototype.outputDefined=function(){return!0},Wo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ni?["rgba"].concat(this.value.toArray()):this.value instanceof _n?this.value.serialize():this.value};var un=function(o){this.name="ExpressionEvaluationError",this.message=o};un.prototype.toJSON=function(){return this.message};var Kf={string:Ta,number:Cr,boolean:Aa,object:wl},on=function(o,f){this.type=o,this.args=f};on.parse=function(o,f){if(o.length<2)return f.error("Expected at least one argument.");var p=1,x,A=o[0];if(A==="array"){var C;if(o.length>2){var q=o[1];if(typeof q!="string"||!(q in Kf)||q==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);C=Kf[q],p++}else C=Sa;var W;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return f.error('The length argument to "array" must be a positive integer literal',2);W=o[2],p++}x=go(C,W)}else x=Kf[A];for(var j=[];p<o.length;p++){var Q=f.parse(o[p],p,Sa);if(!Q)return null;j.push(Q)}return new on(x,j)},on.prototype.evaluate=function(o){for(var f=0;f<this.args.length;f++){var p=this.args[f].evaluate(o),x=hs(this.type,nn(p));if(x){if(f===this.args.length-1)throw new un("Expected value to be of type "+ki(this.type)+", but found "+ki(nn(p))+" instead.")}else return p}return null},on.prototype.eachChild=function(o){this.args.forEach(o)},on.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},on.prototype.serialize=function(){var o=this.type,f=[o.kind];if(o.kind==="array"){var p=o.itemType;if(p.kind==="string"||p.kind==="number"||p.kind==="boolean"){f.push(p.kind);var x=o.N;(typeof x=="number"||this.args.length>1)&&f.push(x)}}return f.concat(this.args.map(function(A){return A.serialize()}))};var Xo=function(o){this.type=cs,this.sections=o};Xo.parse=function(o,f){if(o.length<2)return f.error("Expected at least one argument.");var p=o[1];if(!Array.isArray(p)&&typeof p=="object")return f.error("First argument must be an image or text section.");for(var x=[],A=!1,C=1;C<=o.length-1;++C){var q=o[C];if(A&&typeof q=="object"&&!Array.isArray(q)){A=!1;var W=null;if(q["font-scale"]&&(W=f.parse(q["font-scale"],1,Cr),!W))return null;var j=null;if(q["text-font"]&&(j=f.parse(q["text-font"],1,go(Ta)),!j))return null;var Q=null;if(q["text-color"]&&(Q=f.parse(q["text-color"],1,ks),!Q))return null;var ie=x[x.length-1];ie.scale=W,ie.font=j,ie.textColor=Q}else{var pe=f.parse(o[C],1,Sa);if(!pe)return null;var ve=pe.type.kind;if(ve!=="string"&&ve!=="value"&&ve!=="null"&&ve!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");A=!0,x.push({content:pe,scale:null,font:null,textColor:null})}}return new Xo(x)},Xo.prototype.evaluate=function(o){var f=function(p){var x=p.content.evaluate(o);return nn(x)===Tl?new kv("",x,null,null,null):new kv(Lo(x),null,p.scale?p.scale.evaluate(o):null,p.font?p.font.evaluate(o).join(","):null,p.textColor?p.textColor.evaluate(o):null)};return new _n(this.sections.map(f))},Xo.prototype.eachChild=function(o){for(var f=0,p=this.sections;f<p.length;f+=1){var x=p[f];o(x.content),x.scale&&o(x.scale),x.font&&o(x.font),x.textColor&&o(x.textColor)}},Xo.prototype.outputDefined=function(){return!1},Xo.prototype.serialize=function(){for(var o=["format"],f=0,p=this.sections;f<p.length;f+=1){var x=p[f];o.push(x.content.serialize());var A={};x.scale&&(A["font-scale"]=x.scale.serialize()),x.font&&(A["text-font"]=x.font.serialize()),x.textColor&&(A["text-color"]=x.textColor.serialize()),o.push(A)}return o};var $s=function(o){this.type=Tl,this.input=o};$s.parse=function(o,f){if(o.length!==2)return f.error("Expected two arguments.");var p=f.parse(o[1],1,Ta);return p?new $s(p):f.error("No image name provided.")},$s.prototype.evaluate=function(o){var f=this.input.evaluate(o),p=zn.fromString(f);return p&&o.availableImages&&(p.available=o.availableImages.indexOf(f)>-1),p},$s.prototype.eachChild=function(o){o(this.input)},$s.prototype.outputDefined=function(){return!1},$s.prototype.serialize=function(){return["image",this.input.serialize()]};var Om={"to-boolean":Aa,"to-color":ks,"to-number":Cr,"to-string":Ta},jo=function(o,f){this.type=o,this.args=f};jo.parse=function(o,f){if(o.length<2)return f.error("Expected at least one argument.");var p=o[0];if((p==="to-boolean"||p==="to-string")&&o.length!==2)return f.error("Expected one argument.");for(var x=Om[p],A=[],C=1;C<o.length;C++){var q=f.parse(o[C],C,Sa);if(!q)return null;A.push(q)}return new jo(x,A)},jo.prototype.evaluate=function(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){for(var f,p,x=0,A=this.args;x<A.length;x+=1){var C=A[x];if(f=C.evaluate(o),p=null,f instanceof ni)return f;if(typeof f=="string"){var q=o.parseColor(f);if(q)return q}else if(Array.isArray(f)&&(f.length<3||f.length>4?p="Invalid rbga value "+JSON.stringify(f)+": expected an array containing either three or four numeric values.":p=mp(f[0],f[1],f[2],f[3]),!p))return new ni(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new un(p||"Could not parse color from value '"+(typeof f=="string"?f:String(JSON.stringify(f)))+"'")}else if(this.type.kind==="number"){for(var W=null,j=0,Q=this.args;j<Q.length;j+=1){var ie=Q[j];if(W=ie.evaluate(o),W===null)return 0;var pe=Number(W);if(!isNaN(pe))return pe}throw new un("Could not convert "+JSON.stringify(W)+" to number.")}else return this.type.kind==="formatted"?_n.fromString(Lo(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?zn.fromString(Lo(this.args[0].evaluate(o))):Lo(this.args[0].evaluate(o))},jo.prototype.eachChild=function(o){this.args.forEach(o)},jo.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},jo.prototype.serialize=function(){if(this.type.kind==="formatted")return new Xo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new $s(this.args[0]).serialize();var o=["to-"+this.type.kind];return this.eachChild(function(f){o.push(f.serialize())}),o};var Um=["Unknown","Point","LineString","Polygon"],el=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};el.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},el.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Um[this.feature.type]:this.feature.type:null},el.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},el.prototype.canonicalID=function(){return this.canonical},el.prototype.properties=function(){return this.feature&&this.feature.properties||{}},el.prototype.parseColor=function(o){var f=this._parseColorCache[o];return f||(f=this._parseColorCache[o]=ni.parse(o)),f};var In=function(o,f,p,x){this.name=o,this.type=f,this._evaluate=p,this.args=x};In.prototype.evaluate=function(o){return this._evaluate(o,this.args)},In.prototype.eachChild=function(o){this.args.forEach(o)},In.prototype.outputDefined=function(){return!1},In.prototype.serialize=function(){return[this.name].concat(this.args.map(function(o){return o.serialize()}))},In.parse=function(o,f){var p,x=o[0],A=In.definitions[x];if(!A)return f.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0);for(var C=Array.isArray(A)?A[0]:A.type,q=Array.isArray(A)?[[A[1],A[2]]]:A.overloads,W=q.filter(function(Fr){var Nr=Fr[0];return!Array.isArray(Nr)||Nr.length===o.length-1}),j=null,Q=0,ie=W;Q<ie.length;Q+=1){var pe=ie[Q],ve=pe[0],ke=pe[1];j=new Cl(f.registry,f.path,null,f.scope);for(var qe=[],st=!1,Qe=1;Qe<o.length;Qe++){var Lt=o[Qe],_t=Array.isArray(ve)?ve[Qe-1]:ve.type,St=j.parse(Lt,1+qe.length,_t);if(!St){st=!0;break}qe.push(St)}if(!st){if(Array.isArray(ve)&&ve.length!==qe.length){j.error("Expected "+ve.length+" arguments, but found "+qe.length+" instead.");continue}for(var It=0;It<qe.length;It++){var Jt=Array.isArray(ve)?ve[It]:ve.type,hr=qe[It];j.concat(It+1).checkSubtype(Jt,hr.type)}if(j.errors.length===0)return new In(x,C,ke,qe)}}if(W.length===1)(p=f.errors).push.apply(p,j.errors);else{for(var ur=W.length?W:q,Rr=ur.map(function(Fr){var Nr=Fr[0];return Vm(Nr)}).join(" | "),kr=[],zr=1;zr<o.length;zr++){var Qr=f.parse(o[zr],1+kr.length);if(!Qr)return null;kr.push(ki(Qr.type))}f.error("Expected arguments of type "+Rr+", but found ("+kr.join(", ")+") instead.")}return null},In.register=function(o,f){In.definitions=f;for(var p in f)o[p]=In};function Vm(n){return Array.isArray(n)?"("+n.map(ki).join(", ")+")":"("+ki(n.type)+"...)"}var Al=function(o,f,p){this.type=wu,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=f};Al.parse=function(o,f){if(o.length!==2)return f.error("Expected one argument.");var p=o[1];if(typeof p!="object"||Array.isArray(p))return f.error("Collator options argument must be an object.");var x=f.parse(p["case-sensitive"]===void 0?!1:p["case-sensitive"],1,Aa);if(!x)return null;var A=f.parse(p["diacritic-sensitive"]===void 0?!1:p["diacritic-sensitive"],1,Aa);if(!A)return null;var C=null;return p.locale&&(C=f.parse(p.locale,1,Ta),!C)?null:new Al(x,A,C)},Al.prototype.evaluate=function(o){return new Jf(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)},Al.prototype.eachChild=function(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)},Al.prototype.outputDefined=function(){return!1},Al.prototype.serialize=function(){var o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]};var Ml=8192;function Cv(n,o){n[0]=Math.min(n[0],o[0]),n[1]=Math.min(n[1],o[1]),n[2]=Math.max(n[2],o[0]),n[3]=Math.max(n[3],o[1])}function Hm(n){return(180+n)/360}function Gm(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Zc(n,o){return!(n[0]<=o[0]||n[2]>=o[2]||n[1]<=o[1]||n[3]>=o[3])}function Zm(n,o){var f=Hm(n[0]),p=Gm(n[1]),x=Math.pow(2,o.z);return[Math.round(f*x*Ml),Math.round(p*x*Ml)]}function Ym(n,o,f){var p=n[0]-o[0],x=n[1]-o[1],A=n[0]-f[0],C=n[1]-f[1];return p*C-A*x===0&&p*A<=0&&x*C<=0}function Wm(n,o,f){return o[1]>n[1]!=f[1]>n[1]&&n[0]<(f[0]-o[0])*(n[1]-o[1])/(f[1]-o[1])+o[0]}function Ev(n,o){for(var f=!1,p=0,x=o.length;p<x;p++)for(var A=o[p],C=0,q=A.length;C<q-1;C++){if(Ym(n,A[C],A[C+1]))return!1;Wm(n,A[C],A[C+1])&&(f=!f)}return f}function Xm(n,o){for(var f=0;f<o.length;f++)if(Ev(n,o[f]))return!0;return!1}function jm(n,o){return n[0]*o[1]-n[1]*o[0]}function Lv(n,o,f,p){var x=n[0]-f[0],A=n[1]-f[1],C=o[0]-f[0],q=o[1]-f[1],W=p[0]-f[0],j=p[1]-f[1],Q=x*j-W*A,ie=C*j-W*q;return Q>0&&ie<0||Q<0&&ie>0}function yp(n,o,f,p){var x=[o[0]-n[0],o[1]-n[1]],A=[p[0]-f[0],p[1]-f[1]];return jm(A,x)===0?!1:!!(Lv(n,o,f,p)&&Lv(f,p,n,o))}function gp(n,o,f){for(var p=0,x=f;p<x.length;p+=1)for(var A=x[p],C=0;C<A.length-1;++C)if(yp(n,o,A[C],A[C+1]))return!0;return!1}function Pv(n,o){for(var f=0;f<n.length;++f)if(!Ev(n[f],o))return!1;for(var p=0;p<n.length-1;++p)if(gp(n[p],n[p+1],o))return!1;return!0}function Jm(n,o){for(var f=0;f<o.length;f++)if(Pv(n,o[f]))return!0;return!1}function Dv(n,o,f){for(var p=[],x=0;x<n.length;x++){for(var A=[],C=0;C<n[x].length;C++){var q=Zm(n[x][C],f);Cv(o,q),A.push(q)}p.push(A)}return p}function Au(n,o,f){for(var p=[],x=0;x<n.length;x++){var A=Dv(n[x],o,f);p.push(A)}return p}function _p(n,o,f,p){if(n[0]<f[0]||n[0]>f[2]){var x=p*.5,A=n[0]-f[0]>x?-p:f[0]-n[0]>x?p:0;A===0&&(A=n[0]-f[2]>x?-p:f[2]-n[0]>x?p:0),n[0]+=A}Cv(o,n)}function Km(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function xp(n,o,f,p){for(var x=Math.pow(2,p.z)*Ml,A=[p.x*Ml,p.y*Ml],C=[],q=0,W=n;q<W.length;q+=1)for(var j=W[q],Q=0,ie=j;Q<ie.length;Q+=1){var pe=ie[Q],ve=[pe.x+A[0],pe.y+A[1]];_p(ve,o,f,x),C.push(ve)}return C}function bp(n,o,f,p){for(var x=Math.pow(2,p.z)*Ml,A=[p.x*Ml,p.y*Ml],C=[],q=0,W=n;q<W.length;q+=1){for(var j=W[q],Q=[],ie=0,pe=j;ie<pe.length;ie+=1){var ve=pe[ie],ke=[ve.x+A[0],ve.y+A[1]];Cv(o,ke),Q.push(ke)}C.push(Q)}if(o[2]-o[0]<=x/2){Km(o);for(var qe=0,st=C;qe<st.length;qe+=1)for(var Qe=st[qe],Lt=0,_t=Qe;Lt<_t.length;Lt+=1){var St=_t[Lt];_p(St,o,f,x)}}return C}function wp(n,o){var f=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],x=n.canonicalID();if(o.type==="Polygon"){var A=Dv(o.coordinates,p,x),C=xp(n.geometry(),f,p,x);if(!Zc(f,p))return!1;for(var q=0,W=C;q<W.length;q+=1){var j=W[q];if(!Ev(j,A))return!1}}if(o.type==="MultiPolygon"){var Q=Au(o.coordinates,p,x),ie=xp(n.geometry(),f,p,x);if(!Zc(f,p))return!1;for(var pe=0,ve=ie;pe<ve.length;pe+=1){var ke=ve[pe];if(!Xm(ke,Q))return!1}}return!0}function Qm(n,o){var f=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],x=n.canonicalID();if(o.type==="Polygon"){var A=Dv(o.coordinates,p,x),C=bp(n.geometry(),f,p,x);if(!Zc(f,p))return!1;for(var q=0,W=C;q<W.length;q+=1){var j=W[q];if(!Pv(j,A))return!1}}if(o.type==="MultiPolygon"){var Q=Au(o.coordinates,p,x),ie=bp(n.geometry(),f,p,x);if(!Zc(f,p))return!1;for(var pe=0,ve=ie;pe<ve.length;pe+=1){var ke=ve[pe];if(!Jm(ke,Q))return!1}}return!0}var vs=function(o,f){this.type=Aa,this.geojson=o,this.geometries=f};vs.parse=function(o,f){if(o.length!==2)return f.error("'within' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(nf(o[1])){var p=o[1];if(p.type==="FeatureCollection")for(var x=0;x<p.features.length;++x){var A=p.features[x].geometry.type;if(A==="Polygon"||A==="MultiPolygon")return new vs(p,p.features[x].geometry)}else if(p.type==="Feature"){var C=p.geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new vs(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new vs(p,p)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")},vs.prototype.evaluate=function(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return wp(o,this.geometries);if(o.geometryType()==="LineString")return Qm(o,this.geometries)}return!1},vs.prototype.eachChild=function(){},vs.prototype.outputDefined=function(){return!0},vs.prototype.serialize=function(){return["within",this.geojson]};function Yc(n){if(n instanceof In){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof vs)return!1;var o=!0;return n.eachChild(function(f){o&&!Yc(f)&&(o=!1)}),o}function Sl(n){if(n instanceof In&&n.name==="feature-state")return!1;var o=!0;return n.eachChild(function(f){o&&!Sl(f)&&(o=!1)}),o}function Wc(n,o){if(n instanceof In&&o.indexOf(n.name)>=0)return!1;var f=!0;return n.eachChild(function(p){f&&!Wc(p,o)&&(f=!1)}),f}var kl=function(o,f){this.type=f.type,this.name=o,this.boundExpression=f};kl.parse=function(o,f){if(o.length!==2||typeof o[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");var p=o[1];return f.scope.has(p)?new kl(p,f.scope.get(p)):f.error('Unknown variable "'+p+'". Make sure "'+p+'" has been bound in an enclosing "let" expression before using it.',1)},kl.prototype.evaluate=function(o){return this.boundExpression.evaluate(o)},kl.prototype.eachChild=function(){},kl.prototype.outputDefined=function(){return!1},kl.prototype.serialize=function(){return["var",this.name]};var Cl=function(o,f,p,x,A){f===void 0&&(f=[]),x===void 0&&(x=new rf),A===void 0&&(A=[]),this.registry=o,this.path=f,this.key=f.map(function(C){return"["+C+"]"}).join(""),this.scope=x,this.errors=A,this.expectedType=p};Cl.prototype.parse=function(o,f,p,x,A){return A===void 0&&(A={}),f?this.concat(f,p,x)._parse(o,A):this._parse(o,A)},Cl.prototype._parse=function(o,f){(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number")&&(o=["literal",o]);function p(Q,ie,pe){return pe==="assert"?new on(ie,[Q]):pe==="coerce"?new jo(ie,[Q]):Q}if(Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var x=o[0];if(typeof x!="string")return this.error("Expression name must be a string, but found "+typeof x+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var A=this.registry[x];if(A){var C=A.parse(o,this);if(!C)return null;if(this.expectedType){var q=this.expectedType,W=C.type;if((q.kind==="string"||q.kind==="number"||q.kind==="boolean"||q.kind==="object"||q.kind==="array")&&W.kind==="value")C=p(C,q,f.typeAnnotation||"assert");else if((q.kind==="color"||q.kind==="formatted"||q.kind==="resolvedImage")&&(W.kind==="value"||W.kind==="string"))C=p(C,q,f.typeAnnotation||"coerce");else if(this.checkSubtype(q,W))return null}if(!(C instanceof Wo)&&C.type.kind!=="resolvedImage"&&zv(C)){var j=new el;try{C=new Wo(C.type,C.evaluate(j))}catch(Q){return this.error(Q.message),null}}return C}return this.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof o=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof o=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof o+" instead.")},Cl.prototype.concat=function(o,f,p){var x=typeof o=="number"?this.path.concat(o):this.path,A=p?this.scope.concat(p):this.scope;return new Cl(this.registry,x,f||null,A,this.errors)},Cl.prototype.error=function(o){for(var f=[],p=arguments.length-1;p-- >0;)f[p]=arguments[p+1];var x=""+this.key+f.map(function(A){return"["+A+"]"}).join("");this.errors.push(new Ss(x,o))},Cl.prototype.checkSubtype=function(o,f){var p=hs(o,f);return p&&this.error(p),p};function zv(n){if(n instanceof kl)return zv(n.boundExpression);if(n instanceof In&&n.name==="error")return!1;if(n instanceof Al)return!1;if(n instanceof vs)return!1;var o=n instanceof jo||n instanceof on,f=!0;return n.eachChild(function(p){o?f=f&&zv(p):f=f&&p instanceof Wo}),f?Yc(n)&&Wc(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Xc(n,o){for(var f=n.length-1,p=0,x=f,A=0,C,q;p<=x;)if(A=Math.floor((p+x)/2),C=n[A],q=n[A+1],C<=o){if(A===f||o<q)return A;p=A+1}else if(C>o)x=A-1;else throw new un("Input is not a number.");return 0}var Es=function(o,f,p){this.type=o,this.input=f,this.labels=[],this.outputs=[];for(var x=0,A=p;x<A.length;x+=1){var C=A[x],q=C[0],W=C[1];this.labels.push(q),this.outputs.push(W)}};Es.parse=function(o,f){if(o.length-1<4)return f.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!==0)return f.error("Expected an even number of arguments.");var p=f.parse(o[1],1,Cr);if(!p)return null;var x=[],A=null;f.expectedType&&f.expectedType.kind!=="value"&&(A=f.expectedType);for(var C=1;C<o.length;C+=2){var q=C===1?-1/0:o[C],W=o[C+1],j=C,Q=C+1;if(typeof q!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(x.length&&x[x.length-1][0]>=q)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);var ie=f.parse(W,Q,A);if(!ie)return null;A=A||ie.type,x.push([q,ie])}return new Es(A,p,x)},Es.prototype.evaluate=function(o){var f=this.labels,p=this.outputs;if(f.length===1)return p[0].evaluate(o);var x=this.input.evaluate(o);if(x<=f[0])return p[0].evaluate(o);var A=f.length;if(x>=f[A-1])return p[A-1].evaluate(o);var C=Xc(f,x);return p[C].evaluate(o)},Es.prototype.eachChild=function(o){o(this.input);for(var f=0,p=this.outputs;f<p.length;f+=1){var x=p[f];o(x)}},Es.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},Es.prototype.serialize=function(){for(var o=["step",this.input.serialize()],f=0;f<this.labels.length;f++)f>0&&o.push(this.labels[f]),o.push(this.outputs[f].serialize());return o};function fn(n,o,f){return n*(1-f)+o*f}function $m(n,o,f){return new ni(fn(n.r,o.r,f),fn(n.g,o.g,f),fn(n.b,o.b,f),fn(n.a,o.a,f))}function ey(n,o,f){return n.map(function(p,x){return fn(p,o[x],f)})}var El=Object.freeze({__proto__:null,number:fn,color:$m,array:ey}),of=.95047,ds=1,Tp=1.08883,Ap=4/29,sf=6/29,Mp=3*sf*sf,Sp=sf*sf*sf,ty=Math.PI/180,ry=180/Math.PI;function Iv(n){return n>Sp?Math.pow(n,1/3):n/Mp+Ap}function Rv(n){return n>sf?n*n*n:Mp*(n-Ap)}function Fv(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Qf(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function jc(n){var o=Qf(n.r),f=Qf(n.g),p=Qf(n.b),x=Iv((.4124564*o+.3575761*f+.1804375*p)/of),A=Iv((.2126729*o+.7151522*f+.072175*p)/ds),C=Iv((.0193339*o+.119192*f+.9503041*p)/Tp);return{l:116*A-16,a:500*(x-A),b:200*(A-C),alpha:n.a}}function kp(n){var o=(n.l+16)/116,f=isNaN(n.a)?o:o+n.a/500,p=isNaN(n.b)?o:o-n.b/200;return o=ds*Rv(o),f=of*Rv(f),p=Tp*Rv(p),new ni(Fv(3.2404542*f-1.5371385*o-.4985314*p),Fv(-.969266*f+1.8760108*o+.041556*p),Fv(.0556434*f-.2040259*o+1.0572252*p),n.alpha)}function qi(n,o,f){return{l:fn(n.l,o.l,f),a:fn(n.a,o.a,f),b:fn(n.b,o.b,f),alpha:fn(n.alpha,o.alpha,f)}}function ay(n){var o=jc(n),f=o.l,p=o.a,x=o.b,A=Math.atan2(x,p)*ry;return{h:A<0?A+360:A,c:Math.sqrt(p*p+x*x),l:f,alpha:n.a}}function Jc(n){var o=n.h*ty,f=n.c,p=n.l;return kp({l:p,a:Math.cos(o)*f,b:Math.sin(o)*f,alpha:n.alpha})}function qv(n,o,f){var p=o-n;return n+f*(p>180||p<-180?p-360*Math.round(p/360):p)}function Cp(n,o,f){return{h:qv(n.h,o.h,f),c:fn(n.c,o.c,f),l:fn(n.l,o.l,f),alpha:fn(n.alpha,o.alpha,f)}}var lf={forward:jc,reverse:kp,interpolate:qi},Mu={forward:ay,reverse:Jc,interpolate:Cp},Nv=Object.freeze({__proto__:null,lab:lf,hcl:Mu}),xn=function(o,f,p,x,A){this.type=o,this.operator=f,this.interpolation=p,this.input=x,this.labels=[],this.outputs=[];for(var C=0,q=A;C<q.length;C+=1){var W=q[C],j=W[0],Q=W[1];this.labels.push(j),this.outputs.push(Q)}};xn.interpolationFactor=function(o,f,p,x){var A=0;if(o.name==="exponential")A=$f(f,o.base,p,x);else if(o.name==="linear")A=$f(f,1,p,x);else if(o.name==="cubic-bezier"){var C=o.controlPoints,q=new u(C[0],C[1],C[2],C[3]);A=q.solve($f(f,1,p,x))}return A},xn.parse=function(o,f){var p=o[0],x=o[1],A=o[2],C=o.slice(3);if(!Array.isArray(x)||x.length===0)return f.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){var q=x[1];if(typeof q!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:q}}else if(x[0]==="cubic-bezier"){var W=x.slice(1);if(W.length!==4||W.some(function(Qe){return typeof Qe!="number"||Qe<0||Qe>1}))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:W}}else return f.error("Unknown interpolation type "+String(x[0]),1,0);if(o.length-1<4)return f.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!==0)return f.error("Expected an even number of arguments.");if(A=f.parse(A,2,Cr),!A)return null;var j=[],Q=null;p==="interpolate-hcl"||p==="interpolate-lab"?Q=ks:f.expectedType&&f.expectedType.kind!=="value"&&(Q=f.expectedType);for(var ie=0;ie<C.length;ie+=2){var pe=C[ie],ve=C[ie+1],ke=ie+3,qe=ie+4;if(typeof pe!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ke);if(j.length&&j[j.length-1][0]>=pe)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ke);var st=f.parse(ve,qe,Q);if(!st)return null;Q=Q||st.type,j.push([pe,st])}return Q.kind!=="number"&&Q.kind!=="color"&&!(Q.kind==="array"&&Q.itemType.kind==="number"&&typeof Q.N=="number")?f.error("Type "+ki(Q)+" is not interpolatable."):new xn(Q,p,x,A,j)},xn.prototype.evaluate=function(o){var f=this.labels,p=this.outputs;if(f.length===1)return p[0].evaluate(o);var x=this.input.evaluate(o);if(x<=f[0])return p[0].evaluate(o);var A=f.length;if(x>=f[A-1])return p[A-1].evaluate(o);var C=Xc(f,x),q=f[C],W=f[C+1],j=xn.interpolationFactor(this.interpolation,x,q,W),Q=p[C].evaluate(o),ie=p[C+1].evaluate(o);return this.operator==="interpolate"?El[this.type.kind.toLowerCase()](Q,ie,j):this.operator==="interpolate-hcl"?Mu.reverse(Mu.interpolate(Mu.forward(Q),Mu.forward(ie),j)):lf.reverse(lf.interpolate(lf.forward(Q),lf.forward(ie),j))},xn.prototype.eachChild=function(o){o(this.input);for(var f=0,p=this.outputs;f<p.length;f+=1){var x=p[f];o(x)}},xn.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},xn.prototype.serialize=function(){var o;this.interpolation.name==="linear"?o=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?o=["linear"]:o=["exponential",this.interpolation.base]:o=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var f=[this.operator,o,this.input.serialize()],p=0;p<this.labels.length;p++)f.push(this.labels[p],this.outputs[p].serialize());return f};function $f(n,o,f,p){var x=p-f,A=n-f;return x===0?0:o===1?A/x:(Math.pow(o,A)-1)/(Math.pow(o,x)-1)}var tl=function(o,f){this.type=o,this.args=f};tl.parse=function(o,f){if(o.length<2)return f.error("Expectected at least one argument.");var p=null,x=f.expectedType;x&&x.kind!=="value"&&(p=x);for(var A=[],C=0,q=o.slice(1);C<q.length;C+=1){var W=q[C],j=f.parse(W,1+A.length,p,void 0,{typeAnnotation:"omit"});if(!j)return null;p=p||j.type,A.push(j)}var Q=x&&A.some(function(ie){return hs(x,ie.type)});return Q?new tl(Sa,A):new tl(p,A)},tl.prototype.evaluate=function(o){for(var f=null,p=0,x,A=0,C=this.args;A<C.length;A+=1){var q=C[A];if(p++,f=q.evaluate(o),f&&f instanceof zn&&!f.available&&(x||(x=f.name),f=null,p===this.args.length&&(f=x)),f!==null)break}return f},tl.prototype.eachChild=function(o){this.args.forEach(o)},tl.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},tl.prototype.serialize=function(){var o=["coalesce"];return this.eachChild(function(f){o.push(f.serialize())}),o};var Ll=function(o,f){this.type=f.type,this.bindings=[].concat(o),this.result=f};Ll.prototype.evaluate=function(o){return this.result.evaluate(o)},Ll.prototype.eachChild=function(o){for(var f=0,p=this.bindings;f<p.length;f+=1){var x=p[f];o(x[1])}o(this.result)},Ll.parse=function(o,f){if(o.length<4)return f.error("Expected at least 3 arguments, but found "+(o.length-1)+" instead.");for(var p=[],x=1;x<o.length-1;x+=2){var A=o[x];if(typeof A!="string")return f.error("Expected string, but found "+typeof A+" instead.",x);if(/[^a-zA-Z0-9_]/.test(A))return f.error("Variable names must contain only alphanumeric characters or '_'.",x);var C=f.parse(o[x+1],x+1);if(!C)return null;p.push([A,C])}var q=f.parse(o[o.length-1],o.length-1,f.expectedType,p);return q?new Ll(p,q):null},Ll.prototype.outputDefined=function(){return this.result.outputDefined()},Ll.prototype.serialize=function(){for(var o=["let"],f=0,p=this.bindings;f<p.length;f+=1){var x=p[f],A=x[0],C=x[1];o.push(A,C.serialize())}return o.push(this.result.serialize()),o};var Pl=function(o,f,p){this.type=o,this.index=f,this.input=p};Pl.parse=function(o,f){if(o.length!==3)return f.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var p=f.parse(o[1],1,Cr),x=f.parse(o[2],2,go(f.expectedType||Sa));if(!p||!x)return null;var A=x.type;return new Pl(A.itemType,p,x)},Pl.prototype.evaluate=function(o){var f=this.index.evaluate(o),p=this.input.evaluate(o);if(f<0)throw new un("Array index out of bounds: "+f+" < 0.");if(f>=p.length)throw new un("Array index out of bounds: "+f+" > "+(p.length-1)+".");if(f!==Math.floor(f))throw new un("Array index must be an integer, but found "+f+" instead.");return p[f]},Pl.prototype.eachChild=function(o){o(this.index),o(this.input)},Pl.prototype.outputDefined=function(){return!1},Pl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Dl=function(o,f){this.type=Aa,this.needle=o,this.haystack=f};Dl.parse=function(o,f){if(o.length!==3)return f.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var p=f.parse(o[1],1,Sa),x=f.parse(o[2],2,Sa);return!p||!x?null:Gc(p.type,[Aa,Ta,Cr,af,Sa])?new Dl(p,x):f.error("Expected first argument to be of type boolean, string, number or null, but found "+ki(p.type)+" instead")},Dl.prototype.evaluate=function(o){var f=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!p)return!1;if(!Tu(f,["boolean","string","number","null"]))throw new un("Expected first argument to be of type boolean, string, number or null, but found "+ki(nn(f))+" instead.");if(!Tu(p,["string","array"]))throw new un("Expected second argument to be of type array or string, but found "+ki(nn(p))+" instead.");return p.indexOf(f)>=0},Dl.prototype.eachChild=function(o){o(this.needle),o(this.haystack)},Dl.prototype.outputDefined=function(){return!0},Dl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var rl=function(o,f,p){this.type=Cr,this.needle=o,this.haystack=f,this.fromIndex=p};rl.parse=function(o,f){if(o.length<=2||o.length>=5)return f.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var p=f.parse(o[1],1,Sa),x=f.parse(o[2],2,Sa);if(!p||!x)return null;if(!Gc(p.type,[Aa,Ta,Cr,af,Sa]))return f.error("Expected first argument to be of type boolean, string, number or null, but found "+ki(p.type)+" instead");if(o.length===4){var A=f.parse(o[3],3,Cr);return A?new rl(p,x,A):null}else return new rl(p,x)},rl.prototype.evaluate=function(o){var f=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!Tu(f,["boolean","string","number","null"]))throw new un("Expected first argument to be of type boolean, string, number or null, but found "+ki(nn(f))+" instead.");if(!Tu(p,["string","array"]))throw new un("Expected second argument to be of type array or string, but found "+ki(nn(p))+" instead.");if(this.fromIndex){var x=this.fromIndex.evaluate(o);return p.indexOf(f,x)}return p.indexOf(f)},rl.prototype.eachChild=function(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)},rl.prototype.outputDefined=function(){return!1},rl.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ls=function(o,f,p,x,A,C){this.inputType=o,this.type=f,this.input=p,this.cases=x,this.outputs=A,this.otherwise=C};Ls.parse=function(o,f){if(o.length<5)return f.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if(o.length%2!==1)return f.error("Expected an even number of arguments.");var p,x;f.expectedType&&f.expectedType.kind!=="value"&&(x=f.expectedType);for(var A={},C=[],q=2;q<o.length-1;q+=2){var W=o[q],j=o[q+1];Array.isArray(W)||(W=[W]);var Q=f.concat(q);if(W.length===0)return Q.error("Expected at least one branch label.");for(var ie=0,pe=W;ie<pe.length;ie+=1){var ve=pe[ie];if(typeof ve!="number"&&typeof ve!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof ve=="number"&&Math.abs(ve)>Number.MAX_SAFE_INTEGER)return Q.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof ve=="number"&&Math.floor(ve)!==ve)return Q.error("Numeric branch labels must be integer values.");if(!p)p=nn(ve);else if(Q.checkSubtype(p,nn(ve)))return null;if(typeof A[String(ve)]!="undefined")return Q.error("Branch labels must be unique.");A[String(ve)]=C.length}var ke=f.parse(j,q,x);if(!ke)return null;x=x||ke.type,C.push(ke)}var qe=f.parse(o[1],1,Sa);if(!qe)return null;var st=f.parse(o[o.length-1],o.length-1,x);return!st||qe.type.kind!=="value"&&f.concat(1).checkSubtype(p,qe.type)?null:new Ls(p,x,qe,A,C,st)},Ls.prototype.evaluate=function(o){var f=this.input.evaluate(o),p=nn(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise;return p.evaluate(o)},Ls.prototype.eachChild=function(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)},Ls.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})&&this.otherwise.outputDefined()},Ls.prototype.serialize=function(){for(var o=this,f=["match",this.input.serialize()],p=Object.keys(this.cases).sort(),x=[],A={},C=0,q=p;C<q.length;C+=1){var W=q[C],j=A[this.cases[W]];j===void 0?(A[this.cases[W]]=x.length,x.push([this.cases[W],[W]])):x[j][1].push(W)}for(var Q=function(qe){return o.inputType.kind==="number"?Number(qe):qe},ie=0,pe=x;ie<pe.length;ie+=1){var ve=pe[ie],j=ve[0],ke=ve[1];ke.length===1?f.push(Q(ke[0])):f.push(ke.map(Q)),f.push(this.outputs[outputIndex$1].serialize())}return f.push(this.otherwise.serialize()),f};var Ps=function(o,f,p){this.type=o,this.branches=f,this.otherwise=p};Ps.parse=function(o,f){if(o.length<4)return f.error("Expected at least 3 arguments, but found only "+(o.length-1)+".");if(o.length%2!==0)return f.error("Expected an odd number of arguments.");var p;f.expectedType&&f.expectedType.kind!=="value"&&(p=f.expectedType);for(var x=[],A=1;A<o.length-1;A+=2){var C=f.parse(o[A],A,Aa);if(!C)return null;var q=f.parse(o[A+1],A+1,p);if(!q)return null;x.push([C,q]),p=p||q.type}var W=f.parse(o[o.length-1],o.length-1,p);return W?new Ps(p,x,W):null},Ps.prototype.evaluate=function(o){for(var f=0,p=this.branches;f<p.length;f+=1){var x=p[f],A=x[0],C=x[1];if(A.evaluate(o))return C.evaluate(o)}return this.otherwise.evaluate(o)},Ps.prototype.eachChild=function(o){for(var f=0,p=this.branches;f<p.length;f+=1){var x=p[f],A=x[0],C=x[1];o(A),o(C)}o(this.otherwise)},Ps.prototype.outputDefined=function(){return this.branches.every(function(o){var f=o[0],p=o[1];return p.outputDefined()})&&this.otherwise.outputDefined()},Ps.prototype.serialize=function(){var o=["case"];return this.eachChild(function(f){o.push(f.serialize())}),o};var zl=function(o,f,p,x){this.type=o,this.input=f,this.beginIndex=p,this.endIndex=x};zl.parse=function(o,f){if(o.length<=2||o.length>=5)return f.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var p=f.parse(o[1],1,Sa),x=f.parse(o[2],2,Cr);if(!p||!x)return null;if(!Gc(p.type,[go(Sa),Ta,Sa]))return f.error("Expected first argument to be of type array or string, but found "+ki(p.type)+" instead");if(o.length===4){var A=f.parse(o[3],3,Cr);return A?new zl(p.type,p,x,A):null}else return new zl(p.type,p,x)},zl.prototype.evaluate=function(o){var f=this.input.evaluate(o),p=this.beginIndex.evaluate(o);if(!Tu(f,["string","array"]))throw new un("Expected first argument to be of type array or string, but found "+ki(nn(f))+" instead.");if(this.endIndex){var x=this.endIndex.evaluate(o);return f.slice(p,x)}return f.slice(p)},zl.prototype.eachChild=function(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)},zl.prototype.outputDefined=function(){return!1},zl.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Ep(n,o){return n==="=="||n==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function iy(n,o,f){return o===f}function ny(n,o,f){return o!==f}function oy(n,o,f){return o<f}function Lp(n,o,f){return o>f}function Pp(n,o,f){return o<=f}function Bv(n,o,f){return o>=f}function Ov(n,o,f,p){return p.compare(o,f)===0}function ec(n,o,f,p){return!Ov(n,o,f,p)}function Kc(n,o,f,p){return p.compare(o,f)<0}function Dp(n,o,f,p){return p.compare(o,f)>0}function Uv(n,o,f,p){return p.compare(o,f)<=0}function zp(n,o,f,p){return p.compare(o,f)>=0}function uf(n,o,f){var p=n!=="=="&&n!=="!=";return function(){function x(A,C,q){this.type=Aa,this.lhs=A,this.rhs=C,this.collator=q,this.hasUntypedArgument=A.type.kind==="value"||C.type.kind==="value"}return x.parse=function(C,q){if(C.length!==3&&C.length!==4)return q.error("Expected two or three arguments.");var W=C[0],j=q.parse(C[1],1,Sa);if(!j)return null;if(!Ep(W,j.type))return q.concat(1).error('"'+W+`" comparisons are not supported for type '`+ki(j.type)+"'.");var Q=q.parse(C[2],2,Sa);if(!Q)return null;if(!Ep(W,Q.type))return q.concat(2).error('"'+W+`" comparisons are not supported for type '`+ki(Q.type)+"'.");if(j.type.kind!==Q.type.kind&&j.type.kind!=="value"&&Q.type.kind!=="value")return q.error("Cannot compare types '"+ki(j.type)+"' and '"+ki(Q.type)+"'.");p&&(j.type.kind==="value"&&Q.type.kind!=="value"?j=new on(Q.type,[j]):j.type.kind!=="value"&&Q.type.kind==="value"&&(Q=new on(j.type,[Q])));var ie=null;if(C.length===4){if(j.type.kind!=="string"&&Q.type.kind!=="string"&&j.type.kind!=="value"&&Q.type.kind!=="value")return q.error("Cannot use collator to compare non-string types.");if(ie=q.parse(C[3],3,wu),!ie)return null}return new x(j,Q,ie)},x.prototype.evaluate=function(C){var q=this.lhs.evaluate(C),W=this.rhs.evaluate(C);if(p&&this.hasUntypedArgument){var j=nn(q),Q=nn(W);if(j.kind!==Q.kind||!(j.kind==="string"||j.kind==="number"))throw new un('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+j.kind+", "+Q.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var ie=nn(q),pe=nn(W);if(ie.kind!=="string"||pe.kind!=="string")return o(C,q,W)}return this.collator?f(C,q,W,this.collator.evaluate(C)):o(C,q,W)},x.prototype.eachChild=function(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)},x.prototype.outputDefined=function(){return!0},x.prototype.serialize=function(){var C=[n];return this.eachChild(function(q){C.push(q.serialize())}),C},x}()}var sy=uf("==",iy,Ov),Ip=uf("!=",ny,ec),Rp=uf("<",oy,Kc),Fp=uf(">",Lp,Dp),Vv=uf("<=",Pp,Uv),Hv=uf(">=",Bv,zp),Su=function(o,f,p,x,A){this.type=Ta,this.number=o,this.locale=f,this.currency=p,this.minFractionDigits=x,this.maxFractionDigits=A};Su.parse=function(o,f){if(o.length!==3)return f.error("Expected two arguments.");var p=f.parse(o[1],1,Cr);if(!p)return null;var x=o[2];if(typeof x!="object"||Array.isArray(x))return f.error("NumberFormat options argument must be an object.");var A=null;if(x.locale&&(A=f.parse(x.locale,1,Ta),!A))return null;var C=null;if(x.currency&&(C=f.parse(x.currency,1,Ta),!C))return null;var q=null;if(x["min-fraction-digits"]&&(q=f.parse(x["min-fraction-digits"],1,Cr),!q))return null;var W=null;return x["max-fraction-digits"]&&(W=f.parse(x["max-fraction-digits"],1,Cr),!W)?null:new Su(p,A,C,q,W)},Su.prototype.evaluate=function(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))},Su.prototype.eachChild=function(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)},Su.prototype.outputDefined=function(){return!1},Su.prototype.serialize=function(){var o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]};var Il=function(o){this.type=Cr,this.input=o};Il.parse=function(o,f){if(o.length!==2)return f.error("Expected 1 argument, but found "+(o.length-1)+" instead.");var p=f.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?f.error("Expected argument of type string or array, but found "+ki(p.type)+" instead."):new Il(p):null},Il.prototype.evaluate=function(o){var f=this.input.evaluate(o);if(typeof f=="string")return f.length;if(Array.isArray(f))return f.length;throw new un("Expected value to be of type string or array, but found "+ki(nn(f))+" instead.")},Il.prototype.eachChild=function(o){o(this.input)},Il.prototype.outputDefined=function(){return!1},Il.prototype.serialize=function(){var o=["length"];return this.eachChild(function(f){o.push(f.serialize())}),o};var tc={"==":sy,"!=":Ip,">":Fp,"<":Rp,">=":Hv,"<=":Vv,array:on,at:Pl,boolean:on,case:Ps,coalesce:tl,collator:Al,format:Xo,image:$s,in:Dl,"index-of":rl,interpolate:xn,"interpolate-hcl":xn,"interpolate-lab":xn,length:Il,let:Ll,literal:Wo,match:Ls,number:on,"number-format":Su,object:on,slice:zl,step:Es,string:on,"to-boolean":jo,"to-color":jo,"to-number":jo,"to-string":jo,var:kl,within:vs};function Gv(n,o){var f=o[0],p=o[1],x=o[2],A=o[3];f=f.evaluate(n),p=p.evaluate(n),x=x.evaluate(n);var C=A?A.evaluate(n):1,q=mp(f,p,x,C);if(q)throw new un(q);return new ni(f/255*C,p/255*C,x/255*C,C)}function Qc(n,o){return n in o}function $c(n,o){var f=o[n];return typeof f=="undefined"?null:f}function eh(n,o,f,p){for(;f<=p;){var x=f+p>>1;if(o[x]===n)return!0;o[x]>n?p=x-1:f=x+1}return!1}function Rl(n){return{type:n}}In.register(tc,{error:[Qs,[Ta],function(n,o){var f=o[0];throw new un(f.evaluate(n))}],typeof:[Ta,[Sa],function(n,o){var f=o[0];return ki(nn(f.evaluate(n)))}],"to-rgba":[go(Cr,4),[ks],function(n,o){var f=o[0];return f.evaluate(n).toArray()}],rgb:[ks,[Cr,Cr,Cr],Gv],rgba:[ks,[Cr,Cr,Cr,Cr],Gv],has:{type:Aa,overloads:[[[Ta],function(n,o){var f=o[0];return Qc(f.evaluate(n),n.properties())}],[[Ta,wl],function(n,o){var f=o[0],p=o[1];return Qc(f.evaluate(n),p.evaluate(n))}]]},get:{type:Sa,overloads:[[[Ta],function(n,o){var f=o[0];return $c(f.evaluate(n),n.properties())}],[[Ta,wl],function(n,o){var f=o[0],p=o[1];return $c(f.evaluate(n),p.evaluate(n))}]]},"feature-state":[Sa,[Ta],function(n,o){var f=o[0];return $c(f.evaluate(n),n.featureState||{})}],properties:[wl,[],function(n){return n.properties()}],"geometry-type":[Ta,[],function(n){return n.geometryType()}],id:[Sa,[],function(n){return n.id()}],zoom:[Cr,[],function(n){return n.globals.zoom}],"heatmap-density":[Cr,[],function(n){return n.globals.heatmapDensity||0}],"line-progress":[Cr,[],function(n){return n.globals.lineProgress||0}],accumulated:[Sa,[],function(n){return n.globals.accumulated===void 0?null:n.globals.accumulated}],"+":[Cr,Rl(Cr),function(n,o){for(var f=0,p=0,x=o;p<x.length;p+=1){var A=x[p];f+=A.evaluate(n)}return f}],"*":[Cr,Rl(Cr),function(n,o){for(var f=1,p=0,x=o;p<x.length;p+=1){var A=x[p];f*=A.evaluate(n)}return f}],"-":{type:Cr,overloads:[[[Cr,Cr],function(n,o){var f=o[0],p=o[1];return f.evaluate(n)-p.evaluate(n)}],[[Cr],function(n,o){var f=o[0];return-f.evaluate(n)}]]},"/":[Cr,[Cr,Cr],function(n,o){var f=o[0],p=o[1];return f.evaluate(n)/p.evaluate(n)}],"%":[Cr,[Cr,Cr],function(n,o){var f=o[0],p=o[1];return f.evaluate(n)%p.evaluate(n)}],ln2:[Cr,[],function(){return Math.LN2}],pi:[Cr,[],function(){return Math.PI}],e:[Cr,[],function(){return Math.E}],"^":[Cr,[Cr,Cr],function(n,o){var f=o[0],p=o[1];return Math.pow(f.evaluate(n),p.evaluate(n))}],sqrt:[Cr,[Cr],function(n,o){var f=o[0];return Math.sqrt(f.evaluate(n))}],log10:[Cr,[Cr],function(n,o){var f=o[0];return Math.log(f.evaluate(n))/Math.LN10}],ln:[Cr,[Cr],function(n,o){var f=o[0];return Math.log(f.evaluate(n))}],log2:[Cr,[Cr],function(n,o){var f=o[0];return Math.log(f.evaluate(n))/Math.LN2}],sin:[Cr,[Cr],function(n,o){var f=o[0];return Math.sin(f.evaluate(n))}],cos:[Cr,[Cr],function(n,o){var f=o[0];return Math.cos(f.evaluate(n))}],tan:[Cr,[Cr],function(n,o){var f=o[0];return Math.tan(f.evaluate(n))}],asin:[Cr,[Cr],function(n,o){var f=o[0];return Math.asin(f.evaluate(n))}],acos:[Cr,[Cr],function(n,o){var f=o[0];return Math.acos(f.evaluate(n))}],atan:[Cr,[Cr],function(n,o){var f=o[0];return Math.atan(f.evaluate(n))}],min:[Cr,Rl(Cr),function(n,o){return Math.min.apply(Math,o.map(function(f){return f.evaluate(n)}))}],max:[Cr,Rl(Cr),function(n,o){return Math.max.apply(Math,o.map(function(f){return f.evaluate(n)}))}],abs:[Cr,[Cr],function(n,o){var f=o[0];return Math.abs(f.evaluate(n))}],round:[Cr,[Cr],function(n,o){var f=o[0],p=f.evaluate(n);return p<0?-Math.round(-p):Math.round(p)}],floor:[Cr,[Cr],function(n,o){var f=o[0];return Math.floor(f.evaluate(n))}],ceil:[Cr,[Cr],function(n,o){var f=o[0];return Math.ceil(f.evaluate(n))}],"filter-==":[Aa,[Ta,Sa],function(n,o){var f=o[0],p=o[1];return n.properties()[f.value]===p.value}],"filter-id-==":[Aa,[Sa],function(n,o){var f=o[0];return n.id()===f.value}],"filter-type-==":[Aa,[Ta],function(n,o){var f=o[0];return n.geometryType()===f.value}],"filter-<":[Aa,[Ta,Sa],function(n,o){var f=o[0],p=o[1],x=n.properties()[f.value],A=p.value;return typeof x==typeof A&&x<A}],"filter-id-<":[Aa,[Sa],function(n,o){var f=o[0],p=n.id(),x=f.value;return typeof p==typeof x&&p<x}],"filter->":[Aa,[Ta,Sa],function(n,o){var f=o[0],p=o[1],x=n.properties()[f.value],A=p.value;return typeof x==typeof A&&x>A}],"filter-id->":[Aa,[Sa],function(n,o){var f=o[0],p=n.id(),x=f.value;return typeof p==typeof x&&p>x}],"filter-<=":[Aa,[Ta,Sa],function(n,o){var f=o[0],p=o[1],x=n.properties()[f.value],A=p.value;return typeof x==typeof A&&x<=A}],"filter-id-<=":[Aa,[Sa],function(n,o){var f=o[0],p=n.id(),x=f.value;return typeof p==typeof x&&p<=x}],"filter->=":[Aa,[Ta,Sa],function(n,o){var f=o[0],p=o[1],x=n.properties()[f.value],A=p.value;return typeof x==typeof A&&x>=A}],"filter-id->=":[Aa,[Sa],function(n,o){var f=o[0],p=n.id(),x=f.value;return typeof p==typeof x&&p>=x}],"filter-has":[Aa,[Sa],function(n,o){var f=o[0];return f.value in n.properties()}],"filter-has-id":[Aa,[],function(n){return n.id()!==null&&n.id()!==void 0}],"filter-type-in":[Aa,[go(Ta)],function(n,o){var f=o[0];return f.value.indexOf(n.geometryType())>=0}],"filter-id-in":[Aa,[go(Sa)],function(n,o){var f=o[0];return f.value.indexOf(n.id())>=0}],"filter-in-small":[Aa,[Ta,go(Sa)],function(n,o){var f=o[0],p=o[1];return p.value.indexOf(n.properties()[f.value])>=0}],"filter-in-large":[Aa,[Ta,go(Sa)],function(n,o){var f=o[0],p=o[1];return eh(n.properties()[f.value],p.value,0,p.value.length-1)}],all:{type:Aa,overloads:[[[Aa,Aa],function(n,o){var f=o[0],p=o[1];return f.evaluate(n)&&p.evaluate(n)}],[Rl(Aa),function(n,o){for(var f=0,p=o;f<p.length;f+=1){var x=p[f];if(!x.evaluate(n))return!1}return!0}]]},any:{type:Aa,overloads:[[[Aa,Aa],function(n,o){var f=o[0],p=o[1];return f.evaluate(n)||p.evaluate(n)}],[Rl(Aa),function(n,o){for(var f=0,p=o;f<p.length;f+=1){var x=p[f];if(x.evaluate(n))return!0}return!1}]]},"!":[Aa,[Aa],function(n,o){var f=o[0];return!f.evaluate(n)}],"is-supported-script":[Aa,[Ta],function(n,o){var f=o[0],p=n.globals&&n.globals.isSupportedScript;return p?p(f.evaluate(n)):!0}],upcase:[Ta,[Ta],function(n,o){var f=o[0];return f.evaluate(n).toUpperCase()}],downcase:[Ta,[Ta],function(n,o){var f=o[0];return f.evaluate(n).toLowerCase()}],concat:[Ta,Rl(Sa),function(n,o){return o.map(function(f){return Lo(f.evaluate(n))}).join("")}],"resolved-locale":[Ta,[wu],function(n,o){var f=o[0];return f.evaluate(n).resolvedLocale()}]});function th(n){return{result:"success",value:n}}function ku(n){return{result:"error",value:n}}function ff(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function qp(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function rh(n){return!!n.expression&&n.expression.interpolated}function di(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function rc(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Np(n){return n}function Bp(n,o){var f=o.type==="color",p=n.stops&&typeof n.stops[0][0]=="object",x=p||n.property!==void 0,A=p||!x,C=n.type||(rh(o)?"exponential":"interval");if(f&&(n=bu({},n),n.stops&&(n.stops=n.stops.map(function(ur){return[ur[0],ni.parse(ur[1])]})),n.default?n.default=ni.parse(n.default):n.default=ni.parse(o.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!Nv[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);var q,W,j;if(C==="exponential")q=Zv;else if(C==="interval")q=Up;else if(C==="categorical"){q=Op,W=Object.create(null);for(var Q=0,ie=n.stops;Q<ie.length;Q+=1){var pe=ie[Q];W[pe[0]]=pe[1]}j=typeof n.stops[0][0]}else if(C==="identity")q=Vp;else throw new Error('Unknown function type "'+C+'"');if(p){for(var ve={},ke=[],qe=0;qe<n.stops.length;qe++){var st=n.stops[qe],Qe=st[0].zoom;ve[Qe]===void 0&&(ve[Qe]={zoom:Qe,type:n.type,property:n.property,default:n.default,stops:[]},ke.push(Qe)),ve[Qe].stops.push([st[0].value,st[1]])}for(var Lt=[],_t=0,St=ke;_t<St.length;_t+=1){var It=St[_t];Lt.push([ve[It].zoom,Bp(ve[It],o)])}var Jt={name:"linear"};return{kind:"composite",interpolationType:Jt,interpolationFactor:xn.interpolationFactor.bind(void 0,Jt),zoomStops:Lt.map(function(ur){return ur[0]}),evaluate:function(Rr,kr){var zr=Rr.zoom;return Zv({stops:Lt,base:n.base},o,zr).evaluate(zr,kr)}}}else if(A){var hr=C==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:hr,interpolationFactor:xn.interpolationFactor.bind(void 0,hr),zoomStops:n.stops.map(function(ur){return ur[0]}),evaluate:function(ur){var Rr=ur.zoom;return q(n,o,Rr,W,j)}}}else return{kind:"source",evaluate:function(Rr,kr){var zr=kr&&kr.properties?kr.properties[n.property]:void 0;return zr===void 0?Fl(n.default,o.default):q(n,o,zr,W,j)}}}function Fl(n,o,f){if(n!==void 0)return n;if(o!==void 0)return o;if(f!==void 0)return f}function Op(n,o,f,p,x){var A=typeof f===x?p[f]:void 0;return Fl(A,n.default,o.default)}function Up(n,o,f){if(di(f)!=="number")return Fl(n.default,o.default);var p=n.stops.length;if(p===1||f<=n.stops[0][0])return n.stops[0][1];if(f>=n.stops[p-1][0])return n.stops[p-1][1];var x=Xc(n.stops.map(function(A){return A[0]}),f);return n.stops[x][1]}function Zv(n,o,f){var p=n.base!==void 0?n.base:1;if(di(f)!=="number")return Fl(n.default,o.default);var x=n.stops.length;if(x===1||f<=n.stops[0][0])return n.stops[0][1];if(f>=n.stops[x-1][0])return n.stops[x-1][1];var A=Xc(n.stops.map(function(ie){return ie[0]}),f),C=ly(f,p,n.stops[A][0],n.stops[A+1][0]),q=n.stops[A][1],W=n.stops[A+1][1],j=El[o.type]||Np;if(n.colorSpace&&n.colorSpace!=="rgb"){var Q=Nv[n.colorSpace];j=function(ie,pe){return Q.reverse(Q.interpolate(Q.forward(ie),Q.forward(pe),C))}}return typeof q.evaluate=="function"?{evaluate:function(){for(var pe=[],ve=arguments.length;ve--;)pe[ve]=arguments[ve];var ke=q.evaluate.apply(void 0,pe),qe=W.evaluate.apply(void 0,pe);if(!(ke===void 0||qe===void 0))return j(ke,qe,C)}}:j(q,W,C)}function Vp(n,o,f){return o.type==="color"?f=ni.parse(f):o.type==="formatted"?f=_n.fromString(f.toString()):o.type==="resolvedImage"?f=zn.fromString(f.toString()):di(f)!==o.type&&(o.type!=="enum"||!o.values[f])&&(f=void 0),Fl(f,n.default,o.default)}function ly(n,o,f,p){var x=p-f,A=n-f;return x===0?0:o===1?A/x:(Math.pow(o,A)-1)/(Math.pow(o,x)-1)}var ql=function(o,f){this.expression=o,this._warningHistory={},this._evaluator=new el,this._defaultValue=f?fy(f):null,this._enumValues=f&&f.type==="enum"?f.values:null};ql.prototype.evaluateWithoutErrorHandling=function(o,f,p,x,A,C){return this._evaluator.globals=o,this._evaluator.feature=f,this._evaluator.featureState=p,this._evaluator.canonical=x,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)},ql.prototype.evaluate=function(o,f,p,x,A,C){this._evaluator.globals=o,this._evaluator.feature=f||null,this._evaluator.featureState=p||null,this._evaluator.canonical=x,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=C||null;try{var q=this.expression.evaluate(this._evaluator);if(q==null||typeof q=="number"&&q!==q)return this._defaultValue;if(this._enumValues&&!(q in this._enumValues))throw new un("Expected value to be one of "+Object.keys(this._enumValues).map(function(W){return JSON.stringify(W)}).join(", ")+", but found "+JSON.stringify(q)+" instead.");return q}catch(W){return this._warningHistory[W.message]||(this._warningHistory[W.message]=!0,typeof console!="undefined"&&console.warn(W.message)),this._defaultValue}};function Cu(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in tc}function ac(n,o){var f=new Cl(tc,[],o?Yv(o):void 0),p=f.parse(n,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?th(new ql(p,o)):ku(f.errors)}var Ds=function(o,f){this.kind=o,this._styleExpression=f,this.isStateDependent=o!=="constant"&&!Sl(f.expression)};Ds.prototype.evaluateWithoutErrorHandling=function(o,f,p,x,A,C){return this._styleExpression.evaluateWithoutErrorHandling(o,f,p,x,A,C)},Ds.prototype.evaluate=function(o,f,p,x,A,C){return this._styleExpression.evaluate(o,f,p,x,A,C)};var zs=function(o,f,p,x){this.kind=o,this.zoomStops=p,this._styleExpression=f,this.isStateDependent=o!=="camera"&&!Sl(f.expression),this.interpolationType=x};zs.prototype.evaluateWithoutErrorHandling=function(o,f,p,x,A,C){return this._styleExpression.evaluateWithoutErrorHandling(o,f,p,x,A,C)},zs.prototype.evaluate=function(o,f,p,x,A,C){return this._styleExpression.evaluate(o,f,p,x,A,C)},zs.prototype.interpolationFactor=function(o,f,p){return this.interpolationType?xn.interpolationFactor(this.interpolationType,o,f,p):0};function Jo(n,o){if(n=ac(n,o),n.result==="error")return n;var f=n.value.expression,p=Yc(f);if(!p&&!ff(o))return ku([new Ss("","data expressions not supported")]);var x=Wc(f,["zoom"]);if(!x&&!qp(o))return ku([new Ss("","zoom expressions not supported")]);var A=hf(f);if(!A&&!x)return ku([new Ss("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(A instanceof Ss)return ku([A]);if(A instanceof xn&&!rh(o))return ku([new Ss("",'"interpolate" expressions cannot be used with this property')]);if(!A)return th(p?new Ds("constant",n.value):new Ds("source",n.value));var C=A instanceof xn?A.interpolation:void 0;return th(p?new zs("camera",n.value,A.labels,C):new zs("composite",n.value,A.labels,C))}var cf=function(o,f){this._parameters=o,this._specification=f,bu(this,Bp(this._parameters,this._specification))};cf.deserialize=function(o){return new cf(o._parameters,o._specification)},cf.serialize=function(o){return{_parameters:o._parameters,_specification:o._specification}};function uy(n,o){if(rc(n))return new cf(n,o);if(Cu(n)){var f=Jo(n,o);if(f.result==="error")throw new Error(f.value.map(function(x){return x.key+": "+x.message}).join(", "));return f.value}else{var p=n;return typeof n=="string"&&o.type==="color"&&(p=ni.parse(n)),{kind:"constant",evaluate:function(){return p}}}}function hf(n){var o=null;if(n instanceof Ll)o=hf(n.result);else if(n instanceof tl)for(var f=0,p=n.args;f<p.length;f+=1){var x=p[f];if(o=hf(x),o)break}else(n instanceof Es||n instanceof xn)&&n.input instanceof In&&n.input.name==="zoom"&&(o=n);return o instanceof Ss||n.eachChild(function(A){var C=hf(A);C instanceof Ss?o=C:!o&&C?o=new Ss("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&C&&o!==C&&(o=new Ss("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function Yv(n){var o={color:ks,string:Ta,number:Cr,enum:Ta,boolean:Aa,formatted:cs,resolvedImage:Tl};return n.type==="array"?go(o[n.value]||Sa,n.length):o[n.type]}function fy(n){return n.type==="color"&&rc(n.default)?new ni(0,0,0,0):n.type==="color"?ni.parse(n.default)||null:n.default===void 0?null:n.default}function ps(n){var o=n.key,f=n.value,p=n.valueSpec||{},x=n.objectElementValidators||{},A=n.style,C=n.styleSpec,q=[],W=di(f);if(W!=="object")return[new Or(o,f,"object expected, "+W+" found")];for(var j in f){var Q=j.split(".")[0],ie=p[Q]||p["*"],pe=void 0;if(x[Q])pe=x[Q];else if(p[Q])pe=li;else if(x["*"])pe=x["*"];else if(p["*"])pe=li;else{q.push(new Or(o,f[j],'unknown property "'+j+'"'));continue}q=q.concat(pe({key:(o&&o+".")+j,value:f[j],valueSpec:ie,style:A,styleSpec:C,object:f,objectKey:j},f))}for(var ve in p)x[ve]||p[ve].required&&p[ve].default===void 0&&f[ve]===void 0&&q.push(new Or(o,f,'missing required property "'+ve+'"'));return q}function Wv(n){var o=n.value,f=n.valueSpec,p=n.style,x=n.styleSpec,A=n.key,C=n.arrayElementValidator||li;if(di(o)!=="array")return[new Or(A,o,"array expected, "+di(o)+" found")];if(f.length&&o.length!==f.length)return[new Or(A,o,"array length "+f.length+" expected, length "+o.length+" found")];if(f["min-length"]&&o.length<f["min-length"])return[new Or(A,o,"array length at least "+f["min-length"]+" expected, length "+o.length+" found")];var q={type:f.value,values:f.values};x.$version<7&&(q.function=f.function),di(f.value)==="object"&&(q=f.value);for(var W=[],j=0;j<o.length;j++)W=W.concat(C({array:o,arrayIndex:j,value:o[j],valueSpec:q,style:p,styleSpec:x,key:A+"["+j+"]"}));return W}function vf(n){var o=n.key,f=n.value,p=n.valueSpec,x=di(f);return x==="number"&&f!==f&&(x="NaN"),x!=="number"?[new Or(o,f,"number expected, "+x+" found")]:"minimum"in p&&f<p.minimum?[new Or(o,f,f+" is less than the minimum value "+p.minimum)]:"maximum"in p&&f>p.maximum?[new Or(o,f,f+" is greater than the maximum value "+p.maximum)]:[]}function ah(n){var o=n.valueSpec,f=an(n.value.type),p,x={},A,C,q=f!=="categorical"&&n.value.property===void 0,W=!q,j=di(n.value.stops)==="array"&&di(n.value.stops[0])==="array"&&di(n.value.stops[0][0])==="object",Q=ps({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:ie,default:ke}});return f==="identity"&&q&&Q.push(new Or(n.key,n.value,'missing required property "property"')),f!=="identity"&&!n.value.stops&&Q.push(new Or(n.key,n.value,'missing required property "stops"')),f==="exponential"&&n.valueSpec.expression&&!rh(n.valueSpec)&&Q.push(new Or(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(W&&!ff(n.valueSpec)?Q.push(new Or(n.key,n.value,"property functions not supported")):q&&!qp(n.valueSpec)&&Q.push(new Or(n.key,n.value,"zoom functions not supported"))),(f==="categorical"||j)&&n.value.property===void 0&&Q.push(new Or(n.key,n.value,'"property" property is required')),Q;function ie(qe){if(f==="identity")return[new Or(qe.key,qe.value,'identity function may not have a "stops" property')];var st=[],Qe=qe.value;return st=st.concat(Wv({key:qe.key,value:Qe,valueSpec:qe.valueSpec,style:qe.style,styleSpec:qe.styleSpec,arrayElementValidator:pe})),di(Qe)==="array"&&Qe.length===0&&st.push(new Or(qe.key,Qe,"array must have at least one stop")),st}function pe(qe){var st=[],Qe=qe.value,Lt=qe.key;if(di(Qe)!=="array")return[new Or(Lt,Qe,"array expected, "+di(Qe)+" found")];if(Qe.length!==2)return[new Or(Lt,Qe,"array length 2 expected, length "+Qe.length+" found")];if(j){if(di(Qe[0])!=="object")return[new Or(Lt,Qe,"object expected, "+di(Qe[0])+" found")];if(Qe[0].zoom===void 0)return[new Or(Lt,Qe,"object stop key must have zoom")];if(Qe[0].value===void 0)return[new Or(Lt,Qe,"object stop key must have value")];if(C&&C>an(Qe[0].zoom))return[new Or(Lt,Qe[0].zoom,"stop zoom values must appear in ascending order")];an(Qe[0].zoom)!==C&&(C=an(Qe[0].zoom),A=void 0,x={}),st=st.concat(ps({key:Lt+"[0]",value:Qe[0],valueSpec:{zoom:{}},style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{zoom:vf,value:ve}}))}else st=st.concat(ve({key:Lt+"[0]",value:Qe[0],valueSpec:{},style:qe.style,styleSpec:qe.styleSpec},Qe));return Cu(bl(Qe[1]))?st.concat([new Or(Lt+"[1]",Qe[1],"expressions are not allowed in function stops.")]):st.concat(li({key:Lt+"[1]",value:Qe[1],valueSpec:o,style:qe.style,styleSpec:qe.styleSpec}))}function ve(qe,st){var Qe=di(qe.value),Lt=an(qe.value),_t=qe.value!==null?qe.value:st;if(!p)p=Qe;else if(Qe!==p)return[new Or(qe.key,_t,Qe+" stop domain type must match previous stop domain type "+p)];if(Qe!=="number"&&Qe!=="string"&&Qe!=="boolean")return[new Or(qe.key,_t,"stop domain value must be a number, string, or boolean")];if(Qe!=="number"&&f!=="categorical"){var St="number expected, "+Qe+" found";return ff(o)&&f===void 0&&(St+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Or(qe.key,_t,St)]}return f==="categorical"&&Qe==="number"&&(!isFinite(Lt)||Math.floor(Lt)!==Lt)?[new Or(qe.key,_t,"integer expected, found "+Lt)]:f!=="categorical"&&Qe==="number"&&A!==void 0&&Lt<A?[new Or(qe.key,_t,"stop domain values must appear in ascending order")]:(A=Lt,f==="categorical"&&Lt in x?[new Or(qe.key,_t,"stop domain values must be unique")]:(x[Lt]=!0,[]))}function ke(qe){return li({key:qe.key,value:qe.value,valueSpec:o,style:qe.style,styleSpec:qe.styleSpec})}}function Eu(n){var o=(n.expressionContext==="property"?Jo:ac)(bl(n.value),n.valueSpec);if(o.result==="error")return o.value.map(function(p){return new Or(""+n.key+p.key,n.value,p.message)});var f=o.value.expression||o.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!f.outputDefined())return[new Or(n.key,n.value,'Invalid data expression for "'+n.propertyKey+'". Output values must be contained as literals within the expression.')];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Sl(f))return[new Or(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!Sl(f))return[new Or(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Wc(f,["zoom","feature-state"]))return[new Or(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Yc(f))return[new Or(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cy(n){var o=n.value,f=n.key,p=di(o);return p!=="boolean"?[new Or(f,o,"boolean expected, "+p+" found")]:[]}function hy(n){var o=n.key,f=n.value,p=di(f);return p!=="string"?[new Or(o,f,"color expected, "+p+" found")]:jf(f)===null?[new Or(o,f,'color expected, "'+f+'" found')]:[]}function ih(n){var o=n.key,f=n.value,p=n.valueSpec,x=[];return Array.isArray(p.values)?p.values.indexOf(an(f))===-1&&x.push(new Or(o,f,"expected one of ["+p.values.join(", ")+"], "+JSON.stringify(f)+" found")):Object.keys(p.values).indexOf(an(f))===-1&&x.push(new Or(o,f,"expected one of ["+Object.keys(p.values).join(", ")+"], "+JSON.stringify(f)+" found")),x}function _o(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var o=0,f=n.slice(1);o<f.length;o+=1){var p=f[o];if(!_o(p)&&typeof p!="boolean")return!1}return!0;default:return!0}}var Hp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function df(n){if(n==null)return{filter:function(){return!0},needGeometry:!1};_o(n)||(n=mf(n));var o=ac(n,Hp);if(o.result==="error")throw new Error(o.value.map(function(p){return p.key+": "+p.message}).join(", "));var f=pf(n);return{filter:function(p,x,A){return o.value.evaluate(p,x,{},A)},needGeometry:f}}function Nl(n,o){return n<o?-1:n>o?1:0}function pf(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(var o=1;o<n.length;o++)if(pf(n[o]))return!0;return!1}function mf(n){if(!n)return!0;var o=n[0];if(n.length<=1)return o!=="any";var f=o==="=="?Xv(n[1],n[2],"=="):o==="!="?ic(Xv(n[1],n[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Xv(n[1],n[2],o):o==="any"?vy(n.slice(1)):o==="all"?["all"].concat(n.slice(1).map(mf)):o==="none"?["all"].concat(n.slice(1).map(mf).map(ic)):o==="in"?Gp(n[1],n.slice(2)):o==="!in"?ic(Gp(n[1],n.slice(2))):o==="has"?jv(n[1]):o==="!has"?ic(jv(n[1])):o==="within"?n:!0;return f}function Xv(n,o,f){switch(n){case"$type":return["filter-type-"+f,o];case"$id":return["filter-id-"+f,o];default:return["filter-"+f,n,o]}}function vy(n){return["any"].concat(n.map(mf))}function Gp(n,o){if(o.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(function(f){return typeof f!=typeof o[0]})?["filter-in-large",n,["literal",o.sort(Nl)]]:["filter-in-small",n,["literal",o]]}}function jv(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function ic(n){return["!",n]}function nh(n){return _o(bl(n.value))?Eu(bu({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Jv(n)}function Jv(n){var o=n.value,f=n.key;if(di(o)!=="array")return[new Or(f,o,"array expected, "+di(o)+" found")];var p=n.styleSpec,x,A=[];if(o.length<1)return[new Or(f,o,"filter array must have at least 1 element")];switch(A=A.concat(ih({key:f+"[0]",value:o[0],valueSpec:p.filter_operator,style:n.style,styleSpec:n.styleSpec})),an(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&an(o[1])==="$type"&&A.push(new Or(f,o,'"$type" cannot be use with operator "'+o[0]+'"'));case"==":case"!=":o.length!==3&&A.push(new Or(f,o,'filter array for operator "'+o[0]+'" must have 3 elements'));case"in":case"!in":o.length>=2&&(x=di(o[1]),x!=="string"&&A.push(new Or(f+"[1]",o[1],"string expected, "+x+" found")));for(var C=2;C<o.length;C++)x=di(o[C]),an(o[1])==="$type"?A=A.concat(ih({key:f+"["+C+"]",value:o[C],valueSpec:p.geometry_type,style:n.style,styleSpec:n.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&A.push(new Or(f+"["+C+"]",o[C],"string, number, or boolean expected, "+x+" found"));break;case"any":case"all":case"none":for(var q=1;q<o.length;q++)A=A.concat(Jv({key:f+"["+q+"]",value:o[q],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":x=di(o[1]),o.length!==2?A.push(new Or(f,o,'filter array for "'+o[0]+'" operator must have 2 elements')):x!=="string"&&A.push(new Or(f+"[1]",o[1],"string expected, "+x+" found"));break;case"within":x=di(o[1]),o.length!==2?A.push(new Or(f,o,'filter array for "'+o[0]+'" operator must have 2 elements')):x!=="object"&&A.push(new Or(f+"[1]",o[1],"object expected, "+x+" found"));break}return A}function Zp(n,o){var f=n.key,p=n.style,x=n.styleSpec,A=n.value,C=n.objectKey,q=x[o+"_"+n.layerType];if(!q)return[];var W=C.match(/^(.*)-transition$/);if(o==="paint"&&W&&q[W[1]]&&q[W[1]].transition)return li({key:f,value:A,valueSpec:x.transition,style:p,styleSpec:x});var j=n.valueSpec||q[C];if(!j)return[new Or(f,A,'unknown property "'+C+'"')];var Q;if(di(A)==="string"&&ff(j)&&!j.tokens&&(Q=/^{([^}]+)}$/.exec(A)))return[new Or(f,A,'"'+C+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Q[1])+" }`.")];var ie=[];return n.layerType==="symbol"&&(C==="text-field"&&p&&!p.glyphs&&ie.push(new Or(f,A,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&rc(bl(A))&&an(A.type)==="identity"&&ie.push(new Or(f,A,'"text-font" does not support identity functions'))),ie.concat(li({key:n.key,value:A,valueSpec:j,style:p,styleSpec:x,expressionContext:"property",propertyType:o,propertyKey:C}))}function Kv(n){return Zp(n,"paint")}function Yp(n){return Zp(n,"layout")}function Wp(n){var o=[],f=n.value,p=n.key,x=n.style,A=n.styleSpec;!f.type&&!f.ref&&o.push(new Or(p,f,'either "type" or "ref" is required'));var C=an(f.type),q=an(f.ref);if(f.id)for(var W=an(f.id),j=0;j<n.arrayIndex;j++){var Q=x.layers[j];an(Q.id)===W&&o.push(new Or(p,f.id,'duplicate layer id "'+f.id+'", previously used at line '+Q.id.__line__))}if("ref"in f){["type","source","source-layer","filter","layout"].forEach(function(ke){ke in f&&o.push(new Or(p,f[ke],'"'+ke+'" is prohibited for ref layers'))});var ie;x.layers.forEach(function(ke){an(ke.id)===q&&(ie=ke)}),ie?ie.ref?o.push(new Or(p,f.ref,"ref cannot reference another ref layer")):C=an(ie.type):o.push(new Or(p,f.ref,'ref layer "'+q+'" not found'))}else if(C!=="background")if(!f.source)o.push(new Or(p,f,'missing required property "source"'));else{var pe=x.sources&&x.sources[f.source],ve=pe&&an(pe.type);pe?ve==="vector"&&C==="raster"?o.push(new Or(p,f.source,'layer "'+f.id+'" requires a raster source')):ve==="raster"&&C!=="raster"?o.push(new Or(p,f.source,'layer "'+f.id+'" requires a vector source')):ve==="vector"&&!f["source-layer"]?o.push(new Or(p,f,'layer "'+f.id+'" must specify a "source-layer"')):ve==="raster-dem"&&C!=="hillshade"?o.push(new Or(p,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):C==="line"&&f.paint&&f.paint["line-gradient"]&&(ve!=="geojson"||!pe.lineMetrics)&&o.push(new Or(p,f,'layer "'+f.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):o.push(new Or(p,f.source,'source "'+f.source+'" not found'))}return o=o.concat(ps({key:p,value:f,valueSpec:A.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return li({key:p+".type",value:f.type,valueSpec:A.layer.type,style:n.style,styleSpec:n.styleSpec,object:f,objectKey:"type"})},filter:nh,layout:function(qe){return ps({layer:f,key:qe.key,value:qe.value,style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{"*":function(Qe){return Yp(bu({layerType:C},Qe))}}})},paint:function(qe){return ps({layer:f,key:qe.key,value:qe.value,style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{"*":function(Qe){return Kv(bu({layerType:C},Qe))}}})}}})),o}function yf(n){var o=n.value,f=n.key,p=di(o);return p!=="string"?[new Or(f,o,"string expected, "+p+" found")]:[]}var oh={promoteId:Lu};function sh(n){var o=n.value,f=n.key,p=n.styleSpec,x=n.style;if(!o.type)return[new Or(f,o,'"type" is required')];var A=an(o.type),C;switch(A){case"vector":case"raster":case"raster-dem":return C=ps({key:f,value:o,valueSpec:p["source_"+A.replace("-","_")],style:n.style,styleSpec:p,objectElementValidators:oh}),C;case"geojson":if(C=ps({key:f,value:o,valueSpec:p.source_geojson,style:x,styleSpec:p,objectElementValidators:oh}),o.cluster)for(var q in o.clusterProperties){var W=o.clusterProperties[q],j=W[0],Q=W[1],ie=typeof j=="string"?[j,["accumulated"],["get",q]]:j;C.push.apply(C,Eu({key:f+"."+q+".map",value:Q,expressionContext:"cluster-map"})),C.push.apply(C,Eu({key:f+"."+q+".reduce",value:ie,expressionContext:"cluster-reduce"}))}return C;case"video":return ps({key:f,value:o,valueSpec:p.source_video,style:x,styleSpec:p});case"image":return ps({key:f,value:o,valueSpec:p.source_image,style:x,styleSpec:p});case"canvas":return[new Or(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ih({key:f+".type",value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:x,styleSpec:p})}}function Lu(n){var o=n.key,f=n.value;if(di(f)==="string")return yf({key:o,value:f});var p=[];for(var x in f)p.push.apply(p,yf({key:o+"."+x,value:f[x]}));return p}function Qv(n){var o=n.value,f=n.styleSpec,p=f.light,x=n.style,A=[],C=di(o);if(o===void 0)return A;if(C!=="object")return A=A.concat([new Or("light",o,"object expected, "+C+" found")]),A;for(var q in o){var W=q.match(/^(.*)-transition$/);W&&p[W[1]]&&p[W[1]].transition?A=A.concat(li({key:q,value:o[q],valueSpec:f.transition,style:x,styleSpec:f})):p[q]?A=A.concat(li({key:q,value:o[q],valueSpec:p[q],style:x,styleSpec:f})):A=A.concat([new Or(q,o[q],'unknown property "'+q+'"')])}return A}function lh(n){return yf(n).length===0?[]:Eu(n)}function Xp(n){return yf(n).length===0?[]:Eu(n)}var gf={"*":function(){return[]},array:Wv,boolean:cy,number:vf,color:hy,constants:pp,enum:ih,filter:nh,function:ah,layer:Wp,object:ps,source:sh,light:Qv,string:yf,formatted:lh,resolvedImage:Xp};function li(n){var o=n.value,f=n.valueSpec,p=n.styleSpec;if(f.expression&&rc(an(o)))return ah(n);if(f.expression&&Cu(bl(o)))return Eu(n);if(f.type&&gf[f.type])return gf[f.type](n);var x=ps(bu({},n,{valueSpec:f.type?p[f.type]:f}));return x}function Ci(n){var o=n.value,f=n.key,p=yf(n);return p.length||(o.indexOf("{fontstack}")===-1&&p.push(new Or(f,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&p.push(new Or(f,o,'"glyphs" url must include a "{range}" token'))),p}function lo(n,o){o===void 0&&(o=Xt);var f=[];return f=f.concat(li({key:"",value:n,valueSpec:o.$root,styleSpec:o,style:n,objectElementValidators:{glyphs:Ci,"*":function(){return[]}}})),n.constants&&(f=f.concat(pp({key:"constants",value:n.constants,style:n,styleSpec:o}))),Is(f)}lo.source=xo(sh),lo.light=xo(Qv),lo.layer=xo(Wp),lo.filter=xo(nh),lo.paintProperty=xo(Kv),lo.layoutProperty=xo(Yp);function Is(n){return[].concat(n).sort(function(o,f){return o.line-f.line})}function xo(n){return function(){for(var o=[],f=arguments.length;f--;)o[f]=arguments[f];return Is(n.apply(this,o))}}var ti=lo,fi=ti.light,uh=ti.paintProperty,Bl=ti.layoutProperty;function nc(n,o){var f=!1;if(o&&o.length)for(var p=0,x=o;p<x.length;p+=1){var A=x[p];n.fire(new Wr(new Error(A.message))),f=!0}return f}var _f=Rs,Ol=3;function Rs(n,o,f){var p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var x=new Int32Array(this.arrayBuffer);n=x[0],o=x[1],f=x[2],this.d=o+2*f;for(var A=0;A<this.d*this.d;A++){var C=x[Ol+A],q=x[Ol+A+1];p.push(C===q?null:x.subarray(C,q))}var W=x[Ol+p.length],j=x[Ol+p.length+1];this.keys=x.subarray(W,j),this.bboxes=x.subarray(j),this.insert=this._insertReadonly}else{this.d=o+2*f;for(var Q=0;Q<this.d*this.d;Q++)p.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=f,this.scale=o/n,this.uid=0;var ie=f/o*n;this.min=-ie,this.max=n+ie}Rs.prototype.insert=function(n,o,f,p,x){this._forEachCell(o,f,p,x,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(f),this.bboxes.push(p),this.bboxes.push(x)},Rs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rs.prototype._insertCell=function(n,o,f,p,x,A){this.cells[x].push(A)},Rs.prototype.query=function(n,o,f,p,x){var A=this.min,C=this.max;if(n<=A&&o<=A&&C<=f&&C<=p&&!x)return Array.prototype.slice.call(this.keys);var q=[],W={};return this._forEachCell(n,o,f,p,this._queryCell,q,W,x),q},Rs.prototype._queryCell=function(n,o,f,p,x,A,C,q){var W=this.cells[x];if(W!==null)for(var j=this.keys,Q=this.bboxes,ie=0;ie<W.length;ie++){var pe=W[ie];if(C[pe]===void 0){var ve=pe*4;(q?q(Q[ve+0],Q[ve+1],Q[ve+2],Q[ve+3]):n<=Q[ve+2]&&o<=Q[ve+3]&&f>=Q[ve+0]&&p>=Q[ve+1])?(C[pe]=!0,A.push(j[pe])):C[pe]=!1}}},Rs.prototype._forEachCell=function(n,o,f,p,x,A,C,q){for(var W=this._convertToCellCoord(n),j=this._convertToCellCoord(o),Q=this._convertToCellCoord(f),ie=this._convertToCellCoord(p),pe=W;pe<=Q;pe++)for(var ve=j;ve<=ie;ve++){var ke=this.d*ve+pe;if(!(q&&!q(this._convertFromCellCoord(pe),this._convertFromCellCoord(ve),this._convertFromCellCoord(pe+1),this._convertFromCellCoord(ve+1)))&&x.call(this,n,o,f,p,ke,A,C,q))return}},Rs.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},Rs.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},Rs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,o=Ol+this.cells.length+1+1,f=0,p=0;p<this.cells.length;p++)f+=this.cells[p].length;var x=new Int32Array(o+f+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var A=o,C=0;C<n.length;C++){var q=n[C];x[Ol+C]=A,x.set(q,A),A+=q.length}return x[Ol+n.length]=A,x.set(this.keys,A),A+=this.keys.length,x[Ol+n.length+1]=A,x.set(this.bboxes,A),A+=this.bboxes.length,x.buffer};var fh=_.ImageData,xf=_.ImageBitmap,Ul={};function y(n,o,f){f===void 0&&(f={}),Object.defineProperty(o,"_classRegistryKey",{value:n,writeable:!1}),Ul[n]={klass:o,omit:f.omit||[],shallow:f.shallow||[]}}y("Object",Object),_f.serialize=function(o,f){var p=o.toArrayBuffer();return f&&f.push(p),{buffer:p}},_f.deserialize=function(o){return new _f(o.buffer)},y("Grid",_f),y("Color",ni),y("Error",Error),y("ResolvedImage",zn),y("StylePropertyFunction",cf),y("StyleExpression",ql,{omit:["_evaluator"]}),y("ZoomDependentExpression",zs),y("ZoomConstantExpression",Ds),y("CompoundExpression",In,{omit:["_evaluate"]});for(var S in tc)tc[S]._classRegistryKey||y("Expression_"+S,tc[S]);function D(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function O(n){return xf&&n instanceof xf}function U(n,o){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(D(n)||O(n))return o&&o.push(n),n;if(ArrayBuffer.isView(n)){var f=n;return o&&o.push(f.buffer),f}if(n instanceof fh)return o&&o.push(n.data.buffer),n;if(Array.isArray(n)){for(var p=[],x=0,A=n;x<A.length;x+=1){var C=A[x];p.push(U(C,o))}return p}if(typeof n=="object"){var q=n.constructor,W=q._classRegistryKey;if(!W)throw new Error("can't serialize object of unregistered class");var j=q.serialize?q.serialize(n,o):{};if(!q.serialize){for(var Q in n)if(n.hasOwnProperty(Q)&&!(Ul[W].omit.indexOf(Q)>=0)){var ie=n[Q];j[Q]=Ul[W].shallow.indexOf(Q)>=0?ie:U(ie,o)}n instanceof Error&&(j.message=n.message)}if(j.$name)throw new Error("$name property is reserved for worker serialization logic.");return W!=="Object"&&(j.$name=W),j}throw new Error("can't serialize object of type "+typeof n)}function Z(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||D(n)||O(n)||ArrayBuffer.isView(n)||n instanceof fh)return n;if(Array.isArray(n))return n.map(Z);if(typeof n=="object"){var o=n.$name||"Object",f=Ul[o],p=f.klass;if(!p)throw new Error("can't deserialize unregistered class "+o);if(p.deserialize)return p.deserialize(n);for(var x=Object.create(p.prototype),A=0,C=Object.keys(n);A<C.length;A+=1){var q=C[A];if(q!=="$name"){var W=n[q];x[q]=Ul[o].shallow.indexOf(q)>=0?W:Z(W)}}return x}throw new Error("can't deserialize object of type "+typeof n)}var $=function(){this.first=!0};$.prototype.update=function(o,f){var p=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=f),o!==this.lastZoom?(this.lastZoom=o,this.lastFloorZoom=p,!0):!1)};var X={"Latin-1 Supplement":function(n){return n>=128&&n<=255},Arabic:function(n){return n>=1536&&n<=1791},"Arabic Supplement":function(n){return n>=1872&&n<=1919},"Arabic Extended-A":function(n){return n>=2208&&n<=2303},"Hangul Jamo":function(n){return n>=4352&&n<=4607},"Unified Canadian Aboriginal Syllabics":function(n){return n>=5120&&n<=5759},Khmer:function(n){return n>=6016&&n<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(n){return n>=6320&&n<=6399},"General Punctuation":function(n){return n>=8192&&n<=8303},"Letterlike Symbols":function(n){return n>=8448&&n<=8527},"Number Forms":function(n){return n>=8528&&n<=8591},"Miscellaneous Technical":function(n){return n>=8960&&n<=9215},"Control Pictures":function(n){return n>=9216&&n<=9279},"Optical Character Recognition":function(n){return n>=9280&&n<=9311},"Enclosed Alphanumerics":function(n){return n>=9312&&n<=9471},"Geometric Shapes":function(n){return n>=9632&&n<=9727},"Miscellaneous Symbols":function(n){return n>=9728&&n<=9983},"Miscellaneous Symbols and Arrows":function(n){return n>=11008&&n<=11263},"CJK Radicals Supplement":function(n){return n>=11904&&n<=12031},"Kangxi Radicals":function(n){return n>=12032&&n<=12255},"Ideographic Description Characters":function(n){return n>=12272&&n<=12287},"CJK Symbols and Punctuation":function(n){return n>=12288&&n<=12351},Hiragana:function(n){return n>=12352&&n<=12447},Katakana:function(n){return n>=12448&&n<=12543},Bopomofo:function(n){return n>=12544&&n<=12591},"Hangul Compatibility Jamo":function(n){return n>=12592&&n<=12687},Kanbun:function(n){return n>=12688&&n<=12703},"Bopomofo Extended":function(n){return n>=12704&&n<=12735},"CJK Strokes":function(n){return n>=12736&&n<=12783},"Katakana Phonetic Extensions":function(n){return n>=12784&&n<=12799},"Enclosed CJK Letters and Months":function(n){return n>=12800&&n<=13055},"CJK Compatibility":function(n){return n>=13056&&n<=13311},"CJK Unified Ideographs Extension A":function(n){return n>=13312&&n<=19903},"Yijing Hexagram Symbols":function(n){return n>=19904&&n<=19967},"CJK Unified Ideographs":function(n){return n>=19968&&n<=40959},"Yi Syllables":function(n){return n>=40960&&n<=42127},"Yi Radicals":function(n){return n>=42128&&n<=42191},"Hangul Jamo Extended-A":function(n){return n>=43360&&n<=43391},"Hangul Syllables":function(n){return n>=44032&&n<=55215},"Hangul Jamo Extended-B":function(n){return n>=55216&&n<=55295},"Private Use Area":function(n){return n>=57344&&n<=63743},"CJK Compatibility Ideographs":function(n){return n>=63744&&n<=64255},"Arabic Presentation Forms-A":function(n){return n>=64336&&n<=65023},"Vertical Forms":function(n){return n>=65040&&n<=65055},"CJK Compatibility Forms":function(n){return n>=65072&&n<=65103},"Small Form Variants":function(n){return n>=65104&&n<=65135},"Arabic Presentation Forms-B":function(n){return n>=65136&&n<=65279},"Halfwidth and Fullwidth Forms":function(n){return n>=65280&&n<=65519}};function ae(n){for(var o=0,f=n;o<f.length;o+=1){var p=f[o];if(Pe(p.charCodeAt(0)))return!0}return!1}function de(n){for(var o=0,f=n;o<f.length;o+=1){var p=f[o];if(!ge(p.charCodeAt(0)))return!1}return!0}function ge(n){return!(X.Arabic(n)||X["Arabic Supplement"](n)||X["Arabic Extended-A"](n)||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n))}function De(n){return n<11904?!1:!!(X["Bopomofo Extended"](n)||X.Bopomofo(n)||X["CJK Compatibility Forms"](n)||X["CJK Compatibility Ideographs"](n)||X["CJK Compatibility"](n)||X["CJK Radicals Supplement"](n)||X["CJK Strokes"](n)||X["CJK Symbols and Punctuation"](n)||X["CJK Unified Ideographs Extension A"](n)||X["CJK Unified Ideographs"](n)||X["Enclosed CJK Letters and Months"](n)||X["Halfwidth and Fullwidth Forms"](n)||X.Hiragana(n)||X["Ideographic Description Characters"](n)||X["Kangxi Radicals"](n)||X["Katakana Phonetic Extensions"](n)||X.Katakana(n)||X["Vertical Forms"](n)||X["Yi Radicals"](n)||X["Yi Syllables"](n))}function Pe(n){return n===746||n===747?!0:n<4352?!1:!!(X["Bopomofo Extended"](n)||X.Bopomofo(n)||X["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||X["CJK Compatibility Ideographs"](n)||X["CJK Compatibility"](n)||X["CJK Radicals Supplement"](n)||X["CJK Strokes"](n)||X["CJK Symbols and Punctuation"](n)&&!(n>=12296&&n<=12305)&&!(n>=12308&&n<=12319)&&n!==12336||X["CJK Unified Ideographs Extension A"](n)||X["CJK Unified Ideographs"](n)||X["Enclosed CJK Letters and Months"](n)||X["Hangul Compatibility Jamo"](n)||X["Hangul Jamo Extended-A"](n)||X["Hangul Jamo Extended-B"](n)||X["Hangul Jamo"](n)||X["Hangul Syllables"](n)||X.Hiragana(n)||X["Ideographic Description Characters"](n)||X.Kanbun(n)||X["Kangxi Radicals"](n)||X["Katakana Phonetic Extensions"](n)||X.Katakana(n)&&n!==12540||X["Halfwidth and Fullwidth Forms"](n)&&n!==65288&&n!==65289&&n!==65293&&!(n>=65306&&n<=65310)&&n!==65339&&n!==65341&&n!==65343&&!(n>=65371&&n<=65503)&&n!==65507&&!(n>=65512&&n<=65519)||X["Small Form Variants"](n)&&!(n>=65112&&n<=65118)&&!(n>=65123&&n<=65126)||X["Unified Canadian Aboriginal Syllabics"](n)||X["Unified Canadian Aboriginal Syllabics Extended"](n)||X["Vertical Forms"](n)||X["Yijing Hexagram Symbols"](n)||X["Yi Syllables"](n)||X["Yi Radicals"](n))}function Je(n){return!!(X["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||X["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||X["Letterlike Symbols"](n)||X["Number Forms"](n)||X["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||X["Control Pictures"](n)&&n!==9251||X["Optical Character Recognition"](n)||X["Enclosed Alphanumerics"](n)||X["Geometric Shapes"](n)||X["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||X["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||X["CJK Symbols and Punctuation"](n)||X.Katakana(n)||X["Private Use Area"](n)||X["CJK Compatibility Forms"](n)||X["Small Form Variants"](n)||X["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}function ot(n){return!(Pe(n)||Je(n))}function ze(n){return X.Arabic(n)||X["Arabic Supplement"](n)||X["Arabic Extended-A"](n)||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n)}function Ue(n){return n>=1424&&n<=2303||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n)}function je(n,o){return!(!o&&Ue(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||X.Khmer(n))}function lt(n){for(var o=0,f=n;o<f.length;o+=1){var p=f[o];if(Ue(p.charCodeAt(0)))return!0}return!1}function nt(n,o){for(var f=0,p=n;f<p.length;f+=1){var x=p[f];if(!je(x.charCodeAt(0),o))return!1}return!0}var We={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Zt=null,or=We.unavailable,fr=null,lr=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(or=We.error),Zt&&Zt(n)};function Dr(){Ir.fire(new ii("pluginStateChange",{pluginStatus:or,pluginURL:fr}))}var Ir=new yr,ta=function(){return or},Ur=function(n){return n({pluginStatus:or,pluginURL:fr}),Ir.on("pluginStateChange",n),n},Kr=function(n,o,f){if(f===void 0&&(f=!1),or===We.deferred||or===We.loading||or===We.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");fr=vt.resolveURL(n),or=We.deferred,Zt=o,Dr(),f||Ba()},Ba=function(){if(or!==We.deferred||!fr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");or=We.loading,Dr(),fr&&rt({url:fr},function(n){n?lr(n):(or=We.loaded,Dr())})},ri={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return or===We.loaded||ri.applyArabicShaping!=null},isLoading:function(){return or===We.loading},setState:function(o){or=o.pluginStatus,fr=o.pluginURL},isParsed:function(){return ri.applyArabicShaping!=null&&ri.processBidirectionalText!=null&&ri.processStyledBidirectionalText!=null},getPluginURL:function(){return fr}},$a=function(){!ri.isLoading()&&!ri.isLoaded()&&ta()==="deferred"&&Ba()},jt=function(o,f){this.zoom=o,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $,this.transition={})};jt.prototype.isSupportedScript=function(o){return nt(o,ri.isLoaded())},jt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},jt.prototype.getCrossfadeParameters=function(){var o=this.zoom,f=o-Math.floor(o),p=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*f}};var Jr=function(o,f){this.property=o,this.value=f,this.expression=uy(f===void 0?o.specification.default:f,o.specification)};Jr.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Jr.prototype.possiblyEvaluate=function(o,f,p){return this.property.possiblyEvaluate(this,o,f,p)};var oa=function(o){this.property=o,this.value=new Jr(o,void 0)};oa.prototype.transitioned=function(o,f){return new Ei(this.property,this.value,f,H({},o.transition,this.transition),o.now)},oa.prototype.untransitioned=function(){return new Ei(this.property,this.value,null,{},0)};var la=function(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)};la.prototype.getValue=function(o){return Me(this._values[o].value.value)},la.prototype.setValue=function(o,f){this._values.hasOwnProperty(o)||(this._values[o]=new oa(this._values[o].property)),this._values[o].value=new Jr(this._values[o].property,f===null?void 0:Me(f))},la.prototype.getTransition=function(o){return Me(this._values[o].transition)},la.prototype.setTransition=function(o,f){this._values.hasOwnProperty(o)||(this._values[o]=new oa(this._values[o].property)),this._values[o].transition=Me(f)||void 0},la.prototype.serialize=function(){for(var o={},f=0,p=Object.keys(this._values);f<p.length;f+=1){var x=p[f],A=this.getValue(x);A!==void 0&&(o[x]=A);var C=this.getTransition(x);C!==void 0&&(o[x+"-transition"]=C)}return o},la.prototype.transitioned=function(o,f){for(var p=new Vi(this._properties),x=0,A=Object.keys(this._values);x<A.length;x+=1){var C=A[x];p._values[C]=this._values[C].transitioned(o,f._values[C])}return p},la.prototype.untransitioned=function(){for(var o=new Vi(this._properties),f=0,p=Object.keys(this._values);f<p.length;f+=1){var x=p[f];o._values[x]=this._values[x].untransitioned()}return o};var Ei=function(o,f,p,x,A){this.property=o,this.value=f,this.begin=A+x.delay||0,this.end=this.begin+x.duration||0,o.specification.transition&&(x.delay||x.duration)&&(this.prior=p)};Ei.prototype.possiblyEvaluate=function(o,f,p){var x=o.now||0,A=this.value.possiblyEvaluate(o,f,p),C=this.prior;if(C){if(x>this.end)return this.prior=null,A;if(this.value.isDataDriven())return this.prior=null,A;if(x<this.begin)return C.possiblyEvaluate(o,f,p);var q=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(o,f,p),A,k(q))}else return A};var Vi=function(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)};Vi.prototype.possiblyEvaluate=function(o,f,p){for(var x=new bn(this._properties),A=0,C=Object.keys(this._values);A<C.length;A+=1){var q=C[A];x._values[q]=this._values[q].possiblyEvaluate(o,f,p)}return x},Vi.prototype.hasTransition=function(){for(var o=0,f=Object.keys(this._values);o<f.length;o+=1){var p=f[o];if(this._values[p].prior)return!0}return!1};var $i=function(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)};$i.prototype.getValue=function(o){return Me(this._values[o].value)},$i.prototype.setValue=function(o,f){this._values[o]=new Jr(this._values[o].property,f===null?void 0:Me(f))},$i.prototype.serialize=function(){for(var o={},f=0,p=Object.keys(this._values);f<p.length;f+=1){var x=p[f],A=this.getValue(x);A!==void 0&&(o[x]=A)}return o},$i.prototype.possiblyEvaluate=function(o,f,p){for(var x=new bn(this._properties),A=0,C=Object.keys(this._values);A<C.length;A+=1){var q=C[A];x._values[q]=this._values[q].possiblyEvaluate(o,f,p)}return x};var xi=function(o,f,p){this.property=o,this.value=f,this.parameters=p};xi.prototype.isConstant=function(){return this.value.kind==="constant"},xi.prototype.constantOr=function(o){return this.value.kind==="constant"?this.value.value:o},xi.prototype.evaluate=function(o,f,p,x){return this.property.evaluate(this.value,this.parameters,o,f,p,x)};var bn=function(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)};bn.prototype.get=function(o){return this._values[o]};var wr=function(o){this.specification=o};wr.prototype.possiblyEvaluate=function(o,f){return o.expression.evaluate(f)},wr.prototype.interpolate=function(o,f,p){var x=El[this.specification.type];return x?x(o,f,p):o};var Vr=function(o,f){this.specification=o,this.overrides=f};Vr.prototype.possiblyEvaluate=function(o,f,p,x){return o.expression.kind==="constant"||o.expression.kind==="camera"?new xi(this,{kind:"constant",value:o.expression.evaluate(f,null,{},p,x)},f):new xi(this,o.expression,f)},Vr.prototype.interpolate=function(o,f,p){if(o.value.kind!=="constant"||f.value.kind!=="constant")return o;if(o.value.value===void 0||f.value.value===void 0)return new xi(this,{kind:"constant",value:void 0},o.parameters);var x=El[this.specification.type];return x?new xi(this,{kind:"constant",value:x(o.value.value,f.value.value,p)},o.parameters):o},Vr.prototype.evaluate=function(o,f,p,x,A,C){return o.kind==="constant"?o.value:o.evaluate(f,p,x,A,C)};var Ni=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.possiblyEvaluate=function(p,x,A,C){if(p.value===void 0)return new xi(this,{kind:"constant",value:void 0},x);if(p.expression.kind==="constant"){var q=p.expression.evaluate(x,null,{},A,C),W=p.property.specification.type==="resolvedImage",j=W&&typeof q!="string"?q.name:q,Q=this._calculate(j,j,j,x);return new xi(this,{kind:"constant",value:Q},x)}else if(p.expression.kind==="camera"){var ie=this._calculate(p.expression.evaluate({zoom:x.zoom-1}),p.expression.evaluate({zoom:x.zoom}),p.expression.evaluate({zoom:x.zoom+1}),x);return new xi(this,{kind:"constant",value:ie},x)}else return new xi(this,p.expression,x)},o.prototype.evaluate=function(p,x,A,C,q,W){if(p.kind==="source"){var j=p.evaluate(x,A,C,q,W);return this._calculate(j,j,j,x)}else return p.kind==="composite"?this._calculate(p.evaluate({zoom:Math.floor(x.zoom)-1},A,C),p.evaluate({zoom:Math.floor(x.zoom)},A,C),p.evaluate({zoom:Math.floor(x.zoom)+1},A,C),x):p.value},o.prototype._calculate=function(p,x,A,C){var q=C.zoom;return q>C.zoomHistory.lastIntegerZoom?{from:p,to:x}:{from:A,to:x}},o.prototype.interpolate=function(p){return p},o}(Vr),Ti=function(o){this.specification=o};Ti.prototype.possiblyEvaluate=function(o,f,p,x){if(o.value!==void 0)if(o.expression.kind==="constant"){var A=o.expression.evaluate(f,null,{},p,x);return this._calculate(A,A,A,f)}else return this._calculate(o.expression.evaluate(new jt(Math.floor(f.zoom-1),f)),o.expression.evaluate(new jt(Math.floor(f.zoom),f)),o.expression.evaluate(new jt(Math.floor(f.zoom+1),f)),f)},Ti.prototype._calculate=function(o,f,p,x){var A=x.zoom;return A>x.zoomHistory.lastIntegerZoom?{from:o,to:f}:{from:p,to:f}},Ti.prototype.interpolate=function(o){return o};var uo=function(o){this.specification=o};uo.prototype.possiblyEvaluate=function(o,f,p,x){return!!o.expression.evaluate(f,null,{},p,x)},uo.prototype.interpolate=function(){return!1};var Rn=function(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var f in o){var p=o[f];p.specification.overridable&&this.overridableProperties.push(f);var x=this.defaultPropertyValues[f]=new Jr(p,void 0),A=this.defaultTransitionablePropertyValues[f]=new oa(p);this.defaultTransitioningPropertyValues[f]=A.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=x.possiblyEvaluate({})}};y("DataDrivenProperty",Vr),y("DataConstantProperty",wr),y("CrossFadedDataDrivenProperty",Ni),y("CrossFadedProperty",Ti),y("ColorRampProperty",uo);var cn="-transition",pi=function(n){function o(f,p){if(n.call(this),this.id=f.id,this.type=f.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},f.type!=="custom"&&(f=f,this.metadata=f.metadata,this.minzoom=f.minzoom,this.maxzoom=f.maxzoom,f.type!=="background"&&(this.source=f.source,this.sourceLayer=f["source-layer"],this.filter=f.filter),p.layout&&(this._unevaluatedLayout=new $i(p.layout)),p.paint)){this._transitionablePaint=new la(p.paint);for(var x in f.paint)this.setPaintProperty(x,f.paint[x],{validate:!1});for(var A in f.layout)this.setLayoutProperty(A,f.layout[A],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new bn(p.paint)}}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},o.prototype.getLayoutProperty=function(p){return p==="visibility"?this.visibility:this._unevaluatedLayout.getValue(p)},o.prototype.setLayoutProperty=function(p,x,A){if(A===void 0&&(A={}),x!=null){var C="layers."+this.id+".layout."+p;if(this._validate(Bl,C,p,x,A))return}if(p==="visibility"){this.visibility=x;return}this._unevaluatedLayout.setValue(p,x)},o.prototype.getPaintProperty=function(p){return me(p,cn)?this._transitionablePaint.getTransition(p.slice(0,-cn.length)):this._transitionablePaint.getValue(p)},o.prototype.setPaintProperty=function(p,x,A){if(A===void 0&&(A={}),x!=null){var C="layers."+this.id+".paint."+p;if(this._validate(uh,C,p,x,A))return!1}if(me(p,cn))return this._transitionablePaint.setTransition(p.slice(0,-cn.length),x||void 0),!1;var q=this._transitionablePaint._values[p],W=q.property.specification["property-type"]==="cross-faded-data-driven",j=q.value.isDataDriven(),Q=q.value;this._transitionablePaint.setValue(p,x),this._handleSpecialPaintPropertyUpdate(p);var ie=this._transitionablePaint._values[p].value,pe=ie.isDataDriven();return pe||j||W||this._handleOverridablePaintPropertyUpdate(p,Q,ie)},o.prototype._handleSpecialPaintPropertyUpdate=function(p){},o.prototype._handleOverridablePaintPropertyUpdate=function(p,x,A){return!1},o.prototype.isHidden=function(p){return this.minzoom&&p<this.minzoom||this.maxzoom&&p>=this.maxzoom?!0:this.visibility==="none"},o.prototype.updateTransitions=function(p){this._transitioningPaint=this._transitionablePaint.transitioned(p,this._transitioningPaint)},o.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},o.prototype.recalculate=function(p,x){p.getCrossfadeParameters&&(this._crossfadeParameters=p.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(p,void 0,x)),this.paint=this._transitioningPaint.possiblyEvaluate(p,void 0,x)},o.prototype.serialize=function(){var p={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(p.layout=p.layout||{},p.layout.visibility=this.visibility),Ce(p,function(x,A){return x!==void 0&&!(A==="layout"&&!Object.keys(x).length)&&!(A==="paint"&&!Object.keys(x).length)})},o.prototype._validate=function(p,x,A,C,q){return q===void 0&&(q={}),q&&q.validate===!1?!1:nc(this,p.call(ti,{key:x,layerType:this.type,objectKey:A,value:C,styleSpec:Xt,style:{glyphs:!0,sprite:!0}}))},o.prototype.is3D=function(){return!1},o.prototype.isTileClipped=function(){return!1},o.prototype.hasOffscreenPass=function(){return!1},o.prototype.resize=function(){},o.prototype.isStateDependent=function(){for(var p in this.paint._values){var x=this.paint.get(p);if(!(!(x instanceof xi)||!ff(x.property.specification))&&(x.value.kind==="source"||x.value.kind==="composite")&&x.value.isStateDependent)return!0}return!1},o}(yr),Ko={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},fo=function(o,f){this._structArray=o,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ci=128,bf=5,Ma=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Ma.serialize=function(o,f){return o._trim(),f&&(o.isTransferred=!0,f.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}},Ma.deserialize=function(o){var f=Object.create(this.prototype);return f.arrayBuffer=o.arrayBuffer,f.length=o.length,f.capacity=o.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f},Ma.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ma.prototype.clear=function(){this.length=0},Ma.prototype.resize=function(o){this.reserve(o),this.length=o},Ma.prototype.reserve=function(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(this.capacity*bf),ci),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}},Ma.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function ui(n,o){o===void 0&&(o=1);var f=0,p=0,x=n.map(function(C){var q=Vl(C.type),W=f=$v(f,Math.max(o,q)),j=C.components||1;return p=Math.max(p,q),f+=q*j,{name:C.name,type:C.type,components:j,offset:W}}),A=$v(f,Math.max(p,o));return{members:x,size:A,alignment:o}}function Vl(n){return Ko[n].BYTES_PER_ELEMENT}function $v(n,o){return Math.ceil(n/o)*o}var oc=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x){var A=this.length;return this.resize(A+1),this.emplace(A,p,x)},o.prototype.emplace=function(p,x,A){var C=p*2;return this.int16[C+0]=x,this.int16[C+1]=A,p},o}(Ma);oc.prototype.bytesPerElement=4,y("StructArrayLayout2i4",oc);var dy=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C){var q=this.length;return this.resize(q+1),this.emplace(q,p,x,A,C)},o.prototype.emplace=function(p,x,A,C,q){var W=p*4;return this.int16[W+0]=x,this.int16[W+1]=A,this.int16[W+2]=C,this.int16[W+3]=q,p},o}(Ma);dy.prototype.bytesPerElement=8,y("StructArrayLayout4i8",dy);var wf=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q,W){var j=this.length;return this.resize(j+1),this.emplace(j,p,x,A,C,q,W)},o.prototype.emplace=function(p,x,A,C,q,W,j){var Q=p*6;return this.int16[Q+0]=x,this.int16[Q+1]=A,this.int16[Q+2]=C,this.int16[Q+3]=q,this.int16[Q+4]=W,this.int16[Q+5]=j,p},o}(Ma);wf.prototype.bytesPerElement=12,y("StructArrayLayout2i4i12",wf);var ch=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q,W){var j=this.length;return this.resize(j+1),this.emplace(j,p,x,A,C,q,W)},o.prototype.emplace=function(p,x,A,C,q,W,j){var Q=p*4,ie=p*8;return this.int16[Q+0]=x,this.int16[Q+1]=A,this.uint8[ie+4]=C,this.uint8[ie+5]=q,this.uint8[ie+6]=W,this.uint8[ie+7]=j,p},o}(Ma);ch.prototype.bytesPerElement=8,y("StructArrayLayout2i4ub8",ch);var hh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x){var A=this.length;return this.resize(A+1),this.emplace(A,p,x)},o.prototype.emplace=function(p,x,A){var C=p*2;return this.float32[C+0]=x,this.float32[C+1]=A,p},o}(Ma);hh.prototype.bytesPerElement=8,y("StructArrayLayout2f8",hh);var Po=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q,W,j,Q,ie,pe){var ve=this.length;return this.resize(ve+1),this.emplace(ve,p,x,A,C,q,W,j,Q,ie,pe)},o.prototype.emplace=function(p,x,A,C,q,W,j,Q,ie,pe,ve){var ke=p*10;return this.uint16[ke+0]=x,this.uint16[ke+1]=A,this.uint16[ke+2]=C,this.uint16[ke+3]=q,this.uint16[ke+4]=W,this.uint16[ke+5]=j,this.uint16[ke+6]=Q,this.uint16[ke+7]=ie,this.uint16[ke+8]=pe,this.uint16[ke+9]=ve,p},o}(Ma);Po.prototype.bytesPerElement=20,y("StructArrayLayout10ui20",Po);var Tf=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q,W,j,Q,ie,pe,ve,ke){var qe=this.length;return this.resize(qe+1),this.emplace(qe,p,x,A,C,q,W,j,Q,ie,pe,ve,ke)},o.prototype.emplace=function(p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe){var st=p*12;return this.int16[st+0]=x,this.int16[st+1]=A,this.int16[st+2]=C,this.int16[st+3]=q,this.uint16[st+4]=W,this.uint16[st+5]=j,this.uint16[st+6]=Q,this.uint16[st+7]=ie,this.int16[st+8]=pe,this.int16[st+9]=ve,this.int16[st+10]=ke,this.int16[st+11]=qe,p},o}(Ma);Tf.prototype.bytesPerElement=24,y("StructArrayLayout4i4ui4i24",Tf);var py=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A){var C=this.length;return this.resize(C+1),this.emplace(C,p,x,A)},o.prototype.emplace=function(p,x,A,C){var q=p*3;return this.float32[q+0]=x,this.float32[q+1]=A,this.float32[q+2]=C,p},o}(Ma);py.prototype.bytesPerElement=12,y("StructArrayLayout3f12",py);var my=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var x=this.length;return this.resize(x+1),this.emplace(x,p)},o.prototype.emplace=function(p,x){var A=p*1;return this.uint32[A+0]=x,p},o}(Ma);my.prototype.bytesPerElement=4,y("StructArrayLayout1ul4",my);var ed=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q,W,j,Q,ie){var pe=this.length;return this.resize(pe+1),this.emplace(pe,p,x,A,C,q,W,j,Q,ie)},o.prototype.emplace=function(p,x,A,C,q,W,j,Q,ie,pe){var ve=p*10,ke=p*5;return this.int16[ve+0]=x,this.int16[ve+1]=A,this.int16[ve+2]=C,this.int16[ve+3]=q,this.int16[ve+4]=W,this.int16[ve+5]=j,this.uint32[ke+3]=Q,this.uint16[ve+8]=ie,this.uint16[ve+9]=pe,p},o}(Ma);ed.prototype.bytesPerElement=20,y("StructArrayLayout6i1ul2ui20",ed);var jp=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q,W){var j=this.length;return this.resize(j+1),this.emplace(j,p,x,A,C,q,W)},o.prototype.emplace=function(p,x,A,C,q,W,j){var Q=p*6;return this.int16[Q+0]=x,this.int16[Q+1]=A,this.int16[Q+2]=C,this.int16[Q+3]=q,this.int16[Q+4]=W,this.int16[Q+5]=j,p},o}(Ma);jp.prototype.bytesPerElement=12,y("StructArrayLayout2i2i2i12",jp);var Pu=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q){var W=this.length;return this.resize(W+1),this.emplace(W,p,x,A,C,q)},o.prototype.emplace=function(p,x,A,C,q,W){var j=p*4,Q=p*8;return this.float32[j+0]=x,this.float32[j+1]=A,this.float32[j+2]=C,this.int16[Q+6]=q,this.int16[Q+7]=W,p},o}(Ma);Pu.prototype.bytesPerElement=16,y("StructArrayLayout2f1f2i16",Pu);var Qo=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C){var q=this.length;return this.resize(q+1),this.emplace(q,p,x,A,C)},o.prototype.emplace=function(p,x,A,C,q){var W=p*12,j=p*3;return this.uint8[W+0]=x,this.uint8[W+1]=A,this.float32[j+1]=C,this.float32[j+2]=q,p},o}(Ma);Qo.prototype.bytesPerElement=12,y("StructArrayLayout2ub2f12",Qo);var Du=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A){var C=this.length;return this.resize(C+1),this.emplace(C,p,x,A)},o.prototype.emplace=function(p,x,A,C){var q=p*3;return this.uint16[q+0]=x,this.uint16[q+1]=A,this.uint16[q+2]=C,p},o}(Ma);Du.prototype.bytesPerElement=6,y("StructArrayLayout3ui6",Du);var td=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe,st,Qe,Lt,_t){var St=this.length;return this.resize(St+1),this.emplace(St,p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe,st,Qe,Lt,_t)},o.prototype.emplace=function(p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe,st,Qe,Lt,_t,St){var It=p*24,Jt=p*12,hr=p*48;return this.int16[It+0]=x,this.int16[It+1]=A,this.uint16[It+2]=C,this.uint16[It+3]=q,this.uint32[Jt+2]=W,this.uint32[Jt+3]=j,this.uint32[Jt+4]=Q,this.uint16[It+10]=ie,this.uint16[It+11]=pe,this.uint16[It+12]=ve,this.float32[Jt+7]=ke,this.float32[Jt+8]=qe,this.uint8[hr+36]=st,this.uint8[hr+37]=Qe,this.uint8[hr+38]=Lt,this.uint32[Jt+10]=_t,this.int16[It+22]=St,p},o}(Ma);td.prototype.bytesPerElement=48,y("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",td);var Jp=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe,st,Qe,Lt,_t,St,It,Jt,hr,ur,Rr,kr,zr,Qr,Fr,Nr){var ma=this.length;return this.resize(ma+1),this.emplace(ma,p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe,st,Qe,Lt,_t,St,It,Jt,hr,ur,Rr,kr,zr,Qr,Fr,Nr)},o.prototype.emplace=function(p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe,st,Qe,Lt,_t,St,It,Jt,hr,ur,Rr,kr,zr,Qr,Fr,Nr,ma){var jr=p*34,Xa=p*17;return this.int16[jr+0]=x,this.int16[jr+1]=A,this.int16[jr+2]=C,this.int16[jr+3]=q,this.int16[jr+4]=W,this.int16[jr+5]=j,this.int16[jr+6]=Q,this.int16[jr+7]=ie,this.uint16[jr+8]=pe,this.uint16[jr+9]=ve,this.uint16[jr+10]=ke,this.uint16[jr+11]=qe,this.uint16[jr+12]=st,this.uint16[jr+13]=Qe,this.uint16[jr+14]=Lt,this.uint16[jr+15]=_t,this.uint16[jr+16]=St,this.uint16[jr+17]=It,this.uint16[jr+18]=Jt,this.uint16[jr+19]=hr,this.uint16[jr+20]=ur,this.uint16[jr+21]=Rr,this.uint16[jr+22]=kr,this.uint32[Xa+12]=zr,this.float32[Xa+13]=Qr,this.float32[Xa+14]=Fr,this.float32[Xa+15]=Nr,this.float32[Xa+16]=ma,p},o}(Ma);Jp.prototype.bytesPerElement=68,y("StructArrayLayout8i15ui1ul4f68",Jp);var vh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var x=this.length;return this.resize(x+1),this.emplace(x,p)},o.prototype.emplace=function(p,x){var A=p*1;return this.float32[A+0]=x,p},o}(Ma);vh.prototype.bytesPerElement=4,y("StructArrayLayout1f4",vh);var yy=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A){var C=this.length;return this.resize(C+1),this.emplace(C,p,x,A)},o.prototype.emplace=function(p,x,A,C){var q=p*3;return this.int16[q+0]=x,this.int16[q+1]=A,this.int16[q+2]=C,p},o}(Ma);yy.prototype.bytesPerElement=6,y("StructArrayLayout3i6",yy);var Af=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A){var C=this.length;return this.resize(C+1),this.emplace(C,p,x,A)},o.prototype.emplace=function(p,x,A,C){var q=p*2,W=p*4;return this.uint32[q+0]=x,this.uint16[W+2]=A,this.uint16[W+3]=C,p},o}(Ma);Af.prototype.bytesPerElement=8,y("StructArrayLayout1ul2ui8",Af);var rd=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x){var A=this.length;return this.resize(A+1),this.emplace(A,p,x)},o.prototype.emplace=function(p,x,A){var C=p*2;return this.uint16[C+0]=x,this.uint16[C+1]=A,p},o}(Ma);rd.prototype.bytesPerElement=4,y("StructArrayLayout2ui4",rd);var dh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var x=this.length;return this.resize(x+1),this.emplace(x,p)},o.prototype.emplace=function(p,x){var A=p*1;return this.uint16[A+0]=x,p},o}(Ma);dh.prototype.bytesPerElement=2,y("StructArrayLayout1ui2",dh);var sc=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,C){var q=this.length;return this.resize(q+1),this.emplace(q,p,x,A,C)},o.prototype.emplace=function(p,x,A,C,q){var W=p*4;return this.float32[W+0]=x,this.float32[W+1]=A,this.float32[W+2]=C,this.float32[W+3]=q,p},o}(Ma);sc.prototype.bytesPerElement=16,y("StructArrayLayout4f16",sc);var I1=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var f={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return f.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},f.x1.get=function(){return this._structArray.int16[this._pos2+2]},f.y1.get=function(){return this._structArray.int16[this._pos2+3]},f.x2.get=function(){return this._structArray.int16[this._pos2+4]},f.y2.get=function(){return this._structArray.int16[this._pos2+5]},f.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},f.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},f.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},f.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(o.prototype,f),o}(fo);I1.prototype.size=20;var gy=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new I1(this,p)},o}(ed);y("CollisionBoxArray",gy);var lc=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var f={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return f.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},f.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},f.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},f.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},f.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},f.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},f.segment.get=function(){return this._structArray.uint16[this._pos2+10]},f.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},f.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},f.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},f.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},f.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},f.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},f.placedOrientation.set=function(p){this._structArray.uint8[this._pos1+37]=p},f.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},f.hidden.set=function(p){this._structArray.uint8[this._pos1+38]=p},f.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},f.crossTileID.set=function(p){this._structArray.uint32[this._pos4+10]=p},f.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(o.prototype,f),o}(fo);lc.prototype.size=48;var _y=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new lc(this,p)},o}(td);y("PlacedSymbolArray",_y);var ph=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var f={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return f.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},f.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},f.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},f.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},f.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},f.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},f.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},f.key.get=function(){return this._structArray.uint16[this._pos2+8]},f.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},f.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},f.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},f.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},f.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},f.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},f.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},f.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},f.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},f.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},f.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},f.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},f.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},f.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},f.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},f.crossTileID.set=function(p){this._structArray.uint32[this._pos4+12]=p},f.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},f.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},f.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},f.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(o.prototype,f),o}(fo);ph.prototype.size=68;var R1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new ph(this,p)},o}(Jp);y("SymbolInstanceArray",R1);var F1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getoffsetX=function(p){return this.float32[p*1+0]},o}(vh);y("GlyphOffsetArray",F1);var al=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getx=function(p){return this.int16[p*3+0]},o.prototype.gety=function(p){return this.int16[p*3+1]},o.prototype.gettileUnitDistanceFromAnchor=function(p){return this.int16[p*3+2]},o}(yy);y("SymbolLineVertexArray",al);var q1=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var f={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return f.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},f.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},f.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(o.prototype,f),o}(fo);q1.prototype.size=8;var N1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new q1(this,p)},o}(Af);y("FeatureIndexArray",N1);var A3=ui([{name:"a_pos",components:2,type:"Int16"}],4),B1=A3.members,wn=function(o){o===void 0&&(o=[]),this.segments=o};wn.prototype.prepareSegment=function(o,f,p,x){var A=this.segments[this.segments.length-1];return o>wn.MAX_VERTEX_ARRAY_LENGTH&&Ae("Max vertices per segment is "+wn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+o),(!A||A.vertexLength+o>wn.MAX_VERTEX_ARRAY_LENGTH||A.sortKey!==x)&&(A={vertexOffset:f.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},x!==void 0&&(A.sortKey=x),this.segments.push(A)),A},wn.prototype.get=function(){return this.segments},wn.prototype.destroy=function(){for(var o=0,f=this.segments;o<f.length;o+=1){var p=f[o];for(var x in p.vaos)p.vaos[x].destroy()}},wn.simpleSegment=function(o,f,p,x){return new wn([{vertexOffset:o,primitiveOffset:f,vertexLength:p,primitiveLength:x,vaos:{},sortKey:0}])},wn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,y("SegmentVector",wn);function g(n,o){return n=I(Math.floor(n),0,255),o=I(Math.floor(o),0,255),256*n+o}var h=ui([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),b=s(function(n){function o(f,p){var x,A,C,q,W,j,Q,ie;for(x=f.length&3,A=f.length-x,C=p,W=3432918353,j=461845907,ie=0;ie<A;)Q=f.charCodeAt(ie)&255|(f.charCodeAt(++ie)&255)<<8|(f.charCodeAt(++ie)&255)<<16|(f.charCodeAt(++ie)&255)<<24,++ie,Q=(Q&65535)*W+(((Q>>>16)*W&65535)<<16)&4294967295,Q=Q<<15|Q>>>17,Q=(Q&65535)*j+(((Q>>>16)*j&65535)<<16)&4294967295,C^=Q,C=C<<13|C>>>19,q=(C&65535)*5+(((C>>>16)*5&65535)<<16)&4294967295,C=(q&65535)+27492+(((q>>>16)+58964&65535)<<16);switch(Q=0,x){case 3:Q^=(f.charCodeAt(ie+2)&255)<<16;case 2:Q^=(f.charCodeAt(ie+1)&255)<<8;case 1:Q^=f.charCodeAt(ie)&255,Q=(Q&65535)*W+(((Q>>>16)*W&65535)<<16)&4294967295,Q=Q<<15|Q>>>17,Q=(Q&65535)*j+(((Q>>>16)*j&65535)<<16)&4294967295,C^=Q}return C^=f.length,C^=C>>>16,C=(C&65535)*2246822507+(((C>>>16)*2246822507&65535)<<16)&4294967295,C^=C>>>13,C=(C&65535)*3266489909+(((C>>>16)*3266489909&65535)<<16)&4294967295,C^=C>>>16,C>>>0}n.exports=o}),d=s(function(n){function o(f,p){for(var x=f.length,A=p^x,C=0,q;x>=4;)q=f.charCodeAt(C)&255|(f.charCodeAt(++C)&255)<<8|(f.charCodeAt(++C)&255)<<16|(f.charCodeAt(++C)&255)<<24,q=(q&65535)*1540483477+(((q>>>16)*1540483477&65535)<<16),q^=q>>>24,q=(q&65535)*1540483477+(((q>>>16)*1540483477&65535)<<16),A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16)^q,x-=4,++C;switch(x){case 3:A^=(f.charCodeAt(C+2)&255)<<16;case 2:A^=(f.charCodeAt(C+1)&255)<<8;case 1:A^=f.charCodeAt(C)&255,A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16)}return A^=A>>>13,A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16),A^=A>>>15,A>>>0}n.exports=o}),w=b,P=b,F=d;w.murmur3=P,w.murmur2=F;var G=function(){this.ids=[],this.positions=[],this.indexed=!1};G.prototype.add=function(o,f,p,x){this.ids.push(te(o)),this.positions.push(f,p,x)},G.prototype.getPositions=function(o){for(var f=te(o),p=0,x=this.ids.length-1;p<x;){var A=p+x>>1;this.ids[A]>=f?x=A:p=A+1}for(var C=[];this.ids[p]===f;){var q=this.positions[3*p],W=this.positions[3*p+1],j=this.positions[3*p+2];C.push({index:q,start:W,end:j}),p++}return C},G.serialize=function(o,f){var p=new Float64Array(o.ids),x=new Uint32Array(o.positions);return fe(p,x,0,p.length-1),f&&f.push(p.buffer,x.buffer),{ids:p,positions:x}},G.deserialize=function(o){var f=new G;return f.ids=o.ids,f.positions=o.positions,f.indexed=!0,f};var K=Math.pow(2,53)-1;function te(n){var o=+n;return!isNaN(o)&&o<=K?o:w(String(n))}function fe(n,o,f,p){for(;f<p;){for(var x=n[f+p>>1],A=f-1,C=p+1;;){do A++;while(n[A]<x);do C--;while(n[C]>x);if(A>=C)break;we(n,A,C),we(o,3*A,3*C),we(o,3*A+1,3*C+1),we(o,3*A+2,3*C+2)}C-f<p-C?(fe(n,o,f,C),f=C+1):(fe(n,o,C+1,p),p=C)}}function we(n,o,f){var p=n[o];n[o]=n[f],n[f]=p}y("FeaturePositionMap",G);var be=function(o,f){this.gl=o.gl,this.location=f},Ie=function(n){function o(f,p){n.call(this,f,p),this.current=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))},o}(be),Ye=function(n){function o(f,p){n.call(this,f,p),this.current=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))},o}(be),Ze=function(n){function o(f,p){n.call(this,f,p),this.current=[0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1])&&(this.current=p,this.gl.uniform2f(this.location,p[0],p[1]))},o}(be),Oe=function(n){function o(f,p){n.call(this,f,p),this.current=[0,0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1]||p[2]!==this.current[2])&&(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2]))},o}(be),Xe=function(n){function o(f,p){n.call(this,f,p),this.current=[0,0,0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1]||p[2]!==this.current[2]||p[3]!==this.current[3])&&(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3]))},o}(be),ht=function(n){function o(f,p){n.call(this,f,p),this.current=ni.transparent}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p.r!==this.current.r||p.g!==this.current.g||p.b!==this.current.b||p.a!==this.current.a)&&(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a))},o}(be),zt=new Float32Array(16),qt=function(n){function o(f,p){n.call(this,f,p),this.current=zt}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){if(p[12]!==this.current[12]||p[0]!==this.current[0]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);return}for(var x=1;x<16;x++)if(p[x]!==this.current[x]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}},o}(be);function Qt(n){return[g(255*n.r,255*n.g),g(255*n.b,255*n.a)]}var rr=function(o,f,p){this.value=o,this.uniformNames=f.map(function(x){return"u_"+x}),this.type=p};rr.prototype.setUniform=function(o,f,p){o.set(p.constantOr(this.value))},rr.prototype.getBinding=function(o,f,p){return this.type==="color"?new ht(o,f):new Ye(o,f)};var Yt=function(o,f){this.uniformNames=f.map(function(p){return"u_"+p}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Yt.prototype.setConstantPatternPositions=function(o,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=o.tlbr},Yt.prototype.setUniform=function(o,f,p,x){var A=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;A&&o.set(A)},Yt.prototype.getBinding=function(o,f,p){return p.substr(0,9)==="u_pattern"?new Xe(o,f):new Ye(o,f)};var ar=function(o,f,p,x){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=f.map(function(A){return{name:"a_"+A,type:"Float32",components:p==="color"?2:1,offset:0}}),this.paintVertexArray=new x};ar.prototype.populatePaintArray=function(o,f,p,x,A){var C=this.paintVertexArray.length,q=this.expression.evaluate(new jt(0),f,{},x,[],A);this.paintVertexArray.resize(o),this._setPaintValue(C,o,q)},ar.prototype.updatePaintArray=function(o,f,p,x){var A=this.expression.evaluate({zoom:0},p,x);this._setPaintValue(o,f,A)},ar.prototype._setPaintValue=function(o,f,p){if(this.type==="color")for(var x=Qt(p),A=o;A<f;A++)this.paintVertexArray.emplace(A,x[0],x[1]);else{for(var C=o;C<f;C++)this.paintVertexArray.emplace(C,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}},ar.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ar.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var cr=function(o,f,p,x,A,C){this.expression=o,this.uniformNames=f.map(function(q){return"u_"+q+"_t"}),this.type=p,this.useIntegerZoom=x,this.zoom=A,this.maxValue=0,this.paintVertexAttributes=f.map(function(q){return{name:"a_"+q,type:"Float32",components:p==="color"?4:2,offset:0}}),this.paintVertexArray=new C};cr.prototype.populatePaintArray=function(o,f,p,x,A){var C=this.expression.evaluate(new jt(this.zoom),f,{},x,[],A),q=this.expression.evaluate(new jt(this.zoom+1),f,{},x,[],A),W=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(W,o,C,q)},cr.prototype.updatePaintArray=function(o,f,p,x){var A=this.expression.evaluate({zoom:this.zoom},p,x),C=this.expression.evaluate({zoom:this.zoom+1},p,x);this._setPaintValue(o,f,A,C)},cr.prototype._setPaintValue=function(o,f,p,x){if(this.type==="color")for(var A=Qt(p),C=Qt(x),q=o;q<f;q++)this.paintVertexArray.emplace(q,A[0],A[1],C[0],C[1]);else{for(var W=o;W<f;W++)this.paintVertexArray.emplace(W,p,x);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(x))}},cr.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},cr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},cr.prototype.setUniform=function(o,f){var p=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,x=I(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);o.set(x)},cr.prototype.getBinding=function(o,f,p){return new Ye(o,f)};var _r=function(o,f,p,x,A,C){this.expression=o,this.type=f,this.useIntegerZoom=p,this.zoom=x,this.layerId=C,this.zoomInPaintVertexArray=new A,this.zoomOutPaintVertexArray=new A};_r.prototype.populatePaintArray=function(o,f,p){var x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(x,o,f.patterns&&f.patterns[this.layerId],p)},_r.prototype.updatePaintArray=function(o,f,p,x,A){this._setPaintValues(o,f,p.patterns&&p.patterns[this.layerId],A)},_r.prototype._setPaintValues=function(o,f,p,x){if(!(!x||!p)){var A=p.min,C=p.mid,q=p.max,W=x[A],j=x[C],Q=x[q];if(!(!W||!j||!Q))for(var ie=o;ie<f;ie++)this.zoomInPaintVertexArray.emplace(ie,j.tl[0],j.tl[1],j.br[0],j.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],j.pixelRatio,W.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,j.tl[0],j.tl[1],j.br[0],j.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],j.pixelRatio,Q.pixelRatio)}},_r.prototype.upload=function(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,h.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,h.members,this.expression.isStateDependent))},_r.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Pr=function(o,f,p){this.binders={},this._buffers=[];var x=[];for(var A in o.paint._values)if(p(A)){var C=o.paint.get(A);if(!(!(C instanceof xi)||!ff(C.property.specification))){var q=Xr(A,o.type),W=C.value,j=C.property.specification.type,Q=C.property.useIntegerZoom,ie=C.property.specification["property-type"],pe=ie==="cross-faded"||ie==="cross-faded-data-driven";if(W.kind==="constant")this.binders[A]=pe?new Yt(W.value,q):new rr(W.value,q,j),x.push("/u_"+A);else if(W.kind==="source"||pe){var ve=ba(A,j,"source");this.binders[A]=pe?new _r(W,j,Q,f,ve,o.id):new ar(W,q,j,ve),x.push("/a_"+A)}else{var ke=ba(A,j,"composite");this.binders[A]=new cr(W,q,j,Q,f,ke),x.push("/z_"+A)}}}this.cacheKey=x.sort().join("")};Pr.prototype.getMaxValue=function(o){var f=this.binders[o];return f instanceof ar||f instanceof cr?f.maxValue:0},Pr.prototype.populatePaintArrays=function(o,f,p,x,A){for(var C in this.binders){var q=this.binders[C];(q instanceof ar||q instanceof cr||q instanceof _r)&&q.populatePaintArray(o,f,p,x,A)}},Pr.prototype.setConstantPatternPositions=function(o,f){for(var p in this.binders){var x=this.binders[p];x instanceof Yt&&x.setConstantPatternPositions(o,f)}},Pr.prototype.updatePaintArrays=function(o,f,p,x,A){var C=!1;for(var q in o)for(var W=f.getPositions(q),j=0,Q=W;j<Q.length;j+=1){var ie=Q[j],pe=p.feature(ie.index);for(var ve in this.binders){var ke=this.binders[ve];if((ke instanceof ar||ke instanceof cr||ke instanceof _r)&&ke.expression.isStateDependent===!0){var qe=x.paint.get(ve);ke.expression=qe.value,ke.updatePaintArray(ie.start,ie.end,pe,o[q],A),C=!0}}}return C},Pr.prototype.defines=function(){var o=[];for(var f in this.binders){var p=this.binders[f];(p instanceof rr||p instanceof Yt)&&o.push.apply(o,p.uniformNames.map(function(x){return"#define HAS_UNIFORM_"+x}))}return o},Pr.prototype.getBinderAttributes=function(){var o=[];for(var f in this.binders){var p=this.binders[f];if(p instanceof ar||p instanceof cr)for(var x=0;x<p.paintVertexAttributes.length;x++)o.push(p.paintVertexAttributes[x].name);else if(p instanceof _r)for(var A=0;A<h.members.length;A++)o.push(h.members[A].name)}return o},Pr.prototype.getBinderUniforms=function(){var o=[];for(var f in this.binders){var p=this.binders[f];if(p instanceof rr||p instanceof Yt||p instanceof cr)for(var x=0,A=p.uniformNames;x<A.length;x+=1){var C=A[x];o.push(C)}}return o},Pr.prototype.getPaintVertexBuffers=function(){return this._buffers},Pr.prototype.getUniforms=function(o,f){var p=[];for(var x in this.binders){var A=this.binders[x];if(A instanceof rr||A instanceof Yt||A instanceof cr)for(var C=0,q=A.uniformNames;C<q.length;C+=1){var W=q[C];if(f[W]){var j=A.getBinding(o,f[W],W);p.push({name:W,property:x,binding:j})}}}return p},Pr.prototype.setUniforms=function(o,f,p,x){for(var A=0,C=f;A<C.length;A+=1){var q=C[A],W=q.name,j=q.property,Q=q.binding;this.binders[j].setUniform(Q,x,p.get(j),W)}},Pr.prototype.updatePaintBuffers=function(o){this._buffers=[];for(var f in this.binders){var p=this.binders[f];if(o&&p instanceof _r){var x=o.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(p instanceof ar||p instanceof cr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}},Pr.prototype.upload=function(o){for(var f in this.binders){var p=this.binders[f];(p instanceof ar||p instanceof cr||p instanceof _r)&&p.upload(o)}this.updatePaintBuffers()},Pr.prototype.destroy=function(){for(var o in this.binders){var f=this.binders[o];(f instanceof ar||f instanceof cr||f instanceof _r)&&f.destroy()}};var Sr=function(o,f,p){p===void 0&&(p=function(){return!0}),this.programConfigurations={};for(var x=0,A=o;x<A.length;x+=1){var C=A[x];this.programConfigurations[C.id]=new Pr(C,f,p)}this.needsUpload=!1,this._featureMap=new G,this._bufferOffset=0};Sr.prototype.populatePaintArrays=function(o,f,p,x,A,C){for(var q in this.programConfigurations)this.programConfigurations[q].populatePaintArrays(o,f,x,A,C);f.id!==void 0&&this._featureMap.add(f.id,p,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0},Sr.prototype.updatePaintArrays=function(o,f,p,x){for(var A=0,C=p;A<C.length;A+=1){var q=C[A];this.needsUpload=this.programConfigurations[q.id].updatePaintArrays(o,this._featureMap,f,q,x)||this.needsUpload}},Sr.prototype.get=function(o){return this.programConfigurations[o]},Sr.prototype.upload=function(o){if(this.needsUpload){for(var f in this.programConfigurations)this.programConfigurations[f].upload(o);this.needsUpload=!1}},Sr.prototype.destroy=function(){for(var o in this.programConfigurations)this.programConfigurations[o].destroy()};function Xr(n,o){var f={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return f[n]||[n.replace(o+"-","").replace(/-/g,"_")]}function Fa(n){var o={"line-pattern":{source:Po,composite:Po},"fill-pattern":{source:Po,composite:Po},"fill-extrusion-pattern":{source:Po,composite:Po}};return o[n]}function ba(n,o,f){var p={color:{source:hh,composite:sc},number:{source:vh,composite:hh}},x=Fa(n);return x&&x[f]||p[o][f]}y("ConstantBinder",rr),y("CrossFadedConstantBinder",Yt),y("SourceExpressionBinder",ar),y("CrossFadedCompositeBinder",_r),y("CompositeExpressionBinder",cr),y("ProgramConfiguration",Pr,{omit:["_buffers"]}),y("ProgramConfigurationSet",Sr);var qr=8192,ka=15,ia=Math.pow(2,ka-1)-1,Wa=-ia-1;function Va(n){for(var o=qr/n.extent,f=n.loadGeometry(),p=0;p<f.length;p++)for(var x=f[p],A=0;A<x.length;A++){var C=x[A],q=Math.round(C.x*o),W=Math.round(C.y*o);C.x=I(q,Wa,ia),C.y=I(W,Wa,ia),(q<C.x||q>C.x+1||W<C.y||W>C.y+1)&&Ae("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return f}function Ai(n,o){return{type:n.type,id:n.id,properties:n.properties,geometry:o?Va(n):[]}}function za(n,o,f,p,x){n.emplaceBack(o*2+(p+1)/2,f*2+(x+1)/2)}var mi=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new oc,this.indexArray=new Du,this.segments=new wn,this.programConfigurations=new Sr(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id})};mi.prototype.populate=function(o,f,p){var x=this.layers[0],A=[],C=null;x.type==="circle"&&(C=x.layout.get("circle-sort-key"));for(var q=0,W=o;q<W.length;q+=1){var j=W[q],Q=j.feature,ie=j.id,pe=j.index,ve=j.sourceLayerIndex,ke=this.layers[0]._featureFilter.needGeometry,qe=Ai(Q,ke);if(this.layers[0]._featureFilter.filter(new jt(this.zoom),qe,p)){var st=C?C.evaluate(qe,{},p):void 0,Qe={id:ie,properties:Q.properties,type:Q.type,sourceLayerIndex:ve,index:pe,geometry:ke?qe.geometry:Va(Q),patterns:{},sortKey:st};A.push(Qe)}}C&&A.sort(function(kr,zr){return kr.sortKey-zr.sortKey});for(var Lt=0,_t=A;Lt<_t.length;Lt+=1){var St=_t[Lt],It=St,Jt=It.geometry,hr=It.index,ur=It.sourceLayerIndex,Rr=o[hr].feature;this.addFeature(St,Jt,hr,p),f.featureIndex.insert(Rr,Jt,hr,ur,this.index)}},mi.prototype.update=function(o,f,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,f,this.stateDependentLayers,p)},mi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mi.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,B1),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},mi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mi.prototype.addFeature=function(o,f,p,x){for(var A=0,C=f;A<C.length;A+=1)for(var q=C[A],W=0,j=q;W<j.length;W+=1){var Q=j[W],ie=Q.x,pe=Q.y;if(!(ie<0||ie>=qr||pe<0||pe>=qr)){var ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),ke=ve.vertexLength;za(this.layoutVertexArray,ie,pe,-1,-1),za(this.layoutVertexArray,ie,pe,1,-1),za(this.layoutVertexArray,ie,pe,1,1),za(this.layoutVertexArray,ie,pe,-1,1),this.indexArray.emplaceBack(ke,ke+1,ke+2),this.indexArray.emplaceBack(ke,ke+3,ke+2),ve.vertexLength+=4,ve.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},x)},y("CircleBucket",mi,{omit:["layers"]});function na(n,o){for(var f=0;f<n.length;f++)if(Do(o,n[f]))return!0;for(var p=0;p<o.length;p++)if(Do(n,o[p]))return!0;return!!qs(n,o)}function Oa(n,o,f){return!!(Do(n,o)||Hl(o,n,f))}function en(n,o){if(n.length===1)return Gl(o,n[0]);for(var f=0;f<o.length;f++)for(var p=o[f],x=0;x<p.length;x++)if(Do(n,p[x]))return!0;for(var A=0;A<n.length;A++)if(Gl(o,n[A]))return!0;for(var C=0;C<o.length;C++)if(qs(n,o[C]))return!0;return!1}function Fn(n,o,f){for(var p=0;p<o.length;p++){var x=o[p];if(n.length>=3){for(var A=0;A<x.length;A++)if(Do(n,x[A]))return!0}if(Fs(n,x,f))return!0}return!1}function Fs(n,o,f){if(n.length>1){if(qs(n,o))return!0;for(var p=0;p<o.length;p++)if(Hl(o[p],n,f))return!0}for(var x=0;x<n.length;x++)if(Hl(n[x],o,f))return!0;return!1}function qs(n,o){if(n.length===0||o.length===0)return!1;for(var f=0;f<n.length-1;f++)for(var p=n[f],x=n[f+1],A=0;A<o.length-1;A++){var C=o[A],q=o[A+1];if(il(p,x,C,q))return!0}return!1}function il(n,o,f,p){return Le(n,f,p)!==Le(o,f,p)&&Le(n,o,f)!==Le(n,o,p)}function Hl(n,o,f){var p=f*f;if(o.length===1)return n.distSqr(o[0])<p;for(var x=1;x<o.length;x++){var A=o[x-1],C=o[x];if(uc(n,A,C)<p)return!0}return!1}function uc(n,o,f){var p=o.distSqr(f);if(p===0)return n.distSqr(o);var x=((n.x-o.x)*(f.x-o.x)+(n.y-o.y)*(f.y-o.y))/p;return x<0?n.distSqr(o):x>1?n.distSqr(f):n.distSqr(f.sub(o)._mult(x)._add(o))}function Gl(n,o){for(var f=!1,p,x,A,C=0;C<n.length;C++){p=n[C];for(var q=0,W=p.length-1;q<p.length;W=q++)x=p[q],A=p[W],x.y>o.y!=A.y>o.y&&o.x<(A.x-x.x)*(o.y-x.y)/(A.y-x.y)+x.x&&(f=!f)}return f}function Do(n,o){for(var f=!1,p=0,x=n.length-1;p<n.length;x=p++){var A=n[p],C=n[x];A.y>o.y!=C.y>o.y&&o.x<(C.x-A.x)*(o.y-A.y)/(C.y-A.y)+A.x&&(f=!f)}return f}function Zl(n,o,f,p,x){for(var A=0,C=n;A<C.length;A+=1){var q=C[A];if(o<=q.x&&f<=q.y&&p>=q.x&&x>=q.y)return!0}var W=[new v(o,f),new v(o,x),new v(p,x),new v(p,f)];if(n.length>2)for(var j=0,Q=W;j<Q.length;j+=1){var ie=Q[j];if(Do(n,ie))return!0}for(var pe=0;pe<n.length-1;pe++){var ve=n[pe],ke=n[pe+1];if($o(ve,ke,W))return!0}return!1}function $o(n,o,f){var p=f[0],x=f[2];if(n.x<p.x&&o.x<p.x||n.x>x.x&&o.x>x.x||n.y<p.y&&o.y<p.y||n.y>x.y&&o.y>x.y)return!1;var A=Le(n,o,f[0]);return A!==Le(n,o,f[1])||A!==Le(n,o,f[2])||A!==Le(n,o,f[3])}function zo(n,o,f){var p=o.paint.get(n).value;return p.kind==="constant"?p.value:f.programConfigurations.get(o.id).getMaxValue(n)}function nl(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function zu(n,o,f,p,x){if(!o[0]&&!o[1])return n;var A=v.convert(o)._mult(x);f==="viewport"&&A._rotate(-p);for(var C=[],q=0;q<n.length;q++){var W=n[q];C.push(W.sub(A))}return C}var ol=new Rn({"circle-sort-key":new Vr(Xt.layout_circle["circle-sort-key"])}),Kp=new Rn({"circle-radius":new Vr(Xt.paint_circle["circle-radius"]),"circle-color":new Vr(Xt.paint_circle["circle-color"]),"circle-blur":new Vr(Xt.paint_circle["circle-blur"]),"circle-opacity":new Vr(Xt.paint_circle["circle-opacity"]),"circle-translate":new wr(Xt.paint_circle["circle-translate"]),"circle-translate-anchor":new wr(Xt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wr(Xt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wr(Xt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vr(Xt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vr(Xt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vr(Xt.paint_circle["circle-stroke-opacity"])}),mh={paint:Kp,layout:ol},Zn=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=arguments,o=0,f=arguments.length;f--;)o+=n[f]*n[f];return Math.sqrt(o)});function Qp(){var n=new Zn(4);return Zn!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n}function ad(n,o,f){var p=o[0],x=o[1],A=o[2],C=o[3],q=Math.sin(f),W=Math.cos(f);return n[0]=p*W+A*q,n[1]=x*W+C*q,n[2]=p*-q+A*W,n[3]=x*-q+C*W,n}function bo(){var n=new Zn(9);return Zn!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function yh(n,o){var f=Math.sin(o),p=Math.cos(o);return n[0]=p,n[1]=f,n[2]=0,n[3]=-f,n[4]=p,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function $p(){var n=new Zn(16);return Zn!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function e0(n){var o=new Zn(16);return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o}function t0(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function gh(n,o){var f=o[0],p=o[1],x=o[2],A=o[3],C=o[4],q=o[5],W=o[6],j=o[7],Q=o[8],ie=o[9],pe=o[10],ve=o[11],ke=o[12],qe=o[13],st=o[14],Qe=o[15],Lt=f*q-p*C,_t=f*W-x*C,St=f*j-A*C,It=p*W-x*q,Jt=p*j-A*q,hr=x*j-A*W,ur=Q*qe-ie*ke,Rr=Q*st-pe*ke,kr=Q*Qe-ve*ke,zr=ie*st-pe*qe,Qr=ie*Qe-ve*qe,Fr=pe*Qe-ve*st,Nr=Lt*Fr-_t*Qr+St*zr+It*kr-Jt*Rr+hr*ur;return Nr?(Nr=1/Nr,n[0]=(q*Fr-W*Qr+j*zr)*Nr,n[1]=(x*Qr-p*Fr-A*zr)*Nr,n[2]=(qe*hr-st*Jt+Qe*It)*Nr,n[3]=(pe*Jt-ie*hr-ve*It)*Nr,n[4]=(W*kr-C*Fr-j*Rr)*Nr,n[5]=(f*Fr-x*kr+A*Rr)*Nr,n[6]=(st*St-ke*hr-Qe*_t)*Nr,n[7]=(Q*hr-pe*St+ve*_t)*Nr,n[8]=(C*Qr-q*kr+j*ur)*Nr,n[9]=(p*kr-f*Qr-A*ur)*Nr,n[10]=(ke*Jt-qe*St+Qe*Lt)*Nr,n[11]=(ie*St-Q*Jt-ve*Lt)*Nr,n[12]=(q*Rr-C*zr-W*ur)*Nr,n[13]=(f*zr-p*Rr+x*ur)*Nr,n[14]=(qe*_t-ke*It-st*Lt)*Nr,n[15]=(Q*It-ie*_t+pe*Lt)*Nr,n):null}function _h(n,o,f){var p=o[0],x=o[1],A=o[2],C=o[3],q=o[4],W=o[5],j=o[6],Q=o[7],ie=o[8],pe=o[9],ve=o[10],ke=o[11],qe=o[12],st=o[13],Qe=o[14],Lt=o[15],_t=f[0],St=f[1],It=f[2],Jt=f[3];return n[0]=_t*p+St*q+It*ie+Jt*qe,n[1]=_t*x+St*W+It*pe+Jt*st,n[2]=_t*A+St*j+It*ve+Jt*Qe,n[3]=_t*C+St*Q+It*ke+Jt*Lt,_t=f[4],St=f[5],It=f[6],Jt=f[7],n[4]=_t*p+St*q+It*ie+Jt*qe,n[5]=_t*x+St*W+It*pe+Jt*st,n[6]=_t*A+St*j+It*ve+Jt*Qe,n[7]=_t*C+St*Q+It*ke+Jt*Lt,_t=f[8],St=f[9],It=f[10],Jt=f[11],n[8]=_t*p+St*q+It*ie+Jt*qe,n[9]=_t*x+St*W+It*pe+Jt*st,n[10]=_t*A+St*j+It*ve+Jt*Qe,n[11]=_t*C+St*Q+It*ke+Jt*Lt,_t=f[12],St=f[13],It=f[14],Jt=f[15],n[12]=_t*p+St*q+It*ie+Jt*qe,n[13]=_t*x+St*W+It*pe+Jt*st,n[14]=_t*A+St*j+It*ve+Jt*Qe,n[15]=_t*C+St*Q+It*ke+Jt*Lt,n}function sn(n,o,f){var p=f[0],x=f[1],A=f[2],C,q,W,j,Q,ie,pe,ve,ke,qe,st,Qe;return o===n?(n[12]=o[0]*p+o[4]*x+o[8]*A+o[12],n[13]=o[1]*p+o[5]*x+o[9]*A+o[13],n[14]=o[2]*p+o[6]*x+o[10]*A+o[14],n[15]=o[3]*p+o[7]*x+o[11]*A+o[15]):(C=o[0],q=o[1],W=o[2],j=o[3],Q=o[4],ie=o[5],pe=o[6],ve=o[7],ke=o[8],qe=o[9],st=o[10],Qe=o[11],n[0]=C,n[1]=q,n[2]=W,n[3]=j,n[4]=Q,n[5]=ie,n[6]=pe,n[7]=ve,n[8]=ke,n[9]=qe,n[10]=st,n[11]=Qe,n[12]=C*p+Q*x+ke*A+o[12],n[13]=q*p+ie*x+qe*A+o[13],n[14]=W*p+pe*x+st*A+o[14],n[15]=j*p+ve*x+Qe*A+o[15]),n}function es(n,o,f){var p=f[0],x=f[1],A=f[2];return n[0]=o[0]*p,n[1]=o[1]*p,n[2]=o[2]*p,n[3]=o[3]*p,n[4]=o[4]*x,n[5]=o[5]*x,n[6]=o[6]*x,n[7]=o[7]*x,n[8]=o[8]*A,n[9]=o[9]*A,n[10]=o[10]*A,n[11]=o[11]*A,n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n}function ts(n,o,f){var p=Math.sin(f),x=Math.cos(f),A=o[4],C=o[5],q=o[6],W=o[7],j=o[8],Q=o[9],ie=o[10],pe=o[11];return o!==n&&(n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15]),n[4]=A*x+j*p,n[5]=C*x+Q*p,n[6]=q*x+ie*p,n[7]=W*x+pe*p,n[8]=j*x-A*p,n[9]=Q*x-C*p,n[10]=ie*x-q*p,n[11]=pe*x-W*p,n}function r0(n,o,f){var p=Math.sin(f),x=Math.cos(f),A=o[0],C=o[1],q=o[2],W=o[3],j=o[4],Q=o[5],ie=o[6],pe=o[7];return o!==n&&(n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15]),n[0]=A*x+j*p,n[1]=C*x+Q*p,n[2]=q*x+ie*p,n[3]=W*x+pe*p,n[4]=j*x-A*p,n[5]=Q*x-C*p,n[6]=ie*x-q*p,n[7]=pe*x-W*p,n}function xy(n,o,f,p,x){var A=1/Math.tan(o/2),C;return n[0]=A/f,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=A,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,x!=null&&x!==1/0?(C=1/(p-x),n[10]=(x+p)*C,n[14]=2*x*p*C):(n[10]=-1,n[14]=-2*p),n}function M3(n,o,f,p,x,A,C){var q=1/(o-f),W=1/(p-x),j=1/(A-C);return n[0]=-2*q,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*W,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*j,n[11]=0,n[12]=(o+f)*q,n[13]=(x+p)*W,n[14]=(C+A)*j,n[15]=1,n}var S3=_h;function id(){var n=new Zn(3);return Zn!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function k3(n){var o=new Zn(3);return o[0]=n[0],o[1]=n[1],o[2]=n[2],o}function a0(n,o,f){return n[0]=o[0]+f[0],n[1]=o[1]+f[1],n[2]=o[2]+f[2],n}function C3(n,o,f){return n[0]=o[0]-f[0],n[1]=o[1]-f[1],n[2]=o[2]-f[2],n}function E3(n,o,f){return n[0]=o[0]*f,n[1]=o[1]*f,n[2]=o[2]*f,n}function by(n,o){var f=o[0],p=o[1],x=o[2],A=f*f+p*p+x*x;return A>0&&(A=1/Math.sqrt(A)),n[0]=o[0]*A,n[1]=o[1]*A,n[2]=o[2]*A,n}function HY(n,o){return n[0]*o[0]+n[1]*o[1]+n[2]*o[2]}function GY(n,o,f){var p=o[0],x=o[1],A=o[2],C=f[0],q=f[1],W=f[2];return n[0]=x*W-A*q,n[1]=A*C-p*W,n[2]=p*q-x*C,n}function ZY(n,o,f){var p=o[0],x=o[1],A=o[2];return n[0]=p*f[0]+x*f[3]+A*f[6],n[1]=p*f[1]+x*f[4]+A*f[7],n[2]=p*f[2]+x*f[5]+A*f[8],n}var YY=C3,_ye=function(){var n=id();return function(o,f,p,x,A,C){var q,W;for(f||(f=3),p||(p=0),x?W=Math.min(x*f+p,o.length):W=o.length,q=p;q<W;q+=f)n[0]=o[q],n[1]=o[q+1],n[2]=o[q+2],A(n,n,C),o[q]=n[0],o[q+1]=n[1],o[q+2]=n[2];return o}}();function WY(){var n=new Zn(4);return Zn!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function XY(n,o,f){return n[0]=o[0]*f,n[1]=o[1]*f,n[2]=o[2]*f,n[3]=o[3]*f,n}function jY(n,o){return n[0]*o[0]+n[1]*o[1]+n[2]*o[2]+n[3]*o[3]}function O1(n,o,f){var p=o[0],x=o[1],A=o[2],C=o[3];return n[0]=f[0]*p+f[4]*x+f[8]*A+f[12]*C,n[1]=f[1]*p+f[5]*x+f[9]*A+f[13]*C,n[2]=f[2]*p+f[6]*x+f[10]*A+f[14]*C,n[3]=f[3]*p+f[7]*x+f[11]*A+f[15]*C,n}var xye=function(){var n=WY();return function(o,f,p,x,A,C){var q,W;for(f||(f=4),p||(p=0),x?W=Math.min(x*f+p,o.length):W=o.length,q=p;q<W;q+=f)n[0]=o[q],n[1]=o[q+1],n[2]=o[q+2],n[3]=o[q+3],A(n,n,C),o[q]=n[0],o[q+1]=n[1],o[q+2]=n[2],o[q+3]=n[3];return o}}();function JY(){var n=new Zn(2);return Zn!=Float32Array&&(n[0]=0,n[1]=0),n}function KY(n){var o=n[0],f=n[1];return o*o+f*f}var QY=KY,bye=function(){var n=JY();return function(o,f,p,x,A,C){var q,W;for(f||(f=2),p||(p=0),x?W=Math.min(x*f+p,o.length):W=o.length,q=p;q<W;q+=f)n[0]=o[q],n[1]=o[q+1],A(n,n,C),o[q]=n[0],o[q+1]=n[1];return o}}(),$Y=function(n){function o(f){n.call(this,f,mh)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new mi(p)},o.prototype.queryRadius=function(p){var x=p;return zo("circle-radius",this,x)+zo("circle-stroke-width",this,x)+nl(this.paint.get("circle-translate"))},o.prototype.queryIntersectsFeature=function(p,x,A,C,q,W,j,Q){for(var ie=zu(p,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),W.angle,j),pe=this.paint.get("circle-radius").evaluate(x,A),ve=this.paint.get("circle-stroke-width").evaluate(x,A),ke=pe+ve,qe=this.paint.get("circle-pitch-alignment")==="map",st=qe?ie:eW(ie,Q),Qe=qe?ke*j:ke,Lt=0,_t=C;Lt<_t.length;Lt+=1)for(var St=_t[Lt],It=0,Jt=St;It<Jt.length;It+=1){var hr=Jt[It],ur=qe?hr:kM(hr,Q),Rr=Qe,kr=O1([],[hr.x,hr.y,0,1],Q);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Rr*=kr[3]/W.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Rr*=W.cameraToCenterDistance/kr[3]),Oa(st,ur,Rr))return!0}return!1},o}(pi);function kM(n,o){var f=O1([],[n.x,n.y,0,1],o);return new v(f[0]/f[3],f[1]/f[3])}function eW(n,o){return n.map(function(f){return kM(f,o)})}var CM=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(mi);y("HeatmapBucket",CM,{omit:["layers"]});function L3(n,o,f,p){var x=o.width,A=o.height;if(!p)p=new Uint8Array(x*A*f);else if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==x*A*f)throw new RangeError("mismatched image size");return n.width=x,n.height=A,n.data=p,n}function EM(n,o,f){var p=o.width,x=o.height;if(!(p===n.width&&x===n.height)){var A=L3({},{width:p,height:x},f);P3(n,A,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,p),height:Math.min(n.height,x)},f),n.width=p,n.height=x,n.data=A.data}}function P3(n,o,f,p,x,A){if(x.width===0||x.height===0)return o;if(x.width>n.width||x.height>n.height||f.x>n.width-x.width||f.y>n.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>o.width||x.height>o.height||p.x>o.width-x.width||p.y>o.height-x.height)throw new RangeError("out of range destination coordinates for image copy");for(var C=n.data,q=o.data,W=0;W<x.height;W++)for(var j=((f.y+W)*n.width+f.x)*A,Q=((p.y+W)*o.width+p.x)*A,ie=0;ie<x.width*A;ie++)q[Q+ie]=C[j+ie];return o}var nd=function(o,f){L3(this,o,1,f)};nd.prototype.resize=function(o){EM(this,o,1)},nd.prototype.clone=function(){return new nd({width:this.width,height:this.height},new Uint8Array(this.data))},nd.copy=function(o,f,p,x,A){P3(o,f,p,x,A,1)};var rs=function(o,f){L3(this,o,4,f)};rs.prototype.resize=function(o){EM(this,o,4)},rs.prototype.replace=function(o,f){f?this.data.set(o):o instanceof Uint8ClampedArray?this.data=new Uint8Array(o.buffer):this.data=o},rs.prototype.clone=function(){return new rs({width:this.width,height:this.height},new Uint8Array(this.data))},rs.copy=function(o,f,p,x,A){P3(o,f,p,x,A,4)},y("AlphaImage",nd),y("RGBAImage",rs);var tW=new Rn({"heatmap-radius":new Vr(Xt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vr(Xt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wr(Xt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uo(Xt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wr(Xt.paint_heatmap["heatmap-opacity"])}),rW={paint:tW};function LM(n){var o={},f=n.resolution||256,p=n.clips?n.clips.length:1,x=n.image||new rs({width:f,height:p}),A=function(Lt,_t,St){o[n.evaluationKey]=St;var It=n.expression.evaluate(o);x.data[Lt+_t+0]=Math.floor(It.r*255/It.a),x.data[Lt+_t+1]=Math.floor(It.g*255/It.a),x.data[Lt+_t+2]=Math.floor(It.b*255/It.a),x.data[Lt+_t+3]=Math.floor(It.a*255)};if(n.clips)for(var j=0,Q=0;j<p;++j,Q+=f*4)for(var ie=0,pe=0;ie<f;ie++,pe+=4){var ve=ie/(f-1),ke=n.clips[j],qe=ke.start,st=ke.end,Qe=qe*(1-ve)+st*ve;A(Q,pe,Qe)}else for(var C=0,q=0;C<f;C++,q+=4){var W=C/(f-1);A(0,q,W)}return x}var aW=function(n){function o(f){n.call(this,f,rW),this._updateColorRamp()}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new CM(p)},o.prototype._handleSpecialPaintPropertyUpdate=function(p){p==="heatmap-color"&&this._updateColorRamp()},o.prototype._updateColorRamp=function(){var p=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=LM({expression:p,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},o.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},o}(pi),iW=new Rn({"hillshade-illumination-direction":new wr(Xt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wr(Xt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wr(Xt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wr(Xt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wr(Xt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wr(Xt.paint_hillshade["hillshade-accent-color"])}),nW={paint:iW},oW=function(n){function o(f){n.call(this,f,nW)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},o}(pi),sW=ui([{name:"a_pos",components:2,type:"Int16"}],4),lW=sW.members,D3=U1,uW=U1;function U1(n,o,f){f=f||2;var p=o&&o.length,x=p?o[0]*f:n.length,A=PM(n,0,x,f,!0),C=[];if(!A||A.next===A.prev)return C;var q,W,j,Q,ie,pe,ve;if(p&&(A=dW(n,o,A,f)),n.length>80*f){q=j=n[0],W=Q=n[1];for(var ke=f;ke<x;ke+=f)ie=n[ke],pe=n[ke+1],ie<q&&(q=ie),pe<W&&(W=pe),ie>j&&(j=ie),pe>Q&&(Q=pe);ve=Math.max(j-q,Q-W),ve=ve!==0?1/ve:0}return wy(A,C,f,q,W,ve),C}function PM(n,o,f,p,x){var A,C;if(x===R3(n,o,f,p)>0)for(A=o;A<f;A+=p)C=IM(A,n[A],n[A+1],C);else for(A=f-p;A>=o;A-=p)C=IM(A,n[A],n[A+1],C);return C&&V1(C,C.next)&&(Ay(C),C=C.next),C}function xh(n,o){if(!n)return n;o||(o=n);var f=n,p;do if(p=!1,!f.steiner&&(V1(f,f.next)||Tn(f.prev,f,f.next)===0)){if(Ay(f),f=o=f.prev,f===f.next)break;p=!0}else f=f.next;while(p||f!==o);return o}function wy(n,o,f,p,x,A,C){if(n){!C&&A&&_W(n,p,x,A);for(var q=n,W,j;n.prev!==n.next;){if(W=n.prev,j=n.next,A?cW(n,p,x,A):fW(n)){o.push(W.i/f),o.push(n.i/f),o.push(j.i/f),Ay(n),n=j.next,q=j.next;continue}if(n=j,n===q){C?C===1?(n=hW(xh(n),o,f),wy(n,o,f,p,x,A,2)):C===2&&vW(n,o,f,p,x,A):wy(xh(n),o,f,p,x,A,1);break}}}}function fW(n){var o=n.prev,f=n,p=n.next;if(Tn(o,f,p)>=0)return!1;for(var x=n.next.next;x!==n.prev;){if(i0(o.x,o.y,f.x,f.y,p.x,p.y,x.x,x.y)&&Tn(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function cW(n,o,f,p){var x=n.prev,A=n,C=n.next;if(Tn(x,A,C)>=0)return!1;for(var q=x.x<A.x?x.x<C.x?x.x:C.x:A.x<C.x?A.x:C.x,W=x.y<A.y?x.y<C.y?x.y:C.y:A.y<C.y?A.y:C.y,j=x.x>A.x?x.x>C.x?x.x:C.x:A.x>C.x?A.x:C.x,Q=x.y>A.y?x.y>C.y?x.y:C.y:A.y>C.y?A.y:C.y,ie=z3(q,W,o,f,p),pe=z3(j,Q,o,f,p),ve=n.prevZ,ke=n.nextZ;ve&&ve.z>=ie&&ke&&ke.z<=pe;){if(ve!==n.prev&&ve!==n.next&&i0(x.x,x.y,A.x,A.y,C.x,C.y,ve.x,ve.y)&&Tn(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,ke!==n.prev&&ke!==n.next&&i0(x.x,x.y,A.x,A.y,C.x,C.y,ke.x,ke.y)&&Tn(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;ve&&ve.z>=ie;){if(ve!==n.prev&&ve!==n.next&&i0(x.x,x.y,A.x,A.y,C.x,C.y,ve.x,ve.y)&&Tn(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;ke&&ke.z<=pe;){if(ke!==n.prev&&ke!==n.next&&i0(x.x,x.y,A.x,A.y,C.x,C.y,ke.x,ke.y)&&Tn(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function hW(n,o,f){var p=n;do{var x=p.prev,A=p.next.next;!V1(x,A)&&DM(x,p,p.next,A)&&Ty(x,A)&&Ty(A,x)&&(o.push(x.i/f),o.push(p.i/f),o.push(A.i/f),Ay(p),Ay(p.next),p=n=A),p=p.next}while(p!==n);return xh(p)}function vW(n,o,f,p,x,A){var C=n;do{for(var q=C.next.next;q!==C.prev;){if(C.i!==q.i&&wW(C,q)){var W=zM(C,q);C=xh(C,C.next),W=xh(W,W.next),wy(C,o,f,p,x,A),wy(W,o,f,p,x,A);return}q=q.next}C=C.next}while(C!==n)}function dW(n,o,f,p){var x=[],A,C,q,W,j;for(A=0,C=o.length;A<C;A++)q=o[A]*p,W=A<C-1?o[A+1]*p:n.length,j=PM(n,q,W,p,!1),j===j.next&&(j.steiner=!0),x.push(bW(j));for(x.sort(pW),A=0;A<x.length;A++)mW(x[A],f),f=xh(f,f.next);return f}function pW(n,o){return n.x-o.x}function mW(n,o){if(o=yW(n,o),o){var f=zM(o,n);xh(o,o.next),xh(f,f.next)}}function yW(n,o){var f=o,p=n.x,x=n.y,A=-1/0,C;do{if(x<=f.y&&x>=f.next.y&&f.next.y!==f.y){var q=f.x+(x-f.y)*(f.next.x-f.x)/(f.next.y-f.y);if(q<=p&&q>A){if(A=q,q===p){if(x===f.y)return f;if(x===f.next.y)return f.next}C=f.x<f.next.x?f:f.next}}f=f.next}while(f!==o);if(!C)return null;if(p===A)return C;var W=C,j=C.x,Q=C.y,ie=1/0,pe;f=C;do p>=f.x&&f.x>=j&&p!==f.x&&i0(x<Q?p:A,x,j,Q,x<Q?A:p,x,f.x,f.y)&&(pe=Math.abs(x-f.y)/(p-f.x),Ty(f,n)&&(pe<ie||pe===ie&&(f.x>C.x||f.x===C.x&&gW(C,f)))&&(C=f,ie=pe)),f=f.next;while(f!==W);return C}function gW(n,o){return Tn(n.prev,n,o.prev)<0&&Tn(o.next,n,n.next)<0}function _W(n,o,f,p){var x=n;do x.z===null&&(x.z=z3(x.x,x.y,o,f,p)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next;while(x!==n);x.prevZ.nextZ=null,x.prevZ=null,xW(x)}function xW(n){var o,f,p,x,A,C,q,W,j=1;do{for(f=n,n=null,A=null,C=0;f;){for(C++,p=f,q=0,o=0;o<j&&(q++,p=p.nextZ,!!p);o++);for(W=j;q>0||W>0&&p;)q!==0&&(W===0||!p||f.z<=p.z)?(x=f,f=f.nextZ,q--):(x=p,p=p.nextZ,W--),A?A.nextZ=x:n=x,x.prevZ=A,A=x;f=p}A.nextZ=null,j*=2}while(C>1);return n}function z3(n,o,f,p,x){return n=32767*(n-f)*x,o=32767*(o-p)*x,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,n|o<<1}function bW(n){var o=n,f=n;do(o.x<f.x||o.x===f.x&&o.y<f.y)&&(f=o),o=o.next;while(o!==n);return f}function i0(n,o,f,p,x,A,C,q){return(x-C)*(o-q)-(n-C)*(A-q)>=0&&(n-C)*(p-q)-(f-C)*(o-q)>=0&&(f-C)*(A-q)-(x-C)*(p-q)>=0}function wW(n,o){return n.next.i!==o.i&&n.prev.i!==o.i&&!TW(n,o)&&(Ty(n,o)&&Ty(o,n)&&AW(n,o)&&(Tn(n.prev,n,o.prev)||Tn(n,o.prev,o))||V1(n,o)&&Tn(n.prev,n,n.next)>0&&Tn(o.prev,o,o.next)>0)}function Tn(n,o,f){return(o.y-n.y)*(f.x-o.x)-(o.x-n.x)*(f.y-o.y)}function V1(n,o){return n.x===o.x&&n.y===o.y}function DM(n,o,f,p){var x=G1(Tn(n,o,f)),A=G1(Tn(n,o,p)),C=G1(Tn(f,p,n)),q=G1(Tn(f,p,o));return!!(x!==A&&C!==q||x===0&&H1(n,f,o)||A===0&&H1(n,p,o)||C===0&&H1(f,n,p)||q===0&&H1(f,o,p))}function H1(n,o,f){return o.x<=Math.max(n.x,f.x)&&o.x>=Math.min(n.x,f.x)&&o.y<=Math.max(n.y,f.y)&&o.y>=Math.min(n.y,f.y)}function G1(n){return n>0?1:n<0?-1:0}function TW(n,o){var f=n;do{if(f.i!==n.i&&f.next.i!==n.i&&f.i!==o.i&&f.next.i!==o.i&&DM(f,f.next,n,o))return!0;f=f.next}while(f!==n);return!1}function Ty(n,o){return Tn(n.prev,n,n.next)<0?Tn(n,o,n.next)>=0&&Tn(n,n.prev,o)>=0:Tn(n,o,n.prev)<0||Tn(n,n.next,o)<0}function AW(n,o){var f=n,p=!1,x=(n.x+o.x)/2,A=(n.y+o.y)/2;do f.y>A!=f.next.y>A&&f.next.y!==f.y&&x<(f.next.x-f.x)*(A-f.y)/(f.next.y-f.y)+f.x&&(p=!p),f=f.next;while(f!==n);return p}function zM(n,o){var f=new I3(n.i,n.x,n.y),p=new I3(o.i,o.x,o.y),x=n.next,A=o.prev;return n.next=o,o.prev=n,f.next=x,x.prev=f,p.next=f,f.prev=p,A.next=p,p.prev=A,p}function IM(n,o,f,p){var x=new I3(n,o,f);return p?(x.next=p.next,x.prev=p,p.next.prev=x,p.next=x):(x.prev=x,x.next=x),x}function Ay(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function I3(n,o,f){this.i=n,this.x=o,this.y=f,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}U1.deviation=function(n,o,f,p){var x=o&&o.length,A=x?o[0]*f:n.length,C=Math.abs(R3(n,0,A,f));if(x)for(var q=0,W=o.length;q<W;q++){var j=o[q]*f,Q=q<W-1?o[q+1]*f:n.length;C-=Math.abs(R3(n,j,Q,f))}var ie=0;for(q=0;q<p.length;q+=3){var pe=p[q]*f,ve=p[q+1]*f,ke=p[q+2]*f;ie+=Math.abs((n[pe]-n[ke])*(n[ve+1]-n[pe+1])-(n[pe]-n[ve])*(n[ke+1]-n[pe+1]))}return C===0&&ie===0?0:Math.abs((ie-C)/C)};function R3(n,o,f,p){for(var x=0,A=o,C=f-p;A<f;A+=p)x+=(n[C]-n[A])*(n[A+1]+n[C+1]),C=A;return x}U1.flatten=function(n){for(var o=n[0][0].length,f={vertices:[],holes:[],dimensions:o},p=0,x=0;x<n.length;x++){for(var A=0;A<n[x].length;A++)for(var C=0;C<o;C++)f.vertices.push(n[x][A][C]);x>0&&(p+=n[x-1].length,f.holes.push(p))}return f},D3.default=uW;function MW(n,o,f,p,x){RM(n,o,f||0,p||n.length-1,x||SW)}function RM(n,o,f,p,x){for(;p>f;){if(p-f>600){var A=p-f+1,C=o-f+1,q=Math.log(A),W=.5*Math.exp(2*q/3),j=.5*Math.sqrt(q*W*(A-W)/A)*(C-A/2<0?-1:1),Q=Math.max(f,Math.floor(o-C*W/A+j)),ie=Math.min(p,Math.floor(o+(A-C)*W/A+j));RM(n,o,Q,ie,x)}var pe=n[o],ve=f,ke=p;for(My(n,f,o),x(n[p],pe)>0&&My(n,f,p);ve<ke;){for(My(n,ve,ke),ve++,ke--;x(n[ve],pe)<0;)ve++;for(;x(n[ke],pe)>0;)ke--}x(n[f],pe)===0?My(n,f,ke):(ke++,My(n,ke,p)),ke<=o&&(f=ke+1),o<=ke&&(p=ke-1)}}function My(n,o,f){var p=n[o];n[o]=n[f],n[f]=p}function SW(n,o){return n<o?-1:n>o?1:0}function F3(n,o){var f=n.length;if(f<=1)return[n];for(var p=[],x,A,C=0;C<f;C++){var q=Ke(n[C]);q!==0&&(n[C].area=Math.abs(q),A===void 0&&(A=q<0),A===q<0?(x&&p.push(x),x=[n[C]]):x.push(n[C]))}if(x&&p.push(x),o>1)for(var W=0;W<p.length;W++)p[W].length<=o||(MW(p[W],o,1,p[W].length-1,kW),p[W]=p[W].slice(0,o));return p}function kW(n,o){return o.area-n.area}function q3(n,o,f){for(var p=f.patternDependencies,x=!1,A=0,C=o;A<C.length;A+=1){var q=C[A],W=q.paint.get(n+"-pattern");W.isConstant()||(x=!0);var j=W.constantOr(null);j&&(x=!0,p[j.to]=!0,p[j.from]=!0)}return x}function N3(n,o,f,p,x){for(var A=x.patternDependencies,C=0,q=o;C<q.length;C+=1){var W=q[C],j=W.paint.get(n+"-pattern"),Q=j.value;if(Q.kind!=="constant"){var ie=Q.evaluate({zoom:p-1},f,{},x.availableImages),pe=Q.evaluate({zoom:p},f,{},x.availableImages),ve=Q.evaluate({zoom:p+1},f,{},x.availableImages);ie=ie&&ie.name?ie.name:ie,pe=pe&&pe.name?pe.name:pe,ve=ve&&ve.name?ve.name:ve,A[ie]=!0,A[pe]=!0,A[ve]=!0,f.patterns[W.id]={min:ie,mid:pe,max:ve}}}return f}var CW=500,Iu=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new oc,this.indexArray=new Du,this.indexArray2=new rd,this.programConfigurations=new Sr(o.layers,o.zoom),this.segments=new wn,this.segments2=new wn,this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id})};Iu.prototype.populate=function(o,f,p){this.hasPattern=q3("fill",this.layers,f);for(var x=this.layers[0].layout.get("fill-sort-key"),A=[],C=0,q=o;C<q.length;C+=1){var W=q[C],j=W.feature,Q=W.id,ie=W.index,pe=W.sourceLayerIndex,ve=this.layers[0]._featureFilter.needGeometry,ke=Ai(j,ve);if(this.layers[0]._featureFilter.filter(new jt(this.zoom),ke,p)){var qe=x?x.evaluate(ke,{},p,f.availableImages):void 0,st={id:Q,properties:j.properties,type:j.type,sourceLayerIndex:pe,index:ie,geometry:ve?ke.geometry:Va(j),patterns:{},sortKey:qe};A.push(st)}}x&&A.sort(function(kr,zr){return kr.sortKey-zr.sortKey});for(var Qe=0,Lt=A;Qe<Lt.length;Qe+=1){var _t=Lt[Qe],St=_t,It=St.geometry,Jt=St.index,hr=St.sourceLayerIndex;if(this.hasPattern){var ur=N3("fill",this.layers,_t,this.zoom,f);this.patternFeatures.push(ur)}else this.addFeature(_t,It,Jt,p,{});var Rr=o[Jt].feature;f.featureIndex.insert(Rr,It,Jt,hr,this.index)}},Iu.prototype.update=function(o,f,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,f,this.stateDependentLayers,p)},Iu.prototype.addFeatures=function(o,f,p){for(var x=0,A=this.patternFeatures;x<A.length;x+=1){var C=A[x];this.addFeature(C,C.geometry,C.index,f,p)}},Iu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Iu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Iu.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,lW),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0},Iu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Iu.prototype.addFeature=function(o,f,p,x,A){for(var C=0,q=F3(f,CW);C<q.length;C+=1){for(var W=q[C],j=0,Q=0,ie=W;Q<ie.length;Q+=1){var pe=ie[Q];j+=pe.length}for(var ve=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray),ke=ve.vertexLength,qe=[],st=[],Qe=0,Lt=W;Qe<Lt.length;Qe+=1){var _t=Lt[Qe];if(_t.length!==0){_t!==W[0]&&st.push(qe.length/2);var St=this.segments2.prepareSegment(_t.length,this.layoutVertexArray,this.indexArray2),It=St.vertexLength;this.layoutVertexArray.emplaceBack(_t[0].x,_t[0].y),this.indexArray2.emplaceBack(It+_t.length-1,It),qe.push(_t[0].x),qe.push(_t[0].y);for(var Jt=1;Jt<_t.length;Jt++)this.layoutVertexArray.emplaceBack(_t[Jt].x,_t[Jt].y),this.indexArray2.emplaceBack(It+Jt-1,It+Jt),qe.push(_t[Jt].x),qe.push(_t[Jt].y);St.vertexLength+=_t.length,St.primitiveLength+=_t.length}}for(var hr=D3(qe,st),ur=0;ur<hr.length;ur+=3)this.indexArray.emplaceBack(ke+hr[ur],ke+hr[ur+1],ke+hr[ur+2]);ve.vertexLength+=j,ve.primitiveLength+=hr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,x)},y("FillBucket",Iu,{omit:["layers","patternFeatures"]});var EW=new Rn({"fill-sort-key":new Vr(Xt.layout_fill["fill-sort-key"])}),LW=new Rn({"fill-antialias":new wr(Xt.paint_fill["fill-antialias"]),"fill-opacity":new Vr(Xt.paint_fill["fill-opacity"]),"fill-color":new Vr(Xt.paint_fill["fill-color"]),"fill-outline-color":new Vr(Xt.paint_fill["fill-outline-color"]),"fill-translate":new wr(Xt.paint_fill["fill-translate"]),"fill-translate-anchor":new wr(Xt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ni(Xt.paint_fill["fill-pattern"])}),PW={paint:LW,layout:EW},DW=function(n){function o(f){n.call(this,f,PW)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.recalculate=function(p,x){n.prototype.recalculate.call(this,p,x);var A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},o.prototype.createBucket=function(p){return new Iu(p)},o.prototype.queryRadius=function(){return nl(this.paint.get("fill-translate"))},o.prototype.queryIntersectsFeature=function(p,x,A,C,q,W,j){var Q=zu(p,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),W.angle,j);return en(Q,C)},o.prototype.isTileClipped=function(){return!0},o}(pi),zW=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),IW=zW.members,FM=n0;function n0(n,o,f,p,x){this.properties={},this.extent=f,this.type=0,this._pbf=n,this._geometry=-1,this._keys=p,this._values=x,n.readFields(RW,this,o)}function RW(n,o,f){n==1?o.id=f.readVarint():n==2?FW(f,o):n==3?o.type=f.readVarint():n==4&&(o._geometry=f.pos)}function FW(n,o){for(var f=n.readVarint()+n.pos;n.pos<f;){var p=o._keys[n.readVarint()],x=o._values[n.readVarint()];o.properties[p]=x}}n0.types=["Unknown","Point","LineString","Polygon"],n0.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var o=n.readVarint()+n.pos,f=1,p=0,x=0,A=0,C=[],q;n.pos<o;){if(p<=0){var W=n.readVarint();f=W&7,p=W>>3}if(p--,f===1||f===2)x+=n.readSVarint(),A+=n.readSVarint(),f===1&&(q&&C.push(q),q=[]),q.push(new v(x,A));else if(f===7)q&&q.push(q[0].clone());else throw new Error("unknown command "+f)}return q&&C.push(q),C},n0.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var o=n.readVarint()+n.pos,f=1,p=0,x=0,A=0,C=1/0,q=-1/0,W=1/0,j=-1/0;n.pos<o;){if(p<=0){var Q=n.readVarint();f=Q&7,p=Q>>3}if(p--,f===1||f===2)x+=n.readSVarint(),A+=n.readSVarint(),x<C&&(C=x),x>q&&(q=x),A<W&&(W=A),A>j&&(j=A);else if(f!==7)throw new Error("unknown command "+f)}return[C,W,q,j]},n0.prototype.toGeoJSON=function(n,o,f){var p=this.extent*Math.pow(2,f),x=this.extent*n,A=this.extent*o,C=this.loadGeometry(),q=n0.types[this.type],W,j;function Q(ve){for(var ke=0;ke<ve.length;ke++){var qe=ve[ke],st=180-(qe.y+A)*360/p;ve[ke]=[(qe.x+x)*360/p-180,360/Math.PI*Math.atan(Math.exp(st*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(W=0;W<C.length;W++)ie[W]=C[W][0];C=ie,Q(C);break;case 2:for(W=0;W<C.length;W++)Q(C[W]);break;case 3:for(C=qW(C),W=0;W<C.length;W++)for(j=0;j<C[W].length;j++)Q(C[W][j]);break}C.length===1?C=C[0]:q="Multi"+q;var pe={type:"Feature",geometry:{type:q,coordinates:C},properties:this.properties};return"id"in this&&(pe.id=this.id),pe};function qW(n){var o=n.length;if(o<=1)return[n];for(var f=[],p,x,A=0;A<o;A++){var C=NW(n[A]);C!==0&&(x===void 0&&(x=C<0),x===C<0?(p&&f.push(p),p=[n[A]]):p.push(n[A]))}return p&&f.push(p),f}function NW(n){for(var o=0,f=0,p=n.length,x=p-1,A,C;f<p;x=f++)A=n[f],C=n[x],o+=(C.x-A.x)*(A.y+C.y);return o}var qM=NM;function NM(n,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(BW,this,o),this.length=this._features.length}function BW(n,o,f){n===15?o.version=f.readVarint():n===1?o.name=f.readString():n===5?o.extent=f.readVarint():n===2?o._features.push(f.pos):n===3?o._keys.push(f.readString()):n===4&&o._values.push(OW(f))}function OW(n){for(var o=null,f=n.readVarint()+n.pos;n.pos<f;){var p=n.readVarint()>>3;o=p===1?n.readString():p===2?n.readFloat():p===3?n.readDouble():p===4?n.readVarint64():p===5?n.readVarint():p===6?n.readSVarint():p===7?n.readBoolean():null}return o}NM.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var o=this._pbf.readVarint()+this._pbf.pos;return new FM(this._pbf,o,this.extent,this._keys,this._values)};var UW=VW;function VW(n,o){this.layers=n.readFields(HW,{},o)}function HW(n,o,f){if(n===3){var p=new qM(f,f.readVarint()+f.pos);p.length&&(o[p.name]=p)}}var GW=UW,ZW=FM,YW=qM,o0={VectorTile:GW,VectorTileFeature:ZW,VectorTileLayer:YW},WW=o0.VectorTileFeature.types,XW=500,B3=Math.pow(2,13);function Sy(n,o,f,p,x,A,C,q){n.emplaceBack(o,f,Math.floor(p*B3)*2+C,x*B3*2,A*B3*2,Math.round(q))}var Ru=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new wf,this.indexArray=new Du,this.programConfigurations=new Sr(o.layers,o.zoom),this.segments=new wn,this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id})};Ru.prototype.populate=function(o,f,p){this.features=[],this.hasPattern=q3("fill-extrusion",this.layers,f);for(var x=0,A=o;x<A.length;x+=1){var C=A[x],q=C.feature,W=C.id,j=C.index,Q=C.sourceLayerIndex,ie=this.layers[0]._featureFilter.needGeometry,pe=Ai(q,ie);if(this.layers[0]._featureFilter.filter(new jt(this.zoom),pe,p)){var ve={id:W,sourceLayerIndex:Q,index:j,geometry:ie?pe.geometry:Va(q),properties:q.properties,type:q.type,patterns:{}};this.hasPattern?this.features.push(N3("fill-extrusion",this.layers,ve,this.zoom,f)):this.addFeature(ve,ve.geometry,j,p,{}),f.featureIndex.insert(q,ve.geometry,j,Q,this.index,!0)}}},Ru.prototype.addFeatures=function(o,f,p){for(var x=0,A=this.features;x<A.length;x+=1){var C=A[x],q=C.geometry;this.addFeature(C,q,C.index,f,p)}},Ru.prototype.update=function(o,f,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,f,this.stateDependentLayers,p)},Ru.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ru.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ru.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,IW),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},Ru.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ru.prototype.addFeature=function(o,f,p,x,A){for(var C=0,q=F3(f,XW);C<q.length;C+=1){for(var W=q[C],j=0,Q=0,ie=W;Q<ie.length;Q+=1){var pe=ie[Q];j+=pe.length}for(var ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),ke=0,qe=W;ke<qe.length;ke+=1){var st=qe[ke];if(st.length!==0&&!JW(st))for(var Qe=0,Lt=0;Lt<st.length;Lt++){var _t=st[Lt];if(Lt>=1){var St=st[Lt-1];if(!jW(_t,St)){ve.vertexLength+4>wn.MAX_VERTEX_ARRAY_LENGTH&&(ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var It=_t.sub(St)._perp()._unit(),Jt=St.dist(_t);Qe+Jt>32768&&(Qe=0),Sy(this.layoutVertexArray,_t.x,_t.y,It.x,It.y,0,0,Qe),Sy(this.layoutVertexArray,_t.x,_t.y,It.x,It.y,0,1,Qe),Qe+=Jt,Sy(this.layoutVertexArray,St.x,St.y,It.x,It.y,0,0,Qe),Sy(this.layoutVertexArray,St.x,St.y,It.x,It.y,0,1,Qe);var hr=ve.vertexLength;this.indexArray.emplaceBack(hr,hr+2,hr+1),this.indexArray.emplaceBack(hr+1,hr+2,hr+3),ve.vertexLength+=4,ve.primitiveLength+=2}}}}if(ve.vertexLength+j>wn.MAX_VERTEX_ARRAY_LENGTH&&(ve=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray)),WW[o.type]==="Polygon"){for(var ur=[],Rr=[],kr=ve.vertexLength,zr=0,Qr=W;zr<Qr.length;zr+=1){var Fr=Qr[zr];if(Fr.length!==0){Fr!==W[0]&&Rr.push(ur.length/2);for(var Nr=0;Nr<Fr.length;Nr++){var ma=Fr[Nr];Sy(this.layoutVertexArray,ma.x,ma.y,0,0,1,1,0),ur.push(ma.x),ur.push(ma.y)}}}for(var jr=D3(ur,Rr),Xa=0;Xa<jr.length;Xa+=3)this.indexArray.emplaceBack(kr+jr[Xa],kr+jr[Xa+2],kr+jr[Xa+1]);ve.primitiveLength+=jr.length/3,ve.vertexLength+=j}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,x)},y("FillExtrusionBucket",Ru,{omit:["layers","features"]});function jW(n,o){return n.x===o.x&&(n.x<0||n.x>qr)||n.y===o.y&&(n.y<0||n.y>qr)}function JW(n){return n.every(function(o){return o.x<0})||n.every(function(o){return o.x>qr})||n.every(function(o){return o.y<0})||n.every(function(o){return o.y>qr})}var KW=new Rn({"fill-extrusion-opacity":new wr(Xt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vr(Xt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wr(Xt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wr(Xt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ni(Xt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vr(Xt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vr(Xt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wr(Xt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),QW={paint:KW},$W=function(n){function o(f){n.call(this,f,QW)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new Ru(p)},o.prototype.queryRadius=function(){return nl(this.paint.get("fill-extrusion-translate"))},o.prototype.is3D=function(){return!0},o.prototype.queryIntersectsFeature=function(p,x,A,C,q,W,j,Q){var ie=zu(p,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),W.angle,j),pe=this.paint.get("fill-extrusion-height").evaluate(x,A),ve=this.paint.get("fill-extrusion-base").evaluate(x,A),ke=rX(ie,Q,W,0),qe=tX(C,ve,pe,Q),st=qe[0],Qe=qe[1];return eX(st,Qe,ke)},o}(pi);function ky(n,o){return n.x*o.x+n.y*o.y}function BM(n,o){if(n.length===1){for(var f=0,p=o[f++],x;!x||p.equals(x);)if(x=o[f++],!x)return 1/0;for(;f<o.length;f++){var A=o[f],C=n[0],q=x.sub(p),W=A.sub(p),j=C.sub(p),Q=ky(q,q),ie=ky(q,W),pe=ky(W,W),ve=ky(j,q),ke=ky(j,W),qe=Q*pe-ie*ie,st=(pe*ve-ie*ke)/qe,Qe=(Q*ke-ie*ve)/qe,Lt=1-st-Qe,_t=p.z*Lt+x.z*st+A.z*Qe;if(isFinite(_t))return _t}return 1/0}else{for(var St=1/0,It=0,Jt=o;It<Jt.length;It+=1){var hr=Jt[It];St=Math.min(St,hr.z)}return St}}function eX(n,o,f){var p=1/0;en(f,o)&&(p=BM(f,o[0]));for(var x=0;x<o.length;x++)for(var A=o[x],C=n[x],q=0;q<A.length-1;q++){var W=A[q],j=A[q+1],Q=C[q],ie=C[q+1],pe=[W,j,ie,Q,W];na(f,pe)&&(p=Math.min(p,BM(f,pe)))}return p===1/0?!1:p}function tX(n,o,f,p){for(var x=[],A=[],C=p[8]*o,q=p[9]*o,W=p[10]*o,j=p[11]*o,Q=p[8]*f,ie=p[9]*f,pe=p[10]*f,ve=p[11]*f,ke=0,qe=n;ke<qe.length;ke+=1){for(var st=qe[ke],Qe=[],Lt=[],_t=0,St=st;_t<St.length;_t+=1){var It=St[_t],Jt=It.x,hr=It.y,ur=p[0]*Jt+p[4]*hr+p[12],Rr=p[1]*Jt+p[5]*hr+p[13],kr=p[2]*Jt+p[6]*hr+p[14],zr=p[3]*Jt+p[7]*hr+p[15],Qr=ur+C,Fr=Rr+q,Nr=kr+W,ma=zr+j,jr=ur+Q,Xa=Rr+ie,gi=kr+pe,ja=zr+ve,Ja=new v(Qr/ma,Fr/ma);Ja.z=Nr/ma,Qe.push(Ja);var Ha=new v(jr/ja,Xa/ja);Ha.z=gi/ja,Lt.push(Ha)}x.push(Qe),A.push(Lt)}return[x,A]}function rX(n,o,f,p){for(var x=[],A=0,C=n;A<C.length;A+=1){var q=C[A],W=[q.x,q.y,p,1];O1(W,W,o),x.push(new v(W[0]/W[3],W[1]/W[3]))}return x}var aX=ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),iX=aX.members,nX=ui([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),oX=nX.members,sX=o0.VectorTileFeature.types,OM=63,lX=Math.cos(75/2*(Math.PI/180)),uX=15,fX=20,cX=15,UM=1/2,VM=Math.pow(2,cX-1)/UM,Io=function(o){var f=this;this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(p){return p.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(p){f.gradients[p.id]={}}),this.layoutVertexArray=new ch,this.layoutVertexArray2=new hh,this.indexArray=new Du,this.programConfigurations=new Sr(o.layers,o.zoom),this.segments=new wn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(p){return p.isStateDependent()}).map(function(p){return p.id})};Io.prototype.populate=function(o,f,p){this.hasPattern=q3("line",this.layers,f);for(var x=this.layers[0].layout.get("line-sort-key"),A=[],C=0,q=o;C<q.length;C+=1){var W=q[C],j=W.feature,Q=W.id,ie=W.index,pe=W.sourceLayerIndex,ve=this.layers[0]._featureFilter.needGeometry,ke=Ai(j,ve);if(this.layers[0]._featureFilter.filter(new jt(this.zoom),ke,p)){var qe=x?x.evaluate(ke,{},p):void 0,st={id:Q,properties:j.properties,type:j.type,sourceLayerIndex:pe,index:ie,geometry:ve?ke.geometry:Va(j),patterns:{},sortKey:qe};A.push(st)}}x&&A.sort(function(kr,zr){return kr.sortKey-zr.sortKey});for(var Qe=0,Lt=A;Qe<Lt.length;Qe+=1){var _t=Lt[Qe],St=_t,It=St.geometry,Jt=St.index,hr=St.sourceLayerIndex;if(this.hasPattern){var ur=N3("line",this.layers,_t,this.zoom,f);this.patternFeatures.push(ur)}else this.addFeature(_t,It,Jt,p,{});var Rr=o[Jt].feature;f.featureIndex.insert(Rr,It,Jt,hr,this.index)}},Io.prototype.update=function(o,f,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,f,this.stateDependentLayers,p)},Io.prototype.addFeatures=function(o,f,p){for(var x=0,A=this.patternFeatures;x<A.length;x+=1){var C=A[x];this.addFeature(C,C.geometry,C.index,f,p)}},Io.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Io.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Io.prototype.upload=function(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,oX)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,iX),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},Io.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Io.prototype.lineFeatureClips=function(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end")){var f=+o.properties.mapbox_clip_start,p=+o.properties.mapbox_clip_end;return{start:f,end:p}}},Io.prototype.addFeature=function(o,f,p,x,A){var C=this.layers[0].layout,q=C.get("line-join").evaluate(o,{}),W=C.get("line-cap"),j=C.get("line-miter-limit"),Q=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(var ie=0,pe=f;ie<pe.length;ie+=1){var ve=pe[ie];this.addLine(ve,o,q,W,j,Q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,x)},Io.prototype.addLine=function(o,f,p,x,A,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var q=0;q<o.length-1;q++)this.totalDistance+=o[q].dist(o[q+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var W=sX[f.type]==="Polygon",j=o.length;j>=2&&o[j-1].equals(o[j-2]);)j--;for(var Q=0;Q<j-1&&o[Q].equals(o[Q+1]);)Q++;if(!(j<(W?3:2))){p==="bevel"&&(A=1.05);var ie=this.overscaling<=16?uX*qr/(512*this.overscaling):0,pe=this.segments.prepareSegment(j*10,this.layoutVertexArray,this.indexArray),ve,ke=void 0,qe=void 0,st=void 0,Qe=void 0;this.e1=this.e2=-1,W&&(ve=o[j-2],Qe=o[Q].sub(ve)._unit()._perp());for(var Lt=Q;Lt<j;Lt++)if(qe=Lt===j-1?W?o[Q+1]:void 0:o[Lt+1],!(qe&&o[Lt].equals(qe))){Qe&&(st=Qe),ve&&(ke=ve),ve=o[Lt],Qe=qe?qe.sub(ve)._unit()._perp():st,st=st||Qe;var _t=st.add(Qe);(_t.x!==0||_t.y!==0)&&_t._unit();var St=st.x*Qe.x+st.y*Qe.y,It=_t.x*Qe.x+_t.y*Qe.y,Jt=It!==0?1/It:1/0,hr=2*Math.sqrt(2-2*It),ur=It<lX&&ke&&qe,Rr=st.x*Qe.y-st.y*Qe.x>0;if(ur&&Lt>Q){var kr=ve.dist(ke);if(kr>2*ie){var zr=ve.sub(ve.sub(ke)._mult(ie/kr)._round());this.updateDistance(ke,zr),this.addCurrentVertex(zr,st,0,0,pe),ke=zr}}var Qr=ke&&qe,Fr=Qr?p:W?"butt":x;if(Qr&&Fr==="round"&&(Jt<C?Fr="miter":Jt<=2&&(Fr="fakeround")),Fr==="miter"&&Jt>A&&(Fr="bevel"),Fr==="bevel"&&(Jt>2&&(Fr="flipbevel"),Jt<A&&(Fr="miter")),ke&&this.updateDistance(ke,ve),Fr==="miter")_t._mult(Jt),this.addCurrentVertex(ve,_t,0,0,pe);else if(Fr==="flipbevel"){if(Jt>100)_t=Qe.mult(-1);else{var Nr=Jt*st.add(Qe).mag()/st.sub(Qe).mag();_t._perp()._mult(Nr*(Rr?-1:1))}this.addCurrentVertex(ve,_t,0,0,pe),this.addCurrentVertex(ve,_t.mult(-1),0,0,pe)}else if(Fr==="bevel"||Fr==="fakeround"){var ma=-Math.sqrt(Jt*Jt-1),jr=Rr?ma:0,Xa=Rr?0:ma;if(ke&&this.addCurrentVertex(ve,st,jr,Xa,pe),Fr==="fakeround")for(var gi=Math.round(hr*180/Math.PI/fX),ja=1;ja<gi;ja++){var Ja=ja/gi;if(Ja!==.5){var Ha=Ja-.5,Mi=1.0904+St*(-3.2452+St*(3.55645-St*1.43519)),Pi=.848013+St*(-1.06021+St*.215638);Ja=Ja+Ja*Ha*(Ja-1)*(Mi*Ha*Ha+Pi)}var tn=Qe.sub(st)._mult(Ja)._add(st)._unit()._mult(Rr?-1:1);this.addHalfVertex(ve,tn.x,tn.y,!1,Rr,0,pe)}qe&&this.addCurrentVertex(ve,Qe,-jr,-Xa,pe)}else if(Fr==="butt")this.addCurrentVertex(ve,_t,0,0,pe);else if(Fr==="square"){var ln=ke?1:-1;this.addCurrentVertex(ve,_t,ln,ln,pe)}else Fr==="round"&&(ke&&(this.addCurrentVertex(ve,st,0,0,pe),this.addCurrentVertex(ve,st,1,1,pe,!0)),qe&&(this.addCurrentVertex(ve,Qe,-1,-1,pe,!0),this.addCurrentVertex(ve,Qe,0,0,pe)));if(ur&&Lt<j-1){var Wn=ve.dist(qe);if(Wn>2*ie){var Sn=ve.add(qe.sub(ve)._mult(ie/Wn)._round());this.updateDistance(ve,Sn),this.addCurrentVertex(Sn,Qe,0,0,pe),ve=Sn}}}}},Io.prototype.addCurrentVertex=function(o,f,p,x,A,C){C===void 0&&(C=!1);var q=f.x+f.y*p,W=f.y-f.x*p,j=-f.x+f.y*x,Q=-f.y-f.x*x;this.addHalfVertex(o,q,W,C,!1,p,A),this.addHalfVertex(o,j,Q,C,!0,-x,A),this.distance>VM/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,f,p,x,A,C))},Io.prototype.addHalfVertex=function(o,f,p,x,A,C,q){var W=o.x,j=o.y,Q=this.lineClips?this.scaledDistance*(VM-1):this.scaledDistance,ie=Q*UM;if(this.layoutVertexArray.emplaceBack((W<<1)+(x?1:0),(j<<1)+(A?1:0),Math.round(OM*f)+128,Math.round(OM*p)+128,(C===0?0:C<0?-1:1)+1|(ie&63)<<2,ie>>6),this.lineClips){var pe=this.scaledDistance-this.lineClips.start,ve=this.lineClips.end-this.lineClips.start,ke=pe/ve;this.layoutVertexArray2.emplaceBack(ke,this.lineClipsArray.length)}var qe=q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,qe),q.primitiveLength++),A?this.e2=qe:this.e1=qe},Io.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Io.prototype.updateDistance=function(o,f){this.distance+=o.dist(f),this.updateScaledDistance()},y("LineBucket",Io,{omit:["layers","patternFeatures"]});var hX=new Rn({"line-cap":new wr(Xt.layout_line["line-cap"]),"line-join":new Vr(Xt.layout_line["line-join"]),"line-miter-limit":new wr(Xt.layout_line["line-miter-limit"]),"line-round-limit":new wr(Xt.layout_line["line-round-limit"]),"line-sort-key":new Vr(Xt.layout_line["line-sort-key"])}),vX=new Rn({"line-opacity":new Vr(Xt.paint_line["line-opacity"]),"line-color":new Vr(Xt.paint_line["line-color"]),"line-translate":new wr(Xt.paint_line["line-translate"]),"line-translate-anchor":new wr(Xt.paint_line["line-translate-anchor"]),"line-width":new Vr(Xt.paint_line["line-width"]),"line-gap-width":new Vr(Xt.paint_line["line-gap-width"]),"line-offset":new Vr(Xt.paint_line["line-offset"]),"line-blur":new Vr(Xt.paint_line["line-blur"]),"line-dasharray":new Ti(Xt.paint_line["line-dasharray"]),"line-pattern":new Ni(Xt.paint_line["line-pattern"]),"line-gradient":new uo(Xt.paint_line["line-gradient"])}),HM={paint:vX,layout:hX},dX=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.possiblyEvaluate=function(p,x){return x=new jt(Math.floor(x.zoom),{now:x.now,fadeDuration:x.fadeDuration,zoomHistory:x.zoomHistory,transition:x.transition}),n.prototype.possiblyEvaluate.call(this,p,x)},o.prototype.evaluate=function(p,x,A,C){return x=H({},x,{zoom:Math.floor(x.zoom)}),n.prototype.evaluate.call(this,p,x,A,C)},o}(Vr),GM=new dX(HM.paint.properties["line-width"].specification);GM.useIntegerZoom=!0;var pX=function(n){function o(f){n.call(this,f,HM),this.gradientVersion=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._handleSpecialPaintPropertyUpdate=function(p){if(p==="line-gradient"){var x=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=x._styleExpression.expression instanceof Es,this.gradientVersion=(this.gradientVersion+1)%M}},o.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},o.prototype.recalculate=function(p,x){n.prototype.recalculate.call(this,p,x),this.paint._values["line-floorwidth"]=GM.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,p)},o.prototype.createBucket=function(p){return new Io(p)},o.prototype.queryRadius=function(p){var x=p,A=ZM(zo("line-width",this,x),zo("line-gap-width",this,x)),C=zo("line-offset",this,x);return A/2+Math.abs(C)+nl(this.paint.get("line-translate"))},o.prototype.queryIntersectsFeature=function(p,x,A,C,q,W,j){var Q=zu(p,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),W.angle,j),ie=j/2*ZM(this.paint.get("line-width").evaluate(x,A),this.paint.get("line-gap-width").evaluate(x,A)),pe=this.paint.get("line-offset").evaluate(x,A);return pe&&(C=mX(C,pe*j)),Fn(Q,C,ie)},o.prototype.isTileClipped=function(){return!0},o}(pi);function ZM(n,o){return o>0?o+2*n:n}function mX(n,o){for(var f=[],p=new v(0,0),x=0;x<n.length;x++){for(var A=n[x],C=[],q=0;q<A.length;q++){var W=A[q-1],j=A[q],Q=A[q+1],ie=q===0?p:j.sub(W)._unit()._perp(),pe=q===A.length-1?p:Q.sub(j)._unit()._perp(),ve=ie._add(pe)._unit(),ke=ve.x*pe.x+ve.y*pe.y;ve._mult(1/ke),C.push(ve._mult(o)._add(j))}f.push(C)}return f}var yX=ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gX=ui([{name:"a_projected_pos",components:3,type:"Float32"}],4),wye=ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),_X=ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Tye=ui([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),YM=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xX=ui([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),Aye=ui([{name:"triangle",components:3,type:"Uint16"}]),Mye=ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Sye=ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),kye=ui([{type:"Float32",name:"offsetX"}]),Cye=ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function bX(n,o,f){var p=o.layout.get("text-transform").evaluate(f,{});return p==="uppercase"?n=n.toLocaleUpperCase():p==="lowercase"&&(n=n.toLocaleLowerCase()),ri.applyArabicShaping&&(n=ri.applyArabicShaping(n)),n}function wX(n,o,f){return n.sections.forEach(function(p){p.text=bX(p.text,o,f)}),n}function TX(n){var o={},f={},p=[],x=0;function A(Qe){p.push(n[Qe]),x++}function C(Qe,Lt,_t){var St=f[Qe];return delete f[Qe],f[Lt]=St,p[St].geometry[0].pop(),p[St].geometry[0]=p[St].geometry[0].concat(_t[0]),St}function q(Qe,Lt,_t){var St=o[Lt];return delete o[Lt],o[Qe]=St,p[St].geometry[0].shift(),p[St].geometry[0]=_t[0].concat(p[St].geometry[0]),St}function W(Qe,Lt,_t){var St=_t?Lt[0][Lt[0].length-1]:Lt[0][0];return Qe+":"+St.x+":"+St.y}for(var j=0;j<n.length;j++){var Q=n[j],ie=Q.geometry,pe=Q.text?Q.text.toString():null;if(!pe){A(j);continue}var ve=W(pe,ie),ke=W(pe,ie,!0);if(ve in f&&ke in o&&f[ve]!==o[ke]){var qe=q(ve,ke,ie),st=C(ve,ke,p[qe].geometry);delete o[ve],delete f[ke],f[W(pe,p[st].geometry,!0)]=st,p[qe].geometry=null}else ve in f?C(ve,ke,ie):ke in o?q(ve,ke,ie):(A(j),o[ve]=x-1,f[ke]=x-1)}return p.filter(function(Qe){return Qe.geometry})}var Cy={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function AX(n){for(var o="",f=0;f<n.length;f++){var p=n.charCodeAt(f+1)||null,x=n.charCodeAt(f-1)||null,A=(!p||!ot(p)||Cy[n[f+1]])&&(!x||!ot(x)||Cy[n[f-1]]);A&&Cy[n[f]]?o+=Cy[n[f]]:o+=n[f]}return o}var eo=24,MX=function(n,o,f,p,x){var A,C,q=x*8-p-1,W=(1<<q)-1,j=W>>1,Q=-7,ie=f?x-1:0,pe=f?-1:1,ve=n[o+ie];for(ie+=pe,A=ve&(1<<-Q)-1,ve>>=-Q,Q+=q;Q>0;A=A*256+n[o+ie],ie+=pe,Q-=8);for(C=A&(1<<-Q)-1,A>>=-Q,Q+=p;Q>0;C=C*256+n[o+ie],ie+=pe,Q-=8);if(A===0)A=1-j;else{if(A===W)return C?NaN:(ve?-1:1)*(1/0);C=C+Math.pow(2,p),A=A-j}return(ve?-1:1)*C*Math.pow(2,A-p)},SX=function(n,o,f,p,x,A){var C,q,W,j=A*8-x-1,Q=(1<<j)-1,ie=Q>>1,pe=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,ve=p?0:A-1,ke=p?1:-1,qe=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(q=isNaN(o)?1:0,C=Q):(C=Math.floor(Math.log(o)/Math.LN2),o*(W=Math.pow(2,-C))<1&&(C--,W*=2),C+ie>=1?o+=pe/W:o+=pe*Math.pow(2,1-ie),o*W>=2&&(C++,W/=2),C+ie>=Q?(q=0,C=Q):C+ie>=1?(q=(o*W-1)*Math.pow(2,x),C=C+ie):(q=o*Math.pow(2,ie-1)*Math.pow(2,x),C=0));x>=8;n[f+ve]=q&255,ve+=ke,q/=256,x-=8);for(C=C<<x|q,j+=x;j>0;n[f+ve]=C&255,ve+=ke,C/=256,j-=8);n[f+ve-ke]|=qe*128},Z1={read:MX,write:SX},Y1=Li;function Li(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Li.Varint=0,Li.Fixed64=1,Li.Bytes=2,Li.Fixed32=5;var O3=65536*65536,WM=1/O3,kX=12,XM=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Li.prototype={destroy:function(){this.buf=null},readFields:function(n,o,f){for(f=f||this.length;this.pos<f;){var p=this.readVarint(),x=p>>3,A=this.pos;this.type=p&7,n(x,o,this),this.pos===A&&this.skip(p)}return o},readMessage:function(n,o){return this.readFields(n,o,this.readVarint()+this.pos)},readFixed32:function(){var n=W1(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=JM(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=W1(this.buf,this.pos)+W1(this.buf,this.pos+4)*O3;return this.pos+=8,n},readSFixed64:function(){var n=W1(this.buf,this.pos)+JM(this.buf,this.pos+4)*O3;return this.pos+=8,n},readFloat:function(){var n=Z1.read(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Z1.read(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var o=this.buf,f,p;return p=o[this.pos++],f=p&127,p<128||(p=o[this.pos++],f|=(p&127)<<7,p<128)||(p=o[this.pos++],f|=(p&127)<<14,p<128)||(p=o[this.pos++],f|=(p&127)<<21,p<128)?f:(p=o[this.pos],f|=(p&15)<<28,CX(f,n,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2===1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,o=this.pos;return this.pos=n,n-o>=kX&&XM?VX(this.buf,o,n):UX(this.buf,o,n)},readBytes:function(){var n=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,n);return this.pos=n,o},readPackedVarint:function(n,o){if(this.type!==Li.Bytes)return n.push(this.readVarint(o));var f=fc(this);for(n=n||[];this.pos<f;)n.push(this.readVarint(o));return n},readPackedSVarint:function(n){if(this.type!==Li.Bytes)return n.push(this.readSVarint());var o=fc(this);for(n=n||[];this.pos<o;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Li.Bytes)return n.push(this.readBoolean());var o=fc(this);for(n=n||[];this.pos<o;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Li.Bytes)return n.push(this.readFloat());var o=fc(this);for(n=n||[];this.pos<o;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Li.Bytes)return n.push(this.readDouble());var o=fc(this);for(n=n||[];this.pos<o;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Li.Bytes)return n.push(this.readFixed32());var o=fc(this);for(n=n||[];this.pos<o;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Li.Bytes)return n.push(this.readSFixed32());var o=fc(this);for(n=n||[];this.pos<o;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Li.Bytes)return n.push(this.readFixed64());var o=fc(this);for(n=n||[];this.pos<o;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Li.Bytes)return n.push(this.readSFixed64());var o=fc(this);for(n=n||[];this.pos<o;)n.push(this.readSFixed64());return n},skip:function(n){var o=n&7;if(o===Li.Varint)for(;this.buf[this.pos++]>127;);else if(o===Li.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Li.Fixed32)this.pos+=4;else if(o===Li.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+o)},writeTag:function(n,o){this.writeVarint(n<<3|o)},realloc:function(n){for(var o=this.length||16;o<this.pos+n;)o*=2;if(o!==this.length){var f=new Uint8Array(o);f.set(this.buf),this.buf=f,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),l0(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),l0(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),l0(this.buf,n&-1,this.pos),l0(this.buf,Math.floor(n*WM),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),l0(this.buf,n&-1,this.pos),l0(this.buf,Math.floor(n*WM),this.pos+4),this.pos+=8},writeVarint:function(n){if(n=+n||0,n>268435455||n<0){EX(n,this);return}this.realloc(4),this.buf[this.pos++]=n&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=n>>>7&127)))},writeSVarint:function(n){this.writeVarint(n<0?-n*2-1:n*2)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(n.length*4),this.pos++;var o=this.pos;this.pos=HX(this.buf,n,this.pos);var f=this.pos-o;f>=128&&jM(o,f,this),this.pos=o-1,this.writeVarint(f),this.pos+=f},writeFloat:function(n){this.realloc(4),Z1.write(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Z1.write(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var o=n.length;this.writeVarint(o),this.realloc(o);for(var f=0;f<o;f++)this.buf[this.pos++]=n[f]},writeRawMessage:function(n,o){this.pos++;var f=this.pos;n(o,this);var p=this.pos-f;p>=128&&jM(f,p,this),this.pos=f-1,this.writeVarint(p),this.pos+=p},writeMessage:function(n,o,f){this.writeTag(n,Li.Bytes),this.writeRawMessage(o,f)},writePackedVarint:function(n,o){o.length&&this.writeMessage(n,DX,o)},writePackedSVarint:function(n,o){o.length&&this.writeMessage(n,zX,o)},writePackedBoolean:function(n,o){o.length&&this.writeMessage(n,FX,o)},writePackedFloat:function(n,o){o.length&&this.writeMessage(n,IX,o)},writePackedDouble:function(n,o){o.length&&this.writeMessage(n,RX,o)},writePackedFixed32:function(n,o){o.length&&this.writeMessage(n,qX,o)},writePackedSFixed32:function(n,o){o.length&&this.writeMessage(n,NX,o)},writePackedFixed64:function(n,o){o.length&&this.writeMessage(n,BX,o)},writePackedSFixed64:function(n,o){o.length&&this.writeMessage(n,OX,o)},writeBytesField:function(n,o){this.writeTag(n,Li.Bytes),this.writeBytes(o)},writeFixed32Field:function(n,o){this.writeTag(n,Li.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(n,o){this.writeTag(n,Li.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(n,o){this.writeTag(n,Li.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(n,o){this.writeTag(n,Li.Fixed64),this.writeSFixed64(o)},writeVarintField:function(n,o){this.writeTag(n,Li.Varint),this.writeVarint(o)},writeSVarintField:function(n,o){this.writeTag(n,Li.Varint),this.writeSVarint(o)},writeStringField:function(n,o){this.writeTag(n,Li.Bytes),this.writeString(o)},writeFloatField:function(n,o){this.writeTag(n,Li.Fixed32),this.writeFloat(o)},writeDoubleField:function(n,o){this.writeTag(n,Li.Fixed64),this.writeDouble(o)},writeBooleanField:function(n,o){this.writeVarintField(n,!!o)}};function CX(n,o,f){var p=f.buf,x,A;if(A=p[f.pos++],x=(A&112)>>4,A<128||(A=p[f.pos++],x|=(A&127)<<3,A<128)||(A=p[f.pos++],x|=(A&127)<<10,A<128)||(A=p[f.pos++],x|=(A&127)<<17,A<128)||(A=p[f.pos++],x|=(A&127)<<24,A<128)||(A=p[f.pos++],x|=(A&1)<<31,A<128))return s0(n,x,o);throw new Error("Expected varint not more than 10 bytes")}function fc(n){return n.type===Li.Bytes?n.readVarint()+n.pos:n.pos+1}function s0(n,o,f){return f?o*4294967296+(n>>>0):(o>>>0)*4294967296+(n>>>0)}function EX(n,o){var f,p;if(n>=0?(f=n%4294967296|0,p=n/4294967296|0):(f=~(-n%4294967296),p=~(-n/4294967296),f^4294967295?f=f+1|0:(f=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),LX(f,p,o),PX(p,o)}function LX(n,o,f){f.buf[f.pos++]=n&127|128,n>>>=7,f.buf[f.pos++]=n&127|128,n>>>=7,f.buf[f.pos++]=n&127|128,n>>>=7,f.buf[f.pos++]=n&127|128,n>>>=7,f.buf[f.pos]=n&127}function PX(n,o){var f=(n&7)<<4;o.buf[o.pos++]|=f|((n>>>=3)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127)))))}function jM(n,o,f){var p=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(Math.LN2*7));f.realloc(p);for(var x=f.pos-1;x>=n;x--)f.buf[x+p]=f.buf[x]}function DX(n,o){for(var f=0;f<n.length;f++)o.writeVarint(n[f])}function zX(n,o){for(var f=0;f<n.length;f++)o.writeSVarint(n[f])}function IX(n,o){for(var f=0;f<n.length;f++)o.writeFloat(n[f])}function RX(n,o){for(var f=0;f<n.length;f++)o.writeDouble(n[f])}function FX(n,o){for(var f=0;f<n.length;f++)o.writeBoolean(n[f])}function qX(n,o){for(var f=0;f<n.length;f++)o.writeFixed32(n[f])}function NX(n,o){for(var f=0;f<n.length;f++)o.writeSFixed32(n[f])}function BX(n,o){for(var f=0;f<n.length;f++)o.writeFixed64(n[f])}function OX(n,o){for(var f=0;f<n.length;f++)o.writeSFixed64(n[f])}function W1(n,o){return(n[o]|n[o+1]<<8|n[o+2]<<16)+n[o+3]*16777216}function l0(n,o,f){n[f]=o,n[f+1]=o>>>8,n[f+2]=o>>>16,n[f+3]=o>>>24}function JM(n,o){return(n[o]|n[o+1]<<8|n[o+2]<<16)+(n[o+3]<<24)}function UX(n,o,f){for(var p="",x=o;x<f;){var A=n[x],C=null,q=A>239?4:A>223?3:A>191?2:1;if(x+q>f)break;var W,j,Q;q===1?A<128&&(C=A):q===2?(W=n[x+1],(W&192)===128&&(C=(A&31)<<6|W&63,C<=127&&(C=null))):q===3?(W=n[x+1],j=n[x+2],(W&192)===128&&(j&192)===128&&(C=(A&15)<<12|(W&63)<<6|j&63,(C<=2047||C>=55296&&C<=57343)&&(C=null))):q===4&&(W=n[x+1],j=n[x+2],Q=n[x+3],(W&192)===128&&(j&192)===128&&(Q&192)===128&&(C=(A&15)<<18|(W&63)<<12|(j&63)<<6|Q&63,(C<=65535||C>=1114112)&&(C=null))),C===null?(C=65533,q=1):C>65535&&(C-=65536,p+=String.fromCharCode(C>>>10&1023|55296),C=56320|C&1023),p+=String.fromCharCode(C),x+=q}return p}function VX(n,o,f){return XM.decode(n.subarray(o,f))}function HX(n,o,f){for(var p=0,x,A;p<o.length;p++){if(x=o.charCodeAt(p),x>55295&&x<57344)if(A)if(x<56320){n[f++]=239,n[f++]=191,n[f++]=189,A=x;continue}else x=A-55296<<10|x-56320|65536,A=null;else{x>56319||p+1===o.length?(n[f++]=239,n[f++]=191,n[f++]=189):A=x;continue}else A&&(n[f++]=239,n[f++]=191,n[f++]=189,A=null);x<128?n[f++]=x:(x<2048?n[f++]=x>>6|192:(x<65536?n[f++]=x>>12|224:(n[f++]=x>>18|240,n[f++]=x>>12&63|128),n[f++]=x>>6&63|128),n[f++]=x&63|128)}return f}var U3=3;function GX(n,o,f){n===1&&f.readMessage(ZX,o)}function ZX(n,o,f){if(n===3){var p=f.readMessage(YX,{}),x=p.id,A=p.bitmap,C=p.width,q=p.height,W=p.left,j=p.top,Q=p.advance;o.push({id:x,bitmap:new nd({width:C+2*U3,height:q+2*U3},A),metrics:{width:C,height:q,left:W,top:j,advance:Q}})}}function YX(n,o,f){n===1?o.id=f.readVarint():n===2?o.bitmap=f.readBytes():n===3?o.width=f.readVarint():n===4?o.height=f.readVarint():n===5?o.left=f.readSVarint():n===6?o.top=f.readSVarint():n===7&&(o.advance=f.readVarint())}function WX(n){return new Y1(n).readFields(GX,[])}var KM=U3;function QM(n){for(var o=0,f=0,p=0,x=n;p<x.length;p+=1){var A=x[p];o+=A.w*A.h,f=Math.max(f,A.w)}n.sort(function(st,Qe){return Qe.h-st.h});for(var C=Math.max(Math.ceil(Math.sqrt(o/.95)),f),q=[{x:0,y:0,w:C,h:1/0}],W=0,j=0,Q=0,ie=n;Q<ie.length;Q+=1)for(var pe=ie[Q],ve=q.length-1;ve>=0;ve--){var ke=q[ve];if(!(pe.w>ke.w||pe.h>ke.h)){if(pe.x=ke.x,pe.y=ke.y,j=Math.max(j,pe.y+pe.h),W=Math.max(W,pe.x+pe.w),pe.w===ke.w&&pe.h===ke.h){var qe=q.pop();ve<q.length&&(q[ve]=qe)}else pe.h===ke.h?(ke.x+=pe.w,ke.w-=pe.w):pe.w===ke.w?(ke.y+=pe.h,ke.h-=pe.h):(q.push({x:ke.x+pe.w,y:ke.y,w:ke.w-pe.w,h:pe.h}),ke.y+=pe.h,ke.h-=pe.h);break}}return{w:W,h:j,fill:o/(W*j)||0}}var ms=1,X1=function(o,f){var p=f.pixelRatio,x=f.version,A=f.stretchX,C=f.stretchY,q=f.content;this.paddedRect=o,this.pixelRatio=p,this.stretchX=A,this.stretchY=C,this.content=q,this.version=x},Ey={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ey.tl.get=function(){return[this.paddedRect.x+ms,this.paddedRect.y+ms]},Ey.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ms,this.paddedRect.y+this.paddedRect.h-ms]},Ey.tlbr.get=function(){return this.tl.concat(this.br)},Ey.displaySize.get=function(){return[(this.paddedRect.w-ms*2)/this.pixelRatio,(this.paddedRect.h-ms*2)/this.pixelRatio]},Object.defineProperties(X1.prototype,Ey);var Ly=function(o,f){var p={},x={};this.haveRenderCallbacks=[];var A=[];this.addImages(o,p,A),this.addImages(f,x,A);var C=QM(A),q=C.w,W=C.h,j=new rs({width:q||1,height:W||1});for(var Q in o){var ie=o[Q],pe=p[Q].paddedRect;rs.copy(ie.data,j,{x:0,y:0},{x:pe.x+ms,y:pe.y+ms},ie.data)}for(var ve in f){var ke=f[ve],qe=x[ve].paddedRect,st=qe.x+ms,Qe=qe.y+ms,Lt=ke.data.width,_t=ke.data.height;rs.copy(ke.data,j,{x:0,y:0},{x:st,y:Qe},ke.data),rs.copy(ke.data,j,{x:0,y:_t-1},{x:st,y:Qe-1},{width:Lt,height:1}),rs.copy(ke.data,j,{x:0,y:0},{x:st,y:Qe+_t},{width:Lt,height:1}),rs.copy(ke.data,j,{x:Lt-1,y:0},{x:st-1,y:Qe},{width:1,height:_t}),rs.copy(ke.data,j,{x:0,y:0},{x:st+Lt,y:Qe},{width:1,height:_t})}this.image=j,this.iconPositions=p,this.patternPositions=x};Ly.prototype.addImages=function(o,f,p){for(var x in o){var A=o[x],C={x:0,y:0,w:A.data.width+2*ms,h:A.data.height+2*ms};p.push(C),f[x]=new X1(C,A),A.hasRenderCallback&&this.haveRenderCallbacks.push(x)}},Ly.prototype.patchUpdatedImages=function(o,f){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var p in o.updatedImages)this.patchUpdatedImage(this.iconPositions[p],o.getImage(p),f),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p),f)},Ly.prototype.patchUpdatedImage=function(o,f,p){if(!(!o||!f)&&o.version!==f.version){o.version=f.version;var x=o.tl,A=x[0],C=x[1];p.update(f.data,void 0,{x:A,y:C})}},y("ImagePosition",X1),y("ImageAtlas",Ly);var Ns={horizontal:1,vertical:2,horizontalOnly:3},Py=-17;function XX(n){for(var o=0,f=n;o<f.length;o+=1){var p=f[o];if(p.positionedGlyphs.length!==0)return!1}return!0}var $M=57344,e7=63743,u0=function(){this.scale=1,this.fontStack="",this.imageName=null};u0.forText=function(o,f){var p=new u0;return p.scale=o||1,p.fontStack=f,p},u0.forImage=function(o){var f=new u0;return f.imageName=o,f};var wo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};wo.fromFeature=function(o,f){for(var p=new wo,x=0;x<o.sections.length;x++){var A=o.sections[x];A.image?p.addImageSection(A):p.addTextSection(A,f)}return p},wo.prototype.length=function(){return this.text.length},wo.prototype.getSection=function(o){return this.sections[this.sectionIndex[o]]},wo.prototype.getSectionIndex=function(o){return this.sectionIndex[o]},wo.prototype.getCharCode=function(o){return this.text.charCodeAt(o)},wo.prototype.verticalizePunctuation=function(){this.text=AX(this.text)},wo.prototype.trim=function(){for(var o=0,f=0;f<this.text.length&&Mf[this.text.charCodeAt(f)];f++)o++;for(var p=this.text.length,x=this.text.length-1;x>=0&&x>=o&&Mf[this.text.charCodeAt(x)];x--)p--;this.text=this.text.substring(o,p),this.sectionIndex=this.sectionIndex.slice(o,p)},wo.prototype.substring=function(o,f){var p=new wo;return p.text=this.text.substring(o,f),p.sectionIndex=this.sectionIndex.slice(o,f),p.sections=this.sections,p},wo.prototype.toString=function(){return this.text},wo.prototype.getMaxScale=function(){var o=this;return this.sectionIndex.reduce(function(f,p){return Math.max(f,o.sections[p].scale)},0)},wo.prototype.addTextSection=function(o,f){this.text+=o.text,this.sections.push(u0.forText(o.scale,o.fontStack||f));for(var p=this.sections.length-1,x=0;x<o.text.length;++x)this.sectionIndex.push(p)},wo.prototype.addImageSection=function(o){var f=o.image?o.image.name:"";if(f.length===0){Ae("Can't add FormattedSection with an empty image.");return}var p=this.getNextImageSectionCharCode();if(!p){Ae("Reached maximum number of images "+(e7-$M+2));return}this.text+=String.fromCharCode(p),this.sections.push(u0.forImage(f)),this.sectionIndex.push(this.sections.length-1)},wo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=e7?null:++this.imageSectionID:(this.imageSectionID=$M,this.imageSectionID)};function jX(n,o){for(var f=[],p=n.text,x=0,A=0,C=o;A<C.length;A+=1){var q=C[A];f.push(n.substring(x,q)),x=q}return x<p.length&&f.push(n.substring(x,p.length)),f}function j1(n,o,f,p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe){var st=wo.fromFeature(n,x);ie===Ns.vertical&&st.verticalizePunctuation();var Qe,Lt=ri.processBidirectionalText,_t=ri.processStyledBidirectionalText;if(Lt&&st.sections.length===1){Qe=[];for(var St=Lt(st.toString(),V3(st,j,A,o,p,ve,ke)),It=0,Jt=St;It<Jt.length;It+=1){var hr=Jt[It],ur=new wo;ur.text=hr,ur.sections=st.sections;for(var Rr=0;Rr<hr.length;Rr++)ur.sectionIndex.push(0);Qe.push(ur)}}else if(_t){Qe=[];for(var kr=_t(st.text,st.sectionIndex,V3(st,j,A,o,p,ve,ke)),zr=0,Qr=kr;zr<Qr.length;zr+=1){var Fr=Qr[zr],Nr=new wo;Nr.text=Fr[0],Nr.sectionIndex=Fr[1],Nr.sections=st.sections,Qe.push(Nr)}}else Qe=jX(st,V3(st,j,A,o,p,ve,ke));var ma=[],jr={positionedLines:ma,text:st.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return QX(jr,o,f,p,Qe,C,q,W,ie,j,pe,qe),XX(ma)?!1:jr}var Mf={};Mf[9]=!0,Mf[10]=!0,Mf[11]=!0,Mf[12]=!0,Mf[13]=!0,Mf[32]=!0;var ys={};ys[10]=!0,ys[32]=!0,ys[38]=!0,ys[40]=!0,ys[41]=!0,ys[43]=!0,ys[45]=!0,ys[47]=!0,ys[173]=!0,ys[183]=!0,ys[8203]=!0,ys[8208]=!0,ys[8211]=!0,ys[8231]=!0;function t7(n,o,f,p,x,A){if(o.imageName){var W=p[o.imageName];return W?W.displaySize[0]*o.scale*eo/A+x:0}else{var C=f[o.fontStack],q=C&&C[n];return q?q.metrics.advance*o.scale+x:0}}function JX(n,o,f,p,x,A){for(var C=0,q=0;q<n.length();q++){var W=n.getSection(q);C+=t7(n.getCharCode(q),W,p,x,o,A)}var j=Math.max(1,Math.ceil(C/f));return C/j}function r7(n,o,f,p){var x=Math.pow(n-o,2);return p?n<o?x/2:x*2:x+Math.abs(f)*f}function KX(n,o,f){var p=0;return n===10&&(p-=1e4),f&&(p+=150),(n===40||n===65288)&&(p+=50),(o===41||o===65289)&&(p+=50),p}function a7(n,o,f,p,x,A){for(var C=null,q=r7(o,f,x,A),W=0,j=p;W<j.length;W+=1){var Q=j[W],ie=o-Q.x,pe=r7(ie,f,x,A)+Q.badness;pe<=q&&(C=Q,q=pe)}return{index:n,x:o,priorBreak:C,badness:q}}function i7(n){return n?i7(n.priorBreak).concat(n.index):[]}function V3(n,o,f,p,x,A,C){if(A!=="point")return[];if(!n)return[];for(var q=[],W=JX(n,o,f,p,x,C),j=n.text.indexOf("\u200B")>=0,Q=0,ie=0;ie<n.length();ie++){var pe=n.getSection(ie),ve=n.getCharCode(ie);if(Mf[ve]||(Q+=t7(ve,pe,p,x,o,C)),ie<n.length()-1){var ke=De(ve);(ys[ve]||ke||pe.imageName)&&q.push(a7(ie+1,Q,W,q,KX(ve,n.getCharCode(ie+1),ke&&j),!1))}}return i7(a7(n.length(),Q,W,q,0,!0))}function H3(n){var o=.5,f=.5;switch(n){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0;break}switch(n){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;break}return{horizontalAlign:o,verticalAlign:f}}function QX(n,o,f,p,x,A,C,q,W,j,Q,ie){for(var pe=0,ve=Py,ke=0,qe=0,st=q==="right"?1:q==="left"?0:.5,Qe=0,Lt=0,_t=x;Lt<_t.length;Lt+=1){var St=_t[Lt];St.trim();var It=St.getMaxScale(),Jt=(It-1)*eo,hr={positionedGlyphs:[],lineOffset:0};n.positionedLines[Qe]=hr;var ur=hr.positionedGlyphs,Rr=0;if(!St.length()){ve+=A,++Qe;continue}for(var kr=0;kr<St.length();kr++){var zr=St.getSection(kr),Qr=St.getSectionIndex(kr),Fr=St.getCharCode(kr),Nr=0,ma=null,jr=null,Xa=null,gi=eo,ja=!(W===Ns.horizontal||!Q&&!Pe(Fr)||Q&&(Mf[Fr]||ze(Fr)));if(zr.imageName){var tn=p[zr.imageName];if(!tn)continue;Xa=zr.imageName,n.iconsInText=n.iconsInText||!0,jr=tn.paddedRect;var ln=tn.displaySize;zr.scale=zr.scale*eo/ie,ma={width:ln[0],height:ln[1],left:ms,top:-KM,advance:ja?ln[1]:ln[0]};var Wn=eo-ln[1]*zr.scale;Nr=Jt+Wn,gi=ma.advance;var Sn=ja?ln[0]*zr.scale-eo*It:ln[1]*zr.scale-eo*It;Sn>0&&Sn>Rr&&(Rr=Sn)}else{var Ja=f[zr.fontStack],Ha=Ja&&Ja[Fr];if(Ha&&Ha.rect)jr=Ha.rect,ma=Ha.metrics;else{var Mi=o[zr.fontStack],Pi=Mi&&Mi[Fr];if(!Pi)continue;ma=Pi.metrics}Nr=(It-zr.scale)*eo}ja?(n.verticalizable=!0,ur.push({glyph:Fr,imageName:Xa,x:pe,y:ve+Nr,vertical:ja,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:Qr,metrics:ma,rect:jr}),pe+=gi*zr.scale+j):(ur.push({glyph:Fr,imageName:Xa,x:pe,y:ve+Nr,vertical:ja,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:Qr,metrics:ma,rect:jr}),pe+=ma.advance*zr.scale+j)}if(ur.length!==0){var To=pe-j;ke=Math.max(To,ke),$X(ur,0,ur.length-1,st,Rr)}pe=0;var Ao=A*It+Rr;hr.lineOffset=Math.max(Rr,Jt),ve+=Ao,qe=Math.max(Ao,qe),++Qe}var Xn=ve-Py,Ro=H3(C),Fo=Ro.horizontalAlign,qn=Ro.verticalAlign;ej(n.positionedLines,st,Fo,qn,ke,qe,A,Xn,x.length),n.top+=-qn*Xn,n.bottom=n.top+Xn,n.left+=-Fo*ke,n.right=n.left+ke}function $X(n,o,f,p,x){if(!(!p&&!x))for(var A=n[f],C=A.metrics.advance*A.scale,q=(n[f].x+C)*p,W=o;W<=f;W++)n[W].x-=q,n[W].y+=x}function ej(n,o,f,p,x,A,C,q,W){var j=(o-f)*x,Q=0;A!==C?Q=-q*p-Py:Q=(-p*W+.5)*C;for(var ie=0,pe=n;ie<pe.length;ie+=1)for(var ve=pe[ie],ke=0,qe=ve.positionedGlyphs;ke<qe.length;ke+=1){var st=qe[ke];st.x+=j,st.y+=Q}}function tj(n,o,f){var p=H3(f),x=p.horizontalAlign,A=p.verticalAlign,C=o[0],q=o[1],W=C-n.displaySize[0]*x,j=W+n.displaySize[0],Q=q-n.displaySize[1]*A,ie=Q+n.displaySize[1];return{image:n,top:Q,bottom:ie,left:W,right:j}}function n7(n,o,f,p,x,A){var C=n.image,q;if(C.content){var W=C.content,j=C.pixelRatio||1;q=[W[0]/j,W[1]/j,C.displaySize[0]-W[2]/j,C.displaySize[1]-W[3]/j]}var Q=o.left*A,ie=o.right*A,pe,ve,ke,qe;f==="width"||f==="both"?(qe=x[0]+Q-p[3],ve=x[0]+ie+p[1]):(qe=x[0]+(Q+ie-C.displaySize[0])/2,ve=qe+C.displaySize[0]);var st=o.top*A,Qe=o.bottom*A;return f==="height"||f==="both"?(pe=x[1]+st-p[0],ke=x[1]+Qe+p[2]):(pe=x[1]+(st+Qe-C.displaySize[1])/2,ke=pe+C.displaySize[1]),{image:C,top:pe,right:ve,bottom:ke,left:qe,collisionPadding:q}}var f0=function(n){function o(f,p,x,A){n.call(this,f,p),this.angle=x,A!==void 0&&(this.segment=A)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.clone=function(){return new o(this.x,this.y,this.angle,this.segment)},o}(v);y("Anchor",f0);var Fu=128;function G3(n,o){var f=o.expression;if(f.kind==="constant"){var p=f.evaluate(new jt(n+1));return{kind:"constant",layoutSize:p}}else{if(f.kind==="source")return{kind:"source"};for(var x=f.zoomStops,A=f.interpolationType,C=0;C<x.length&&x[C]<=n;)C++;C=Math.max(0,C-1);for(var q=C;q<x.length&&x[q]<n+1;)q++;q=Math.min(x.length-1,q);var W=x[C],j=x[q];if(f.kind==="composite")return{kind:"composite",minZoom:W,maxZoom:j,interpolationType:A};var Q=f.evaluate(new jt(W)),ie=f.evaluate(new jt(j));return{kind:"camera",minZoom:W,maxZoom:j,minSize:Q,maxSize:ie,interpolationType:A}}}function o7(n,o,f){var p=o.uSize,x=o.uSizeT,A=f.lowerSize,C=f.upperSize;return n.kind==="source"?A/Fu:n.kind==="composite"?fn(A/Fu,C/Fu,x):p}function s7(n,o){var f=0,p=0;if(n.kind==="constant")p=n.layoutSize;else if(n.kind!=="source"){var x=n.interpolationType,A=n.minZoom,C=n.maxZoom,q=x?I(xn.interpolationFactor(x,o,A,C),0,1):0;n.kind==="camera"?p=fn(n.minSize,n.maxSize,q):f=q}return{uSizeT:f,uSize:p}}var rj=Object.freeze({__proto__:null,getSizeData:G3,evaluateSizeForFeature:o7,evaluateSizeForZoom:s7,SIZE_PACK_FACTOR:Fu});function l7(n,o,f,p,x){if(o.segment===void 0)return!0;for(var A=o,C=o.segment+1,q=0;q>-f/2;){if(C--,C<0)return!1;q-=n[C].dist(A),A=n[C]}q+=n[C].dist(n[C+1]),C++;for(var W=[],j=0;q<f/2;){var Q=n[C-1],ie=n[C],pe=n[C+1];if(!pe)return!1;var ve=Q.angleTo(ie)-ie.angleTo(pe);for(ve=Math.abs((ve+3*Math.PI)%(Math.PI*2)-Math.PI),W.push({distance:q,angleDelta:ve}),j+=ve;q-W[0].distance>p;)j-=W.shift().angleDelta;if(j>x)return!1;C++,q+=ie.dist(pe)}return!0}function u7(n){for(var o=0,f=0;f<n.length-1;f++)o+=n[f].dist(n[f+1]);return o}function f7(n,o,f){return n?3/5*o*f:0}function c7(n,o){return Math.max(n?n.right-n.left:0,o?o.right-o.left:0)}function aj(n,o,f,p,x,A){for(var C=f7(f,x,A),q=c7(f,p)*A,W=0,j=u7(n)/2,Q=0;Q<n.length-1;Q++){var ie=n[Q],pe=n[Q+1],ve=ie.dist(pe);if(W+ve>j){var ke=(j-W)/ve,qe=fn(ie.x,pe.x,ke),st=fn(ie.y,pe.y,ke),Qe=new f0(qe,st,pe.angleTo(ie),Q);return Qe._round(),!C||l7(n,Qe,q,C,o)?Qe:void 0}W+=ve}}function ij(n,o,f,p,x,A,C,q,W){var j=f7(p,A,C),Q=c7(p,x),ie=Q*C,pe=n[0].x===0||n[0].x===W||n[0].y===0||n[0].y===W;o-ie<o/4&&(o=ie+o/4);var ve=A*2,ke=pe?o/2*q%o:(Q/2+ve)*C*q%o;return h7(n,ke,o,j,f,ie,pe,!1,W)}function h7(n,o,f,p,x,A,C,q,W){for(var j=A/2,Q=u7(n),ie=0,pe=o-f,ve=[],ke=0;ke<n.length-1;ke++){for(var qe=n[ke],st=n[ke+1],Qe=qe.dist(st),Lt=st.angleTo(qe);pe+f<ie+Qe;){pe+=f;var _t=(pe-ie)/Qe,St=fn(qe.x,st.x,_t),It=fn(qe.y,st.y,_t);if(St>=0&&St<W&&It>=0&&It<W&&pe-j>=0&&pe+j<=Q){var Jt=new f0(St,It,Lt,ke);Jt._round(),(!p||l7(n,Jt,A,p,x))&&ve.push(Jt)}}ie+=Qe}return!q&&!ve.length&&!C&&(ve=h7(n,ie/2,f,p,x,A,C,!0,W)),ve}function v7(n,o,f,p,x){for(var A=[],C=0;C<n.length;C++)for(var q=n[C],W=void 0,j=0;j<q.length-1;j++){var Q=q[j],ie=q[j+1];Q.x<o&&ie.x<o||(Q.x<o?Q=new v(o,Q.y+(ie.y-Q.y)*((o-Q.x)/(ie.x-Q.x)))._round():ie.x<o&&(ie=new v(o,Q.y+(ie.y-Q.y)*((o-Q.x)/(ie.x-Q.x)))._round()),!(Q.y<f&&ie.y<f)&&(Q.y<f?Q=new v(Q.x+(ie.x-Q.x)*((f-Q.y)/(ie.y-Q.y)),f)._round():ie.y<f&&(ie=new v(Q.x+(ie.x-Q.x)*((f-Q.y)/(ie.y-Q.y)),f)._round()),!(Q.x>=p&&ie.x>=p)&&(Q.x>=p?Q=new v(p,Q.y+(ie.y-Q.y)*((p-Q.x)/(ie.x-Q.x)))._round():ie.x>=p&&(ie=new v(p,Q.y+(ie.y-Q.y)*((p-Q.x)/(ie.x-Q.x)))._round()),!(Q.y>=x&&ie.y>=x)&&(Q.y>=x?Q=new v(Q.x+(ie.x-Q.x)*((x-Q.y)/(ie.y-Q.y)),x)._round():ie.y>=x&&(ie=new v(Q.x+(ie.x-Q.x)*((x-Q.y)/(ie.y-Q.y)),x)._round()),(!W||!Q.equals(W[W.length-1]))&&(W=[Q],A.push(W)),W.push(ie)))))}return A}var c0=ms;function d7(n,o,f,p){var x=[],A=n.image,C=A.pixelRatio,q=A.paddedRect.w-2*c0,W=A.paddedRect.h-2*c0,j=n.right-n.left,Q=n.bottom-n.top,ie=A.stretchX||[[0,q]],pe=A.stretchY||[[0,W]],ve=function(Ja,Ha){return Ja+Ha[1]-Ha[0]},ke=ie.reduce(ve,0),qe=pe.reduce(ve,0),st=q-ke,Qe=W-qe,Lt=0,_t=ke,St=0,It=qe,Jt=0,hr=st,ur=0,Rr=Qe;if(A.content&&p){var kr=A.content;Lt=J1(ie,0,kr[0]),St=J1(pe,0,kr[1]),_t=J1(ie,kr[0],kr[2]),It=J1(pe,kr[1],kr[3]),Jt=kr[0]-Lt,ur=kr[1]-St,hr=kr[2]-kr[0]-_t,Rr=kr[3]-kr[1]-It}var zr=function(Ja,Ha,Mi,Pi){var tn=K1(Ja.stretch-Lt,_t,j,n.left),ln=Q1(Ja.fixed-Jt,hr,Ja.stretch,ke),Wn=K1(Ha.stretch-St,It,Q,n.top),Sn=Q1(Ha.fixed-ur,Rr,Ha.stretch,qe),To=K1(Mi.stretch-Lt,_t,j,n.left),Ao=Q1(Mi.fixed-Jt,hr,Mi.stretch,ke),Xn=K1(Pi.stretch-St,It,Q,n.top),Ro=Q1(Pi.fixed-ur,Rr,Pi.stretch,qe),Fo=new v(tn,Wn),qn=new v(To,Wn),qo=new v(To,Xn),Bs=new v(tn,Xn),vc=new v(ln/C,Sn/C),Th=new v(Ao/C,Ro/C),Ah=o*Math.PI/180;if(Ah){var Mh=Math.sin(Ah),_0=Math.cos(Ah),Yl=[_0,-Mh,Mh,_0];Fo._matMult(Yl),qn._matMult(Yl),Bs._matMult(Yl),qo._matMult(Yl)}var i_=Ja.stretch+Ja.fixed,Q3=Mi.stretch+Mi.fixed,n_=Ha.stretch+Ha.fixed,$3=Pi.stretch+Pi.fixed,sl={x:A.paddedRect.x+c0+i_,y:A.paddedRect.y+c0+n_,w:Q3-i_,h:$3-n_},x0=hr/C/j,o_=Rr/C/Q;return{tl:Fo,tr:qn,bl:Bs,br:qo,tex:sl,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vc,pixelOffsetBR:Th,minFontScaleX:x0,minFontScaleY:o_,isSDF:f}};if(!p||!A.stretchX&&!A.stretchY)x.push(zr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:q+1},{fixed:0,stretch:W+1}));else for(var Qr=p7(ie,st,ke),Fr=p7(pe,Qe,qe),Nr=0;Nr<Qr.length-1;Nr++)for(var ma=Qr[Nr],jr=Qr[Nr+1],Xa=0;Xa<Fr.length-1;Xa++){var gi=Fr[Xa],ja=Fr[Xa+1];x.push(zr(ma,gi,jr,ja))}return x}function J1(n,o,f){for(var p=0,x=0,A=n;x<A.length;x+=1){var C=A[x];p+=Math.max(o,Math.min(f,C[1]))-Math.max(o,Math.min(f,C[0]))}return p}function p7(n,o,f){for(var p=[{fixed:-c0,stretch:0}],x=0,A=n;x<A.length;x+=1){var C=A[x],q=C[0],W=C[1],j=p[p.length-1];p.push({fixed:q-j.stretch,stretch:j.stretch}),p.push({fixed:q-j.stretch,stretch:j.stretch+(W-q)})}return p.push({fixed:o+c0,stretch:f}),p}function K1(n,o,f,p){return n/o*f+p}function Q1(n,o,f,p){return n-o*f/p}function nj(n,o,f,p,x,A,C,q){for(var W=p.layout.get("text-rotate").evaluate(A,{})*Math.PI/180,j=[],Q=0,ie=o.positionedLines;Q<ie.length;Q+=1)for(var pe=ie[Q],ve=0,ke=pe.positionedGlyphs;ve<ke.length;ve+=1){var qe=ke[ve];if(qe.rect){var st=qe.rect||{},Qe=1,Lt=KM+Qe,_t=!0,St=1,It=0,Jt=(x||q)&&qe.vertical,hr=qe.metrics.advance*qe.scale/2;if(q&&o.verticalizable){var ur=(qe.scale-1)*eo,Rr=(eo-qe.metrics.width*qe.scale)/2;It=pe.lineOffset/2-(qe.imageName?-Rr:ur)}if(qe.imageName){var kr=C[qe.imageName];_t=kr.sdf,St=kr.pixelRatio,Lt=ms/St}var zr=x?[qe.x+hr,qe.y]:[0,0],Qr=x?[0,0]:[qe.x+hr+f[0],qe.y+f[1]-It],Fr=[0,0];Jt&&(Fr=Qr,Qr=[0,0]);var Nr=(qe.metrics.left-Lt)*qe.scale-hr+Qr[0],ma=(-qe.metrics.top-Lt)*qe.scale+Qr[1],jr=Nr+st.w*qe.scale/St,Xa=ma+st.h*qe.scale/St,gi=new v(Nr,ma),ja=new v(jr,ma),Ja=new v(Nr,Xa),Ha=new v(jr,Xa);if(Jt){var Mi=new v(-hr,hr-Py),Pi=-Math.PI/2,tn=eo/2-hr,ln=qe.imageName?tn:0,Wn=new v(5-Py-tn,-ln),Sn=new(Function.prototype.bind.apply(v,[null].concat(Fr)));gi._rotateAround(Pi,Mi)._add(Wn)._add(Sn),ja._rotateAround(Pi,Mi)._add(Wn)._add(Sn),Ja._rotateAround(Pi,Mi)._add(Wn)._add(Sn),Ha._rotateAround(Pi,Mi)._add(Wn)._add(Sn)}if(W){var To=Math.sin(W),Ao=Math.cos(W),Xn=[Ao,-To,To,Ao];gi._matMult(Xn),ja._matMult(Xn),Ja._matMult(Xn),Ha._matMult(Xn)}var Ro=new v(0,0),Fo=new v(0,0),qn=0,qo=0;j.push({tl:gi,tr:ja,bl:Ja,br:Ha,tex:st,writingMode:o.writingMode,glyphOffset:zr,sectionIndex:qe.sectionIndex,isSDF:_t,pixelOffsetTL:Ro,pixelOffsetBR:Fo,minFontScaleX:qn,minFontScaleY:qo})}}return j}var $1=function(o,f,p,x,A,C,q,W,j,Q){if(this.boxStartIndex=o.length,j){var ie=C.top,pe=C.bottom,ve=C.collisionPadding;ve&&(ie-=ve[1],pe+=ve[3]);var ke=pe-ie;ke>0&&(ke=Math.max(10,ke),this.circleDiameter=ke)}else{var qe=C.top*q-W,st=C.bottom*q+W,Qe=C.left*q-W,Lt=C.right*q+W,_t=C.collisionPadding;if(_t&&(Qe-=_t[0]*q,qe-=_t[1]*q,Lt+=_t[2]*q,st+=_t[3]*q),Q){var St=new v(Qe,qe),It=new v(Lt,qe),Jt=new v(Qe,st),hr=new v(Lt,st),ur=Q*Math.PI/180;St._rotate(ur),It._rotate(ur),Jt._rotate(ur),hr._rotate(ur),Qe=Math.min(St.x,It.x,Jt.x,hr.x),Lt=Math.max(St.x,It.x,Jt.x,hr.x),qe=Math.min(St.y,It.y,Jt.y,hr.y),st=Math.max(St.y,It.y,Jt.y,hr.y)}o.emplaceBack(f.x,f.y,Qe,qe,Lt,st,p,x,A)}this.boxEndIndex=o.length},h0=function(o,f){if(o===void 0&&(o=[]),f===void 0&&(f=oj),this.data=o,this.length=this.data.length,this.compare=f,this.length>0)for(var p=(this.length>>1)-1;p>=0;p--)this._down(p)};h0.prototype.push=function(o){this.data.push(o),this.length++,this._up(this.length-1)},h0.prototype.pop=function(){if(this.length!==0){var o=this.data[0],f=this.data.pop();return this.length--,this.length>0&&(this.data[0]=f,this._down(0)),o}},h0.prototype.peek=function(){return this.data[0]},h0.prototype._up=function(o){for(var f=this,p=f.data,x=f.compare,A=p[o];o>0;){var C=o-1>>1,q=p[C];if(x(A,q)>=0)break;p[o]=q,o=C}p[o]=A},h0.prototype._down=function(o){for(var f=this,p=f.data,x=f.compare,A=this.length>>1,C=p[o];o<A;){var q=(o<<1)+1,W=p[q],j=q+1;if(j<this.length&&x(p[j],W)<0&&(q=j,W=p[j]),x(W,C)>=0)break;p[o]=W,o=q}p[o]=C};function oj(n,o){return n<o?-1:n>o?1:0}function sj(n,o,f){o===void 0&&(o=1),f===void 0&&(f=!1);for(var p=1/0,x=1/0,A=-1/0,C=-1/0,q=n[0],W=0;W<q.length;W++){var j=q[W];(!W||j.x<p)&&(p=j.x),(!W||j.y<x)&&(x=j.y),(!W||j.x>A)&&(A=j.x),(!W||j.y>C)&&(C=j.y)}var Q=A-p,ie=C-x,pe=Math.min(Q,ie),ve=pe/2,ke=new h0([],lj);if(pe===0)return new v(p,x);for(var qe=p;qe<A;qe+=pe)for(var st=x;st<C;st+=pe)ke.push(new v0(qe+ve,st+ve,ve,n));for(var Qe=fj(n),Lt=ke.length;ke.length;){var _t=ke.pop();(_t.d>Qe.d||!Qe.d)&&(Qe=_t,f&&console.log("found best %d after %d probes",Math.round(1e4*_t.d)/1e4,Lt)),!(_t.max-Qe.d<=o)&&(ve=_t.h/2,ke.push(new v0(_t.p.x-ve,_t.p.y-ve,ve,n)),ke.push(new v0(_t.p.x+ve,_t.p.y-ve,ve,n)),ke.push(new v0(_t.p.x-ve,_t.p.y+ve,ve,n)),ke.push(new v0(_t.p.x+ve,_t.p.y+ve,ve,n)),Lt+=4)}return f&&(console.log("num probes: "+Lt),console.log("best distance: "+Qe.d)),Qe.p}function lj(n,o){return o.max-n.max}function v0(n,o,f,p){this.p=new v(n,o),this.h=f,this.d=uj(this.p,p),this.max=this.d+this.h*Math.SQRT2}function uj(n,o){for(var f=!1,p=1/0,x=0;x<o.length;x++)for(var A=o[x],C=0,q=A.length,W=q-1;C<q;W=C++){var j=A[C],Q=A[W];j.y>n.y!=Q.y>n.y&&n.x<(Q.x-j.x)*(n.y-j.y)/(Q.y-j.y)+j.x&&(f=!f),p=Math.min(p,uc(n,j,Q))}return(f?1:-1)*Math.sqrt(p)}function fj(n){for(var o=0,f=0,p=0,x=n[0],A=0,C=x.length,q=C-1;A<C;q=A++){var W=x[A],j=x[q],Q=W.x*j.y-j.x*W.y;f+=(W.x+j.x)*Q,p+=(W.y+j.y)*Q,o+=Q*3}return new v0(f/o,p/o,0,n)}var d0=7,Z3=Number.POSITIVE_INFINITY;function m7(n,o){function f(x,A){var C=0,q=0;A<0&&(A=0);var W=A/Math.sqrt(2);switch(x){case"top-right":case"top-left":q=W-d0;break;case"bottom-right":case"bottom-left":q=-W+d0;break;case"bottom":q=-A+d0;break;case"top":q=A-d0;break}switch(x){case"top-right":case"bottom-right":C=-W;break;case"top-left":case"bottom-left":C=W;break;case"left":C=A;break;case"right":C=-A;break}return[C,q]}function p(x,A,C){var q=0,W=0;switch(A=Math.abs(A),C=Math.abs(C),x){case"top-right":case"top-left":case"top":W=C-d0;break;case"bottom-right":case"bottom-left":case"bottom":W=-C+d0;break}switch(x){case"top-right":case"bottom-right":case"right":q=-A;break;case"top-left":case"bottom-left":case"left":q=A;break}return[q,W]}return o[1]!==Z3?p(n,o[0],o[1]):f(n,o[0])}function cj(n,o,f,p,x,A,C){n.createArrays();var q=512*n.overscaling;n.tilePixelRatio=qr/q,n.compareText={},n.iconsNeedLinear=!1;var W=n.layers[0].layout,j=n.layers[0]._unevaluatedLayout._values,Q={};if(n.textSizeData.kind==="composite"){var ie=n.textSizeData,pe=ie.minZoom,ve=ie.maxZoom;Q.compositeTextSizes=[j["text-size"].possiblyEvaluate(new jt(pe),C),j["text-size"].possiblyEvaluate(new jt(ve),C)]}if(n.iconSizeData.kind==="composite"){var ke=n.iconSizeData,qe=ke.minZoom,st=ke.maxZoom;Q.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new jt(qe),C),j["icon-size"].possiblyEvaluate(new jt(st),C)]}Q.layoutTextSize=j["text-size"].possiblyEvaluate(new jt(n.zoom+1),C),Q.layoutIconSize=j["icon-size"].possiblyEvaluate(new jt(n.zoom+1),C),Q.textMaxSize=j["text-size"].possiblyEvaluate(new jt(18));for(var Qe=W.get("text-line-height")*eo,Lt=W.get("text-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",_t=W.get("text-keep-upright"),St=W.get("text-size"),It=function(){var ur=hr[Jt],Rr=W.get("text-font").evaluate(ur,{},C).join(","),kr=St.evaluate(ur,{},C),zr=Q.layoutTextSize.evaluate(ur,{},C),Qr=Q.layoutIconSize.evaluate(ur,{},C),Fr={horizontal:{},vertical:void 0},Nr=ur.text,ma=[0,0];if(Nr){var jr=Nr.toString(),Xa=W.get("text-letter-spacing").evaluate(ur,{},C)*eo,gi=de(jr)?Xa:0,ja=W.get("text-anchor").evaluate(ur,{},C),Ja=W.get("text-variable-anchor");if(!Ja){var Ha=W.get("text-radial-offset").evaluate(ur,{},C);Ha?ma=m7(ja,[Ha*eo,Z3]):ma=W.get("text-offset").evaluate(ur,{},C).map(function(vc){return vc*eo})}var Mi=Lt?"center":W.get("text-justify").evaluate(ur,{},C),Pi=W.get("symbol-placement"),tn=Pi==="point"?W.get("text-max-width").evaluate(ur,{},C)*eo:0,ln=function(){n.allowVerticalPlacement&&ae(jr)&&(Fr.vertical=j1(Nr,o,f,x,Rr,tn,Qe,ja,"left",gi,ma,Ns.vertical,!0,Pi,zr,kr))};if(!Lt&&Ja){for(var Wn=Mi==="auto"?Ja.map(function(vc){return Y3(vc)}):[Mi],Sn=!1,To=0;To<Wn.length;To++){var Ao=Wn[To];if(!Fr.horizontal[Ao])if(Sn)Fr.horizontal[Ao]=Fr.horizontal[0];else{var Xn=j1(Nr,o,f,x,Rr,tn,Qe,"center",Ao,gi,ma,Ns.horizontal,!1,Pi,zr,kr);Xn&&(Fr.horizontal[Ao]=Xn,Sn=Xn.positionedLines.length===1)}}ln()}else{Mi==="auto"&&(Mi=Y3(ja));var Ro=j1(Nr,o,f,x,Rr,tn,Qe,ja,Mi,gi,ma,Ns.horizontal,!1,Pi,zr,kr);Ro&&(Fr.horizontal[Mi]=Ro),ln(),ae(jr)&&Lt&&_t&&(Fr.vertical=j1(Nr,o,f,x,Rr,tn,Qe,ja,Mi,gi,ma,Ns.vertical,!1,Pi,zr,kr))}}var Fo=void 0,qn=!1;if(ur.icon&&ur.icon.name){var qo=p[ur.icon.name];qo&&(Fo=tj(x[ur.icon.name],W.get("icon-offset").evaluate(ur,{},C),W.get("icon-anchor").evaluate(ur,{},C)),qn=qo.sdf,n.sdfIcons===void 0?n.sdfIcons=qo.sdf:n.sdfIcons!==qo.sdf&&Ae("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qo.pixelRatio!==n.pixelRatio||W.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}var Bs=g7(Fr.horizontal)||Fr.vertical;n.iconsInText=Bs?Bs.iconsInText:!1,(Bs||Fo)&&hj(n,ur,Fr,Fo,p,Q,zr,Qr,ma,qn,C)},Jt=0,hr=n.features;Jt<hr.length;Jt+=1)It();A&&n.generateCollisionDebugBuffers()}function Y3(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hj(n,o,f,p,x,A,C,q,W,j,Q){var ie=A.textMaxSize.evaluate(o,{});ie===void 0&&(ie=C);var pe=n.layers[0].layout,ve=pe.get("icon-offset").evaluate(o,{},Q),ke=g7(f.horizontal),qe=24,st=C/qe,Qe=n.tilePixelRatio*st,Lt=n.tilePixelRatio*ie/qe,_t=n.tilePixelRatio*q,St=n.tilePixelRatio*pe.get("symbol-spacing"),It=pe.get("text-padding")*n.tilePixelRatio,Jt=pe.get("icon-padding")*n.tilePixelRatio,hr=pe.get("text-max-angle")/180*Math.PI,ur=pe.get("text-rotation-alignment")==="map"&&pe.get("symbol-placement")!=="point",Rr=pe.get("icon-rotation-alignment")==="map"&&pe.get("symbol-placement")!=="point",kr=pe.get("symbol-placement"),zr=St/2,Qr=pe.get("icon-text-fit"),Fr;p&&Qr!=="none"&&(n.allowVerticalPlacement&&f.vertical&&(Fr=n7(p,f.vertical,Qr,pe.get("icon-text-fit-padding"),ve,st)),ke&&(p=n7(p,ke,Qr,pe.get("icon-text-fit-padding"),ve,st)));var Nr=function(_0,Yl){Yl.x<0||Yl.x>=qr||Yl.y<0||Yl.y>=qr||vj(n,Yl,_0,f,p,x,Fr,n.layers[0],n.collisionBoxArray,o.index,o.sourceLayerIndex,n.index,Qe,It,ur,W,_t,Jt,Rr,ve,o,A,j,Q,C)};if(kr==="line")for(var ma=0,jr=v7(o.geometry,0,0,qr,qr);ma<jr.length;ma+=1)for(var Xa=jr[ma],gi=ij(Xa,St,hr,f.vertical||ke,p,qe,Lt,n.overscaling,qr),ja=0,Ja=gi;ja<Ja.length;ja+=1){var Ha=Ja[ja],Mi=ke;(!Mi||!dj(n,Mi.text,zr,Ha))&&Nr(Xa,Ha)}else if(kr==="line-center")for(var Pi=0,tn=o.geometry;Pi<tn.length;Pi+=1){var ln=tn[Pi];if(ln.length>1){var Wn=aj(ln,hr,f.vertical||ke,p,qe,Lt);Wn&&Nr(ln,Wn)}}else if(o.type==="Polygon")for(var Sn=0,To=F3(o.geometry,0);Sn<To.length;Sn+=1){var Ao=To[Sn],Xn=sj(Ao,16);Nr(Ao[0],new f0(Xn.x,Xn.y,0))}else if(o.type==="LineString")for(var Ro=0,Fo=o.geometry;Ro<Fo.length;Ro+=1){var qn=Fo[Ro];Nr(qn,new f0(qn[0].x,qn[0].y,0))}else if(o.type==="Point")for(var qo=0,Bs=o.geometry;qo<Bs.length;qo+=1)for(var vc=Bs[qo],Th=0,Ah=vc;Th<Ah.length;Th+=1){var Mh=Ah[Th];Nr([Mh],new f0(Mh.x,Mh.y,0))}}var Dy=255,bh=Dy*Fu;function y7(n,o,f,p,x,A,C,q,W,j,Q,ie,pe,ve,ke){var qe=nj(o,f,q,x,A,C,p,n.allowVerticalPlacement),st=n.textSizeData,Qe=null;st.kind==="source"?(Qe=[Fu*x.layout.get("text-size").evaluate(C,{})],Qe[0]>bh&&Ae(n.layerIds[0]+': Value for "text-size" is >= '+Dy+'. Reduce your "text-size".')):st.kind==="composite"&&(Qe=[Fu*ve.compositeTextSizes[0].evaluate(C,{},ke),Fu*ve.compositeTextSizes[1].evaluate(C,{},ke)],(Qe[0]>bh||Qe[1]>bh)&&Ae(n.layerIds[0]+': Value for "text-size" is >= '+Dy+'. Reduce your "text-size".')),n.addSymbols(n.text,qe,Qe,q,A,C,j,o,W.lineStartIndex,W.lineLength,pe,ke);for(var Lt=0,_t=Q;Lt<_t.length;Lt+=1){var St=_t[Lt];ie[St]=n.text.placedSymbolArray.length-1}return qe.length*4}function g7(n){for(var o in n)return n[o];return null}function vj(n,o,f,p,x,A,C,q,W,j,Q,ie,pe,ve,ke,qe,st,Qe,Lt,_t,St,It,Jt,hr,ur){var Rr,kr=n.addToLineVertexArray(o,f),zr,Qr,Fr,Nr,ma=0,jr=0,Xa=0,gi=0,ja=-1,Ja=-1,Ha={},Mi=w(""),Pi=0,tn=0;if(q._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Rr=q.layout.get("text-offset").evaluate(St,{},hr).map(function(Ry){return Ry*eo}),Pi=Rr[0],tn=Rr[1]):(Pi=q.layout.get("text-radial-offset").evaluate(St,{},hr)*eo,tn=Z3),n.allowVerticalPlacement&&p.vertical){var ln=q.layout.get("text-rotate").evaluate(St,{},hr),Wn=ln+90,Sn=p.vertical;Fr=new $1(W,o,j,Q,ie,Sn,pe,ve,ke,Wn),C&&(Nr=new $1(W,o,j,Q,ie,C,st,Qe,ke,Wn))}if(x){var To=q.layout.get("icon-rotate").evaluate(St,{}),Ao=q.layout.get("icon-text-fit")!=="none",Xn=d7(x,To,Jt,Ao),Ro=C?d7(C,To,Jt,Ao):void 0;Qr=new $1(W,o,j,Q,ie,x,st,Qe,!1,To),ma=Xn.length*4;var Fo=n.iconSizeData,qn=null;Fo.kind==="source"?(qn=[Fu*q.layout.get("icon-size").evaluate(St,{})],qn[0]>bh&&Ae(n.layerIds[0]+': Value for "icon-size" is >= '+Dy+'. Reduce your "icon-size".')):Fo.kind==="composite"&&(qn=[Fu*It.compositeIconSizes[0].evaluate(St,{},hr),Fu*It.compositeIconSizes[1].evaluate(St,{},hr)],(qn[0]>bh||qn[1]>bh)&&Ae(n.layerIds[0]+': Value for "icon-size" is >= '+Dy+'. Reduce your "icon-size".')),n.addSymbols(n.icon,Xn,qn,_t,Lt,St,!1,o,kr.lineStartIndex,kr.lineLength,-1,hr),ja=n.icon.placedSymbolArray.length-1,Ro&&(jr=Ro.length*4,n.addSymbols(n.icon,Ro,qn,_t,Lt,St,Ns.vertical,o,kr.lineStartIndex,kr.lineLength,-1,hr),Ja=n.icon.placedSymbolArray.length-1)}for(var qo in p.horizontal){var Bs=p.horizontal[qo];if(!zr){Mi=w(Bs.text);var vc=q.layout.get("text-rotate").evaluate(St,{},hr);zr=new $1(W,o,j,Q,ie,Bs,pe,ve,ke,vc)}var Th=Bs.positionedLines.length===1;if(Xa+=y7(n,o,Bs,A,q,ke,St,qe,kr,p.vertical?Ns.horizontal:Ns.horizontalOnly,Th?Object.keys(p.horizontal):[qo],Ha,ja,It,hr),Th)break}p.vertical&&(gi+=y7(n,o,p.vertical,A,q,ke,St,qe,kr,Ns.vertical,["vertical"],Ha,Ja,It,hr));var Ah=zr?zr.boxStartIndex:n.collisionBoxArray.length,Mh=zr?zr.boxEndIndex:n.collisionBoxArray.length,_0=Fr?Fr.boxStartIndex:n.collisionBoxArray.length,Yl=Fr?Fr.boxEndIndex:n.collisionBoxArray.length,i_=Qr?Qr.boxStartIndex:n.collisionBoxArray.length,Q3=Qr?Qr.boxEndIndex:n.collisionBoxArray.length,n_=Nr?Nr.boxStartIndex:n.collisionBoxArray.length,$3=Nr?Nr.boxEndIndex:n.collisionBoxArray.length,sl=-1,x0=function(Ry,I7){return Ry&&Ry.circleDiameter?Math.max(Ry.circleDiameter,I7):I7};sl=x0(zr,sl),sl=x0(Fr,sl),sl=x0(Qr,sl),sl=x0(Nr,sl);var o_=sl>-1?1:0;o_&&(sl*=ur/eo),n.glyphOffsetArray.length>=yi.MAX_GLYPHS&&Ae("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),St.sortKey!==void 0&&n.addToSortKeyRanges(n.symbolInstances.length,St.sortKey),n.symbolInstances.emplaceBack(o.x,o.y,Ha.right>=0?Ha.right:-1,Ha.center>=0?Ha.center:-1,Ha.left>=0?Ha.left:-1,Ha.vertical||-1,ja,Ja,Mi,Ah,Mh,_0,Yl,i_,Q3,n_,$3,j,Xa,gi,ma,jr,o_,0,pe,Pi,tn,sl)}function dj(n,o,f,p){var x=n.compareText;if(!(o in x))x[o]=[];else for(var A=x[o],C=A.length-1;C>=0;C--)if(p.dist(A[C])<f)return!0;return x[o].push(p),!1}var pj=o0.VectorTileFeature.types,mj=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function e_(n,o,f,p,x,A,C,q,W,j,Q,ie,pe){var ve=q?Math.min(bh,Math.round(q[0])):0,ke=q?Math.min(bh,Math.round(q[1])):0;n.emplaceBack(o,f,Math.round(p*32),Math.round(x*32),A,C,(ve<<1)+(W?1:0),ke,j*16,Q*16,ie*256,pe*256)}function W3(n,o,f){n.emplaceBack(o.x,o.y,f),n.emplaceBack(o.x,o.y,f),n.emplaceBack(o.x,o.y,f),n.emplaceBack(o.x,o.y,f)}function yj(n){for(var o=0,f=n.sections;o<f.length;o+=1){var p=f[o];if(lt(p.text))return!0}return!1}var p0=function(o){this.layoutVertexArray=new Tf,this.indexArray=new Du,this.programConfigurations=o,this.segments=new wn,this.dynamicLayoutVertexArray=new py,this.opacityVertexArray=new my,this.placedSymbolArray=new _y};p0.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},p0.prototype.upload=function(o,f,p,x){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,yX.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,gX.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,mj,!0),this.opacityVertexBuffer.itemSize=1),(p||x)&&this.programConfigurations.upload(o))},p0.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},y("SymbolBuffers",p0);var zy=function(o,f,p){this.layoutVertexArray=new o,this.layoutAttributes=f,this.indexArray=new p,this.segments=new wn,this.collisionVertexArray=new Qo};zy.prototype.upload=function(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,_X.members,!0)},zy.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},y("CollisionBuffers",zy);var yi=function(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(W){return W.id}),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=t0([]),this.placementViewportMatrix=t0([]);var f=this.layers[0],p=f._unevaluatedLayout._values;this.textSizeData=G3(this.zoom,p["text-size"]),this.iconSizeData=G3(this.zoom,p["icon-size"]);var x=this.layers[0].layout,A=x.get("symbol-sort-key"),C=x.get("symbol-z-order");this.canOverlap=x.get("text-allow-overlap")||x.get("icon-allow-overlap")||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&A.constantOr(1)!==void 0;var q=C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=q&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(function(W){return Ns[W]})),this.stateDependentLayerIds=this.layers.filter(function(W){return W.isStateDependent()}).map(function(W){return W.id}),this.sourceID=o.sourceID};yi.prototype.createArrays=function(){this.text=new p0(new Sr(this.layers,this.zoom,function(o){return/^text/.test(o)})),this.icon=new p0(new Sr(this.layers,this.zoom,function(o){return/^icon/.test(o)})),this.glyphOffsetArray=new F1,this.lineVertexArray=new al,this.symbolInstances=new R1},yi.prototype.calculateGlyphDependencies=function(o,f,p,x,A){for(var C=0;C<o.length;C++)if(f[o.charCodeAt(C)]=!0,(p||x)&&A){var q=Cy[o.charAt(C)];q&&(f[q.charCodeAt(0)]=!0)}},yi.prototype.populate=function(o,f,p){var x=this.layers[0],A=x.layout,C=A.get("text-font"),q=A.get("text-field"),W=A.get("icon-image"),j=(q.value.kind!=="constant"||q.value.value instanceof _n&&!q.value.value.isEmpty()||q.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),Q=W.value.kind!=="constant"||!!W.value.value||Object.keys(W.parameters).length>0,ie=A.get("symbol-sort-key");if(this.features=[],!(!j&&!Q)){for(var pe=f.iconDependencies,ve=f.glyphDependencies,ke=f.availableImages,qe=new jt(this.zoom),st=0,Qe=o;st<Qe.length;st+=1){var Lt=Qe[st],_t=Lt.feature,St=Lt.id,It=Lt.index,Jt=Lt.sourceLayerIndex,hr=x._featureFilter.needGeometry,ur=Ai(_t,hr);if(x._featureFilter.filter(qe,ur,p)){hr||(ur.geometry=Va(_t));var Rr=void 0;if(j){var kr=x.getValueAndResolveTokens("text-field",ur,p,ke),zr=_n.factory(kr);yj(zr)&&(this.hasRTLText=!0),(!this.hasRTLText||ta()==="unavailable"||this.hasRTLText&&ri.isParsed())&&(Rr=wX(zr,x,ur))}var Qr=void 0;if(Q){var Fr=x.getValueAndResolveTokens("icon-image",ur,p,ke);Fr instanceof zn?Qr=Fr:Qr=zn.fromString(Fr)}if(!(!Rr&&!Qr)){var Nr=this.sortFeaturesByKey?ie.evaluate(ur,{},p):void 0,ma={id:St,text:Rr,icon:Qr,index:It,sourceLayerIndex:Jt,geometry:ur.geometry,properties:_t.properties,type:pj[_t.type],sortKey:Nr};if(this.features.push(ma),Qr&&(pe[Qr.name]=!0),Rr){var jr=C.evaluate(ur,{},p).join(","),Xa=A.get("text-rotation-alignment")==="map"&&A.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ns.vertical)>=0;for(var gi=0,ja=Rr.sections;gi<ja.length;gi+=1){var Ja=ja[gi];if(Ja.image)pe[Ja.image.name]=!0;else{var Ha=ae(Rr.toString()),Mi=Ja.fontStack||jr,Pi=ve[Mi]=ve[Mi]||{};this.calculateGlyphDependencies(Ja.text,Pi,Xa,this.allowVerticalPlacement,Ha)}}}}}}A.get("symbol-placement")==="line"&&(this.features=TX(this.features)),this.sortFeaturesByKey&&this.features.sort(function(tn,ln){return tn.sortKey-ln.sortKey})}},yi.prototype.update=function(o,f,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,f,this.layers,p),this.icon.programConfigurations.updatePaintArrays(o,f,this.layers,p))},yi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},yi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yi.prototype.upload=function(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},yi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},yi.prototype.addToLineVertexArray=function(o,f){var p=this.lineVertexArray.length;if(o.segment!==void 0){for(var x=o.dist(f[o.segment+1]),A=o.dist(f[o.segment]),C={},q=o.segment+1;q<f.length;q++)C[q]={x:f[q].x,y:f[q].y,tileUnitDistanceFromAnchor:x},q<f.length-1&&(x+=f[q+1].dist(f[q]));for(var W=o.segment||0;W>=0;W--)C[W]={x:f[W].x,y:f[W].y,tileUnitDistanceFromAnchor:A},W>0&&(A+=f[W-1].dist(f[W]));for(var j=0;j<f.length;j++){var Q=C[j];this.lineVertexArray.emplaceBack(Q.x,Q.y,Q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}},yi.prototype.addSymbols=function(o,f,p,x,A,C,q,W,j,Q,ie,pe){for(var ve=o.indexArray,ke=o.layoutVertexArray,qe=o.segments.prepareSegment(4*f.length,ke,ve,this.canOverlap?C.sortKey:void 0),st=this.glyphOffsetArray.length,Qe=qe.vertexLength,Lt=this.allowVerticalPlacement&&q===Ns.vertical?Math.PI/2:0,_t=C.text&&C.text.sections,St=0;St<f.length;St++){var It=f[St],Jt=It.tl,hr=It.tr,ur=It.bl,Rr=It.br,kr=It.tex,zr=It.pixelOffsetTL,Qr=It.pixelOffsetBR,Fr=It.minFontScaleX,Nr=It.minFontScaleY,ma=It.glyphOffset,jr=It.isSDF,Xa=It.sectionIndex,gi=qe.vertexLength,ja=ma[1];e_(ke,W.x,W.y,Jt.x,ja+Jt.y,kr.x,kr.y,p,jr,zr.x,zr.y,Fr,Nr),e_(ke,W.x,W.y,hr.x,ja+hr.y,kr.x+kr.w,kr.y,p,jr,Qr.x,zr.y,Fr,Nr),e_(ke,W.x,W.y,ur.x,ja+ur.y,kr.x,kr.y+kr.h,p,jr,zr.x,Qr.y,Fr,Nr),e_(ke,W.x,W.y,Rr.x,ja+Rr.y,kr.x+kr.w,kr.y+kr.h,p,jr,Qr.x,Qr.y,Fr,Nr),W3(o.dynamicLayoutVertexArray,W,Lt),ve.emplaceBack(gi,gi+1,gi+2),ve.emplaceBack(gi+1,gi+2,gi+3),qe.vertexLength+=4,qe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ma[0]),(St===f.length-1||Xa!==f[St+1].sectionIndex)&&o.programConfigurations.populatePaintArrays(ke.length,C,C.index,{},pe,_t&&_t[Xa])}o.placedSymbolArray.emplaceBack(W.x,W.y,st,this.glyphOffsetArray.length-st,Qe,j,Q,W.segment,p?p[0]:0,p?p[1]:0,x[0],x[1],q,0,!1,0,ie)},yi.prototype._addCollisionDebugVertex=function(o,f,p,x,A,C){return f.emplaceBack(0,0),o.emplaceBack(p.x,p.y,x,A,Math.round(C.x),Math.round(C.y))},yi.prototype.addCollisionDebugVertices=function(o,f,p,x,A,C,q){var W=A.segments.prepareSegment(4,A.layoutVertexArray,A.indexArray),j=W.vertexLength,Q=A.layoutVertexArray,ie=A.collisionVertexArray,pe=q.anchorX,ve=q.anchorY;this._addCollisionDebugVertex(Q,ie,C,pe,ve,new v(o,f)),this._addCollisionDebugVertex(Q,ie,C,pe,ve,new v(p,f)),this._addCollisionDebugVertex(Q,ie,C,pe,ve,new v(p,x)),this._addCollisionDebugVertex(Q,ie,C,pe,ve,new v(o,x)),W.vertexLength+=4;var ke=A.indexArray;ke.emplaceBack(j,j+1),ke.emplaceBack(j+1,j+2),ke.emplaceBack(j+2,j+3),ke.emplaceBack(j+3,j),W.primitiveLength+=4},yi.prototype.addDebugCollisionBoxes=function(o,f,p,x){for(var A=o;A<f;A++){var C=this.collisionBoxArray.get(A),q=C.x1,W=C.y1,j=C.x2,Q=C.y2;this.addCollisionDebugVertices(q,W,j,Q,x?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,p)}},yi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zy(jp,YM.members,rd),this.iconCollisionBox=new zy(jp,YM.members,rd);for(var o=0;o<this.symbolInstances.length;o++){var f=this.symbolInstances.get(o);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}},yi.prototype._deserializeCollisionBoxesForSymbol=function(o,f,p,x,A,C,q,W,j){for(var Q={},ie=f;ie<p;ie++){var pe=o.get(ie);Q.textBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},Q.textFeatureIndex=pe.featureIndex;break}for(var ve=x;ve<A;ve++){var ke=o.get(ve);Q.verticalTextBox={x1:ke.x1,y1:ke.y1,x2:ke.x2,y2:ke.y2,anchorPointX:ke.anchorPointX,anchorPointY:ke.anchorPointY},Q.verticalTextFeatureIndex=ke.featureIndex;break}for(var qe=C;qe<q;qe++){var st=o.get(qe);Q.iconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Q.iconFeatureIndex=st.featureIndex;break}for(var Qe=W;Qe<j;Qe++){var Lt=o.get(Qe);Q.verticalIconBox={x1:Lt.x1,y1:Lt.y1,x2:Lt.x2,y2:Lt.y2,anchorPointX:Lt.anchorPointX,anchorPointY:Lt.anchorPointY},Q.verticalIconFeatureIndex=Lt.featureIndex;break}return Q},yi.prototype.deserializeCollisionBoxes=function(o){this.collisionArrays=[];for(var f=0;f<this.symbolInstances.length;f++){var p=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}},yi.prototype.hasTextData=function(){return this.text.segments.get().length>0},yi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},yi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},yi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},yi.prototype.addIndicesForPlacedSymbol=function(o,f){for(var p=o.placedSymbolArray.get(f),x=p.vertexStartIndex+p.numGlyphs*4,A=p.vertexStartIndex;A<x;A+=4)o.indexArray.emplaceBack(A,A+1,A+2),o.indexArray.emplaceBack(A+1,A+2,A+3)},yi.prototype.getSortedSymbolIndexes=function(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var f=Math.sin(o),p=Math.cos(o),x=[],A=[],C=[],q=0;q<this.symbolInstances.length;++q){C.push(q);var W=this.symbolInstances.get(q);x.push(Math.round(f*W.anchorX+p*W.anchorY)|0),A.push(W.featureIndex)}return C.sort(function(j,Q){return x[j]-x[Q]||A[Q]-A[j]}),C},yi.prototype.addToSortKeyRanges=function(o,f){var p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===f?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:o,symbolInstanceEnd:o+1})},yi.prototype.sortFeatures=function(o){var f=this;if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var p=0,x=this.symbolInstanceIndexes;p<x.length;p+=1){var A=x[p],C=this.symbolInstances.get(A);this.featureSortOrder.push(C.featureIndex),[C.rightJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.leftJustifiedTextSymbolIndex].forEach(function(q,W,j){q>=0&&j.indexOf(q)===W&&f.addIndicesForPlacedSymbol(f.text,q)}),C.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,C.verticalPlacedTextSymbolIndex),C.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,C.placedIconSymbolIndex),C.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,C.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},y("SymbolBucket",yi,{omit:["layers","collisionBoxArray","features","compareText"]}),yi.MAX_GLYPHS=65535,yi.addDynamicAttributes=W3;function gj(n,o){return o.replace(/{([^{}]+)}/g,function(f,p){return p in n?String(n[p]):""})}var _j=new Rn({"symbol-placement":new wr(Xt.layout_symbol["symbol-placement"]),"symbol-spacing":new wr(Xt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wr(Xt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vr(Xt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wr(Xt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wr(Xt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new wr(Xt.layout_symbol["icon-ignore-placement"]),"icon-optional":new wr(Xt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wr(Xt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vr(Xt.layout_symbol["icon-size"]),"icon-text-fit":new wr(Xt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wr(Xt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vr(Xt.layout_symbol["icon-image"]),"icon-rotate":new Vr(Xt.layout_symbol["icon-rotate"]),"icon-padding":new wr(Xt.layout_symbol["icon-padding"]),"icon-keep-upright":new wr(Xt.layout_symbol["icon-keep-upright"]),"icon-offset":new Vr(Xt.layout_symbol["icon-offset"]),"icon-anchor":new Vr(Xt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wr(Xt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wr(Xt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wr(Xt.layout_symbol["text-rotation-alignment"]),"text-field":new Vr(Xt.layout_symbol["text-field"]),"text-font":new Vr(Xt.layout_symbol["text-font"]),"text-size":new Vr(Xt.layout_symbol["text-size"]),"text-max-width":new Vr(Xt.layout_symbol["text-max-width"]),"text-line-height":new wr(Xt.layout_symbol["text-line-height"]),"text-letter-spacing":new Vr(Xt.layout_symbol["text-letter-spacing"]),"text-justify":new Vr(Xt.layout_symbol["text-justify"]),"text-radial-offset":new Vr(Xt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wr(Xt.layout_symbol["text-variable-anchor"]),"text-anchor":new Vr(Xt.layout_symbol["text-anchor"]),"text-max-angle":new wr(Xt.layout_symbol["text-max-angle"]),"text-writing-mode":new wr(Xt.layout_symbol["text-writing-mode"]),"text-rotate":new Vr(Xt.layout_symbol["text-rotate"]),"text-padding":new wr(Xt.layout_symbol["text-padding"]),"text-keep-upright":new wr(Xt.layout_symbol["text-keep-upright"]),"text-transform":new Vr(Xt.layout_symbol["text-transform"]),"text-offset":new Vr(Xt.layout_symbol["text-offset"]),"text-allow-overlap":new wr(Xt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new wr(Xt.layout_symbol["text-ignore-placement"]),"text-optional":new wr(Xt.layout_symbol["text-optional"])}),xj=new Rn({"icon-opacity":new Vr(Xt.paint_symbol["icon-opacity"]),"icon-color":new Vr(Xt.paint_symbol["icon-color"]),"icon-halo-color":new Vr(Xt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vr(Xt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vr(Xt.paint_symbol["icon-halo-blur"]),"icon-translate":new wr(Xt.paint_symbol["icon-translate"]),"icon-translate-anchor":new wr(Xt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vr(Xt.paint_symbol["text-opacity"]),"text-color":new Vr(Xt.paint_symbol["text-color"],{runtimeType:ks,getOverride:function(n){return n.textColor},hasOverride:function(n){return!!n.textColor}}),"text-halo-color":new Vr(Xt.paint_symbol["text-halo-color"]),"text-halo-width":new Vr(Xt.paint_symbol["text-halo-width"]),"text-halo-blur":new Vr(Xt.paint_symbol["text-halo-blur"]),"text-translate":new wr(Xt.paint_symbol["text-translate"]),"text-translate-anchor":new wr(Xt.paint_symbol["text-translate-anchor"])}),X3={paint:xj,layout:_j},m0=function(o){this.type=o.property.overrides?o.property.overrides.runtimeType:af,this.defaultValue=o};m0.prototype.evaluate=function(o){if(o.formattedSection){var f=this.defaultValue.property.overrides;if(f&&f.hasOverride(o.formattedSection))return f.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default},m0.prototype.eachChild=function(o){if(!this.defaultValue.isConstant()){var f=this.defaultValue.value;o(f._styleExpression.expression)}},m0.prototype.outputDefined=function(){return!1},m0.prototype.serialize=function(){return null},y("FormatSectionOverride",m0,{omit:["defaultValue"]});var bj=function(n){function o(f){n.call(this,f,X3)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.recalculate=function(p,x){if(n.prototype.recalculate.call(this,p,x),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var A=this.layout.get("text-writing-mode");if(A){for(var C=[],q=0,W=A;q<W.length;q+=1){var j=W[q];C.indexOf(j)<0&&C.push(j)}this.layout._values["text-writing-mode"]=C}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},o.prototype.getValueAndResolveTokens=function(p,x,A,C){var q=this.layout.get(p).evaluate(x,{},A,C),W=this._unevaluatedLayout._values[p];return!W.isDataDriven()&&!Cu(W.value)&&q?gj(x.properties,q):q},o.prototype.createBucket=function(p){return new yi(p)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype._setPaintOverrides=function(){for(var p=0,x=X3.paint.overridableProperties;p<x.length;p+=1){var A=x[p];if(o.hasPaintOverride(this.layout,A)){var C=this.paint.get(A),q=new m0(C),W=new ql(q,C.property.specification),j=null;C.value.kind==="constant"||C.value.kind==="source"?j=new Ds("source",W):j=new zs("composite",W,C.value.zoomStops,C.value._interpolationType),this.paint._values[A]=new xi(C.property,j,C.parameters)}}},o.prototype._handleOverridablePaintPropertyUpdate=function(p,x,A){return!this.layout||x.isDataDriven()||A.isDataDriven()?!1:o.hasPaintOverride(this.layout,p)},o.hasPaintOverride=function(p,x){var A=p.get("text-field"),C=X3.paint.properties[x],q=!1,W=function(ie){for(var pe=0,ve=ie;pe<ve.length;pe+=1){var ke=ve[pe];if(C.overrides&&C.overrides.hasOverride(ke)){q=!0;return}}};if(A.value.kind==="constant"&&A.value.value instanceof _n)W(A.value.value.sections);else if(A.value.kind==="source"){var j=function(ie){if(!q)if(ie instanceof Wo&&nn(ie.value)===cs){var pe=ie.value;W(pe.sections)}else ie instanceof Xo?W(ie.sections):ie.eachChild(j)},Q=A.value;Q._styleExpression&&j(Q._styleExpression.expression)}return q},o}(pi),wj=new Rn({"background-color":new wr(Xt.paint_background["background-color"]),"background-pattern":new Ti(Xt.paint_background["background-pattern"]),"background-opacity":new wr(Xt.paint_background["background-opacity"])}),Tj={paint:wj},Aj=function(n){function o(f){n.call(this,f,Tj)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(pi),Mj=new Rn({"raster-opacity":new wr(Xt.paint_raster["raster-opacity"]),"raster-hue-rotate":new wr(Xt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wr(Xt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wr(Xt.paint_raster["raster-brightness-max"]),"raster-saturation":new wr(Xt.paint_raster["raster-saturation"]),"raster-contrast":new wr(Xt.paint_raster["raster-contrast"]),"raster-resampling":new wr(Xt.paint_raster["raster-resampling"]),"raster-fade-duration":new wr(Xt.paint_raster["raster-fade-duration"])}),Sj={paint:Mj},kj=function(n){function o(f){n.call(this,f,Sj)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(pi);function Cj(n){var o=[],f=n.id;return f===void 0&&o.push({message:"layers."+f+': missing required property "id"'}),n.render===void 0&&o.push({message:"layers."+f+': missing required method "render"'}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&o.push({message:"layers."+f+': property "renderingMode" must be either "2d" or "3d"'}),o}var Ej=function(n){function o(f){n.call(this,f,{}),this.implementation=f}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},o.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},o.prototype.recalculate=function(){},o.prototype.updateTransitions=function(){},o.prototype.hasTransition=function(){},o.prototype.serialize=function(){},o.prototype.onAdd=function(p){this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},o.prototype.onRemove=function(p){this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},o}(pi),Lj={circle:$Y,heatmap:aW,hillshade:oW,fill:DW,"fill-extrusion":$W,line:pX,symbol:bj,background:Aj,raster:kj};function Pj(n){return n.type==="custom"?new Ej(n):new Lj[n.type](n)}var _7=_.HTMLImageElement,x7=_.HTMLCanvasElement,b7=_.HTMLVideoElement,w7=_.ImageData,t_=_.ImageBitmap,od=function(o,f,p,x){this.context=o,this.format=p,this.texture=o.gl.createTexture(),this.update(f,x)};od.prototype.update=function(o,f,p){var x=o.width,A=o.height,C=(!this.size||this.size[0]!==x||this.size[1]!==A)&&!p,q=this,W=q.context,j=W.gl;if(this.useMipmap=!!(f&&f.useMipmap),j.bindTexture(j.TEXTURE_2D,this.texture),W.pixelStoreUnpackFlipY.set(!1),W.pixelStoreUnpack.set(1),W.pixelStoreUnpackPremultiplyAlpha.set(this.format===j.RGBA&&(!f||f.premultiply!==!1)),C)this.size=[x,A],o instanceof _7||o instanceof x7||o instanceof b7||o instanceof w7||t_&&o instanceof t_?j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,j.UNSIGNED_BYTE,o):j.texImage2D(j.TEXTURE_2D,0,this.format,x,A,0,this.format,j.UNSIGNED_BYTE,o.data);else{var Q=p||{x:0,y:0},ie=Q.x,pe=Q.y;o instanceof _7||o instanceof x7||o instanceof b7||o instanceof w7||t_&&o instanceof t_?j.texSubImage2D(j.TEXTURE_2D,0,ie,pe,j.RGBA,j.UNSIGNED_BYTE,o):j.texSubImage2D(j.TEXTURE_2D,0,ie,pe,x,A,j.RGBA,j.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&j.generateMipmap(j.TEXTURE_2D)},od.prototype.bind=function(o,f,p){var x=this,A=x.context,C=A.gl;C.bindTexture(C.TEXTURE_2D,this.texture),p===C.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(p=C.LINEAR),o!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,o),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,p||o),this.filter=o),f!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,f),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,f),this.wrap=f)},od.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},od.prototype.destroy=function(){var o=this.context,f=o.gl;f.deleteTexture(this.texture),this.texture=null};var j3=function(o){var f=this;this._callback=o,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){f._triggered=!1,f._callback()})};j3.prototype.trigger=function(){var o=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){o._triggered=!1,o._callback()},0))},j3.prototype.remove=function(){delete this._channel,this._callback=function(){}};var y0=function(o,f,p){this.target=o,this.parent=f,this.mapId=p,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ue(["receive","process"],this),this.invoker=new j3(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=it()?o:_};y0.prototype.send=function(o,f,p,x,A){var C=this;A===void 0&&(A=!1);var q=Math.round(Math.random()*1e18).toString(36).substring(0,10);p&&(this.callbacks[q]=p);var W=xt(this.globalScope)?void 0:[];return this.target.postMessage({id:q,type:o,hasCallback:!!p,targetMapId:x,mustQueue:A,sourceMapId:this.mapId,data:U(f,W)},W),{cancel:function(){p&&delete C.callbacks[q],C.target.postMessage({id:q,type:"<cancel>",targetMapId:x,sourceMapId:C.mapId})}}},y0.prototype.receive=function(o){var f=o.data,p=f.id;if(p&&!(f.targetMapId&&this.mapId!==f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[p];var x=this.cancelCallbacks[p];delete this.cancelCallbacks[p],x&&x()}else it()||f.mustQueue?(this.tasks[p]=f,this.taskQueue.push(p),this.invoker.trigger()):this.processTask(p,f)},y0.prototype.process=function(){if(this.taskQueue.length){var o=this.taskQueue.shift(),f=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(o,f)}},y0.prototype.processTask=function(o,f){var p=this;if(f.type==="<response>"){var x=this.callbacks[o];delete this.callbacks[o],x&&(f.error?x(Z(f.error)):x(null,Z(f.data)))}else{var A=!1,C=xt(this.globalScope)?void 0:[],q=f.hasCallback?function(pe,ve){A=!0,delete p.cancelCallbacks[o],p.target.postMessage({id:o,type:"<response>",sourceMapId:p.mapId,error:pe?U(pe):null,data:U(ve,C)},C)}:function(pe){A=!0},W=null,j=Z(f.data);if(this.parent[f.type])W=this.parent[f.type](f.sourceMapId,j,q);else if(this.parent.getWorkerSource){var Q=f.type.split("."),ie=this.parent.getWorkerSource(f.sourceMapId,Q[0],j.source);W=ie[Q[1]](j,q)}else q(new Error("Could not find function "+f.type));!A&&W&&W.cancel&&(this.cancelCallbacks[o]=W.cancel)}},y0.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function Dj(n,o,f){o=Math.pow(2,f)-o-1;var p=T7(n*256,o*256,f),x=T7((n+1)*256,(o+1)*256,f);return p[0]+","+p[1]+","+x[0]+","+x[1]}function T7(n,o,f){var p=2*Math.PI*6378137/256/Math.pow(2,f),x=n*p-2*Math.PI*6378137/2,A=o*p-2*Math.PI*6378137/2;return[x,A]}var An=function(o,f){o&&(f?this.setSouthWest(o).setNorthEast(f):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))};An.prototype.setNorthEast=function(o){return this._ne=o instanceof Hi?new Hi(o.lng,o.lat):Hi.convert(o),this},An.prototype.setSouthWest=function(o){return this._sw=o instanceof Hi?new Hi(o.lng,o.lat):Hi.convert(o),this},An.prototype.extend=function(o){var f=this._sw,p=this._ne,x,A;if(o instanceof Hi)x=o,A=o;else if(o instanceof An){if(x=o._sw,A=o._ne,!x||!A)return this}else{if(Array.isArray(o))if(o.length===4||o.every(Array.isArray)){var C=o;return this.extend(An.convert(C))}else{var q=o;return this.extend(Hi.convert(q))}return this}return!f&&!p?(this._sw=new Hi(x.lng,x.lat),this._ne=new Hi(A.lng,A.lat)):(f.lng=Math.min(x.lng,f.lng),f.lat=Math.min(x.lat,f.lat),p.lng=Math.max(A.lng,p.lng),p.lat=Math.max(A.lat,p.lat)),this},An.prototype.getCenter=function(){return new Hi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},An.prototype.getSouthWest=function(){return this._sw},An.prototype.getNorthEast=function(){return this._ne},An.prototype.getNorthWest=function(){return new Hi(this.getWest(),this.getNorth())},An.prototype.getSouthEast=function(){return new Hi(this.getEast(),this.getSouth())},An.prototype.getWest=function(){return this._sw.lng},An.prototype.getSouth=function(){return this._sw.lat},An.prototype.getEast=function(){return this._ne.lng},An.prototype.getNorth=function(){return this._ne.lat},An.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},An.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},An.prototype.isEmpty=function(){return!(this._sw&&this._ne)},An.prototype.contains=function(o){var f=Hi.convert(o),p=f.lng,x=f.lat,A=this._sw.lat<=x&&x<=this._ne.lat,C=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=p&&p>=this._ne.lng),A&&C},An.convert=function(o){return!o||o instanceof An?o:new An(o)};var A7=63710088e-1,Hi=function(o,f){if(isNaN(o)||isNaN(f))throw new Error("Invalid LngLat object: ("+o+", "+f+")");if(this.lng=+o,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Hi.prototype.wrap=function(){return new Hi(R(this.lng,-180,180),this.lat)},Hi.prototype.toArray=function(){return[this.lng,this.lat]},Hi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Hi.prototype.distanceTo=function(o){var f=Math.PI/180,p=this.lat*f,x=o.lat*f,A=Math.sin(p)*Math.sin(x)+Math.cos(p)*Math.cos(x)*Math.cos((o.lng-this.lng)*f),C=A7*Math.acos(Math.min(A,1));return C},Hi.prototype.toBounds=function(o){o===void 0&&(o=0);var f=40075017,p=360*o/f,x=p/Math.cos(Math.PI/180*this.lat);return new An(new Hi(this.lng-x,this.lat-p),new Hi(this.lng+x,this.lat+p))},Hi.convert=function(o){if(o instanceof Hi)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Hi(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Hi(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var M7=2*Math.PI*A7;function S7(n){return M7*Math.cos(n*Math.PI/180)}function k7(n){return(180+n)/360}function C7(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function E7(n,o){return n/S7(o)}function zj(n){return n*360-180}function J3(n){var o=180-n*360;return 360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}function Ij(n,o){return n*S7(J3(o))}function Rj(n){return 1/Math.cos(n*Math.PI/180)}var sd=function(o,f,p){p===void 0&&(p=0),this.x=+o,this.y=+f,this.z=+p};sd.fromLngLat=function(o,f){f===void 0&&(f=0);var p=Hi.convert(o);return new sd(k7(p.lng),C7(p.lat),E7(f,p.lat))},sd.prototype.toLngLat=function(){return new Hi(zj(this.x),J3(this.y))},sd.prototype.toAltitude=function(){return Ij(this.z,this.y)},sd.prototype.meterInMercatorCoordinateUnits=function(){return 1/M7*Rj(J3(this.y))};var ld=function(o,f,p){this.z=o,this.x=f,this.y=p,this.key=Iy(0,o,o,f,p)};ld.prototype.equals=function(o){return this.z===o.z&&this.x===o.x&&this.y===o.y},ld.prototype.url=function(o,f){var p=Dj(this.x,this.y,this.z),x=Fj(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",x).replace("{bbox-epsg-3857}",p)},ld.prototype.getTilePoint=function(o){var f=Math.pow(2,this.z);return new v((o.x*f-this.x)*qr,(o.y*f-this.y)*qr)},ld.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var L7=function(o,f){this.wrap=o,this.canonical=f,this.key=Iy(o,f.z,f.z,f.x,f.y)},Mn=function(o,f,p,x,A){this.overscaledZ=o,this.wrap=f,this.canonical=new ld(p,+x,+A),this.key=Iy(f,o,p,x,A)};Mn.prototype.equals=function(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)},Mn.prototype.scaledTo=function(o){var f=this.canonical.z-o;return o>this.canonical.z?new Mn(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mn(o,this.wrap,o,this.canonical.x>>f,this.canonical.y>>f)},Mn.prototype.calculateScaledKey=function(o,f){var p=this.canonical.z-o;return o>this.canonical.z?Iy(this.wrap*+f,o,this.canonical.z,this.canonical.x,this.canonical.y):Iy(this.wrap*+f,o,o,this.canonical.x>>p,this.canonical.y>>p)},Mn.prototype.isChildOf=function(o){if(o.wrap!==this.wrap)return!1;var f=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>f&&o.canonical.y===this.canonical.y>>f},Mn.prototype.children=function(o){if(this.overscaledZ>=o)return[new Mn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var f=this.canonical.z+1,p=this.canonical.x*2,x=this.canonical.y*2;return[new Mn(f,this.wrap,f,p,x),new Mn(f,this.wrap,f,p+1,x),new Mn(f,this.wrap,f,p,x+1),new Mn(f,this.wrap,f,p+1,x+1)]},Mn.prototype.isLessThan=function(o){return this.wrap<o.wrap?!0:this.wrap>o.wrap?!1:this.overscaledZ<o.overscaledZ?!0:this.overscaledZ>o.overscaledZ?!1:this.canonical.x<o.canonical.x?!0:this.canonical.x>o.canonical.x?!1:this.canonical.y<o.canonical.y},Mn.prototype.wrapped=function(){return new Mn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Mn.prototype.unwrapTo=function(o){return new Mn(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)},Mn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Mn.prototype.toUnwrapped=function(){return new L7(this.wrap,this.canonical)},Mn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Mn.prototype.getTilePoint=function(o){return this.canonical.getTilePoint(new sd(o.x-this.wrap,o.y))};function Iy(n,o,f,p,x){n*=2,n<0&&(n=n*-1-1);var A=1<<f;return(A*A*n+A*x+p).toString(36)+f.toString(36)+o.toString(36)}function Fj(n,o,f){for(var p="",x,A=n;A>0;A--)x=1<<A-1,p+=(o&x?1:0)+(f&x?2:0);return p}y("CanonicalTileID",ld),y("OverscaledTileID",Mn,{omit:["posMatrix"]});var cc=function(o,f,p){if(this.uid=o,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return Ae('"'+p+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=f.height;var x=this.dim=f.height-2;this.data=new Uint32Array(f.data.buffer),this.encoding=p||"mapbox";for(var A=0;A<x;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(x,A)]=this.data[this._idx(x-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,x)]=this.data[this._idx(A,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)],this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)],this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)]};cc.prototype.get=function(o,f){var p=new Uint8Array(this.data.buffer),x=this._idx(o,f)*4,A=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return A(p[x],p[x+1],p[x+2])},cc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},cc.prototype._idx=function(o,f){if(o<-1||o>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(o+1)},cc.prototype._unpackMapbox=function(o,f,p){return(o*256*256+f*256+p)/10-1e4},cc.prototype._unpackTerrarium=function(o,f,p){return o*256+f+p/256-32768},cc.prototype.getPixels=function(){return new rs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},cc.prototype.backfillBorder=function(o,f,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");var x=f*this.dim,A=f*this.dim+this.dim,C=p*this.dim,q=p*this.dim+this.dim;switch(f){case-1:x=A-1;break;case 1:A=x+1;break}switch(p){case-1:C=q-1;break;case 1:q=C+1;break}for(var W=-f*this.dim,j=-p*this.dim,Q=C;Q<q;Q++)for(var ie=x;ie<A;ie++)this.data[this._idx(ie,Q)]=o.data[this._idx(ie+W,Q+j)]},y("DEMData",cc);function qj(n,o){var f={};if(!o)return f;for(var p=function(){var C=A[x],q=C.layerIds.map(function(ie){return o.getLayer(ie)}).filter(Boolean);if(q.length!==0){C.layers=q,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(function(ie){return q.filter(function(pe){return pe.id===ie})[0]}));for(var W=0,j=q;W<j.length;W+=1){var Q=j[W];f[Q.id]=C}}},x=0,A=n;x<A.length;x+=1)p();return f}var r_=function(o){this._stringToNumber={},this._numberToString=[];for(var f=0;f<o.length;f++){var p=o[f];this._stringToNumber[p]=f,this._numberToString[f]=p}};r_.prototype.encode=function(o){return this._stringToNumber[o]},r_.prototype.decode=function(o){return this._numberToString[o]};var a_=function(o,f,p,x,A){this.type="Feature",this._vectorTileFeature=o,o._z=f,o._x=p,o._y=x,this.properties=o.properties,this.id=A},K3={geometry:{configurable:!0}};K3.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},K3.geometry.set=function(n){this._geometry=n},a_.prototype.toJSON=function(){var o={geometry:this.geometry};for(var f in this)f==="_geometry"||f==="_vectorTileFeature"||(o[f]=this[f]);return o},Object.defineProperties(a_.prototype,K3);var g0=function(){this.state={},this.stateChanges={},this.deletedStates={}};g0.prototype.updateState=function(o,f,p){var x=String(f);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][x]=this.stateChanges[o][x]||{},H(this.stateChanges[o][x],p),this.deletedStates[o]===null){this.deletedStates[o]={};for(var A in this.state[o])A!==x&&(this.deletedStates[o][A]=null)}else{var C=this.deletedStates[o]&&this.deletedStates[o][x]===null;if(C){this.deletedStates[o][x]={};for(var q in this.state[o][x])p[q]||(this.deletedStates[o][x][q]=null)}else for(var W in p){var j=this.deletedStates[o]&&this.deletedStates[o][x]&&this.deletedStates[o][x][W]===null;j&&delete this.deletedStates[o][x][W]}}},g0.prototype.removeFeatureState=function(o,f,p){var x=this.deletedStates[o]===null;if(!x){var A=String(f);if(this.deletedStates[o]=this.deletedStates[o]||{},p&&f!==void 0)this.deletedStates[o][A]!==null&&(this.deletedStates[o][A]=this.deletedStates[o][A]||{},this.deletedStates[o][A][p]=null);else if(f!==void 0){var C=this.stateChanges[o]&&this.stateChanges[o][A];if(C){this.deletedStates[o][A]={};for(p in this.stateChanges[o][A])this.deletedStates[o][A][p]=null}else this.deletedStates[o][A]=null}else this.deletedStates[o]=null}},g0.prototype.getState=function(o,f){var p=String(f),x=this.state[o]||{},A=this.stateChanges[o]||{},C=H({},x[p],A[p]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){var q=this.deletedStates[o][f];if(q===null)return{};for(var W in q)delete C[W]}return C},g0.prototype.initializeTileState=function(o,f){o.setFeatureState(this.state,f)},g0.prototype.coalesceChanges=function(o,f){var p={};for(var x in this.stateChanges){this.state[x]=this.state[x]||{};var A={};for(var C in this.stateChanges[x])this.state[x][C]||(this.state[x][C]={}),H(this.state[x][C],this.stateChanges[x][C]),A[C]=this.state[x][C];p[x]=A}for(var q in this.deletedStates){this.state[q]=this.state[q]||{};var W={};if(this.deletedStates[q]===null)for(var j in this.state[q])W[j]={},this.state[q][j]={};else for(var Q in this.deletedStates[q]){var ie=this.deletedStates[q][Q]===null;if(ie)this.state[q][Q]={};else for(var pe=0,ve=Object.keys(this.deletedStates[q][Q]);pe<ve.length;pe+=1){var ke=ve[pe];delete this.state[q][Q][ke]}W[Q]=this.state[q][Q]}p[q]=p[q]||{},H(p[q],W)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(var qe in o){var st=o[qe];st.setFeatureState(p,f)}};var hc=function(o,f){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new _f(qr,16,0),this.grid3D=new _f(qr,16,0),this.featureIndexArray=new N1,this.promoteId=f};hc.prototype.insert=function(o,f,p,x,A,C){var q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,x,A);for(var W=C?this.grid3D:this.grid,j=0;j<f.length;j++){for(var Q=f[j],ie=[1/0,1/0,-1/0,-1/0],pe=0;pe<Q.length;pe++){var ve=Q[pe];ie[0]=Math.min(ie[0],ve.x),ie[1]=Math.min(ie[1],ve.y),ie[2]=Math.max(ie[2],ve.x),ie[3]=Math.max(ie[3],ve.y)}ie[0]<qr&&ie[1]<qr&&ie[2]>=0&&ie[3]>=0&&W.insert(q,ie[0],ie[1],ie[2],ie[3])}},hc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new o0.VectorTile(new Y1(this.rawTileData)).layers,this.sourceLayerCoder=new r_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},hc.prototype.query=function(o,f,p,x){var A=this;this.loadVTLayers();for(var C=o.params||{},q=qr/o.tileSize/o.scale,W=df(C.filter),j=o.queryGeometry,Q=o.queryPadding*q,ie=D7(j),pe=this.grid.query(ie.minX-Q,ie.minY-Q,ie.maxX+Q,ie.maxY+Q),ve=D7(o.cameraQueryGeometry),ke=this.grid3D.query(ve.minX-Q,ve.minY-Q,ve.maxX+Q,ve.maxY+Q,function(Jt,hr,ur,Rr){return Zl(o.cameraQueryGeometry,Jt-Q,hr-Q,ur+Q,Rr+Q)}),qe=0,st=ke;qe<st.length;qe+=1){var Qe=st[qe];pe.push(Qe)}pe.sort(Nj);for(var Lt={},_t,St=function(Jt){var hr=pe[Jt];if(hr!==_t){_t=hr;var ur=A.featureIndexArray.get(hr),Rr=null;A.loadMatchingFeature(Lt,ur.bucketIndex,ur.sourceLayerIndex,ur.featureIndex,W,C.layers,C.availableImages,f,p,x,function(kr,zr,Qr){return Rr||(Rr=Va(kr)),zr.queryIntersectsFeature(j,kr,Qr,Rr,A.z,o.transform,q,o.pixelPosMatrix)})}},It=0;It<pe.length;It++)St(It);return Lt},hc.prototype.loadMatchingFeature=function(o,f,p,x,A,C,q,W,j,Q,ie){var pe=this.bucketLayerIDs[f];if(!(C&&!_e(C,pe))){var ve=this.sourceLayerCoder.decode(p),ke=this.vtLayers[ve],qe=ke.feature(x);if(A.needGeometry){var st=Ai(qe,!0);if(!A.filter(new jt(this.tileID.overscaledZ),st,this.tileID.canonical))return}else if(!A.filter(new jt(this.tileID.overscaledZ),qe))return;for(var Qe=this.getId(qe,ve),Lt=0;Lt<pe.length;Lt++){var _t=pe[Lt];if(!(C&&C.indexOf(_t)<0)){var St=W[_t];if(St){var It={};Qe!==void 0&&Q&&(It=Q.getState(St.sourceLayer||"_geojsonTileLayer",Qe));var Jt=H({},j[_t]);Jt.paint=P7(Jt.paint,St.paint,qe,It,q),Jt.layout=P7(Jt.layout,St.layout,qe,It,q);var hr=!ie||ie(qe,St,It);if(hr){var ur=new a_(qe,this.z,this.x,this.y,Qe);ur.layer=Jt;var Rr=o[_t];Rr===void 0&&(Rr=o[_t]=[]),Rr.push({featureIndex:x,feature:ur,intersectionZ:hr})}}}}}},hc.prototype.lookupSymbolFeatures=function(o,f,p,x,A,C,q,W){var j={};this.loadVTLayers();for(var Q=df(A),ie=0,pe=o;ie<pe.length;ie+=1){var ve=pe[ie];this.loadMatchingFeature(j,p,x,ve,Q,C,q,W,f)}return j},hc.prototype.hasLayer=function(o){for(var f=0,p=this.bucketLayerIDs;f<p.length;f+=1)for(var x=p[f],A=0,C=x;A<C.length;A+=1){var q=C[A];if(o===q)return!0}return!1},hc.prototype.getId=function(o,f){var p=o.id;if(this.promoteId){var x=typeof this.promoteId=="string"?this.promoteId:this.promoteId[f];p=o.properties[x],typeof p=="boolean"&&(p=Number(p))}return p},y("FeatureIndex",hc,{omit:["rawTileData","sourceLayerCoder"]});function P7(n,o,f,p,x){return Se(n,function(A,C){var q=o instanceof bn?o.get(C):null;return q&&q.evaluate?q.evaluate(f,p,x):q})}function D7(n){for(var o=1/0,f=1/0,p=-1/0,x=-1/0,A=0,C=n;A<C.length;A+=1){var q=C[A];o=Math.min(o,q.x),f=Math.min(f,q.y),p=Math.max(p,q.x),x=Math.max(x,q.y)}return{minX:o,minY:f,maxX:p,maxY:x}}function Nj(n,o){return o-n}var Bj=3e4,Yn=function(o,f){this.tileID=o,this.uid=J(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Yn.prototype.registerFadeDuration=function(o){var f=o+this.timeAdded;f<vt.now()||this.fadeEndTime&&f<this.fadeEndTime||(this.fadeEndTime=f)},Yn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Yn.prototype.loadVectorData=function(o,f,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!o){this.collisionBoxArray=new gy;return}o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=qj(o.buckets,f.style),this.hasSymbolBuckets=!1;for(var x in this.buckets){var A=this.buckets[x];if(A instanceof yi)if(this.hasSymbolBuckets=!0,p)A.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var C in this.buckets){var q=this.buckets[C];if(q instanceof yi&&q.hasRTLText){this.hasRTLText=!0,$a();break}}this.queryPadding=0;for(var W in this.buckets){var j=this.buckets[W];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(W).queryRadius(j))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)},Yn.prototype.unloadVectorData=function(){for(var o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Yn.prototype.getBucket=function(o){return this.buckets[o.id]},Yn.prototype.upload=function(o){for(var f in this.buckets){var p=this.buckets[f];p.uploadPending()&&p.upload(o)}var x=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new od(o,this.imageAtlas.image,x.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new od(o,this.glyphAtlasImage,x.ALPHA),this.glyphAtlasImage=null)},Yn.prototype.prepare=function(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)},Yn.prototype.queryRenderedFeatures=function(o,f,p,x,A,C,q,W,j,Q){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:A,scale:C,tileSize:this.tileSize,pixelPosMatrix:Q,transform:W,params:q,queryPadding:this.queryPadding*j},o,f,p)},Yn.prototype.querySourceFeatures=function(o,f){var p=this.latestFeatureIndex;if(!(!p||!p.rawTileData)){var x=p.loadVTLayers(),A=f?f.sourceLayer:"",C=x._geojsonTileLayer||x[A];if(C)for(var q=df(f&&f.filter),W=this.tileID.canonical,j=W.z,Q=W.x,ie=W.y,pe={z:j,x:Q,y:ie},ve=0;ve<C.length;ve++){var ke=C.feature(ve);if(q.needGeometry){var qe=Ai(ke,!0);if(!q.filter(new jt(this.tileID.overscaledZ),qe,this.tileID.canonical))continue}else if(!q.filter(new jt(this.tileID.overscaledZ),ke))continue;var st=p.getId(ke,A),Qe=new a_(ke,j,Q,ie,st);Qe.tile=pe,o.push(Qe)}}},Yn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Yn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Yn.prototype.setExpiryData=function(o){var f=this.expirationTime;if(o.cacheControl){var p=ut(o.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+p["max-age"]*1e3)}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){var x=Date.now(),A=!1;if(this.expirationTime>x)A=!1;else if(!f)A=!0;else if(this.expirationTime<f)A=!0;else{var C=this.expirationTime-f;C?this.expirationTime=x+Math.max(C,Bj):A=!0}A?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Yn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Yn.prototype.setFeatureState=function(o,f){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)){var p=this.latestFeatureIndex.loadVTLayers();for(var x in this.buckets)if(f.style.hasLayer(x)){var A=this.buckets[x],C=A.layers[0].sourceLayer||"_geojsonTileLayer",q=p[C],W=o[C];if(!(!q||!W||Object.keys(W).length===0)){A.update(W,q,this.imageAtlas&&this.imageAtlas.patternPositions||{});var j=f&&f.style&&f.style.getLayer(x);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(A)))}}}},Yn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Yn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<vt.now()},Yn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Yn.prototype.setHoldDuration=function(o){this.symbolFadeHoldUntil=vt.now()+o},Yn.prototype.setDependencies=function(o,f){for(var p={},x=0,A=f;x<A.length;x+=1){var C=A[x];p[C]=!0}this.dependencies[o]=p},Yn.prototype.hasDependency=function(o,f){for(var p=0,x=o;p<x.length;p+=1){var A=x[p],C=this.dependencies[A];if(C)for(var q=0,W=f;q<W.length;q+=1){var j=W[q];if(C[j])return!0}}return!1};var Oj=["type","source","source-layer","minzoom","maxzoom","filter","layout"],wh=_.performance,z7=function(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},wh.mark(this._marks.start)};z7.prototype.finish=function(){wh.mark(this._marks.end);var o=wh.getEntriesByName(this._marks.measure);return o.length===0&&(wh.measure(this._marks.measure,this._marks.start,this._marks.end),o=wh.getEntriesByName(this._marks.measure),wh.clearMarks(this._marks.start),wh.clearMarks(this._marks.end),wh.clearMeasures(this._marks.measure)),o},a.Actor=y0,a.AlphaImage=nd,a.CanonicalTileID=ld,a.CollisionBoxArray=gy,a.Color=ni,a.DEMData=cc,a.DataConstantProperty=wr,a.DictionaryCoder=r_,a.EXTENT=qr,a.ErrorEvent=Wr,a.EvaluationParameters=jt,a.Event=ii,a.Evented=yr,a.FeatureIndex=hc,a.FillBucket=Iu,a.FillExtrusionBucket=Ru,a.ImageAtlas=Ly,a.ImagePosition=X1,a.LineBucket=Io,a.LngLat=Hi,a.LngLatBounds=An,a.MercatorCoordinate=sd,a.ONE_EM=eo,a.OverscaledTileID=Mn,a.Point=v,a.Point$1=v,a.Properties=Rn,a.Protobuf=Y1,a.RGBAImage=rs,a.RequestManager=Ne,a.RequestPerformance=z7,a.ResourceType=vi,a.SegmentVector=wn,a.SourceFeatureState=g0,a.StructArrayLayout1ui2=dh,a.StructArrayLayout2f1f2i16=Pu,a.StructArrayLayout2i4=oc,a.StructArrayLayout3ui6=Du,a.StructArrayLayout4i8=dy,a.SymbolBucket=yi,a.Texture=od,a.Tile=Yn,a.Transitionable=la,a.Uniform1f=Ye,a.Uniform1i=Ie,a.Uniform2f=Ze,a.Uniform3f=Oe,a.Uniform4f=Xe,a.UniformColor=ht,a.UniformMatrix4f=qt,a.UnwrappedTileID=L7,a.ValidationError=Or,a.WritingMode=Ns,a.ZoomHistory=$,a.add=a0,a.addDynamicAttributes=W3,a.asyncAll=N,a.bezier=L,a.bindAll=ue,a.browser=vt,a.cacheEntryPossiblyAdded=Pn,a.clamp=I,a.clearTileCache=pa,a.clipLine=v7,a.clone=e0,a.clone$1=Me,a.clone$2=k3,a.collisionCircleLayout=xX,a.config=tt,a.create=$p,a.create$1=bo,a.create$2=Qp,a.createCommonjsModule=s,a.createExpression=ac,a.createLayout=ui,a.createStyleLayer=Pj,a.cross=GY,a.deepEqual=T,a.dot=HY,a.dot$1=jY,a.ease=E,a.emitValidationErrors=nc,a.endsWith=me,a.enforceCacheSizeLimit=Gi,a.evaluateSizeForFeature=o7,a.evaluateSizeForZoom=s7,a.evaluateVariableOffset=m7,a.evented=Ir,a.extend=H,a.featureFilter=df,a.filterObject=Ce,a.fromRotation=yh,a.getAnchorAlignment=H3,a.getAnchorJustification=Y3,a.getArrayBuffer=rt,a.getImage=Br,a.getJSON=Be,a.getRTLTextPluginStatus=ta,a.getReferrer=le,a.getVideo=ca,a.identity=t0,a.invert=gh,a.isChar=X,a.isMapboxURL=ft,a.keysDifference=B,a.makeRequest=Ee,a.mapObject=Se,a.mercatorXfromLng=k7,a.mercatorYfromLat=C7,a.mercatorZfromAltitude=E7,a.mul=S3,a.multiply=_h,a.mvt=o0,a.nextPowerOfTwo=ne,a.normalize=by,a.number=fn,a.offscreenCanvasSupported=Zr,a.ortho=M3,a.parseGlyphPBF=WX,a.pbf=Y1,a.performSymbolLayout=cj,a.perspective=xy,a.pick=V,a.plugin=ri,a.polygonIntersectsPolygon=na,a.postMapLoadEvent=bt,a.postTurnstileEvent=Fe,a.potpack=QM,a.refProperties=Oj,a.register=y,a.registerForPluginStateChange=Ur,a.renderColorRamp=LM,a.rotate=ad,a.rotateX=ts,a.rotateZ=r0,a.scale=es,a.scale$1=XY,a.scale$2=E3,a.setCacheLimits=Gr,a.setRTLTextPlugin=Kr,a.sphericalToCartesian=ct,a.sqrLen=QY,a.styleSpec=Xt,a.sub=YY,a.symbolSize=rj,a.transformMat3=ZY,a.transformMat4=O1,a.translate=sn,a.triggerPluginCompletionEvent=lr,a.uniqueId=J,a.validateCustomStyleLayer=Cj,a.validateLight=fi,a.validateStyle=ti,a.values=z,a.vectorTile=o0,a.version=l,a.warnOnce=Ae,a.webpSupported=Bt,a.window=_,a.wrap=R}),i(["./shared"],function(a){"use strict";function s(le){var ee=typeof le;if(ee==="number"||ee==="boolean"||ee==="string"||le===void 0||le===null)return JSON.stringify(le);if(Array.isArray(le)){for(var se="[",ce=0,Ee=le;ce<Ee.length;ce+=1){var Be=Ee[ce];se+=s(Be)+","}return se+"]"}for(var rt=Object.keys(le).sort(),Ve="{",yt=0;yt<rt.length;yt++)Ve+=JSON.stringify(rt[yt])+":"+s(le[rt[yt]])+",";return Ve+"}"}function l(le){for(var ee="",se=0,ce=a.refProperties;se<ce.length;se+=1){var Ee=ce[se];ee+="/"+s(le[Ee])}return ee}function u(le,ee){for(var se={},ce=0;ce<le.length;ce++){var Ee=ee&&ee[le[ce].id]||l(le[ce]);ee&&(ee[le[ce].id]=Ee);var Be=se[Ee];Be||(Be=se[Ee]=[]),Be.push(le[ce])}var rt=[];for(var Ve in se)rt.push(se[Ve]);return rt}var c=function(ee){this.keyCache={},ee&&this.replace(ee)};c.prototype.replace=function(ee){this._layerConfigs={},this._layers={},this.update(ee,[])},c.prototype.update=function(ee,se){for(var ce=this,Ee=0,Be=ee;Ee<Be.length;Ee+=1){var rt=Be[Ee];this._layerConfigs[rt.id]=rt;var Ve=this._layers[rt.id]=a.createStyleLayer(rt);Ve._featureFilter=a.featureFilter(Ve.filter),this.keyCache[rt.id]&&delete this.keyCache[rt.id]}for(var yt=0,Dt=se;yt<Dt.length;yt+=1){var Ft=Dt[yt];delete this.keyCache[Ft],delete this._layerConfigs[Ft],delete this._layers[Ft]}this.familiesBySource={};for(var tr=u(a.values(this._layerConfigs),this.keyCache),Wt=0,Tr=tr;Wt<Tr.length;Wt+=1){var Yr=Tr[Wt],Br=Yr.map(function(yr){return ce._layers[yr.id]}),ca=Br[0];if(ca.visibility!=="none"){var ua=ca.source||"",Na=this.familiesBySource[ua];Na||(Na=this.familiesBySource[ua]={});var ii=ca.sourceLayer||"_geojsonTileLayer",Wr=Na[ii];Wr||(Wr=Na[ii]=[]),Wr.push(Br)}}};var v=1,m=function(ee){var se={},ce=[];for(var Ee in ee){var Be=ee[Ee],rt=se[Ee]={};for(var Ve in Be){var yt=Be[+Ve];if(!(!yt||yt.bitmap.width===0||yt.bitmap.height===0)){var Dt={x:0,y:0,w:yt.bitmap.width+2*v,h:yt.bitmap.height+2*v};ce.push(Dt),rt[Ve]={rect:Dt,metrics:yt.metrics}}}}var Ft=a.potpack(ce),tr=Ft.w,Wt=Ft.h,Tr=new a.AlphaImage({width:tr||1,height:Wt||1});for(var Yr in ee){var Br=ee[Yr];for(var ca in Br){var ua=Br[+ca];if(!(!ua||ua.bitmap.width===0||ua.bitmap.height===0)){var Na=se[Yr][ca].rect;a.AlphaImage.copy(ua.bitmap,Tr,{x:0,y:0},{x:Na.x+v,y:Na.y+v},ua.bitmap)}}}this.image=Tr,this.positions=se};a.register("GlyphAtlas",m);var _=function(ee){this.tileID=new a.OverscaledTileID(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId};_.prototype.parse=function(ee,se,ce,Ee,Be){var rt=this;this.status="parsing",this.data=ee,this.collisionBoxArray=new a.CollisionBoxArray;var Ve=new a.DictionaryCoder(Object.keys(ee.layers).sort()),yt=new a.FeatureIndex(this.tileID,this.promoteId);yt.bucketLayerIDs=[];var Dt={},Ft={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ce},tr=se.familiesBySource[this.source];for(var Wt in tr){var Tr=ee.layers[Wt];if(Tr){Tr.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Wt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Yr=Ve.encode(Wt),Br=[],ca=0;ca<Tr.length;ca++){var ua=Tr.feature(ca),Na=yt.getId(ua,Wt);Br.push({feature:ua,id:Na,index:ca,sourceLayerIndex:Yr})}for(var ii=0,Wr=tr[Wt];ii<Wr.length;ii+=1){var yr=Wr[ii],ea=yr[0];if(!(ea.minzoom&&this.zoom<Math.floor(ea.minzoom))&&!(ea.maxzoom&&this.zoom>=ea.maxzoom)&&ea.visibility!=="none"){T(yr,this.zoom,ce);var _a=Dt[ea.id]=ea.createBucket({index:yt.bucketLayerIDs.length,layers:yr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yr,sourceID:this.source});_a.populate(Br,Ft,this.tileID.canonical),yt.bucketLayerIDs.push(yr.map(function(Ya){return Ya.id}))}}}}var nr,wi,Da,si,fa=a.mapObject(Ft.glyphDependencies,function(Ya){return Object.keys(Ya).map(Number)});Object.keys(fa).length?Ee.send("getGlyphs",{uid:this.uid,stacks:fa},function(Ya,$n){nr||(nr=Ya,wi=$n,Ms.call(rt))}):wi={};var Dn=Object.keys(Ft.iconDependencies);Dn.length?Ee.send("getImages",{icons:Dn,source:this.source,tileID:this.tileID,type:"icons"},function(Ya,$n){nr||(nr=Ya,Da=$n,Ms.call(rt))}):Da={};var Eo=Object.keys(Ft.patternDependencies);Eo.length?Ee.send("getImages",{icons:Eo,source:this.source,tileID:this.tileID,type:"patterns"},function(Ya,$n){nr||(nr=Ya,si=$n,Ms.call(rt))}):si={},Ms.call(this);function Ms(){if(nr)return Be(nr);if(wi&&Da&&si){var Ya=new m(wi),$n=new a.ImageAtlas(Da,si);for(var gu in Dt){var Ui=Dt[gu];Ui instanceof a.SymbolBucket?(T(Ui.layers,this.zoom,ce),a.performSymbolLayout(Ui,wi,Ya.positions,Da,$n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ui.hasPattern&&(Ui instanceof a.LineBucket||Ui instanceof a.FillBucket||Ui instanceof a.FillExtrusionBucket)&&(T(Ui.layers,this.zoom,ce),Ui.addFeatures(Ft,this.tileID.canonical,$n.patternPositions))}this.status="done",Be(null,{buckets:a.values(Dt).filter(function(gl){return!gl.isEmpty()}),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ya.image,imageAtlas:$n,glyphMap:this.returnDependencies?wi:null,iconMap:this.returnDependencies?Da:null,glyphPositions:this.returnDependencies?Ya.positions:null})}}};function T(le,ee,se){for(var ce=new a.EvaluationParameters(ee),Ee=0,Be=le;Ee<Be.length;Ee+=1){var rt=Be[Ee];rt.recalculate(ce,se)}}function M(le,ee){var se=a.getArrayBuffer(le.request,function(ce,Ee,Be,rt){ce?ee(ce):Ee&&ee(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Ee)),rawData:Ee,cacheControl:Be,expires:rt})});return function(){se.cancel(),ee()}}var k=function(ee,se,ce,Ee){this.actor=ee,this.layerIndex=se,this.availableImages=ce,this.loadVectorData=Ee||M,this.loading={},this.loaded={}};k.prototype.loadTile=function(ee,se){var ce=this,Ee=ee.uid;this.loading||(this.loading={});var Be=ee&&ee.request&&ee.request.collectResourceTiming?new a.RequestPerformance(ee.request):!1,rt=this.loading[Ee]=new _(ee);rt.abort=this.loadVectorData(ee,function(Ve,yt){if(delete ce.loading[Ee],Ve||!yt)return rt.status="done",ce.loaded[Ee]=rt,se(Ve);var Dt=yt.rawData,Ft={};yt.expires&&(Ft.expires=yt.expires),yt.cacheControl&&(Ft.cacheControl=yt.cacheControl);var tr={};if(Be){var Wt=Be.finish();Wt&&(tr.resourceTiming=JSON.parse(JSON.stringify(Wt)))}rt.vectorTile=yt.vectorTile,rt.parse(yt.vectorTile,ce.layerIndex,ce.availableImages,ce.actor,function(Tr,Yr){if(Tr||!Yr)return se(Tr);se(null,a.extend({rawTileData:Dt.slice(0)},Yr,Ft,tr))}),ce.loaded=ce.loaded||{},ce.loaded[Ee]=rt})},k.prototype.reloadTile=function(ee,se){var ce=this,Ee=this.loaded,Be=ee.uid,rt=this;if(Ee&&Ee[Be]){var Ve=Ee[Be];Ve.showCollisionBoxes=ee.showCollisionBoxes;var yt=function(Dt,Ft){var tr=Ve.reloadCallback;tr&&(delete Ve.reloadCallback,Ve.parse(Ve.vectorTile,rt.layerIndex,ce.availableImages,rt.actor,tr)),se(Dt,Ft)};Ve.status==="parsing"?Ve.reloadCallback=yt:Ve.status==="done"&&(Ve.vectorTile?Ve.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,yt):yt())}},k.prototype.abortTile=function(ee,se){var ce=this.loading,Ee=ee.uid;ce&&ce[Ee]&&ce[Ee].abort&&(ce[Ee].abort(),delete ce[Ee]),se()},k.prototype.removeTile=function(ee,se){var ce=this.loaded,Ee=ee.uid;ce&&ce[Ee]&&delete ce[Ee],se()};var L=a.window.ImageBitmap,E=function(){this.loaded={}};E.prototype.loadTile=function(ee,se){var ce=ee.uid,Ee=ee.encoding,Be=ee.rawImageData,rt=L&&Be instanceof L?this.getImageData(Be):Be,Ve=new a.DEMData(ce,rt,Ee);this.loaded=this.loaded||{},this.loaded[ce]=Ve,se(null,Ve)},E.prototype.getImageData=function(ee){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);var se=this.offscreenCanvasContext.getImageData(-1,-1,ee.width+2,ee.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:se.width,height:se.height},se.data)},E.prototype.removeTile=function(ee){var se=this.loaded,ce=ee.uid;se&&se[ce]&&delete se[ce]};var I=R;function R(le,ee){var se=le&&le.type,ce;if(se==="FeatureCollection")for(ce=0;ce<le.features.length;ce++)R(le.features[ce],ee);else if(se==="GeometryCollection")for(ce=0;ce<le.geometries.length;ce++)R(le.geometries[ce],ee);else if(se==="Feature")R(le.geometry,ee);else if(se==="Polygon")N(le.coordinates,ee);else if(se==="MultiPolygon")for(ce=0;ce<le.coordinates.length;ce++)N(le.coordinates[ce],ee);return le}function N(le,ee){if(le.length!==0){z(le[0],ee);for(var se=1;se<le.length;se++)z(le[se],!ee)}}function z(le,ee){for(var se=0,ce=0,Ee=le.length,Be=Ee-1;ce<Ee;Be=ce++)se+=(le[ce][0]-le[Be][0])*(le[Be][1]+le[ce][1]);se>=0!=!!ee&&le.reverse()}var B=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,H=function(ee){this._feature=ee,this.extent=a.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))};H.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ee=[],se=0,ce=this._feature.geometry;se<ce.length;se+=1){var Ee=ce[se];ee.push([new a.Point$1(Ee[0],Ee[1])])}return ee}else{for(var Be=[],rt=0,Ve=this._feature.geometry;rt<Ve.length;rt+=1){for(var yt=Ve[rt],Dt=[],Ft=0,tr=yt;Ft<tr.length;Ft+=1){var Wt=tr[Ft];Dt.push(new a.Point$1(Wt[0],Wt[1]))}Be.push(Dt)}return Be}},H.prototype.toGeoJSON=function(ee,se,ce){return B.call(this,ee,se,ce)};var V=function(ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=ee.length,this._features=ee};V.prototype.feature=function(ee){return new H(this._features[ee])};var Y=a.vectorTile.VectorTileFeature,J=re;function re(le,ee){this.options=ee||{},this.features=le,this.length=le.length}re.prototype.feature=function(le){return new ne(this.features[le],this.options.extent)};function ne(le,ee){this.id=typeof le.id=="number"?le.id:void 0,this.type=le.type,this.rawGeometry=le.type===1?[le.geometry]:le.geometry,this.properties=le.tags,this.extent=ee||4096}ne.prototype.loadGeometry=function(){var le=this.rawGeometry;this.geometry=[];for(var ee=0;ee<le.length;ee++){for(var se=le[ee],ce=[],Ee=0;Ee<se.length;Ee++)ce.push(new a.Point$1(se[Ee][0],se[Ee][1]));this.geometry.push(ce)}return this.geometry},ne.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var le=this.geometry,ee=1/0,se=-1/0,ce=1/0,Ee=-1/0,Be=0;Be<le.length;Be++)for(var rt=le[Be],Ve=0;Ve<rt.length;Ve++){var yt=rt[Ve];ee=Math.min(ee,yt.x),se=Math.max(se,yt.x),ce=Math.min(ce,yt.y),Ee=Math.max(Ee,yt.y)}return[ee,ce,se,Ee]},ne.prototype.toGeoJSON=Y.prototype.toGeoJSON;var oe=Ce,ue=Ce,me=Me,Se=J;function Ce(le){var ee=new a.pbf;return _e(le,ee),ee.finish()}function Me(le,ee){ee=ee||{};var se={};for(var ce in le)se[ce]=new J(le[ce].features,ee),se[ce].name=ce,se[ce].version=ee.version,se[ce].extent=ee.extent;return Ce({layers:se})}function _e(le,ee){for(var se in le.layers)ee.writeMessage(3,Te,le.layers[se])}function Te(le,ee){ee.writeVarintField(15,le.version||1),ee.writeStringField(1,le.name||""),ee.writeVarintField(5,le.extent||4096);var se,ce={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<le.length;se++)ce.feature=le.feature(se),ee.writeMessage(2,Ae,ce);var Ee=ce.keys;for(se=0;se<Ee.length;se++)ee.writeStringField(3,Ee[se]);var Be=ce.values;for(se=0;se<Be.length;se++)ee.writeMessage(4,ut,Be[se])}function Ae(le,ee){var se=le.feature;se.id!==void 0&&ee.writeVarintField(1,se.id),ee.writeMessage(2,Le,le),ee.writeVarintField(3,se.type),ee.writeMessage(4,it,se)}function Le(le,ee){var se=le.feature,ce=le.keys,Ee=le.values,Be=le.keycache,rt=le.valuecache;for(var Ve in se.properties){var yt=Be[Ve];typeof yt=="undefined"&&(ce.push(Ve),yt=ce.length-1,Be[Ve]=yt),ee.writeVarint(yt);var Dt=se.properties[Ve],Ft=typeof Dt;Ft!=="string"&&Ft!=="boolean"&&Ft!=="number"&&(Dt=JSON.stringify(Dt));var tr=Ft+":"+Dt,Wt=rt[tr];typeof Wt=="undefined"&&(Ee.push(Dt),Wt=Ee.length-1,rt[tr]=Wt),ee.writeVarint(Wt)}}function Ke(le,ee){return(ee<<3)+(le&7)}function ct(le){return le<<1^le>>31}function it(le,ee){for(var se=le.loadGeometry(),ce=le.type,Ee=0,Be=0,rt=se.length,Ve=0;Ve<rt;Ve++){var yt=se[Ve],Dt=1;ce===1&&(Dt=yt.length),ee.writeVarint(Ke(1,Dt));for(var Ft=ce===3?yt.length-1:yt.length,tr=0;tr<Ft;tr++){tr===1&&ce!==1&&ee.writeVarint(Ke(2,Ft-1));var Wt=yt[tr].x-Ee,Tr=yt[tr].y-Be;ee.writeVarint(ct(Wt)),ee.writeVarint(ct(Tr)),Ee+=Wt,Be+=Tr}ce===3&&ee.writeVarint(Ke(7,1))}}function ut(le,ee){var se=typeof le;se==="string"?ee.writeStringField(1,le):se==="boolean"?ee.writeBooleanField(7,le):se==="number"&&(le%1!==0?ee.writeDoubleField(3,le):le<0?ee.writeSVarintField(6,le):ee.writeVarintField(5,le))}oe.fromVectorTileJs=ue,oe.fromGeojsonVt=me,oe.GeoJSONWrapper=Se;function Ge(le,ee,se,ce,Ee,Be){if(!(Ee-ce<=se)){var rt=ce+Ee>>1;xt(le,ee,rt,ce,Ee,Be%2),Ge(le,ee,se,ce,rt-1,Be+1),Ge(le,ee,se,rt+1,Ee,Be+1)}}function xt(le,ee,se,ce,Ee,Be){for(;Ee>ce;){if(Ee-ce>600){var rt=Ee-ce+1,Ve=se-ce+1,yt=Math.log(rt),Dt=.5*Math.exp(2*yt/3),Ft=.5*Math.sqrt(yt*Dt*(rt-Dt)/rt)*(Ve-rt/2<0?-1:1),tr=Math.max(ce,Math.floor(se-Ve*Dt/rt+Ft)),Wt=Math.min(Ee,Math.floor(se+(rt-Ve)*Dt/rt+Ft));xt(le,ee,se,tr,Wt,Be)}var Tr=ee[2*se+Be],Yr=ce,Br=Ee;for(at(le,ee,ce,se),ee[2*Ee+Be]>Tr&&at(le,ee,ce,Ee);Yr<Br;){for(at(le,ee,Yr,Br),Yr++,Br--;ee[2*Yr+Be]<Tr;)Yr++;for(;ee[2*Br+Be]>Tr;)Br--}ee[2*ce+Be]===Tr?at(le,ee,ce,Br):(Br++,at(le,ee,Br,Ee)),Br<=se&&(ce=Br+1),se<=Br&&(Ee=Br-1)}}function at(le,ee,se,ce){At(le,se,ce),At(ee,2*se,2*ce),At(ee,2*se+1,2*ce+1)}function At(le,ee,se){var ce=le[ee];le[ee]=le[se],le[se]=ce}function kt(le,ee,se,ce,Ee,Be,rt){for(var Ve=[0,le.length-1,0],yt=[],Dt,Ft;Ve.length;){var tr=Ve.pop(),Wt=Ve.pop(),Tr=Ve.pop();if(Wt-Tr<=rt){for(var Yr=Tr;Yr<=Wt;Yr++)Dt=ee[2*Yr],Ft=ee[2*Yr+1],Dt>=se&&Dt<=Ee&&Ft>=ce&&Ft<=Be&&yt.push(le[Yr]);continue}var Br=Math.floor((Tr+Wt)/2);Dt=ee[2*Br],Ft=ee[2*Br+1],Dt>=se&&Dt<=Ee&&Ft>=ce&&Ft<=Be&&yt.push(le[Br]);var ca=(tr+1)%2;(tr===0?se<=Dt:ce<=Ft)&&(Ve.push(Tr),Ve.push(Br-1),Ve.push(ca)),(tr===0?Ee>=Dt:Be>=Ft)&&(Ve.push(Br+1),Ve.push(Wt),Ve.push(ca))}return yt}function mt(le,ee,se,ce,Ee,Be){for(var rt=[0,le.length-1,0],Ve=[],yt=Ee*Ee;rt.length;){var Dt=rt.pop(),Ft=rt.pop(),tr=rt.pop();if(Ft-tr<=Be){for(var Wt=tr;Wt<=Ft;Wt++)ye(ee[2*Wt],ee[2*Wt+1],se,ce)<=yt&&Ve.push(le[Wt]);continue}var Tr=Math.floor((tr+Ft)/2),Yr=ee[2*Tr],Br=ee[2*Tr+1];ye(Yr,Br,se,ce)<=yt&&Ve.push(le[Tr]);var ca=(Dt+1)%2;(Dt===0?se-Ee<=Yr:ce-Ee<=Br)&&(rt.push(tr),rt.push(Tr-1),rt.push(ca)),(Dt===0?se+Ee>=Yr:ce+Ee>=Br)&&(rt.push(Tr+1),rt.push(Ft),rt.push(ca))}return Ve}function ye(le,ee,se,ce){var Ee=le-se,Be=ee-ce;return Ee*Ee+Be*Be}var Re=function(le){return le[0]},xe=function(le){return le[1]},et=function(ee,se,ce,Ee,Be){se===void 0&&(se=Re),ce===void 0&&(ce=xe),Ee===void 0&&(Ee=64),Be===void 0&&(Be=Float64Array),this.nodeSize=Ee,this.points=ee;for(var rt=ee.length<65536?Uint16Array:Uint32Array,Ve=this.ids=new rt(ee.length),yt=this.coords=new Be(ee.length*2),Dt=0;Dt<ee.length;Dt++)Ve[Dt]=Dt,yt[2*Dt]=se(ee[Dt]),yt[2*Dt+1]=ce(ee[Dt]);Ge(Ve,yt,Ee,0,Ve.length-1,0)};et.prototype.range=function(ee,se,ce,Ee){return kt(this.ids,this.coords,ee,se,ce,Ee,this.nodeSize)},et.prototype.within=function(ee,se,ce){return mt(this.ids,this.coords,ee,se,ce,this.nodeSize)};var vt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(le){return le}},tt=function(ee){this.options=Gt(Object.create(vt),ee),this.trees=new Array(this.options.maxZoom+1)};tt.prototype.load=function(ee){var se=this.options,ce=se.log,Ee=se.minZoom,Be=se.maxZoom,rt=se.nodeSize;ce&&console.time("total time");var Ve="prepare "+ee.length+" points";ce&&console.time(Ve),this.points=ee;for(var yt=[],Dt=0;Dt<ee.length;Dt++)ee[Dt].geometry&&yt.push(Mt(ee[Dt],Dt));this.trees[Be+1]=new et(yt,Ne,ft,rt,Float32Array),ce&&console.timeEnd(Ve);for(var Ft=Be;Ft>=Ee;Ft--){var tr=+Date.now();yt=this._cluster(yt,Ft),this.trees[Ft]=new et(yt,Ne,ft,rt,Float32Array),ce&&console.log("z%d: %d clusters in %dms",Ft,yt.length,+Date.now()-tr)}return ce&&console.timeEnd("total time"),this},tt.prototype.getClusters=function(ee,se){var ce=((ee[0]+180)%360+360)%360-180,Ee=Math.max(-90,Math.min(90,ee[1])),Be=ee[2]===180?180:((ee[2]+180)%360+360)%360-180,rt=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ce=-180,Be=180;else if(ce>Be){var Ve=this.getClusters([ce,Ee,180,rt],se),yt=this.getClusters([-180,Ee,Be,rt],se);return Ve.concat(yt)}for(var Dt=this.trees[this._limitZoom(se)],Ft=Dt.range(Ot(ce),gt(rt),Ot(Be),gt(Ee)),tr=[],Wt=0,Tr=Ft;Wt<Tr.length;Wt+=1){var Yr=Tr[Wt],Br=Dt.points[Yr];tr.push(Br.numPoints?Ct(Br):this.points[Br.index])}return tr},tt.prototype.getChildren=function(ee){var se=this._getOriginId(ee),ce=this._getOriginZoom(ee),Ee="No cluster with the specified id.",Be=this.trees[ce];if(!Be)throw new Error(Ee);var rt=Be.points[se];if(!rt)throw new Error(Ee);for(var Ve=this.options.radius/(this.options.extent*Math.pow(2,ce-1)),yt=Be.within(rt.x,rt.y,Ve),Dt=[],Ft=0,tr=yt;Ft<tr.length;Ft+=1){var Wt=tr[Ft],Tr=Be.points[Wt];Tr.parentId===ee&&Dt.push(Tr.numPoints?Ct(Tr):this.points[Tr.index])}if(Dt.length===0)throw new Error(Ee);return Dt},tt.prototype.getLeaves=function(ee,se,ce){se=se||10,ce=ce||0;var Ee=[];return this._appendLeaves(Ee,ee,se,ce,0),Ee},tt.prototype.getTile=function(ee,se,ce){var Ee=this.trees[this._limitZoom(ee)],Be=Math.pow(2,ee),rt=this.options,Ve=rt.extent,yt=rt.radius,Dt=yt/Ve,Ft=(ce-Dt)/Be,tr=(ce+1+Dt)/Be,Wt={features:[]};return this._addTileFeatures(Ee.range((se-Dt)/Be,Ft,(se+1+Dt)/Be,tr),Ee.points,se,ce,Be,Wt),se===0&&this._addTileFeatures(Ee.range(1-Dt/Be,Ft,1,tr),Ee.points,Be,ce,Be,Wt),se===Be-1&&this._addTileFeatures(Ee.range(0,Ft,Dt/Be,tr),Ee.points,-1,ce,Be,Wt),Wt.features.length?Wt:null},tt.prototype.getClusterExpansionZoom=function(ee){for(var se=this._getOriginZoom(ee)-1;se<=this.options.maxZoom;){var ce=this.getChildren(ee);if(se++,ce.length!==1)break;ee=ce[0].properties.cluster_id}return se},tt.prototype._appendLeaves=function(ee,se,ce,Ee,Be){for(var rt=this.getChildren(se),Ve=0,yt=rt;Ve<yt.length;Ve+=1){var Dt=yt[Ve],Ft=Dt.properties;if(Ft&&Ft.cluster?Be+Ft.point_count<=Ee?Be+=Ft.point_count:Be=this._appendLeaves(ee,Ft.cluster_id,ce,Ee,Be):Be<Ee?Be++:ee.push(Dt),ee.length===ce)break}return Be},tt.prototype._addTileFeatures=function(ee,se,ce,Ee,Be,rt){for(var Ve=0,yt=ee;Ve<yt.length;Ve+=1){var Dt=yt[Ve],Ft=se[Dt],tr=Ft.numPoints,Wt={type:1,geometry:[[Math.round(this.options.extent*(Ft.x*Be-ce)),Math.round(this.options.extent*(Ft.y*Be-Ee))]],tags:tr?Rt(Ft):this.points[Ft.index].properties},Tr=void 0;tr?Tr=Ft.id:this.options.generateId?Tr=Ft.index:this.points[Ft.index].id&&(Tr=this.points[Ft.index].id),Tr!==void 0&&(Wt.id=Tr),rt.features.push(Wt)}},tt.prototype._limitZoom=function(ee){return Math.max(this.options.minZoom,Math.min(+ee,this.options.maxZoom+1))},tt.prototype._cluster=function(ee,se){for(var ce=[],Ee=this.options,Be=Ee.radius,rt=Ee.extent,Ve=Ee.reduce,yt=Ee.minPoints,Dt=Be/(rt*Math.pow(2,se)),Ft=0;Ft<ee.length;Ft++){var tr=ee[Ft];if(!(tr.zoom<=se)){tr.zoom=se;for(var Wt=this.trees[se+1],Tr=Wt.within(tr.x,tr.y,Dt),Yr=tr.numPoints||1,Br=Yr,ca=0,ua=Tr;ca<ua.length;ca+=1){var Na=ua[ca],ii=Wt.points[Na];ii.zoom>se&&(Br+=ii.numPoints||1)}if(Br>=yt){for(var Wr=tr.x*Yr,yr=tr.y*Yr,ea=Ve&&Yr>1?this._map(tr,!0):null,_a=(Ft<<5)+(se+1)+this.points.length,nr=0,wi=Tr;nr<wi.length;nr+=1){var Da=wi[nr],si=Wt.points[Da];if(!(si.zoom<=se)){si.zoom=se;var fa=si.numPoints||1;Wr+=si.x*fa,yr+=si.y*fa,si.parentId=_a,Ve&&(ea||(ea=this._map(tr,!0)),Ve(ea,this._map(si)))}}tr.parentId=_a,ce.push(Bt(Wr/Br,yr/Br,_a,Br,ea))}else if(ce.push(tr),Br>1)for(var Dn=0,Eo=Tr;Dn<Eo.length;Dn+=1){var Ms=Eo[Dn],Ya=Wt.points[Ms];Ya.zoom<=se||(Ya.zoom=se,ce.push(Ya))}}}return ce},tt.prototype._getOriginId=function(ee){return ee-this.points.length>>5},tt.prototype._getOriginZoom=function(ee){return(ee-this.points.length)%32},tt.prototype._map=function(ee,se){if(ee.numPoints)return se?Gt({},ee.properties):ee.properties;var ce=this.points[ee.index].properties,Ee=this.options.map(ce);return se&&Ee===ce?Gt({},Ee):Ee};function Bt(le,ee,se,ce,Ee){return{x:le,y:ee,zoom:1/0,id:se,parentId:-1,numPoints:ce,properties:Ee}}function Mt(le,ee){var se=le.geometry.coordinates,ce=se[0],Ee=se[1];return{x:Ot(ce),y:gt(Ee),zoom:1/0,index:ee,parentId:-1}}function Ct(le){return{type:"Feature",id:le.id,properties:Rt(le),geometry:{type:"Point",coordinates:[Et(le.x),ir(le.y)]}}}function Rt(le){var ee=le.numPoints,se=ee>=1e4?Math.round(ee/1e3)+"k":ee>=1e3?Math.round(ee/100)/10+"k":ee;return Gt(Gt({},le.properties),{cluster:!0,cluster_id:le.id,point_count:ee,point_count_abbreviated:se})}function Ot(le){return le/360+.5}function gt(le){var ee=Math.sin(le*Math.PI/180),se=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return se<0?0:se>1?1:se}function Et(le){return(le-.5)*360}function ir(le){var ee=(180-le*360)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Gt(le,ee){for(var se in ee)le[se]=ee[se];return le}function Ne(le){return le.x}function ft(le){return le.y}function pt(le,ee,se,ce){for(var Ee=ce,Be=se-ee>>1,rt=se-ee,Ve,yt=le[ee],Dt=le[ee+1],Ft=le[se],tr=le[se+1],Wt=ee+3;Wt<se;Wt+=3){var Tr=xr(le[Wt],le[Wt+1],yt,Dt,Ft,tr);if(Tr>Ee)Ve=Wt,Ee=Tr;else if(Tr===Ee){var Yr=Math.abs(Wt-Be);Yr<rt&&(Ve=Wt,rt=Yr)}}Ee>ce&&(Ve-ee>3&&pt(le,ee,Ve,ce),le[Ve+2]=Ee,se-Ve>3&&pt(le,Ve,se,ce))}function xr(le,ee,se,ce,Ee,Be){var rt=Ee-se,Ve=Be-ce;if(rt!==0||Ve!==0){var yt=((le-se)*rt+(ee-ce)*Ve)/(rt*rt+Ve*Ve);yt>1?(se=Ee,ce=Be):yt>0&&(se+=rt*yt,ce+=Ve*yt)}return rt=le-se,Ve=ee-ce,rt*rt+Ve*Ve}function pr(le,ee,se,ce){var Ee={id:typeof le=="undefined"?null:le,type:ee,geometry:se,tags:ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Tt(Ee),Ee}function Tt(le){var ee=le.geometry,se=le.type;if(se==="Point"||se==="MultiPoint"||se==="LineString")wt(le,ee);else if(se==="Polygon"||se==="MultiLineString")for(var ce=0;ce<ee.length;ce++)wt(le,ee[ce]);else if(se==="MultiPolygon")for(ce=0;ce<ee.length;ce++)for(var Ee=0;Ee<ee[ce].length;Ee++)wt(le,ee[ce][Ee])}function wt(le,ee){for(var se=0;se<ee.length;se+=3)le.minX=Math.min(le.minX,ee[se]),le.minY=Math.min(le.minY,ee[se+1]),le.maxX=Math.max(le.maxX,ee[se]),le.maxY=Math.max(le.maxY,ee[se+1])}function Vt(le,ee){var se=[];if(le.type==="FeatureCollection")for(var ce=0;ce<le.features.length;ce++)Kt(se,le.features[ce],ee,ce);else le.type==="Feature"?Kt(se,le,ee):Kt(se,{geometry:le},ee);return se}function Kt(le,ee,se,ce){if(ee.geometry){var Ee=ee.geometry.coordinates,Be=ee.geometry.type,rt=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),Ve=[],yt=ee.id;if(se.promoteId?yt=ee.properties[se.promoteId]:se.generateId&&(yt=ce||0),Be==="Point")Ht(Ee,Ve);else if(Be==="MultiPoint")for(var Dt=0;Dt<Ee.length;Dt++)Ht(Ee[Dt],Ve);else if(Be==="LineString")Ut(Ee,Ve,rt,!1);else if(Be==="MultiLineString")if(se.lineMetrics){for(Dt=0;Dt<Ee.length;Dt++)Ve=[],Ut(Ee[Dt],Ve,rt,!1),le.push(pr(yt,"LineString",Ve,ee.properties));return}else er(Ee,Ve,rt,!1);else if(Be==="Polygon")er(Ee,Ve,rt,!0);else if(Be==="MultiPolygon")for(Dt=0;Dt<Ee.length;Dt++){var Ft=[];er(Ee[Dt],Ft,rt,!0),Ve.push(Ft)}else if(Be==="GeometryCollection"){for(Dt=0;Dt<ee.geometry.geometries.length;Dt++)Kt(le,{id:yt,geometry:ee.geometry.geometries[Dt],properties:ee.properties},se,ce);return}else throw new Error("Input data is not a valid GeoJSON object.");le.push(pr(yt,Be,Ve,ee.properties))}}function Ht(le,ee){ee.push(Mr(le[0])),ee.push(br(le[1])),ee.push(0)}function Ut(le,ee,se,ce){for(var Ee,Be,rt=0,Ve=0;Ve<le.length;Ve++){var yt=Mr(le[Ve][0]),Dt=br(le[Ve][1]);ee.push(yt),ee.push(Dt),ee.push(0),Ve>0&&(ce?rt+=(Ee*Dt-yt*Be)/2:rt+=Math.sqrt(Math.pow(yt-Ee,2)+Math.pow(Dt-Be,2))),Ee=yt,Be=Dt}var Ft=ee.length-3;ee[2]=1,pt(ee,0,Ft,se),ee[Ft+2]=1,ee.size=Math.abs(rt),ee.start=0,ee.end=ee.size}function er(le,ee,se,ce){for(var Ee=0;Ee<le.length;Ee++){var Be=[];Ut(le[Ee],Be,se,ce),ee.push(Be)}}function Mr(le){return le/360+.5}function br(le){var ee=Math.sin(le*Math.PI/180),se=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return se<0?0:se>1?1:se}function Pt(le,ee,se,ce,Ee,Be,rt,Ve){if(se/=ee,ce/=ee,Be>=se&&rt<ce)return le;if(rt<se||Be>=ce)return null;for(var yt=[],Dt=0;Dt<le.length;Dt++){var Ft=le[Dt],tr=Ft.geometry,Wt=Ft.type,Tr=Ee===0?Ft.minX:Ft.minY,Yr=Ee===0?Ft.maxX:Ft.maxY;if(Tr>=se&&Yr<ce){yt.push(Ft);continue}else if(Yr<se||Tr>=ce)continue;var Br=[];if(Wt==="Point"||Wt==="MultiPoint")Fe(tr,Br,se,ce,Ee);else if(Wt==="LineString")He(tr,Br,se,ce,Ee,!1,Ve.lineMetrics);else if(Wt==="MultiLineString")dt(tr,Br,se,ce,Ee,!1);else if(Wt==="Polygon")dt(tr,Br,se,ce,Ee,!0);else if(Wt==="MultiPolygon")for(var ca=0;ca<tr.length;ca++){var ua=[];dt(tr[ca],ua,se,ce,Ee,!0),ua.length&&Br.push(ua)}if(Br.length){if(Ve.lineMetrics&&Wt==="LineString"){for(ca=0;ca<Br.length;ca++)yt.push(pr(Ft.id,Wt,Br[ca],Ft.tags));continue}(Wt==="LineString"||Wt==="MultiLineString")&&(Br.length===1?(Wt="LineString",Br=Br[0]):Wt="MultiLineString"),(Wt==="Point"||Wt==="MultiPoint")&&(Wt=Br.length===3?"Point":"MultiPoint"),yt.push(pr(Ft.id,Wt,Br,Ft.tags))}}return yt.length?yt:null}function Fe(le,ee,se,ce,Ee){for(var Be=0;Be<le.length;Be+=3){var rt=le[Be+Ee];rt>=se&&rt<=ce&&(ee.push(le[Be]),ee.push(le[Be+1]),ee.push(le[Be+2]))}}function He(le,ee,se,ce,Ee,Be,rt){for(var Ve=bt(le),yt=Ee===0?Lr:Ar,Dt=le.start,Ft,tr,Wt=0;Wt<le.length-3;Wt+=3){var Tr=le[Wt],Yr=le[Wt+1],Br=le[Wt+2],ca=le[Wt+3],ua=le[Wt+4],Na=Ee===0?Tr:Yr,ii=Ee===0?ca:ua,Wr=!1;rt&&(Ft=Math.sqrt(Math.pow(Tr-ca,2)+Math.pow(Yr-ua,2))),Na<se?ii>se&&(tr=yt(Ve,Tr,Yr,ca,ua,se),rt&&(Ve.start=Dt+Ft*tr)):Na>ce?ii<ce&&(tr=yt(Ve,Tr,Yr,ca,ua,ce),rt&&(Ve.start=Dt+Ft*tr)):gr(Ve,Tr,Yr,Br),ii<se&&Na>=se&&(tr=yt(Ve,Tr,Yr,ca,ua,se),Wr=!0),ii>ce&&Na<=ce&&(tr=yt(Ve,Tr,Yr,ca,ua,ce),Wr=!0),!Be&&Wr&&(rt&&(Ve.end=Dt+Ft*tr),ee.push(Ve),Ve=bt(le)),rt&&(Dt+=Ft)}var yr=le.length-3;Tr=le[yr],Yr=le[yr+1],Br=le[yr+2],Na=Ee===0?Tr:Yr,Na>=se&&Na<=ce&&gr(Ve,Tr,Yr,Br),yr=Ve.length-3,Be&&yr>=3&&(Ve[yr]!==Ve[0]||Ve[yr+1]!==Ve[1])&&gr(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&ee.push(Ve)}function bt(le){var ee=[];return ee.size=le.size,ee.start=le.start,ee.end=le.end,ee}function dt(le,ee,se,ce,Ee,Be){for(var rt=0;rt<le.length;rt++)He(le[rt],ee,se,ce,Ee,Be,!1)}function gr(le,ee,se,ce){le.push(ee),le.push(se),le.push(ce)}function Lr(le,ee,se,ce,Ee,Be){var rt=(Be-ee)/(ce-ee);return le.push(Be),le.push(se+(Ee-se)*rt),le.push(1),rt}function Ar(le,ee,se,ce,Ee,Be){var rt=(Be-se)/(Ee-se);return le.push(ee+(ce-ee)*rt),le.push(Be),le.push(1),rt}function Hr(le,ee){var se=ee.buffer/ee.extent,ce=le,Ee=Pt(le,1,-1-se,se,0,-1,2,ee),Be=Pt(le,1,1-se,2+se,0,-1,2,ee);return(Ee||Be)&&(ce=Pt(le,1,-se,1+se,0,-1,2,ee)||[],Ee&&(ce=xa(Ee,1).concat(ce)),Be&&(ce=ce.concat(xa(Be,-1)))),ce}function xa(le,ee){for(var se=[],ce=0;ce<le.length;ce++){var Ee=le[ce],Be=Ee.type,rt;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")rt=Ca(Ee.geometry,ee);else if(Be==="MultiLineString"||Be==="Polygon"){rt=[];for(var Ve=0;Ve<Ee.geometry.length;Ve++)rt.push(Ca(Ee.geometry[Ve],ee))}else if(Be==="MultiPolygon")for(rt=[],Ve=0;Ve<Ee.geometry.length;Ve++){for(var yt=[],Dt=0;Dt<Ee.geometry[Ve].length;Dt++)yt.push(Ca(Ee.geometry[Ve][Dt],ee));rt.push(yt)}se.push(pr(Ee.id,Be,rt,Ee.tags))}return se}function Ca(le,ee){var se=[];se.size=le.size,le.start!==void 0&&(se.start=le.start,se.end=le.end);for(var ce=0;ce<le.length;ce+=3)se.push(le[ce]+ee,le[ce+1],le[ce+2]);return se}function Pa(le,ee){if(le.transformed)return le;var se=1<<le.z,ce=le.x,Ee=le.y,Be,rt,Ve;for(Be=0;Be<le.features.length;Be++){var yt=le.features[Be],Dt=yt.geometry,Ft=yt.type;if(yt.geometry=[],Ft===1)for(rt=0;rt<Dt.length;rt+=2)yt.geometry.push(Fi(Dt[rt],Dt[rt+1],ee,se,ce,Ee));else for(rt=0;rt<Dt.length;rt++){var tr=[];for(Ve=0;Ve<Dt[rt].length;Ve+=2)tr.push(Fi(Dt[rt][Ve],Dt[rt][Ve+1],ee,se,ce,Ee));yt.geometry.push(tr)}}return le.transformed=!0,le}function Fi(le,ee,se,ce,Ee,Be){return[Math.round(se*(le*ce-Ee)),Math.round(se*(ee*ce-Be))]}function Ki(le,ee,se,ce,Ee){for(var Be=ee===Ee.maxZoom?0:Ee.tolerance/((1<<ee)*Ee.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:ce,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<le.length;Ve++){rt.numFeatures++,gn(rt,le[Ve],Be,Ee);var yt=le[Ve].minX,Dt=le[Ve].minY,Ft=le[Ve].maxX,tr=le[Ve].maxY;yt<rt.minX&&(rt.minX=yt),Dt<rt.minY&&(rt.minY=Dt),Ft>rt.maxX&&(rt.maxX=Ft),tr>rt.maxY&&(rt.maxY=tr)}return rt}function gn(le,ee,se,ce){var Ee=ee.geometry,Be=ee.type,rt=[];if(Be==="Point"||Be==="MultiPoint")for(var Ve=0;Ve<Ee.length;Ve+=3)rt.push(Ee[Ve]),rt.push(Ee[Ve+1]),le.numPoints++,le.numSimplified++;else if(Be==="LineString")Xi(rt,Ee,le,se,!1,!1);else if(Be==="MultiLineString"||Be==="Polygon")for(Ve=0;Ve<Ee.length;Ve++)Xi(rt,Ee[Ve],le,se,Be==="Polygon",Ve===0);else if(Be==="MultiPolygon")for(var yt=0;yt<Ee.length;yt++){var Dt=Ee[yt];for(Ve=0;Ve<Dt.length;Ve++)Xi(rt,Dt[Ve],le,se,!0,Ve===0)}if(rt.length){var Ft=ee.tags||null;if(Be==="LineString"&&ce.lineMetrics){Ft={};for(var tr in ee.tags)Ft[tr]=ee.tags[tr];Ft.mapbox_clip_start=Ee.start/Ee.size,Ft.mapbox_clip_end=Ee.end/Ee.size}var Wt={geometry:rt,type:Be==="Polygon"||Be==="MultiPolygon"?3:Be==="LineString"||Be==="MultiLineString"?2:1,tags:Ft};ee.id!==null&&(Wt.id=ee.id),le.features.push(Wt)}}function Xi(le,ee,se,ce,Ee,Be){var rt=ce*ce;if(ce>0&&ee.size<(Ee?rt:ce)){se.numPoints+=ee.length/3;return}for(var Ve=[],yt=0;yt<ee.length;yt+=3)(ce===0||ee[yt+2]>rt)&&(se.numSimplified++,Ve.push(ee[yt]),Ve.push(ee[yt+1])),se.numPoints++;Ee&&Qn(Ve,Be),le.push(Ve)}function Qn(le,ee){for(var se=0,ce=0,Ee=le.length,Be=Ee-2;ce<Ee;Be=ce,ce+=2)se+=(le[ce]-le[Be])*(le[ce+1]+le[Be+1]);if(se>0===ee)for(ce=0,Ee=le.length;ce<Ee/2;ce+=2){var rt=le[ce],Ve=le[ce+1];le[ce]=le[Ee-2-ce],le[ce+1]=le[Ee-1-ce],le[Ee-2-ce]=rt,le[Ee-1-ce]=Ve}}function Pn(le,ee){return new Gi(le,ee)}function Gi(le,ee){ee=this.options=Gr(Object.create(this.options),ee);var se=ee.debug;if(se&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var ce=Vt(le,ee);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ce=Hr(ce,ee),ce.length&&this.splitTile(ce,0,0,0),se&&(ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Gi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Gi.prototype.splitTile=function(le,ee,se,ce,Ee,Be,rt){for(var Ve=[le,ee,se,ce],yt=this.options,Dt=yt.debug;Ve.length;){ce=Ve.pop(),se=Ve.pop(),ee=Ve.pop(),le=Ve.pop();var Ft=1<<ee,tr=pa(ee,se,ce),Wt=this.tiles[tr];if(!Wt&&(Dt>1&&console.time("creation"),Wt=this.tiles[tr]=Ki(le,ee,se,ce,yt),this.tileCoords.push({z:ee,x:se,y:ce}),Dt)){Dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,se,ce,Wt.numFeatures,Wt.numPoints,Wt.numSimplified),console.timeEnd("creation"));var Tr="z"+ee;this.stats[Tr]=(this.stats[Tr]||0)+1,this.total++}if(Wt.source=le,Ee){if(ee===yt.maxZoom||ee===Ee)continue;var Yr=1<<Ee-ee;if(se!==Math.floor(Be/Yr)||ce!==Math.floor(rt/Yr))continue}else if(ee===yt.indexMaxZoom||Wt.numPoints<=yt.indexMaxPoints)continue;if(Wt.source=null,le.length!==0){Dt>1&&console.time("clipping");var Br=.5*yt.buffer/yt.extent,ca=.5-Br,ua=.5+Br,Na=1+Br,ii,Wr,yr,ea,_a,nr;ii=Wr=yr=ea=null,_a=Pt(le,Ft,se-Br,se+ua,0,Wt.minX,Wt.maxX,yt),nr=Pt(le,Ft,se+ca,se+Na,0,Wt.minX,Wt.maxX,yt),le=null,_a&&(ii=Pt(_a,Ft,ce-Br,ce+ua,1,Wt.minY,Wt.maxY,yt),Wr=Pt(_a,Ft,ce+ca,ce+Na,1,Wt.minY,Wt.maxY,yt),_a=null),nr&&(yr=Pt(nr,Ft,ce-Br,ce+ua,1,Wt.minY,Wt.maxY,yt),ea=Pt(nr,Ft,ce+ca,ce+Na,1,Wt.minY,Wt.maxY,yt),nr=null),Dt>1&&console.timeEnd("clipping"),Ve.push(ii||[],ee+1,se*2,ce*2),Ve.push(Wr||[],ee+1,se*2,ce*2+1),Ve.push(yr||[],ee+1,se*2+1,ce*2),Ve.push(ea||[],ee+1,se*2+1,ce*2+1)}}},Gi.prototype.getTile=function(le,ee,se){var ce=this.options,Ee=ce.extent,Be=ce.debug;if(le<0||le>24)return null;var rt=1<<le;ee=(ee%rt+rt)%rt;var Ve=pa(le,ee,se);if(this.tiles[Ve])return Pa(this.tiles[Ve],Ee);Be>1&&console.log("drilling down to z%d-%d-%d",le,ee,se);for(var yt=le,Dt=ee,Ft=se,tr;!tr&&yt>0;)yt--,Dt=Math.floor(Dt/2),Ft=Math.floor(Ft/2),tr=this.tiles[pa(yt,Dt,Ft)];return!tr||!tr.source?null:(Be>1&&console.log("found parent tile z%d-%d-%d",yt,Dt,Ft),Be>1&&console.time("drilling down"),this.splitTile(tr.source,yt,Dt,Ft,le,ee,se),Be>1&&console.timeEnd("drilling down"),this.tiles[Ve]?Pa(this.tiles[Ve],Ee):null)};function pa(le,ee,se){return((1<<le)*se+ee)*32+le}function Gr(le,ee){for(var se in ee)le[se]=ee[se];return le}function Qa(le,ee){var se=le.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);var ce=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!ce)return ee(null,null);var Ee=new V(ce.features),Be=oe(Ee);(Be.byteOffset!==0||Be.byteLength!==Be.buffer.byteLength)&&(Be=new Uint8Array(Be)),ee(null,{vectorTile:Ee,rawData:Be.buffer})}var Zr=function(le){function ee(se,ce,Ee,Be){le.call(this,se,ce,Ee,Qa),Be&&(this.loadGeoJSON=Be)}return le&&(ee.__proto__=le),ee.prototype=Object.create(le&&le.prototype),ee.prototype.constructor=ee,ee.prototype.loadData=function(ce,Ee){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ee,this._pendingLoadDataParams=ce,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ee.prototype._loadData=function(){var ce=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ee=this._pendingCallback,Be=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var rt=Be&&Be.request&&Be.request.collectResourceTiming?new a.RequestPerformance(Be.request):!1;this.loadGeoJSON(Be,function(Ve,yt){if(Ve||!yt)return Ee(Ve);if(typeof yt!="object")return Ee(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));I(yt,!0);try{if(Be.filter){var Dt=a.createExpression(Be.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Dt.result==="error")throw new Error(Dt.value.map(function(Tr){return Tr.key+": "+Tr.message}).join(", "));var Ft=yt.features.filter(function(Tr){return Dt.value.evaluate({zoom:0},Tr)});yt={type:"FeatureCollection",features:Ft}}ce._geoJSONIndex=Be.cluster?new tt(vi(Be)).load(yt.features):Pn(yt,Be.geojsonVtOptions)}catch(Tr){return Ee(Tr)}ce.loaded={};var tr={};if(rt){var Wt=rt.finish();Wt&&(tr.resourceTiming={},tr.resourceTiming[Be.source]=JSON.parse(JSON.stringify(Wt)))}Ee(null,tr)})}},ee.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ee.prototype.reloadTile=function(ce,Ee){var Be=this.loaded,rt=ce.uid;return Be&&Be[rt]?le.prototype.reloadTile.call(this,ce,Ee):this.loadTile(ce,Ee)},ee.prototype.loadGeoJSON=function(ce,Ee){if(ce.request)a.getJSON(ce.request,Ee);else if(typeof ce.data=="string")try{return Ee(null,JSON.parse(ce.data))}catch(Be){return Ee(new Error("Input data given to '"+ce.source+"' is not a valid GeoJSON object."))}else return Ee(new Error("Input data given to '"+ce.source+"' is not a valid GeoJSON object."))},ee.prototype.removeSource=function(ce,Ee){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ee()},ee.prototype.getClusterExpansionZoom=function(ce,Ee){try{Ee(null,this._geoJSONIndex.getClusterExpansionZoom(ce.clusterId))}catch(Be){Ee(Be)}},ee.prototype.getClusterChildren=function(ce,Ee){try{Ee(null,this._geoJSONIndex.getChildren(ce.clusterId))}catch(Be){Ee(Be)}},ee.prototype.getClusterLeaves=function(ce,Ee){try{Ee(null,this._geoJSONIndex.getLeaves(ce.clusterId,ce.limit,ce.offset))}catch(Be){Ee(Be)}},ee}(k);function vi(le){var ee=le.superclusterOptions,se=le.clusterProperties;if(!se||!ee)return ee;for(var ce={},Ee={},Be={accumulated:null,zoom:0},rt={properties:null},Ve=Object.keys(se),yt=0,Dt=Ve;yt<Dt.length;yt+=1){var Ft=Dt[yt],tr=se[Ft],Wt=tr[0],Tr=tr[1],Yr=a.createExpression(Tr),Br=a.createExpression(typeof Wt=="string"?[Wt,["accumulated"],["get",Ft]]:Wt);ce[Ft]=Yr.value,Ee[Ft]=Br.value}return ee.map=function(ca){rt.properties=ca;for(var ua={},Na=0,ii=Ve;Na<ii.length;Na+=1){var Wr=ii[Na];ua[Wr]=ce[Wr].evaluate(Be,rt)}return ua},ee.reduce=function(ca,ua){rt.properties=ua;for(var Na=0,ii=Ve;Na<ii.length;Na+=1){var Wr=ii[Na];Be.accumulated=ca[Wr],ca[Wr]=Ee[Wr].evaluate(Be,rt)}},ee}var ga=function(ee){var se=this;this.self=ee,this.actor=new a.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:k,geojson:Zr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ce,Ee){if(se.workerSourceTypes[ce])throw new Error('Worker source with name "'+ce+'" already registered.');se.workerSourceTypes[ce]=Ee},this.self.registerRTLTextPlugin=function(ce){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=ce.applyArabicShaping,a.plugin.processBidirectionalText=ce.processBidirectionalText,a.plugin.processStyledBidirectionalText=ce.processStyledBidirectionalText}};return ga.prototype.setReferrer=function(ee,se){this.referrer=se},ga.prototype.setImages=function(ee,se,ce){this.availableImages[ee]=se;for(var Ee in this.workerSources[ee]){var Be=this.workerSources[ee][Ee];for(var rt in Be)Be[rt].availableImages=se}ce()},ga.prototype.setLayers=function(ee,se,ce){this.getLayerIndex(ee).replace(se),ce()},ga.prototype.updateLayers=function(ee,se,ce){this.getLayerIndex(ee).update(se.layers,se.removedIds),ce()},ga.prototype.loadTile=function(ee,se,ce){this.getWorkerSource(ee,se.type,se.source).loadTile(se,ce)},ga.prototype.loadDEMTile=function(ee,se,ce){this.getDEMWorkerSource(ee,se.source).loadTile(se,ce)},ga.prototype.reloadTile=function(ee,se,ce){this.getWorkerSource(ee,se.type,se.source).reloadTile(se,ce)},ga.prototype.abortTile=function(ee,se,ce){this.getWorkerSource(ee,se.type,se.source).abortTile(se,ce)},ga.prototype.removeTile=function(ee,se,ce){this.getWorkerSource(ee,se.type,se.source).removeTile(se,ce)},ga.prototype.removeDEMTile=function(ee,se){this.getDEMWorkerSource(ee,se.source).removeTile(se)},ga.prototype.removeSource=function(ee,se,ce){if(!(!this.workerSources[ee]||!this.workerSources[ee][se.type]||!this.workerSources[ee][se.type][se.source])){var Ee=this.workerSources[ee][se.type][se.source];delete this.workerSources[ee][se.type][se.source],Ee.removeSource!==void 0?Ee.removeSource(se,ce):ce()}},ga.prototype.loadWorkerSource=function(ee,se,ce){try{this.self.importScripts(se.url),ce()}catch(Ee){ce(Ee.toString())}},ga.prototype.syncRTLPluginState=function(ee,se,ce){try{a.plugin.setState(se);var Ee=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Ee!=null){this.self.importScripts(Ee);var Be=a.plugin.isParsed(),rt=Be?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ee);ce(rt,Be)}}catch(Ve){ce(Ve.toString())}},ga.prototype.getAvailableImages=function(ee){var se=this.availableImages[ee];return se||(se=[]),se},ga.prototype.getLayerIndex=function(ee){var se=this.layerIndexes[ee];return se||(se=this.layerIndexes[ee]=new c),se},ga.prototype.getWorkerSource=function(ee,se,ce){var Ee=this;if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][se]||(this.workerSources[ee][se]={}),!this.workerSources[ee][se][ce]){var Be={send:function(rt,Ve,yt){Ee.actor.send(rt,Ve,yt,ee)}};this.workerSources[ee][se][ce]=new this.workerSourceTypes[se](Be,this.getLayerIndex(ee),this.getAvailableImages(ee))}return this.workerSources[ee][se][ce]},ga.prototype.getDEMWorkerSource=function(ee,se){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][se]||(this.demWorkerSources[ee][se]=new E),this.demWorkerSources[ee][se]},ga.prototype.enforceCacheSizeLimit=function(ee,se){a.enforceCacheSizeLimit(se)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new ga(self)),ga}),i(["./shared"],function(a){"use strict";var s=a.createCommonjsModule(function(g){g.exports?g.exports=h:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=h,window.mapboxgl.notSupportedReason=b);function h(Oe){return!b(Oe)}function b(Oe){if(!d())return"not a browser";if(!w())return"insufficent Array support";if(!P())return"insufficient Function support";if(!F())return"insufficient Object support";if(!G())return"insufficient JSON support";if(!K())return"insufficient worker support";if(!te())return"insufficient Uint8ClampedArray support";if(!fe())return"insufficient ArrayBuffer support";if(!we())return"insufficient Canvas/getImageData support";if(!Ie(Oe&&Oe.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function d(){return typeof window!="undefined"&&typeof document!="undefined"}function w(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function P(){return Function.prototype&&Function.prototype.bind}function F(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function G(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function K(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Oe=new Blob([""],{type:"text/javascript"}),Xe=URL.createObjectURL(Oe),ht,zt;try{zt=new Worker(Xe),ht=!0}catch(qt){ht=!1}return zt&&zt.terminate(),URL.revokeObjectURL(Xe),ht}function te(){return"Uint8ClampedArray"in window}function fe(){return ArrayBuffer.isView}function we(){var Oe=document.createElement("canvas");Oe.width=Oe.height=1;var Xe=Oe.getContext("2d");if(!Xe)return!1;var ht=Xe.getImageData(0,0,1,1);return ht&&ht.width===Oe.width}var be={};function Ie(Oe){return be[Oe]===void 0&&(be[Oe]=Ze(Oe)),be[Oe]}h.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Ye(Oe){var Xe=document.createElement("canvas"),ht=Object.create(h.webGLContextAttributes);return ht.failIfMajorPerformanceCaveat=Oe,Xe.probablySupportsContext?Xe.probablySupportsContext("webgl",ht)||Xe.probablySupportsContext("experimental-webgl",ht):Xe.supportsContext?Xe.supportsContext("webgl",ht)||Xe.supportsContext("experimental-webgl",ht):Xe.getContext("webgl",ht)||Xe.getContext("experimental-webgl",ht)}function Ze(Oe){var Xe=Ye(Oe);if(!Xe)return!1;var ht=Xe.createShader(Xe.VERTEX_SHADER);return!ht||Xe.isContextLost()?!1:(Xe.shaderSource(ht,"void main() {}"),Xe.compileShader(ht),Xe.getShaderParameter(ht,Xe.COMPILE_STATUS)===!0)}}),l={};l.create=function(g,h,b){var d=a.window.document.createElement(g);return h!==void 0&&(d.className=h),b&&b.appendChild(d),d},l.createNS=function(g,h){var b=a.window.document.createElementNS(g,h);return b};var u=a.window.document&&a.window.document.documentElement.style;function c(g){if(!u)return g[0];for(var h=0;h<g.length;h++)if(g[h]in u)return g[h];return g[0]}var v=c(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),m;l.disableDrag=function(){u&&v&&(m=u[v],u[v]="none")},l.enableDrag=function(){u&&v&&(u[v]=m)};var _=c(["transform","WebkitTransform"]);l.setTransform=function(g,h){g.style[_]=h};var T=!1;try{var M=Object.defineProperty({},"passive",{get:function(){T=!0}});a.window.addEventListener("test",M,M),a.window.removeEventListener("test",M,M)}catch(g){T=!1}l.addEventListener=function(g,h,b,d){d===void 0&&(d={}),"passive"in d&&T?g.addEventListener(h,b,d):g.addEventListener(h,b,d.capture)},l.removeEventListener=function(g,h,b,d){d===void 0&&(d={}),"passive"in d&&T?g.removeEventListener(h,b,d):g.removeEventListener(h,b,d.capture)};var k=function(g){g.preventDefault(),g.stopPropagation(),a.window.removeEventListener("click",k,!0)};l.suppressClick=function(){a.window.addEventListener("click",k,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",k,!0)},0)},l.mousePos=function(g,h){var b=g.getBoundingClientRect();return new a.Point(h.clientX-b.left-g.clientLeft,h.clientY-b.top-g.clientTop)},l.touchPos=function(g,h){for(var b=g.getBoundingClientRect(),d=[],w=0;w<h.length;w++)d.push(new a.Point(h[w].clientX-b.left-g.clientLeft,h[w].clientY-b.top-g.clientTop));return d},l.mouseButton=function(g){return typeof a.window.InstallTrigger!="undefined"&&g.button===2&&g.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button},l.remove=function(g){g.parentNode&&g.parentNode.removeChild(g)};function L(g,h,b){var d,w,P,F=a.browser.devicePixelRatio>1?"@2x":"",G=a.getJSON(h.transformRequest(h.normalizeSpriteURL(g,F,".json"),a.ResourceType.SpriteJSON),function(fe,we){G=null,P||(P=fe,d=we,te())}),K=a.getImage(h.transformRequest(h.normalizeSpriteURL(g,F,".png"),a.ResourceType.SpriteImage),function(fe,we){K=null,P||(P=fe,w=we,te())});function te(){if(P)b(P);else if(d&&w){var fe=a.browser.getImageData(w),we={};for(var be in d){var Ie=d[be],Ye=Ie.width,Ze=Ie.height,Oe=Ie.x,Xe=Ie.y,ht=Ie.sdf,zt=Ie.pixelRatio,qt=Ie.stretchX,Qt=Ie.stretchY,rr=Ie.content,Yt=new a.RGBAImage({width:Ye,height:Ze});a.RGBAImage.copy(fe,Yt,{x:Oe,y:Xe},{x:0,y:0},{width:Ye,height:Ze}),we[be]={data:Yt,pixelRatio:zt,sdf:ht,stretchX:qt,stretchY:Qt,content:rr}}b(null,we)}}return{cancel:function(){G&&(G.cancel(),G=null),K&&(K.cancel(),K=null)}}}function E(g){var h=g.userImage;if(h&&h.render){var b=h.render();if(b)return g.data.replace(new Uint8Array(h.data.buffer)),!0}return!1}var I=1,R=function(g){function h(){g.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.isLoaded=function(){return this.loaded},h.prototype.setLoaded=function(d){if(this.loaded!==d&&(this.loaded=d,d)){for(var w=0,P=this.requestors;w<P.length;w+=1){var F=P[w],G=F.ids,K=F.callback;this._notify(G,K)}this.requestors=[]}},h.prototype.getImage=function(d){return this.images[d]},h.prototype.addImage=function(d,w){this._validate(d,w)&&(this.images[d]=w)},h.prototype._validate=function(d,w){var P=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "stretchX" value'))),P=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "stretchY" value'))),P=!1),this._validateContent(w.content,w)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "content" value'))),P=!1),P},h.prototype._validateStretch=function(d,w){if(!d)return!0;for(var P=0,F=0,G=d;F<G.length;F+=1){var K=G[F];if(K[0]<P||K[1]<K[0]||w<K[1])return!1;P=K[1]}return!0},h.prototype._validateContent=function(d,w){return d?!(d.length!==4||d[0]<0||w.data.width<d[0]||d[1]<0||w.data.height<d[1]||d[2]<0||w.data.width<d[2]||d[3]<0||w.data.height<d[3]||d[2]<d[0]||d[3]<d[1]):!0},h.prototype.updateImage=function(d,w){var P=this.images[d];w.version=P.version+1,this.images[d]=w,this.updatedImages[d]=!0},h.prototype.removeImage=function(d){var w=this.images[d];delete this.images[d],delete this.patterns[d],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()},h.prototype.listImages=function(){return Object.keys(this.images)},h.prototype.getImages=function(d,w){var P=!0;if(!this.isLoaded())for(var F=0,G=d;F<G.length;F+=1){var K=G[F];this.images[K]||(P=!1)}this.isLoaded()||P?this._notify(d,w):this.requestors.push({ids:d,callback:w})},h.prototype._notify=function(d,w){for(var P={},F=0,G=d;F<G.length;F+=1){var K=G[F];this.images[K]||this.fire(new a.Event("styleimagemissing",{id:K}));var te=this.images[K];te?P[K]={data:te.data.clone(),pixelRatio:te.pixelRatio,sdf:te.sdf,version:te.version,stretchX:te.stretchX,stretchY:te.stretchY,content:te.content,hasRenderCallback:!!(te.userImage&&te.userImage.render)}:a.warnOnce('Image "'+K+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}w(null,P)},h.prototype.getPixelSize=function(){var d=this.atlasImage,w=d.width,P=d.height;return{width:w,height:P}},h.prototype.getPattern=function(d){var w=this.patterns[d],P=this.getImage(d);if(!P)return null;if(w&&w.position.version===P.version)return w.position;if(w)w.position.version=P.version;else{var F=P.data.width+I*2,G=P.data.height+I*2,K={w:F,h:G,x:0,y:0},te=new a.ImagePosition(K,P);this.patterns[d]={bin:K,position:te}}return this._updatePatternAtlas(),this.patterns[d].position},h.prototype.bind=function(d){var w=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(d,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)},h.prototype._updatePatternAtlas=function(){var d=[];for(var w in this.patterns)d.push(this.patterns[w].bin);var P=a.potpack(d),F=P.w,G=P.h,K=this.atlasImage;K.resize({width:F||1,height:G||1});for(var te in this.patterns){var fe=this.patterns[te],we=fe.bin,be=we.x+I,Ie=we.y+I,Ye=this.images[te].data,Ze=Ye.width,Oe=Ye.height;a.RGBAImage.copy(Ye,K,{x:0,y:0},{x:be,y:Ie},{width:Ze,height:Oe}),a.RGBAImage.copy(Ye,K,{x:0,y:Oe-1},{x:be,y:Ie-1},{width:Ze,height:1}),a.RGBAImage.copy(Ye,K,{x:0,y:0},{x:be,y:Ie+Oe},{width:Ze,height:1}),a.RGBAImage.copy(Ye,K,{x:Ze-1,y:0},{x:be-1,y:Ie},{width:1,height:Oe}),a.RGBAImage.copy(Ye,K,{x:0,y:0},{x:be+Ze,y:Ie},{width:1,height:Oe})}this.dirty=!0},h.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},h.prototype.dispatchRenderCallbacks=function(d){for(var w=0,P=d;w<P.length;w+=1){var F=P[w];if(!this.callbackDispatchedThisFrame[F]){this.callbackDispatchedThisFrame[F]=!0;var G=this.images[F],K=E(G);K&&this.updateImage(F,G)}}},h}(a.Evented);function N(g,h,b,d,w){var P=h*256,F=P+255,G=d.transformRequest(d.normalizeGlyphsURL(b).replace("{fontstack}",g).replace("{range}",P+"-"+F),a.ResourceType.Glyphs);a.getArrayBuffer(G,function(K,te){if(K)w(K);else if(te){for(var fe={},we=0,be=a.parseGlyphPBF(te);we<be.length;we+=1){var Ie=be[we];fe[Ie.id]=Ie}w(null,fe)}})}var z=V,B=V,H=1e20;function V(g,h,b,d,w,P){this.fontSize=g||24,this.buffer=h===void 0?3:h,this.cutoff=d||.25,this.fontFamily=w||"sans-serif",this.fontWeight=P||"normal",this.radius=b||8;var F=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=F,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.d=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Int16Array(F),this.middle=Math.round(F/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}V.prototype.draw=function(g){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(g,this.buffer,this.middle);for(var h=this.ctx.getImageData(0,0,this.size,this.size),b=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var w=h.data[d*4+3]/255;this.gridOuter[d]=w===1?0:w===0?H:Math.pow(Math.max(0,.5-w),2),this.gridInner[d]=w===1?H:w===0?0:Math.pow(Math.max(0,w-.5),2)}for(Y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++){var P=this.gridOuter[d]-this.gridInner[d];b[d]=Math.max(0,Math.min(255,Math.round(255-255*(P/this.radius+this.cutoff))))}return b};function Y(g,h,b,d,w,P,F){for(var G=0;G<h;G++){for(var K=0;K<b;K++)d[K]=g[K*h+G];for(J(d,w,P,F,b),K=0;K<b;K++)g[K*h+G]=w[K]}for(K=0;K<b;K++){for(G=0;G<h;G++)d[G]=g[K*h+G];for(J(d,w,P,F,h),G=0;G<h;G++)g[K*h+G]=Math.sqrt(w[G])}}function J(g,h,b,d,w){b[0]=0,d[0]=-H,d[1]=+H;for(var P=1,F=0;P<w;P++){for(var G=(g[P]+P*P-(g[b[F]]+b[F]*b[F]))/(2*P-2*b[F]);G<=d[F];)F--,G=(g[P]+P*P-(g[b[F]]+b[F]*b[F]))/(2*P-2*b[F]);F++,b[F]=P,d[F]=G,d[F+1]=+H}for(P=0,F=0;P<w;P++){for(;d[F+1]<P;)F++;h[P]=(P-b[F])*(P-b[F])+g[b[F]]}}z.default=B;var re=function(h,b){this.requestManager=h,this.localIdeographFontFamily=b,this.entries={}};re.prototype.setURL=function(h){this.url=h},re.prototype.getGlyphs=function(h,b){var d=this,w=[];for(var P in h)for(var F=0,G=h[P];F<G.length;F+=1){var K=G[F];w.push({stack:P,id:K})}a.asyncAll(w,function(te,fe){var we=te.stack,be=te.id,Ie=d.entries[we];Ie||(Ie=d.entries[we]={glyphs:{},requests:{},ranges:{}});var Ye=Ie.glyphs[be];if(Ye!==void 0){fe(null,{stack:we,id:be,glyph:Ye});return}if(Ye=d._tinySDF(Ie,we,be),Ye){Ie.glyphs[be]=Ye,fe(null,{stack:we,id:be,glyph:Ye});return}var Ze=Math.floor(be/256);if(Ze*256>65535){fe(new Error("glyphs > 65535 not supported"));return}if(Ie.ranges[Ze]){fe(null,{stack:we,id:be,glyph:Ye});return}var Oe=Ie.requests[Ze];Oe||(Oe=Ie.requests[Ze]=[],re.loadGlyphRange(we,Ze,d.url,d.requestManager,function(Xe,ht){if(ht){for(var zt in ht)d._doesCharSupportLocalGlyph(+zt)||(Ie.glyphs[+zt]=ht[+zt]);Ie.ranges[Ze]=!0}for(var qt=0,Qt=Oe;qt<Qt.length;qt+=1){var rr=Qt[qt];rr(Xe,ht)}delete Ie.requests[Ze]})),Oe.push(function(Xe,ht){Xe?fe(Xe):ht&&fe(null,{stack:we,id:be,glyph:ht[be]||null})})},function(te,fe){if(te)b(te);else if(fe){for(var we={},be=0,Ie=fe;be<Ie.length;be+=1){var Ye=Ie[be],Ze=Ye.stack,Oe=Ye.id,Xe=Ye.glyph;(we[Ze]||(we[Ze]={}))[Oe]=Xe&&{id:Xe.id,bitmap:Xe.bitmap.clone(),metrics:Xe.metrics}}b(null,we)}})},re.prototype._doesCharSupportLocalGlyph=function(h){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](h)||a.isChar["Hangul Syllables"](h)||a.isChar.Hiragana(h)||a.isChar.Katakana(h))},re.prototype._tinySDF=function(h,b,d){var w=this.localIdeographFontFamily;if(w&&this._doesCharSupportLocalGlyph(d)){var P=h.tinySDF;if(!P){var F="400";/bold/i.test(b)?F="900":/medium/i.test(b)?F="500":/light/i.test(b)&&(F="200"),P=h.tinySDF=new re.TinySDF(24,3,8,.25,w,F)}return{id:d,bitmap:new a.AlphaImage({width:30,height:30},P.draw(String.fromCharCode(d))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},re.loadGlyphRange=N,re.TinySDF=z;var ne=function(){this.specification=a.styleSpec.light.position};ne.prototype.possiblyEvaluate=function(h,b){return a.sphericalToCartesian(h.expression.evaluate(b))},ne.prototype.interpolate=function(h,b,d){return{x:a.number(h.x,b.x,d),y:a.number(h.y,b.y,d),z:a.number(h.z,b.z,d)}};var oe=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new ne,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),ue="-transition",me=function(g){function h(b){g.call(this),this._transitionable=new a.Transitionable(oe),this.setLight(b),this._transitioning=this._transitionable.untransitioned()}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getLight=function(){return this._transitionable.serialize()},h.prototype.setLight=function(d,w){if(w===void 0&&(w={}),!this._validate(a.validateLight,d,w))for(var P in d){var F=d[P];a.endsWith(P,ue)?this._transitionable.setTransition(P.slice(0,-ue.length),F):this._transitionable.setValue(P,F)}},h.prototype.updateTransitions=function(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)},h.prototype.hasTransition=function(){return this._transitioning.hasTransition()},h.prototype.recalculate=function(d){this.properties=this._transitioning.possiblyEvaluate(d)},h.prototype._validate=function(d,w,P){return P&&P.validate===!1?!1:a.emitValidationErrors(this,d.call(a.validateStyle,a.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},h}(a.Evented),Se=function(h,b){this.width=h,this.height=b,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Se.prototype.getDash=function(h,b){var d=h.join(",")+String(b);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(h,b)),this.dashEntry[d]},Se.prototype.getDashRanges=function(h,b,d){var w=h.length%2===1,P=[],F=w?-h[h.length-1]*d:0,G=h[0]*d,K=!0;P.push({left:F,right:G,isDash:K,zeroLength:h[0]===0});for(var te=h[0],fe=1;fe<h.length;fe++){K=!K;var we=h[fe];F=te*d,te+=we,G=te*d,P.push({left:F,right:G,isDash:K,zeroLength:we===0})}return P},Se.prototype.addRoundDash=function(h,b,d){for(var w=b/2,P=-d;P<=d;P++)for(var F=this.nextRow+d+P,G=this.width*F,K=0,te=h[K],fe=0;fe<this.width;fe++){fe/te.right>1&&(te=h[++K]);var we=Math.abs(fe-te.left),be=Math.abs(fe-te.right),Ie=Math.min(we,be),Ye=void 0,Ze=P/d*(w+1);if(te.isDash){var Oe=w-Math.abs(Ze);Ye=Math.sqrt(Ie*Ie+Oe*Oe)}else Ye=w-Math.sqrt(Ie*Ie+Ze*Ze);this.data[G+fe]=Math.max(0,Math.min(255,Ye+128))}},Se.prototype.addRegularDash=function(h){for(var b=h.length-1;b>=0;--b){var d=h[b],w=h[b+1];d.zeroLength?h.splice(b,1):w&&w.isDash===d.isDash&&(w.left=d.left,h.splice(b,1))}var P=h[0],F=h[h.length-1];P.isDash===F.isDash&&(P.left=F.left-this.width,F.right=P.right+this.width);for(var G=this.width*this.nextRow,K=0,te=h[K],fe=0;fe<this.width;fe++){fe/te.right>1&&(te=h[++K]);var we=Math.abs(fe-te.left),be=Math.abs(fe-te.right),Ie=Math.min(we,be),Ye=te.isDash?Ie:-Ie;this.data[G+fe]=Math.max(0,Math.min(255,Ye+128))}},Se.prototype.addDash=function(h,b){var d=b?7:0,w=2*d+1;if(this.nextRow+w>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var P=0,F=0;F<h.length;F++)P+=h[F];if(P!==0){var G=this.width/P,K=this.getDashRanges(h,this.width,G);b?this.addRoundDash(K,G,d):this.addRegularDash(K)}var te={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:P};return this.nextRow+=w,this.dirty=!0,te},Se.prototype.bind=function(h){var b=h.gl;this.texture?(b.bindTexture(b.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.width,this.height,b.ALPHA,b.UNSIGNED_BYTE,this.data))):(this.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.ALPHA,this.width,this.height,0,b.ALPHA,b.UNSIGNED_BYTE,this.data))};var Ce=function g(h,b){this.workerPool=h,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var d=this.workerPool.acquire(this.id),w=0;w<d.length;w++){var P=d[w],F=new g.Actor(P,b,this.id);F.name="Worker "+w,this.actors.push(F)}};Ce.prototype.broadcast=function(h,b,d){d=d||function(){},a.asyncAll(this.actors,function(w,P){w.send(h,b,P)},d)},Ce.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ce.prototype.remove=function(){this.actors.forEach(function(h){h.remove()}),this.actors=[],this.workerPool.release(this.id)},Ce.Actor=a.Actor;function Me(g,h,b){var d=function(w,P){if(w)return b(w);if(P){var F=a.pick(a.extend(P,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(F.vectorLayers=P.vector_layers,F.vectorLayerIds=F.vectorLayers.map(function(G){return G.id})),F.tiles=h.canonicalizeTileset(F,g.url),b(null,F)}};return g.url?a.getJSON(h.transformRequest(h.normalizeSourceURL(g.url),a.ResourceType.Source),d):a.browser.frame(function(){return d(null,g)})}var _e=function(h,b,d){this.bounds=a.LngLatBounds.convert(this.validateBounds(h)),this.minzoom=b||0,this.maxzoom=d||24};_e.prototype.validateBounds=function(h){return!Array.isArray(h)||h.length!==4?[-180,-90,180,90]:[Math.max(-180,h[0]),Math.max(-90,h[1]),Math.min(180,h[2]),Math.min(90,h[3])]},_e.prototype.contains=function(h){var b=Math.pow(2,h.z),d={minX:Math.floor(a.mercatorXfromLng(this.bounds.getWest())*b),minY:Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*b),maxX:Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*b),maxY:Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*b)},w=h.x>=d.minX&&h.x<d.maxX&&h.y>=d.minY&&h.y<d.maxY;return w};var Te=function(g){function h(b,d,w,P){if(g.call(this),this.id=b,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(d,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.load=function(){var d=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Me(this._options,this.map._requestManager,function(w,P){d._tileJSONRequest=null,d._loaded=!0,w?d.fire(new a.ErrorEvent(w)):P&&(a.extend(d,P),P.bounds&&(d.tileBounds=new _e(P.bounds,d.minzoom,d.maxzoom)),a.postTurnstileEvent(P.tiles,d.map._requestManager._customAccessToken),a.postMapLoadEvent(P.tiles,d.map._getMapId(),d.map._requestManager._skuToken,d.map._requestManager._customAccessToken),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},h.prototype.loaded=function(){return this._loaded},h.prototype.hasTile=function(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)},h.prototype.onAdd=function(d){this.map=d,this.load()},h.prototype.setSourceProperty=function(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d();var w=this.map.style.sourceCaches[this.id];w.clearTiles(),this.load()},h.prototype.setTiles=function(d){var w=this;return this.setSourceProperty(function(){w._options.tiles=d}),this},h.prototype.setUrl=function(d){var w=this;return this.setSourceProperty(function(){w.url=d,w._options.url=d}),this},h.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},h.prototype.serialize=function(){return a.extend({},this._options)},h.prototype.loadTile=function(d,w){var P=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),F={request:this.map._requestManager.transformRequest(P,a.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};F.request.collectResourceTiming=this._collectResourceTiming,!d.actor||d.state==="expired"?(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",F,G.bind(this))):d.state==="loading"?d.reloadCallback=w:d.request=d.actor.send("reloadTile",F,G.bind(this));function G(K,te){if(delete d.request,d.aborted)return w(null);if(K&&K.status!==404)return w(K);te&&te.resourceTiming&&(d.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&d.setExpiryData(te),d.loadVectorData(te,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),w(null),d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)}},h.prototype.abortTile=function(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)},h.prototype.unloadTile=function(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)},h.prototype.hasTransition=function(){return!1},h}(a.Evented),Ae=function(g){function h(b,d,w,P){g.call(this),this.id=b,this.dispatcher=w,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},d),a.extend(this,a.pick(d,["url","scheme","tileSize"]))}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.load=function(){var d=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Me(this._options,this.map._requestManager,function(w,P){d._tileJSONRequest=null,d._loaded=!0,w?d.fire(new a.ErrorEvent(w)):P&&(a.extend(d,P),P.bounds&&(d.tileBounds=new _e(P.bounds,d.minzoom,d.maxzoom)),a.postTurnstileEvent(P.tiles),a.postMapLoadEvent(P.tiles,d.map._getMapId(),d.map._requestManager._skuToken),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},h.prototype.loaded=function(){return this._loaded},h.prototype.onAdd=function(d){this.map=d,this.load()},h.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},h.prototype.serialize=function(){return a.extend({},this._options)},h.prototype.hasTile=function(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)},h.prototype.loadTile=function(d,w){var P=this,F=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);d.request=a.getImage(this.map._requestManager.transformRequest(F,a.ResourceType.Tile),function(G,K){if(delete d.request,d.aborted)d.state="unloaded",w(null);else if(G)d.state="errored",w(G);else if(K){P.map._refreshExpiredTiles&&d.setExpiryData(K),delete K.cacheControl,delete K.expires;var te=P.map.painter.context,fe=te.gl;d.texture=P.map.painter.getTileTexture(K.width),d.texture?d.texture.update(K,{useMipmap:!0}):(d.texture=new a.Texture(te,K,fe.RGBA,{useMipmap:!0}),d.texture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),te.extTextureFilterAnisotropic&&fe.texParameterf(fe.TEXTURE_2D,te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,te.extTextureFilterAnisotropicMax)),d.state="loaded",a.cacheEntryPossiblyAdded(P.dispatcher),w(null)}})},h.prototype.abortTile=function(d,w){d.request&&(d.request.cancel(),delete d.request),w()},h.prototype.unloadTile=function(d,w){d.texture&&this.map.painter.saveTileTexture(d.texture),w()},h.prototype.hasTransition=function(){return!1},h}(a.Evented),Le=function(g){function h(b,d,w,P){g.call(this,b,d,w,P),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},h.prototype.loadTile=function(d,w){var P=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);d.request=a.getImage(this.map._requestManager.transformRequest(P,a.ResourceType.Tile),F.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID);function F(K,te){if(delete d.request,d.aborted)d.state="unloaded",w(null);else if(K)d.state="errored",w(K);else if(te){this.map._refreshExpiredTiles&&d.setExpiryData(te),delete te.cacheControl,delete te.expires;var fe=a.window.ImageBitmap&&te instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported(),we=fe?te:a.browser.getImageData(te,1),be={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:we,encoding:this.encoding};(!d.actor||d.state==="expired")&&(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",be,G.bind(this)))}}function G(K,te){K&&(d.state="errored",w(K)),te&&(d.dem=te,d.needsHillshadePrepare=!0,d.state="loaded",w(null))}},h.prototype._getNeighboringTiles=function(d){var w=d.canonical,P=Math.pow(2,w.z),F=(w.x-1+P)%P,G=w.x===0?d.wrap-1:d.wrap,K=(w.x+1+P)%P,te=w.x+1===P?d.wrap+1:d.wrap,fe={};return fe[new a.OverscaledTileID(d.overscaledZ,G,w.z,F,w.y).key]={backfilled:!1},fe[new a.OverscaledTileID(d.overscaledZ,te,w.z,K,w.y).key]={backfilled:!1},w.y>0&&(fe[new a.OverscaledTileID(d.overscaledZ,G,w.z,F,w.y-1).key]={backfilled:!1},fe[new a.OverscaledTileID(d.overscaledZ,d.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},fe[new a.OverscaledTileID(d.overscaledZ,te,w.z,K,w.y-1).key]={backfilled:!1}),w.y+1<P&&(fe[new a.OverscaledTileID(d.overscaledZ,G,w.z,F,w.y+1).key]={backfilled:!1},fe[new a.OverscaledTileID(d.overscaledZ,d.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},fe[new a.OverscaledTileID(d.overscaledZ,te,w.z,K,w.y+1).key]={backfilled:!1}),fe},h.prototype.unloadTile=function(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})},h}(Ae),Ke=function(g){function h(b,d,w,P){g.call(this),this.id=b,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=w.getActor(),this.setEventedParent(P),this._data=d.data,this._options=a.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var F=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*F,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*F,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.EXTENT,radius:(d.clusterRadius||50)*F,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.load=function(){var d=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(w){if(w){d.fire(new a.ErrorEvent(w));return}var P={dataType:"source",sourceDataType:"metadata"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(P.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new a.Event("data",P))})},h.prototype.onAdd=function(d){this.map=d,this.load()},h.prototype.setData=function(d){var w=this;return this._data=d,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(P){if(P){w.fire(new a.ErrorEvent(P));return}var F={dataType:"source",sourceDataType:"content"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(F.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new a.Event("data",F))}),this},h.prototype.getClusterExpansionZoom=function(d,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},w),this},h.prototype.getClusterChildren=function(d,w){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},w),this},h.prototype.getClusterLeaves=function(d,w,P,F){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:w,offset:P},F),this},h.prototype._updateWorkerData=function(d){var w=this;this._loaded=!1;var P=a.extend({},this.workerOptions),F=this._data;typeof F=="string"?(P.request=this.map._requestManager.transformRequest(a.browser.resolveURL(F),a.ResourceType.Source),P.request.collectResourceTiming=this._collectResourceTiming):P.data=JSON.stringify(F),this.actor.send(this.type+".loadData",P,function(G,K){w._removed||K&&K.abandoned||(w._loaded=!0,K&&K.resourceTiming&&K.resourceTiming[w.id]&&(w._resourceTiming=K.resourceTiming[w.id].slice(0)),w.actor.send(w.type+".coalesce",{source:P.source},null),d(G))})},h.prototype.loaded=function(){return this._loaded},h.prototype.loadTile=function(d,w){var P=this,F=d.actor?"reloadTile":"loadTile";d.actor=this.actor;var G={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(F,G,function(K,te){return delete d.request,d.unloadVectorData(),d.aborted?w(null):K?w(K):(d.loadVectorData(te,P.map.painter,F==="reloadTile"),w(null))})},h.prototype.abortTile=function(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0},h.prototype.unloadTile=function(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})},h.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},h.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},h.prototype.hasTransition=function(){return!1},h}(a.Evented),ct=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),it=function(g){function h(b,d,w,P){g.call(this),this.id=b,this.dispatcher=w,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=d}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.load=function(d,w){var P=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(F,G){P._loaded=!0,F?P.fire(new a.ErrorEvent(F)):G&&(P.image=G,d&&(P.coordinates=d),w&&w(),P._finishLoading())})},h.prototype.loaded=function(){return this._loaded},h.prototype.updateImage=function(d){var w=this;return!this.image||!d.url?this:(this.options.url=d.url,this.load(d.coordinates,function(){w.texture=null}),this)},h.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},h.prototype.onAdd=function(d){this.map=d,this.load()},h.prototype.setCoordinates=function(d){var w=this;this.coordinates=d;var P=d.map(a.MercatorCoordinate.fromLngLat);this.tileID=ut(P),this.minzoom=this.maxzoom=this.tileID.z;var F=P.map(function(G){return w.tileID.getTilePoint(G)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(F[0].x,F[0].y,0,0),this._boundsArray.emplaceBack(F[1].x,F[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(F[3].x,F[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(F[2].x,F[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},h.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var d=this.map.painter.context,w=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ct.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(d,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(var P in this.tiles){var F=this.tiles[P];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},h.prototype.loadTile=function(d,w){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},w(null)):(d.state="errored",w(null))},h.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},h.prototype.hasTransition=function(){return!1},h}(a.Evented);function ut(g){for(var h=1/0,b=1/0,d=-1/0,w=-1/0,P=0,F=g;P<F.length;P+=1){var G=F[P];h=Math.min(h,G.x),b=Math.min(b,G.y),d=Math.max(d,G.x),w=Math.max(w,G.y)}var K=d-h,te=w-b,fe=Math.max(K,te),we=Math.max(0,Math.floor(-Math.log(fe)/Math.LN2)),be=Math.pow(2,we);return new a.CanonicalTileID(we,Math.floor((h+d)/2*be),Math.floor((b+w)/2*be))}var Ge=function(g){function h(b,d,w,P){g.call(this,b,d,w,P),this.roundZoom=!0,this.type="video",this.options=d}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.load=function(){var d=this;this._loaded=!1;var w=this.options;this.urls=[];for(var P=0,F=w.urls;P<F.length;P+=1){var G=F[P];this.urls.push(this.map._requestManager.transformRequest(G,a.ResourceType.Source).url)}a.getVideo(this.urls,function(K,te){d._loaded=!0,K?d.fire(new a.ErrorEvent(K)):te&&(d.video=te,d.video.loop=!0,d.video.addEventListener("playing",function(){d.map.triggerRepaint()}),d.map&&d.video.play(),d._finishLoading())})},h.prototype.pause=function(){this.video&&this.video.pause()},h.prototype.play=function(){this.video&&this.video.play()},h.prototype.seek=function(d){if(this.video){var w=this.video.seekable;d<w.start(0)||d>w.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+w.start(0)+" and "+w.end(0)+"-second mark."))):this.video.currentTime=d}},h.prototype.getVideo=function(){return this.video},h.prototype.onAdd=function(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},h.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var d=this.map.painter.context,w=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ct.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.texSubImage2D(w.TEXTURE_2D,0,0,0,w.RGBA,w.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(d,this.video,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(var P in this.tiles){var F=this.tiles[P];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},h.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},h.prototype.hasTransition=function(){return this.video&&!this.video.paused},h}(it),xt=function(g){function h(b,d,w,P){g.call(this,b,d,w,P),d.coordinates?(!Array.isArray(d.coordinates)||d.coordinates.length!==4||d.coordinates.some(function(F){return!Array.isArray(F)||F.length!==2||F.some(function(G){return typeof G!="number"})}))&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas!="string"&&!(d.canvas instanceof a.window.HTMLCanvasElement)&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate!==void 0?d.animate:!0}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},h.prototype.getCanvas=function(){return this.canvas},h.prototype.onAdd=function(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()},h.prototype.onRemove=function(){this.pause()},h.prototype.prepare=function(){var d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,ct.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(w,this.canvas,P.RGBA,{premultiply:!0});for(var F in this.tiles){var G=this.tiles[F];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},h.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},h.prototype.hasTransition=function(){return this._playing},h.prototype._hasInvalidDimensions=function(){for(var d=0,w=[this.canvas.width,this.canvas.height];d<w.length;d+=1){var P=w[d];if(isNaN(P)||P<=0)return!0}return!1},h}(it),at={vector:Te,raster:Ae,"raster-dem":Le,geojson:Ke,video:Ge,image:it,canvas:xt},At=function(g,h,b,d){var w=new at[h.type](g,h,b,d);if(w.id!==g)throw new Error("Expected Source id to be "+g+" instead of "+w.id);return a.bindAll(["load","abort","unload","serialize","prepare"],w),w},kt=function(g){return at[g]},mt=function(g,h){at[g]=h};function ye(g,h){var b=a.identity([]);return a.translate(b,b,[1,1,0]),a.scale(b,b,[g.width*.5,g.height*.5,1]),a.multiply(b,b,g.calculatePosMatrix(h.toUnwrapped()))}function Re(g,h,b){if(g)for(var d=0,w=g;d<w.length;d+=1){var P=w[d],F=h[P];if(F&&F.source===b&&F.type==="fill-extrusion")return!0}else for(var G in h){var K=h[G];if(K.source===b&&K.type==="fill-extrusion")return!0}return!1}function xe(g,h,b,d,w,P){var F=Re(w&&w.layers,h,g.id),G=P.maxPitchScaleFactor(),K=g.tilesIn(d,G,F);K.sort(tt);for(var te=[],fe=0,we=K;fe<we.length;fe+=1){var be=we[fe];te.push({wrappedTileID:be.tileID.wrapped().key,queryResults:be.tile.queryRenderedFeatures(h,b,g._state,be.queryGeometry,be.cameraQueryGeometry,be.scale,w,P,G,ye(g.transform,be.tileID))})}var Ie=Bt(te);for(var Ye in Ie)Ie[Ye].forEach(function(Ze){var Oe=Ze.feature,Xe=g.getFeatureState(Oe.layer["source-layer"],Oe.id);Oe.source=Oe.layer.source,Oe.layer["source-layer"]&&(Oe.sourceLayer=Oe.layer["source-layer"]),Oe.state=Xe});return Ie}function et(g,h,b,d,w,P,F){for(var G={},K=P.queryRenderedSymbols(d),te=[],fe=0,we=Object.keys(K).map(Number);fe<we.length;fe+=1){var be=we[fe];te.push(F[be])}te.sort(tt);for(var Ie=function(){var ht=Ze[Ye],zt=ht.featureIndex.lookupSymbolFeatures(K[ht.bucketInstanceId],h,ht.bucketIndex,ht.sourceLayerIndex,w.filter,w.layers,w.availableImages,g);for(var qt in zt){var Qt=G[qt]=G[qt]||[],rr=zt[qt];rr.sort(function(_r,Pr){var Sr=ht.featureSortOrder;if(Sr){var Xr=Sr.indexOf(_r.featureIndex),Fa=Sr.indexOf(Pr.featureIndex);return Fa-Xr}else return Pr.featureIndex-_r.featureIndex});for(var Yt=0,ar=rr;Yt<ar.length;Yt+=1){var cr=ar[Yt];Qt.push(cr)}}},Ye=0,Ze=te;Ye<Ze.length;Ye+=1)Ie();var Oe=function(ht){G[ht].forEach(function(zt){var qt=zt.feature,Qt=g[ht],rr=b[Qt.source],Yt=rr.getFeatureState(qt.layer["source-layer"],qt.id);qt.source=qt.layer.source,qt.layer["source-layer"]&&(qt.sourceLayer=qt.layer["source-layer"]),qt.state=Yt})};for(var Xe in G)Oe(Xe);return G}function vt(g,h){for(var b=g.getRenderableIds().map(function(K){return g.getTileByID(K)}),d=[],w={},P=0;P<b.length;P++){var F=b[P],G=F.tileID.canonical.key;w[G]||(w[G]=!0,F.querySourceFeatures(d,h))}return d}function tt(g,h){var b=g.tileID,d=h.tileID;return b.overscaledZ-d.overscaledZ||b.canonical.y-d.canonical.y||b.wrap-d.wrap||b.canonical.x-d.canonical.x}function Bt(g){for(var h={},b={},d=0,w=g;d<w.length;d+=1){var P=w[d],F=P.queryResults,G=P.wrappedTileID,K=b[G]=b[G]||{};for(var te in F)for(var fe=F[te],we=K[te]=K[te]||{},be=h[te]=h[te]||[],Ie=0,Ye=fe;Ie<Ye.length;Ie+=1){var Ze=Ye[Ie];we[Ze.featureIndex]||(we[Ze.featureIndex]=!0,be.push(Ze))}}return h}var Mt=function(h,b){this.max=h,this.onRemove=b,this.reset()};Mt.prototype.reset=function(){for(var h in this.data)for(var b=0,d=this.data[h];b<d.length;b+=1){var w=d[b];w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value)}return this.data={},this.order=[],this},Mt.prototype.add=function(h,b,d){var w=this,P=h.wrapped().key;this.data[P]===void 0&&(this.data[P]=[]);var F={value:b,timeout:void 0};if(d!==void 0&&(F.timeout=setTimeout(function(){w.remove(h,F)},d)),this.data[P].push(F),this.order.push(P),this.order.length>this.max){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},Mt.prototype.has=function(h){return h.wrapped().key in this.data},Mt.prototype.getAndRemove=function(h){return this.has(h)?this._getAndRemoveByKey(h.wrapped().key):null},Mt.prototype._getAndRemoveByKey=function(h){var b=this.data[h].shift();return b.timeout&&clearTimeout(b.timeout),this.data[h].length===0&&delete this.data[h],this.order.splice(this.order.indexOf(h),1),b.value},Mt.prototype.getByKey=function(h){var b=this.data[h];return b?b[0].value:null},Mt.prototype.get=function(h){if(!this.has(h))return null;var b=this.data[h.wrapped().key][0];return b.value},Mt.prototype.remove=function(h,b){if(!this.has(h))return this;var d=h.wrapped().key,w=b===void 0?0:this.data[d].indexOf(b),P=this.data[d][w];return this.data[d].splice(w,1),P.timeout&&clearTimeout(P.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(P.value),this.order.splice(this.order.indexOf(d),1),this},Mt.prototype.setMaxSize=function(h){for(this.max=h;this.order.length>this.max;){var b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this},Mt.prototype.filter=function(h){var b=[];for(var d in this.data)for(var w=0,P=this.data[d];w<P.length;w+=1){var F=P[w];h(F.value)||b.push(F)}for(var G=0,K=b;G<K.length;G+=1){var te=K[G];this.remove(te.value.tileID,te)}};var Ct=function(h,b,d){this.context=h;var w=h.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),h.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,b.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete b.arrayBuffer};Ct.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ct.prototype.updateData=function(h){var b=this.context.gl;this.context.unbindVAO(),this.bind(),b.bufferSubData(b.ELEMENT_ARRAY_BUFFER,0,h.arrayBuffer)},Ct.prototype.destroy=function(){var h=this.context.gl;this.buffer&&(h.deleteBuffer(this.buffer),delete this.buffer)};var Rt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ot=function(h,b,d,w){this.length=b.length,this.attributes=d,this.itemSize=b.bytesPerElement,this.dynamicDraw=w,this.context=h;var P=h.gl;this.buffer=P.createBuffer(),h.bindVertexBuffer.set(this.buffer),P.bufferData(P.ARRAY_BUFFER,b.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete b.arrayBuffer};Ot.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ot.prototype.updateData=function(h){var b=this.context.gl;this.bind(),b.bufferSubData(b.ARRAY_BUFFER,0,h.arrayBuffer)},Ot.prototype.enableAttributes=function(h,b){for(var d=0;d<this.attributes.length;d++){var w=this.attributes[d],P=b.attributes[w.name];P!==void 0&&h.enableVertexAttribArray(P)}},Ot.prototype.setVertexAttribPointers=function(h,b,d){for(var w=0;w<this.attributes.length;w++){var P=this.attributes[w],F=b.attributes[P.name];F!==void 0&&h.vertexAttribPointer(F,P.components,h[Rt[P.type]],!1,this.itemSize,P.offset+this.itemSize*(d||0))}},Ot.prototype.destroy=function(){var h=this.context.gl;this.buffer&&(h.deleteBuffer(this.buffer),delete this.buffer)};var gt=function(h){this.gl=h.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};gt.prototype.get=function(){return this.current},gt.prototype.set=function(h){},gt.prototype.getDefault=function(){return this.default},gt.prototype.setDefault=function(){this.set(this.default)};var Et=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return a.Color.transparent},h.prototype.set=function(d){var w=this.current;d.r===w.r&&d.g===w.g&&d.b===w.b&&d.a===w.a&&!this.dirty||(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)},h}(gt),ir=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return 1},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.clearDepth(d),this.current=d,this.dirty=!1)},h}(gt),Gt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return 0},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.clearStencil(d),this.current=d,this.dirty=!1)},h}(gt),Ne=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return[!0,!0,!0,!0]},h.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&d[3]===w[3]&&!this.dirty||(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)},h}(gt),ft=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return!0},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.depthMask(d),this.current=d,this.dirty=!1)},h}(gt),pt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return 255},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.stencilMask(d),this.current=d,this.dirty=!1)},h}(gt),xr=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},h.prototype.set=function(d){var w=this.current;d.func===w.func&&d.ref===w.ref&&d.mask===w.mask&&!this.dirty||(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)},h}(gt),pr=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){var d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]},h.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&!this.dirty||(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)},h}(gt),Tt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=d,this.dirty=!1}},h}(gt),wt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return[0,1]},h.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&!this.dirty||(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)},h}(gt),Vt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=d,this.dirty=!1}},h}(gt),Kt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return this.gl.LESS},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.depthFunc(d),this.current=d,this.dirty=!1)},h}(gt),Ht=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.BLEND):w.disable(w.BLEND),this.current=d,this.dirty=!1}},h}(gt),Ut=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){var d=this.gl;return[d.ONE,d.ZERO]},h.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&!this.dirty||(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)},h}(gt),er=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return a.Color.transparent},h.prototype.set=function(d){var w=this.current;d.r===w.r&&d.g===w.g&&d.b===w.b&&d.a===w.a&&!this.dirty||(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)},h}(gt),Mr=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return this.gl.FUNC_ADD},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.blendEquation(d),this.current=d,this.dirty=!1)},h}(gt),br=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=d,this.dirty=!1}},h}(gt),Pt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return this.gl.BACK},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.cullFace(d),this.current=d,this.dirty=!1)},h}(gt),Fe=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return this.gl.CCW},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.frontFace(d),this.current=d,this.dirty=!1)},h}(gt),He=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.useProgram(d),this.current=d,this.dirty=!1)},h}(gt),bt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return this.gl.TEXTURE0},h.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.activeTexture(d),this.current=d,this.dirty=!1)},h}(gt),dt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){var d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]},h.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&d[3]===w[3]&&!this.dirty||(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)},h}(gt),gr=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,d),this.current=d,this.dirty=!1}},h}(gt),Lr=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,d),this.current=d,this.dirty=!1}},h}(gt),Ar=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindTexture(w.TEXTURE_2D,d),this.current=d,this.dirty=!1}},h}(gt),Hr=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}},h}(gt),xa=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(d){var w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1},h}(gt),Ca=function(g){function h(b){g.call(this,b),this.vao=b.extVertexArrayObject}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(d){!this.vao||d===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)},h}(gt),Pa=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return 4},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}},h}(gt),Fi=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}},h}(gt),Ki=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}},h}(gt),gn=function(g){function h(b,d){g.call(this,b),this.context=b,this.parent=d}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getDefault=function(){return null},h}(gt),Xi=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.setDirty=function(){this.dirty=!0},h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}},h}(gn),Qn=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,d),this.current=d,this.dirty=!1}},h}(gn),Pn=function(h,b,d,w){this.context=h,this.width=b,this.height=d;var P=h.gl,F=this.framebuffer=P.createFramebuffer();this.colorAttachment=new Xi(h,F),w&&(this.depthAttachment=new Qn(h,F))};Pn.prototype.destroy=function(){var h=this.context.gl,b=this.colorAttachment.get();if(b&&h.deleteTexture(b),this.depthAttachment){var d=this.depthAttachment.get();d&&h.deleteRenderbuffer(d)}h.deleteFramebuffer(this.framebuffer)};var Gi=519,pa=function(h,b,d){this.func=h,this.mask=b,this.range=d};pa.ReadOnly=!1,pa.ReadWrite=!0,pa.disabled=new pa(Gi,pa.ReadOnly,[0,1]);var Gr=519,Qa=7680,Zr=function(h,b,d,w,P,F){this.test=h,this.ref=b,this.mask=d,this.fail=w,this.depthFail=P,this.pass=F};Zr.disabled=new Zr({func:Gr,mask:0},0,0,Qa,Qa,Qa);var vi=0,ga=1,le=771,ee=function(h,b,d){this.blendFunction=h,this.blendColor=b,this.mask=d};ee.Replace=[ga,vi],ee.disabled=new ee(ee.Replace,a.Color.transparent,[!1,!1,!1,!1]),ee.unblended=new ee(ee.Replace,a.Color.transparent,[!0,!0,!0,!0]),ee.alphaBlended=new ee([ga,le],a.Color.transparent,[!0,!0,!0,!0]);var se=1029,ce=2305,Ee=function(h,b,d){this.enable=h,this.mode=b,this.frontFace=d};Ee.disabled=new Ee(!1,se,ce),Ee.backCCW=new Ee(!0,se,ce);var Be=function(h){this.gl=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Et(this),this.clearDepth=new ir(this),this.clearStencil=new Gt(this),this.colorMask=new Ne(this),this.depthMask=new ft(this),this.stencilMask=new pt(this),this.stencilFunc=new xr(this),this.stencilOp=new pr(this),this.stencilTest=new Tt(this),this.depthRange=new wt(this),this.depthTest=new Vt(this),this.depthFunc=new Kt(this),this.blend=new Ht(this),this.blendFunc=new Ut(this),this.blendColor=new er(this),this.blendEquation=new Mr(this),this.cullFace=new br(this),this.cullFaceSide=new Pt(this),this.frontFace=new Fe(this),this.program=new He(this),this.activeTexture=new bt(this),this.viewport=new dt(this),this.bindFramebuffer=new gr(this),this.bindRenderbuffer=new Lr(this),this.bindTexture=new Ar(this),this.bindVertexBuffer=new Hr(this),this.bindElementBuffer=new xa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ca(this),this.pixelStoreUnpack=new Pa(this),this.pixelStoreUnpackPremultiplyAlpha=new Fi(this),this.pixelStoreUnpackFlipY=new Ki(this),this.extTextureFilterAnisotropic=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("MOZ_EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=h.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=h.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(h.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=h.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=h.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=h.getParameter(h.MAX_TEXTURE_SIZE)};Be.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Be.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Be.prototype.createIndexBuffer=function(h,b){return new Ct(this,h,b)},Be.prototype.createVertexBuffer=function(h,b,d){return new Ot(this,h,b,d)},Be.prototype.createRenderbuffer=function(h,b,d){var w=this.gl,P=w.createRenderbuffer();return this.bindRenderbuffer.set(P),w.renderbufferStorage(w.RENDERBUFFER,h,b,d),this.bindRenderbuffer.set(null),P},Be.prototype.createFramebuffer=function(h,b,d){return new Pn(this,h,b,d)},Be.prototype.clear=function(h){var b=h.color,d=h.depth,w=this.gl,P=0;b&&(P|=w.COLOR_BUFFER_BIT,this.clearColor.set(b),this.colorMask.set([!0,!0,!0,!0])),typeof d!="undefined"&&(P|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),w.clear(P)},Be.prototype.setCullFace=function(h){h.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(h.mode),this.frontFace.set(h.frontFace))},Be.prototype.setDepthMode=function(h){h.func===this.gl.ALWAYS&&!h.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(h.func),this.depthMask.set(h.mask),this.depthRange.set(h.range))},Be.prototype.setStencilMode=function(h){h.test.func===this.gl.ALWAYS&&!h.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(h.mask),this.stencilOp.set([h.fail,h.depthFail,h.pass]),this.stencilFunc.set({func:h.test.func,ref:h.ref,mask:h.test.mask}))},Be.prototype.setColorMode=function(h){a.deepEqual(h.blendFunction,ee.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(h.blendFunction),this.blendColor.set(h.blendColor)),this.colorMask.set(h.mask)},Be.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var rt=function(g){function h(b,d,w){var P=this;g.call(this),this.id=b,this.dispatcher=w,this.on("data",function(F){F.dataType==="source"&&F.sourceDataType==="metadata"&&(P._sourceLoaded=!0),P._sourceLoaded&&!P._paused&&F.dataType==="source"&&F.sourceDataType==="content"&&(P.reload(),P.transform&&P.update(P.transform))}),this.on("error",function(){P._sourceErrored=!0}),this._source=At(b,d,w,this),this._tiles={},this._cache=new Mt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.onAdd=function(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)},h.prototype.onRemove=function(d){this._source&&this._source.onRemove&&this._source.onRemove(d)},h.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var d in this._tiles){var w=this._tiles[d];if(w.state!=="loaded"&&w.state!=="errored")return!1}return!0},h.prototype.getSource=function(){return this._source},h.prototype.pause=function(){this._paused=!0},h.prototype.resume=function(){if(this._paused){var d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform)}},h.prototype._loadTile=function(d,w){return this._source.loadTile(d,w)},h.prototype._unloadTile=function(d){if(this._source.unloadTile)return this._source.unloadTile(d,function(){})},h.prototype._abortTile=function(d){if(this._source.abortTile)return this._source.abortTile(d,function(){})},h.prototype.serialize=function(){return this._source.serialize()},h.prototype.prepare=function(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var w in this._tiles){var P=this._tiles[w];P.upload(d),P.prepare(this.map.style.imageManager)}},h.prototype.getIds=function(){return a.values(this._tiles).map(function(d){return d.tileID}).sort(Ve).map(function(d){return d.key})},h.prototype.getRenderableIds=function(d){var w=this,P=[];for(var F in this._tiles)this._isIdRenderable(F,d)&&P.push(this._tiles[F]);return d?P.sort(function(G,K){var te=G.tileID,fe=K.tileID,we=new a.Point(te.canonical.x,te.canonical.y)._rotate(w.transform.angle),be=new a.Point(fe.canonical.x,fe.canonical.y)._rotate(w.transform.angle);return te.overscaledZ-fe.overscaledZ||be.y-we.y||be.x-we.x}).map(function(G){return G.tileID.key}):P.map(function(G){return G.tileID}).sort(Ve).map(function(G){return G.key})},h.prototype.hasRenderableParent=function(d){var w=this.findLoadedParent(d,0);return w?this._isIdRenderable(w.tileID.key):!1},h.prototype._isIdRenderable=function(d,w){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(w||!this._tiles[d].holdingForFade())},h.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")},h.prototype._reloadTile=function(d,w){var P=this._tiles[d];P&&(P.state!=="loading"&&(P.state=w),this._loadTile(P,this._tileLoaded.bind(this,P,d,w)))},h.prototype._tileLoaded=function(d,w,P,F){if(F){d.state="errored",F.status!==404?this._source.fire(new a.ErrorEvent(F,{tile:d})):this.update(this.transform);return}d.timeAdded=a.browser.now(),P==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(w,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:d,coord:d.tileID}))},h.prototype._backfillDEM=function(d){for(var w=this.getRenderableIds(),P=0;P<w.length;P++){var F=w[P];if(d.neighboringTiles&&d.neighboringTiles[F]){var G=this.getTileByID(F);K(d,G),K(G,d)}}function K(te,fe){te.needsHillshadePrepare=!0;var we=fe.tileID.canonical.x-te.tileID.canonical.x,be=fe.tileID.canonical.y-te.tileID.canonical.y,Ie=Math.pow(2,te.tileID.canonical.z),Ye=fe.tileID.key;we===0&&be===0||Math.abs(be)>1||(Math.abs(we)>1&&(Math.abs(we+Ie)===1?we+=Ie:Math.abs(we-Ie)===1&&(we-=Ie)),!(!fe.dem||!te.dem)&&(te.dem.backfillBorder(fe.dem,we,be),te.neighboringTiles&&te.neighboringTiles[Ye]&&(te.neighboringTiles[Ye].backfilled=!0)))}},h.prototype.getTile=function(d){return this.getTileByID(d.key)},h.prototype.getTileByID=function(d){return this._tiles[d]},h.prototype._retainLoadedChildren=function(d,w,P,F){for(var G in this._tiles){var K=this._tiles[G];if(!(F[G]||!K.hasData()||K.tileID.overscaledZ<=w||K.tileID.overscaledZ>P)){for(var te=K.tileID;K&&K.tileID.overscaledZ>w+1;){var fe=K.tileID.scaledTo(K.tileID.overscaledZ-1);K=this._tiles[fe.key],K&&K.hasData()&&(te=fe)}for(var we=te;we.overscaledZ>w;)if(we=we.scaledTo(we.overscaledZ-1),d[we.key]){F[te.key]=te;break}}}},h.prototype.findLoadedParent=function(d,w){if(d.key in this._loadedParentTiles){var P=this._loadedParentTiles[d.key];return P&&P.tileID.overscaledZ>=w?P:null}for(var F=d.overscaledZ-1;F>=w;F--){var G=d.scaledTo(F),K=this._getLoadedTile(G);if(K)return K}},h.prototype._getLoadedTile=function(d){var w=this._tiles[d.key];if(w&&w.hasData())return w;var P=this._cache.getByKey(d.wrapped().key);return P},h.prototype.updateCacheSize=function(d){var w=Math.ceil(d.width/this._source.tileSize)+1,P=Math.ceil(d.height/this._source.tileSize)+1,F=w*P,G=5,K=Math.floor(F*G),te=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,K):K;this._cache.setMaxSize(te)},h.prototype.handleWrapJump=function(d){var w=this._prevLng===void 0?d:this._prevLng,P=d-w,F=P/360,G=Math.round(F);if(this._prevLng=d,G){var K={};for(var te in this._tiles){var fe=this._tiles[te];fe.tileID=fe.tileID.unwrapTo(fe.tileID.wrap+G),K[fe.tileID.key]=fe}this._tiles=K;for(var we in this._timers)clearTimeout(this._timers[we]),delete this._timers[we];for(var be in this._tiles){var Ie=this._tiles[be];this._setTileReloadTimer(be,Ie)}}},h.prototype.update=function(d){var w=this;if(this.transform=d,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var P;this.used?this._source.tileID?P=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(_r){return new a.OverscaledTileID(_r.canonical.z,_r.wrap,_r.canonical.z,_r.canonical.x,_r.canonical.y)}):(P=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(P=P.filter(function(_r){return w._source.hasTile(_r)}))):P=[];var F=d.coveringZoomLevel(this._source),G=Math.max(F-h.maxOverzooming,this._source.minzoom),K=Math.max(F+h.maxUnderzooming,this._source.minzoom),te=this._updateRetainedTiles(P,F);if(yt(this._source.type)){for(var fe={},we={},be=Object.keys(te),Ie=0,Ye=be;Ie<Ye.length;Ie+=1){var Ze=Ye[Ie],Oe=te[Ze],Xe=this._tiles[Ze];if(!(!Xe||Xe.fadeEndTime&&Xe.fadeEndTime<=a.browser.now())){var ht=this.findLoadedParent(Oe,G);ht&&(this._addTile(ht.tileID),fe[ht.tileID.key]=ht.tileID),we[Ze]=Oe}}this._retainLoadedChildren(we,F,K,te);for(var zt in fe)te[zt]||(this._coveredTiles[zt]=!0,te[zt]=fe[zt])}for(var qt in te)this._tiles[qt].clearFadeHold();for(var Qt=a.keysDifference(this._tiles,te),rr=0,Yt=Qt;rr<Yt.length;rr+=1){var ar=Yt[rr],cr=this._tiles[ar];cr.hasSymbolBuckets&&!cr.holdingForFade()?cr.setHoldDuration(this.map._fadeDuration):(!cr.hasSymbolBuckets||cr.symbolFadeFinished())&&this._removeTile(ar)}this._updateLoadedParentTileCache()}},h.prototype.releaseSymbolFadeTiles=function(){for(var d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)},h.prototype._updateRetainedTiles=function(d,w){for(var P={},F={},G=Math.max(w-h.maxOverzooming,this._source.minzoom),K=Math.max(w+h.maxUnderzooming,this._source.minzoom),te={},fe=0,we=d;fe<we.length;fe+=1){var be=we[fe],Ie=this._addTile(be);P[be.key]=be,!Ie.hasData()&&w<this._source.maxzoom&&(te[be.key]=be)}this._retainLoadedChildren(te,w,K,P);for(var Ye=0,Ze=d;Ye<Ze.length;Ye+=1){var Oe=Ze[Ye],Xe=this._tiles[Oe.key];if(!Xe.hasData()){if(w+1>this._source.maxzoom){var ht=Oe.children(this._source.maxzoom)[0],zt=this.getTile(ht);if(zt&&zt.hasData()){P[ht.key]=ht;continue}}else{var qt=Oe.children(this._source.maxzoom);if(P[qt[0].key]&&P[qt[1].key]&&P[qt[2].key]&&P[qt[3].key])continue}for(var Qt=Xe.wasRequested(),rr=Oe.overscaledZ-1;rr>=G;--rr){var Yt=Oe.scaledTo(rr);if(F[Yt.key]||(F[Yt.key]=!0,Xe=this.getTile(Yt),!Xe&&Qt&&(Xe=this._addTile(Yt)),Xe&&(P[Yt.key]=Yt,Qt=Xe.wasRequested(),Xe.hasData())))break}}}return P},h.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var d in this._tiles){for(var w=[],P=void 0,F=this._tiles[d].tileID;F.overscaledZ>0;){if(F.key in this._loadedParentTiles){P=this._loadedParentTiles[F.key];break}w.push(F.key);var G=F.scaledTo(F.overscaledZ-1);if(P=this._getLoadedTile(G),P)break;F=G}for(var K=0,te=w;K<te.length;K+=1){var fe=te[K];this._loadedParentTiles[fe]=P}}},h.prototype._addTile=function(d){var w=this._tiles[d.key];if(w)return w;w=this._cache.getAndRemove(d),w&&(this._setTileReloadTimer(d.key,w),w.tileID=d,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,w)));var P=!!w;return P||(w=new a.Tile(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,d.key,w.state))),w?(w.uses++,this._tiles[d.key]=w,P||this._source.fire(new a.Event("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w):null},h.prototype._setTileReloadTimer=function(d,w){var P=this;d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);var F=w.getExpiryTimeout();F&&(this._timers[d]=setTimeout(function(){P._reloadTile(d,"expired"),delete P._timers[d]},F))},h.prototype._removeTile=function(d){var w=this._tiles[d];w&&(w.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),!(w.uses>0)&&(w.hasData()&&w.state!=="reloading"?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))},h.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var d in this._tiles)this._removeTile(d);this._cache.reset()},h.prototype.tilesIn=function(d,w,P){var F=this,G=[],K=this.transform;if(!K)return G;for(var te=P?K.getCameraQueryGeometry(d):d,fe=d.map(function(rr){return K.pointCoordinate(rr)}),we=te.map(function(rr){return K.pointCoordinate(rr)}),be=this.getIds(),Ie=1/0,Ye=1/0,Ze=-1/0,Oe=-1/0,Xe=0,ht=we;Xe<ht.length;Xe+=1){var zt=ht[Xe];Ie=Math.min(Ie,zt.x),Ye=Math.min(Ye,zt.y),Ze=Math.max(Ze,zt.x),Oe=Math.max(Oe,zt.y)}for(var qt=function(rr){var Yt=F._tiles[be[rr]];if(!Yt.holdingForFade()){var ar=Yt.tileID,cr=Math.pow(2,K.zoom-Yt.tileID.overscaledZ),_r=w*Yt.queryPadding*a.EXTENT/Yt.tileSize/cr,Pr=[ar.getTilePoint(new a.MercatorCoordinate(Ie,Ye)),ar.getTilePoint(new a.MercatorCoordinate(Ze,Oe))];if(Pr[0].x-_r<a.EXTENT&&Pr[0].y-_r<a.EXTENT&&Pr[1].x+_r>=0&&Pr[1].y+_r>=0){var Sr=fe.map(function(Fa){return ar.getTilePoint(Fa)}),Xr=we.map(function(Fa){return ar.getTilePoint(Fa)});G.push({tile:Yt,tileID:ar,queryGeometry:Sr,cameraQueryGeometry:Xr,scale:cr})}}},Qt=0;Qt<be.length;Qt++)qt(Qt);return G},h.prototype.getVisibleCoordinates=function(d){for(var w=this,P=this.getRenderableIds(d).map(function(te){return w._tiles[te].tileID}),F=0,G=P;F<G.length;F+=1){var K=G[F];K.posMatrix=this.transform.calculatePosMatrix(K.toUnwrapped())}return P},h.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(yt(this._source.type))for(var d in this._tiles){var w=this._tiles[d];if(w.fadeEndTime!==void 0&&w.fadeEndTime>=a.browser.now())return!0}return!1},h.prototype.setFeatureState=function(d,w,P){d=d||"_geojsonTileLayer",this._state.updateState(d,w,P)},h.prototype.removeFeatureState=function(d,w,P){d=d||"_geojsonTileLayer",this._state.removeFeatureState(d,w,P)},h.prototype.getFeatureState=function(d,w){return d=d||"_geojsonTileLayer",this._state.getState(d,w)},h.prototype.setDependencies=function(d,w,P){var F=this._tiles[d];F&&F.setDependencies(w,P)},h.prototype.reloadTilesForDependencies=function(d,w){for(var P in this._tiles){var F=this._tiles[P];F.hasDependency(d,w)&&this._reloadTile(P,"reloading")}this._cache.filter(function(G){return!G.hasDependency(d,w)})},h}(a.Evented);rt.maxOverzooming=10,rt.maxUnderzooming=3;function Ve(g,h){var b=Math.abs(g.wrap*2)-+(g.wrap<0),d=Math.abs(h.wrap*2)-+(h.wrap<0);return g.overscaledZ-h.overscaledZ||d-b||h.canonical.y-g.canonical.y||h.canonical.x-g.canonical.x}function yt(g){return g==="raster"||g==="image"||g==="video"}function Dt(){return new a.window.Worker(wn.workerUrl)}var Ft="mapboxgl_preloaded_worker_pool",tr=function(){this.active={}};tr.prototype.acquire=function(h){if(!this.workers)for(this.workers=[];this.workers.length<tr.workerCount;)this.workers.push(new Dt);return this.active[h]=!0,this.workers.slice()},tr.prototype.release=function(h){delete this.active[h],this.numActive()===0&&(this.workers.forEach(function(b){b.terminate()}),this.workers=null)},tr.prototype.isPreloaded=function(){return!!this.active[Ft]},tr.prototype.numActive=function(){return Object.keys(this.active).length};var Wt=Math.floor(a.browser.hardwareConcurrency/2);tr.workerCount=Math.max(Math.min(Wt,6),1);var Tr;function Yr(){return Tr||(Tr=new tr),Tr}function Br(){var g=Yr();g.acquire(Ft)}function ca(){var g=Tr;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Ft),Tr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function ua(g,h){var b={};for(var d in g)d!=="ref"&&(b[d]=g[d]);return a.refProperties.forEach(function(w){w in h&&(b[w]=h[w])}),b}function Na(g){g=g.slice();for(var h=Object.create(null),b=0;b<g.length;b++)h[g[b].id]=g[b];for(var d=0;d<g.length;d++)"ref"in g[d]&&(g[d]=ua(g[d],h[g[d].ref]));return g}function ii(){var g={},h=a.styleSpec.$version;for(var b in a.styleSpec.$root){var d=a.styleSpec.$root[b];if(d.required){var w=null;b==="version"?w=h:d.type==="array"?w=[]:w={},w!=null&&(g[b]=w)}}return g}var Wr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function yr(g,h,b){b.push({command:Wr.addSource,args:[g,h[g]]})}function ea(g,h,b){h.push({command:Wr.removeSource,args:[g]}),b[g]=!0}function _a(g,h,b,d){ea(g,b,d),yr(g,h,b)}function nr(g,h,b){var d;for(d in g[b])if(g[b].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(g[b][d],h[b][d]))return!1;for(d in h[b])if(h[b].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(g[b][d],h[b][d]))return!1;return!0}function wi(g,h,b,d){g=g||{},h=h||{};var w;for(w in g)g.hasOwnProperty(w)&&(h.hasOwnProperty(w)||ea(w,b,d));for(w in h)h.hasOwnProperty(w)&&(g.hasOwnProperty(w)?a.deepEqual(g[w],h[w])||(g[w].type==="geojson"&&h[w].type==="geojson"&&nr(g,h,w)?b.push({command:Wr.setGeoJSONSourceData,args:[w,h[w].data]}):_a(w,h,b,d)):yr(w,h,b))}function Da(g,h,b,d,w,P){g=g||{},h=h||{};var F;for(F in g)g.hasOwnProperty(F)&&(a.deepEqual(g[F],h[F])||b.push({command:P,args:[d,F,h[F],w]}));for(F in h)!h.hasOwnProperty(F)||g.hasOwnProperty(F)||a.deepEqual(g[F],h[F])||b.push({command:P,args:[d,F,h[F],w]})}function si(g){return g.id}function fa(g,h){return g[h.id]=h,g}function Dn(g,h,b){g=g||[],h=h||[];var d=g.map(si),w=h.map(si),P=g.reduce(fa,{}),F=h.reduce(fa,{}),G=d.slice(),K=Object.create(null),te,fe,we,be,Ie,Ye,Ze;for(te=0,fe=0;te<d.length;te++)we=d[te],F.hasOwnProperty(we)?fe++:(b.push({command:Wr.removeLayer,args:[we]}),G.splice(G.indexOf(we,fe),1));for(te=0,fe=0;te<w.length;te++)we=w[w.length-1-te],G[G.length-1-te]!==we&&(P.hasOwnProperty(we)?(b.push({command:Wr.removeLayer,args:[we]}),G.splice(G.lastIndexOf(we,G.length-fe),1)):fe++,Ye=G[G.length-te],b.push({command:Wr.addLayer,args:[F[we],Ye]}),G.splice(G.length-te,0,we),K[we]=!0);for(te=0;te<w.length;te++)if(we=w[te],be=P[we],Ie=F[we],!(K[we]||a.deepEqual(be,Ie))){if(!a.deepEqual(be.source,Ie.source)||!a.deepEqual(be["source-layer"],Ie["source-layer"])||!a.deepEqual(be.type,Ie.type)){b.push({command:Wr.removeLayer,args:[we]}),Ye=G[G.lastIndexOf(we)+1],b.push({command:Wr.addLayer,args:[Ie,Ye]});continue}Da(be.layout,Ie.layout,b,we,null,Wr.setLayoutProperty),Da(be.paint,Ie.paint,b,we,null,Wr.setPaintProperty),a.deepEqual(be.filter,Ie.filter)||b.push({command:Wr.setFilter,args:[we,Ie.filter]}),(!a.deepEqual(be.minzoom,Ie.minzoom)||!a.deepEqual(be.maxzoom,Ie.maxzoom))&&b.push({command:Wr.setLayerZoomRange,args:[we,Ie.minzoom,Ie.maxzoom]});for(Ze in be)be.hasOwnProperty(Ze)&&(Ze==="layout"||Ze==="paint"||Ze==="filter"||Ze==="metadata"||Ze==="minzoom"||Ze==="maxzoom"||(Ze.indexOf("paint.")===0?Da(be[Ze],Ie[Ze],b,we,Ze.slice(6),Wr.setPaintProperty):a.deepEqual(be[Ze],Ie[Ze])||b.push({command:Wr.setLayerProperty,args:[we,Ze,Ie[Ze]]})));for(Ze in Ie)!Ie.hasOwnProperty(Ze)||be.hasOwnProperty(Ze)||Ze==="layout"||Ze==="paint"||Ze==="filter"||Ze==="metadata"||Ze==="minzoom"||Ze==="maxzoom"||(Ze.indexOf("paint.")===0?Da(be[Ze],Ie[Ze],b,we,Ze.slice(6),Wr.setPaintProperty):a.deepEqual(be[Ze],Ie[Ze])||b.push({command:Wr.setLayerProperty,args:[we,Ze,Ie[Ze]]}))}}function Eo(g,h){if(!g)return[{command:Wr.setStyle,args:[h]}];var b=[];try{if(!a.deepEqual(g.version,h.version))return[{command:Wr.setStyle,args:[h]}];a.deepEqual(g.center,h.center)||b.push({command:Wr.setCenter,args:[h.center]}),a.deepEqual(g.zoom,h.zoom)||b.push({command:Wr.setZoom,args:[h.zoom]}),a.deepEqual(g.bearing,h.bearing)||b.push({command:Wr.setBearing,args:[h.bearing]}),a.deepEqual(g.pitch,h.pitch)||b.push({command:Wr.setPitch,args:[h.pitch]}),a.deepEqual(g.sprite,h.sprite)||b.push({command:Wr.setSprite,args:[h.sprite]}),a.deepEqual(g.glyphs,h.glyphs)||b.push({command:Wr.setGlyphs,args:[h.glyphs]}),a.deepEqual(g.transition,h.transition)||b.push({command:Wr.setTransition,args:[h.transition]}),a.deepEqual(g.light,h.light)||b.push({command:Wr.setLight,args:[h.light]});var d={},w=[];wi(g.sources,h.sources,w,d);var P=[];g.layers&&g.layers.forEach(function(F){d[F.source]?b.push({command:Wr.removeLayer,args:[F.id]}):P.push(F)}),b=b.concat(w),Dn(P,h.layers,b)}catch(F){console.warn("Unable to compute style diff:",F),b=[{command:Wr.setStyle,args:[h]}]}return b}var Ms=function(h,b){this.reset(h,b)};Ms.prototype.reset=function(h,b){this.points=h||[],this._distances=[0];for(var d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(b||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Ms.prototype.lerp=function(h){if(this.points.length===1)return this.points[0];h=a.clamp(h,0,1);for(var b=1,d=this._distances[b],w=h*this.paddedLength+this.padding;d<w&&b<this._distances.length;)d=this._distances[++b];var P=b-1,F=this._distances[P],G=d-F,K=G>0?(w-F)/G:0;return this.points[P].mult(1-K).add(this.points[b].mult(K))};var Ya=function(h,b,d){var w=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(h/d),this.yCellCount=Math.ceil(b/d);for(var F=0;F<this.xCellCount*this.yCellCount;F++)w.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=h,this.height=b,this.xScale=this.xCellCount/h,this.yScale=this.yCellCount/b,this.boxUid=0,this.circleUid=0};Ya.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ya.prototype.insert=function(h,b,d,w,P){this._forEachCell(b,d,w,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(h),this.bboxes.push(b),this.bboxes.push(d),this.bboxes.push(w),this.bboxes.push(P)},Ya.prototype.insertCircle=function(h,b,d,w){this._forEachCell(b-w,d-w,b+w,d+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(h),this.circles.push(b),this.circles.push(d),this.circles.push(w)},Ya.prototype._insertBoxCell=function(h,b,d,w,P,F){this.boxCells[P].push(F)},Ya.prototype._insertCircleCell=function(h,b,d,w,P,F){this.circleCells[P].push(F)},Ya.prototype._query=function(h,b,d,w,P,F){if(d<0||h>this.width||w<0||b>this.height)return P?!1:[];var G=[];if(h<=0&&b<=0&&this.width<=d&&this.height<=w){if(P)return!0;for(var K=0;K<this.boxKeys.length;K++)G.push({key:this.boxKeys[K],x1:this.bboxes[K*4],y1:this.bboxes[K*4+1],x2:this.bboxes[K*4+2],y2:this.bboxes[K*4+3]});for(var te=0;te<this.circleKeys.length;te++){var fe=this.circles[te*3],we=this.circles[te*3+1],be=this.circles[te*3+2];G.push({key:this.circleKeys[te],x1:fe-be,y1:we-be,x2:fe+be,y2:we+be})}return F?G.filter(F):G}else{var Ie={hitTest:P,seenUids:{box:{},circle:{}}};return this._forEachCell(h,b,d,w,this._queryCell,G,Ie,F),P?G.length>0:G}},Ya.prototype._queryCircle=function(h,b,d,w,P){var F=h-d,G=h+d,K=b-d,te=b+d;if(G<0||F>this.width||te<0||K>this.height)return w?!1:[];var fe=[],we={hitTest:w,circle:{x:h,y:b,radius:d},seenUids:{box:{},circle:{}}};return this._forEachCell(F,K,G,te,this._queryCellCircle,fe,we,P),w?fe.length>0:fe},Ya.prototype.query=function(h,b,d,w,P){return this._query(h,b,d,w,!1,P)},Ya.prototype.hitTest=function(h,b,d,w,P){return this._query(h,b,d,w,!0,P)},Ya.prototype.hitTestCircle=function(h,b,d,w){return this._queryCircle(h,b,d,!0,w)},Ya.prototype._queryCell=function(h,b,d,w,P,F,G,K){var te=G.seenUids,fe=this.boxCells[P];if(fe!==null)for(var we=this.bboxes,be=0,Ie=fe;be<Ie.length;be+=1){var Ye=Ie[be];if(!te.box[Ye]){te.box[Ye]=!0;var Ze=Ye*4;if(h<=we[Ze+2]&&b<=we[Ze+3]&&d>=we[Ze+0]&&w>=we[Ze+1]&&(!K||K(this.boxKeys[Ye]))){if(G.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[Ye],x1:we[Ze],y1:we[Ze+1],x2:we[Ze+2],y2:we[Ze+3]})}}}var Oe=this.circleCells[P];if(Oe!==null)for(var Xe=this.circles,ht=0,zt=Oe;ht<zt.length;ht+=1){var qt=zt[ht];if(!te.circle[qt]){te.circle[qt]=!0;var Qt=qt*3;if(this._circleAndRectCollide(Xe[Qt],Xe[Qt+1],Xe[Qt+2],h,b,d,w)&&(!K||K(this.circleKeys[qt]))){if(G.hitTest)return F.push(!0),!0;var rr=Xe[Qt],Yt=Xe[Qt+1],ar=Xe[Qt+2];F.push({key:this.circleKeys[qt],x1:rr-ar,y1:Yt-ar,x2:rr+ar,y2:Yt+ar})}}}},Ya.prototype._queryCellCircle=function(h,b,d,w,P,F,G,K){var te=G.circle,fe=G.seenUids,we=this.boxCells[P];if(we!==null)for(var be=this.bboxes,Ie=0,Ye=we;Ie<Ye.length;Ie+=1){var Ze=Ye[Ie];if(!fe.box[Ze]){fe.box[Ze]=!0;var Oe=Ze*4;if(this._circleAndRectCollide(te.x,te.y,te.radius,be[Oe+0],be[Oe+1],be[Oe+2],be[Oe+3])&&(!K||K(this.boxKeys[Ze])))return F.push(!0),!0}}var Xe=this.circleCells[P];if(Xe!==null)for(var ht=this.circles,zt=0,qt=Xe;zt<qt.length;zt+=1){var Qt=qt[zt];if(!fe.circle[Qt]){fe.circle[Qt]=!0;var rr=Qt*3;if(this._circlesCollide(ht[rr],ht[rr+1],ht[rr+2],te.x,te.y,te.radius)&&(!K||K(this.circleKeys[Qt])))return F.push(!0),!0}}},Ya.prototype._forEachCell=function(h,b,d,w,P,F,G,K){for(var te=this._convertToXCellCoord(h),fe=this._convertToYCellCoord(b),we=this._convertToXCellCoord(d),be=this._convertToYCellCoord(w),Ie=te;Ie<=we;Ie++)for(var Ye=fe;Ye<=be;Ye++){var Ze=this.xCellCount*Ye+Ie;if(P.call(this,h,b,d,w,Ze,F,G,K))return}},Ya.prototype._convertToXCellCoord=function(h){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(h*this.xScale)))},Ya.prototype._convertToYCellCoord=function(h){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(h*this.yScale)))},Ya.prototype._circlesCollide=function(h,b,d,w,P,F){var G=w-h,K=P-b,te=d+F;return te*te>G*G+K*K},Ya.prototype._circleAndRectCollide=function(h,b,d,w,P,F,G){var K=(F-w)/2,te=Math.abs(h-(w+K));if(te>K+d)return!1;var fe=(G-P)/2,we=Math.abs(b-(P+fe));if(we>fe+d)return!1;if(te<=K||we<=fe)return!0;var be=te-K,Ie=we-fe;return be*be+Ie*Ie<=d*d};function $n(g,h,b,d,w){var P=a.create();return h?(a.scale(P,P,[1/w,1/w,1]),b||a.rotateZ(P,P,d.angle)):a.multiply(P,d.labelPlaneMatrix,g),P}function gu(g,h,b,d,w){if(h){var P=a.clone(g);return a.scale(P,P,[w,w,1]),b||a.rotateZ(P,P,-d.angle),P}else return d.glCoordMatrix}function Ui(g,h){var b=[g.x,g.y,0,1];Xf(b,b,h);var d=b[3];return{point:new a.Point(b[0]/d,b[1]/d),signedDistanceFromCamera:d}}function gl(g,h){return .5+.5*(g/h)}function hp(g,h){var b=g[0]/g[3],d=g[1]/g[3],w=b>=-h[0]&&b<=h[0]&&d>=-h[1]&&d<=h[1];return w}function Vc(g,h,b,d,w,P,F,G){var K=d?g.textSizeData:g.iconSizeData,te=a.evaluateSizeForZoom(K,b.transform.zoom),fe=[256/b.width*2+1,256/b.height*2+1],we=d?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;we.clear();for(var be=g.lineVertexArray,Ie=d?g.text.placedSymbolArray:g.icon.placedSymbolArray,Ye=b.transform.width/b.transform.height,Ze=!1,Oe=0;Oe<Ie.length;Oe++){var Xe=Ie.get(Oe);if(Xe.hidden||Xe.writingMode===a.WritingMode.vertical&&!Ze){ef(Xe.numGlyphs,we);continue}Ze=!1;var ht=[Xe.anchorX,Xe.anchorY,0,1];if(a.transformMat4(ht,ht,h),!hp(ht,fe)){ef(Xe.numGlyphs,we);continue}var zt=ht[3],qt=gl(b.transform.cameraToCenterDistance,zt),Qt=a.evaluateSizeForFeature(K,te,Xe),rr=F?Qt/qt:Qt*qt,Yt=new a.Point(Xe.anchorX,Xe.anchorY),ar=Ui(Yt,w).point,cr={},_r=Tv(Xe,rr,!1,G,h,w,P,g.glyphOffsetArray,be,we,ar,Yt,cr,Ye);Ze=_r.useVertical,(_r.notEnoughRoom||Ze||_r.needsFlipping&&Tv(Xe,rr,!0,G,h,w,P,g.glyphOffsetArray,be,we,ar,Yt,cr,Ye).notEnoughRoom)&&ef(Xe.numGlyphs,we)}d?g.text.dynamicLayoutVertexBuffer.updateData(we):g.icon.dynamicLayoutVertexBuffer.updateData(we)}function Hc(g,h,b,d,w,P,F,G,K,te,fe){var we=G.glyphStartIndex+G.numGlyphs,be=G.lineStartIndex,Ie=G.lineStartIndex+G.lineLength,Ye=h.getoffsetX(G.glyphStartIndex),Ze=h.getoffsetX(we-1),Oe=_l(g*Ye,b,d,w,P,F,G.segment,be,Ie,K,te,fe);if(!Oe)return null;var Xe=_l(g*Ze,b,d,w,P,F,G.segment,be,Ie,K,te,fe);return Xe?{first:Oe,last:Xe}:null}function wv(g,h,b,d){if(g===a.WritingMode.horizontal){var w=Math.abs(b.y-h.y),P=Math.abs(b.x-h.x)*d;if(w>P)return{useVertical:!0}}return(g===a.WritingMode.vertical?h.y<b.y:h.x>b.x)?{needsFlipping:!0}:null}function Tv(g,h,b,d,w,P,F,G,K,te,fe,we,be,Ie){var Ye=h/24,Ze=g.lineOffsetX*Ye,Oe=g.lineOffsetY*Ye,Xe;if(g.numGlyphs>1){var ht=g.glyphStartIndex+g.numGlyphs,zt=g.lineStartIndex,qt=g.lineStartIndex+g.lineLength,Qt=Hc(Ye,G,Ze,Oe,b,fe,we,g,K,P,be);if(!Qt)return{notEnoughRoom:!0};var rr=Ui(Qt.first.point,F).point,Yt=Ui(Qt.last.point,F).point;if(d&&!b){var ar=wv(g.writingMode,rr,Yt,Ie);if(ar)return ar}Xe=[Qt.first];for(var cr=g.glyphStartIndex+1;cr<ht-1;cr++)Xe.push(_l(Ye*G.getoffsetX(cr),Ze,Oe,b,fe,we,g.segment,zt,qt,K,P,be));Xe.push(Qt.last)}else{if(d&&!b){var _r=Ui(we,w).point,Pr=g.lineStartIndex+g.segment+1,Sr=new a.Point(K.getx(Pr),K.gety(Pr)),Xr=Ui(Sr,w),Fa=Xr.signedDistanceFromCamera>0?Xr.point:_u(we,Sr,_r,1,w),ba=wv(g.writingMode,_r,Fa,Ie);if(ba)return ba}var qr=_l(Ye*G.getoffsetX(g.glyphStartIndex),Ze,Oe,b,fe,we,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,K,P,be);if(!qr)return{notEnoughRoom:!0};Xe=[qr]}for(var ka=0,ia=Xe;ka<ia.length;ka+=1){var Wa=ia[ka];a.addDynamicAttributes(te,Wa.point,Wa.angle)}return{}}function _u(g,h,b,d,w){var P=Ui(g.add(g.sub(h)._unit()),w).point,F=b.sub(P);return b.add(F._mult(d/F.mag()))}function _l(g,h,b,d,w,P,F,G,K,te,fe,we){var be=d?g-h:g+h,Ie=be>0?1:-1,Ye=0;d&&(Ie*=-1,Ye=Math.PI),Ie<0&&(Ye+=Math.PI);for(var Ze=Ie>0?G+F:G+F+1,Oe=w,Xe=w,ht=0,zt=0,qt=Math.abs(be),Qt=[];ht+zt<=qt;){if(Ze+=Ie,Ze<G||Ze>=K)return null;if(Xe=Oe,Qt.push(Oe),Oe=we[Ze],Oe===void 0){var rr=new a.Point(te.getx(Ze),te.gety(Ze)),Yt=Ui(rr,fe);if(Yt.signedDistanceFromCamera>0)Oe=we[Ze]=Yt.point;else{var ar=Ze-Ie,cr=ht===0?P:new a.Point(te.getx(ar),te.gety(ar));Oe=_u(cr,rr,Xe,qt-ht+1,fe)}}ht+=zt,zt=Xe.dist(Oe)}var _r=(qt-ht)/zt,Pr=Oe.sub(Xe),Sr=Pr.mult(_r)._add(Xe);Sr._add(Pr._unit()._perp()._mult(b*Ie));var Xr=Ye+Math.atan2(Oe.y-Xe.y,Oe.x-Xe.x);return Qt.push(Sr),{point:Sr,angle:Xr,path:Qt}}var vp=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ef(g,h){for(var b=0;b<g;b++){var d=h.length;h.resize(d+4),h.float32.set(vp,d*3)}}function Xf(g,h,b){var d=h[0],w=h[1];return g[0]=b[0]*d+b[4]*w+b[12],g[1]=b[1]*d+b[5]*w+b[13],g[3]=b[3]*d+b[7]*w+b[15],g}var Qi=100,Zo=function(h,b,d){b===void 0&&(b=new Ya(h.width+2*Qi,h.height+2*Qi,25)),d===void 0&&(d=new Ya(h.width+2*Qi,h.height+2*Qi,25)),this.transform=h,this.grid=b,this.ignoredGrid=d,this.pitchfactor=Math.cos(h._pitch)*h.cameraToCenterDistance,this.screenRightBoundary=h.width+Qi,this.screenBottomBoundary=h.height+Qi,this.gridRightBoundary=h.width+2*Qi,this.gridBottomBoundary=h.height+2*Qi};Zo.prototype.placeCollisionBox=function(h,b,d,w,P){var F=this.projectAndGetPerspectiveRatio(w,h.anchorPointX,h.anchorPointY),G=d*F.perspectiveRatio,K=h.x1*G+F.point.x,te=h.y1*G+F.point.y,fe=h.x2*G+F.point.x,we=h.y2*G+F.point.y;return!this.isInsideGrid(K,te,fe,we)||!b&&this.grid.hitTest(K,te,fe,we,P)?{box:[],offscreen:!1}:{box:[K,te,fe,we],offscreen:this.isOffscreen(K,te,fe,we)}},Zo.prototype.placeCollisionCircles=function(h,b,d,w,P,F,G,K,te,fe,we,be,Ie){var Ye=[],Ze=new a.Point(b.anchorX,b.anchorY),Oe=Ui(Ze,F),Xe=gl(this.transform.cameraToCenterDistance,Oe.signedDistanceFromCamera),ht=fe?P/Xe:P*Xe,zt=ht/a.ONE_EM,qt=Ui(Ze,G).point,Qt={},rr=b.lineOffsetX*zt,Yt=b.lineOffsetY*zt,ar=Hc(zt,w,rr,Yt,!1,qt,Ze,b,d,G,Qt),cr=!1,_r=!1,Pr=!0;if(ar){for(var Sr=be*.5*Xe+Ie,Xr=new a.Point(-Qi,-Qi),Fa=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),ba=new Ms,qr=ar.first,ka=ar.last,ia=[],Wa=qr.path.length-1;Wa>=1;Wa--)ia.push(qr.path[Wa]);for(var Va=1;Va<ka.path.length;Va++)ia.push(ka.path[Va]);var Ai=Sr*2.5;if(K){var za=ia.map(function(ol){return Ui(ol,K)});za.some(function(ol){return ol.signedDistanceFromCamera<=0})?ia=[]:ia=za.map(function(ol){return ol.point})}var mi=[];if(ia.length>0){for(var na=ia[0].clone(),Oa=ia[0].clone(),en=1;en<ia.length;en++)na.x=Math.min(na.x,ia[en].x),na.y=Math.min(na.y,ia[en].y),Oa.x=Math.max(Oa.x,ia[en].x),Oa.y=Math.max(Oa.y,ia[en].y);na.x>=Xr.x&&Oa.x<=Fa.x&&na.y>=Xr.y&&Oa.y<=Fa.y?mi=[ia]:Oa.x<Xr.x||na.x>Fa.x||Oa.y<Xr.y||na.y>Fa.y?mi=[]:mi=a.clipLine([ia],Xr.x,Xr.y,Fa.x,Fa.y)}for(var Fn=0,Fs=mi;Fn<Fs.length;Fn+=1){var qs=Fs[Fn];ba.reset(qs,Sr*.25);var il=0;ba.length<=.5*Sr?il=1:il=Math.ceil(ba.paddedLength/Ai)+1;for(var Hl=0;Hl<il;Hl++){var uc=Hl/Math.max(il-1,1),Gl=ba.lerp(uc),Do=Gl.x+Qi,Zl=Gl.y+Qi;Ye.push(Do,Zl,Sr,0);var $o=Do-Sr,zo=Zl-Sr,nl=Do+Sr,zu=Zl+Sr;if(Pr=Pr&&this.isOffscreen($o,zo,nl,zu),_r=_r||this.isInsideGrid($o,zo,nl,zu),!h&&this.grid.hitTestCircle(Do,Zl,Sr,we)&&(cr=!0,!te))return{circles:[],offscreen:!1,collisionDetected:cr}}}}return{circles:!te&&cr||!_r?[]:Ye,offscreen:Pr,collisionDetected:cr}},Zo.prototype.queryRenderedSymbols=function(h){if(h.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var b=[],d=1/0,w=1/0,P=-1/0,F=-1/0,G=0,K=h;G<K.length;G+=1){var te=K[G],fe=new a.Point(te.x+Qi,te.y+Qi);d=Math.min(d,fe.x),w=Math.min(w,fe.y),P=Math.max(P,fe.x),F=Math.max(F,fe.y),b.push(fe)}for(var we=this.grid.query(d,w,P,F).concat(this.ignoredGrid.query(d,w,P,F)),be={},Ie={},Ye=0,Ze=we;Ye<Ze.length;Ye+=1){var Oe=Ze[Ye],Xe=Oe.key;if(be[Xe.bucketInstanceId]===void 0&&(be[Xe.bucketInstanceId]={}),!be[Xe.bucketInstanceId][Xe.featureIndex]){var ht=[new a.Point(Oe.x1,Oe.y1),new a.Point(Oe.x2,Oe.y1),new a.Point(Oe.x2,Oe.y2),new a.Point(Oe.x1,Oe.y2)];a.polygonIntersectsPolygon(b,ht)&&(be[Xe.bucketInstanceId][Xe.featureIndex]=!0,Ie[Xe.bucketInstanceId]===void 0&&(Ie[Xe.bucketInstanceId]=[]),Ie[Xe.bucketInstanceId].push(Xe.featureIndex))}}return Ie},Zo.prototype.insertCollisionBox=function(h,b,d,w,P){var F=b?this.ignoredGrid:this.grid,G={bucketInstanceId:d,featureIndex:w,collisionGroupID:P};F.insert(G,h[0],h[1],h[2],h[3])},Zo.prototype.insertCollisionCircles=function(h,b,d,w,P){for(var F=b?this.ignoredGrid:this.grid,G={bucketInstanceId:d,featureIndex:w,collisionGroupID:P},K=0;K<h.length;K+=4)F.insertCircle(G,h[K],h[K+1],h[K+2])},Zo.prototype.projectAndGetPerspectiveRatio=function(h,b,d){var w=[b,d,0,1];Xf(w,w,h);var P=new a.Point((w[0]/w[3]+1)/2*this.transform.width+Qi,(-w[1]/w[3]+1)/2*this.transform.height+Qi);return{point:P,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/w[3])}},Zo.prototype.isOffscreen=function(h,b,d,w){return d<Qi||h>=this.screenRightBoundary||w<Qi||b>this.screenBottomBoundary},Zo.prototype.isInsideGrid=function(h,b,d,w){return d>=0&&h<this.gridRightBoundary&&w>=0&&b<this.gridBottomBoundary},Zo.prototype.getViewportMatrix=function(){var h=a.identity([]);return a.translate(h,h,[-Qi,-Qi,0]),h};function yo(g,h,b){return h*(a.EXTENT/(g.tileSize*Math.pow(2,b-g.tileID.overscaledZ)))}var xl=function(h,b,d,w){h?this.opacity=Math.max(0,Math.min(1,h.opacity+(h.placed?b:-b))):this.opacity=w&&d?1:0,this.placed=d};xl.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Yo=function(h,b,d,w,P){this.text=new xl(h?h.text:null,b,d,P),this.icon=new xl(h?h.icon:null,b,w,P)};Yo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var xu=function(h,b,d){this.text=h,this.icon=b,this.skipFade=d},dp=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},Av=function(h,b,d,w,P){this.bucketInstanceId=h,this.featureIndex=b,this.sourceLayerIndex=d,this.bucketIndex=w,this.tileID=P},tf=function(h){this.crossSourceCollisions=h,this.maxGroupID=0,this.collisionGroups={}};tf.prototype.get=function(h){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[h]){var b=++this.maxGroupID;this.collisionGroups[h]={ID:b,predicate:function(d){return d.collisionGroupID===b}}}return this.collisionGroups[h]};function Mv(g,h,b,d,w){var P=a.getAnchorAlignment(g),F=P.horizontalAlign,G=P.verticalAlign,K=-(F-.5)*h,te=-(G-.5)*b,fe=a.evaluateVariableOffset(g,d);return new a.Point(K+fe[0]*w,te+fe[1]*w)}function Sv(g,h,b,d,w,P){var F=g.x1,G=g.x2,K=g.y1,te=g.y2,fe=g.anchorPointX,we=g.anchorPointY,be=new a.Point(h,b);return d&&be._rotate(w?P:-P),{x1:F+be.x,y1:K+be.y,x2:G+be.x,y2:te+be.y,anchorPointX:fe,anchorPointY:we}}var so=function(h,b,d,w){this.transform=h.clone(),this.collisionIndex=new Zo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new tf(d),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}};so.prototype.getBucketParts=function(h,b,d,w){var P=d.getBucket(b),F=d.latestFeatureIndex;if(!(!P||!F||b.id!==P.layerIds[0])){var G=d.collisionBoxArray,K=P.layers[0].layout,te=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),fe=d.tileSize/a.EXTENT,we=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),be=K.get("text-pitch-alignment")==="map",Ie=K.get("text-rotation-alignment")==="map",Ye=yo(d,1,this.transform.zoom),Ze=$n(we,be,Ie,this.transform,Ye),Oe=null;if(be){var Xe=gu(we,be,Ie,this.transform,Ye);Oe=a.multiply([],this.transform.labelPlaneMatrix,Xe)}this.retainedQueryData[P.bucketInstanceId]=new Av(P.bucketInstanceId,F,P.sourceLayerIndex,P.index,d.tileID);var ht={bucket:P,layout:K,posMatrix:we,textLabelPlaneMatrix:Ze,labelToScreenMatrix:Oe,scale:te,textPixelRatio:fe,holdingForFade:d.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(P.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(P.sourceID)};if(w)for(var zt=0,qt=P.sortKeyRanges;zt<qt.length;zt+=1){var Qt=qt[zt],rr=Qt.sortKey,Yt=Qt.symbolInstanceStart,ar=Qt.symbolInstanceEnd;h.push({sortKey:rr,symbolInstanceStart:Yt,symbolInstanceEnd:ar,parameters:ht})}else h.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:ht})}},so.prototype.attemptAnchorPlacement=function(h,b,d,w,P,F,G,K,te,fe,we,be,Ie,Ye,Ze){var Oe=[be.textOffset0,be.textOffset1],Xe=Mv(h,d,w,Oe,P),ht=this.collisionIndex.placeCollisionBox(Sv(b,Xe.x,Xe.y,F,G,this.transform.angle),we,K,te,fe.predicate);if(Ze){var zt=this.collisionIndex.placeCollisionBox(Sv(Ze,Xe.x,Xe.y,F,G,this.transform.angle),we,K,te,fe.predicate);if(zt.box.length===0)return}if(ht.box.length>0){var qt;return this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(qt=this.prevPlacement.variableOffsets[be.crossTileID].anchor),this.variableOffsets[be.crossTileID]={textOffset:Oe,width:d,height:w,anchor:h,textBoxScale:P,prevAnchor:qt},this.markUsedJustification(Ie,h,be,Ye),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Ye,be),this.placedOrientations[be.crossTileID]=Ye),{shift:Xe,placedGlyphBoxes:ht}}},so.prototype.placeLayerBucketPart=function(h,b,d){var w=this,P=h.parameters,F=P.bucket,G=P.layout,K=P.posMatrix,te=P.textLabelPlaneMatrix,fe=P.labelToScreenMatrix,we=P.textPixelRatio,be=P.holdingForFade,Ie=P.collisionBoxArray,Ye=P.partiallyEvaluatedTextSize,Ze=P.collisionGroup,Oe=G.get("text-optional"),Xe=G.get("icon-optional"),ht=G.get("text-allow-overlap"),zt=G.get("icon-allow-overlap"),qt=G.get("text-rotation-alignment")==="map",Qt=G.get("text-pitch-alignment")==="map",rr=G.get("icon-text-fit")!=="none",Yt=G.get("symbol-z-order")==="viewport-y",ar=ht&&(zt||!F.hasIconData()||Xe),cr=zt&&(ht||!F.hasTextData()||Oe);!F.collisionArrays&&Ie&&F.deserializeCollisionBoxes(Ie);var _r=function(qr,ka){if(!b[qr.crossTileID]){if(be){w.placements[qr.crossTileID]=new xu(!1,!1,!1);return}var ia=!1,Wa=!1,Va=!0,Ai=null,za={box:null,offscreen:null},mi={box:null,offscreen:null},na=null,Oa=null,en=null,Fn=0,Fs=0,qs=0;ka.textFeatureIndex?Fn=ka.textFeatureIndex:qr.useRuntimeCollisionCircles&&(Fn=qr.featureIndex),ka.verticalTextFeatureIndex&&(Fs=ka.verticalTextFeatureIndex);var il=ka.textBox;if(il){var Hl=function(sn){var es=a.WritingMode.horizontal;if(F.allowVerticalPlacement&&!sn&&w.prevPlacement){var ts=w.prevPlacement.placedOrientations[qr.crossTileID];ts&&(w.placedOrientations[qr.crossTileID]=ts,es=ts,w.markUsedOrientation(F,es,qr))}return es},uc=function(sn,es){if(F.allowVerticalPlacement&&qr.numVerticalGlyphVertices>0&&ka.verticalTextBox)for(var ts=0,r0=F.writingModes;ts<r0.length;ts+=1){var xy=r0[ts];if(xy===a.WritingMode.vertical?(za=es(),mi=za):za=sn(),za&&za.box&&za.box.length)break}else za=sn()};if(G.get("text-variable-anchor")){var $o=G.get("text-variable-anchor");if(w.prevPlacement&&w.prevPlacement.variableOffsets[qr.crossTileID]){var zo=w.prevPlacement.variableOffsets[qr.crossTileID];$o.indexOf(zo.anchor)>0&&($o=$o.filter(function(sn){return sn!==zo.anchor}),$o.unshift(zo.anchor))}var nl=function(sn,es,ts){for(var r0=sn.x2-sn.x1,xy=sn.y2-sn.y1,M3=qr.textBoxScale,S3=rr&&!zt?es:null,id={box:[],offscreen:!1},k3=ht?$o.length*2:$o.length,a0=0;a0<k3;++a0){var C3=$o[a0%$o.length],E3=a0>=$o.length,by=w.attemptAnchorPlacement(C3,sn,r0,xy,M3,qt,Qt,we,K,Ze,E3,qr,F,ts,S3);if(by&&(id=by.placedGlyphBoxes,id&&id.box&&id.box.length)){ia=!0,Ai=by.shift;break}}return id},zu=function(){return nl(il,ka.iconBox,a.WritingMode.horizontal)},ol=function(){var sn=ka.verticalTextBox,es=za&&za.box&&za.box.length;return F.allowVerticalPlacement&&!es&&qr.numVerticalGlyphVertices>0&&sn?nl(sn,ka.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}};uc(zu,ol),za&&(ia=za.box,Va=za.offscreen);var Kp=Hl(za&&za.box);if(!ia&&w.prevPlacement){var mh=w.prevPlacement.variableOffsets[qr.crossTileID];mh&&(w.variableOffsets[qr.crossTileID]=mh,w.markUsedJustification(F,mh.anchor,qr,Kp))}}else{var Gl=function(sn,es){var ts=w.collisionIndex.placeCollisionBox(sn,ht,we,K,Ze.predicate);return ts&&ts.box&&ts.box.length&&(w.markUsedOrientation(F,es,qr),w.placedOrientations[qr.crossTileID]=es),ts},Do=function(){return Gl(il,a.WritingMode.horizontal)},Zl=function(){var sn=ka.verticalTextBox;return F.allowVerticalPlacement&&qr.numVerticalGlyphVertices>0&&sn?Gl(sn,a.WritingMode.vertical):{box:null,offscreen:null}};uc(Do,Zl),Hl(za&&za.box&&za.box.length)}}if(na=za,ia=na&&na.box&&na.box.length>0,Va=na&&na.offscreen,qr.useRuntimeCollisionCircles){var Zn=F.text.placedSymbolArray.get(qr.centerJustifiedTextSymbolIndex),Qp=a.evaluateSizeForFeature(F.textSizeData,Ye,Zn),ad=G.get("text-padding"),bo=qr.collisionCircleDiameter;Oa=w.collisionIndex.placeCollisionCircles(ht,Zn,F.lineVertexArray,F.glyphOffsetArray,Qp,K,te,fe,d,Qt,Ze.predicate,bo,ad),ia=ht||Oa.circles.length>0&&!Oa.collisionDetected,Va=Va&&Oa.offscreen}if(ka.iconFeatureIndex&&(qs=ka.iconFeatureIndex),ka.iconBox){var yh=function(sn){var es=rr&&Ai?Sv(sn,Ai.x,Ai.y,qt,Qt,w.transform.angle):sn;return w.collisionIndex.placeCollisionBox(es,zt,we,K,Ze.predicate)};mi&&mi.box&&mi.box.length&&ka.verticalIconBox?(en=yh(ka.verticalIconBox),Wa=en.box.length>0):(en=yh(ka.iconBox),Wa=en.box.length>0),Va=Va&&en.offscreen}var $p=Oe||qr.numHorizontalGlyphVertices===0&&qr.numVerticalGlyphVertices===0,e0=Xe||qr.numIconVertices===0;if(!$p&&!e0?Wa=ia=Wa&&ia:e0?$p||(Wa=Wa&&ia):ia=Wa&&ia,ia&&na&&na.box&&(mi&&mi.box&&Fs?w.collisionIndex.insertCollisionBox(na.box,G.get("text-ignore-placement"),F.bucketInstanceId,Fs,Ze.ID):w.collisionIndex.insertCollisionBox(na.box,G.get("text-ignore-placement"),F.bucketInstanceId,Fn,Ze.ID)),Wa&&en&&w.collisionIndex.insertCollisionBox(en.box,G.get("icon-ignore-placement"),F.bucketInstanceId,qs,Ze.ID),Oa&&(ia&&w.collisionIndex.insertCollisionCircles(Oa.circles,G.get("text-ignore-placement"),F.bucketInstanceId,Fn,Ze.ID),d)){var t0=F.bucketInstanceId,gh=w.collisionCircleArrays[t0];gh===void 0&&(gh=w.collisionCircleArrays[t0]=new dp);for(var _h=0;_h<Oa.circles.length;_h+=4)gh.circles.push(Oa.circles[_h+0]),gh.circles.push(Oa.circles[_h+1]),gh.circles.push(Oa.circles[_h+2]),gh.circles.push(Oa.collisionDetected?1:0)}w.placements[qr.crossTileID]=new xu(ia||ar,Wa||cr,Va||F.justReloaded),b[qr.crossTileID]=!0}};if(Yt)for(var Pr=F.getSortedSymbolIndexes(this.transform.angle),Sr=Pr.length-1;Sr>=0;--Sr){var Xr=Pr[Sr];_r(F.symbolInstances.get(Xr),F.collisionArrays[Xr])}else for(var Fa=h.symbolInstanceStart;Fa<h.symbolInstanceEnd;Fa++)_r(F.symbolInstances.get(Fa),F.collisionArrays[Fa]);if(d&&F.bucketInstanceId in this.collisionCircleArrays){var ba=this.collisionCircleArrays[F.bucketInstanceId];a.invert(ba.invProjMatrix,K),ba.viewportMatrix=this.collisionIndex.getViewportMatrix()}F.justReloaded=!1},so.prototype.markUsedJustification=function(h,b,d,w){var P={left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex},F;w===a.WritingMode.vertical?F=d.verticalPlacedTextSymbolIndex:F=P[a.getAnchorJustification(b)];for(var G=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex],K=0,te=G;K<te.length;K+=1){var fe=te[K];fe>=0&&(F>=0&&fe!==F?h.text.placedSymbolArray.get(fe).crossTileID=0:h.text.placedSymbolArray.get(fe).crossTileID=d.crossTileID)}},so.prototype.markUsedOrientation=function(h,b,d){for(var w=b===a.WritingMode.horizontal||b===a.WritingMode.horizontalOnly?b:0,P=b===a.WritingMode.vertical?b:0,F=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex],G=0,K=F;G<K.length;G+=1){var te=K[G];h.text.placedSymbolArray.get(te).placedOrientation=w}d.verticalPlacedTextSymbolIndex&&(h.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=P)},so.prototype.commit=function(h){this.commitTime=h,this.zoomAtLastRecencyCheck=this.transform.zoom;var b=this.prevPlacement,d=!1;this.prevZoomAdjustment=b?b.zoomAdjustment(this.transform.zoom):0;var w=b?b.symbolFadeChange(h):1,P=b?b.opacities:{},F=b?b.variableOffsets:{},G=b?b.placedOrientations:{};for(var K in this.placements){var te=this.placements[K],fe=P[K];fe?(this.opacities[K]=new Yo(fe,w,te.text,te.icon),d=d||te.text!==fe.text.placed||te.icon!==fe.icon.placed):(this.opacities[K]=new Yo(null,w,te.text,te.icon,te.skipFade),d=d||te.text||te.icon)}for(var we in P){var be=P[we];if(!this.opacities[we]){var Ie=new Yo(be,w,!1,!1);Ie.isHidden()||(this.opacities[we]=Ie,d=d||be.text.placed||be.icon.placed)}}for(var Ye in F)!this.variableOffsets[Ye]&&this.opacities[Ye]&&!this.opacities[Ye].isHidden()&&(this.variableOffsets[Ye]=F[Ye]);for(var Ze in G)!this.placedOrientations[Ze]&&this.opacities[Ze]&&!this.opacities[Ze].isHidden()&&(this.placedOrientations[Ze]=G[Ze]);d?this.lastPlacementChangeTime=h:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=b?b.lastPlacementChangeTime:h)},so.prototype.updateLayerOpacities=function(h,b){for(var d={},w=0,P=b;w<P.length;w+=1){var F=P[w],G=F.getBucket(h);G&&F.latestFeatureIndex&&h.id===G.layerIds[0]&&this.updateBucketOpacities(G,d,F.collisionBoxArray)}},so.prototype.updateBucketOpacities=function(h,b,d){var w=this;h.hasTextData()&&h.text.opacityVertexArray.clear(),h.hasIconData()&&h.icon.opacityVertexArray.clear(),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexArray.clear(),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexArray.clear();var P=h.layers[0].layout,F=new Yo(null,0,!1,!1,!0),G=P.get("text-allow-overlap"),K=P.get("icon-allow-overlap"),te=P.get("text-variable-anchor"),fe=P.get("text-rotation-alignment")==="map",we=P.get("text-pitch-alignment")==="map",be=P.get("icon-text-fit")!=="none",Ie=new Yo(null,0,G&&(K||!h.hasIconData()||P.get("icon-optional")),K&&(G||!h.hasTextData()||P.get("text-optional")),!0);!h.collisionArrays&&d&&(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData())&&h.deserializeCollisionBoxes(d);for(var Ye=function(ht,zt,qt){for(var Qt=0;Qt<zt/4;Qt++)ht.opacityVertexArray.emplaceBack(qt)},Ze=function(ht){var zt=h.symbolInstances.get(ht),qt=zt.numHorizontalGlyphVertices,Qt=zt.numVerticalGlyphVertices,rr=zt.crossTileID,Yt=b[rr],ar=w.opacities[rr];Yt?ar=F:ar||(ar=Ie,w.opacities[rr]=ar),b[rr]=!0;var cr=qt>0||Qt>0,_r=zt.numIconVertices>0,Pr=w.placedOrientations[zt.crossTileID],Sr=Pr===a.WritingMode.vertical,Xr=Pr===a.WritingMode.horizontal||Pr===a.WritingMode.horizontalOnly;if(cr){var Fa=af(ar.text),ba=Sr?Cr:Fa;Ye(h.text,qt,ba);var qr=Xr?Cr:Fa;Ye(h.text,Qt,qr);var ka=ar.text.isHidden();[zt.rightJustifiedTextSymbolIndex,zt.centerJustifiedTextSymbolIndex,zt.leftJustifiedTextSymbolIndex].forEach(function(qs){qs>=0&&(h.text.placedSymbolArray.get(qs).hidden=ka||Sr?1:0)}),zt.verticalPlacedTextSymbolIndex>=0&&(h.text.placedSymbolArray.get(zt.verticalPlacedTextSymbolIndex).hidden=ka||Xr?1:0);var ia=w.variableOffsets[zt.crossTileID];ia&&w.markUsedJustification(h,ia.anchor,zt,Pr);var Wa=w.placedOrientations[zt.crossTileID];Wa&&(w.markUsedJustification(h,"left",zt,Wa),w.markUsedOrientation(h,Wa,zt))}if(_r){var Va=af(ar.icon),Ai=!(be&&zt.verticalPlacedIconSymbolIndex&&Sr);if(zt.placedIconSymbolIndex>=0){var za=Ai?Va:Cr;Ye(h.icon,zt.numIconVertices,za),h.icon.placedSymbolArray.get(zt.placedIconSymbolIndex).hidden=ar.icon.isHidden()}if(zt.verticalPlacedIconSymbolIndex>=0){var mi=Ai?Cr:Va;Ye(h.icon,zt.numVerticalIconVertices,mi),h.icon.placedSymbolArray.get(zt.verticalPlacedIconSymbolIndex).hidden=ar.icon.isHidden()}}if(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData()){var na=h.collisionArrays[ht];if(na){var Oa=new a.Point(0,0);if(na.textBox||na.verticalTextBox){var en=!0;if(te){var Fn=w.variableOffsets[rr];Fn?(Oa=Mv(Fn.anchor,Fn.width,Fn.height,Fn.textOffset,Fn.textBoxScale),fe&&Oa._rotate(we?w.transform.angle:-w.transform.angle)):en=!1}na.textBox&&Xt(h.textCollisionBox.collisionVertexArray,ar.text.placed,!en||Sr,Oa.x,Oa.y),na.verticalTextBox&&Xt(h.textCollisionBox.collisionVertexArray,ar.text.placed,!en||Xr,Oa.x,Oa.y)}var Fs=!!(!Xr&&na.verticalIconBox);na.iconBox&&Xt(h.iconCollisionBox.collisionVertexArray,ar.icon.placed,Fs,be?Oa.x:0,be?Oa.y:0),na.verticalIconBox&&Xt(h.iconCollisionBox.collisionVertexArray,ar.icon.placed,!Fs,be?Oa.x:0,be?Oa.y:0)}}},Oe=0;Oe<h.symbolInstances.length;Oe++)Ze(Oe);if(h.sortFeatures(this.transform.angle),this.retainedQueryData[h.bucketInstanceId]&&(this.retainedQueryData[h.bucketInstanceId].featureSortOrder=h.featureSortOrder),h.hasTextData()&&h.text.opacityVertexBuffer&&h.text.opacityVertexBuffer.updateData(h.text.opacityVertexArray),h.hasIconData()&&h.icon.opacityVertexBuffer&&h.icon.opacityVertexBuffer.updateData(h.icon.opacityVertexArray),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexBuffer&&h.iconCollisionBox.collisionVertexBuffer.updateData(h.iconCollisionBox.collisionVertexArray),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexBuffer&&h.textCollisionBox.collisionVertexBuffer.updateData(h.textCollisionBox.collisionVertexArray),h.bucketInstanceId in this.collisionCircleArrays){var Xe=this.collisionCircleArrays[h.bucketInstanceId];h.placementInvProjMatrix=Xe.invProjMatrix,h.placementViewportMatrix=Xe.viewportMatrix,h.collisionCircleArray=Xe.circles,delete this.collisionCircleArrays[h.bucketInstanceId]}},so.prototype.symbolFadeChange=function(h){return this.fadeDuration===0?1:(h-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},so.prototype.zoomAdjustment=function(h){return Math.max(0,(this.transform.zoom-h)/1.5)},so.prototype.hasTransitions=function(h){return this.stale||h-this.lastPlacementChangeTime<this.fadeDuration},so.prototype.stillRecent=function(h,b){var d=this.zoomAtLastRecencyCheck===b?1-this.zoomAdjustment(b):1;return this.zoomAtLastRecencyCheck=b,this.commitTime+this.fadeDuration*d>h},so.prototype.setStale=function(){this.stale=!0};function Xt(g,h,b,d,w){g.emplaceBack(h?1:0,b?1:0,d||0,w||0),g.emplaceBack(h?1:0,b?1:0,d||0,w||0),g.emplaceBack(h?1:0,b?1:0,d||0,w||0),g.emplaceBack(h?1:0,b?1:0,d||0,w||0)}var Or=Math.pow(2,25),pp=Math.pow(2,24),bu=Math.pow(2,17),an=Math.pow(2,16),bl=Math.pow(2,9),Ss=Math.pow(2,8),rf=Math.pow(2,1);function af(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;var h=g.placed?1:0,b=Math.floor(g.opacity*127);return b*Or+h*pp+b*bu+h*an+b*bl+h*Ss+b*rf+h}var Cr=0,Ta=function(h){this._sortAcrossTiles=h.layout.get("symbol-z-order")!=="viewport-y"&&h.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ta.prototype.continuePlacement=function(h,b,d,w,P){for(var F=this._bucketParts;this._currentTileIndex<h.length;){var G=h[this._currentTileIndex];if(b.getBucketParts(F,w,G,this._sortAcrossTiles),this._currentTileIndex++,P())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort(function(te,fe){return te.sortKey-fe.sortKey}));this._currentPartIndex<F.length;){var K=F[this._currentPartIndex];if(b.placeLayerBucketPart(K,this._seenCrossTileIDs,d),this._currentPartIndex++,P())return!0}return!1};var Aa=function(h,b,d,w,P,F,G){this.placement=new so(h,P,F,G),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=w,this._done=!1};Aa.prototype.isDone=function(){return this._done},Aa.prototype.continuePlacement=function(h,b,d){for(var w=this,P=a.browser.now(),F=function(){var we=a.browser.now()-P;return w._forceFullPlacement?!1:we>2};this._currentPlacementIndex>=0;){var G=h[this._currentPlacementIndex],K=b[G],te=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=te)&&(!K.maxzoom||K.maxzoom>te)){this._inProgressLayer||(this._inProgressLayer=new Ta(K));var fe=this._inProgressLayer.continuePlacement(d[K.source],this.placement,this._showCollisionBoxes,K,F);if(fe)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Aa.prototype.commit=function(h){return this.placement.commit(h),this.placement};var ks=512/a.EXTENT/2,wl=function(h,b,d){this.tileID=h,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(var w=0;w<b.length;w++){var P=b.get(w),F=P.key;this.indexedSymbolInstances[F]||(this.indexedSymbolInstances[F]=[]),this.indexedSymbolInstances[F].push({crossTileID:P.crossTileID,coord:this.getScaledCoordinates(P,h)})}};wl.prototype.getScaledCoordinates=function(h,b){var d=b.canonical.z-this.tileID.canonical.z,w=ks/Math.pow(2,d);return{x:Math.floor((b.canonical.x*a.EXTENT+h.anchorX)*w),y:Math.floor((b.canonical.y*a.EXTENT+h.anchorY)*w)}},wl.prototype.findMatches=function(h,b,d){for(var w=this.tileID.canonical.z<b.canonical.z?1:Math.pow(2,this.tileID.canonical.z-b.canonical.z),P=0;P<h.length;P++){var F=h.get(P);if(!F.crossTileID){var G=this.indexedSymbolInstances[F.key];if(G)for(var K=this.getScaledCoordinates(F,b),te=0,fe=G;te<fe.length;te+=1){var we=fe[te];if(Math.abs(we.coord.x-K.x)<=w&&Math.abs(we.coord.y-K.y)<=w&&!d[we.crossTileID]){d[we.crossTileID]=!0,F.crossTileID=we.crossTileID;break}}}}};var Sa=function(){this.maxCrossTileID=0};Sa.prototype.generate=function(){return++this.maxCrossTileID};var Qs=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Qs.prototype.handleWrapJump=function(h){var b=Math.round((h-this.lng)/360);if(b!==0)for(var d in this.indexes){var w=this.indexes[d],P={};for(var F in w){var G=w[F];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+b),P[G.tileID.key]=G}this.indexes[d]=P}this.lng=h},Qs.prototype.addBucket=function(h,b,d){if(this.indexes[h.overscaledZ]&&this.indexes[h.overscaledZ][h.key]){if(this.indexes[h.overscaledZ][h.key].bucketInstanceId===b.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(h.overscaledZ,this.indexes[h.overscaledZ][h.key])}for(var w=0;w<b.symbolInstances.length;w++){var P=b.symbolInstances.get(w);P.crossTileID=0}this.usedCrossTileIDs[h.overscaledZ]||(this.usedCrossTileIDs[h.overscaledZ]={});var F=this.usedCrossTileIDs[h.overscaledZ];for(var G in this.indexes){var K=this.indexes[G];if(Number(G)>h.overscaledZ)for(var te in K){var fe=K[te];fe.tileID.isChildOf(h)&&fe.findMatches(b.symbolInstances,h,F)}else{var we=h.scaledTo(Number(G)),be=K[we.key];be&&be.findMatches(b.symbolInstances,h,F)}}for(var Ie=0;Ie<b.symbolInstances.length;Ie++){var Ye=b.symbolInstances.get(Ie);Ye.crossTileID||(Ye.crossTileID=d.generate(),F[Ye.crossTileID]=!0)}return this.indexes[h.overscaledZ]===void 0&&(this.indexes[h.overscaledZ]={}),this.indexes[h.overscaledZ][h.key]=new wl(h,b.symbolInstances,b.bucketInstanceId),!0},Qs.prototype.removeBucketCrossTileIDs=function(h,b){for(var d in b.indexedSymbolInstances)for(var w=0,P=b.indexedSymbolInstances[d];w<P.length;w+=1){var F=P[w];delete this.usedCrossTileIDs[h][F.crossTileID]}},Qs.prototype.removeStaleBuckets=function(h){var b=!1;for(var d in this.indexes){var w=this.indexes[d];for(var P in w)h[w[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,w[P]),delete w[P],b=!0)}return b};var wu=function(){this.layerIndexes={},this.crossTileIDs=new Sa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};wu.prototype.addLayer=function(h,b,d){var w=this.layerIndexes[h.id];w===void 0&&(w=this.layerIndexes[h.id]=new Qs);var P=!1,F={};w.handleWrapJump(d);for(var G=0,K=b;G<K.length;G+=1){var te=K[G],fe=te.getBucket(h);!fe||h.id!==fe.layerIds[0]||(fe.bucketInstanceId||(fe.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(te.tileID,fe,this.crossTileIDs)&&(P=!0),F[fe.bucketInstanceId]=!0)}return w.removeStaleBuckets(F)&&(P=!0),P},wu.prototype.pruneUnusedLayers=function(h){var b={};h.forEach(function(w){b[w]=!0});for(var d in this.layerIndexes)b[d]||delete this.layerIndexes[d]};var cs=function(g,h){return a.emitValidationErrors(g,h&&h.filter(function(b){return b.identifier!=="source.canvas"}))},Tl=a.pick(Wr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),go=a.pick(Wr,["setCenter","setZoom","setBearing","setPitch"]),ki=ii(),Cs=function(g){function h(b,d){var w=this;d===void 0&&(d={}),g.call(this),this.map=b,this.dispatcher=new Ce(Yr(),this),this.imageManager=new R,this.imageManager.setEventedParent(this),this.glyphManager=new re(b._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Se(256,512),this.crossTileSymbolIndex=new wu,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var P=this;this._rtlTextPluginCallback=h.registerForPluginStateChange(function(F){var G={pluginStatus:F.pluginStatus,pluginURL:F.pluginURL};P.dispatcher.broadcast("syncRTLPluginState",G,function(K,te){if(a.triggerPluginCompletionEvent(K),te){var fe=te.every(function(be){return be});if(fe)for(var we in P.sourceCaches)P.sourceCaches[we].reload()}})}),this.on("data",function(F){if(!(F.dataType!=="source"||F.sourceDataType!=="metadata")){var G=w.sourceCaches[F.sourceId];if(G){var K=G.getSource();if(!(!K||!K.vectorLayerIds))for(var te in w._layers){var fe=w._layers[te];fe.source===K.id&&w._validateLayer(fe)}}}})}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.loadURL=function(d,w){var P=this;w===void 0&&(w={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var F=typeof w.validate=="boolean"?w.validate:!a.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,w.accessToken);var G=this.map._requestManager.transformRequest(d,a.ResourceType.Style);this._request=a.getJSON(G,function(K,te){P._request=null,K?P.fire(new a.ErrorEvent(K)):te&&P._load(te,F)})},h.prototype.loadJSON=function(d,w){var P=this;w===void 0&&(w={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){P._request=null,P._load(d,w.validate!==!1)})},h.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ki,!1)},h.prototype._load=function(d,w){if(!(w&&cs(this,a.validateStyle(d)))){this._loaded=!0,this.stylesheet=d;for(var P in d.sources)this.addSource(P,d.sources[P],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);var F=Na(this.stylesheet.layers);this._order=F.map(function(fe){return fe.id}),this._layers={},this._serializedLayers={};for(var G=0,K=F;G<K.length;G+=1){var te=K[G];te=a.createStyleLayer(te),te.setEventedParent(this,{layer:{id:te.id}}),this._layers[te.id]=te,this._serializedLayers[te.id]=te.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new me(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},h.prototype._loadSprite=function(d){var w=this;this._spriteRequest=L(d,this.map._requestManager,function(P,F){if(w._spriteRequest=null,P)w.fire(new a.ErrorEvent(P));else if(F)for(var G in F)w.imageManager.addImage(G,F[G]);w.imageManager.setLoaded(!0),w._availableImages=w.imageManager.listImages(),w.dispatcher.broadcast("setImages",w._availableImages),w.fire(new a.Event("data",{dataType:"style"}))})},h.prototype._validateLayer=function(d){var w=this.sourceCaches[d.source];if(w){var P=d.sourceLayer;if(P){var F=w.getSource();(F.type==="geojson"||F.vectorLayerIds&&F.vectorLayerIds.indexOf(P)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+P+'" does not exist on source "'+F.id+'" as specified by style layer "'+d.id+'"')))}}},h.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()},h.prototype._serializeLayers=function(d){for(var w=[],P=0,F=d;P<F.length;P+=1){var G=F[P],K=this._layers[G];K.type!=="custom"&&w.push(K.serialize())}return w},h.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(var w in this._layers)if(this._layers[w].hasTransition())return!0;return!1},h.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},h.prototype.update=function(d){if(this._loaded){var w=this._changed;if(this._changed){var P=Object.keys(this._updatedLayers),F=Object.keys(this._removedLayers);(P.length||F.length)&&this._updateWorkerLayers(P,F);for(var G in this._updatedSources){var K=this._updatedSources[G];K==="reload"?this._reloadSource(G):K==="clear"&&this._clearSource(G)}this._updateTilesForChangedImages();for(var te in this._updatedPaintProps)this._layers[te].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}var fe={};for(var we in this.sourceCaches){var be=this.sourceCaches[we];fe[we]=be.used,be.used=!1}for(var Ie=0,Ye=this._order;Ie<Ye.length;Ie+=1){var Ze=Ye[Ie],Oe=this._layers[Ze];Oe.recalculate(d,this._availableImages),!Oe.isHidden(d.zoom)&&Oe.source&&(this.sourceCaches[Oe.source].used=!0)}for(var Xe in fe){var ht=this.sourceCaches[Xe];fe[Xe]!==ht.used&&ht.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Xe}))}this.light.recalculate(d),this.z=d.zoom,w&&this.fire(new a.Event("data",{dataType:"style"}))}},h.prototype._updateTilesForChangedImages=function(){var d=Object.keys(this._changedImages);if(d.length){for(var w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}},h.prototype._updateWorkerLayers=function(d,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:w})},h.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},h.prototype.setState=function(d){var w=this;if(this._checkLoaded(),cs(this,a.validateStyle(d)))return!1;d=a.clone$1(d),d.layers=Na(d.layers);var P=Eo(this.serialize(),d).filter(function(G){return!(G.command in go)});if(P.length===0)return!1;var F=P.filter(function(G){return!(G.command in Tl)});if(F.length>0)throw new Error("Unimplemented: "+F.map(function(G){return G.command}).join(", ")+".");return P.forEach(function(G){G.command!=="setTransition"&&w[G.command].apply(w,G.args)}),this.stylesheet=d,!0},h.prototype.addImage=function(d,w){if(this.getImage(d))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(d,w),this._afterImageUpdated(d)},h.prototype.updateImage=function(d,w){this.imageManager.updateImage(d,w)},h.prototype.getImage=function(d){return this.imageManager.getImage(d)},h.prototype.removeImage=function(d){if(!this.getImage(d))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(d),this._afterImageUpdated(d)},h.prototype._afterImageUpdated=function(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},h.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},h.prototype.addSource=function(d,w,P){var F=this;if(P===void 0&&(P={}),this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error("There is already a source with this ID");if(!w.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(w).join(", ")+".");var G=["vector","raster","geojson","video","image"],K=G.indexOf(w.type)>=0;if(!(K&&this._validate(a.validateStyle.source,"sources."+d,w,null,P))){this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);var te=this.sourceCaches[d]=new rt(d,w,this.dispatcher);te.style=this,te.setEventedParent(this,function(){return{isSourceLoaded:F.loaded(),source:te.serialize(),sourceId:d}}),te.onAdd(this.map),this._changed=!0}},h.prototype.removeSource=function(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(var w in this._layers)if(this._layers[w].source===d)return this.fire(new a.ErrorEvent(new Error('Source "'+d+'" cannot be removed while layer "'+w+'" is using it.')));var P=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],P.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),P.setEventedParent(null),P.clearTiles(),P.onRemove&&P.onRemove(this.map),this._changed=!0},h.prototype.setGeoJSONSourceData=function(d,w){this._checkLoaded();var P=this.sourceCaches[d].getSource();P.setData(w),this._changed=!0},h.prototype.getSource=function(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()},h.prototype.addLayer=function(d,w,P){P===void 0&&(P={}),this._checkLoaded();var F=d.id;if(this.getLayer(F)){this.fire(new a.ErrorEvent(new Error('Layer with id "'+F+'" already exists on this map')));return}var G;if(d.type==="custom"){if(cs(this,a.validateCustomStyleLayer(d)))return;G=a.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(F,d.source),d=a.clone$1(d),d=a.extend(d,{source:F})),this._validate(a.validateStyle.layer,"layers."+F,d,{arrayIndex:-1},P))return;G=a.createStyleLayer(d),this._validateLayer(G),G.setEventedParent(this,{layer:{id:F}}),this._serializedLayers[G.id]=G.serialize()}var K=w?this._order.indexOf(w):this._order.length;if(w&&K===-1){this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));return}if(this._order.splice(K,0,F),this._layerOrderChanged=!0,this._layers[F]=G,this._removedLayers[F]&&G.source&&G.type!=="custom"){var te=this._removedLayers[F];delete this._removedLayers[F],te.type!==G.type?this._updatedSources[G.source]="clear":(this._updatedSources[G.source]="reload",this.sourceCaches[G.source].pause())}this._updateLayer(G),G.onAdd&&G.onAdd(this.map)},h.prototype.moveLayer=function(d,w){this._checkLoaded(),this._changed=!0;var P=this._layers[d];if(!P){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be moved.")));return}if(d!==w){var F=this._order.indexOf(d);this._order.splice(F,1);var G=w?this._order.indexOf(w):this._order.length;if(w&&G===-1){this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));return}this._order.splice(G,0,d),this._layerOrderChanged=!0}},h.prototype.removeLayer=function(d){this._checkLoaded();var w=this._layers[d];if(!w){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be removed.")));return}w.setEventedParent(null);var P=this._order.indexOf(d);this._order.splice(P,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=w,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],w.onRemove&&w.onRemove(this.map)},h.prototype.getLayer=function(d){return this._layers[d]},h.prototype.hasLayer=function(d){return d in this._layers},h.prototype.setLayerZoomRange=function(d,w,P){this._checkLoaded();var F=this.getLayer(d);if(!F){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot have zoom extent.")));return}F.minzoom===w&&F.maxzoom===P||(w!=null&&(F.minzoom=w),P!=null&&(F.maxzoom=P),this._updateLayer(F))},h.prototype.setFilter=function(d,w,P){P===void 0&&(P={}),this._checkLoaded();var F=this.getLayer(d);if(!F){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be filtered.")));return}if(!a.deepEqual(F.filter,w)){if(w==null){F.filter=void 0,this._updateLayer(F);return}this._validate(a.validateStyle.filter,"layers."+F.id+".filter",w,null,P)||(F.filter=a.clone$1(w),this._updateLayer(F))}},h.prototype.getFilter=function(d){return a.clone$1(this.getLayer(d).filter)},h.prototype.setLayoutProperty=function(d,w,P,F){F===void 0&&(F={}),this._checkLoaded();var G=this.getLayer(d);if(!G){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be styled.")));return}a.deepEqual(G.getLayoutProperty(w),P)||(G.setLayoutProperty(w,P,F),this._updateLayer(G))},h.prototype.getLayoutProperty=function(d,w){var P=this.getLayer(d);if(!P){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style.")));return}return P.getLayoutProperty(w)},h.prototype.setPaintProperty=function(d,w,P,F){F===void 0&&(F={}),this._checkLoaded();var G=this.getLayer(d);if(!G){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be styled.")));return}if(!a.deepEqual(G.getPaintProperty(w),P)){var K=G.setPaintProperty(w,P,F);K&&this._updateLayer(G),this._changed=!0,this._updatedPaintProps[d]=!0}},h.prototype.getPaintProperty=function(d,w){return this.getLayer(d).getPaintProperty(w)},h.prototype.setFeatureState=function(d,w){this._checkLoaded();var P=d.source,F=d.sourceLayer,G=this.sourceCaches[P];if(G===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+P+"' does not exist in the map's style.")));return}var K=G.getSource().type;if(K==="geojson"&&F){this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(K==="vector"&&!F){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}d.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),G.setFeatureState(F,d.id,w)},h.prototype.removeFeatureState=function(d,w){this._checkLoaded();var P=d.source,F=this.sourceCaches[P];if(F===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+P+"' does not exist in the map's style.")));return}var G=F.getSource().type,K=G==="vector"?d.sourceLayer:void 0;if(G==="vector"&&!K){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(w&&typeof d.id!="string"&&typeof d.id!="number"){this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}F.removeFeatureState(K,d.id,w)},h.prototype.getFeatureState=function(d){this._checkLoaded();var w=d.source,P=d.sourceLayer,F=this.sourceCaches[w];if(F===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")));return}var G=F.getSource().type;if(G==="vector"&&!P){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return d.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),F.getFeatureState(P,d.id)},h.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},h.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(d){return d.serialize()}),layers:this._serializeLayers(this._order)},function(d){return d!==void 0})},h.prototype._updateLayer=function(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0},h.prototype._flattenAndSortRenderedFeatures=function(d){for(var w=this,P=function(Xr){return w._layers[Xr].type==="fill-extrusion"},F={},G=[],K=this._order.length-1;K>=0;K--){var te=this._order[K];if(P(te)){F[te]=K;for(var fe=0,we=d;fe<we.length;fe+=1){var be=we[fe],Ie=be[te];if(Ie)for(var Ye=0,Ze=Ie;Ye<Ze.length;Ye+=1){var Oe=Ze[Ye];G.push(Oe)}}}}G.sort(function(Xr,Fa){return Fa.intersectionZ-Xr.intersectionZ});for(var Xe=[],ht=this._order.length-1;ht>=0;ht--){var zt=this._order[ht];if(P(zt))for(var qt=G.length-1;qt>=0;qt--){var Qt=G[qt].feature;if(F[Qt.layer.id]<ht)break;Xe.push(Qt),G.pop()}else for(var rr=0,Yt=d;rr<Yt.length;rr+=1){var ar=Yt[rr],cr=ar[zt];if(cr)for(var _r=0,Pr=cr;_r<Pr.length;_r+=1){var Sr=Pr[_r];Xe.push(Sr.feature)}}}return Xe},h.prototype.queryRenderedFeatures=function(d,w,P){w&&w.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);var F={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var G=0,K=w.layers;G<K.length;G+=1){var te=K[G],fe=this._layers[te];if(!fe)return this.fire(new a.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be queried for features."))),[];F[fe.source]=!0}}var we=[];w.availableImages=this._availableImages;for(var be in this.sourceCaches)w.layers&&!F[be]||we.push(xe(this.sourceCaches[be],this._layers,this._serializedLayers,d,w,P));return this.placement&&we.push(et(this._layers,this._serializedLayers,this.sourceCaches,d,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(we)},h.prototype.querySourceFeatures=function(d,w){w&&w.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);var P=this.sourceCaches[d];return P?vt(P,w):[]},h.prototype.addSourceType=function(d,w,P){if(h.getSourceType(d))return P(new Error('A source type called "'+d+'" already exists.'));if(h.setSourceType(d,w),!w.workerSourceURL)return P(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:d,url:w.workerSourceURL},P)},h.prototype.getLight=function(){return this.light.getLight()},h.prototype.setLight=function(d,w){w===void 0&&(w={}),this._checkLoaded();var P=this.light.getLight(),F=!1;for(var G in d)if(!a.deepEqual(d[G],P[G])){F=!0;break}if(F){var K={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,w),this.light.updateTransitions(K)}},h.prototype._validate=function(d,w,P,F,G){return G===void 0&&(G={}),G&&G.validate===!1?!1:cs(this,d.call(a.validateStyle,a.extend({key:w,style:this.serialize(),value:P,styleSpec:a.styleSpec},F)))},h.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var d in this._layers){var w=this._layers[d];w.setEventedParent(null)}for(var P in this.sourceCaches)this.sourceCaches[P].clearTiles(),this.sourceCaches[P].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},h.prototype._clearSource=function(d){this.sourceCaches[d].clearTiles()},h.prototype._reloadSource=function(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()},h.prototype._updateSources=function(d){for(var w in this.sourceCaches)this.sourceCaches[w].update(d)},h.prototype._generateCollisionBoxes=function(){for(var d in this.sourceCaches)this._reloadSource(d)},h.prototype._updatePlacement=function(d,w,P,F,G){G===void 0&&(G=!1);for(var K=!1,te=!1,fe={},we=0,be=this._order;we<be.length;we+=1){var Ie=be[we],Ye=this._layers[Ie];if(Ye.type==="symbol"){if(!fe[Ye.source]){var Ze=this.sourceCaches[Ye.source];fe[Ye.source]=Ze.getRenderableIds(!0).map(function(rr){return Ze.getTileByID(rr)}).sort(function(rr,Yt){return Yt.tileID.overscaledZ-rr.tileID.overscaledZ||(rr.tileID.isLessThan(Yt.tileID)?-1:1)})}var Oe=this.crossTileSymbolIndex.addLayer(Ye,fe[Ye.source],d.center.lng);K=K||Oe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),G=G||this._layerOrderChanged||P===0,(G||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),d.zoom))&&(this.pauseablePlacement=new Aa(d,this._order,G,w,P,F,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,fe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),te=!0),K&&this.pauseablePlacement.placement.setStale()),te||K)for(var Xe=0,ht=this._order;Xe<ht.length;Xe+=1){var zt=ht[Xe],qt=this._layers[zt];qt.type==="symbol"&&this.placement.updateLayerOpacities(qt,fe[qt.source])}var Qt=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now());return Qt},h.prototype._releaseSymbolFadeTiles=function(){for(var d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()},h.prototype.getImages=function(d,w,P){this.imageManager.getImages(w.icons,P),this._updateTilesForChangedImages();var F=this.sourceCaches[w.source];F&&F.setDependencies(w.tileID.key,w.type,w.icons)},h.prototype.getGlyphs=function(d,w,P){this.glyphManager.getGlyphs(w.stacks,P)},h.prototype.getResource=function(d,w,P){return a.makeRequest(w,P)},h}(a.Evented);Cs.getSourceType=kt,Cs.setSourceType=mt,Cs.registerForPluginStateChange=a.registerForPluginStateChange;var hs=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Gc=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Tu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Bm=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jf="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ni=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Jf="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",kv=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_n=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,zn="void main() {gl_FragColor=vec4(1.0);}",mp="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",nf=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nn=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Lo=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,Wo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",un="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Kf="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",on="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Xo="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",$s="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Om="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",jo=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Um=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,el=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,In=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Vm=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Al=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Ml=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Hm=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gm=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Zc=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zm=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Ym=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wm="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Ev=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Xm="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",jm=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Lv=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,yp=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,gp=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Pv=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Jm=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Dv=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Au=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,_p=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Km="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",xp=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bp=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,wp=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Qm=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,vs=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Sl=qi(Gc,Tu),Wc=qi(Bm,jf),kl=qi(ni,Jf),Cl=qi(kv,_n),zv=qi(zn,mp),Xc=qi(nf,nn),Es=qi(Lo,Wo),fn=qi(un,Kf),$m=qi(on,Xo),ey=qi($s,Om),El=qi(jo,Um),of=qi(el,In),ds=qi(Vm,Al),Tp=qi(Ml,Cv),Ap=qi(Hm,Gm),sf=qi(Zc,Zm),Mp=qi(Ym,Wm),Sp=qi(Ev,Xm),ty=qi(jm,Lv),ry=qi(yp,gp),Iv=qi(Pv,Jm),Rv=qi(Dv,Au),Fv=qi(_p,Km),Qf=qi(xp,bp),jc=qi(wp,Qm),kp=qi(vs,Yc);function qi(g,h){var b=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=h.match(/attribute ([\w]+) ([\w]+)/g),w=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=h.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=P?P.concat(w):w,G={};return g=g.replace(b,function(K,te,fe,we,be){return G[be]=!0,te==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
varying `+fe+" "+we+" "+be+`;
#else
uniform `+fe+" "+we+" u_"+be+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+be+`
    `+fe+" "+we+" "+be+" = u_"+be+`;
#endif
`}),h=h.replace(b,function(K,te,fe,we,be){var Ie=we==="float"?"vec2":"vec4",Ye=be.match(/color/)?"color":Ie;return G[be]?te==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
uniform lowp float u_`+be+`_t;
attribute `+fe+" "+Ie+" a_"+be+`;
varying `+fe+" "+we+" "+be+`;
#else
uniform `+fe+" "+we+" u_"+be+`;
#endif
`:Ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+be+`
    `+be+" = a_"+be+`;
#else
    `+fe+" "+we+" "+be+" = u_"+be+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+be+`
    `+be+" = unpack_mix_"+Ye+"(a_"+be+", u_"+be+`_t);
#else
    `+fe+" "+we+" "+be+" = u_"+be+`;
#endif
`:te==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
uniform lowp float u_`+be+`_t;
attribute `+fe+" "+Ie+" a_"+be+`;
#else
uniform `+fe+" "+we+" u_"+be+`;
#endif
`:Ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+be+`
    `+fe+" "+we+" "+be+" = a_"+be+`;
#else
    `+fe+" "+we+" "+be+" = u_"+be+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+be+`
    `+fe+" "+we+" "+be+" = unpack_mix_"+Ye+"(a_"+be+", u_"+be+`_t);
#else
    `+fe+" "+we+" "+be+" = u_"+be+`;
#endif
`}),{fragmentSource:g,vertexSource:h,staticAttributes:d,staticUniforms:F}}var ay=Object.freeze({__proto__:null,prelude:Sl,background:Wc,backgroundPattern:kl,circle:Cl,clippingMask:zv,heatmap:Xc,heatmapTexture:Es,collisionBox:fn,collisionCircle:$m,debug:ey,fill:El,fillOutline:of,fillOutlinePattern:ds,fillPattern:Tp,fillExtrusion:Ap,fillExtrusionPattern:sf,hillshadePrepare:Mp,hillshade:Sp,line:ty,lineGradient:ry,linePattern:Iv,lineSDF:Rv,raster:Fv,symbolIcon:Qf,symbolSDF:jc,symbolTextAndIcon:kp}),Jc=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Jc.prototype.bind=function(h,b,d,w,P,F,G,K){this.context=h;for(var te=this.boundPaintVertexBuffers.length!==w.length,fe=0;!te&&fe<w.length;fe++)this.boundPaintVertexBuffers[fe]!==w[fe]&&(te=!0);var we=!this.vao||this.boundProgram!==b||this.boundLayoutVertexBuffer!==d||te||this.boundIndexBuffer!==P||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==G||this.boundDynamicVertexBuffer2!==K;!h.extVertexArrayObject||we?this.freshBind(b,d,w,P,F,G,K):(h.bindVertexArrayOES.set(this.vao),G&&G.bind(),P&&P.dynamicDraw&&P.bind(),K&&K.bind())},Jc.prototype.freshBind=function(h,b,d,w,P,F,G){var K,te=h.numAttributes,fe=this.context,we=fe.gl;if(fe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=fe.extVertexArrayObject.createVertexArrayOES(),fe.bindVertexArrayOES.set(this.vao),K=0,this.boundProgram=h,this.boundLayoutVertexBuffer=b,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=w,this.boundVertexOffset=P,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=G;else{K=fe.currentNumAttributes||0;for(var be=te;be<K;be++)we.disableVertexAttribArray(be)}b.enableAttributes(we,h);for(var Ie=0,Ye=d;Ie<Ye.length;Ie+=1){var Ze=Ye[Ie];Ze.enableAttributes(we,h)}F&&F.enableAttributes(we,h),G&&G.enableAttributes(we,h),b.bind(),b.setVertexAttribPointers(we,h,P);for(var Oe=0,Xe=d;Oe<Xe.length;Oe+=1){var ht=Xe[Oe];ht.bind(),ht.setVertexAttribPointers(we,h,P)}F&&(F.bind(),F.setVertexAttribPointers(we,h,P)),w&&w.bind(),G&&(G.bind(),G.setVertexAttribPointers(we,h,P)),fe.currentNumAttributes=te},Jc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function qv(g){for(var h=[],b=0;b<g.length;b++)if(g[b]!==null){var d=g[b].split(" ");h.push(d.pop())}return h}var Cp=function(h,b,d,w,P,F){var G=h.gl;this.program=G.createProgram();for(var K=qv(d.staticAttributes),te=w?w.getBinderAttributes():[],fe=K.concat(te),we=d.staticUniforms?qv(d.staticUniforms):[],be=w?w.getBinderUniforms():[],Ie=we.concat(be),Ye=[],Ze=0,Oe=Ie;Ze<Oe.length;Ze+=1){var Xe=Oe[Ze];Ye.indexOf(Xe)<0&&Ye.push(Xe)}var ht=w?w.defines():[];F&&ht.push("#define OVERDRAW_INSPECTOR;");var zt=ht.concat(Sl.fragmentSource,d.fragmentSource).join(`
`),qt=ht.concat(Sl.vertexSource,d.vertexSource).join(`
`),Qt=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost()){this.failedToCreate=!0;return}G.shaderSource(Qt,zt),G.compileShader(Qt),G.attachShader(this.program,Qt);var rr=G.createShader(G.VERTEX_SHADER);if(G.isContextLost()){this.failedToCreate=!0;return}G.shaderSource(rr,qt),G.compileShader(rr),G.attachShader(this.program,rr),this.attributes={};var Yt={};this.numAttributes=fe.length;for(var ar=0;ar<this.numAttributes;ar++)fe[ar]&&(G.bindAttribLocation(this.program,ar,fe[ar]),this.attributes[fe[ar]]=ar);G.linkProgram(this.program),G.deleteShader(rr),G.deleteShader(Qt);for(var cr=0;cr<Ye.length;cr++){var _r=Ye[cr];if(_r&&!Yt[_r]){var Pr=G.getUniformLocation(this.program,_r);Pr&&(Yt[_r]=Pr)}}this.fixedUniforms=P(h,Yt),this.binderUniforms=w?w.getUniforms(h,Yt):[]};Cp.prototype.draw=function(h,b,d,w,P,F,G,K,te,fe,we,be,Ie,Ye,Ze,Oe){var Xe,ht=h.gl;if(!this.failedToCreate){h.program.set(this.program),h.setDepthMode(d),h.setStencilMode(w),h.setColorMode(P),h.setCullFace(F);for(var zt in this.fixedUniforms)this.fixedUniforms[zt].set(G[zt]);Ye&&Ye.setUniforms(h,this.binderUniforms,be,{zoom:Ie});for(var qt=(Xe={},Xe[ht.LINES]=2,Xe[ht.TRIANGLES]=3,Xe[ht.LINE_STRIP]=1,Xe)[b],Qt=0,rr=we.get();Qt<rr.length;Qt+=1){var Yt=rr[Qt],ar=Yt.vaos||(Yt.vaos={}),cr=ar[K]||(ar[K]=new Jc);cr.bind(h,this,te,Ye?Ye.getPaintVertexBuffers():[],fe,Yt.vertexOffset,Ze,Oe),ht.drawElements(b,Yt.primitiveLength*qt,ht.UNSIGNED_SHORT,Yt.primitiveOffset*qt*2)}}};function lf(g,h,b){var d=1/yo(b,1,h.transform.tileZoom),w=Math.pow(2,b.tileID.overscaledZ),P=b.tileSize*Math.pow(2,h.transform.tileZoom)/w,F=P*(b.tileID.canonical.x+b.tileID.wrap*w),G=P*b.tileID.canonical.y;return{u_image:0,u_texsize:b.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[F>>16,G>>16],u_pixel_coord_lower:[F&65535,G&65535]}}function Mu(g,h,b,d){var w=b.imageManager.getPattern(g.from.toString()),P=b.imageManager.getPattern(g.to.toString()),F=b.imageManager.getPixelSize(),G=F.width,K=F.height,te=Math.pow(2,d.tileID.overscaledZ),fe=d.tileSize*Math.pow(2,b.transform.tileZoom)/te,we=fe*(d.tileID.canonical.x+d.tileID.wrap*te),be=fe*d.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:w.tl,u_pattern_br_a:w.br,u_pattern_tl_b:P.tl,u_pattern_br_b:P.br,u_texsize:[G,K],u_mix:h.t,u_pattern_size_a:w.displaySize,u_pattern_size_b:P.displaySize,u_scale_a:h.fromScale,u_scale_b:h.toScale,u_tile_units_to_pixels:1/yo(d,1,b.transform.tileZoom),u_pixel_coord_upper:[we>>16,be>>16],u_pixel_coord_lower:[we&65535,be&65535]}}var Nv=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_lightpos:new a.Uniform3f(g,h.u_lightpos),u_lightintensity:new a.Uniform1f(g,h.u_lightintensity),u_lightcolor:new a.Uniform3f(g,h.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,h.u_vertical_gradient),u_opacity:new a.Uniform1f(g,h.u_opacity)}},xn=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_lightpos:new a.Uniform3f(g,h.u_lightpos),u_lightintensity:new a.Uniform1f(g,h.u_lightintensity),u_lightcolor:new a.Uniform3f(g,h.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,h.u_vertical_gradient),u_height_factor:new a.Uniform1f(g,h.u_height_factor),u_image:new a.Uniform1i(g,h.u_image),u_texsize:new a.Uniform2f(g,h.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,h.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,h.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,h.u_scale),u_fade:new a.Uniform1f(g,h.u_fade),u_opacity:new a.Uniform1f(g,h.u_opacity)}},$f=function(g,h,b,d){var w=h.style.light,P=w.properties.get("position"),F=[P.x,P.y,P.z],G=a.create$1();w.properties.get("anchor")==="viewport"&&a.fromRotation(G,-h.transform.angle),a.transformMat3(F,F,G);var K=w.properties.get("color");return{u_matrix:g,u_lightpos:F,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+b,u_opacity:d}},tl=function(g,h,b,d,w,P,F){return a.extend($f(g,h,b,d),lf(P,h,F),{u_height_factor:-Math.pow(2,w.overscaledZ)/F.tileSize/8})},Ll=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix)}},Pl=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_image:new a.Uniform1i(g,h.u_image),u_texsize:new a.Uniform2f(g,h.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,h.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,h.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,h.u_scale),u_fade:new a.Uniform1f(g,h.u_fade)}},Dl=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_world:new a.Uniform2f(g,h.u_world)}},rl=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_world:new a.Uniform2f(g,h.u_world),u_image:new a.Uniform1i(g,h.u_image),u_texsize:new a.Uniform2f(g,h.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,h.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,h.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,h.u_scale),u_fade:new a.Uniform1f(g,h.u_fade)}},Ls=function(g){return{u_matrix:g}},Ps=function(g,h,b,d){return a.extend(Ls(g),lf(b,h,d))},zl=function(g,h){return{u_matrix:g,u_world:h}},Ep=function(g,h,b,d,w){return a.extend(Ps(g,h,b,d),{u_world:w})},iy=function(g,h){return{u_camera_to_center_distance:new a.Uniform1f(g,h.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(g,h.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(g,h.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(g,h.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(g,h.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(g,h.u_matrix)}},ny=function(g,h,b,d){var w=g.transform,P,F;if(d.paint.get("circle-pitch-alignment")==="map"){var G=yo(b,1,w.zoom);P=!0,F=[G,G]}else P=!1,F=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(h.posMatrix,b,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+P,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:F}},oy=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_camera_to_center_distance:new a.Uniform1f(g,h.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(g,h.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(g,h.u_extrude_scale),u_overscale_factor:new a.Uniform1f(g,h.u_overscale_factor)}},Lp=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_inv_matrix:new a.UniformMatrix4f(g,h.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(g,h.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(g,h.u_viewport_size)}},Pp=function(g,h,b){var d=yo(b,1,h.zoom),w=Math.pow(2,h.zoom-b.tileID.overscaledZ),P=b.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:h.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[h.pixelsToGLUnits[0]/(d*w),h.pixelsToGLUnits[1]/(d*w)],u_overscale_factor:P}},Bv=function(g,h,b){return{u_matrix:g,u_inv_matrix:h,u_camera_to_center_distance:b.cameraToCenterDistance,u_viewport_size:[b.width,b.height]}},Ov=function(g,h){return{u_color:new a.UniformColor(g,h.u_color),u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_overlay:new a.Uniform1i(g,h.u_overlay),u_overlay_scale:new a.Uniform1f(g,h.u_overlay_scale)}},ec=function(g,h,b){return b===void 0&&(b=1),{u_matrix:g,u_color:h,u_overlay:0,u_overlay_scale:b}},Kc=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix)}},Dp=function(g){return{u_matrix:g}},Uv=function(g,h){return{u_extrude_scale:new a.Uniform1f(g,h.u_extrude_scale),u_intensity:new a.Uniform1f(g,h.u_intensity),u_matrix:new a.UniformMatrix4f(g,h.u_matrix)}},zp=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_world:new a.Uniform2f(g,h.u_world),u_image:new a.Uniform1i(g,h.u_image),u_color_ramp:new a.Uniform1i(g,h.u_color_ramp),u_opacity:new a.Uniform1f(g,h.u_opacity)}},uf=function(g,h,b,d){return{u_matrix:g,u_extrude_scale:yo(h,1,b),u_intensity:d}},sy=function(g,h,b,d){var w=a.create();a.ortho(w,0,g.width,g.height,0,0,1);var P=g.context.gl;return{u_matrix:w,u_world:[P.drawingBufferWidth,P.drawingBufferHeight],u_image:b,u_color_ramp:d,u_opacity:h.paint.get("heatmap-opacity")}},Ip=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_image:new a.Uniform1i(g,h.u_image),u_latrange:new a.Uniform2f(g,h.u_latrange),u_light:new a.Uniform2f(g,h.u_light),u_shadow:new a.UniformColor(g,h.u_shadow),u_highlight:new a.UniformColor(g,h.u_highlight),u_accent:new a.UniformColor(g,h.u_accent)}},Rp=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_image:new a.Uniform1i(g,h.u_image),u_dimension:new a.Uniform2f(g,h.u_dimension),u_zoom:new a.Uniform1f(g,h.u_zoom),u_unpack:new a.Uniform4f(g,h.u_unpack)}},Fp=function(g,h,b){var d=b.paint.get("hillshade-shadow-color"),w=b.paint.get("hillshade-highlight-color"),P=b.paint.get("hillshade-accent-color"),F=b.paint.get("hillshade-illumination-direction")*(Math.PI/180);b.paint.get("hillshade-illumination-anchor")==="viewport"&&(F-=g.transform.angle);var G=!g.options.moving;return{u_matrix:g.transform.calculatePosMatrix(h.tileID.toUnwrapped(),G),u_image:0,u_latrange:Hv(g,h.tileID),u_light:[b.paint.get("hillshade-exaggeration"),F],u_shadow:d,u_highlight:w,u_accent:P}},Vv=function(g,h){var b=h.stride,d=a.create();return a.ortho(d,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(d,d,[0,-a.EXTENT,0]),{u_matrix:d,u_image:1,u_dimension:[b,b],u_zoom:g.overscaledZ,u_unpack:h.getUnpackVector()}};function Hv(g,h){var b=Math.pow(2,h.canonical.z),d=h.canonical.y;return[new a.MercatorCoordinate(0,d/b).toLngLat().lat,new a.MercatorCoordinate(0,(d+1)/b).toLngLat().lat]}var Su=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_ratio:new a.Uniform1f(g,h.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,h.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,h.u_units_to_pixels)}},Il=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_ratio:new a.Uniform1f(g,h.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,h.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,h.u_units_to_pixels),u_image:new a.Uniform1i(g,h.u_image),u_image_height:new a.Uniform1f(g,h.u_image_height)}},tc=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_texsize:new a.Uniform2f(g,h.u_texsize),u_ratio:new a.Uniform1f(g,h.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,h.u_device_pixel_ratio),u_image:new a.Uniform1i(g,h.u_image),u_units_to_pixels:new a.Uniform2f(g,h.u_units_to_pixels),u_scale:new a.Uniform3f(g,h.u_scale),u_fade:new a.Uniform1f(g,h.u_fade)}},Gv=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_ratio:new a.Uniform1f(g,h.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,h.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,h.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(g,h.u_patternscale_a),u_patternscale_b:new a.Uniform2f(g,h.u_patternscale_b),u_sdfgamma:new a.Uniform1f(g,h.u_sdfgamma),u_image:new a.Uniform1i(g,h.u_image),u_tex_y_a:new a.Uniform1f(g,h.u_tex_y_a),u_tex_y_b:new a.Uniform1f(g,h.u_tex_y_b),u_mix:new a.Uniform1f(g,h.u_mix)}},Qc=function(g,h,b){var d=g.transform;return{u_matrix:ku(g,h,b),u_ratio:1/yo(h,1,d.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},$c=function(g,h,b,d){return a.extend(Qc(g,h,b),{u_image:0,u_image_height:d})},eh=function(g,h,b,d){var w=g.transform,P=th(h,w);return{u_matrix:ku(g,h,b),u_texsize:h.imageAtlasTexture.size,u_ratio:1/yo(h,1,w.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[P,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Rl=function(g,h,b,d,w){var P=g.transform,F=g.lineAtlas,G=th(h,P),K=b.layout.get("line-cap")==="round",te=F.getDash(d.from,K),fe=F.getDash(d.to,K),we=te.width*w.fromScale,be=fe.width*w.toScale;return a.extend(Qc(g,h,b),{u_patternscale_a:[G/we,-te.height/2],u_patternscale_b:[G/be,-fe.height/2],u_sdfgamma:F.width/(Math.min(we,be)*256*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:te.y,u_tex_y_b:fe.y,u_mix:w.t})};function th(g,h){return 1/yo(g,1,h.tileZoom)}function ku(g,h,b){return g.translatePosMatrix(h.tileID.posMatrix,h,b.paint.get("line-translate"),b.paint.get("line-translate-anchor"))}var ff=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_tl_parent:new a.Uniform2f(g,h.u_tl_parent),u_scale_parent:new a.Uniform1f(g,h.u_scale_parent),u_buffer_scale:new a.Uniform1f(g,h.u_buffer_scale),u_fade_t:new a.Uniform1f(g,h.u_fade_t),u_opacity:new a.Uniform1f(g,h.u_opacity),u_image0:new a.Uniform1i(g,h.u_image0),u_image1:new a.Uniform1i(g,h.u_image1),u_brightness_low:new a.Uniform1f(g,h.u_brightness_low),u_brightness_high:new a.Uniform1f(g,h.u_brightness_high),u_saturation_factor:new a.Uniform1f(g,h.u_saturation_factor),u_contrast_factor:new a.Uniform1f(g,h.u_contrast_factor),u_spin_weights:new a.Uniform3f(g,h.u_spin_weights)}},qp=function(g,h,b,d,w){return{u_matrix:g,u_tl_parent:h,u_scale_parent:b,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:rc(w.paint.get("raster-saturation")),u_contrast_factor:di(w.paint.get("raster-contrast")),u_spin_weights:rh(w.paint.get("raster-hue-rotate"))}};function rh(g){g*=Math.PI/180;var h=Math.sin(g),b=Math.cos(g);return[(2*b+1)/3,(-Math.sqrt(3)*h-b+1)/3,(Math.sqrt(3)*h-b+1)/3]}function di(g){return g>0?1/(1-g):1+g}function rc(g){return g>0?1-1/(1.001-g):-g}var Np=function(g,h){return{u_is_size_zoom_constant:new a.Uniform1i(g,h.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,h.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,h.u_size_t),u_size:new a.Uniform1f(g,h.u_size),u_camera_to_center_distance:new a.Uniform1f(g,h.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,h.u_pitch),u_rotate_symbol:new a.Uniform1i(g,h.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,h.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,h.u_fade_change),u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,h.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,h.u_coord_matrix),u_is_text:new a.Uniform1i(g,h.u_is_text),u_pitch_with_map:new a.Uniform1i(g,h.u_pitch_with_map),u_texsize:new a.Uniform2f(g,h.u_texsize),u_texture:new a.Uniform1i(g,h.u_texture)}},Bp=function(g,h){return{u_is_size_zoom_constant:new a.Uniform1i(g,h.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,h.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,h.u_size_t),u_size:new a.Uniform1f(g,h.u_size),u_camera_to_center_distance:new a.Uniform1f(g,h.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,h.u_pitch),u_rotate_symbol:new a.Uniform1i(g,h.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,h.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,h.u_fade_change),u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,h.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,h.u_coord_matrix),u_is_text:new a.Uniform1i(g,h.u_is_text),u_pitch_with_map:new a.Uniform1i(g,h.u_pitch_with_map),u_texsize:new a.Uniform2f(g,h.u_texsize),u_texture:new a.Uniform1i(g,h.u_texture),u_gamma_scale:new a.Uniform1f(g,h.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,h.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,h.u_is_halo)}},Fl=function(g,h){return{u_is_size_zoom_constant:new a.Uniform1i(g,h.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,h.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,h.u_size_t),u_size:new a.Uniform1f(g,h.u_size),u_camera_to_center_distance:new a.Uniform1f(g,h.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,h.u_pitch),u_rotate_symbol:new a.Uniform1i(g,h.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,h.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,h.u_fade_change),u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,h.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,h.u_coord_matrix),u_is_text:new a.Uniform1i(g,h.u_is_text),u_pitch_with_map:new a.Uniform1i(g,h.u_pitch_with_map),u_texsize:new a.Uniform2f(g,h.u_texsize),u_texsize_icon:new a.Uniform2f(g,h.u_texsize_icon),u_texture:new a.Uniform1i(g,h.u_texture),u_texture_icon:new a.Uniform1i(g,h.u_texture_icon),u_gamma_scale:new a.Uniform1f(g,h.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,h.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,h.u_is_halo)}},Op=function(g,h,b,d,w,P,F,G,K,te){var fe=w.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:h?h.uSizeT:0,u_size:h?h.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_pitch:fe.pitch/360*2*Math.PI,u_rotate_symbol:+b,u_aspect_ratio:fe.width/fe.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:F,u_coord_matrix:G,u_is_text:+K,u_pitch_with_map:+d,u_texsize:te,u_texture:0}},Up=function(g,h,b,d,w,P,F,G,K,te,fe){var we=w.transform;return a.extend(Op(g,h,b,d,w,P,F,G,K,te),{u_gamma_scale:d?Math.cos(we._pitch)*we.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+fe})},Zv=function(g,h,b,d,w,P,F,G,K,te){return a.extend(Up(g,h,b,d,w,P,F,G,!0,K,!0),{u_texsize_icon:te,u_texture_icon:1})},Vp=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_opacity:new a.Uniform1f(g,h.u_opacity),u_color:new a.UniformColor(g,h.u_color)}},ly=function(g,h){return{u_matrix:new a.UniformMatrix4f(g,h.u_matrix),u_opacity:new a.Uniform1f(g,h.u_opacity),u_image:new a.Uniform1i(g,h.u_image),u_pattern_tl_a:new a.Uniform2f(g,h.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(g,h.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(g,h.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(g,h.u_pattern_br_b),u_texsize:new a.Uniform2f(g,h.u_texsize),u_mix:new a.Uniform1f(g,h.u_mix),u_pattern_size_a:new a.Uniform2f(g,h.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(g,h.u_pattern_size_b),u_scale_a:new a.Uniform1f(g,h.u_scale_a),u_scale_b:new a.Uniform1f(g,h.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(g,h.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,h.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(g,h.u_tile_units_to_pixels)}},ql=function(g,h,b){return{u_matrix:g,u_opacity:h,u_color:b}},Cu=function(g,h,b,d,w,P){return a.extend(Mu(d,P,b,w),{u_matrix:g,u_opacity:h})},ac={fillExtrusion:Nv,fillExtrusionPattern:xn,fill:Ll,fillPattern:Pl,fillOutline:Dl,fillOutlinePattern:rl,circle:iy,collisionBox:oy,collisionCircle:Lp,debug:Ov,clippingMask:Kc,heatmap:Uv,heatmapTexture:zp,hillshade:Ip,hillshadePrepare:Rp,line:Su,lineGradient:Il,linePattern:tc,lineSDF:Gv,raster:ff,symbolIcon:Np,symbolSDF:Bp,symbolTextAndIcon:Fl,background:Vp,backgroundPattern:ly},Ds;function zs(g,h,b,d,w,P,F){for(var G=g.context,K=G.gl,te=g.useProgram("collisionBox"),fe=[],we=0,be=0,Ie=0;Ie<d.length;Ie++){var Ye=d[Ie],Ze=h.getTile(Ye),Oe=Ze.getBucket(b);if(Oe){var Xe=Ye.posMatrix;(w[0]!==0||w[1]!==0)&&(Xe=g.translatePosMatrix(Ye.posMatrix,Ze,w,P));var ht=F?Oe.textCollisionBox:Oe.iconCollisionBox,zt=Oe.collisionCircleArray;if(zt.length>0){var qt=a.create(),Qt=Xe;a.mul(qt,Oe.placementInvProjMatrix,g.transform.glCoordMatrix),a.mul(qt,qt,Oe.placementViewportMatrix),fe.push({circleArray:zt,circleOffset:be,transform:Qt,invTransform:qt}),we+=zt.length/4,be=we}ht&&te.draw(G,K.LINES,pa.disabled,Zr.disabled,g.colorModeForRenderPass(),Ee.disabled,Pp(Xe,g.transform,Ze),b.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,null,g.transform.zoom,null,null,ht.collisionVertexBuffer)}}if(!(!F||!fe.length)){var rr=g.useProgram("collisionCircle"),Yt=new a.StructArrayLayout2f1f2i16;Yt.resize(we*4),Yt._trim();for(var ar=0,cr=0,_r=fe;cr<_r.length;cr+=1)for(var Pr=_r[cr],Sr=0;Sr<Pr.circleArray.length/4;Sr++){var Xr=Sr*4,Fa=Pr.circleArray[Xr+0],ba=Pr.circleArray[Xr+1],qr=Pr.circleArray[Xr+2],ka=Pr.circleArray[Xr+3];Yt.emplace(ar++,Fa,ba,qr,ka,0),Yt.emplace(ar++,Fa,ba,qr,ka,1),Yt.emplace(ar++,Fa,ba,qr,ka,2),Yt.emplace(ar++,Fa,ba,qr,ka,3)}(!Ds||Ds.length<we*2)&&(Ds=Jo(we));for(var ia=G.createIndexBuffer(Ds,!0),Wa=G.createVertexBuffer(Yt,a.collisionCircleLayout.members,!0),Va=0,Ai=fe;Va<Ai.length;Va+=1){var za=Ai[Va],mi=Bv(za.transform,za.invTransform,g.transform);rr.draw(G,K.TRIANGLES,pa.disabled,Zr.disabled,g.colorModeForRenderPass(),Ee.disabled,mi,b.id,Wa,ia,a.SegmentVector.simpleSegment(0,za.circleOffset*2,za.circleArray.length,za.circleArray.length/2),null,g.transform.zoom,null,null,null)}Wa.destroy(),ia.destroy()}}function Jo(g){var h=g*2,b=new a.StructArrayLayout3ui6;b.resize(h),b._trim();for(var d=0;d<h;d++){var w=d*6;b.uint16[w+0]=d*4+0,b.uint16[w+1]=d*4+1,b.uint16[w+2]=d*4+2,b.uint16[w+3]=d*4+2,b.uint16[w+4]=d*4+3,b.uint16[w+5]=d*4+0}return b}var cf=a.identity(new Float32Array(16));function uy(g,h,b,d,w){if(g.renderPass==="translucent"){var P=Zr.disabled,F=g.colorModeForRenderPass(),G=b.layout.get("text-variable-anchor");G&&Yv(d,g,b,h,b.layout.get("text-rotation-alignment"),b.layout.get("text-pitch-alignment"),w),b.paint.get("icon-opacity").constantOr(1)!==0&&Wv(g,h,b,d,!1,b.paint.get("icon-translate"),b.paint.get("icon-translate-anchor"),b.layout.get("icon-rotation-alignment"),b.layout.get("icon-pitch-alignment"),b.layout.get("icon-keep-upright"),P,F),b.paint.get("text-opacity").constantOr(1)!==0&&Wv(g,h,b,d,!0,b.paint.get("text-translate"),b.paint.get("text-translate-anchor"),b.layout.get("text-rotation-alignment"),b.layout.get("text-pitch-alignment"),b.layout.get("text-keep-upright"),P,F),h.map.showCollisionBoxes&&(zs(g,h,b,d,b.paint.get("text-translate"),b.paint.get("text-translate-anchor"),!0),zs(g,h,b,d,b.paint.get("icon-translate"),b.paint.get("icon-translate-anchor"),!1))}}function hf(g,h,b,d,w,P){var F=a.getAnchorAlignment(g),G=F.horizontalAlign,K=F.verticalAlign,te=-(G-.5)*h,fe=-(K-.5)*b,we=a.evaluateVariableOffset(g,d);return new a.Point((te/w+we[0])*P,(fe/w+we[1])*P)}function Yv(g,h,b,d,w,P,F){for(var G=h.transform,K=w==="map",te=P==="map",fe=0,we=g;fe<we.length;fe+=1){var be=we[fe],Ie=d.getTile(be),Ye=Ie.getBucket(b);if(!(!Ye||!Ye.text||!Ye.text.segments.get().length)){var Ze=Ye.textSizeData,Oe=a.evaluateSizeForZoom(Ze,G.zoom),Xe=yo(Ie,1,h.transform.zoom),ht=$n(be.posMatrix,te,K,h.transform,Xe),zt=b.layout.get("icon-text-fit")!=="none"&&Ye.hasIconData();if(Oe){var qt=Math.pow(2,G.zoom-Ie.tileID.overscaledZ);fy(Ye,K,te,F,a.symbolSize,G,ht,be.posMatrix,qt,Oe,zt)}}}}function fy(g,h,b,d,w,P,F,G,K,te,fe){var we=g.text.placedSymbolArray,be=g.text.dynamicLayoutVertexArray,Ie=g.icon.dynamicLayoutVertexArray,Ye={};be.clear();for(var Ze=0;Ze<we.length;Ze++){var Oe=we.get(Ze),Xe=g.allowVerticalPlacement&&!Oe.placedOrientation,ht=!Oe.hidden&&Oe.crossTileID&&!Xe?d[Oe.crossTileID]:null;if(!ht)ef(Oe.numGlyphs,be);else{var zt=new a.Point(Oe.anchorX,Oe.anchorY),qt=Ui(zt,b?G:F),Qt=gl(P.cameraToCenterDistance,qt.signedDistanceFromCamera),rr=w.evaluateSizeForFeature(g.textSizeData,te,Oe)*Qt/a.ONE_EM;b&&(rr*=g.tilePixelRatio/K);for(var Yt=ht.width,ar=ht.height,cr=ht.anchor,_r=ht.textOffset,Pr=ht.textBoxScale,Sr=hf(cr,Yt,ar,_r,Pr,rr),Xr=b?Ui(zt.add(Sr),F).point:qt.point.add(h?Sr.rotate(-P.angle):Sr),Fa=g.allowVerticalPlacement&&Oe.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,ba=0;ba<Oe.numGlyphs;ba++)a.addDynamicAttributes(be,Xr,Fa);fe&&Oe.associatedIconIndex>=0&&(Ye[Oe.associatedIconIndex]={shiftedAnchor:Xr,angle:Fa})}}if(fe){Ie.clear();for(var qr=g.icon.placedSymbolArray,ka=0;ka<qr.length;ka++){var ia=qr.get(ka);if(ia.hidden)ef(ia.numGlyphs,Ie);else{var Wa=Ye[ka];if(!Wa)ef(ia.numGlyphs,Ie);else for(var Va=0;Va<ia.numGlyphs;Va++)a.addDynamicAttributes(Ie,Wa.shiftedAnchor,Wa.angle)}}g.icon.dynamicLayoutVertexBuffer.updateData(Ie)}g.text.dynamicLayoutVertexBuffer.updateData(be)}function ps(g,h,b){return b.iconsInText&&h?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Wv(g,h,b,d,w,P,F,G,K,te,fe,we){for(var be=g.context,Ie=be.gl,Ye=g.transform,Ze=G==="map",Oe=K==="map",Xe=Ze&&b.layout.get("symbol-placement")!=="point",ht=Ze&&!Oe&&!Xe,zt=b.layout.get("symbol-sort-key").constantOr(1)!==void 0,qt=!1,Qt=g.depthModeForSublayer(0,pa.ReadOnly),rr=b.layout.get("text-variable-anchor"),Yt=[],ar=0,cr=d;ar<cr.length;ar+=1){var _r=cr[ar],Pr=h.getTile(_r),Sr=Pr.getBucket(b);if(Sr){var Xr=w?Sr.text:Sr.icon;if(!(!Xr||!Xr.segments.get().length)){var Fa=Xr.programConfigurations.get(b.id),ba=w||Sr.sdfIcons,qr=w?Sr.textSizeData:Sr.iconSizeData,ka=Oe||Ye.pitch!==0,ia=g.useProgram(ps(ba,w,Sr),Fa),Wa=a.evaluateSizeForZoom(qr,Ye.zoom),Va=void 0,Ai=[0,0],za=void 0,mi=void 0,na=null,Oa=void 0;if(w){if(za=Pr.glyphAtlasTexture,mi=Ie.LINEAR,Va=Pr.glyphAtlasTexture.size,Sr.iconsInText){Ai=Pr.imageAtlasTexture.size,na=Pr.imageAtlasTexture;var en=qr.kind==="composite"||qr.kind==="camera";Oa=ka||g.options.rotating||g.options.zooming||en?Ie.LINEAR:Ie.NEAREST}}else{var Fn=b.layout.get("icon-size").constantOr(0)!==1||Sr.iconsNeedLinear;za=Pr.imageAtlasTexture,mi=ba||g.options.rotating||g.options.zooming||Fn||ka?Ie.LINEAR:Ie.NEAREST,Va=Pr.imageAtlasTexture.size}var Fs=yo(Pr,1,g.transform.zoom),qs=$n(_r.posMatrix,Oe,Ze,g.transform,Fs),il=gu(_r.posMatrix,Oe,Ze,g.transform,Fs),Hl=rr&&Sr.hasTextData(),uc=b.layout.get("icon-text-fit")!=="none"&&Hl&&Sr.hasIconData();Xe&&Vc(Sr,_r.posMatrix,g,w,qs,il,Oe,te);var Gl=g.translatePosMatrix(_r.posMatrix,Pr,P,F),Do=Xe||w&&rr||uc?cf:qs,Zl=g.translatePosMatrix(il,Pr,P,F,!0),$o=ba&&b.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0,zo=void 0;ba?Sr.iconsInText?zo=Zv(qr.kind,Wa,ht,Oe,g,Gl,Do,Zl,Va,Ai):zo=Up(qr.kind,Wa,ht,Oe,g,Gl,Do,Zl,w,Va,!0):zo=Op(qr.kind,Wa,ht,Oe,g,Gl,Do,Zl,w,Va);var nl={program:ia,buffers:Xr,uniformValues:zo,atlasTexture:za,atlasTextureIcon:na,atlasInterpolation:mi,atlasInterpolationIcon:Oa,isSDF:ba,hasHalo:$o};if(zt&&Sr.canOverlap){qt=!0;for(var zu=Xr.segments.get(),ol=0,Kp=zu;ol<Kp.length;ol+=1){var mh=Kp[ol];Yt.push({segments:new a.SegmentVector([mh]),sortKey:mh.sortKey,state:nl})}}else Yt.push({segments:Xr.segments,sortKey:0,state:nl})}}}qt&&Yt.sort(function($p,e0){return $p.sortKey-e0.sortKey});for(var Zn=0,Qp=Yt;Zn<Qp.length;Zn+=1){var ad=Qp[Zn],bo=ad.state;if(be.activeTexture.set(Ie.TEXTURE0),bo.atlasTexture.bind(bo.atlasInterpolation,Ie.CLAMP_TO_EDGE),bo.atlasTextureIcon&&(be.activeTexture.set(Ie.TEXTURE1),bo.atlasTextureIcon&&bo.atlasTextureIcon.bind(bo.atlasInterpolationIcon,Ie.CLAMP_TO_EDGE)),bo.isSDF){var yh=bo.uniformValues;bo.hasHalo&&(yh.u_is_halo=1,vf(bo.buffers,ad.segments,b,g,bo.program,Qt,fe,we,yh)),yh.u_is_halo=0}vf(bo.buffers,ad.segments,b,g,bo.program,Qt,fe,we,bo.uniformValues)}}function vf(g,h,b,d,w,P,F,G,K){var te=d.context,fe=te.gl;w.draw(te,fe.TRIANGLES,P,F,G,Ee.disabled,K,b.id,g.layoutVertexBuffer,g.indexBuffer,h,b.paint,d.transform.zoom,g.programConfigurations.get(b.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function ah(g,h,b,d){if(g.renderPass==="translucent"){var w=b.paint.get("circle-opacity"),P=b.paint.get("circle-stroke-width"),F=b.paint.get("circle-stroke-opacity"),G=b.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(w.constantOr(1)===0&&(P.constantOr(1)===0||F.constantOr(1)===0))){for(var K=g.context,te=K.gl,fe=g.depthModeForSublayer(0,pa.ReadOnly),we=Zr.disabled,be=g.colorModeForRenderPass(),Ie=[],Ye=0;Ye<d.length;Ye++){var Ze=d[Ye],Oe=h.getTile(Ze),Xe=Oe.getBucket(b);if(Xe){var ht=Xe.programConfigurations.get(b.id),zt=g.useProgram("circle",ht),qt=Xe.layoutVertexBuffer,Qt=Xe.indexBuffer,rr=ny(g,Ze,Oe,b),Yt={programConfiguration:ht,program:zt,layoutVertexBuffer:qt,indexBuffer:Qt,uniformValues:rr};if(G)for(var ar=Xe.segments.get(),cr=0,_r=ar;cr<_r.length;cr+=1){var Pr=_r[cr];Ie.push({segments:new a.SegmentVector([Pr]),sortKey:Pr.sortKey,state:Yt})}else Ie.push({segments:Xe.segments,sortKey:0,state:Yt})}}G&&Ie.sort(function(za,mi){return za.sortKey-mi.sortKey});for(var Sr=0,Xr=Ie;Sr<Xr.length;Sr+=1){var Fa=Xr[Sr],ba=Fa.state,qr=ba.programConfiguration,ka=ba.program,ia=ba.layoutVertexBuffer,Wa=ba.indexBuffer,Va=ba.uniformValues,Ai=Fa.segments;ka.draw(K,te.TRIANGLES,fe,we,be,Ee.disabled,Va,b.id,ia,Wa,Ai,b.paint,g.transform.zoom,qr)}}}}function Eu(g,h,b,d){if(b.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){var w=g.context,P=w.gl,F=Zr.disabled,G=new ee([P.ONE,P.ONE],a.Color.transparent,[!0,!0,!0,!0]);cy(w,g,b),w.clear({color:a.Color.transparent});for(var K=0;K<d.length;K++){var te=d[K];if(!h.hasRenderableParent(te)){var fe=h.getTile(te),we=fe.getBucket(b);if(we){var be=we.programConfigurations.get(b.id),Ie=g.useProgram("heatmap",be),Ye=g.transform,Ze=Ye.zoom;Ie.draw(w,P.TRIANGLES,pa.disabled,F,G,Ee.disabled,uf(te.posMatrix,fe,Ze,b.paint.get("heatmap-intensity")),b.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,b.paint,g.transform.zoom,be)}}}w.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),ih(g,b))}function cy(g,h,b){var d=g.gl;g.activeTexture.set(d.TEXTURE1),g.viewport.set([0,0,h.width/4,h.height/4]);var w=b.heatmapFbo;if(w)d.bindTexture(d.TEXTURE_2D,w.colorAttachment.get()),g.bindFramebuffer.set(w.framebuffer);else{var P=d.createTexture();d.bindTexture(d.TEXTURE_2D,P),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),w=b.heatmapFbo=g.createFramebuffer(h.width/4,h.height/4,!1),hy(g,h,P,w)}}function hy(g,h,b,d){var w=g.gl,P=g.extRenderToTextureHalfFloat?g.extTextureHalfFloat.HALF_FLOAT_OES:w.UNSIGNED_BYTE;w.texImage2D(w.TEXTURE_2D,0,w.RGBA,h.width/4,h.height/4,0,w.RGBA,P,null),d.colorAttachment.set(b)}function ih(g,h){var b=g.context,d=b.gl,w=h.heatmapFbo;if(w){b.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,w.colorAttachment.get()),b.activeTexture.set(d.TEXTURE1);var P=h.colorRampTexture;P||(P=h.colorRampTexture=new a.Texture(b,h.colorRamp,d.RGBA)),P.bind(d.LINEAR,d.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(b,d.TRIANGLES,pa.disabled,Zr.disabled,g.colorModeForRenderPass(),Ee.disabled,sy(g,h,0,1),h.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,h.paint,g.transform.zoom)}}function _o(g,h,b,d){if(g.renderPass==="translucent"){var w=b.paint.get("line-opacity"),P=b.paint.get("line-width");if(!(w.constantOr(1)===0||P.constantOr(1)===0))for(var F=g.depthModeForSublayer(0,pa.ReadOnly),G=g.colorModeForRenderPass(),K=b.paint.get("line-dasharray"),te=b.paint.get("line-pattern"),fe=te.constantOr(1),we=b.paint.get("line-gradient"),be=b.getCrossfadeParameters(),Ie=fe?"linePattern":K?"lineSDF":we?"lineGradient":"line",Ye=g.context,Ze=Ye.gl,Oe=!0,Xe=0,ht=d;Xe<ht.length;Xe+=1){var zt=ht[Xe],qt=h.getTile(zt);if(!(fe&&!qt.patternsLoaded())){var Qt=qt.getBucket(b);if(Qt){var rr=Qt.programConfigurations.get(b.id),Yt=g.context.program.get(),ar=g.useProgram(Ie,rr),cr=Oe||ar.program!==Yt,_r=te.constantOr(null);if(_r&&qt.imageAtlas){var Pr=qt.imageAtlas,Sr=Pr.patternPositions[_r.to.toString()],Xr=Pr.patternPositions[_r.from.toString()];Sr&&Xr&&rr.setConstantPatternPositions(Sr,Xr)}var Fa=fe?eh(g,qt,b,be):K?Rl(g,qt,b,K,be):we?$c(g,qt,b,Qt.lineClipsArray.length):Qc(g,qt,b);if(fe)Ye.activeTexture.set(Ze.TEXTURE0),qt.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),rr.updatePaintBuffers(be);else if(K&&(cr||g.lineAtlas.dirty))Ye.activeTexture.set(Ze.TEXTURE0),g.lineAtlas.bind(Ye);else if(we){var ba=Qt.gradients[b.id],qr=ba.texture;if(b.gradientVersion!==ba.version){var ka=256;if(b.stepInterpolant){var ia=h.getSource().maxzoom,Wa=zt.canonical.z===ia?Math.ceil(1<<g.transform.maxZoom-zt.canonical.z):1,Va=Qt.maxLineLength/a.EXTENT,Ai=1024,za=Va*Ai*Wa;ka=a.clamp(a.nextPowerOfTwo(za),256,Ye.maxTextureSize)}ba.gradient=a.renderColorRamp({expression:b.gradientExpression(),evaluationKey:"lineProgress",resolution:ka,image:ba.gradient||void 0,clips:Qt.lineClipsArray}),ba.texture?ba.texture.update(ba.gradient):ba.texture=new a.Texture(Ye,ba.gradient,Ze.RGBA),ba.version=b.gradientVersion,qr=ba.texture}Ye.activeTexture.set(Ze.TEXTURE0),qr.bind(b.stepInterpolant?Ze.NEAREST:Ze.LINEAR,Ze.CLAMP_TO_EDGE)}ar.draw(Ye,Ze.TRIANGLES,F,g.stencilModeForClipping(zt),G,Ee.disabled,Fa,b.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,b.paint,g.transform.zoom,rr,Qt.layoutVertexBuffer2),Oe=!1}}}}}function Hp(g,h,b,d){var w=b.paint.get("fill-color"),P=b.paint.get("fill-opacity");if(P.constantOr(1)!==0){var F=g.colorModeForRenderPass(),G=b.paint.get("fill-pattern"),K=g.opaquePassEnabledForLayer()&&!G.constantOr(1)&&w.constantOr(a.Color.transparent).a===1&&P.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===K){var te=g.depthModeForSublayer(1,g.renderPass==="opaque"?pa.ReadWrite:pa.ReadOnly);df(g,h,b,d,te,F,!1)}if(g.renderPass==="translucent"&&b.paint.get("fill-antialias")){var fe=g.depthModeForSublayer(b.getPaintProperty("fill-outline-color")?2:0,pa.ReadOnly);df(g,h,b,d,fe,F,!0)}}}function df(g,h,b,d,w,P,F){var G=g.context.gl,K=b.paint.get("fill-pattern"),te=K&&K.constantOr(1),fe=b.getCrossfadeParameters(),we,be,Ie,Ye,Ze;F?(be=te&&!b.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=G.LINES):(be=te?"fillPattern":"fill",we=G.TRIANGLES);for(var Oe=0,Xe=d;Oe<Xe.length;Oe+=1){var ht=Xe[Oe],zt=h.getTile(ht);if(!(te&&!zt.patternsLoaded())){var qt=zt.getBucket(b);if(qt){var Qt=qt.programConfigurations.get(b.id),rr=g.useProgram(be,Qt);te&&(g.context.activeTexture.set(G.TEXTURE0),zt.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),Qt.updatePaintBuffers(fe));var Yt=K.constantOr(null);if(Yt&&zt.imageAtlas){var ar=zt.imageAtlas,cr=ar.patternPositions[Yt.to.toString()],_r=ar.patternPositions[Yt.from.toString()];cr&&_r&&Qt.setConstantPatternPositions(cr,_r)}var Pr=g.translatePosMatrix(ht.posMatrix,zt,b.paint.get("fill-translate"),b.paint.get("fill-translate-anchor"));if(!F)Ye=qt.indexBuffer,Ze=qt.segments,Ie=te?Ps(Pr,g,fe,zt):Ls(Pr);else{Ye=qt.indexBuffer2,Ze=qt.segments2;var Sr=[G.drawingBufferWidth,G.drawingBufferHeight];Ie=be==="fillOutlinePattern"&&te?Ep(Pr,g,fe,zt,Sr):zl(Pr,Sr)}rr.draw(g.context,we,w,g.stencilModeForClipping(ht),P,Ee.disabled,Ie,b.id,qt.layoutVertexBuffer,Ye,Ze,b.paint,g.transform.zoom,Qt)}}}}function Nl(g,h,b,d){var w=b.paint.get("fill-extrusion-opacity");if(w!==0&&g.renderPass==="translucent"){var P=new pa(g.context.gl.LEQUAL,pa.ReadWrite,g.depthRangeFor3D);if(w===1&&!b.paint.get("fill-extrusion-pattern").constantOr(1)){var F=g.colorModeForRenderPass();pf(g,h,b,d,P,Zr.disabled,F)}else pf(g,h,b,d,P,Zr.disabled,ee.disabled),pf(g,h,b,d,P,g.stencilModeFor3D(),g.colorModeForRenderPass())}}function pf(g,h,b,d,w,P,F){for(var G=g.context,K=G.gl,te=b.paint.get("fill-extrusion-pattern"),fe=te.constantOr(1),we=b.getCrossfadeParameters(),be=b.paint.get("fill-extrusion-opacity"),Ie=0,Ye=d;Ie<Ye.length;Ie+=1){var Ze=Ye[Ie],Oe=h.getTile(Ze),Xe=Oe.getBucket(b);if(Xe){var ht=Xe.programConfigurations.get(b.id),zt=g.useProgram(fe?"fillExtrusionPattern":"fillExtrusion",ht);fe&&(g.context.activeTexture.set(K.TEXTURE0),Oe.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),ht.updatePaintBuffers(we));var qt=te.constantOr(null);if(qt&&Oe.imageAtlas){var Qt=Oe.imageAtlas,rr=Qt.patternPositions[qt.to.toString()],Yt=Qt.patternPositions[qt.from.toString()];rr&&Yt&&ht.setConstantPatternPositions(rr,Yt)}var ar=g.translatePosMatrix(Ze.posMatrix,Oe,b.paint.get("fill-extrusion-translate"),b.paint.get("fill-extrusion-translate-anchor")),cr=b.paint.get("fill-extrusion-vertical-gradient"),_r=fe?tl(ar,g,cr,be,Ze,we,Oe):$f(ar,g,cr,be);zt.draw(G,G.gl.TRIANGLES,w,P,F,Ee.backCCW,_r,b.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,b.paint,g.transform.zoom,ht)}}}function mf(g,h,b,d){if(!(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")){for(var w=g.context,P=g.depthModeForSublayer(0,pa.ReadOnly),F=g.colorModeForRenderPass(),G=g.renderPass==="translucent"?g.stencilConfigForOverlap(d):[{},d],K=G[0],te=G[1],fe=0,we=te;fe<we.length;fe+=1){var be=we[fe],Ie=h.getTile(be);Ie.needsHillshadePrepare&&g.renderPass==="offscreen"?vy(g,Ie,b,P,Zr.disabled,F):g.renderPass==="translucent"&&Xv(g,Ie,b,P,K[be.overscaledZ],F)}w.viewport.set([0,0,g.width,g.height])}}function Xv(g,h,b,d,w,P){var F=g.context,G=F.gl,K=h.fbo;if(K){var te=g.useProgram("hillshade");F.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,K.colorAttachment.get());var fe=Fp(g,h,b);te.draw(F,G.TRIANGLES,d,w,P,Ee.disabled,fe,b.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}}function vy(g,h,b,d,w,P){var F=g.context,G=F.gl,K=h.dem;if(K&&K.data){var te=K.dim,fe=K.stride,we=K.getPixels();if(F.activeTexture.set(G.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),h.demTexture=h.demTexture||g.getTileTexture(fe),h.demTexture){var be=h.demTexture;be.update(we,{premultiply:!1}),be.bind(G.NEAREST,G.CLAMP_TO_EDGE)}else h.demTexture=new a.Texture(F,we,G.RGBA,{premultiply:!1}),h.demTexture.bind(G.NEAREST,G.CLAMP_TO_EDGE);F.activeTexture.set(G.TEXTURE0);var Ie=h.fbo;if(!Ie){var Ye=new a.Texture(F,{width:te,height:te,data:null},G.RGBA);Ye.bind(G.LINEAR,G.CLAMP_TO_EDGE),Ie=h.fbo=F.createFramebuffer(te,te,!0),Ie.colorAttachment.set(Ye.texture)}F.bindFramebuffer.set(Ie.framebuffer),F.viewport.set([0,0,te,te]),g.useProgram("hillshadePrepare").draw(F,G.TRIANGLES,d,w,P,Ee.disabled,Vv(h.tileID,K),b.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),h.needsHillshadePrepare=!1}}function Gp(g,h,b,d){if(g.renderPass==="translucent"&&b.paint.get("raster-opacity")!==0&&d.length)for(var w=g.context,P=w.gl,F=h.getSource(),G=g.useProgram("raster"),K=g.colorModeForRenderPass(),te=F instanceof it?[{},d]:g.stencilConfigForOverlap(d),fe=te[0],we=te[1],be=we[we.length-1].overscaledZ,Ie=!g.options.moving,Ye=0,Ze=we;Ye<Ze.length;Ye+=1){var Oe=Ze[Ye],Xe=g.depthModeForSublayer(Oe.overscaledZ-be,b.paint.get("raster-opacity")===1?pa.ReadWrite:pa.ReadOnly,P.LESS),ht=h.getTile(Oe),zt=g.transform.calculatePosMatrix(Oe.toUnwrapped(),Ie);ht.registerFadeDuration(b.paint.get("raster-fade-duration"));var qt=h.findLoadedParent(Oe,0),Qt=jv(ht,qt,h,b,g.transform),rr=void 0,Yt=void 0,ar=b.paint.get("raster-resampling")==="nearest"?P.NEAREST:P.LINEAR;w.activeTexture.set(P.TEXTURE0),ht.texture.bind(ar,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),w.activeTexture.set(P.TEXTURE1),qt?(qt.texture.bind(ar,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),rr=Math.pow(2,qt.tileID.overscaledZ-ht.tileID.overscaledZ),Yt=[ht.tileID.canonical.x*rr%1,ht.tileID.canonical.y*rr%1]):ht.texture.bind(ar,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST);var cr=qp(zt,Yt||[0,0],rr||1,Qt,b);F instanceof it?G.draw(w,P.TRIANGLES,Xe,Zr.disabled,K,Ee.disabled,cr,b.id,F.boundsBuffer,g.quadTriangleIndexBuffer,F.boundsSegments):G.draw(w,P.TRIANGLES,Xe,fe[Oe.overscaledZ],K,Ee.disabled,cr,b.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}}function jv(g,h,b,d,w){var P=d.paint.get("raster-fade-duration");if(P>0){var F=a.browser.now(),G=(F-g.timeAdded)/P,K=h?(F-h.timeAdded)/P:-1,te=b.getSource(),fe=w.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),we=!h||Math.abs(h.tileID.overscaledZ-fe)>Math.abs(g.tileID.overscaledZ-fe),be=we&&g.refreshedUponExpiration?1:a.clamp(we?G:1-K,0,1);return g.refreshedUponExpiration&&G>=1&&(g.refreshedUponExpiration=!1),h?{opacity:1,mix:1-be}:{opacity:be,mix:0}}else return{opacity:1,mix:0}}function ic(g,h,b){var d=b.paint.get("background-color"),w=b.paint.get("background-opacity");if(w!==0){var P=g.context,F=P.gl,G=g.transform,K=G.tileSize,te=b.paint.get("background-pattern");if(!g.isPatternMissing(te)){var fe=!te&&d.a===1&&w===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass===fe){var we=Zr.disabled,be=g.depthModeForSublayer(0,fe==="opaque"?pa.ReadWrite:pa.ReadOnly),Ie=g.colorModeForRenderPass(),Ye=g.useProgram(te?"backgroundPattern":"background"),Ze=G.coveringTiles({tileSize:K});te&&(P.activeTexture.set(F.TEXTURE0),g.imageManager.bind(g.context));for(var Oe=b.getCrossfadeParameters(),Xe=0,ht=Ze;Xe<ht.length;Xe+=1){var zt=ht[Xe],qt=g.transform.calculatePosMatrix(zt.toUnwrapped()),Qt=te?Cu(qt,w,g,te,{tileID:zt,tileSize:K},Oe):ql(qt,w,d);Ye.draw(P,F.TRIANGLES,be,we,Ie,Ee.disabled,Qt,b.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}}}}var nh=new a.Color(1,0,0,1),Jv=new a.Color(0,1,0,1),Zp=new a.Color(0,0,1,1),Kv=new a.Color(1,0,1,1),Yp=new a.Color(0,1,1,1);function Wp(g){var h=g.transform.padding,b=3;oh(g,g.transform.height-(h.top||0),b,nh),oh(g,h.bottom||0,b,Jv),sh(g,h.left||0,b,Zp),sh(g,g.transform.width-(h.right||0),b,Kv);var d=g.transform.centerPoint;yf(g,d.x,g.transform.height-d.y,Yp)}function yf(g,h,b,d){var w=20,P=2;Lu(g,h-P/2,b-w/2,P,w,d),Lu(g,h-w/2,b-P/2,w,P,d)}function oh(g,h,b,d){Lu(g,0,h+b/2,g.transform.width,b,d)}function sh(g,h,b,d){Lu(g,h-b/2,0,b,g.transform.height,d)}function Lu(g,h,b,d,w,P){var F=g.context,G=F.gl;G.enable(G.SCISSOR_TEST),G.scissor(h*a.browser.devicePixelRatio,b*a.browser.devicePixelRatio,d*a.browser.devicePixelRatio,w*a.browser.devicePixelRatio),F.clear({color:P}),G.disable(G.SCISSOR_TEST)}function Qv(g,h,b){for(var d=0;d<b.length;d++)lh(g,h,b[d])}function lh(g,h,b){var d=g.context,w=d.gl,P=b.posMatrix,F=g.useProgram("debug"),G=pa.disabled,K=Zr.disabled,te=g.colorModeForRenderPass(),fe="$debug";d.activeTexture.set(w.TEXTURE0),g.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),F.draw(d,w.LINE_STRIP,G,K,te,Ee.disabled,ec(P,a.Color.red),fe,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments);var we=h.getTileByID(b.key).latestRawTileData,be=we&&we.byteLength||0,Ie=Math.floor(be/1024),Ye=h.getTile(b).tileSize,Ze=512/Math.min(Ye,512)*(b.overscaledZ/g.transform.zoom)*.5,Oe=b.canonical.toString();b.overscaledZ!==b.canonical.z&&(Oe+=" => "+b.overscaledZ);var Xe=Oe+" "+Ie+"kb";Xp(g,Xe),F.draw(d,w.TRIANGLES,G,K,ee.alphaBlended,Ee.disabled,ec(P,a.Color.transparent,Ze),fe,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments)}function Xp(g,h){g.initDebugOverlayCanvas();var b=g.debugOverlayCanvas,d=g.context.gl,w=g.debugOverlayCanvas.getContext("2d");w.clearRect(0,0,b.width,b.height),w.shadowColor="white",w.shadowBlur=2,w.lineWidth=1.5,w.strokeStyle="white",w.textBaseline="top",w.font="bold 36px Open Sans, sans-serif",w.fillText(h,5,5),w.strokeText(h,5,5),g.debugOverlayTexture.update(b),g.debugOverlayTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}function gf(g,h,b){var d=g.context,w=b.implementation;if(g.renderPass==="offscreen"){var P=w.prerender;P&&(g.setCustomLayerDefaults(),d.setColorMode(g.colorModeForRenderPass()),P.call(w,d.gl,g.transform.customLayerMatrix()),d.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),d.setColorMode(g.colorModeForRenderPass()),d.setStencilMode(Zr.disabled);var F=w.renderingMode==="3d"?new pa(g.context.gl.LEQUAL,pa.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,pa.ReadOnly);d.setDepthMode(F),w.render(d.gl,g.transform.customLayerMatrix()),d.setDirty(),g.setBaseState(),d.bindFramebuffer.set(null)}}var li={symbol:uy,circle:ah,heatmap:Eu,line:_o,fill:Hp,"fill-extrusion":Nl,hillshade:mf,raster:Gp,background:ic,debug:Qv,custom:gf},Ci=function(h,b){this.context=new Be(h),this.transform=b,this._tileTextures={},this.setup(),this.numSublayers=rt.maxUnderzooming+rt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wu,this.gpuTimers={}};Ci.prototype.resize=function(h,b){if(this.width=h*a.browser.devicePixelRatio,this.height=b*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var d=0,w=this.style._order;d<w.length;d+=1){var P=w[d];this.style._layers[P].resize()}},Ci.prototype.setup=function(){var h=this.context,b=new a.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(a.EXTENT,0),b.emplaceBack(0,a.EXTENT),b.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=h.createVertexBuffer(b,hs.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var d=new a.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(a.EXTENT,0),d.emplaceBack(0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=h.createVertexBuffer(d,hs.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var w=new a.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(a.EXTENT,0,a.EXTENT,0),w.emplaceBack(0,a.EXTENT,0,a.EXTENT),w.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=h.createVertexBuffer(w,ct.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var P=new a.StructArrayLayout2i4;P.emplaceBack(0,0),P.emplaceBack(1,0),P.emplaceBack(0,1),P.emplaceBack(1,1),this.viewportBuffer=h.createVertexBuffer(P,hs.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var F=new a.StructArrayLayout1ui2;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=h.createIndexBuffer(F);var G=new a.StructArrayLayout3ui6;G.emplaceBack(0,1,2),G.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=h.createIndexBuffer(G),this.emptyTexture=new a.Texture(h,{width:1,height:1,data:new Uint8Array([0,0,0,0])},h.gl.RGBA);var K=this.context.gl;this.stencilClearMode=new Zr({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO)},Ci.prototype.clearStencil=function(){var h=this.context,b=h.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var d=a.create();a.ortho(d,0,this.width,this.height,0,0,1),a.scale(d,d,[b.drawingBufferWidth,b.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(h,b.TRIANGLES,pa.disabled,this.stencilClearMode,ee.disabled,Ee.disabled,Dp(d),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ci.prototype._renderTileClippingMasks=function(h,b){if(!(this.currentStencilSource===h.source||!h.isTileClipped()||!b||!b.length)){this.currentStencilSource=h.source;var d=this.context,w=d.gl;this.nextStencilID+b.length>256&&this.clearStencil(),d.setColorMode(ee.disabled),d.setDepthMode(pa.disabled);var P=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var F=0,G=b;F<G.length;F+=1){var K=G[F],te=this._tileClippingMaskIDs[K.key]=this.nextStencilID++;P.draw(d,w.TRIANGLES,pa.disabled,new Zr({func:w.ALWAYS,mask:0},te,255,w.KEEP,w.KEEP,w.REPLACE),ee.disabled,Ee.disabled,Dp(K.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ci.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var h=this.nextStencilID++,b=this.context.gl;return new Zr({func:b.NOTEQUAL,mask:255},h,255,b.KEEP,b.KEEP,b.REPLACE)},Ci.prototype.stencilModeForClipping=function(h){var b=this.context.gl;return new Zr({func:b.EQUAL,mask:255},this._tileClippingMaskIDs[h.key],0,b.KEEP,b.KEEP,b.REPLACE)},Ci.prototype.stencilConfigForOverlap=function(h){var b,d=this.context.gl,w=h.sort(function(te,fe){return fe.overscaledZ-te.overscaledZ}),P=w[w.length-1].overscaledZ,F=w[0].overscaledZ-P+1;if(F>1){this.currentStencilSource=void 0,this.nextStencilID+F>256&&this.clearStencil();for(var G={},K=0;K<F;K++)G[K+P]=new Zr({func:d.GEQUAL,mask:255},K+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=F,[G,w]}return[(b={},b[P]=Zr.disabled,b),w]},Ci.prototype.colorModeForRenderPass=function(){var h=this.context.gl;if(this._showOverdrawInspector){var b=8,d=1/b;return new ee([h.CONSTANT_COLOR,h.ONE],new a.Color(d,d,d,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?ee.unblended:ee.alphaBlended},Ci.prototype.depthModeForSublayer=function(h,b,d){if(!this.opaquePassEnabledForLayer())return pa.disabled;var w=1-((1+this.currentLayer)*this.numSublayers+h)*this.depthEpsilon;return new pa(d||this.context.gl.LEQUAL,b,[w,w])},Ci.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ci.prototype.render=function(h,b){var d=this;this.style=h,this.options=b,this.lineAtlas=h.lineAtlas,this.imageManager=h.imageManager,this.glyphManager=h.glyphManager,this.symbolFadeChange=h.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var w=this.style._order,P=this.style.sourceCaches;for(var F in P){var G=P[F];G.used&&G.prepare(this.context)}var K={},te={},fe={};for(var we in P){var be=P[we];K[we]=be.getVisibleCoordinates(),te[we]=K[we].slice().reverse(),fe[we]=be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ie=0;Ie<w.length;Ie++){var Ye=w[Ie];if(this.style._layers[Ye].is3D()){this.opaquePassCutoff=Ie;break}}this.renderPass="offscreen";for(var Ze=0,Oe=w;Ze<Oe.length;Ze+=1){var Xe=Oe[Ze],ht=this.style._layers[Xe];if(!(!ht.hasOffscreenPass()||ht.isHidden(this.transform.zoom))){var zt=te[ht.source];ht.type!=="custom"&&!zt.length||this.renderLayer(this,P[ht.source],ht,zt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:b.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=b.showOverdrawInspector,this.depthRangeFor3D=[0,1-(h._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){var qt=this.style._layers[w[this.currentLayer]],Qt=P[qt.source],rr=K[qt.source];this._renderTileClippingMasks(qt,rr),this.renderLayer(this,Qt,qt,rr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){var Yt=this.style._layers[w[this.currentLayer]],ar=P[Yt.source],cr=(Yt.type==="symbol"?fe:te)[Yt.source];this._renderTileClippingMasks(Yt,K[Yt.source]),this.renderLayer(this,ar,Yt,cr)}if(this.options.showTileBoundaries){var _r,Pr,Sr=a.values(this.style._layers);Sr.forEach(function(Xr){Xr.source&&!Xr.isHidden(d.transform.zoom)&&(Xr.source!==(Pr&&Pr.id)&&(Pr=d.style.sourceCaches[Xr.source]),(!_r||_r.getSource().maxzoom<Pr.getSource().maxzoom)&&(_r=Pr))}),_r&&li.debug(this,_r,_r.getVisibleCoordinates())}this.options.showPadding&&Wp(this),this.context.setDefault()},Ci.prototype.renderLayer=function(h,b,d,w){d.isHidden(this.transform.zoom)||d.type!=="background"&&d.type!=="custom"&&!w.length||(this.id=d.id,this.gpuTimingStart(d),li[d.type](h,b,d,w,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ci.prototype.gpuTimingStart=function(h){if(this.options.gpuTiming){var b=this.context.extTimerQuery,d=this.gpuTimers[h.id];d||(d=this.gpuTimers[h.id]={calls:0,cpuTime:0,query:b.createQueryEXT()}),d.calls++,b.beginQueryEXT(b.TIME_ELAPSED_EXT,d.query)}},Ci.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var h=this.context.extTimerQuery;h.endQueryEXT(h.TIME_ELAPSED_EXT)}},Ci.prototype.collectGpuTimers=function(){var h=this.gpuTimers;return this.gpuTimers={},h},Ci.prototype.queryGpuTimers=function(h){var b={};for(var d in h){var w=h[d],P=this.context.extTimerQuery,F=P.getQueryObjectEXT(w.query,P.QUERY_RESULT_EXT)/(1e3*1e3);P.deleteQueryEXT(w.query),b[d]=F}return b},Ci.prototype.translatePosMatrix=function(h,b,d,w,P){if(!d[0]&&!d[1])return h;var F=P?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(F){var G=Math.sin(F),K=Math.cos(F);d=[d[0]*K-d[1]*G,d[0]*G+d[1]*K]}var te=[P?d[0]:yo(b,d[0],this.transform.zoom),P?d[1]:yo(b,d[1],this.transform.zoom),0],fe=new Float32Array(16);return a.translate(fe,h,te),fe},Ci.prototype.saveTileTexture=function(h){var b=this._tileTextures[h.size[0]];b?b.push(h):this._tileTextures[h.size[0]]=[h]},Ci.prototype.getTileTexture=function(h){var b=this._tileTextures[h];return b&&b.length>0?b.pop():null},Ci.prototype.isPatternMissing=function(h){if(!h)return!1;if(!h.from||!h.to)return!0;var b=this.imageManager.getPattern(h.from.toString()),d=this.imageManager.getPattern(h.to.toString());return!b||!d},Ci.prototype.useProgram=function(h,b){this.cache=this.cache||{};var d=""+h+(b?b.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[d]||(this.cache[d]=new Cp(this.context,h,ay[h],b,ac[h],this._showOverdrawInspector)),this.cache[d]},Ci.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ci.prototype.setBaseState=function(){var h=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(h.FUNC_ADD)},Ci.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var h=this.context.gl;this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,h.RGBA)}},Ci.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var lo=function(h,b){this.points=h,this.planes=b};lo.fromInvProjectionMatrix=function(h,b,d){var w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],P=Math.pow(2,d),F=w.map(function(te){return a.transformMat4([],te,h)}).map(function(te){return a.scale$1([],te,1/te[3]/b*P)}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],K=G.map(function(te){var fe=a.sub([],F[te[0]],F[te[1]]),we=a.sub([],F[te[2]],F[te[1]]),be=a.normalize([],a.cross([],fe,we)),Ie=-a.dot(be,F[te[1]]);return be.concat(Ie)});return new lo(F,K)};var Is=function(h,b){this.min=h,this.max=b,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Is.prototype.quadrant=function(h){for(var b=[h%2===0,h<2],d=a.clone$2(this.min),w=a.clone$2(this.max),P=0;P<b.length;P++)d[P]=b[P]?this.min[P]:this.center[P],w[P]=b[P]?this.center[P]:this.max[P];return w[2]=this.max[2],new Is(d,w)},Is.prototype.distanceX=function(h){var b=Math.max(Math.min(this.max[0],h[0]),this.min[0]);return b-h[0]},Is.prototype.distanceY=function(h){var b=Math.max(Math.min(this.max[1],h[1]),this.min[1]);return b-h[1]},Is.prototype.intersects=function(h){for(var b=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],d=!0,w=0;w<h.planes.length;w++){for(var P=h.planes[w],F=0,G=0;G<b.length;G++)F+=a.dot$1(P,b[G])>=0;if(F===0)return 0;F!==b.length&&(d=!1)}if(d)return 2;for(var K=0;K<3;K++){for(var te=Number.MAX_VALUE,fe=-Number.MAX_VALUE,we=0;we<h.points.length;we++){var be=h.points[we][K]-this.min[K];te=Math.min(te,be),fe=Math.max(fe,be)}if(fe<0||te>this.max[K]-this.min[K])return 0}return 1};var xo=function(h,b,d,w){if(h===void 0&&(h=0),b===void 0&&(b=0),d===void 0&&(d=0),w===void 0&&(w=0),isNaN(h)||h<0||isNaN(b)||b<0||isNaN(d)||d<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=h,this.bottom=b,this.left=d,this.right=w};xo.prototype.interpolate=function(h,b,d){return b.top!=null&&h.top!=null&&(this.top=a.number(h.top,b.top,d)),b.bottom!=null&&h.bottom!=null&&(this.bottom=a.number(h.bottom,b.bottom,d)),b.left!=null&&h.left!=null&&(this.left=a.number(h.left,b.left,d)),b.right!=null&&h.right!=null&&(this.right=a.number(h.right,b.right,d)),this},xo.prototype.getCenter=function(h,b){var d=a.clamp((this.left+h-this.right)/2,0,h),w=a.clamp((this.top+b-this.bottom)/2,0,b);return new a.Point(d,w)},xo.prototype.equals=function(h){return this.top===h.top&&this.bottom===h.bottom&&this.left===h.left&&this.right===h.right},xo.prototype.clone=function(){return new xo(this.top,this.bottom,this.left,this.right)},xo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ti=function(h,b,d,w,P){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=P===void 0?!0:P,this._minZoom=h||0,this._maxZoom=b||22,this._minPitch=d==null?0:d,this._maxPitch=w==null?60:w,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xo,this._posMatrixCache={},this._alignedPosMatrixCache={}},fi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ti.prototype.clone=function(){var h=new ti(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return h.tileSize=this.tileSize,h.latRange=this.latRange,h.width=this.width,h.height=this.height,h._center=this._center,h.zoom=this.zoom,h.angle=this.angle,h._fov=this._fov,h._pitch=this._pitch,h._unmodified=this._unmodified,h._edgeInsets=this._edgeInsets.clone(),h._calcMatrices(),h},fi.minZoom.get=function(){return this._minZoom},fi.minZoom.set=function(g){this._minZoom!==g&&(this._minZoom=g,this.zoom=Math.max(this.zoom,g))},fi.maxZoom.get=function(){return this._maxZoom},fi.maxZoom.set=function(g){this._maxZoom!==g&&(this._maxZoom=g,this.zoom=Math.min(this.zoom,g))},fi.minPitch.get=function(){return this._minPitch},fi.minPitch.set=function(g){this._minPitch!==g&&(this._minPitch=g,this.pitch=Math.max(this.pitch,g))},fi.maxPitch.get=function(){return this._maxPitch},fi.maxPitch.set=function(g){this._maxPitch!==g&&(this._maxPitch=g,this.pitch=Math.min(this.pitch,g))},fi.renderWorldCopies.get=function(){return this._renderWorldCopies},fi.renderWorldCopies.set=function(g){g===void 0?g=!0:g===null&&(g=!1),this._renderWorldCopies=g},fi.worldSize.get=function(){return this.tileSize*this.scale},fi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},fi.size.get=function(){return new a.Point(this.width,this.height)},fi.bearing.get=function(){return-this.angle/Math.PI*180},fi.bearing.set=function(g){var h=-a.wrap(g,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fi.pitch.get=function(){return this._pitch/Math.PI*180},fi.pitch.set=function(g){var h=a.clamp(g,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())},fi.fov.get=function(){return this._fov/Math.PI*180},fi.fov.set=function(g){g=Math.max(.01,Math.min(60,g)),this._fov!==g&&(this._unmodified=!1,this._fov=g/180*Math.PI,this._calcMatrices())},fi.zoom.get=function(){return this._zoom},fi.zoom.set=function(g){var h=Math.min(Math.max(g,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())},fi.center.get=function(){return this._center},fi.center.set=function(g){g.lat===this._center.lat&&g.lng===this._center.lng||(this._unmodified=!1,this._center=g,this._constrain(),this._calcMatrices())},fi.padding.get=function(){return this._edgeInsets.toJSON()},fi.padding.set=function(g){this._edgeInsets.equals(g)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,g,1),this._calcMatrices())},fi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ti.prototype.isPaddingEqual=function(h){return this._edgeInsets.equals(h)},ti.prototype.interpolatePadding=function(h,b,d){this._unmodified=!1,this._edgeInsets.interpolate(h,b,d),this._constrain(),this._calcMatrices()},ti.prototype.coveringZoomLevel=function(h){var b=(h.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/h.tileSize));return Math.max(0,b)},ti.prototype.getVisibleUnwrappedCoordinates=function(h){var b=[new a.UnwrappedTileID(0,h)];if(this._renderWorldCopies)for(var d=this.pointCoordinate(new a.Point(0,0)),w=this.pointCoordinate(new a.Point(this.width,0)),P=this.pointCoordinate(new a.Point(this.width,this.height)),F=this.pointCoordinate(new a.Point(0,this.height)),G=Math.floor(Math.min(d.x,w.x,P.x,F.x)),K=Math.floor(Math.max(d.x,w.x,P.x,F.x)),te=1,fe=G-te;fe<=K+te;fe++)fe!==0&&b.push(new a.UnwrappedTileID(fe,h));return b},ti.prototype.coveringTiles=function(h){var b=this.coveringZoomLevel(h),d=b;if(h.minzoom!==void 0&&b<h.minzoom)return[];h.maxzoom!==void 0&&b>h.maxzoom&&(b=h.maxzoom);var w=a.MercatorCoordinate.fromLngLat(this.center),P=Math.pow(2,b),F=[P*w.x,P*w.y,0],G=lo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b),K=h.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(K=b);var te=3,fe=function(Sr){return{aabb:new Is([Sr*P,0,0],[(Sr+1)*P,P,0]),zoom:0,x:0,y:0,wrap:Sr,fullyVisible:!1}},we=[],be=[],Ie=b,Ye=h.reparseOverscaled?d:b;if(this._renderWorldCopies)for(var Ze=1;Ze<=3;Ze++)we.push(fe(-Ze)),we.push(fe(Ze));for(we.push(fe(0));we.length>0;){var Oe=we.pop(),Xe=Oe.x,ht=Oe.y,zt=Oe.fullyVisible;if(!zt){var qt=Oe.aabb.intersects(G);if(qt===0)continue;zt=qt===2}var Qt=Oe.aabb.distanceX(F),rr=Oe.aabb.distanceY(F),Yt=Math.max(Math.abs(Qt),Math.abs(rr)),ar=te+(1<<Ie-Oe.zoom)-2;if(Oe.zoom===Ie||Yt>ar&&Oe.zoom>=K){be.push({tileID:new a.OverscaledTileID(Oe.zoom===Ie?Ye:Oe.zoom,Oe.wrap,Oe.zoom,Xe,ht),distanceSq:a.sqrLen([F[0]-.5-Xe,F[1]-.5-ht])});continue}for(var cr=0;cr<4;cr++){var _r=(Xe<<1)+cr%2,Pr=(ht<<1)+(cr>>1);we.push({aabb:Oe.aabb.quadrant(cr),zoom:Oe.zoom+1,x:_r,y:Pr,wrap:Oe.wrap,fullyVisible:zt})}}return be.sort(function(Sr,Xr){return Sr.distanceSq-Xr.distanceSq}).map(function(Sr){return Sr.tileID})},ti.prototype.resize=function(h,b){this.width=h,this.height=b,this.pixelsToGLUnits=[2/h,-2/b],this._constrain(),this._calcMatrices()},fi.unmodified.get=function(){return this._unmodified},ti.prototype.zoomScale=function(h){return Math.pow(2,h)},ti.prototype.scaleZoom=function(h){return Math.log(h)/Math.LN2},ti.prototype.project=function(h){var b=a.clamp(h.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(h.lng)*this.worldSize,a.mercatorYfromLat(b)*this.worldSize)},ti.prototype.unproject=function(h){return new a.MercatorCoordinate(h.x/this.worldSize,h.y/this.worldSize).toLngLat()},fi.point.get=function(){return this.project(this.center)},ti.prototype.setLocationAtPoint=function(h,b){var d=this.pointCoordinate(b),w=this.pointCoordinate(this.centerPoint),P=this.locationCoordinate(h),F=new a.MercatorCoordinate(P.x-(d.x-w.x),P.y-(d.y-w.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())},ti.prototype.locationPoint=function(h){return this.coordinatePoint(this.locationCoordinate(h))},ti.prototype.pointLocation=function(h){return this.coordinateLocation(this.pointCoordinate(h))},ti.prototype.locationCoordinate=function(h){return a.MercatorCoordinate.fromLngLat(h)},ti.prototype.coordinateLocation=function(h){return h.toLngLat()},ti.prototype.pointCoordinate=function(h){var b=0,d=[h.x,h.y,0,1],w=[h.x,h.y,1,1];a.transformMat4(d,d,this.pixelMatrixInverse),a.transformMat4(w,w,this.pixelMatrixInverse);var P=d[3],F=w[3],G=d[0]/P,K=w[0]/F,te=d[1]/P,fe=w[1]/F,we=d[2]/P,be=w[2]/F,Ie=we===be?0:(b-we)/(be-we);return new a.MercatorCoordinate(a.number(G,K,Ie)/this.worldSize,a.number(te,fe,Ie)/this.worldSize)},ti.prototype.coordinatePoint=function(h){var b=[h.x*this.worldSize,h.y*this.worldSize,0,1];return a.transformMat4(b,b,this.pixelMatrix),new a.Point(b[0]/b[3],b[1]/b[3])},ti.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},ti.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},ti.prototype.setMaxBounds=function(h){h?(this.lngRange=[h.getWest(),h.getEast()],this.latRange=[h.getSouth(),h.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ti.prototype.calculatePosMatrix=function(h,b){b===void 0&&(b=!1);var d=h.key,w=b?this._alignedPosMatrixCache:this._posMatrixCache;if(w[d])return w[d];var P=h.canonical,F=this.worldSize/this.zoomScale(P.z),G=P.x+Math.pow(2,P.z)*h.wrap,K=a.identity(new Float64Array(16));return a.translate(K,K,[G*F,P.y*F,0]),a.scale(K,K,[F/a.EXTENT,F/a.EXTENT,1]),a.multiply(K,b?this.alignedProjMatrix:this.projMatrix,K),w[d]=new Float32Array(K),w[d]},ti.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ti.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var h=-90,b=90,d=-180,w=180,P,F,G,K,te=this.size,fe=this._unmodified;if(this.latRange){var we=this.latRange;h=a.mercatorYfromLat(we[1])*this.worldSize,b=a.mercatorYfromLat(we[0])*this.worldSize,P=b-h<te.y?te.y/(b-h):0}if(this.lngRange){var be=this.lngRange;d=a.mercatorXfromLng(be[0])*this.worldSize,w=a.mercatorXfromLng(be[1])*this.worldSize,F=w-d<te.x?te.x/(w-d):0}var Ie=this.point,Ye=Math.max(F||0,P||0);if(Ye){this.center=this.unproject(new a.Point(F?(w+d)/2:Ie.x,P?(b+h)/2:Ie.y)),this.zoom+=this.scaleZoom(Ye),this._unmodified=fe,this._constraining=!1;return}if(this.latRange){var Ze=Ie.y,Oe=te.y/2;Ze-Oe<h&&(K=h+Oe),Ze+Oe>b&&(K=b-Oe)}if(this.lngRange){var Xe=Ie.x,ht=te.x/2;Xe-ht<d&&(G=d+ht),Xe+ht>w&&(G=w-ht)}(G!==void 0||K!==void 0)&&(this.center=this.unproject(new a.Point(G!==void 0?G:Ie.x,K!==void 0?K:Ie.y))),this._unmodified=fe,this._constraining=!1}},ti.prototype._calcMatrices=function(){if(this.height){var h=this._fov/2,b=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(h)*this.height;var d=Math.PI/2+this._pitch,w=this._fov*(.5+b.y/this.height),P=Math.sin(w)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-d-w,.01,Math.PI-.01)),F=this.point,G=F.x,K=F.y,te=Math.cos(Math.PI/2-this._pitch)*P+this.cameraToCenterDistance,fe=te*1.01,we=this.height/50,be=new Float64Array(16);a.perspective(be,this._fov,this.width/this.height,we,fe),be[8]=-b.x*2/this.width,be[9]=b.y*2/this.height,a.scale(be,be,[1,-1,1]),a.translate(be,be,[0,0,-this.cameraToCenterDistance]),a.rotateX(be,be,this._pitch),a.rotateZ(be,be,this.angle),a.translate(be,be,[-G,-K,0]),this.mercatorMatrix=a.scale([],be,[this.worldSize,this.worldSize,this.worldSize]),a.scale(be,be,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=be,this.invProjMatrix=a.invert([],this.projMatrix);var Ie=this.width%2/2,Ye=this.height%2/2,Ze=Math.cos(this.angle),Oe=Math.sin(this.angle),Xe=G-Math.round(G)+Ze*Ie+Oe*Ye,ht=K-Math.round(K)+Ze*Ye+Oe*Ie,zt=new Float64Array(be);if(a.translate(zt,zt,[Xe>.5?Xe-1:Xe,ht>.5?ht-1:ht,0]),this.alignedProjMatrix=zt,be=a.create(),a.scale(be,be,[this.width/2,-this.height/2,1]),a.translate(be,be,[1,-1,0]),this.labelPlaneMatrix=be,be=a.create(),a.scale(be,be,[1,-1,1]),a.translate(be,be,[-1,-1,0]),a.scale(be,be,[2/this.width,2/this.height,1]),this.glCoordMatrix=be,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),be=a.invert(new Float64Array(16),this.pixelMatrix),!be)throw new Error("failed to invert matrix");this.pixelMatrixInverse=be,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ti.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var h=this.pointCoordinate(new a.Point(0,0)),b=[h.x*this.worldSize,h.y*this.worldSize,0,1],d=a.transformMat4(b,b,this.pixelMatrix);return d[3]/this.cameraToCenterDistance},ti.prototype.getCameraPoint=function(){var h=this._pitch,b=Math.tan(h)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,b))},ti.prototype.getCameraQueryGeometry=function(h){var b=this.getCameraPoint();if(h.length===1)return[h[0],b];for(var d=b.x,w=b.y,P=b.x,F=b.y,G=0,K=h;G<K.length;G+=1){var te=K[G];d=Math.min(d,te.x),w=Math.min(w,te.y),P=Math.max(P,te.x),F=Math.max(F,te.y)}return[new a.Point(d,w),new a.Point(P,w),new a.Point(P,F),new a.Point(d,F),new a.Point(d,w)]},Object.defineProperties(ti.prototype,fi);function uh(g,h){var b=!1,d=null,w=function(){d=null,b&&(g(),d=setTimeout(w,h),b=!1)};return function(){return b=!0,d||w(),d}}var Bl=function(h){this._hashName=h&&encodeURIComponent(h),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=uh(this._updateHashUnthrottled.bind(this),30*1e3/100)};Bl.prototype.addTo=function(h){return this._map=h,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Bl.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Bl.prototype.getHashString=function(h){var b=this._map.getCenter(),d=Math.round(this._map.getZoom()*100)/100,w=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,w),F=Math.round(b.lng*P)/P,G=Math.round(b.lat*P)/P,K=this._map.getBearing(),te=this._map.getPitch(),fe="";if(h?fe+="/"+F+"/"+G+"/"+d:fe+=d+"/"+G+"/"+F,(K||te)&&(fe+="/"+Math.round(K*10)/10),te&&(fe+="/"+Math.round(te)),this._hashName){var we=this._hashName,be=!1,Ie=a.window.location.hash.slice(1).split("&").map(function(Ye){var Ze=Ye.split("=")[0];return Ze===we?(be=!0,Ze+"="+fe):Ye}).filter(function(Ye){return Ye});return be||Ie.push(we+"="+fe),"#"+Ie.join("&")}return"#"+fe},Bl.prototype._getCurrentHash=function(){var h=this,b=a.window.location.hash.replace("#","");if(this._hashName){var d;return b.split("&").map(function(w){return w.split("=")}).forEach(function(w){w[0]===h._hashName&&(d=w)}),(d&&d[1]||"").split("/")}return b.split("/")},Bl.prototype._onHashChange=function(){var h=this._getCurrentHash();if(h.length>=3&&!h.some(function(d){return isNaN(d)})){var b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:b,pitch:+(h[4]||0)}),!0}return!1},Bl.prototype._updateHashUnthrottled=function(){var h=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,h)}catch(b){}};var nc={linearity:.3,easing:a.bezier(0,0,.3,1)},_f=a.extend({deceleration:2500,maxSpeed:1400},nc),Ol=a.extend({deceleration:20,maxSpeed:1400},nc),Rs=a.extend({deceleration:1e3,maxSpeed:360},nc),fh=a.extend({deceleration:1e3,maxSpeed:90},nc),xf=function(h){this._map=h,this.clear()};xf.prototype.clear=function(){this._inertiaBuffer=[]},xf.prototype.record=function(h){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:h})},xf.prototype._drainInertiaBuffer=function(){for(var h=this._inertiaBuffer,b=a.browser.now(),d=160;h.length>0&&b-h[0].time>d;)h.shift()},xf.prototype._onMoveEnd=function(h){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var b={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},d=0,w=this._inertiaBuffer;d<w.length;d+=1){var P=w[d],F=P.settings;b.zoom+=F.zoomDelta||0,b.bearing+=F.bearingDelta||0,b.pitch+=F.pitchDelta||0,F.panDelta&&b.pan._add(F.panDelta),F.around&&(b.around=F.around),F.pinchAround&&(b.pinchAround=F.pinchAround)}var G=this._inertiaBuffer[this._inertiaBuffer.length-1],K=G.time-this._inertiaBuffer[0].time,te={};if(b.pan.mag()){var fe=y(b.pan.mag(),K,a.extend({},_f,h||{}));te.offset=b.pan.mult(fe.amount/b.pan.mag()),te.center=this._map.transform.center,Ul(te,fe)}if(b.zoom){var we=y(b.zoom,K,Ol);te.zoom=this._map.transform.zoom+we.amount,Ul(te,we)}if(b.bearing){var be=y(b.bearing,K,Rs);te.bearing=this._map.transform.bearing+a.clamp(be.amount,-179,179),Ul(te,be)}if(b.pitch){var Ie=y(b.pitch,K,fh);te.pitch=this._map.transform.pitch+Ie.amount,Ul(te,Ie)}if(te.zoom||te.bearing){var Ye=b.pinchAround===void 0?b.around:b.pinchAround;te.around=Ye?this._map.unproject(Ye):this._map.getCenter()}return this.clear(),a.extend(te,{noMoveStart:!0})}};function Ul(g,h){(!g.duration||g.duration<h.duration)&&(g.duration=h.duration,g.easing=h.easing)}function y(g,h,b){var d=b.maxSpeed,w=b.linearity,P=b.deceleration,F=a.clamp(g*w/(h/1e3),-d,d),G=Math.abs(F)/(P*w);return{easing:b.easing,duration:G*1e3,amount:F*(G/2)}}var S=function(g){function h(d,w,P,F){F===void 0&&(F={});var G=l.mousePos(w.getCanvasContainer(),P),K=w.unproject(G);g.call(this,d,a.extend({point:G,lngLat:K,originalEvent:P},F)),this._defaultPrevented=!1,this.target=w}g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h;var b={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},b.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,b),h}(a.Event),D=function(g){function h(d,w,P){var F=d==="touchend"?P.changedTouches:P.touches,G=l.touchPos(w.getCanvasContainer(),F),K=G.map(function(we){return w.unproject(we)}),te=G.reduce(function(we,be,Ie,Ye){return we.add(be.div(Ye.length))},new a.Point(0,0)),fe=w.unproject(te);g.call(this,d,{points:G,point:te,lngLats:K,lngLat:fe,originalEvent:P}),this._defaultPrevented=!1}g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h;var b={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},b.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,b),h}(a.Event),O=function(g){function h(d,w,P){g.call(this,d,{originalEvent:P}),this._defaultPrevented=!1}g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h;var b={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},b.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,b),h}(a.Event),U=function(h,b){this._map=h,this._clickTolerance=b.clickTolerance};U.prototype.reset=function(){delete this._mousedownPos},U.prototype.wheel=function(h){return this._firePreventable(new O(h.type,this._map,h))},U.prototype.mousedown=function(h,b){return this._mousedownPos=b,this._firePreventable(new S(h.type,this._map,h))},U.prototype.mouseup=function(h){this._map.fire(new S(h.type,this._map,h))},U.prototype.click=function(h,b){this._mousedownPos&&this._mousedownPos.dist(b)>=this._clickTolerance||this._map.fire(new S(h.type,this._map,h))},U.prototype.dblclick=function(h){return this._firePreventable(new S(h.type,this._map,h))},U.prototype.mouseover=function(h){this._map.fire(new S(h.type,this._map,h))},U.prototype.mouseout=function(h){this._map.fire(new S(h.type,this._map,h))},U.prototype.touchstart=function(h){return this._firePreventable(new D(h.type,this._map,h))},U.prototype.touchmove=function(h){this._map.fire(new D(h.type,this._map,h))},U.prototype.touchend=function(h){this._map.fire(new D(h.type,this._map,h))},U.prototype.touchcancel=function(h){this._map.fire(new D(h.type,this._map,h))},U.prototype._firePreventable=function(h){if(this._map.fire(h),h.defaultPrevented)return{}},U.prototype.isEnabled=function(){return!0},U.prototype.isActive=function(){return!1},U.prototype.enable=function(){},U.prototype.disable=function(){};var Z=function(h){this._map=h};Z.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Z.prototype.mousemove=function(h){this._map.fire(new S(h.type,this._map,h))},Z.prototype.mousedown=function(){this._delayContextMenu=!0},Z.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new S("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Z.prototype.contextmenu=function(h){this._delayContextMenu?this._contextMenuEvent=h:this._map.fire(new S(h.type,this._map,h)),this._map.listens("contextmenu")&&h.preventDefault()},Z.prototype.isEnabled=function(){return!0},Z.prototype.isActive=function(){return!1},Z.prototype.enable=function(){},Z.prototype.disable=function(){};var $=function(h,b){this._map=h,this._el=h.getCanvasContainer(),this._container=h.getContainer(),this._clickTolerance=b.clickTolerance||1};$.prototype.isEnabled=function(){return!!this._enabled},$.prototype.isActive=function(){return!!this._active},$.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},$.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$.prototype.mousedown=function(h,b){this.isEnabled()&&h.shiftKey&&h.button===0&&(l.disableDrag(),this._startPos=this._lastPos=b,this._active=!0)},$.prototype.mousemoveWindow=function(h,b){if(this._active){var d=b;if(!(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)){var w=this._startPos;this._lastPos=d,this._box||(this._box=l.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",h));var P=Math.min(w.x,d.x),F=Math.max(w.x,d.x),G=Math.min(w.y,d.y),K=Math.max(w.y,d.y);l.setTransform(this._box,"translate("+P+"px,"+G+"px)"),this._box.style.width=F-P+"px",this._box.style.height=K-G+"px"}}},$.prototype.mouseupWindow=function(h,b){var d=this;if(this._active&&h.button===0){var w=this._startPos,P=b;if(this.reset(),l.suppressClick(),w.x===P.x&&w.y===P.y)this._fireEvent("boxzoomcancel",h);else return this._map.fire(new a.Event("boxzoomend",{originalEvent:h})),{cameraAnimation:function(F){return F.fitScreenCoordinates(w,P,d._map.getBearing(),{linear:!0})}}}},$.prototype.keydown=function(h){this._active&&h.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",h))},$.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(l.remove(this._box),this._box=null),l.enableDrag(),delete this._startPos,delete this._lastPos},$.prototype._fireEvent=function(h,b){return this._map.fire(new a.Event(h,{originalEvent:b}))};function X(g,h){for(var b={},d=0;d<g.length;d++)b[g[d].identifier]=h[d];return b}function ae(g){for(var h=new a.Point(0,0),b=0,d=g;b<d.length;b+=1){var w=d[b];h._add(w)}return h.div(g.length)}var de=500,ge=500,De=30,Pe=function(h){this.reset(),this.numTouches=h.numTouches};Pe.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Pe.prototype.touchstart=function(h,b,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=h.timeStamp),d.length===this.numTouches&&(this.centroid=ae(b),this.touches=X(d,b)))},Pe.prototype.touchmove=function(h,b,d){if(!(this.aborted||!this.centroid)){var w=X(d,b);for(var P in this.touches){var F=this.touches[P],G=w[P];(!G||G.dist(F)>De)&&(this.aborted=!0)}}},Pe.prototype.touchend=function(h,b,d){if((!this.centroid||h.timeStamp-this.startTime>ge)&&(this.aborted=!0),d.length===0){var w=!this.aborted&&this.centroid;if(this.reset(),w)return w}};var Je=function(h){this.singleTap=new Pe(h),this.numTaps=h.numTaps,this.reset()};Je.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Je.prototype.touchstart=function(h,b,d){this.singleTap.touchstart(h,b,d)},Je.prototype.touchmove=function(h,b,d){this.singleTap.touchmove(h,b,d)},Je.prototype.touchend=function(h,b,d){var w=this.singleTap.touchend(h,b,d);if(w){var P=h.timeStamp-this.lastTime<de,F=!this.lastTap||this.lastTap.dist(w)<De;if((!P||!F)&&this.reset(),this.count++,this.lastTime=h.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}};var ot=function(){this._zoomIn=new Je({numTouches:1,numTaps:2}),this._zoomOut=new Je({numTouches:2,numTaps:1}),this.reset()};ot.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ot.prototype.touchstart=function(h,b,d){this._zoomIn.touchstart(h,b,d),this._zoomOut.touchstart(h,b,d)},ot.prototype.touchmove=function(h,b,d){this._zoomIn.touchmove(h,b,d),this._zoomOut.touchmove(h,b,d)},ot.prototype.touchend=function(h,b,d){var w=this,P=this._zoomIn.touchend(h,b,d),F=this._zoomOut.touchend(h,b,d);if(P)return this._active=!0,h.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(G){return G.easeTo({duration:300,zoom:G.getZoom()+1,around:G.unproject(P)},{originalEvent:h})}};if(F)return this._active=!0,h.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(G){return G.easeTo({duration:300,zoom:G.getZoom()-1,around:G.unproject(F)},{originalEvent:h})}}},ot.prototype.touchcancel=function(){this.reset()},ot.prototype.enable=function(){this._enabled=!0},ot.prototype.disable=function(){this._enabled=!1,this.reset()},ot.prototype.isEnabled=function(){return this._enabled},ot.prototype.isActive=function(){return this._active};var ze=0,Ue=2,je={};je[ze]=1,je[Ue]=2;function lt(g,h){var b=je[h];return g.buttons===void 0||(g.buttons&b)!==b}var nt=function(h){this.reset(),this._clickTolerance=h.clickTolerance||1};nt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},nt.prototype._correctButton=function(h,b){return!1},nt.prototype._move=function(h,b){return{}},nt.prototype.mousedown=function(h,b){if(!this._lastPoint){var d=l.mouseButton(h);this._correctButton(h,d)&&(this._lastPoint=b,this._eventButton=d)}},nt.prototype.mousemoveWindow=function(h,b){var d=this._lastPoint;if(d){if(h.preventDefault(),lt(h,this._eventButton)){this.reset();return}if(!(!this._moved&&b.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=b,this._move(d,b)}},nt.prototype.mouseupWindow=function(h){if(this._lastPoint){var b=l.mouseButton(h);b===this._eventButton&&(this._moved&&l.suppressClick(),this.reset())}},nt.prototype.enable=function(){this._enabled=!0},nt.prototype.disable=function(){this._enabled=!1,this.reset()},nt.prototype.isEnabled=function(){return this._enabled},nt.prototype.isActive=function(){return this._active};var We=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.mousedown=function(d,w){g.prototype.mousedown.call(this,d,w),this._lastPoint&&(this._active=!0)},h.prototype._correctButton=function(d,w){return w===ze&&!d.ctrlKey},h.prototype._move=function(d,w){return{around:w,panDelta:w.sub(d)}},h}(nt),Zt=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype._correctButton=function(d,w){return w===ze&&d.ctrlKey||w===Ue},h.prototype._move=function(d,w){var P=.8,F=(w.x-d.x)*P;if(F)return this._active=!0,{bearingDelta:F}},h.prototype.contextmenu=function(d){d.preventDefault()},h}(nt),or=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype._correctButton=function(d,w){return w===ze&&d.ctrlKey||w===Ue},h.prototype._move=function(d,w){var P=-.5,F=(w.y-d.y)*P;if(F)return this._active=!0,{pitchDelta:F}},h.prototype.contextmenu=function(d){d.preventDefault()},h}(nt),fr=function(h){this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset()};fr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},fr.prototype.touchstart=function(h,b,d){return this._calculateTransform(h,b,d)},fr.prototype.touchmove=function(h,b,d){if(!(!this._active||d.length<this._minTouches))return h.preventDefault(),this._calculateTransform(h,b,d)},fr.prototype.touchend=function(h,b,d){this._calculateTransform(h,b,d),this._active&&d.length<this._minTouches&&this.reset()},fr.prototype.touchcancel=function(){this.reset()},fr.prototype._calculateTransform=function(h,b,d){d.length>0&&(this._active=!0);var w=X(d,b),P=new a.Point(0,0),F=new a.Point(0,0),G=0;for(var K in w){var te=w[K],fe=this._touches[K];fe&&(P._add(te),F._add(te.sub(fe)),G++,w[K]=te)}if(this._touches=w,!(G<this._minTouches||!F.mag())){var we=F.div(G);if(this._sum._add(we),!(this._sum.mag()<this._clickTolerance)){var be=P.div(G);return{around:be,panDelta:we}}}},fr.prototype.enable=function(){this._enabled=!0},fr.prototype.disable=function(){this._enabled=!1,this.reset()},fr.prototype.isEnabled=function(){return this._enabled},fr.prototype.isActive=function(){return this._active};var lr=function(){this.reset()};lr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},lr.prototype._start=function(h){},lr.prototype._move=function(h,b,d){return{}},lr.prototype.touchstart=function(h,b,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([b[0],b[1]]))},lr.prototype.touchmove=function(h,b,d){if(this._firstTwoTouches){h.preventDefault();var w=this._firstTwoTouches,P=w[0],F=w[1],G=Dr(d,b,P),K=Dr(d,b,F);if(!(!G||!K)){var te=this._aroundCenter?null:G.add(K).div(2);return this._move([G,K],te,h)}}},lr.prototype.touchend=function(h,b,d){if(this._firstTwoTouches){var w=this._firstTwoTouches,P=w[0],F=w[1],G=Dr(d,b,P),K=Dr(d,b,F);G&&K||(this._active&&l.suppressClick(),this.reset())}},lr.prototype.touchcancel=function(){this.reset()},lr.prototype.enable=function(h){this._enabled=!0,this._aroundCenter=!!h&&h.around==="center"},lr.prototype.disable=function(){this._enabled=!1,this.reset()},lr.prototype.isEnabled=function(){return this._enabled},lr.prototype.isActive=function(){return this._active};function Dr(g,h,b){for(var d=0;d<g.length;d++)if(g[d].identifier===b)return h[d]}var Ir=.1;function ta(g,h){return Math.log(g/h)/Math.LN2}var Ur=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.reset=function(){g.prototype.reset.call(this),delete this._distance,delete this._startDistance},h.prototype._start=function(d){this._startDistance=this._distance=d[0].dist(d[1])},h.prototype._move=function(d,w){var P=this._distance;if(this._distance=d[0].dist(d[1]),!(!this._active&&Math.abs(ta(this._distance,this._startDistance))<Ir))return this._active=!0,{zoomDelta:ta(this._distance,P),pinchAround:w}},h}(lr),Kr=25;function Ba(g,h){return g.angleWith(h)*180/Math.PI}var ri=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.reset=function(){g.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},h.prototype._start=function(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])},h.prototype._move=function(d,w){var P=this._vector;if(this._vector=d[0].sub(d[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ba(this._vector,P),pinchAround:w}},h.prototype._isBelowThreshold=function(d){this._minDiameter=Math.min(this._minDiameter,d.mag());var w=Math.PI*this._minDiameter,P=Kr/w*360,F=Ba(d,this._startVector);return Math.abs(F)<P},h}(lr);function $a(g){return Math.abs(g.y)>Math.abs(g.x)}var jt=100,Jr=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.reset=function(){g.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},h.prototype._start=function(d){this._lastPoints=d,$a(d[0].sub(d[1]))&&(this._valid=!1)},h.prototype._move=function(d,w,P){var F=d[0].sub(this._lastPoints[0]),G=d[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(F,G,P.timeStamp),!!this._valid){this._lastPoints=d,this._active=!0;var K=(F.y+G.y)/2,te=-.5;return{pitchDelta:K*te}}},h.prototype.gestureBeginsVertically=function(d,w,P){if(this._valid!==void 0)return this._valid;var F=2,G=d.mag()>=F,K=w.mag()>=F;if(!(!G&&!K)){if(!G||!K)return this._firstMove===void 0&&(this._firstMove=P),P-this._firstMove<jt?void 0:!1;var te=d.y>0==w.y>0;return $a(d)&&$a(w)&&te}},h}(lr),oa={panStep:100,bearingStep:15,pitchStep:10},la=function(){var h=oa;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1};la.prototype.reset=function(){this._active=!1},la.prototype.keydown=function(h){var b=this;if(!(h.altKey||h.ctrlKey||h.metaKey)){var d=0,w=0,P=0,F=0,G=0;switch(h.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:h.shiftKey?w=-1:(h.preventDefault(),F=-1);break;case 39:h.shiftKey?w=1:(h.preventDefault(),F=1);break;case 38:h.shiftKey?P=1:(h.preventDefault(),G=-1);break;case 40:h.shiftKey?P=-1:(h.preventDefault(),G=1);break;default:return}return this._rotationDisabled&&(w=0,P=0),{cameraAnimation:function(K){var te=K.getZoom();K.easeTo({duration:300,easeId:"keyboardHandler",easing:Ei,zoom:d?Math.round(te)+d*(h.shiftKey?2:1):te,bearing:K.getBearing()+w*b._bearingStep,pitch:K.getPitch()+P*b._pitchStep,offset:[-F*b._panStep,-G*b._panStep],center:K.getCenter()},{originalEvent:h})}}}},la.prototype.enable=function(){this._enabled=!0},la.prototype.disable=function(){this._enabled=!1,this.reset()},la.prototype.isEnabled=function(){return this._enabled},la.prototype.isActive=function(){return this._active},la.prototype.disableRotation=function(){this._rotationDisabled=!0},la.prototype.enableRotation=function(){this._rotationDisabled=!1};function Ei(g){return g*(2-g)}var Vi=4.000244140625,$i=1/100,xi=1/450,bn=2,wr=function(h,b){this._map=h,this._el=h.getCanvasContainer(),this._handler=b,this._delta=0,this._defaultZoomRate=$i,this._wheelZoomRate=xi,a.bindAll(["_onTimeout"],this)};wr.prototype.setZoomRate=function(h){this._defaultZoomRate=h},wr.prototype.setWheelZoomRate=function(h){this._wheelZoomRate=h},wr.prototype.isEnabled=function(){return!!this._enabled},wr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},wr.prototype.isZooming=function(){return!!this._zooming},wr.prototype.enable=function(h){this.isEnabled()||(this._enabled=!0,this._aroundCenter=h&&h.around==="center")},wr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},wr.prototype.wheel=function(h){if(this.isEnabled()){var b=h.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?h.deltaY*40:h.deltaY,d=a.browser.now(),w=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,b!==0&&b%Vi===0?this._type="wheel":b!==0&&Math.abs(b)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=b,this._timeout=setTimeout(this._onTimeout,40,h)):this._type||(this._type=Math.abs(w*b)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,b+=this._lastValue)),h.shiftKey&&b&&(b=b/4),this._type&&(this._lastWheelEvent=h,this._delta-=b,this._active||this._start(h)),h.preventDefault()}},wr.prototype._onTimeout=function(h){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},wr.prototype._start=function(h){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var b=l.mousePos(this._el,h);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(b)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},wr.prototype.renderFrame=function(){var h=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var b=this._map.transform;if(this._delta!==0){var d=this._type==="wheel"&&Math.abs(this._delta)>Vi?this._wheelZoomRate:this._defaultZoomRate,w=bn/(1+Math.exp(-Math.abs(this._delta*d)));this._delta<0&&w!==0&&(w=1/w);var P=typeof this._targetZoom=="number"?b.zoomScale(this._targetZoom):b.scale;this._targetZoom=Math.min(b.maxZoom,Math.max(b.minZoom,b.scaleZoom(P*w))),this._type==="wheel"&&(this._startZoom=b.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var F=typeof this._targetZoom=="number"?this._targetZoom:b.zoom,G=this._startZoom,K=this._easing,te=!1,fe;if(this._type==="wheel"&&G&&K){var we=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),be=K(we);fe=a.number(G,F,be),we<1?this._frameId||(this._frameId=!0):te=!0}else fe=F,te=!0;return this._active=!0,te&&(this._active=!1,this._finishTimeout=setTimeout(function(){h._zooming=!1,h._handler._triggerRenderFrame(),delete h._targetZoom,delete h._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!te,zoomDelta:fe-b.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},wr.prototype._smoothOutEasing=function(h){var b=a.ease;if(this._prevEase){var d=this._prevEase,w=(a.browser.now()-d.start)/d.duration,P=d.easing(w+.01)-d.easing(w),F=.27/Math.sqrt(P*P+1e-4)*.01,G=Math.sqrt(.27*.27-F*F);b=a.bezier(F,G,.25,1)}return this._prevEase={start:a.browser.now(),duration:h,easing:b},b},wr.prototype.reset=function(){this._active=!1};var Vr=function(h,b){this._clickZoom=h,this._tapZoom=b};Vr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Vr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Vr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Vr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ni=function(){this.reset()};Ni.prototype.reset=function(){this._active=!1},Ni.prototype.dblclick=function(h,b){return h.preventDefault(),{cameraAnimation:function(d){d.easeTo({duration:300,zoom:d.getZoom()+(h.shiftKey?-1:1),around:d.unproject(b)},{originalEvent:h})}}},Ni.prototype.enable=function(){this._enabled=!0},Ni.prototype.disable=function(){this._enabled=!1,this.reset()},Ni.prototype.isEnabled=function(){return this._enabled},Ni.prototype.isActive=function(){return this._active};var Ti=function(){this._tap=new Je({numTouches:1,numTaps:1}),this.reset()};Ti.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ti.prototype.touchstart=function(h,b,d){this._swipePoint||(this._tapTime&&h.timeStamp-this._tapTime>de&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=b[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(h,b,d))},Ti.prototype.touchmove=function(h,b,d){if(!this._tapTime)this._tap.touchmove(h,b,d);else if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;var w=b[0],P=w.y-this._swipePoint.y;return this._swipePoint=w,h.preventDefault(),this._active=!0,{zoomDelta:P/128}}},Ti.prototype.touchend=function(h,b,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{var w=this._tap.touchend(h,b,d);w&&(this._tapTime=h.timeStamp)}},Ti.prototype.touchcancel=function(){this.reset()},Ti.prototype.enable=function(){this._enabled=!0},Ti.prototype.disable=function(){this._enabled=!1,this.reset()},Ti.prototype.isEnabled=function(){return this._enabled},Ti.prototype.isActive=function(){return this._active};var uo=function(h,b,d){this._el=h,this._mousePan=b,this._touchPan=d};uo.prototype.enable=function(h){this._inertiaOptions=h||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},uo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},uo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},uo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Rn=function(h,b,d){this._pitchWithRotate=h.pitchWithRotate,this._mouseRotate=b,this._mousePitch=d};Rn.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Rn.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Rn.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Rn.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var cn=function(h,b,d,w){this._el=h,this._touchZoom=b,this._touchRotate=d,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0};cn.prototype.enable=function(h){this._touchZoom.enable(h),this._rotationDisabled||this._touchRotate.enable(h),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},cn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},cn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},cn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},cn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},cn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var pi=function(g){return g.zoom||g.drag||g.pitch||g.rotate},Ko=function(g){function h(){g.apply(this,arguments)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h}(a.Event);function fo(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}var ci=function(h,b){this._map=h,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xf(h),this._bearingSnap=b.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(b),a.bindAll(["handleEvent","handleWindowEvent"],this);var d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[a.window,"blur",void 0]];for(var w=0,P=this._listeners;w<P.length;w+=1){var F=P[w],G=F[0],K=F[1],te=F[2];l.addEventListener(G,K,G===a.window.document?this.handleWindowEvent:this.handleEvent,te)}};ci.prototype.destroy=function(){for(var h=0,b=this._listeners;h<b.length;h+=1){var d=b[h],w=d[0],P=d[1],F=d[2];l.removeEventListener(w,P,w===a.window.document?this.handleWindowEvent:this.handleEvent,F)}},ci.prototype._addDefaultHandlers=function(h){var b=this._map,d=b.getCanvasContainer();this._add("mapEvent",new U(b,h));var w=b.boxZoom=new $(b,h);this._add("boxZoom",w);var P=new ot,F=new Ni;b.doubleClickZoom=new Vr(F,P),this._add("tapZoom",P),this._add("clickZoom",F);var G=new Ti;this._add("tapDragZoom",G);var K=b.touchPitch=new Jr;this._add("touchPitch",K);var te=new Zt(h),fe=new or(h);b.dragRotate=new Rn(h,te,fe),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",fe,["mouseRotate"]);var we=new We(h),be=new fr(h);b.dragPan=new uo(d,we,be),this._add("mousePan",we),this._add("touchPan",be,["touchZoom","touchRotate"]);var Ie=new ri,Ye=new Ur;b.touchZoomRotate=new cn(d,Ye,Ie,G),this._add("touchRotate",Ie,["touchPan","touchZoom"]),this._add("touchZoom",Ye,["touchPan","touchRotate"]);var Ze=b.scrollZoom=new wr(b,this);this._add("scrollZoom",Ze,["mousePan"]);var Oe=b.keyboard=new la;this._add("keyboard",Oe),this._add("blockableMapEvent",new Z(b));for(var Xe=0,ht=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Xe<ht.length;Xe+=1){var zt=ht[Xe];h.interactive&&h[zt]&&b[zt].enable(h[zt])}},ci.prototype._add=function(h,b,d){this._handlers.push({handlerName:h,handler:b,allowed:d}),this._handlersById[h]=b},ci.prototype.stop=function(h){if(!this._updatingCamera){for(var b=0,d=this._handlers;b<d.length;b+=1){var w=d[b],P=w.handler;P.reset()}this._inertia.clear(),this._fireEvents({},{},h),this._changes=[]}},ci.prototype.isActive=function(){for(var h=0,b=this._handlers;h<b.length;h+=1){var d=b[h],w=d.handler;if(w.isActive())return!0}return!1},ci.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ci.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ci.prototype.isMoving=function(){return!!pi(this._eventsInProgress)||this.isZooming()},ci.prototype._blockedByActive=function(h,b,d){for(var w in h)if(w!==d&&(!b||b.indexOf(w)<0))return!0;return!1},ci.prototype.handleWindowEvent=function(h){this.handleEvent(h,h.type+"Window")},ci.prototype._getMapTouches=function(h){for(var b=[],d=0,w=h;d<w.length;d+=1){var P=w[d],F=P.target;this._el.contains(F)&&b.push(P)}return b},ci.prototype.handleEvent=function(h,b){if(h.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var d=h.type==="renderFrame"?void 0:h,w={needsRenderFrame:!1},P={},F={},G=h.touches?this._getMapTouches(h.touches):void 0,K=G?l.touchPos(this._el,G):l.mousePos(this._el,h),te=0,fe=this._handlers;te<fe.length;te+=1){var we=fe[te],be=we.handlerName,Ie=we.handler,Ye=we.allowed;if(Ie.isEnabled()){var Ze=void 0;this._blockedByActive(F,Ye,be)?Ie.reset():Ie[b||h.type]&&(Ze=Ie[b||h.type](h,K,G),this.mergeHandlerResult(w,P,Ze,be,d),Ze&&Ze.needsRenderFrame&&this._triggerRenderFrame()),(Ze||Ie.isActive())&&(F[be]=Ie)}}var Oe={};for(var Xe in this._previousActiveHandlers)F[Xe]||(Oe[Xe]=d);this._previousActiveHandlers=F,(Object.keys(Oe).length||fo(w))&&(this._changes.push([w,P,Oe]),this._triggerRenderFrame()),(Object.keys(F).length||fo(w))&&this._map._stop(!0),this._updatingCamera=!1;var ht=w.cameraAnimation;ht&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ht(this._map))},ci.prototype.mergeHandlerResult=function(h,b,d,w,P){if(d){a.extend(h,d);var F={handlerName:w,originalEvent:d.originalEvent||P};d.zoomDelta!==void 0&&(b.zoom=F),d.panDelta!==void 0&&(b.drag=F),d.pitchDelta!==void 0&&(b.pitch=F),d.bearingDelta!==void 0&&(b.rotate=F)}},ci.prototype._applyChanges=function(){for(var h={},b={},d={},w=0,P=this._changes;w<P.length;w+=1){var F=P[w],G=F[0],K=F[1],te=F[2];G.panDelta&&(h.panDelta=(h.panDelta||new a.Point(0,0))._add(G.panDelta)),G.zoomDelta&&(h.zoomDelta=(h.zoomDelta||0)+G.zoomDelta),G.bearingDelta&&(h.bearingDelta=(h.bearingDelta||0)+G.bearingDelta),G.pitchDelta&&(h.pitchDelta=(h.pitchDelta||0)+G.pitchDelta),G.around!==void 0&&(h.around=G.around),G.pinchAround!==void 0&&(h.pinchAround=G.pinchAround),G.noInertia&&(h.noInertia=G.noInertia),a.extend(b,K),a.extend(d,te)}this._updateMapTransform(h,b,d),this._changes=[]},ci.prototype._updateMapTransform=function(h,b,d){var w=this._map,P=w.transform;if(!fo(h))return this._fireEvents(b,d,!0);var F=h.panDelta,G=h.zoomDelta,K=h.bearingDelta,te=h.pitchDelta,fe=h.around,we=h.pinchAround;we!==void 0&&(fe=we),w._stop(!0),fe=fe||w.transform.centerPoint;var be=P.pointLocation(F?fe.sub(F):fe);K&&(P.bearing+=K),te&&(P.pitch+=te),G&&(P.zoom+=G),P.setLocationAtPoint(be,fe),this._map._update(),h.noInertia||this._inertia.record(h),this._fireEvents(b,d,!0)},ci.prototype._fireEvents=function(h,b,d){var w=this,P=pi(this._eventsInProgress),F=pi(h),G={};for(var K in h){var te=h[K],fe=te.originalEvent;this._eventsInProgress[K]||(G[K+"start"]=fe),this._eventsInProgress[K]=h[K]}!P&&F&&this._fireEvent("movestart",F.originalEvent);for(var we in G)this._fireEvent(we,G[we]);F&&this._fireEvent("move",F.originalEvent);for(var be in h){var Ie=h[be],Ye=Ie.originalEvent;this._fireEvent(be,Ye)}var Ze={},Oe;for(var Xe in this._eventsInProgress){var ht=this._eventsInProgress[Xe],zt=ht.handlerName,qt=ht.originalEvent;this._handlersById[zt].isActive()||(delete this._eventsInProgress[Xe],Oe=b[zt]||qt,Ze[Xe+"end"]=Oe)}for(var Qt in Ze)this._fireEvent(Qt,Ze[Qt]);var rr=pi(this._eventsInProgress);if(d&&(P||F)&&!rr){this._updatingCamera=!0;var Yt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ar=function(cr){return cr!==0&&-w._bearingSnap<cr&&cr<w._bearingSnap};Yt?(ar(Yt.bearing||this._map.getBearing())&&(Yt.bearing=0),this._map.easeTo(Yt,{originalEvent:Oe})):(this._map.fire(new a.Event("moveend",{originalEvent:Oe})),ar(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ci.prototype._fireEvent=function(h,b){this._map.fire(new a.Event(h,b?{originalEvent:b}:{}))},ci.prototype._requestFrame=function(){var h=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(b){delete h._frameId,h.handleEvent(new Ko("renderFrame",{timeStamp:b})),h._applyChanges()})},ci.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var bf=function(g){function h(b,d){g.call(this),this._moving=!1,this._zooming=!1,this.transform=b,this._bearingSnap=d.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},h.prototype.setCenter=function(d,w){return this.jumpTo({center:d},w)},h.prototype.panBy=function(d,w,P){return d=a.Point.convert(d).mult(-1),this.panTo(this.transform.center,a.extend({offset:d},w),P)},h.prototype.panTo=function(d,w,P){return this.easeTo(a.extend({center:d},w),P)},h.prototype.getZoom=function(){return this.transform.zoom},h.prototype.setZoom=function(d,w){return this.jumpTo({zoom:d},w),this},h.prototype.zoomTo=function(d,w,P){return this.easeTo(a.extend({zoom:d},w),P)},h.prototype.zoomIn=function(d,w){return this.zoomTo(this.getZoom()+1,d,w),this},h.prototype.zoomOut=function(d,w){return this.zoomTo(this.getZoom()-1,d,w),this},h.prototype.getBearing=function(){return this.transform.bearing},h.prototype.setBearing=function(d,w){return this.jumpTo({bearing:d},w),this},h.prototype.getPadding=function(){return this.transform.padding},h.prototype.setPadding=function(d,w){return this.jumpTo({padding:d},w),this},h.prototype.rotateTo=function(d,w,P){return this.easeTo(a.extend({bearing:d},w),P)},h.prototype.resetNorth=function(d,w){return this.rotateTo(0,a.extend({duration:1e3},d),w),this},h.prototype.resetNorthPitch=function(d,w){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},d),w),this},h.prototype.snapToNorth=function(d,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,w):this},h.prototype.getPitch=function(){return this.transform.pitch},h.prototype.setPitch=function(d,w){return this.jumpTo({pitch:d},w),this},h.prototype.cameraForBounds=function(d,w){d=a.LngLatBounds.convert(d);var P=w&&w.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),P,w)},h.prototype._cameraForBoxAndBearing=function(d,w,P,F){var G={top:0,bottom:0,right:0,left:0};if(F=a.extend({padding:G,offset:[0,0],maxZoom:this.transform.maxZoom},F),typeof F.padding=="number"){var K=F.padding;F.padding={top:K,bottom:K,right:K,left:K}}F.padding=a.extend(G,F.padding);var te=this.transform,fe=te.padding,we=te.project(a.LngLat.convert(d)),be=te.project(a.LngLat.convert(w)),Ie=we.rotate(-P*Math.PI/180),Ye=be.rotate(-P*Math.PI/180),Ze=new a.Point(Math.max(Ie.x,Ye.x),Math.max(Ie.y,Ye.y)),Oe=new a.Point(Math.min(Ie.x,Ye.x),Math.min(Ie.y,Ye.y)),Xe=Ze.sub(Oe),ht=(te.width-(fe.left+fe.right+F.padding.left+F.padding.right))/Xe.x,zt=(te.height-(fe.top+fe.bottom+F.padding.top+F.padding.bottom))/Xe.y;if(zt<0||ht<0){a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var qt=Math.min(te.scaleZoom(te.scale*Math.min(ht,zt)),F.maxZoom),Qt=typeof F.offset.x=="number"?new a.Point(F.offset.x,F.offset.y):a.Point.convert(F.offset),rr=(F.padding.left-F.padding.right)/2,Yt=(F.padding.top-F.padding.bottom)/2,ar=new a.Point(rr,Yt),cr=ar.rotate(P*Math.PI/180),_r=Qt.add(cr),Pr=_r.mult(te.scale/te.zoomScale(qt)),Sr=te.unproject(we.add(be).div(2).sub(Pr));return{center:Sr,zoom:qt,bearing:P}},h.prototype.fitBounds=function(d,w,P){return this._fitInternal(this.cameraForBounds(d,w),w,P)},h.prototype.fitScreenCoordinates=function(d,w,P,F,G){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(d)),this.transform.pointLocation(a.Point.convert(w)),P,F),F,G)},h.prototype._fitInternal=function(d,w,P){return d?(w=a.extend(d,w),delete w.padding,w.linear?this.easeTo(w,P):this.flyTo(w,P)):this},h.prototype.jumpTo=function(d,w){this.stop();var P=this.transform,F=!1,G=!1,K=!1;return"zoom"in d&&P.zoom!==+d.zoom&&(F=!0,P.zoom=+d.zoom),d.center!==void 0&&(P.center=a.LngLat.convert(d.center)),"bearing"in d&&P.bearing!==+d.bearing&&(G=!0,P.bearing=+d.bearing),"pitch"in d&&P.pitch!==+d.pitch&&(K=!0,P.pitch=+d.pitch),d.padding!=null&&!P.isPaddingEqual(d.padding)&&(P.padding=d.padding),this.fire(new a.Event("movestart",w)).fire(new a.Event("move",w)),F&&this.fire(new a.Event("zoomstart",w)).fire(new a.Event("zoom",w)).fire(new a.Event("zoomend",w)),G&&this.fire(new a.Event("rotatestart",w)).fire(new a.Event("rotate",w)).fire(new a.Event("rotateend",w)),K&&this.fire(new a.Event("pitchstart",w)).fire(new a.Event("pitch",w)).fire(new a.Event("pitchend",w)),this.fire(new a.Event("moveend",w))},h.prototype.easeTo=function(d,w){var P=this;this._stop(!1,d.easeId),d=a.extend({offset:[0,0],duration:500,easing:a.ease},d),(d.animate===!1||!d.essential&&a.browser.prefersReducedMotion)&&(d.duration=0);var F=this.transform,G=this.getZoom(),K=this.getBearing(),te=this.getPitch(),fe=this.getPadding(),we="zoom"in d?+d.zoom:G,be="bearing"in d?this._normalizeBearing(d.bearing,K):K,Ie="pitch"in d?+d.pitch:te,Ye="padding"in d?d.padding:F.padding,Ze=a.Point.convert(d.offset),Oe=F.centerPoint.add(Ze),Xe=F.pointLocation(Oe),ht=a.LngLat.convert(d.center||Xe);this._normalizeCenter(ht);var zt=F.project(Xe),qt=F.project(ht).sub(zt),Qt=F.zoomScale(we-G),rr,Yt;d.around&&(rr=a.LngLat.convert(d.around),Yt=F.locationPoint(rr));var ar={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||we!==G,this._rotating=this._rotating||K!==be,this._pitching=this._pitching||Ie!==te,this._padding=!F.isPaddingEqual(Ye),this._easeId=d.easeId,this._prepareEase(w,d.noMoveStart,ar),this._ease(function(cr){if(P._zooming&&(F.zoom=a.number(G,we,cr)),P._rotating&&(F.bearing=a.number(K,be,cr)),P._pitching&&(F.pitch=a.number(te,Ie,cr)),P._padding&&(F.interpolatePadding(fe,Ye,cr),Oe=F.centerPoint.add(Ze)),rr)F.setLocationAtPoint(rr,Yt);else{var _r=F.zoomScale(F.zoom-G),Pr=we>G?Math.min(2,Qt):Math.max(.5,Qt),Sr=Math.pow(Pr,1-cr),Xr=F.unproject(zt.add(qt.mult(cr*Sr)).mult(_r));F.setLocationAtPoint(F.renderWorldCopies?Xr.wrap():Xr,Oe)}P._fireMoveEvents(w)},function(cr){P._afterEase(w,cr)},d),this},h.prototype._prepareEase=function(d,w,P){P===void 0&&(P={}),this._moving=!0,!w&&!P.moving&&this.fire(new a.Event("movestart",d)),this._zooming&&!P.zooming&&this.fire(new a.Event("zoomstart",d)),this._rotating&&!P.rotating&&this.fire(new a.Event("rotatestart",d)),this._pitching&&!P.pitching&&this.fire(new a.Event("pitchstart",d))},h.prototype._fireMoveEvents=function(d){this.fire(new a.Event("move",d)),this._zooming&&this.fire(new a.Event("zoom",d)),this._rotating&&this.fire(new a.Event("rotate",d)),this._pitching&&this.fire(new a.Event("pitch",d))},h.prototype._afterEase=function(d,w){if(!(this._easeId&&w&&this._easeId===w)){delete this._easeId;var P=this._zooming,F=this._rotating,G=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,P&&this.fire(new a.Event("zoomend",d)),F&&this.fire(new a.Event("rotateend",d)),G&&this.fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d))}},h.prototype.flyTo=function(d,w){var P=this;if(!d.essential&&a.browser.prefersReducedMotion){var F=a.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(F,w)}this.stop(),d=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},d);var G=this.transform,K=this.getZoom(),te=this.getBearing(),fe=this.getPitch(),we=this.getPadding(),be="zoom"in d?a.clamp(+d.zoom,G.minZoom,G.maxZoom):K,Ie="bearing"in d?this._normalizeBearing(d.bearing,te):te,Ye="pitch"in d?+d.pitch:fe,Ze="padding"in d?d.padding:G.padding,Oe=G.zoomScale(be-K),Xe=a.Point.convert(d.offset),ht=G.centerPoint.add(Xe),zt=G.pointLocation(ht),qt=a.LngLat.convert(d.center||zt);this._normalizeCenter(qt);var Qt=G.project(zt),rr=G.project(qt).sub(Qt),Yt=d.curve,ar=Math.max(G.width,G.height),cr=ar/Oe,_r=rr.mag();if("minZoom"in d){var Pr=a.clamp(Math.min(d.minZoom,K,be),G.minZoom,G.maxZoom),Sr=ar/G.zoomScale(Pr-K);Yt=Math.sqrt(Sr/_r*2)}var Xr=Yt*Yt;function Fa(na){var Oa=(cr*cr-ar*ar+(na?-1:1)*Xr*Xr*_r*_r)/(2*(na?cr:ar)*Xr*_r);return Math.log(Math.sqrt(Oa*Oa+1)-Oa)}function ba(na){return(Math.exp(na)-Math.exp(-na))/2}function qr(na){return(Math.exp(na)+Math.exp(-na))/2}function ka(na){return ba(na)/qr(na)}var ia=Fa(0),Wa=function(na){return qr(ia)/qr(ia+Yt*na)},Va=function(na){return ar*((qr(ia)*ka(ia+Yt*na)-ba(ia))/Xr)/_r},Ai=(Fa(1)-ia)/Yt;if(Math.abs(_r)<1e-6||!isFinite(Ai)){if(Math.abs(ar-cr)<1e-6)return this.easeTo(d,w);var za=cr<ar?-1:1;Ai=Math.abs(Math.log(cr/ar))/Yt,Va=function(){return 0},Wa=function(na){return Math.exp(za*Yt*na)}}if("duration"in d)d.duration=+d.duration;else{var mi="screenSpeed"in d?+d.screenSpeed/Yt:+d.speed;d.duration=1e3*Ai/mi}return d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=te!==Ie,this._pitching=Ye!==fe,this._padding=!G.isPaddingEqual(Ze),this._prepareEase(w,!1),this._ease(function(na){var Oa=na*Ai,en=1/Wa(Oa);G.zoom=na===1?be:K+G.scaleZoom(en),P._rotating&&(G.bearing=a.number(te,Ie,na)),P._pitching&&(G.pitch=a.number(fe,Ye,na)),P._padding&&(G.interpolatePadding(we,Ze,na),ht=G.centerPoint.add(Xe));var Fn=na===1?qt:G.unproject(Qt.add(rr.mult(Va(Oa))).mult(en));G.setLocationAtPoint(G.renderWorldCopies?Fn.wrap():Fn,ht),P._fireMoveEvents(w)},function(){return P._afterEase(w)},d),this},h.prototype.isEasing=function(){return!!this._easeFrameId},h.prototype.stop=function(){return this._stop()},h.prototype._stop=function(d,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var P=this._onEaseEnd;delete this._onEaseEnd,P.call(this,w)}if(!d){var F=this.handlers;F&&F.stop(!1)}return this},h.prototype._ease=function(d,w,P){P.animate===!1||P.duration===0?(d(1),w()):(this._easeStart=a.browser.now(),this._easeOptions=P,this._onEaseFrame=d,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},h.prototype._renderFrameCallback=function(){var d=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},h.prototype._normalizeBearing=function(d,w){d=a.wrap(d,-180,180);var P=Math.abs(d-w);return Math.abs(d-360-w)<P&&(d-=360),Math.abs(d+360-w)<P&&(d+=360),d},h.prototype._normalizeCenter=function(d){var w=this.transform;if(!(!w.renderWorldCopies||w.lngRange)){var P=d.lng-w.center.lng;d.lng+=P>180?-360:P<-180?360:0}},h}(a.Evented),Ma=function(h){h===void 0&&(h={}),this.options=h,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ma.prototype.getDefaultPosition=function(){return"bottom-right"},Ma.prototype.onAdd=function(h){var b=this.options&&this.options.compact;return this._map=h,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=l.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=l.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),b&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),b===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ma.prototype.onRemove=function(){l.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ma.prototype._setElementTitle=function(h,b){var d=this._map._getUIString("AttributionControl."+b);h.title=d,h.setAttribute("aria-label",d)},Ma.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ma.prototype._updateEditLink=function(){var h=this._editLink;h||(h=this._editLink=this._container.querySelector(".mapbox-improve-map"));var b=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(h){var d=b.reduce(function(w,P,F){return P.value&&(w+=P.key+"="+P.value+(F<b.length-1?"&":"")),w},"?");h.href=a.config.FEEDBACK_URL+"/"+d+(this._map._hash?this._map._hash.getHashString(!0):""),h.rel="noopener nofollow",this._setElementTitle(h,"MapFeedback")}},Ma.prototype._updateData=function(h){h&&(h.sourceDataType==="metadata"||h.sourceDataType==="visibility"||h.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Ma.prototype._updateAttributions=function(){if(this._map.style){var h=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?h=h.concat(this.options.customAttribution.map(function(K){return typeof K!="string"?"":K})):typeof this.options.customAttribution=="string"&&h.push(this.options.customAttribution)),this._map.style.stylesheet){var b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}var d=this._map.style.sourceCaches;for(var w in d){var P=d[w];if(P.used){var F=P.getSource();F.attribution&&h.indexOf(F.attribution)<0&&h.push(F.attribution)}}h.sort(function(K,te){return K.length-te.length}),h=h.filter(function(K,te){for(var fe=te+1;fe<h.length;fe++)if(h[fe].indexOf(K)>=0)return!1;return!0});var G=h.join(" | ");G!==this._attribHTML&&(this._attribHTML=G,h.length?(this._innerContainer.innerHTML=G,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ma.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ui=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};ui.prototype.onAdd=function(h){this._map=h,this._container=l.create("div","mapboxgl-ctrl");var b=l.create("a","mapboxgl-ctrl-logo");return b.target="_blank",b.rel="noopener nofollow",b.href="https://www.mapbox.com/",b.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),b.setAttribute("rel","noopener nofollow"),this._container.appendChild(b),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ui.prototype.onRemove=function(){l.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ui.prototype.getDefaultPosition=function(){return"bottom-left"},ui.prototype._updateLogo=function(h){(!h||h.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},ui.prototype._logoRequired=function(){if(this._map.style){var h=this._map.style.sourceCaches;for(var b in h){var d=h[b].getSource();if(d.mapbox_logo)return!0}return!1}},ui.prototype._updateCompact=function(){var h=this._container.children;if(h.length){var b=h[0];this._map.getCanvasContainer().offsetWidth<250?b.classList.add("mapboxgl-compact"):b.classList.remove("mapboxgl-compact")}};var Vl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Vl.prototype.add=function(h){var b=++this._id,d=this._queue;return d.push({callback:h,id:b,cancelled:!1}),b},Vl.prototype.remove=function(h){for(var b=this._currentlyRunning,d=b?this._queue.concat(b):this._queue,w=0,P=d;w<P.length;w+=1){var F=P[w];if(F.id===h){F.cancelled=!0;return}}},Vl.prototype.run=function(h){h===void 0&&(h=0);var b=this._currentlyRunning=this._queue;this._queue=[];for(var d=0,w=b;d<w.length;d+=1){var P=w[d];if(!P.cancelled&&(P.callback(h),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Vl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var $v={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},oc=a.window.HTMLImageElement,dy=a.window.HTMLElement,wf=a.window.ImageBitmap,ch=-2,hh=22,Po=0,Tf=60,py={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:ch,maxZoom:hh,minPitch:Po,maxPitch:Tf,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},my=function(g){function h(d){var w=this;if(d=a.extend({},py,d),d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<Po)throw new Error("minPitch must be greater than or equal to "+Po);if(d.maxPitch!=null&&d.maxPitch>Tf)throw new Error("maxPitch must be less than or equal to "+Tf);var P=new ti(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(g.call(this,P,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new Vl,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},$v,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new a.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=a.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else if(d.container instanceof dy)this._container=d.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(d.maxBounds&&this.setMaxBounds(d.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return w._update(!1)}),this.on("moveend",function(){return w._update(!1)}),this.on("zoom",function(){return w._update(!0)}),typeof a.window!="undefined"&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ci(this,d);var F=typeof d.hash=="string"&&d.hash||void 0;this._hash=d.hash&&new Bl(F).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Ma({customAttribution:d.customAttribution})),this.addControl(new ui,d.logoPosition),this.on("style.load",function(){w.transform.unmodified&&w.jumpTo(w.style.stylesheet)}),this.on("data",function(G){w._update(G.dataType==="style"),w.fire(new a.Event(G.dataType+"data",G))}),this.on("dataloading",function(G){w.fire(new a.Event(G.dataType+"dataloading",G))})}g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h;var b={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return h.prototype._getMapId=function(){return this._mapId},h.prototype.addControl=function(w,P){if(P===void 0&&(w.getDefaultPosition?P=w.getDefaultPosition():P="top-right"),!w||!w.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var F=w.onAdd(this);this._controls.push(w);var G=this._controlPositions[P];return P.indexOf("bottom")!==-1?G.insertBefore(F,G.firstChild):G.appendChild(F),this},h.prototype.removeControl=function(w){if(!w||!w.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var P=this._controls.indexOf(w);return P>-1&&this._controls.splice(P,1),w.onRemove(this),this},h.prototype.hasControl=function(w){return this._controls.indexOf(w)>-1},h.prototype.resize=function(w){var P=this._containerDimensions(),F=P[0],G=P[1];this._resizeCanvas(F,G),this.transform.resize(F,G),this.painter.resize(F,G);var K=!this._moving;return K&&(this.stop(),this.fire(new a.Event("movestart",w)).fire(new a.Event("move",w))),this.fire(new a.Event("resize",w)),K&&this.fire(new a.Event("moveend",w)),this},h.prototype.getBounds=function(){return this.transform.getBounds()},h.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},h.prototype.setMaxBounds=function(w){return this.transform.setMaxBounds(a.LngLatBounds.convert(w)),this._update()},h.prototype.setMinZoom=function(w){if(w=w==null?ch:w,w>=ch&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between "+ch+" and the current maxZoom, inclusive")},h.prototype.getMinZoom=function(){return this.transform.minZoom},h.prototype.setMaxZoom=function(w){if(w=w==null?hh:w,w>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")},h.prototype.getMaxZoom=function(){return this.transform.maxZoom},h.prototype.setMinPitch=function(w){if(w=w==null?Po:w,w<Po)throw new Error("minPitch must be greater than or equal to "+Po);if(w>=Po&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between "+Po+" and the current maxPitch, inclusive")},h.prototype.getMinPitch=function(){return this.transform.minPitch},h.prototype.setMaxPitch=function(w){if(w=w==null?Tf:w,w>Tf)throw new Error("maxPitch must be less than or equal to "+Tf);if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")},h.prototype.getMaxPitch=function(){return this.transform.maxPitch},h.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},h.prototype.setRenderWorldCopies=function(w){return this.transform.renderWorldCopies=w,this._update()},h.prototype.project=function(w){return this.transform.locationPoint(a.LngLat.convert(w))},h.prototype.unproject=function(w){return this.transform.pointLocation(a.Point.convert(w))},h.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},h.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},h.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},h.prototype._createDelegatedListener=function(w,P,F){var G=this,K;if(w==="mouseenter"||w==="mouseover"){var te=!1,fe=function(Oe){var Xe=G.getLayer(P)?G.queryRenderedFeatures(Oe.point,{layers:[P]}):[];Xe.length?te||(te=!0,F.call(G,new S(w,G,Oe.originalEvent,{features:Xe}))):te=!1},we=function(){te=!1};return{layer:P,listener:F,delegates:{mousemove:fe,mouseout:we}}}else if(w==="mouseleave"||w==="mouseout"){var be=!1,Ie=function(Oe){var Xe=G.getLayer(P)?G.queryRenderedFeatures(Oe.point,{layers:[P]}):[];Xe.length?be=!0:be&&(be=!1,F.call(G,new S(w,G,Oe.originalEvent)))},Ye=function(Oe){be&&(be=!1,F.call(G,new S(w,G,Oe.originalEvent)))};return{layer:P,listener:F,delegates:{mousemove:Ie,mouseout:Ye}}}else{var Ze=function(Oe){var Xe=G.getLayer(P)?G.queryRenderedFeatures(Oe.point,{layers:[P]}):[];Xe.length&&(Oe.features=Xe,F.call(G,Oe),delete Oe.features)};return{layer:P,listener:F,delegates:(K={},K[w]=Ze,K)}}},h.prototype.on=function(w,P,F){if(F===void 0)return g.prototype.on.call(this,w,P);var G=this._createDelegatedListener(w,P,F);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(G);for(var K in G.delegates)this.on(K,G.delegates[K]);return this},h.prototype.once=function(w,P,F){if(F===void 0)return g.prototype.once.call(this,w,P);var G=this._createDelegatedListener(w,P,F);for(var K in G.delegates)this.once(K,G.delegates[K]);return this},h.prototype.off=function(w,P,F){var G=this;if(F===void 0)return g.prototype.off.call(this,w,P);var K=function(te){for(var fe=te[w],we=0;we<fe.length;we++){var be=fe[we];if(be.layer===P&&be.listener===F){for(var Ie in be.delegates)G.off(Ie,be.delegates[Ie]);return fe.splice(we,1),G}}};return this._delegatedListeners&&this._delegatedListeners[w]&&K(this._delegatedListeners),this},h.prototype.queryRenderedFeatures=function(w,P){if(!this.style)return[];P===void 0&&w!==void 0&&!(w instanceof a.Point)&&!Array.isArray(w)&&(P=w,w=void 0),P=P||{},w=w||[[0,0],[this.transform.width,this.transform.height]];var F;if(w instanceof a.Point||typeof w[0]=="number")F=[a.Point.convert(w)];else{var G=a.Point.convert(w[0]),K=a.Point.convert(w[1]);F=[G,new a.Point(K.x,G.y),K,new a.Point(G.x,K.y),G]}return this.style.queryRenderedFeatures(F,P,this.transform)},h.prototype.querySourceFeatures=function(w,P){return this.style.querySourceFeatures(w,P)},h.prototype.setStyle=function(w,P){return P=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},P),P.diff!==!1&&P.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,P),this):(this._localIdeographFontFamily=P.localIdeographFontFamily,this._updateStyle(w,P))},h.prototype._getUIString=function(w){var P=this._locale[w];if(P==null)throw new Error("Missing UI string '"+w+"'");return P},h.prototype._updateStyle=function(w,P){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),w)this.style=new Cs(this,P||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w):this.style.loadJSON(w),this},h.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Cs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},h.prototype._diffStyle=function(w,P){var F=this;if(typeof w=="string"){var G=this._requestManager.normalizeStyleURL(w),K=this._requestManager.transformRequest(G,a.ResourceType.Style);a.getJSON(K,function(te,fe){te?F.fire(new a.ErrorEvent(te)):fe&&F._updateDiff(fe,P)})}else typeof w=="object"&&this._updateDiff(w,P)},h.prototype._updateDiff=function(w,P){try{this.style.setState(w)&&this._update(!0)}catch(F){a.warnOnce("Unable to perform style diff: "+(F.message||F.error||F)+".  Rebuilding the style from scratch."),this._updateStyle(w,P)}},h.prototype.getStyle=function(){if(this.style)return this.style.serialize()},h.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},h.prototype.addSource=function(w,P){return this._lazyInitEmptyStyle(),this.style.addSource(w,P),this._update(!0)},h.prototype.isSourceLoaded=function(w){var P=this.style&&this.style.sourceCaches[w];if(P===void 0){this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+w+"'")));return}return P.loaded()},h.prototype.areTilesLoaded=function(){var w=this.style&&this.style.sourceCaches;for(var P in w){var F=w[P],G=F._tiles;for(var K in G){var te=G[K];if(!(te.state==="loaded"||te.state==="errored"))return!1}}return!0},h.prototype.addSourceType=function(w,P,F){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,P,F)},h.prototype.removeSource=function(w){return this.style.removeSource(w),this._update(!0)},h.prototype.getSource=function(w){return this.style.getSource(w)},h.prototype.addImage=function(w,P,F){F===void 0&&(F={});var G=F.pixelRatio;G===void 0&&(G=1);var K=F.sdf;K===void 0&&(K=!1);var te=F.stretchX,fe=F.stretchY,we=F.content;this._lazyInitEmptyStyle();var be=0;if(P instanceof oc||wf&&P instanceof wf){var Ie=a.browser.getImageData(P),Ye=Ie.width,Ze=Ie.height,Oe=Ie.data;this.style.addImage(w,{data:new a.RGBAImage({width:Ye,height:Ze},Oe),pixelRatio:G,stretchX:te,stretchY:fe,content:we,sdf:K,version:be})}else{if(P.width===void 0||P.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Xe=P.width,ht=P.height,zt=P.data,qt=P;this.style.addImage(w,{data:new a.RGBAImage({width:Xe,height:ht},new Uint8Array(zt)),pixelRatio:G,stretchX:te,stretchY:fe,content:we,sdf:K,version:be,userImage:qt}),qt.onAdd&&qt.onAdd(this,w)}},h.prototype.updateImage=function(w,P){var F=this.style.getImage(w);if(!F)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var G=P instanceof oc||wf&&P instanceof wf?a.browser.getImageData(P):P,K=G.width,te=G.height,fe=G.data;if(K===void 0||te===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(K!==F.data.width||te!==F.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var we=!(P instanceof oc||wf&&P instanceof wf);F.data.replace(fe,we),this.style.updateImage(w,F)},h.prototype.hasImage=function(w){return w?!!this.style.getImage(w):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},h.prototype.removeImage=function(w){this.style.removeImage(w)},h.prototype.loadImage=function(w,P){a.getImage(this._requestManager.transformRequest(w,a.ResourceType.Image),P)},h.prototype.listImages=function(){return this.style.listImages()},h.prototype.addLayer=function(w,P){return this._lazyInitEmptyStyle(),this.style.addLayer(w,P),this._update(!0)},h.prototype.moveLayer=function(w,P){return this.style.moveLayer(w,P),this._update(!0)},h.prototype.removeLayer=function(w){return this.style.removeLayer(w),this._update(!0)},h.prototype.getLayer=function(w){return this.style.getLayer(w)},h.prototype.setLayerZoomRange=function(w,P,F){return this.style.setLayerZoomRange(w,P,F),this._update(!0)},h.prototype.setFilter=function(w,P,F){return F===void 0&&(F={}),this.style.setFilter(w,P,F),this._update(!0)},h.prototype.getFilter=function(w){return this.style.getFilter(w)},h.prototype.setPaintProperty=function(w,P,F,G){return G===void 0&&(G={}),this.style.setPaintProperty(w,P,F,G),this._update(!0)},h.prototype.getPaintProperty=function(w,P){return this.style.getPaintProperty(w,P)},h.prototype.setLayoutProperty=function(w,P,F,G){return G===void 0&&(G={}),this.style.setLayoutProperty(w,P,F,G),this._update(!0)},h.prototype.getLayoutProperty=function(w,P){return this.style.getLayoutProperty(w,P)},h.prototype.setLight=function(w,P){return P===void 0&&(P={}),this._lazyInitEmptyStyle(),this.style.setLight(w,P),this._update(!0)},h.prototype.getLight=function(){return this.style.getLight()},h.prototype.setFeatureState=function(w,P){return this.style.setFeatureState(w,P),this._update()},h.prototype.removeFeatureState=function(w,P){return this.style.removeFeatureState(w,P),this._update()},h.prototype.getFeatureState=function(w){return this.style.getFeatureState(w)},h.prototype.getContainer=function(){return this._container},h.prototype.getCanvasContainer=function(){return this._canvasContainer},h.prototype.getCanvas=function(){return this._canvas},h.prototype._containerDimensions=function(){var w=0,P=0;return this._container&&(w=this._container.clientWidth||400,P=this._container.clientHeight||300),[w,P]},h.prototype._detectMissingCSS=function(){var w=a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");w!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},h.prototype._setupContainer=function(){var w=this._container;w.classList.add("mapboxgl-map");var P=this._missingCSSCanary=l.create("div","mapboxgl-canary",w);P.style.visibility="hidden",this._detectMissingCSS();var F=this._canvasContainer=l.create("div","mapboxgl-canvas-container",w);this._interactive&&F.classList.add("mapboxgl-interactive"),this._canvas=l.create("canvas","mapboxgl-canvas",F),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var G=this._containerDimensions();this._resizeCanvas(G[0],G[1]);var K=this._controlContainer=l.create("div","mapboxgl-control-container",w),te=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(fe){te[fe]=l.create("div","mapboxgl-ctrl-"+fe,K)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},h.prototype._resizeCanvas=function(w,P){var F=a.browser.devicePixelRatio||1;this._canvas.width=F*w,this._canvas.height=F*P,this._canvas.style.width=w+"px",this._canvas.style.height=P+"px"},h.prototype._setupPainter=function(){var w=a.extend({},s.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),P=this._canvas.getContext("webgl",w)||this._canvas.getContext("experimental-webgl",w);if(!P){this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new Ci(P,this.transform),a.webpSupported.testSupport(P)},h.prototype._contextLost=function(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:w}))},h.prototype._contextRestored=function(w){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:w}))},h.prototype._onMapScroll=function(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},h.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},h.prototype._update=function(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this},h.prototype._requestRenderFrame=function(w){return this._update(),this._renderTaskQueue.add(w)},h.prototype._cancelRenderFrame=function(w){this._renderTaskQueue.remove(w)},h.prototype._render=function(w){var P=this,F,G=0,K=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(F=K.createQueryEXT(),K.beginQueryEXT(K.TIME_ELAPSED_EXT,F),G=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),!this._removed){var te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var fe=this.transform.zoom,we=a.browser.now();this.style.zoomHistory.update(fe,we);var be=new a.EvaluationParameters(fe,{now:we,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ie=be.crossFadingFactor();(Ie!==1||Ie!==this._crossFadingFactor)&&(te=!0,this._crossFadingFactor=Ie),this.style.update(be)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ye=a.browser.now()-G;K.endQueryEXT(K.TIME_ELAPSED_EXT,F),setTimeout(function(){var Xe=K.getQueryObjectEXT(F,K.QUERY_RESULT_EXT)/1e6;K.deleteQueryEXT(F),P.fire(new a.Event("gpu-timing-frame",{cpuTime:Ye,gpuTime:Xe}))},50)}if(this.listens("gpu-timing-layer")){var Ze=this.painter.collectGpuTimers();setTimeout(function(){var Xe=P.painter.queryGpuTimers(Ze);P.fire(new a.Event("gpu-timing-layer",{layerTimes:Xe}))},50)}var Oe=this._sourcesDirty||this._styleDirty||this._placementDirty;return Oe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),this._loaded&&!this._fullyLoaded&&!Oe&&(this._fullyLoaded=!0),this}},h.prototype.remove=function(){this._hash&&this._hash.remove();for(var w=0,P=this._controls;w<P.length;w+=1){var F=P[w];F.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof a.window!="undefined"&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var G=this.painter.context.gl.getExtension("WEBGL_lose_context");G&&G.loseContext&&G.loseContext(),ed(this._canvasContainer),ed(this._controlContainer),ed(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},h.prototype.triggerRepaint=function(){var w=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(P){w._frame=null,w._render(P)}))},h.prototype._onWindowOnline=function(){this._update()},h.prototype._onWindowResize=function(w){this._trackResize&&this.resize({originalEvent:w})._update()},b.showTileBoundaries.get=function(){return!!this._showTileBoundaries},b.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},b.showPadding.get=function(){return!!this._showPadding},b.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},b.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},b.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},b.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},b.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},b.repaint.get=function(){return!!this._repaint},b.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},b.vertices.get=function(){return!!this._vertices},b.vertices.set=function(d){this._vertices=d,this._update()},h.prototype._setCacheLimits=function(w,P){a.setCacheLimits(w,P)},b.version.get=function(){return a.version},Object.defineProperties(h.prototype,b),h}(bf);function ed(g){g.parentNode&&g.parentNode.removeChild(g)}var jp={showCompass:!0,showZoom:!0,visualizePitch:!1},Pu=function(h){var b=this;this.options=a.extend({},jp,h),this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(d){return d.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(d){return b._map.zoomIn({},{originalEvent:d})}),l.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(d){return b._map.zoomOut({},{originalEvent:d})}),l.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(d){b.options.visualizePitch?b._map.resetNorthPitch({},{originalEvent:d}):b._map.resetNorth({},{originalEvent:d})}),this._compassIcon=l.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Pu.prototype._updateZoomButtons=function(){var h=this._map.getZoom(),b=h===this._map.getMaxZoom(),d=h===this._map.getMinZoom();this._zoomInButton.disabled=b,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",b.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},Pu.prototype._rotateCompassArrow=function(){var h=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=h},Pu.prototype.onAdd=function(h){return this._map=h,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qo(this._map,this._compass,this.options.visualizePitch)),this._container},Pu.prototype.onRemove=function(){l.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Pu.prototype._createButton=function(h,b){var d=l.create("button",h,this._container);return d.type="button",d.addEventListener("click",b),d},Pu.prototype._setButtonTitle=function(h,b){var d=this._map._getUIString("NavigationControl."+b);h.title=d,h.setAttribute("aria-label",d)};var Qo=function(h,b,d){d===void 0&&(d=!1),this._clickTolerance=10,this.element=b,this.mouseRotate=new Zt({clickTolerance:h.dragRotate._mouseRotate._clickTolerance}),this.map=h,d&&(this.mousePitch=new or({clickTolerance:h.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener(b,"mousedown",this.mousedown),l.addEventListener(b,"touchstart",this.touchstart,{passive:!1}),l.addEventListener(b,"touchmove",this.touchmove),l.addEventListener(b,"touchend",this.touchend),l.addEventListener(b,"touchcancel",this.reset)};Qo.prototype.down=function(h,b){this.mouseRotate.mousedown(h,b),this.mousePitch&&this.mousePitch.mousedown(h,b),l.disableDrag()},Qo.prototype.move=function(h,b){var d=this.map,w=this.mouseRotate.mousemoveWindow(h,b);if(w&&w.bearingDelta&&d.setBearing(d.getBearing()+w.bearingDelta),this.mousePitch){var P=this.mousePitch.mousemoveWindow(h,b);P&&P.pitchDelta&&d.setPitch(d.getPitch()+P.pitchDelta)}},Qo.prototype.off=function(){var h=this.element;l.removeEventListener(h,"mousedown",this.mousedown),l.removeEventListener(h,"touchstart",this.touchstart,{passive:!1}),l.removeEventListener(h,"touchmove",this.touchmove),l.removeEventListener(h,"touchend",this.touchend),l.removeEventListener(h,"touchcancel",this.reset),this.offTemp()},Qo.prototype.offTemp=function(){l.enableDrag(),l.removeEventListener(a.window,"mousemove",this.mousemove),l.removeEventListener(a.window,"mouseup",this.mouseup)},Qo.prototype.mousedown=function(h){this.down(a.extend({},h,{ctrlKey:!0,preventDefault:function(){return h.preventDefault()}}),l.mousePos(this.element,h)),l.addEventListener(a.window,"mousemove",this.mousemove),l.addEventListener(a.window,"mouseup",this.mouseup)},Qo.prototype.mousemove=function(h){this.move(h,l.mousePos(this.element,h))},Qo.prototype.mouseup=function(h){this.mouseRotate.mouseupWindow(h),this.mousePitch&&this.mousePitch.mouseupWindow(h),this.offTemp()},Qo.prototype.touchstart=function(h){h.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=l.touchPos(this.element,h.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return h.preventDefault()}},this._startPos))},Qo.prototype.touchmove=function(h){h.targetTouches.length!==1?this.reset():(this._lastPos=l.touchPos(this.element,h.targetTouches)[0],this.move({preventDefault:function(){return h.preventDefault()}},this._lastPos))},Qo.prototype.touchend=function(h){h.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Qo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Du(g,h,b){if(g=new a.LngLat(g.lng,g.lat),h){var d=new a.LngLat(g.lng-360,g.lat),w=new a.LngLat(g.lng+360,g.lat),P=b.locationPoint(g).distSqr(h);b.locationPoint(d).distSqr(h)<P?g=d:b.locationPoint(w).distSqr(h)<P&&(g=w)}for(;Math.abs(g.lng-b.center.lng)>180;){var F=b.locationPoint(g);if(F.x>=0&&F.y>=0&&F.x<=b.width&&F.y<=b.height)break;g.lng>b.center.lng?g.lng-=360:g.lng+=360}return g}var td={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Jp(g,h,b){var d=g.classList;for(var w in td)d.remove("mapboxgl-"+b+"-anchor-"+w);d.add("mapboxgl-"+b+"-anchor-"+h)}var vh=function(g){function h(b,d){if(g.call(this),(b instanceof a.window.HTMLElement||d)&&(b=a.extend({element:b},d)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=b&&b.anchor||"center",this._color=b&&b.color||"#3FB1CE",this._scale=b&&b.scale||1,this._draggable=b&&b.draggable||!1,this._clickTolerance=b&&b.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=b&&b.rotation||0,this._rotationAlignment=b&&b.rotationAlignment||"auto",this._pitchAlignment=b&&b.pitchAlignment&&b.pitchAlignment!=="auto"?b.pitchAlignment:this._rotationAlignment,!b||!b.element){this._defaultMarker=!0,this._element=l.create("div"),this._element.setAttribute("aria-label","Map marker");var w=l.createNS("http://www.w3.org/2000/svg","svg"),P=41,F=27;w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height",P+"px"),w.setAttributeNS(null,"width",F+"px"),w.setAttributeNS(null,"viewBox","0 0 "+F+" "+P);var G=l.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"stroke-width","1"),G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"fill-rule","evenodd");var K=l.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");var te=l.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(3.0, 29.0)"),te.setAttributeNS(null,"fill","#000000");for(var fe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],we=0,be=fe;we<be.length;we+=1){var Ie=be[we],Ye=l.createNS("http://www.w3.org/2000/svg","ellipse");Ye.setAttributeNS(null,"opacity","0.04"),Ye.setAttributeNS(null,"cx","10.5"),Ye.setAttributeNS(null,"cy","5.80029008"),Ye.setAttributeNS(null,"rx",Ie.rx),Ye.setAttributeNS(null,"ry",Ie.ry),te.appendChild(Ye)}var Ze=l.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"fill",this._color);var Oe=l.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ze.appendChild(Oe);var Xe=l.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"opacity","0.25"),Xe.setAttributeNS(null,"fill","#000000");var ht=l.createNS("http://www.w3.org/2000/svg","path");ht.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Xe.appendChild(ht);var zt=l.createNS("http://www.w3.org/2000/svg","g");zt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),zt.setAttributeNS(null,"fill","#FFFFFF");var qt=l.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Qt=l.createNS("http://www.w3.org/2000/svg","circle");Qt.setAttributeNS(null,"fill","#000000"),Qt.setAttributeNS(null,"opacity","0.25"),Qt.setAttributeNS(null,"cx","5.5"),Qt.setAttributeNS(null,"cy","5.5"),Qt.setAttributeNS(null,"r","5.4999962");var rr=l.createNS("http://www.w3.org/2000/svg","circle");rr.setAttributeNS(null,"fill","#FFFFFF"),rr.setAttributeNS(null,"cx","5.5"),rr.setAttributeNS(null,"cy","5.5"),rr.setAttributeNS(null,"r","5.4999962"),qt.appendChild(Qt),qt.appendChild(rr),K.appendChild(te),K.appendChild(Ze),K.appendChild(Xe),K.appendChild(zt),K.appendChild(qt),w.appendChild(K),w.setAttributeNS(null,"height",P*this._scale+"px"),w.setAttributeNS(null,"width",F*this._scale+"px"),this._element.appendChild(w),this._offset=a.Point.convert(b&&b.offset||[0,-14])}else this._element=b.element,this._offset=a.Point.convert(b&&b.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Yt){Yt.preventDefault()}),this._element.addEventListener("mousedown",function(Yt){Yt.preventDefault()}),Jp(this._element,this._anchor,"marker"),this._popup=null}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.addTo=function(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},h.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),l.remove(this._element),this._popup&&this._popup.remove(),this},h.prototype.getLngLat=function(){return this._lngLat},h.prototype.setLngLat=function(d){return this._lngLat=a.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},h.prototype.getElement=function(){return this._element},h.prototype.setPopup=function(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){var w=38.1,P=13.5,F=Math.sqrt(Math.pow(P,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-w],"bottom-left":[F,(w-P+F)*-1],"bottom-right":[-F,(w-P+F)*-1],left:[P,(w-P)*-1],right:[-P,(w-P)*-1]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},h.prototype._onKeyPress=function(d){var w=d.code,P=d.charCode||d.keyCode;(w==="Space"||w==="Enter"||P===32||P===13)&&this.togglePopup()},h.prototype._onMapClick=function(d){var w=d.originalEvent.target,P=this._element;this._popup&&(w===P||P.contains(w))&&this.togglePopup()},h.prototype.getPopup=function(){return this._popup},h.prototype.togglePopup=function(){var d=this._popup;if(d)d.isOpen()?d.remove():d.addTo(this._map);else return this;return this},h.prototype._update=function(d){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Du(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(w="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var P="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?P="rotateX(0deg)":this._pitchAlignment==="map"&&(P="rotateX("+this._map.getPitch()+"deg)"),(!d||d.type==="moveend")&&(this._pos=this._pos.round()),l.setTransform(this._element,td[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+P+" "+w)}},h.prototype.getOffset=function(){return this._offset},h.prototype.setOffset=function(d){return this._offset=a.Point.convert(d),this._update(),this},h.prototype._onMove=function(d){if(!this._isDragging){var w=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},h.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},h.prototype._addDragHandler=function(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},h.prototype.setDraggable=function(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},h.prototype.isDraggable=function(){return this._draggable},h.prototype.setRotation=function(d){return this._rotation=d||0,this._update(),this},h.prototype.getRotation=function(){return this._rotation},h.prototype.setRotationAlignment=function(d){return this._rotationAlignment=d||"auto",this._update(),this},h.prototype.getRotationAlignment=function(){return this._rotationAlignment},h.prototype.setPitchAlignment=function(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this},h.prototype.getPitchAlignment=function(){return this._pitchAlignment},h}(a.Evented),yy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Af;function rd(g){Af!==void 0?g(Af):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(h){Af=h.state!=="denied",g(Af)}):(Af=!!a.window.navigator.geolocation,g(Af))}var dh=0,sc=!1,I1=function(g){function h(b){g.call(this),this.options=a.extend({},yy,b),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.onAdd=function(d){return this._map=d,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),rd(this._setupUI),this._container},h.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),l.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,dh=0,sc=!1},h.prototype._isOutOfMapMaxBounds=function(d){var w=this._map.getMaxBounds(),P=d.coords;return w&&(P.longitude<w.getWest()||P.longitude>w.getEast()||P.latitude<w.getSouth()||P.latitude>w.getNorth())},h.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},h.prototype._onSuccess=function(d){if(this._map){if(this._isOutOfMapMaxBounds(d)){this._setErrorState(),this.fire(new a.Event("outofmaxbounds",d)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(d),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(d),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",d)),this._finish()}},h.prototype._updateCamera=function(d){var w=new a.LngLat(d.coords.longitude,d.coords.latitude),P=d.coords.accuracy,F=this._map.getBearing(),G=a.extend({bearing:F},this.options.fitBoundsOptions);this._map.fitBounds(w.toBounds(P),G,{geolocateSource:!0})},h.prototype._updateMarker=function(d){if(d){var w=new a.LngLat(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(w).addTo(this._map),this._userLocationDotMarker.setLngLat(w).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},h.prototype._updateCircleRadius=function(){var d=this._map._container.clientHeight/2,w=this._map.unproject([0,d]),P=this._map.unproject([1,d]),F=w.distanceTo(P),G=Math.ceil(2*this._accuracy/F);this._circleElement.style.width=G+"px",this._circleElement.style.height=G+"px"},h.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},h.prototype._onError=function(d){if(this._map){if(this.options.trackUserLocation)if(d.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(d.code===3&&sc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",d)),this._finish()}},h.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},h.prototype._setupUI=function(d){var w=this;if(this._container.addEventListener("contextmenu",function(G){return G.preventDefault()}),this._geolocateButton=l.create("button","mapboxgl-ctrl-geolocate",this._container),l.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",d===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var P=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=P,this._geolocateButton.setAttribute("aria-label",P)}else{var F=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=l.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new vh(this._dotElement),this._circleElement=l.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(G){var K=G.originalEvent&&G.originalEvent.type==="resize";!G.geolocateSource&&w._watchState==="ACTIVE_LOCK"&&!K&&(w._watchState="BACKGROUND",w._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),w._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),w.fire(new a.Event("trackuserlocationend")))})},h.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":dh--,sc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),dh++;var d;dh>1?(d={maximumAge:6e5,timeout:0},sc=!0):(d=this.options.positionOptions,sc=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,d)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},h.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},h}(a.Evented),gy={maxWidth:100,unit:"metric"},lc=function(h){this.options=a.extend({},gy,h),a.bindAll(["_onMove","setUnit"],this)};lc.prototype.getDefaultPosition=function(){return"bottom-left"},lc.prototype._onMove=function(){_y(this._map,this._container,this.options)},lc.prototype.onAdd=function(h){return this._map=h,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",h.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},lc.prototype.onRemove=function(){l.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},lc.prototype.setUnit=function(h){this.options.unit=h,_y(this._map,this._container,this.options)};function _y(g,h,b){var d=b&&b.maxWidth||100,w=g._container.clientHeight/2,P=g.unproject([0,w]),F=g.unproject([d,w]),G=P.distanceTo(F);if(b&&b.unit==="imperial"){var K=3.2808*G;if(K>5280){var te=K/5280;ph(h,d,te,g._getUIString("ScaleControl.Miles"))}else ph(h,d,K,g._getUIString("ScaleControl.Feet"))}else if(b&&b.unit==="nautical"){var fe=G/1852;ph(h,d,fe,g._getUIString("ScaleControl.NauticalMiles"))}else G>=1e3?ph(h,d,G/1e3,g._getUIString("ScaleControl.Kilometers")):ph(h,d,G,g._getUIString("ScaleControl.Meters"))}function ph(g,h,b,d){var w=F1(b),P=w/b;g.style.width=h*P+"px",g.innerHTML=w+"&nbsp;"+d}function R1(g){var h=Math.pow(10,Math.ceil(-Math.log(g)/Math.LN10));return Math.round(g*h)/h}function F1(g){var h=Math.pow(10,(""+Math.floor(g)).length-1),b=g/h;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:R1(b),h*b}var al=function(h){this._fullscreen=!1,h&&h.container&&(h.container instanceof a.window.HTMLElement?this._container=h.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};al.prototype.onAdd=function(h){return this._map=h,this._container||(this._container=this._map.getContainer()),this._controlContainer=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},al.prototype.onRemove=function(){l.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},al.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},al.prototype._setupUI=function(){var h=this._fullscreenButton=l.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);l.create("span","mapboxgl-ctrl-icon",h).setAttribute("aria-hidden",!0),h.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},al.prototype._updateTitle=function(){var h=this._getTitle();this._fullscreenButton.setAttribute("aria-label",h),this._fullscreenButton.title=h},al.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},al.prototype._isFullscreen=function(){return this._fullscreen},al.prototype._changeIcon=function(){var h=a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement;h===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},al.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var q1={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},N1=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),A3=function(g){function h(b){g.call(this),this.options=a.extend(Object.create(q1),b),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return g&&(h.__proto__=g),h.prototype=Object.create(g&&g.prototype),h.prototype.constructor=h,h.prototype.addTo=function(d){return this._map&&this.remove(),this._map=d,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},h.prototype.isOpen=function(){return!!this._map},h.prototype.remove=function(){return this._content&&l.remove(this._content),this._container&&(l.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},h.prototype.getLngLat=function(){return this._lngLat},h.prototype.setLngLat=function(d){return this._lngLat=a.LngLat.convert(d),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},h.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},h.prototype.getElement=function(){return this._container},h.prototype.setText=function(d){return this.setDOMContent(a.window.document.createTextNode(d))},h.prototype.setHTML=function(d){var w=a.window.document.createDocumentFragment(),P=a.window.document.createElement("body"),F;for(P.innerHTML=d;F=P.firstChild,!!F;)w.appendChild(F);return this.setDOMContent(w)},h.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},h.prototype.setMaxWidth=function(d){return this.options.maxWidth=d,this._update(),this},h.prototype.setDOMContent=function(d){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=l.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(d),this._createCloseButton(),this._update(),this._focusFirstElement(),this},h.prototype.addClassName=function(d){this._container&&this._container.classList.add(d)},h.prototype.removeClassName=function(d){this._container&&this._container.classList.remove(d)},h.prototype.setOffset=function(d){return this.options.offset=d,this._update(),this},h.prototype.toggleClassName=function(d){if(this._container)return this._container.classList.toggle(d)},h.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=l.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},h.prototype._onMouseUp=function(d){this._update(d.point)},h.prototype._onMouseMove=function(d){this._update(d.point)},h.prototype._onDrag=function(d){this._update(d.point)},h.prototype._update=function(d){var w=this,P=this._lngLat||this._trackPointer;if(!(!this._map||!P||!this._content)&&(this._container||(this._container=l.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=l.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ie){return w._container.classList.add(Ie)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Du(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!d))){var F=this._pos=this._trackPointer&&d?d:this._map.project(this._lngLat),G=this.options.anchor,K=B1(this.options.offset);if(!G){var te=this._container.offsetWidth,fe=this._container.offsetHeight,we;F.y+K.bottom.y<fe?we=["top"]:F.y>this._map.transform.height-fe?we=["bottom"]:we=[],F.x<te/2?we.push("left"):F.x>this._map.transform.width-te/2&&we.push("right"),we.length===0?G="bottom":G=we.join("-")}var be=F.add(K[G]).round();l.setTransform(this._container,td[G]+" translate("+be.x+"px,"+be.y+"px)"),Jp(this._container,G,"popup")}},h.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var d=this._container.querySelector(N1);d&&d.focus()}},h.prototype._onClose=function(){this.remove()},h}(a.Evented);function B1(g){if(g)if(typeof g=="number"){var h=Math.round(Math.sqrt(.5*Math.pow(g,2)));return{center:new a.Point(0,0),top:new a.Point(0,g),"top-left":new a.Point(h,h),"top-right":new a.Point(-h,h),bottom:new a.Point(0,-g),"bottom-left":new a.Point(h,-h),"bottom-right":new a.Point(-h,-h),left:new a.Point(g,0),right:new a.Point(-g,0)}}else if(g instanceof a.Point||Array.isArray(g)){var b=a.Point.convert(g);return{center:b,top:b,"top-left":b,"top-right":b,bottom:b,"bottom-left":b,"bottom-right":b,left:b,right:b}}else return{center:a.Point.convert(g.center||[0,0]),top:a.Point.convert(g.top||[0,0]),"top-left":a.Point.convert(g["top-left"]||[0,0]),"top-right":a.Point.convert(g["top-right"]||[0,0]),bottom:a.Point.convert(g.bottom||[0,0]),"bottom-left":a.Point.convert(g["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(g["bottom-right"]||[0,0]),left:a.Point.convert(g.left||[0,0]),right:a.Point.convert(g.right||[0,0])};else return B1(new a.Point(0,0))}var wn={version:a.version,supported:s,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:my,NavigationControl:Pu,GeolocateControl:I1,AttributionControl:Ma,ScaleControl:lc,FullscreenControl:al,Popup:A3,Marker:vh,Style:Cs,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:Br,clearPrewarmedResources:ca,get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(g){a.config.ACCESS_TOKEN=g},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(g){a.config.API_URL=g},get workerCount(){return tr.workerCount},set workerCount(g){tr.workerCount=g},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){a.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage:function(h){a.clearTileCache(h)},workerUrl:""};return wn}),r})});var YH=he((w3e,ZH)=>{ZH.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}});var a3=he(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var Js=63710088e-1,IA={centimeters:Js*100,centimetres:Js*100,degrees:360/(2*Math.PI),feet:Js*3.28084,inches:Js*39.37,kilometers:Js/1e3,kilometres:Js/1e3,meters:Js,metres:Js,miles:Js/1609.344,millimeters:Js*1e3,millimetres:Js*1e3,nauticalmiles:Js/1852,radians:1,yards:Js*1.0936},zA={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function fv(e,t,r={}){let i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}function gpe(e,t,r={}){switch(e){case"Point":return RA(t).geometry;case"LineString":return qA(t).geometry;case"Polygon":return FA(t).geometry;case"MultiPoint":return XH(t).geometry;case"MultiLineString":return WH(t).geometry;case"MultiPolygon":return jH(t).geometry;default:throw new Error(e+" is invalid")}}function RA(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!t3(e[0])||!t3(e[1]))throw new Error("coordinates must contain numbers");return fv({type:"Point",coordinates:e},t,r)}function _pe(e,t,r={}){return r3(e.map(i=>RA(i,t)),r)}function FA(e,t,r={}){for(let a of e){if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(a[a.length-1].length!==a[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return fv({type:"Polygon",coordinates:e},t,r)}function xpe(e,t,r={}){return r3(e.map(i=>FA(i,t)),r)}function qA(e,t,r={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return fv({type:"LineString",coordinates:e},t,r)}function bpe(e,t,r={}){return r3(e.map(i=>qA(i,t)),r)}function r3(e,t={}){let r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function WH(e,t,r={}){return fv({type:"MultiLineString",coordinates:e},t,r)}function XH(e,t,r={}){return fv({type:"MultiPoint",coordinates:e},t,r)}function jH(e,t,r={}){return fv({type:"MultiPolygon",coordinates:e},t,r)}function wpe(e,t,r={}){return fv({type:"GeometryCollection",geometries:e},t,r)}function Tpe(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");let r=Math.pow(10,t||0);return Math.round(e*r)/r}function JH(e,t="kilometers"){let r=IA[t];if(!r)throw new Error(t+" units is invalid");return e*r}function NA(e,t="kilometers"){let r=IA[t];if(!r)throw new Error(t+" units is invalid");return e/r}function Ape(e,t){return KH(NA(e,t))}function Mpe(e){let t=e%360;return t<0&&(t+=360),t}function Spe(e){return e=e%360,e>0?e>180?e-360:e:e<-180?e+360:e}function KH(e){return e%(2*Math.PI)*180/Math.PI}function kpe(e){return e%360*Math.PI/180}function Cpe(e,t="kilometers",r="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return JH(NA(e,t),r)}function Epe(e,t="meters",r="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");let i=zA[t];if(!i)throw new Error("invalid original units");let a=zA[r];if(!a)throw new Error("invalid final units");return e/i*a}function t3(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Lpe(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Ppe(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!t3(t))throw new Error("bbox must only contain numbers")})}function Dpe(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}Si.areaFactors=zA;Si.azimuthToBearing=Spe;Si.bearingToAzimuth=Mpe;Si.convertArea=Epe;Si.convertLength=Cpe;Si.degreesToRadians=kpe;Si.earthRadius=Js;Si.factors=IA;Si.feature=fv;Si.featureCollection=r3;Si.geometry=gpe;Si.geometryCollection=wpe;Si.isNumber=t3;Si.isObject=Lpe;Si.lengthToDegrees=Ape;Si.lengthToRadians=NA;Si.lineString=qA;Si.lineStrings=bpe;Si.multiLineString=WH;Si.multiPoint=XH;Si.multiPolygon=jH;Si.point=RA;Si.points=_pe;Si.polygon=FA;Si.polygons=xpe;Si.radiansToDegrees=KH;Si.radiansToLength=JH;Si.round=Tpe;Si.validateBBox=Ppe;Si.validateId=Dpe});var n3=he(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});var fs=a3();function C1(e,t,r){if(e!==null)for(var i,a,s,l,u,c,v,m=0,_=0,T,M=e.type,k=M==="FeatureCollection",L=M==="Feature",E=k?e.features.length:1,I=0;I<E;I++){v=k?e.features[I].geometry:L?e.geometry:e,T=v?v.type==="GeometryCollection":!1,u=T?v.geometries.length:1;for(var R=0;R<u;R++){var N=0,z=0;if(l=T?v.geometries[R]:v,l!==null){c=l.coordinates;var B=l.type;switch(m=r&&(B==="Polygon"||B==="MultiPolygon")?1:0,B){case null:break;case"Point":if(t(c,_,I,N,z)===!1)return!1;_++,N++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(t(c[i],_,I,N,z)===!1)return!1;_++,B==="MultiPoint"&&N++}B==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(a=0;a<c[i].length-m;a++){if(t(c[i][a],_,I,N,z)===!1)return!1;_++}B==="MultiLineString"&&N++,B==="Polygon"&&z++}B==="Polygon"&&N++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(z=0,a=0;a<c[i].length;a++){for(s=0;s<c[i][a].length-m;s++){if(t(c[i][a][s],_,I,N,z)===!1)return!1;_++}z++}N++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(C1(l.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function zpe(e,t,r,i){var a=r;return C1(e,function(s,l,u,c,v){l===0&&r===void 0?a=s:a=t(a,s,l,u,c,v)},i),a}function QH(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function Ipe(e,t,r){var i=r;return QH(e,function(a,s){s===0&&r===void 0?i=a:i=t(i,a,s)}),i}function $H(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function Rpe(e,t,r){var i=r;return $H(e,function(a,s){s===0&&r===void 0?i=a:i=t(i,a,s)}),i}function Fpe(e){var t=[];return C1(e,function(r){t.push(r)}),t}function BA(e,t){var r,i,a,s,l,u,c,v,m,_,T=0,M=e.type==="FeatureCollection",k=e.type==="Feature",L=M?e.features.length:1;for(r=0;r<L;r++){for(u=M?e.features[r].geometry:k?e.geometry:e,v=M?e.features[r].properties:k?e.properties:{},m=M?e.features[r].bbox:k?e.bbox:void 0,_=M?e.features[r].id:k?e.id:void 0,c=u?u.type==="GeometryCollection":!1,l=c?u.geometries.length:1,a=0;a<l;a++){if(s=c?u.geometries[a]:u,s===null){if(t(null,T,v,m,_)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,T,v,m,_)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],T,v,m,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}function qpe(e,t,r){var i=r;return BA(e,function(a,s,l,u,c){s===0&&r===void 0?i=a:i=t(i,a,s,l,u,c)}),i}function i3(e,t){BA(e,function(r,i,a,s,l){var u=r===null?null:r.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(fs.feature.call(void 0,r,a,{bbox:s,id:l}),i,0)===!1?!1:void 0}var c;switch(u){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var v=0;v<r.coordinates.length;v++){var m=r.coordinates[v],_={type:c,coordinates:m};if(t(fs.feature.call(void 0,_,a),i,v)===!1)return!1}})}function Npe(e,t,r){var i=r;return i3(e,function(a,s,l){s===0&&l===0&&r===void 0?i=a:i=t(i,a,s,l)}),i}function eG(e,t){i3(e,function(r,i,a){var s=0;if(r.geometry){var l=r.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var u,c=0,v=0,m=0;if(C1(r,function(_,T,M,k,L){if(u===void 0||i>c||k>v||L>m){u=_,c=i,v=k,m=L,s=0;return}var E=fs.lineString.call(void 0,[u,_],r.properties);if(t(E,i,a,L,s)===!1)return!1;s++,u=_})===!1)return!1}}})}function Bpe(e,t,r){var i=r,a=!1;return eG(e,function(s,l,u,c,v){a===!1&&r===void 0?i=s:i=t(i,s,l,u,c,v),a=!0}),i}function tG(e,t){if(!e)throw new Error("geojson is required");i3(e,function(r,i,a){if(r.geometry!==null){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(t(r,i,a,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<l.length;u++)if(t(fs.lineString.call(void 0,l[u],r.properties),i,a,u)===!1)return!1;break}}})}function Ope(e,t,r){var i=r;return tG(e,function(a,s,l,u){s===0&&r===void 0?i=a:i=t(i,a,s,l,u)}),i}function Upe(e,t){if(t=t||{},!fs.isObject.call(void 0,t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.segmentIndex||0,l=t.properties,u;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,u=e.features[r].geometry;break;case"Feature":l=l||e.properties,u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var c=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),fs.lineString.call(void 0,[c[s],c[s+1]],l,t);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),fs.lineString.call(void 0,[c[a][s],c[a][s+1]],l,t);case"MultiLineString":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s-1),fs.lineString.call(void 0,[c[i][s],c[i][s+1]],l,t);case"MultiPolygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),s<0&&(s=c[i][a].length-s-1),fs.lineString.call(void 0,[c[i][a][s],c[i][a][s+1]],l,t)}throw new Error("geojson is invalid")}function Vpe(e,t){if(t=t||{},!fs.isObject.call(void 0,t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.coordIndex||0,l=t.properties,u;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,u=e.features[r].geometry;break;case"Feature":l=l||e.properties,u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var c=u.coordinates;switch(u.type){case"Point":return fs.point.call(void 0,c,l,t);case"MultiPoint":return i<0&&(i=c.length+i),fs.point.call(void 0,c[i],l,t);case"LineString":return s<0&&(s=c.length+s),fs.point.call(void 0,c[s],l,t);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),fs.point.call(void 0,c[a][s],l,t);case"MultiLineString":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s),fs.point.call(void 0,c[i][s],l,t);case"MultiPolygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),s<0&&(s=c[i][a].length-s),fs.point.call(void 0,c[i][a][s],l,t)}throw new Error("geojson is invalid")}po.coordAll=Fpe;po.coordEach=C1;po.coordReduce=zpe;po.featureEach=$H;po.featureReduce=Rpe;po.findPoint=Vpe;po.findSegment=Upe;po.flattenEach=i3;po.flattenReduce=Npe;po.geomEach=BA;po.geomReduce=qpe;po.lineEach=tG;po.lineReduce=Ope;po.propEach=QH;po.propReduce=Ipe;po.segmentEach=eG;po.segmentReduce=Bpe});var oG=he(o3=>{"use strict";Object.defineProperty(o3,"__esModule",{value:!0});var rG=a3(),Hpe=n3();function nG(e){return Hpe.geomReduce.call(void 0,e,(t,r)=>t+Gpe(r),0)}function Gpe(e){let t=0,r;switch(e.type){case"Polygon":return aG(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=aG(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function aG(e){let t=0;if(e&&e.length>0){t+=Math.abs(iG(e[0]));for(let r=1;r<e.length;r++)t-=Math.abs(iG(e[r]))}return t}var Zpe=rG.earthRadius*rG.earthRadius/2,OA=Math.PI/180;function iG(e){let t=e.length-1;if(t<=2)return 0;let r=0,i=0;for(;i<t;){let a=e[i],s=e[i+1===t?0:i+1],l=e[i+2>=t?(i+2)%t:i+2],u=a[0]*OA,c=s[1]*OA,v=l[0]*OA;r+=(v-u)*Math.sin(c),i++}return r*Zpe}var Ype=nG;o3.area=nG;o3.default=Ype});var lG=he(s3=>{"use strict";Object.defineProperty(s3,"__esModule",{value:!0});var Wpe=a3(),Xpe=n3();function sG(e,t={}){let r=0,i=0,a=0;return Xpe.coordEach.call(void 0,e,function(s){r+=s[0],i+=s[1],a++},!0),Wpe.point.call(void 0,[r/a,i/a],t.properties)}var jpe=sG;s3.centroid=sG;s3.default=jpe});var fG=he(l3=>{"use strict";Object.defineProperty(l3,"__esModule",{value:!0});var Jpe=n3();function uG(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let r=[1/0,1/0,-1/0,-1/0];return Jpe.coordEach.call(void 0,e,i=>{r[0]>i[0]&&(r[0]=i[0]),r[1]>i[1]&&(r[1]=i[1]),r[2]<i[0]&&(r[2]=i[0]),r[3]<i[1]&&(r[3]=i[1])}),r}var Kpe=uG;l3.bbox=uG;l3.default=Kpe});var UA=he((C3e,pG)=>{"use strict";var Qpe=Ka(),vG=YH(),{area:$pe}=oG(),{centroid:e0e}=lG(),{bbox:t0e}=fG(),cG=B_(),zm=Ch(),r0e=dc(),a0e=Fy(),u3=kx(),hG=Object.keys(vG),i0e={"ISO-3":cG,"USA-states":cG,"country names":n0e};function n0e(e){for(var t=0;t<hG.length;t++){var r=hG[t],i=new RegExp(vG[r]);if(i.test(e.trim().toLowerCase()))return r}return zm.log("Unrecognized country name: "+e+"."),!1}function o0e(e,t,r){if(!t||typeof t!="string")return!1;var i=i0e[e](t),a,s,l;if(i){if(e==="USA-states")for(a=[],l=0;l<r.length;l++)s=r[l],s.properties&&s.properties.gu&&s.properties.gu==="USA"&&a.push(s);else a=r;for(l=0;l<a.length;l++)if(s=a[l],s.id===i)return s;zm.log(["Location with id",i,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function s0e(e){var t=e.geometry,r=t.coordinates,i=e.id,a=[],s,l,u,c;function v(m){for(var _=0;_<m.length-1;_++)if(m[_][0]>0&&m[_+1][0]<0)return _;return null}switch(i==="RUS"||i==="FJI"?s=function(m){var _;if(v(m)===null)_=m;else for(_=new Array(m.length),c=0;c<m.length;c++)_[c]=[m[c][0]<0?m[c][0]+360:m[c][0],m[c][1]];a.push(u3.tester(_))}:i==="ATA"?s=function(m){var _=v(m);if(_===null)return a.push(u3.tester(m));var T=new Array(m.length+1),M=0;for(c=0;c<m.length;c++)c>_?T[M++]=[m[c][0]+360,m[c][1]]:c===_?(T[M++]=m[c],T[M++]=[m[c][0],-90]):T[M++]=m[c];var k=u3.tester(T);k.pts.pop(),a.push(k)}:s=function(m){a.push(u3.tester(m))},t.type){case"MultiPolygon":for(l=0;l<r.length;l++)for(u=0;u<r[l].length;u++)s(r[l][u]);break;case"Polygon":for(l=0;l<r.length;l++)s(r[l]);break}return a}function dG(e){var t=e.geojson,r=window.PlotlyGeoAssets||{},i=typeof t=="string"?r[t]:t;return r0e(i)?i:(zm.error("Oops ... something went wrong when fetching "+t),!1)}function l0e(e){var t=e[0].trace,r=dG(t);if(!r)return!1;var i={},a=[],s;for(s=0;s<t._length;s++){var l=e[s];(l.loc||l.loc===0)&&(i[l.loc]=l)}function u(m){var _=a0e(m,t.featureidkey||"id").get(),T=i[_];if(T){var M=m.geometry;if(M.type==="Polygon"||M.type==="MultiPolygon"){var k={type:"Feature",id:_,geometry:M,properties:{}};k.geometry.coordinates.length>0?k.properties.ct=u0e(k):k.properties.ct=[NaN,NaN],T.fIn=m,T.fOut=k,a.push(k)}else zm.log(["Location",T.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete i[_]}switch(r.type){case"FeatureCollection":var c=r.features;for(s=0;s<c.length;s++)u(c[s]);break;case"Feature":u(r);break;default:return zm.warn(["Invalid GeoJSON type",(r.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var v in i)zm.log(["Location *"+v+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return a}function u0e(e){var t=e.geometry,r;if(t.type==="MultiPolygon")for(var i=t.coordinates,a=0,s=0;s<i.length;s++){var l={type:"Polygon",coordinates:i[s]},u=$pe(l);u>a&&(a=u,r=l)}else r=t;return e0e(r).geometry.coordinates}function f0e(e){var t=window.PlotlyGeoAssets||{},r=[];function i(c){return new Promise(function(v,m){Qpe.json(c,function(_,T){if(_){delete t[c];var M=_.status===404?'GeoJSON at URL "'+c+'" does not exist.':"Unexpected error while fetching from "+c;return m(new Error(M))}return t[c]=T,v(T)})})}function a(c){return new Promise(function(v,m){var _=0,T=setInterval(function(){if(t[c]&&t[c]!=="pending")return clearInterval(T),v(t[c]);if(_>100)return clearInterval(T),m("Unexpected error while fetching from "+c);_++},50)})}for(var s=0;s<e.length;s++){var l=e[s][0].trace,u=l.geojson;typeof u=="string"&&(t[u]?t[u]==="pending"&&r.push(a(u)):(t[u]="pending",r.push(i(u))))}return r}function c0e(e){return t0e(e)}pG.exports={locationToFeature:o0e,feature2polygons:s0e,getTraceGeojson:dG,extractTraceFeature:l0e,fetchTraceGeoData:f0e,computeBbox:c0e}});var xG=he((E3e,_G)=>{"use strict";var tp=Nt(),h0e=ho().sanitizeHTML,v0e=SA(),mG=qc();function yG(e,t){this.subplot=e,this.uid=e.uid+"-"+t,this.index=t,this.idSource="source-"+this.uid,this.idLayer=mG.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var mu=yG.prototype;mu.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=f3(t)};mu.needsNewImage=function(e){var t=this.subplot.map;return t.getSource(this.idSource)&&this.sourceType==="image"&&e.sourcetype==="image"&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))};mu.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type};mu.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};mu.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};mu.updateImage=function(e){var t=this.subplot.map;t.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)};mu.updateSource=function(e){var t=this.subplot.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,!!f3(e)){var r=d0e(e);t.addSource(this.idSource,r)}};mu.findFollowingMapboxLayerId=function(e){if(e==="traces")for(var t=this.subplot.getMapLayers(),r=0;r<t.length;r++){var i=t[r].id;if(typeof i=="string"&&i.indexOf(mG.traceLayerPrefix)===0){e=i;break}}return e};mu.updateLayer=function(e){var t=this.subplot,r=gG(e),i=this.lookupBelow(),a=this.findFollowingMapboxLayerId(i);this.removeLayer(),f3(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:r.layout,paint:r.paint},a),this.layerType=e.type,this.below=i};mu.updateStyle=function(e){if(f3(e)){var t=gG(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}};mu.removeLayer=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)};mu.dispose=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer),e.getSource(this.idSource)&&e.removeSource(this.idSource)};function f3(e){if(!e.visible)return!1;var t=e.source;if(Array.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++)if(typeof t[r]!="string"||t[r].length===0)return!1;return!0}return tp.isPlainObject(t)||typeof t=="string"&&t.length>0}function gG(e){var t={},r={};switch(e.type){case"circle":tp.extendFlat(r,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":tp.extendFlat(r,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":tp.extendFlat(r,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var i=e.symbol,a=v0e(i.textposition,i.iconsize);tp.extendFlat(t,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":a.anchor,"text-offset":a.offset,"symbol-placement":i.placement}),tp.extendFlat(r,{"icon-color":e.color,"text-color":i.textfont.color,"text-opacity":e.opacity});break;case"raster":tp.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":e.opacity});break}return{layout:t,paint:r}}function d0e(e){var t=e.sourcetype,r=e.source,i={type:t},a;return t==="geojson"?a="data":t==="vector"?a=typeof r=="string"?"url":"tiles":t==="raster"?(a="tiles",i.tileSize=256):t==="image"&&(a="url",i.coordinates=e.coordinates),i[a]=r,e.sourceattribution&&(i.attribution=h0e(e.sourceattribution)),i}_G.exports=function(t,r,i){var a=new yG(t,r);return a.update(i),a}});var EG=he((L3e,CG)=>{"use strict";var VA=DA(),HA=Nt(),AG=UA(),bG=sa(),p0e=Ii(),m0e=$l(),c3=Bf(),MG=Nd(),y0e=MG.drawMode,g0e=MG.selectMode,_0e=Vf().prepSelect,x0e=Vf().clearOutline,b0e=Vf().clearSelectionsCache,w0e=Vf().selectOnClick,cv=qc(),T0e=xG();function SG(e,t){this.id=t,this.gd=e;var r=e._fullLayout,i=e._context;this.container=r._glcontainer.node(),this.isStatic=i.staticPlot,this.uid=r._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(r),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var Gn=SG.prototype;Gn.plot=function(e,t,r){var i=this,a=t[i.id];i.map&&a.accesstoken!==i.accessToken&&(i.map.remove(),i.map=null,i.styleObj=null,i.traceHash={},i.layerList=[]);var s;i.map?s=new Promise(function(l,u){i.updateMap(e,t,l,u)}):s=new Promise(function(l,u){i.createMap(e,t,l,u)}),r.push(s)};Gn.createMap=function(e,t,r,i){var a=this,s=t[a.id],l=a.styleObj=kG(s.style,t);a.accessToken=s.accesstoken;var u=s.bounds,c=u?[[u.west,u.south],[u.east,u.north]]:null,v=a.map=new VA.Map({container:a.div,style:l.style,center:GA(s.center),zoom:s.zoom,bearing:s.bearing,pitch:s.pitch,maxBounds:c,interactive:!a.isStatic,preserveDrawingBuffer:a.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new VA.AttributionControl({compact:!0}));v._canvas.style.left="0px",v._canvas.style.top="0px",a.rejectOnError(i),a.isStatic||a.initFx(e,t);var m=[];m.push(new Promise(function(_){v.once("load",_)})),m=m.concat(AG.fetchTraceGeoData(e)),Promise.all(m).then(function(){a.fillBelowLookup(e,t),a.updateData(e),a.updateLayout(t),a.resolveOnRender(r)}).catch(i)};Gn.updateMap=function(e,t,r,i){var a=this,s=a.map,l=t[this.id];a.rejectOnError(i);var u=[],c=kG(l.style,t);JSON.stringify(a.styleObj)!==JSON.stringify(c)&&(a.styleObj=c,s.setStyle(c.style),a.traceHash={},u.push(new Promise(function(v){s.once("styledata",v)}))),u=u.concat(AG.fetchTraceGeoData(e)),Promise.all(u).then(function(){a.fillBelowLookup(e,t),a.updateData(e),a.updateLayout(t),a.resolveOnRender(r)}).catch(i)};Gn.fillBelowLookup=function(e,t){var r=t[this.id],i=r.layers,a,s,l=this.belowLookup={},u=!1;for(a=0;a<e.length;a++){var c=e[a][0].trace,v=c._module;typeof c.below=="string"?s=c.below:v.getBelow&&(s=v.getBelow(c,this)),s===""&&(u=!0),l["trace-"+c.uid]=s||""}for(a=0;a<i.length;a++){var m=i[a];typeof m.below=="string"?s=m.below:u?s="traces":s="",l["layout-"+a]=s}var _={},T,M;for(T in l)s=l[T],_[s]?_[s].push(T):_[s]=[T];for(s in _){var k=_[s];if(k.length>1)for(a=0;a<k.length;a++)T=k[a],T.indexOf("trace-")===0?(M=T.split("trace-")[1],this.traceHash[M]&&(this.traceHash[M].below=null)):T.indexOf("layout-")===0&&(M=T.split("layout-")[1],this.layerList[M]&&(this.layerList[M].below=null))}};var wG={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};Gn.updateData=function(e){var t=this.traceHash,r,i,a,s,l=e.slice().sort(function(_,T){return wG[_[0].trace.type]-wG[T[0].trace.type]});for(a=0;a<l.length;a++){var u=l[a];i=u[0].trace,r=t[i.uid];var c=!1;r&&(r.type===i.type?(r.update(u),c=!0):r.dispose()),!c&&i._module&&(t[i.uid]=i._module.plot(this,u))}var v=Object.keys(t);e:for(a=0;a<v.length;a++){var m=v[a];for(s=0;s<e.length;s++)if(i=e[s][0].trace,m===i.uid)continue e;r=t[m],r.dispose(),delete t[m]}};Gn.updateLayout=function(e){var t=this.map,r=e[this.id];!this.dragging&&!this.wheeling&&(t.setCenter(GA(r.center)),t.setZoom(r.zoom),t.setBearing(r.bearing),t.setPitch(r.pitch)),this.updateLayers(e),this.updateFramework(e),this.updateFx(e),this.map.resize(),this.gd._context._scrollZoom.mapbox?t.scrollZoom.enable():t.scrollZoom.disable()};Gn.resolveOnRender=function(e){var t=this.map;t.on("render",function r(){t.loaded()&&(t.off("render",r),setTimeout(e,10))})};Gn.rejectOnError=function(e){var t=this.map;function r(){e(new Error(cv.mapOnErrorMsg))}t.once("error",r),t.once("style.error",r),t.once("source.error",r),t.once("tile.error",r),t.once("layer.error",r)};Gn.createFramework=function(e){var t=this,r=t.div=document.createElement("div");r.id=t.uid,r.style.position="absolute",t.container.appendChild(r),t.xaxis={_id:"x",c2p:function(i){return t.project(i).x}},t.yaxis={_id:"y",c2p:function(i){return t.project(i).y}},t.updateFramework(e),t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},p0e.setConvert(t.mockAxis,e)};Gn.initFx=function(e,t){var r=this,i=r.gd,a=r.map;a.on("moveend",function(u){if(r.map){var c=i._fullLayout;if(u.originalEvent||r.wheeling){var v=c[r.id];bG.call("_storeDirectGUIEdit",i.layout,c._preGUI,r.getViewEdits(v));var m=r.getView();v._input.center=v.center=m.center,v._input.zoom=v.zoom=m.zoom,v._input.bearing=v.bearing=m.bearing,v._input.pitch=v.pitch=m.pitch,i.emit("plotly_relayout",r.getViewEditsWithDerived(m))}u.originalEvent&&u.originalEvent.type==="mouseup"?r.dragging=!1:r.wheeling&&(r.wheeling=!1),c._rehover&&c._rehover()}}),a.on("wheel",function(){r.wheeling=!0}),a.on("mousemove",function(u){var c=r.div.getBoundingClientRect(),v=[u.originalEvent.offsetX,u.originalEvent.offsetY];u.target.getBoundingClientRect=function(){return c},r.xaxis.p2c=function(){return a.unproject(v).lng},r.yaxis.p2c=function(){return a.unproject(v).lat},i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===r.id&&i._fullLayout[r.id]&&c3.hover(i,u,r.id)},c3.hover(i,u,r.id),i._fullLayout._hoversubplot=r.id});function s(){c3.loneUnhover(t._hoverlayer)}a.on("dragstart",function(){r.dragging=!0,s()}),a.on("zoomstart",s),a.on("mouseout",function(){i._fullLayout._hoversubplot=null});function l(){var u=r.getView();i.emit("plotly_relayouting",r.getViewEditsWithDerived(u))}a.on("drag",l),a.on("zoom",l),a.on("dblclick",function(){var u=i._fullLayout[r.id];bG.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,r.getViewEdits(u));var c=r.viewInitial;a.setCenter(GA(c.center)),a.setZoom(c.zoom),a.setBearing(c.bearing),a.setPitch(c.pitch);var v=r.getView();u._input.center=u.center=v.center,u._input.zoom=u.zoom=v.zoom,u._input.bearing=u.bearing=v.bearing,u._input.pitch=u.pitch=v.pitch,i.emit("plotly_doubleclick",null),i.emit("plotly_relayout",r.getViewEditsWithDerived(v))}),r.clearOutline=function(){b0e(r.dragOptions),x0e(r.dragOptions.gd)},r.onClickInPanFn=function(u){return function(c){var v=i._fullLayout.clickmode;v.indexOf("select")>-1&&w0e(c.originalEvent,i,[r.xaxis],[r.yaxis],r.id,u),v.indexOf("event")>-1&&c3.click(i,c.originalEvent)}}};Gn.updateFx=function(e){var t=this,r=t.map,i=t.gd;if(t.isStatic)return;function a(c){var v=t.map.unproject(c);return[v.lng,v.lat]}var s=e.dragmode,l;l=function(c,v){if(v.isRect){var m=c.range={};m[t.id]=[a([v.xmin,v.ymin]),a([v.xmax,v.ymax])]}else{var _=c.lassoPoints={};_[t.id]=v.map(a)}};var u=t.dragOptions;t.dragOptions=HA.extendDeep(u||{},{dragmode:e.dragmode,element:t.div,gd:i,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:l},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),r.off("click",t.onClickInPanHandler),g0e(s)||y0e(s)?(r.dragPan.disable(),r.on("zoomstart",t.clearOutline),t.dragOptions.prepFn=function(c,v,m){_0e(c,v,m,t.dragOptions,s)},m0e.init(t.dragOptions)):(r.dragPan.enable(),r.off("zoomstart",t.clearOutline),t.div.onmousedown=null,t.div.ontouchstart=null,t.div.removeEventListener("touchstart",t.div._ontouchstart),t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),r.on("click",t.onClickInPanHandler))};Gn.updateFramework=function(e){var t=e[this.id].domain,r=e._size,i=this.div.style;i.width=r.w*(t.x[1]-t.x[0])+"px",i.height=r.h*(t.y[1]-t.y[0])+"px",i.left=r.l+t.x[0]*r.w+"px",i.top=r.t+(1-t.y[1])*r.h+"px",this.xaxis._offset=r.l+t.x[0]*r.w,this.xaxis._length=r.w*(t.x[1]-t.x[0]),this.yaxis._offset=r.t+(1-t.y[1])*r.h,this.yaxis._length=r.h*(t.y[1]-t.y[0])};Gn.updateLayers=function(e){var t=e[this.id],r=t.layers,i=this.layerList,a;if(r.length!==i.length){for(a=0;a<i.length;a++)i[a].dispose();for(i=this.layerList=[],a=0;a<r.length;a++)i.push(T0e(this,a,r[a]))}else for(a=0;a<r.length;a++)i[a].update(r[a])};Gn.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};Gn.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()};Gn.setOptions=function(e,t,r){for(var i in r)this.map[t](e,i,r[i])};Gn.getMapLayers=function(){return this.map.getStyle().layers};Gn.addLayer=function(e,t){var r=this.map;if(typeof t=="string"){if(t===""){r.addLayer(e,t);return}for(var i=this.getMapLayers(),a=0;a<i.length;a++)if(t===i[a].id){r.addLayer(e,t);return}HA.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}r.addLayer(e)};Gn.project=function(e){return this.map.project(new VA.LngLat(e[0],e[1]))};Gn.getView=function(){var e=this.map,t=e.getCenter(),r=t.lng,i=t.lat,a={lon:r,lat:i},s=e.getCanvas(),l=parseInt(s.style.width),u=parseInt(s.style.height);return{center:a,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([l,0]).toArray(),e.unproject([l,u]).toArray(),e.unproject([0,u]).toArray()]}}};Gn.getViewEdits=function(e){for(var t=this.id,r=["center","zoom","bearing","pitch"],i={},a=0;a<r.length;a++){var s=r[a];i[t+"."+s]=e[s]}return i};Gn.getViewEditsWithDerived=function(e){var t=this.id,r=this.getViewEdits(e);return r[t+"._derived"]=e._derived,r};function kG(e,t){var r={};if(HA.isPlainObject(e))r.id=e.id,r.style=e;else if(typeof e=="string")if(r.id=e,cv.styleValuesMapbox.indexOf(e)!==-1)r.style=TG(e);else if(cv.stylesNonMapbox[e]){r.style=cv.stylesNonMapbox[e];var i=r.style.sources["plotly-"+e],a=i?i.tiles:void 0;a&&a[0]&&a[0].slice(-9)==="?api_key="&&(a[0]+=t._mapboxAccessToken)}else r.style=e;else r.id=cv.styleValueDflt,r.style=TG(cv.styleValueDflt);return r.transition={duration:0,delay:0},r}function TG(e){return cv.styleUrlPrefix+e+"-"+cv.styleUrlSuffix}function GA(e){return[e.lon,e.lat]}CG.exports=SG});var PG=he((P3e,LG)=>{"use strict";var A0e=Nt(),M0e=Di(),S0e=Vb().defaults;LG.exports=function(t,r,i,a){var s=a.type,l=a.attributes,u=a.handleDefaults,c=a.partition||"x",v=r._subplots[s],m=v.length,_=m&&v[0].replace(/\d+$/,""),T,M;function k(R,N){return A0e.coerce(T,M,l,R,N)}for(var L=0;L<m;L++){var E=v[L];t[E]?T=t[E]:T=t[E]={},M=M0e.newContainer(r,E,_),a.noUirevision||k("uirevision",r.uirevision);var I={};I[c]=[L/m,(L+1)/m],S0e(M,r,k,I),a.id=E,u(T,M,k,a)}}});var IG=he((D3e,zG)=>{"use strict";var ZA=Nt(),k0e=PG(),C0e=Kl(),DG=T1();zG.exports=function(t,r,i){k0e(t,r,i,{type:"mapbox",attributes:DG,handleDefaults:E0e,partition:"y",accessToken:r._mapboxAccessToken})};function E0e(e,t,r,i){r("accesstoken",i.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var a=r("bounds.west"),s=r("bounds.east"),l=r("bounds.south"),u=r("bounds.north");(a===void 0||s===void 0||l===void 0||u===void 0)&&delete t.bounds,C0e(e,t,{name:"layers",handleItemDefaults:L0e}),t._input=e}function L0e(e,t){function r(c,v){return ZA.coerce(e,t,DG.layers,c,v)}var i=r("visible");if(i){var a=r("sourcetype"),s=a==="raster"||a==="image";r("source"),r("sourceattribution"),a==="vector"&&r("sourcelayer"),a==="image"&&r("coordinates");var l;s&&(l="raster");var u=r("type",l);s&&u!=="raster"&&(u=t.type="raster",ZA.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),u==="circle"&&r("circle.radius"),u==="line"&&(r("line.width"),r("line.dash")),u==="fill"&&r("fill.outlinecolor"),u==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),ZA.coerceFont(r,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),r("symbol.textposition"),r("symbol.placement"))}}});var h3=he(Ks=>{"use strict";var RG=DA(),$u=Nt(),YA=$u.strTranslate,P0e=$u.strScale,D0e=t2().getSubplotCalcData,z0e=Bh(),I0e=Ka(),FG=_i(),R0e=ho(),F0e=EG(),hv="mapbox",Yf=Ks.constants=qc();Ks.name=hv;Ks.attr="subplot";Ks.idRoot=hv;Ks.idRegex=Ks.attrRegex=$u.counterRegex(hv);var q0e=["mapbox subplots and traces are deprecated!","Please consider switching to `map` subplots and traces.","Learn more at: https://plotly.com/javascript/maplibre-migration/"].join(" ");Ks.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};Ks.layoutAttributes=T1();Ks.supplyLayoutDefaults=IG();var qG=!0;Ks.plot=function(t){qG&&(qG=!1,$u.warn(q0e));var r=t._fullLayout,i=t.calcdata,a=r._subplots[hv];if(RG.version!==Yf.requiredVersion)throw new Error(Yf.wrongVersionErrorMsg);var s=N0e(t,a);RG.accessToken=s;for(var l=0;l<a.length;l++){var u=a[l],c=D0e(i,hv,u),v=r[u],m=v._subplot;m||(m=new F0e(t,u),r[u]._subplot=m),m.viewInitial||(m.viewInitial={center:$u.extendFlat({},v.center),zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),m.plot(c,r,t._promises)}};Ks.clean=function(e,t,r,i){for(var a=i._subplots[hv]||[],s=0;s<a.length;s++){var l=a[s];!t[l]&&i[l]._subplot&&i[l]._subplot.destroy()}};Ks.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[hv],i=t._size,a=0;a<r.length;a++){var s=t[r[a]],l=s.domain,u=s._subplot,c=u.toImage("png"),v=t._glimages.append("svg:image");v.attr({xmlns:z0e.svg,"xlink:href":c,x:i.l+i.w*l.x[0],y:i.t+i.h*(1-l.y[1]),width:i.w*(l.x[1]-l.x[0]),height:i.h*(l.y[1]-l.y[0]),preserveAspectRatio:"none"});var m=I0e.select(s._subplot.div),_=m.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!_){var T=t._glimages.append("g");T.attr("transform",YA(i.l+i.w*l.x[0]+10,i.t+i.h*(1-l.y[0])-31)),T.append("path").attr("d",Yf.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),T.append("path").attr("d",Yf.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),T.append("path").attr("d",Yf.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),T.append("polygon").attr("points",Yf.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var M=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),k=t._glimages.append("g"),L=k.append("text");L.text(M).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":M});var E=FG.bBox(L.node()),I=i.w*(l.x[1]-l.x[0]);if(E.width>I/2){var R=M.split("|").join("<br>");L.text(R).attr("data-unformatted",R).call(R0e.convertToTspans,e),E=FG.bBox(L.node())}L.attr("transform",YA(-3,-E.height+8)),k.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var N=1;E.width+6>I&&(N=I/(E.width+6));var z=[i.l+i.w*l.x[1],i.t+i.h*(1-l.y[0])];k.attr("transform",YA(z[0],z[1])+P0e(N))}};function N0e(e,t){var r=e._fullLayout,i=e._context;if(i.mapboxAccessToken==="")return"";for(var a=[],s=[],l=!1,u=!1,c=0;c<t.length;c++){var v=r[t[c]],m=v.accesstoken;NG(v.style)&&(m?$u.pushUnique(a,m):(NG(v._input.style)&&($u.error("Uses Mapbox map style, but did not set an access token."),l=!0),u=!0)),m&&$u.pushUnique(s,m)}if(u){var _=l?Yf.noAccessTokenErrorMsg:Yf.missingStyleErrorMsg;throw $u.error(_),new Error(_)}return a.length?(a.length>1&&$u.warn(Yf.multipleTokensErrorMsg),a[0]):(s.length&&$u.log(["Listed mapbox access token(s)",s.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function NG(e){return typeof e=="string"&&(Yf.styleValuesMapbox.indexOf(e)!==-1||e.indexOf("mapbox://")===0||e.indexOf("stamen")===0)}Ks.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[hv],i=0;i<r.length;i++){var a=t[r[i]]._subplot;a.updateFx(t)}}});var OG=he((R3e,BG)=>{"use strict";var I3e=["*scattermapbox* trace is deprecated!","Please consider switching to the *scattermap* trace type and `map` subplots.","Learn more at: https://plotly.com/javascript/maplibre-migration/"].join(" ");BG.exports={attributes:Xb(),supplyDefaults:_H(),colorbar:vT(),formatLabels:AA(),calc:SH(),plot:NH(),hoverPoints:e3().hoverPoints,eventData:VH(),selectPoints:GH(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.update(t)}},moduleType:"trace",name:"scattermapbox",basePlotModule:h3(),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}});var VG=he((F3e,UG)=>{"use strict";UG.exports=OG()});var WA=he((q3e,ZG)=>{"use strict";var B0e=Wl().hovertemplateAttrs,dv=xA(),O0e=Tc(),HG=gs(),U0e=kf().defaultLine,vv=hn().extendFlat,GG=dv.marker.line;ZG.exports=vv({locations:{valType:"data_array",editType:"calc"},locationmode:dv.locationmode,z:{valType:"data_array",editType:"calc"},geojson:vv({},dv.geojson,{}),featureidkey:dv.featureidkey,text:vv({},dv.text,{}),hovertext:vv({},dv.hovertext,{}),marker:{line:{color:vv({},GG.color,{dflt:U0e}),width:vv({},GG.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:dv.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:dv.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:vv({},HG.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:B0e(),showlegend:vv({},HG.showlegend,{dflt:!1})},O0e("",{cLetter:"z",editTypeOverride:"calc"}))});var XA=he((N3e,YG)=>{"use strict";var Nc=WA(),V0e=Tc(),H0e=Wl().hovertemplateAttrs,G0e=gs(),pv=hn().extendFlat;YG.exports=pv({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:pv({},Nc.featureidkey,{}),below:{valType:"string",editType:"plot"},text:Nc.text,hovertext:Nc.hovertext,marker:{line:{color:pv({},Nc.marker.line.color,{editType:"plot"}),width:pv({},Nc.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:pv({},Nc.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:pv({},Nc.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:pv({},Nc.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:Nc.hoverinfo,hovertemplate:H0e({},{keys:["properties"]}),showlegend:pv({},G0e.showlegend,{dflt:!1})},V0e("",{cLetter:"z",editTypeOverride:"calc"}))});var XG=he((B3e,WG)=>{"use strict";var E1=Nt(),Z0e=Td(),Y0e=XA();WG.exports=function(t,r,i,a){function s(m,_){return E1.coerce(t,r,Y0e,m,_)}var l=s("locations"),u=s("z"),c=s("geojson");if(!E1.isArrayOrTypedArray(l)||!l.length||!E1.isArrayOrTypedArray(u)||!u.length||!(typeof c=="string"&&c!==""||E1.isPlainObject(c))){r.visible=!1;return}s("featureidkey"),r._length=Math.min(l.length,u.length),s("below"),s("text"),s("hovertext"),s("hovertemplate");var v=s("marker.line.width");v&&s("marker.line.color"),s("marker.opacity"),Z0e(t,r,a,s,{prefix:"",cLetter:"z"}),E1.coerceSelectionMarkerOpacity(r,s)}});var jA=he((O3e,jG)=>{"use strict";jG.exports={min:"zmin",max:"zmax"}});var $G=he((U3e,QG)=>{"use strict";var JG=Ia(),W0e=Bi().BADNUM,X0e=og(),j0e=a1(),J0e=lb();function KG(e){return e&&typeof e=="string"}QG.exports=function(t,r){var i=r._length,a=new Array(i),s;r.geojson?s=function(m){return KG(m)||JG(m)}:s=KG;for(var l=0;l<i;l++){var u=a[l]={},c=r.locations[l],v=r.z[l];s(c)&&JG(v)?(u.loc=c,u.z=v):(u.loc=null,u.z=W0e),u.index=l}return j0e(a,r),X0e(t,r,{vals:r.z,containerStr:"",cLetter:"z"}),J0e(a,r),a}});var JA=he((V3e,rZ)=>{"use strict";var K0e=Ia(),Bc=Nt(),Q0e=V0(),$0e=_i(),eme=jb().makeBlank,eZ=UA();function tme(e){var t=e[0].trace,r=t.visible===!0&&t._length!==0,i={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},s=t._opts={fill:i,line:a,geojson:eme()};if(!r)return s;var l=eZ.extractTraceFeature(e);if(!l)return s;var u=Q0e.makeColorScaleFuncFromTrace(t),c=t.marker,v=c.line||{},m;Bc.isArrayOrTypedArray(c.opacity)&&(m=function(R){var N=R.mo;return K0e(N)?+Bc.constrain(N,0,1):0});var _;Bc.isArrayOrTypedArray(v.color)&&(_=function(R){return R.mlc});var T;Bc.isArrayOrTypedArray(v.width)&&(T=function(R){return R.mlw});for(var M=0;M<e.length;M++){var k=e[M],L=k.fOut;if(L){var E=L.properties;E.fc=u(k.z),m&&(E.mo=m(k)),_&&(E.mlc=_(k)),T&&(E.mlw=T(k)),k.ct=E.ct,k._polygons=eZ.feature2polygons(L)}}var I=m?{type:"identity",property:"mo"}:c.opacity;return Bc.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":I}),Bc.extendFlat(a.paint,{"line-color":_?{type:"identity",property:"mlc"}:v.color,"line-width":T?{type:"identity",property:"mlw"}:v.width,"line-opacity":I}),i.layout.visibility="visible",a.layout.visibility="visible",s.geojson={type:"FeatureCollection",features:l},tZ(e),s}function tZ(e){var t=e[0].trace,r=t._opts,i;if(t.selectedpoints){for(var a=$0e.makeSelectedPointStyleFns(t),s=0;s<e.length;s++){var l=e[s];l.fOut&&(l.fOut.properties.mo2=a.selectedOpacityFn(l))}i={type:"identity",property:"mo2"}}else i=Bc.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity;return Bc.extendFlat(r.fill.paint,{"fill-opacity":i}),Bc.extendFlat(r.line.paint,{"line-opacity":i}),r}rZ.exports={convert:tme,convertOnSelect:tZ}});var sZ=he((H3e,oZ)=>{"use strict";var iZ=JA().convert,rme=JA().convertOnSelect,aZ=qc().traceLayerPrefix;function nZ(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",aZ+t+"-fill"],["line",aZ+t+"-line"]],this.below=null}var Im=nZ.prototype;Im.update=function(e){this._update(iZ(e)),e[0].trace._glTrace=this};Im.updateOnSelect=function(e){this._update(rme(e))};Im._update=function(e){var t=this.subplot,r=this.layerList,i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(e,i),this.below=i);for(var a=0;a<r.length;a++){var s=r[a],l=s[0],u=s[1],c=e[l];t.setOptions(u,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&t.setOptions(u,"setPaintProperty",c.paint)}};Im._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,a=this.sourceId,s=0;s<i.length;s++){var l=i[s],u=l[0],c=e[u];r.addLayer({type:u,id:l[1],source:a,layout:c.layout,paint:c.paint},t)}};Im._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};Im.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};oZ.exports=function(t,r){var i=r[0].trace,a=new nZ(t,i.uid),s=a.sourceId,l=iZ(r),u=a.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(s,{type:"geojson",data:l.geojson}),a._addLayers(l,u),r[0].trace._glTrace=a,a}});var uZ=he((G3e,lZ)=>{"use strict";var ame=Ii(),ime=WA(),nme=Nt().fillText;lZ.exports=function(t,r,i){var a=t.cd,s=a[0].trace,l=t.subplot,u,c,v,m,_=[r,i],T=[r+360,i];for(c=0;c<a.length;c++)if(u=a[c],m=!1,u._polygons){for(v=0;v<u._polygons.length;v++)u._polygons[v].contains(_)&&(m=!m),u._polygons[v].contains(T)&&(m=!m);if(m)break}if(!(!m||!u))return t.x0=t.x1=t.xa.c2p(u.ct),t.y0=t.y1=t.ya.c2p(u.ct),t.index=u.index,t.location=u.loc,t.z=u.z,t.zLabel=ame.tickText(l.mockAxis,l.mockAxis.c2l(u.z),"hover").text,t.hovertemplate=u.hovertemplate,ome(t,s,u),[t]};function ome(e,t,r){if(!t.hovertemplate){var i=r.hi||t.hoverinfo,a=String(r.loc),s=i==="all"?ime.hoverinfo.flags:i.split("+"),l=s.indexOf("name")!==-1,u=s.indexOf("location")!==-1,c=s.indexOf("z")!==-1,v=s.indexOf("text")!==-1,m=!l&&u,_=[];m?e.nameOverride=a:(l&&(e.nameOverride=t.name),u&&_.push(a)),c&&_.push(e.zLabel),v&&nme(r,t,_),e.extraText=_.join("<br>")}}});var cZ=he((Z3e,fZ)=>{"use strict";fZ.exports=function(t,r,i,a,s){t.location=r.location,t.z=r.z;var l=a[s];return l.fIn&&l.fIn.properties&&(t.properties=l.fIn.properties),t.ct=l.ct,t}});var vZ=he((Y3e,hZ)=>{"use strict";hZ.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],u,c,v,m,_;if(r===!1)for(u=0;u<i.length;u++)i[u].selected=0;else for(u=0;u<i.length;u++)c=i[u],v=c.ct,v&&(m=a.c2p(v),_=s.c2p(v),r.contains([m,_],null,u,t)?(l.push({pointNumber:u,lon:v[0],lat:v[1]}),c.selected=1):c.selected=0);return l}});var pZ=he((X3e,dZ)=>{"use strict";var W3e=["*choroplethmapbox* trace is deprecated!","Please consider switching to the *choroplethmap* trace type and `map` subplots.","Learn more at: https://plotly.com/javascript/maplibre-migration/"].join(" ");dZ.exports={attributes:XA(),supplyDefaults:XG(),colorbar:jA(),calc:$G(),plot:sZ(),hoverPoints:uZ(),eventData:cZ(),selectPoints:vZ(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.updateOnSelect(t)}},getBelow:function(e,t){for(var r=t.getMapLayers(),i=r.length-2;i>=0;i--){var a=r[i].id;if(typeof a=="string"&&a.indexOf("water")===0){for(var s=i+1;s<r.length;s++)if(a=r[s].id,typeof a=="string"&&a.indexOf("plotly-")===-1)return a}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:h3(),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}});var yZ=he((j3e,mZ)=>{"use strict";mZ.exports=pZ()});var QA=he((J3e,_Z)=>{"use strict";var sme=Tc(),lme=Wl().hovertemplateAttrs,gZ=gs(),v3=Xb(),KA=hn().extendFlat;_Z.exports=KA({lon:v3.lon,lat:v3.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:v3.text,hovertext:v3.hovertext,hoverinfo:KA({},gZ.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:lme(),showlegend:KA({},gZ.showlegend,{dflt:!1})},sme("",{cLetter:"z",editTypeOverride:"calc"}))});var bZ=he((K3e,xZ)=>{"use strict";var ume=Nt(),fme=Td(),cme=QA();xZ.exports=function(t,r,i,a){function s(v,m){return ume.coerce(t,r,cme,v,m)}var l=s("lon")||[],u=s("lat")||[],c=Math.min(l.length,u.length);if(!c){r.visible=!1;return}r._length=c,s("z"),s("radius"),s("below"),s("text"),s("hovertext"),s("hovertemplate"),fme(t,r,a,s,{prefix:"",cLetter:"z"})}});var AZ=he((Q3e,TZ)=>{"use strict";var $A=Ia(),hme=Nt().isArrayOrTypedArray,eM=Bi().BADNUM,vme=og(),wZ=Nt()._;TZ.exports=function(t,r){for(var i=r._length,a=new Array(i),s=r.z,l=hme(s)&&s.length,u=0;u<i;u++){var c=a[u]={},v=r.lon[u],m=r.lat[u];if(c.lonlat=$A(v)&&$A(m)?[+v,+m]:[eM,eM],l){var _=s[u];c.z=$A(_)?_:eM}}return vme(t,r,{vals:l?s:[0,1],containerStr:"",cLetter:"z"}),i&&(a[0].t={labels:{lat:wZ(t,"lat:")+" ",lon:wZ(t,"lon:")+" "}}),a}});var EZ=he(($3e,CZ)=>{"use strict";var dme=Ia(),tM=Nt(),MZ=Ua(),SZ=V0(),kZ=Bi().BADNUM,pme=jb().makeBlank;CZ.exports=function(t){var r=t[0].trace,i=r.visible===!0&&r._length!==0,a={layout:{visibility:"none"},paint:{}},s=r._opts={heatmap:a,geojson:pme()};if(!i)return s;var l=[],u,c=r.z,v=r.radius,m=tM.isArrayOrTypedArray(c)&&c.length,_=tM.isArrayOrTypedArray(v);for(u=0;u<t.length;u++){var T=t[u],M=T.lonlat;if(M[0]!==kZ){var k={};if(m){var L=T.z;k.z=L!==kZ?L:0}_&&(k.r=dme(v[u])&&v[u]>0?+v[u]:0),l.push({type:"Feature",geometry:{type:"Point",coordinates:M},properties:k})}}var E=SZ.extractOpts(r),I=E.reversescale?SZ.flipScale(E.colorscale):E.colorscale,R=I[0][1],N=MZ.opacity(R)<1?R:MZ.addOpacity(R,0),z=["interpolate",["linear"],["heatmap-density"],0,N];for(u=1;u<I.length;u++)z.push(I[u][0],I[u][1]);var B=["interpolate",["linear"],["get","z"],E.min,0,E.max,1];return tM.extendFlat(s.heatmap.paint,{"heatmap-weight":m?B:1/(E.max-E.min),"heatmap-color":z,"heatmap-radius":_?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),s.geojson={type:"FeatureCollection",features:l},s.heatmap.layout.visibility="visible",s}});var zZ=he((ewe,DZ)=>{"use strict";var LZ=EZ(),mme=qc().traceLayerPrefix;function PZ(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",mme+t+"-heatmap"]],this.below=null}var d3=PZ.prototype;d3.update=function(e){var t=this.subplot,r=this.layerList,i=LZ(e),a=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(i.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(i,a),this.below=a);for(var s=0;s<r.length;s++){var l=r[s],u=l[0],c=l[1],v=i[u];t.setOptions(c,"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&t.setOptions(c,"setPaintProperty",v.paint)}};d3._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,a=this.sourceId,s=0;s<i.length;s++){var l=i[s],u=l[0],c=e[u];r.addLayer({type:u,id:l[1],source:a,layout:c.layout,paint:c.paint},t)}};d3._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};d3.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};DZ.exports=function(t,r){var i=r[0].trace,a=new PZ(t,i.uid),s=a.sourceId,l=LZ(r),u=a.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(s,{type:"geojson",data:l.geojson}),a._addLayers(l,u),a}});var RZ=he((twe,IZ)=>{"use strict";var yme=Ii(),gme=e3().hoverPoints,_me=e3().getExtraText;IZ.exports=function(t,r,i){var a=gme(t,r,i);if(a){var s=a[0],l=s.cd,u=l[0].trace,c=l[s.index];if(delete s.color,"z"in c){var v=s.subplot.mockAxis;s.z=c.z,s.zLabel=yme.tickText(v,v.c2l(c.z),"hover").text}return s.extraText=_me(u,c,l[0].t.labels),[s]}}});var qZ=he((rwe,FZ)=>{"use strict";FZ.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t.z=r.z,t}});var BZ=he((iwe,NZ)=>{"use strict";var awe=["*densitymapbox* trace is deprecated!","Please consider switching to the *densitymap* trace type and `map` subplots.","Learn more at: https://plotly.com/javascript/maplibre-migration/"].join(" ");NZ.exports={attributes:QA(),supplyDefaults:bZ(),colorbar:jA(),formatLabels:AA(),calc:AZ(),plot:zZ(),hoverPoints:RZ(),eventData:qZ(),getBelow:function(e,t){for(var r=t.getMapLayers(),i=0;i<r.length;i++){var a=r[i],s=a.id;if(a.type==="symbol"&&typeof s=="string"&&s.indexOf("plotly-")===-1)return s}},moduleType:"trace",name:"densitymapbox",basePlotModule:h3(),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}});var UZ=he((nwe,OZ)=>{"use strict";OZ.exports=BZ()});var L1=he(VZ=>{"use strict";VZ.pointsAccessorFunction=function(e,t){for(var r,i,a=0;a<e.length&&(r=e[a],r!==t);a++)!r._indexToPoints||r.enabled===!1||(i=r._indexToPoints);var s=i?function(l){return i[l]}:function(l){return[l]};return s}});var YZ=he(Fm=>{"use strict";var xme=Ii(),Rm=Nt(),bme=Fh(),wme=L1().pointsAccessorFunction,yn=Bi().BADNUM;Fm.moduleType="transform";Fm.name="aggregate";var ZZ=Fm.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},HZ=ZZ.aggregations;Fm.supplyDefaults=function(e,t){var r={},i;function a(E,I){return Rm.coerce(e,r,ZZ,E,I)}var s=a("enabled");if(!s)return r;var l=bme.findArrayAttributes(t),u={};for(i=0;i<l.length;i++)u[l[i]]=1;var c=a("groups");if(!Array.isArray(c)){if(!u[c])return r.enabled=!1,r;u[c]=0}var v=e.aggregations||[],m=r.aggregations=new Array(v.length),_;function T(E,I){return Rm.coerce(v[i],_,HZ,E,I)}for(i=0;i<v.length;i++){_={_index:i};var M=T("target"),k=T("func"),L=T("enabled");L&&M&&(u[M]||k==="count"&&u[M]===void 0)?(k==="stddev"&&T("funcmode"),u[M]=0,m[i]=_):m[i]={enabled:!1,_index:i}}for(i=0;i<l.length;i++)u[l[i]]&&m.push({target:l[i],func:HZ.func.dflt,enabled:!0,_index:-1});return r};Fm.calcTransform=function(e,t,r){if(r.enabled){var i=r.groups,a=Rm.getTargetArray(t,{target:i});if(a){var s,l,u,c,v={},m={},_=[],T=wme(t.transforms,r),M=a.length;for(t._length&&(M=Math.min(M,t._length)),s=0;s<M;s++)l=a[s],u=v[l],u===void 0?(v[l]=_.length,c=[s],_.push(c),m[v[l]]=T(s)):(_[u].push(s),m[v[l]]=(m[v[l]]||[]).concat(T(s)));r._indexToPoints=m;var k=r.aggregations;for(s=0;s<k.length;s++)GZ(e,t,_,k[s]);typeof i=="string"&&GZ(e,t,_,{target:i,func:"first",enabled:!0}),t._length=_.length}}};function GZ(e,t,r,i){if(i.enabled){for(var a=i.target,s=Rm.nestedProperty(t,a),l=s.get(),u=xme.getDataConversions(e,t,a,l),c=Tme(i,u),v=new Array(r.length),m=0;m<r.length;m++)v[m]=c(l,r[m]);s.set(v),i.func==="count"&&Rm.pushUnique(t._arrayAttrs,a)}}function Tme(e,t){var r=e.func,i=t.d2c,a=t.c2d;switch(r){case"count":return Ame;case"first":return Mme;case"last":return Sme;case"sum":return function(s,l){for(var u=0,c=0;c<l.length;c++){var v=i(s[l[c]]);v!==yn&&(u+=v)}return a(u)};case"avg":return function(s,l){for(var u=0,c=0,v=0;v<l.length;v++){var m=i(s[l[v]]);m!==yn&&(u+=m,c++)}return c?a(u/c):yn};case"min":return function(s,l){for(var u=1/0,c=0;c<l.length;c++){var v=i(s[l[c]]);v!==yn&&(u=Math.min(u,v))}return u===1/0?yn:a(u)};case"max":return function(s,l){for(var u=-1/0,c=0;c<l.length;c++){var v=i(s[l[c]]);v!==yn&&(u=Math.max(u,v))}return u===-1/0?yn:a(u)};case"range":return function(s,l){for(var u=1/0,c=-1/0,v=0;v<l.length;v++){var m=i(s[l[v]]);m!==yn&&(u=Math.min(u,m),c=Math.max(c,m))}return c===-1/0||u===1/0?yn:a(c-u)};case"change":return function(s,l){var u=i(s[l[0]]),c=i(s[l[l.length-1]]);return u===yn||c===yn?yn:a(c-u)};case"median":return function(s,l){for(var u=[],c=0;c<l.length;c++){var v=i(s[l[c]]);v!==yn&&u.push(v)}if(!u.length)return yn;u.sort(Rm.sorterAsc);var m=(u.length-1)/2;return a((u[Math.floor(m)]+u[Math.ceil(m)])/2)};case"mode":return function(s,l){for(var u={},c=0,v=yn,m=0;m<l.length;m++){var _=i(s[l[m]]);if(_!==yn){var T=u[_]=(u[_]||0)+1;T>c&&(c=T,v=_)}}return c?a(v):yn};case"rms":return function(s,l){for(var u=0,c=0,v=0;v<l.length;v++){var m=i(s[l[v]]);m!==yn&&(u+=m*m,c++)}return c?a(Math.sqrt(u/c)):yn};case"stddev":return function(s,l){var u=0,c=0,v=1,m=yn,_;for(_=0;_<l.length&&m===yn;_++)m=i(s[l[_]]);if(m===yn)return yn;for(;_<l.length;_++){var T=i(s[l[_]]);if(T!==yn){var M=T-m;u+=M,c+=M*M,v++}}var k=e.funcmode==="sample"?v-1:v;return k?Math.sqrt((c-u*u/v)/k):0}}}function Ame(e,t){return t.length}function Mme(e,t){return e[t[0]]}function Sme(e,t){return e[t[t.length-1]]}});var XZ=he((lwe,WZ)=>{"use strict";WZ.exports=YZ()});var JZ=he((uwe,jZ)=>{"use strict";jZ.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}});var eY=he(rp=>{"use strict";var mv=Nt(),kme=sa(),Cme=Ii(),Eme=L1().pointsAccessorFunction,rM=JZ(),KZ=rM.COMPARISON_OPS,QZ=rM.INTERVAL_OPS,$Z=rM.SET_OPS;rp.moduleType="transform";rp.name="filter";rp.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(KZ).concat(QZ).concat($Z),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};rp.supplyDefaults=function(e){var t={};function r(l,u){return mv.coerce(e,t,rp.attributes,l,u)}var i=r("enabled");if(i){var a=r("target");if(mv.isArrayOrTypedArray(a)&&a.length===0)return t.enabled=!1,t;r("preservegaps"),r("operation"),r("value");var s=kme.getComponentMethod("calendars","handleDefaults");s(e,t,"valuecalendar",null),s(e,t,"targetcalendar",null)}return t};rp.calcTransform=function(e,t,r){if(!r.enabled)return;var i=mv.getTargetArray(t,r);if(!i)return;var a=r.target,s=i.length;t._length&&(s=Math.min(s,t._length));var l=r.targetcalendar,u=t._arrayAttrs,c=r.preservegaps;if(typeof a=="string"){var v=mv.nestedProperty(t,a+"calendar").get();v&&(l=v)}var m=Cme.getDataToCoordFunc(e,t,a,i),_=Lme(r,m,l),T={},M={},k=0;function L(B,H){for(var V=0;V<u.length;V++){var Y=mv.nestedProperty(t,u[V]);B(Y,H)}}var E,I;c?(E=function(B){T[B.astr]=mv.extendDeep([],B.get()),B.set(new Array(s))},I=function(B,H){var V=T[B.astr][H];B.get()[H]=V}):(E=function(B){T[B.astr]=mv.extendDeep([],B.get()),B.set([])},I=function(B,H){var V=T[B.astr][H];B.get().push(V)}),L(E);for(var R=Eme(t.transforms,r),N=0;N<s;N++){var z=_(i[N]);z?(L(I,N),M[k++]=R(N)):c&&k++}r._indexToPoints=M,t._length=k};function Lme(e,t,r){var i=e.operation,a=e.value,s=mv.isArrayOrTypedArray(a);function l(m){return m.indexOf(i)!==-1}var u=function(m){return t(m,0,e.valuecalendar)},c=function(m){return t(m,0,r)},v;switch(l(KZ)?v=u(s?a[0]:a):l(QZ)?v=s?[u(a[0]),u(a[1])]:[u(a),u(a)]:l($Z)&&(v=s?a.map(u):[u(a)]),i){case"=":return function(m){return c(m)===v};case"!=":return function(m){return c(m)!==v};case"<":return function(m){return c(m)<v};case"<=":return function(m){return c(m)<=v};case">":return function(m){return c(m)>v};case">=":return function(m){return c(m)>=v};case"[]":return function(m){var _=c(m);return _>=v[0]&&_<=v[1]};case"()":return function(m){var _=c(m);return _>v[0]&&_<v[1]};case"[)":return function(m){var _=c(m);return _>=v[0]&&_<v[1]};case"(]":return function(m){var _=c(m);return _>v[0]&&_<=v[1]};case"][":return function(m){var _=c(m);return _<=v[0]||_>=v[1]};case")(":return function(m){var _=c(m);return _<v[0]||_>v[1]};case"](":return function(m){var _=c(m);return _<=v[0]||_>v[1]};case")[":return function(m){var _=c(m);return _<v[0]||_>=v[1]};case"{}":return function(m){return v.indexOf(c(m))!==-1};case"}{":return function(m){return v.indexOf(c(m))===-1}}}});var rY=he((cwe,tY)=>{"use strict";tY.exports=eY()});var aY=he(Oc=>{"use strict";var As=Nt(),Pme=Fh(),Dme=jn(),zme=L1().pointsAccessorFunction;Oc.moduleType="transform";Oc.name="groupby";Oc.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};Oc.supplyDefaults=function(e,t,r){var i,a={};function s(_,T){return As.coerce(e,a,Oc.attributes,_,T)}var l=s("enabled");if(!l)return a;s("groups"),s("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var u=e.styles,c=a.styles=[];if(u)for(i=0;i<u.length;i++){var v=c[i]={};As.coerce(u[i],c[i],Oc.attributes.styles,"target");var m=As.coerce(u[i],c[i],Oc.attributes.styles,"value");As.isPlainObject(m)?v.value=As.extendDeep({},m):m&&delete v.value}return a};Oc.transform=function(e,t){var r,i,a,s=[];for(i=0;i<e.length;i++)for(r=Ime(e[i],t),a=0;a<r.length;a++)s.push(r[a]);return s};function Ime(e,t){var r,i,a,s,l,u,c,v,m,_,T=t.transform,M=t.transformIndex,k=e.transforms[M].groups,L=zme(e.transforms,T);if(!As.isArrayOrTypedArray(k)||k.length===0)return[e];var E=As.filterUnique(k),I=new Array(E.length),R=k.length,N=Pme.findArrayAttributes(e),z=T.styles||[],B={};for(r=0;r<z.length;r++)B[z[r].target]=z[r].value;T.styles&&(_=As.keyedContainer(T,"styles","target","value.name"));var H={},V={};for(r=0;r<E.length;r++){u=E[r],H[u]=r,V[u]=0,c=I[r]=As.extendDeepNoArrays({},e),c._group=u,c.transforms[M]._indexToPoints={};var Y=null;for(_&&(Y=_.get(u)),Y||Y===""?c.name=Y:c.name=As.templateString(T.nameformat,{trace:e.name,group:u}),v=c.transforms,c.transforms=[],i=0;i<v.length;i++)c.transforms[i]=As.extendDeepNoArrays({},v[i]);for(i=0;i<N.length;i++)As.nestedProperty(c,N[i]).set([])}for(a=0;a<N.length;a++){for(s=N[a],i=0,m=[];i<E.length;i++)m[i]=As.nestedProperty(I[i],s).get();for(l=As.nestedProperty(e,s).get(),i=0;i<R;i++)m[H[k[i]]].push(l[i])}for(i=0;i<R;i++){c=I[H[k[i]]];var J=c.transforms[M]._indexToPoints;J[V[k[i]]]=L(i),V[k[i]]++}for(r=0;r<E.length;r++)u=E[r],c=I[r],Dme.clearExpandedTraceDefaultColors(c),c=As.extendDeepNoArrays(c,B[u]||{});return I}});var nY=he((vwe,iY)=>{"use strict";iY.exports=aY()});var oY=he(ap=>{"use strict";var aM=Nt(),Rme=Ii(),Fme=L1().pointsAccessorFunction,p3=Bi().BADNUM;ap.moduleType="transform";ap.name="sort";ap.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};ap.supplyDefaults=function(e){var t={};function r(a,s){return aM.coerce(e,t,ap.attributes,a,s)}var i=r("enabled");return i&&(r("target"),r("order")),t};ap.calcTransform=function(e,t,r){if(r.enabled){var i=aM.getTargetArray(t,r);if(i){var a=r.target,s=i.length;t._length&&(s=Math.min(s,t._length));var l=t._arrayAttrs,u=Rme.getDataToCoordFunc(e,t,a,i),c=qme(r,i,u,s),v=Fme(t.transforms,r),m={},_,T;for(_=0;_<l.length;_++){var M=aM.nestedProperty(t,l[_]),k=M.get(),L=new Array(s);for(T=0;T<s;T++)L[T]=k[c[T]];M.set(L)}for(T=0;T<s;T++)m[T]=v(c[T]);r._indexToPoints=m,t._length=s}}};function qme(e,t,r,i){var a=new Array(i),s=new Array(i),l;for(l=0;l<i;l++)a[l]={v:t[l],i:l};for(a.sort(Nme(e,r)),l=0;l<i;l++)s[l]=a[l].i;return s}function Nme(e,t){switch(e.order){case"ascending":return function(r,i){var a=t(r.v),s=t(i.v);return a===p3?1:s===p3?-1:a-s};case"descending":return function(r,i){var a=t(r.v),s=t(i.v);return a===p3?1:s===p3?-1:s-a}}}});var lY=he((pwe,sY)=>{"use strict";sY.exports=oY()});var Ho=he((mwe,fY)=>{"use strict";var uY=Object.getOwnPropertySymbols,Bme=Object.prototype.hasOwnProperty,Ome=Object.prototype.propertyIsEnumerable;function Ume(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Vme(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(s){a[s]=s}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}fY.exports=Vme()?Object.assign:function(e,t){for(var r,i=Ume(e),a,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var l in r)Bme.call(r,l)&&(i[l]=r[l]);if(uY){a=uY(r);for(var u=0;u<a.length;u++)Ome.call(r,a[u])&&(i[a[u]]=r[a[u]])}}return i}});var Go=he((ywe,hY)=>{var y3=Ho();function cY(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}y3(cY.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]&&(r=new this.calendars[e](t),this._localCals[e+"-"+t]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,t,r,i,a){return i=(e!=null&&e.year?e.calendar():typeof i=="string"?this.instance(i,a):i)||this.instance(),i.newDate(e,t,r)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,t){return function(r){for(var i="",a=0;r>0;){var s=r%10;i=(s===0?"":e[s]+t[a])+i,a++,r=Math.floor(r/10)}return i.indexOf(e[1]+t[1])===0&&(i=i.substr(1)),i||e[0]}}});function iM(e,t,r,i){if(this._calendar=e,this._year=t,this._month=r,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(La.local.invalidDate||La.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function m3(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}y3(iM.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r))throw(La.local.invalidDate||La.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(La.local.differentCalendars||La.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+m3(Math.abs(this.year()),4)+"-"+m3(this.month(),2)+"-"+m3(this.day(),2)}});function nM(){this.shortYearCutoff="+10"}y3(nM.prototype,{_validateLevel:0,newDate:function(e,t,r){return e==null?this.today():(e.year&&(this._validate(e,t,r,La.local.invalidDate||La.regionalOptions[""].invalidDate),r=e.day(),t=e.month(),e=e.year()),new iM(this,e,t,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,La.local.invalidYear||La.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,La.local.invalidYear||La.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+m3(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,La.local.invalidYear||La.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,La.local.invalidMonth||La.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,La.local.invalidMonth||La.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,La.local.invalidYear||La.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var i=this._validate(e,t,r,La.local.invalidDate||La.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,La.local.invalidDate||La.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(e,t,r){return this._validate(e,t,r,La.local.invalidDate||La.regionalOptions[""].invalidDate),{}},add:function(e,t,r){return this._validate(e,this.minMonth,this.minDay,La.local.invalidDate||La.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){if(this._validateLevel++,r==="d"||r==="w"){var i=e.toJD()+t*(r==="w"?this.daysInWeek():1),a=e.calendar().fromJD(i);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var s=e.year()+(r==="y"?t:0),l=e.monthOfYear()+(r==="m"?t:0),a=e.day(),u=function(m){for(;l<m.minMonth;)s--,l+=m.monthsInYear(s);for(var _=m.monthsInYear(s);l>_-1+m.minMonth;)s++,l-=_,_=m.monthsInYear(s)};r==="y"?(e.month()!==this.fromMonthOfYear(s,l)&&(l=this.newDate(s,e.month(),this.minDay).monthOfYear()),l=Math.min(l,this.monthsInYear(s)),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,l)))):r==="m"&&(u(this),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,l))));var c=[s,this.fromMonthOfYear(s,l),a];return this._validateLevel--,c}catch(v){throw this._validateLevel--,v}},_correctAdd:function(e,t,r,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(t[0]===0||e.year()>0!=t[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],s=r<0?-1:1;t=this._add(e,r*a[0]+s*a[1],a[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,La.local.invalidDate||La.regionalOptions[""].invalidDate);var i=r==="y"?t:e.year(),a=r==="m"?t:e.month(),s=r==="d"?t:e.day();return(r==="y"||r==="m")&&(s=Math.min(s,this.daysInMonth(i,a))),e.date(i,a,s)},isValid:function(e,t,r){this._validateLevel++;var i=this.hasYearZero||e!==0;if(i){var a=this.newDate(e,t,this.minDay);i=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,i},toJSDate:function(e,t,r){var i=this._validate(e,t,r,La.local.invalidDate||La.regionalOptions[""].invalidDate);return La.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(e){return this.fromJD(La.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,i){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(La.local.differentCalendars||La.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,t,r))throw i.replace(/\{0\}/,this.local.name);var a=this.newDate(e,t,r);return this._validateLevel--,a}catch(s){throw this._validateLevel--,s}}});function oM(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}oM.prototype=new nM;y3(oM.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,La.local.invalidYear||La.regionalOptions[""].invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===0&&(r%100!==0||r%400===0)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,La.local.invalidMonth||La.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,La.local.invalidDate||La.regionalOptions[""].invalidDate);e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<3&&(t+=12,e--);var a=Math.floor(e/100),s=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+s-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=Math.floor((t-186721625e-2)/36524.25);r=t+1+r-Math.floor(r/4);var i=r+1524,a=Math.floor((i-122.1)/365.25),s=Math.floor(365.25*a),l=Math.floor((i-s)/30.6001),u=i-s-Math.floor(l*30.6001),c=l-(l>13.5?13:1),v=a-(c>2.5?4716:4715);return v<=0&&v--,this.newDate(v,c,u)},toJSDate:function(e,t,r){var i=this._validate(e,t,r,La.local.invalidDate||La.regionalOptions[""].invalidDate),a=new Date(i.year(),i.month()-1,i.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var La=hY.exports=new cY;La.cdate=iM;La.baseCalendar=nM;La.calendars.gregorian=oM});var vY=he(()=>{var sM=Ho(),mo=Go();sM(mo.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});mo.local=mo.regionalOptions[""];sM(mo.cdate.prototype,{formatDate:function(e,t){return typeof e!="string"&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}});sM(mo.baseCalendar.prototype,{UNIX_EPOCH:mo.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:mo.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if(typeof e!="string"&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw mo.local.invalidFormat||mo.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,r=r||{};for(var i=r.dayNamesShort||this.local.dayNamesShort,a=r.dayNames||this.local.dayNames,s=r.monthNumbers||this.local.monthNumbers,l=r.monthNamesShort||this.local.monthNamesShort,u=r.monthNames||this.local.monthNames,c=r.calculateWeek||this.local.calculateWeek,v=function(z,B){for(var H=1;N+H<e.length&&e.charAt(N+H)===z;)H++;return N+=H-1,Math.floor(H/(B||1))>1},m=function(z,B,H,V){var Y=""+B;if(v(z,V))for(;Y.length<H;)Y="0"+Y;return Y},_=function(z,B,H,V){return v(z)?V[B]:H[B]},T=this,M=function(z){return typeof s=="function"?s.call(T,z,v("m")):E(m("m",z.month(),2))},k=function(z,B){return B?typeof u=="function"?u.call(T,z):u[z.month()-T.minMonth]:typeof l=="function"?l.call(T,z):l[z.month()-T.minMonth]},L=this.local.digits,E=function(z){return r.localNumbers&&L?L(z):z},I="",R=!1,N=0;N<e.length;N++)if(R)e.charAt(N)==="'"&&!v("'")?R=!1:I+=e.charAt(N);else switch(e.charAt(N)){case"d":I+=E(m("d",t.day(),2));break;case"D":I+=_("D",t.dayOfWeek(),i,a);break;case"o":I+=m("o",t.dayOfYear(),3);break;case"w":I+=m("w",t.weekOfYear(),2);break;case"m":I+=M(t);break;case"M":I+=k(t,v("M"));break;case"y":I+=v("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":v("Y",2),I+=t.formatYear();break;case"J":I+=t.toJD();break;case"@":I+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":I+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":v("'")?I+="'":R=!0;break;default:I+=e.charAt(N)}return I},parseDate:function(e,t,r){if(t==null)throw mo.local.invalidArguments||mo.regionalOptions[""].invalidArguments;if(t=typeof t=="object"?t.toString():t+"",t==="")return null;e=e||this.local.dateFormat,r=r||{};var i=r.shortYearCutoff||this.shortYearCutoff;i=typeof i!="string"?i:this.today().year()%100+parseInt(i,10);for(var a=r.dayNamesShort||this.local.dayNamesShort,s=r.dayNames||this.local.dayNames,l=r.parseMonth||this.local.parseMonth,u=r.monthNumbers||this.local.monthNumbers,c=r.monthNamesShort||this.local.monthNamesShort,v=r.monthNames||this.local.monthNames,m=-1,_=-1,T=-1,M=-1,k=-1,L=!1,E=!1,I=function(oe,ue){for(var me=1;J+me<e.length&&e.charAt(J+me)===oe;)me++;return J+=me-1,Math.floor(me/(ue||1))>1},R=function(oe,ue){var me=I(oe,ue),Se=[2,3,me?4:2,me?4:2,10,11,20]["oyYJ@!".indexOf(oe)+1],Ce=new RegExp("^-?\\d{1,"+Se+"}"),Me=t.substring(Y).match(Ce);if(!Me)throw(mo.local.missingNumberAt||mo.regionalOptions[""].missingNumberAt).replace(/\{0\}/,Y);return Y+=Me[0].length,parseInt(Me[0],10)},N=this,z=function(){if(typeof u=="function"){I("m");var oe=u.call(N,t.substring(Y));return Y+=oe.length,oe}return R("m")},B=function(oe,ue,me,Se){for(var Ce=I(oe,Se)?me:ue,Me=0;Me<Ce.length;Me++)if(t.substr(Y,Ce[Me].length).toLowerCase()===Ce[Me].toLowerCase())return Y+=Ce[Me].length,Me+N.minMonth;throw(mo.local.unknownNameAt||mo.regionalOptions[""].unknownNameAt).replace(/\{0\}/,Y)},H=function(){if(typeof v=="function"){var oe=I("M")?v.call(N,t.substring(Y)):c.call(N,t.substring(Y));return Y+=oe.length,oe}return B("M",c,v)},V=function(){if(t.charAt(Y)!==e.charAt(J))throw(mo.local.unexpectedLiteralAt||mo.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,Y);Y++},Y=0,J=0;J<e.length;J++)if(E)e.charAt(J)==="'"&&!I("'")?E=!1:V();else switch(e.charAt(J)){case"d":M=R("d");break;case"D":B("D",a,s);break;case"o":k=R("o");break;case"w":R("w");break;case"m":T=z();break;case"M":T=H();break;case"y":var re=J;L=!I("y",2),J=re,_=R("y",2);break;case"Y":_=R("Y",2);break;case"J":m=R("J")+.5,t.charAt(Y)==="."&&(Y++,R("J"));break;case"@":m=R("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":m=R("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":Y=t.length;break;case"'":I("'")?V():E=!0;break;default:V()}if(Y<t.length)throw mo.local.unexpectedText||mo.regionalOptions[""].unexpectedText;if(_===-1?_=this.today().year():_<100&&L&&(_+=i===-1?1900:this.today().year()-this.today().year()%100-(_<=i?0:100)),typeof T=="string"&&(T=l.call(this,_,T)),k>-1){T=1,M=k;for(var ne=this.daysInMonth(_,T);M>ne;ne=this.daysInMonth(_,T))T++,M-=ne}return m>-1?this.fromJD(m):this.newDate(_,T,M)},determineDate:function(e,t,r,i,a){r&&typeof r!="object"&&(a=i,i=r,r=null),typeof i!="string"&&(a=i,i="");var s=this,l=function(u){try{return s.parseDate(i,u,a)}catch(_){}u=u.toLowerCase();for(var c=(u.match(/^c/)&&r?r.newDate():null)||s.today(),v=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,m=v.exec(u);m;)c.add(parseInt(m[1],10),m[2]||"d"),m=v.exec(u);return c};return t=t?t.newDate():null,e=e==null?t:typeof e=="string"?l(e):typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e),e}})});var dY=he(()=>{var yv=Go(),Hme=Ho(),lM=yv.instance();function g3(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}g3.prototype=new yv.baseCalendar;Hme(g3.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e=="string"){var r=e.match(Zme);return r?r[0]:""}var i=this._validateYear(e),a=e.month(),s=""+this.toChineseMonth(i,a);return t&&s.length<2&&(s="0"+s),this.isIntercalaryMonth(i,a)&&(s+="i"),s},monthNames:function(e){if(typeof e=="string"){var t=e.match(Yme);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),a=this.toChineseMonth(r,i),s=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][a-1];return this.isIntercalaryMonth(r,i)&&(s="\u95F0"+s),s},monthNamesShort:function(e){if(typeof e=="string"){var t=e.match(Wme);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),a=this.toChineseMonth(r,i),s=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][a-1];return this.isIntercalaryMonth(r,i)&&(s="\u95F0"+s),s},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t),i;if(isNaN(r))t[0]==="\u95F0"&&(i=!0,t=t.substring(1)),t[t.length-1]==="\u6708"&&(t=t.substring(0,t.length-1)),r=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(t);else{var a=t[t.length-1];i=a==="i"||a==="I"}var s=this.toMonthIndex(e,r,i);return s},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),typeof e!="number"||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,r){var i=this.intercalaryMonth(e),a=r&&t!==i;if(a||t<1||t>12)throw yv.local.invalidMonth.replace(/\{0\}/,this.local.name);var s;return i?!r&&t<=i?s=t-1:s=t:s=t-1,s},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e),i=r?12:11;if(t<0||t>i)throw yv.local.invalidMonth.replace(/\{0\}/,this.local.name);var a;return r?t<r?a=t+1:a=t:a=t+1,a},intercalaryMonth:function(e){e=this._validateYear(e);var t=gv[e-gv[0]],r=t>>13;return r},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var i=this._validateYear(e,yv.local.invalidyear),a=_v[i-_v[0]],s=a>>9&4095,l=a>>5&15,u=a&31,c;c=lM.newDate(s,l,u),c.add(4-(c.dayOfWeek()||7),"d");var v=this.toJD(e,t,r)-c.toJD();return 1+Math.floor(v/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var r=gv[e-gv[0]],i=r>>13,a=i?12:11;if(t>a)throw yv.local.invalidMonth.replace(/\{0\}/,this.local.name);var s=r&1<<12-t?30:29;return s},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,s,r,yv.local.invalidDate);e=this._validateYear(i.year()),t=i.month(),r=i.day();var a=this.isIntercalaryMonth(e,t),s=this.toChineseMonth(e,t),l=jme(e,s,r,a);return lM.toJD(l.year,l.month,l.day)},fromJD:function(e){var t=lM.fromJD(e),r=Xme(t.year(),t.month(),t.day()),i=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,i,r.day)},fromString:function(e){var t=e.match(Gme),r=this._validateYear(+t[1]),i=+t[2],a=!!t[3],s=this.toMonthIndex(r,i,a),l=+t[4];return this.newDate(r,s,l)},add:function(e,t,r){var i=e.year(),a=e.month(),s=this.isIntercalaryMonth(i,a),l=this.toChineseMonth(i,a),u=Object.getPrototypeOf(g3.prototype).add.call(this,e,t,r);if(r==="y"){var c=u.year(),v=u.month(),m=this.isIntercalaryMonth(c,l),_=s&&m?this.toMonthIndex(c,l,!0):this.toMonthIndex(c,l,!1);_!==v&&u.month(_)}return u}});var Gme=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,Zme=/^\d?\d[iI]?/m,Yme=/^??[]?/m,Wme=/^??[]?/m;yv.calendars.chinese=g3;var gv=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],_v=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function Xme(e,t,r,i){var a,s;if(typeof e=="object")a=e,s=t||{};else{var l=typeof e=="number"&&e>=1888&&e<=2111;if(!l)throw new Error("Solar year outside range 1888-2111");var u=typeof t=="number"&&t>=1&&t<=12;if(!u)throw new Error("Solar month outside range 1 - 12");var c=typeof r=="number"&&r>=1&&r<=31;if(!c)throw new Error("Solar day outside range 1 - 31");a={year:e,month:t,day:r},s=i||{}}var v=_v[a.year-_v[0]],m=a.year<<9|a.month<<5|a.day;s.year=m>=v?a.year:a.year-1,v=_v[s.year-_v[0]];var _=v>>9&4095,T=v>>5&15,M=v&31,k,L=new Date(_,T-1,M),E=new Date(a.year,a.month-1,a.day);k=Math.round((E-L)/(24*3600*1e3));var I=gv[s.year-gv[0]],R;for(R=0;R<13;R++){var N=I&1<<12-R?30:29;if(k<N)break;k-=N}var z=I>>13;return!z||R<z?(s.isIntercalary=!1,s.month=1+R):R===z?(s.isIntercalary=!0,s.month=R):(s.isIntercalary=!1,s.month=R),s.day=1+k,s}function jme(e,t,r,i,a){var s,l;if(typeof e=="object")l=e,s=t||{};else{var u=typeof e=="number"&&e>=1888&&e<=2111;if(!u)throw new Error("Lunar year outside range 1888-2111");var c=typeof t=="number"&&t>=1&&t<=12;if(!c)throw new Error("Lunar month outside range 1 - 12");var v=typeof r=="number"&&r>=1&&r<=30;if(!v)throw new Error("Lunar day outside range 1 - 30");var m;typeof i=="object"?(m=!1,s=i):(m=!!i,s=a||{}),l={year:e,month:t,day:r,isIntercalary:m}}var _;_=l.day-1;var T=gv[l.year-gv[0]],M=T>>13,k;M&&(l.month>M||l.isIntercalary)?k=l.month:k=l.month-1;for(var L=0;L<k;L++){var E=T&1<<12-L?30:29;_+=E}var I=_v[l.year-_v[0]],R=I>>9&4095,N=I>>5&15,z=I&31,B=new Date(R,N-1,z+_);return s.year=B.getFullYear(),s.month=1+B.getMonth(),s.day=B.getDate(),s}});var pY=he(()=>{var ip=Go(),Jme=Ho();function uM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}uM.prototype=new ip.baseCalendar;Jme(uM.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,ip.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,ip.local.invalidYear||ip.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,ip.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,ip.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,a=t-(i-1)*30+1;return this.newDate(r,i,a)}});ip.calendars.coptic=uM});var mY=he(()=>{var Uc=Go(),Kme=Ho();function fM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}fM.prototype=new Uc.baseCalendar;Kme(fM.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Uc.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Uc.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Uc.local.invalidYear),400},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Uc.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Uc.local.invalidDate);return(i.day()+1)%8},weekDay:function(e,t,r){var i=this.dayOfWeek(e,t,r);return i>=2&&i<=6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Uc.local.invalidDate);return{century:Qme[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(e,t,r){var i=this._validate(e,t,r,Uc.local.invalidDate);return e=i.year()+(i.year()<0?1:0),t=i.month(),r=i.day(),r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400,e+=e>15?16:0;var r=Math.floor(e/32)+1,i=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,i)}});var Qme={20:"Fruitbat",21:"Anchovy"};Uc.calendars.discworld=fM});var yY=he(()=>{var np=Go(),$me=Ho();function cM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}cM.prototype=new np.baseCalendar;$me(cM.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,np.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,np.local.invalidYear||np.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,np.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,np.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,a=t-(i-1)*30+1;return this.newDate(r,i,a)}});np.calendars.ethiopian=cM});var gY=he(()=>{var xv=Go(),eye=Ho();function hM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}hM.prototype=new xv.baseCalendar;eye(hM.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xv.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,_3(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,xv.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xv.local.invalidYear);return e=t.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,xv.local.invalidMonth),t===12&&this.leapYear(e)||t===8&&_3(this.daysInYear(e),10)===5?30:t===9&&_3(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,xv.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(e,t,r){var i=this._validate(e,t,r,xv.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=e<=0?e+1:e,s=this.jdEpoch+this._delay1(a)+this._delay2(a)+r+1;if(t<7){for(var l=7;l<=this.monthsInYear(e);l++)s+=this.daysInMonth(e,l);for(var l=1;l<t;l++)s+=this.daysInMonth(e,l)}else for(var l=7;l<t;l++)s+=this.daysInMonth(e,l);return s},_delay1:function(e){var t=Math.floor((235*e-234)/19),r=12084+13753*t,i=t*29+Math.floor(r/25920);return _3(3*(i+1),7)<3&&i++,i},_delay2:function(e){var t=this._delay1(e-1),r=this._delay1(e),i=this._delay1(e+1);return i-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var r=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,r,this.daysInMonth(t,r));)r++;var i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});function _3(e,t){return e-t*Math.floor(e/t)}xv.calendars.hebrew=hM});var _Y=he(()=>{var P1=Go(),tye=Ho();function vM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}vM.prototype=new P1.baseCalendar;tye(vM.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,P1.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,P1.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,P1.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e=e<=0?e+1:e,r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});P1.calendars.islamic=vM});var xY=he(()=>{var D1=Go(),rye=Ho();function dM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}dM.prototype=new D1.baseCalendar;rye(dM.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,D1.local.invalidYear),r=t.year()<0?t.year()+1:t.year();return r%4===0},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,D1.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,D1.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=t+1524,i=Math.floor((r-122.1)/365.25),a=Math.floor(365.25*i),s=Math.floor((r-a)/30.6001),l=s-Math.floor(s<14?1:13),u=i-Math.floor(l>2?4716:4715),c=r-a-Math.floor(30.6001*s);return u<=0&&u--,this.newDate(u,l,c)}});D1.calendars.julian=dM});var wY=he(()=>{var yu=Go(),aye=Ho();function mM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}mM.prototype=new yu.baseCalendar;aye(mM.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,yu.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,yu.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400,e+=e<0?400:0;var i=Math.floor(e/20);return r+"."+i+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,r=0;r<e.length;r++){var i=parseInt(e[r],10);if(Math.abs(i)>19||r>0&&i<0)throw"Invalid Mayan year";t=t*20+i}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,yu.local.invalidYear),18},weekOfYear:function(e,t,r){return this._validate(e,t,r,yu.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,yu.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,yu.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,yu.local.invalidDate);return i.day()},weekDay:function(e,t,r){return this._validate(e,t,r,yu.local.invalidDate),!0},extraInfo:function(e,t,r){var i=this._validate(e,t,r,yu.local.invalidDate),a=i.toJD(),s=this._toHaab(a),l=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=pM(e+8+17*20,365);return[Math.floor(t/20)+1,pM(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[bY(e+20,20),bY(e+4,13)]},toJD:function(e,t,r){var i=this._validate(e,t,r,yu.local.invalidDate);return i.day()+i.month()*20+i.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360,e+=e<0?360:0;var r=Math.floor(e/20),i=e%20;return this.newDate(t,r,i)}});function pM(e,t){return e-t*Math.floor(e/t)}function bY(e,t){return pM(e-1,t)+1}yu.calendars.mayan=mM});var AY=he(()=>{var op=Go(),iye=Ho();function yM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}yM.prototype=new op.baseCalendar;var TY=op.instance("gregorian");iye(yM.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,op.local.invalidYear||op.regionalOptions[""].invalidYear);return TY.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,op.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,op.local.invalidMonth),a=i.year();a<0&&a++;for(var s=i.day(),l=1;l<i.month();l++)s+=this.daysPerMonth[l-1];return s+TY.toJD(a+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var r=e-Math.floor(this.toJD(t,1,1)+.5)+1,i=1;r>this.daysInMonth(t,i);)r-=this.daysInMonth(t,i),i++;return this.newDate(t,i,r)}});op.calendars.nanakshahi=yM});var MY=he(()=>{var sp=Go(),nye=Ho();function gM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}gM.prototype=new sp.baseCalendar;nye(gM.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,sp.local.invalidYear);if(e=t.year(),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined")return this.daysPerYear;for(var r=0,i=this.minMonth;i<=12;i++)r+=this.NEPALI_CALENDAR_DATA[e][i];return r},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,sp.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var i=this._validate(e,t,r,sp.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=sp.instance(),s=0,l=t,u=e;this._createMissingCalendarData(e);var c=e-(l>9||l===9&&r>=this.NEPALI_CALENDAR_DATA[u][0]?56:57);for(t!==9&&(s=r,l--);l!==9;)l<=0&&(l=12,u--),s+=this.NEPALI_CALENDAR_DATA[u][l],l--;return t===9?(s+=r-this.NEPALI_CALENDAR_DATA[u][0],s<0&&(s+=a.daysInYear(c))):s+=this.NEPALI_CALENDAR_DATA[u][9]-this.NEPALI_CALENDAR_DATA[u][0],a.newDate(c,1,1).add(s,"d").toJD()},fromJD:function(e){var t=sp.instance(),r=t.fromJD(e),i=r.year(),a=r.dayOfYear(),s=i+56;this._createMissingCalendarData(s);for(var l=9,u=this.NEPALI_CALENDAR_DATA[s][0],c=this.NEPALI_CALENDAR_DATA[s][l]-u+1;a>c;)l++,l>12&&(l=1,s++),c+=this.NEPALI_CALENDAR_DATA[s][l];var v=this.NEPALI_CALENDAR_DATA[s][l]-(c-a);return this.newDate(s,l,v)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++)typeof this.NEPALI_CALENDAR_DATA[r]=="undefined"&&(this.NEPALI_CALENDAR_DATA[r]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});sp.calendars.nepali=gM});var SY=he(()=>{var qm=Go(),oye=Ho();function x3(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x3.prototype=new qm.baseCalendar;oye(x3.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,qm.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-((i.dayOfWeek()+1)%7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,qm.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,qm.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=e-(e>=0?474:473),s=474+_M(a,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((s*682-110)/2816)+(s-1)*365+Math.floor(a/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1),r=Math.floor(t/1029983),i=_M(t,1029983),a=2820;if(i!==1029982){var s=Math.floor(i/366),l=_M(i,366);a=Math.floor((2134*s+2816*l+2815)/1028522)+s+1}var u=a+2820*r+474;u=u<=0?u-1:u;var c=e-this.toJD(u,1,1)+1,v=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),m=e-this.toJD(u,v,1)+1;return this.newDate(u,v,m)}});function _M(e,t){return e-t*Math.floor(e/t)}qm.calendars.persian=x3;qm.calendars.jalali=x3});var kY=he(()=>{var lp=Go(),sye=Ho(),b3=lp.instance();function xM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}xM.prototype=new lp.baseCalendar;sye(xM.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,lp.local.invalidYear),r=this._t2gYear(t.year());return b3.leapYear(r)},weekOfYear:function(a,t,r){var i=this._validate(a,this.minMonth,this.minDay,lp.local.invalidYear),a=this._t2gYear(i.year());return b3.weekOfYear(a,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,lp.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,lp.local.invalidDate),a=this._t2gYear(i.year());return b3.toJD(a,i.month(),i.day())},fromJD:function(e){var t=b3.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});lp.calendars.taiwan=xM});var CY=he(()=>{var up=Go(),lye=Ho(),w3=up.instance();function bM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}bM.prototype=new up.baseCalendar;lye(bM.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,up.local.invalidYear),r=this._t2gYear(t.year());return w3.leapYear(r)},weekOfYear:function(a,t,r){var i=this._validate(a,this.minMonth,this.minDay,up.local.invalidYear),a=this._t2gYear(i.year());return w3.weekOfYear(a,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,up.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,up.local.invalidDate),a=this._t2gYear(i.year());return w3.toJD(a,i.month(),i.day())},fromJD:function(e){var t=w3.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});up.calendars.thai=bM});var EY=he(()=>{var fp=Go(),uye=Ho();function wM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}wM.prototype=new fp.baseCalendar;uye(wM.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,fp.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,r=1;r<=12;r++)t+=this.daysInMonth(e,r);return t},daysInMonth:function(e,t){for(var r=this._validate(e,t,this.minDay,fp.local.invalidMonth),i=r.toJD()-24e5+.5,a=0,s=0;s<bv.length;s++){if(bv[s]>i)return bv[a]-bv[a-1];a++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,fp.local.invalidDate),a=12*(i.year()-1)+i.month()-15292,s=i.day()+bv[a-1]-1;return s+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,r=0,i=0;i<bv.length&&!(bv[i]>t);i++)r++;var a=r+15292,s=Math.floor((a-1)/12),l=s+1,u=a-12*s,c=t-bv[r-1]+1;return this.newDate(l,u,c)},isValid:function(e,t,r){var i=fp.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(e=e.year!=null?e.year:e,i=e>=1276&&e<=1500),i},_validate:function(e,t,r,i){var a=fp.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||a.year>1500)throw i.replace(/\{0\}/,this.local.name);return a}});fp.calendars.ummalqura=wM;var bv=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]});var PY=he((Xwe,LY)=>{"use strict";LY.exports=Go();vY();dY();pY();mY();yY();gY();_Y();xY();wY();AY();MY();SY();kY();CY();EY()});var NY=he((jwe,qY)=>{"use strict";var zY=PY(),z1=Nt(),IY=Bi(),fye=IY.EPOCHJD,cye=IY.ONEDAY,MM={valType:"enumerated",values:z1.sortObjectKeys(zY.calendars),editType:"calc",dflt:"gregorian"},RY=function(e,t,r,i){var a={};return a[r]=MM,z1.coerce(e,t,a,r,i)},hye=function(e,t,r,i){for(var a=0;a<r.length;a++)RY(e,t,r[a]+"calendar",i.calendar)},vye={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},dye={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},pye={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},T3="##",mye={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:T3,w:T3,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function yye(e,t,r){for(var i=Math.floor((t+.05)/cye)+fye,a=FY(r).fromJD(i),s=0,l,u,c,v,m;(s=e.indexOf("%",s))!==-1;)l=e.charAt(s+1),l==="0"||l==="-"||l==="_"?(c=3,u=e.charAt(s+2),l==="_"&&(l="-")):(u=l,l="0",c=2),v=mye[u],v?(v===T3?m=T3:m=a.formatDate(v[l]),e=e.substr(0,s)+m+e.substr(s+c),s+=m.length):s+=c;return e}var DY={};function FY(e){var t=DY[e];return t||(t=DY[e]=zY.instance(e),t)}function cp(e){return z1.extendFlat({},MM,{description:e})}function SM(e){return"Sets the calendar system to use with `"+e+"` date data."}var AM={xcalendar:cp(SM("x"))},Wf=z1.extendFlat({},AM,{ycalendar:cp(SM("y"))}),TM=z1.extendFlat({},Wf,{zcalendar:cp(SM("z"))}),Nm=cp(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));qY.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:Wf,bar:Wf,box:Wf,heatmap:Wf,contour:Wf,histogram:Wf,histogram2d:Wf,histogram2dcontour:Wf,scatter3d:TM,surface:TM,mesh3d:TM,scattergl:Wf,ohlc:AM,candlestick:AM},layout:{calendar:cp(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:Nm},yaxis:{calendar:Nm},scene:{xaxis:{calendar:Nm},yaxis:{calendar:Nm},zaxis:{calendar:Nm}},polar:{radialaxis:{calendar:Nm}}},transforms:{filter:{valuecalendar:cp(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:cp(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:MM,handleDefaults:RY,handleTraceDefaults:hye,CANONICAL_SUNDAY:dye,CANONICAL_TICK:vye,DFLTRANGE:pye,getCal:FY,worldCalFmt:yye}});var OY=he((Jwe,BY)=>{"use strict";BY.exports=NY()});var gye=he((Kwe,VY)=>{var UY=QV();UY.register([VG(),yZ(),UZ(),XZ(),rY(),nY(),lY(),OY()]);VY.exports=UY});return gye();})();
/*! Bundled license information:

native-promise-only/lib/npo.src.js:
  (*! Native Promise Only
      v0.8.1 (c) Kyle Simpson
      MIT License: http://getify.mit-license.org
  *)

polybooljs/index.js:
  (*
   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
   * @license MIT
   * @preserve Project Home: https://github.com/voidqk/polybooljs
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
*/

if (!(typeof define === "function" && define.amd)) {
 window.Plotly = Plotly;
}
return Plotly;
}));